var vI=Object.defineProperty;var _I=(t,e,n)=>e in t?vI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ct=(t,e,n)=>_I(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function PE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yp={exports:{}},Xl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function TI(){if(O_)return Xl;O_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var c=null;if(a!==void 0&&(c=""+a),r.key!==void 0&&(c=""+r.key),"key"in r){a={};for(var h in r)h!=="key"&&(a[h]=r[h])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:c,ref:r!==void 0?r:null,props:a}}return Xl.Fragment=e,Xl.jsx=n,Xl.jsxs=n,Xl}var B_;function EI(){return B_||(B_=1,yp.exports=TI()),yp.exports}var N=EI(),vp={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function SI(){if(F_)return Fe;F_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=E&&U[E]||U["@@iterator"],typeof U=="function"?U:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,O={};function F(U,W,de){this.props=U,this.context=W,this.refs=O,this.updater=de||I}F.prototype.isReactComponent={},F.prototype.setState=function(U,W){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,W,"setState")},F.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function re(){}re.prototype=F.prototype;function ie(U,W,de){this.props=U,this.context=W,this.refs=O,this.updater=de||I}var ne=ie.prototype=new re;ne.constructor=ie,b(ne,F.prototype),ne.isPureReactComponent=!0;var fe=Array.isArray,se={H:null,A:null,T:null,S:null,V:null},me=Object.prototype.hasOwnProperty;function D(U,W,de,ae,Ae,qe){return de=qe.ref,{$$typeof:t,type:U,key:W,ref:de!==void 0?de:null,props:qe}}function M(U,W){return D(U.type,W,void 0,void 0,void 0,U.props)}function x(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function L(U){var W={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(de){return W[de]})}var k=/\/+/g;function q(U,W){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):W.toString(36)}function V(){}function St(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(V,V):(U.status="pending",U.then(function(W){U.status==="pending"&&(U.status="fulfilled",U.value=W)},function(W){U.status==="pending"&&(U.status="rejected",U.reason=W)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function Xe(U,W,de,ae,Ae){var qe=typeof U;(qe==="undefined"||qe==="boolean")&&(U=null);var Me=!1;if(U===null)Me=!0;else switch(qe){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(U.$$typeof){case t:case e:Me=!0;break;case v:return Me=U._init,Xe(Me(U._payload),W,de,ae,Ae)}}if(Me)return Ae=Ae(U),Me=ae===""?"."+q(U,0):ae,fe(Ae)?(de="",Me!=null&&(de=Me.replace(k,"$&/")+"/"),Xe(Ae,W,de,"",function(In){return In})):Ae!=null&&(x(Ae)&&(Ae=M(Ae,de+(Ae.key==null||U&&U.key===Ae.key?"":(""+Ae.key).replace(k,"$&/")+"/")+Me)),W.push(Ae)),1;Me=0;var kt=ae===""?".":ae+":";if(fe(U))for(var lt=0;lt<U.length;lt++)ae=U[lt],qe=kt+q(ae,lt),Me+=Xe(ae,W,de,qe,Ae);else if(lt=S(U),typeof lt=="function")for(U=lt.call(U),lt=0;!(ae=U.next()).done;)ae=ae.value,qe=kt+q(ae,lt++),Me+=Xe(ae,W,de,qe,Ae);else if(qe==="object"){if(typeof U.then=="function")return Xe(St(U),W,de,ae,Ae);throw W=String(U),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Me}function X(U,W,de){if(U==null)return U;var ae=[],Ae=0;return Xe(U,ae,"","",function(qe){return W.call(de,qe,Ae++)}),ae}function he(U){if(U._status===-1){var W=U._result;W=W(),W.then(function(de){(U._status===0||U._status===-1)&&(U._status=1,U._result=de)},function(de){(U._status===0||U._status===-1)&&(U._status=2,U._result=de)}),U._status===-1&&(U._status=0,U._result=W)}if(U._status===1)return U._result.default;throw U._result}var ye=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function Oe(){}return Fe.Children={map:X,forEach:function(U,W,de){X(U,function(){W.apply(this,arguments)},de)},count:function(U){var W=0;return X(U,function(){W++}),W},toArray:function(U){return X(U,function(W){return W})||[]},only:function(U){if(!x(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Fe.Component=F,Fe.Fragment=n,Fe.Profiler=r,Fe.PureComponent=ie,Fe.StrictMode=i,Fe.Suspense=m,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(U){return se.H.useMemoCache(U)}},Fe.cache=function(U){return function(){return U.apply(null,arguments)}},Fe.cloneElement=function(U,W,de){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ae=b({},U.props),Ae=U.key,qe=void 0;if(W!=null)for(Me in W.ref!==void 0&&(qe=void 0),W.key!==void 0&&(Ae=""+W.key),W)!me.call(W,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&W.ref===void 0||(ae[Me]=W[Me]);var Me=arguments.length-2;if(Me===1)ae.children=de;else if(1<Me){for(var kt=Array(Me),lt=0;lt<Me;lt++)kt[lt]=arguments[lt+2];ae.children=kt}return D(U.type,Ae,void 0,void 0,qe,ae)},Fe.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},Fe.createElement=function(U,W,de){var ae,Ae={},qe=null;if(W!=null)for(ae in W.key!==void 0&&(qe=""+W.key),W)me.call(W,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(Ae[ae]=W[ae]);var Me=arguments.length-2;if(Me===1)Ae.children=de;else if(1<Me){for(var kt=Array(Me),lt=0;lt<Me;lt++)kt[lt]=arguments[lt+2];Ae.children=kt}if(U&&U.defaultProps)for(ae in Me=U.defaultProps,Me)Ae[ae]===void 0&&(Ae[ae]=Me[ae]);return D(U,qe,void 0,void 0,null,Ae)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(U){return{$$typeof:h,render:U}},Fe.isValidElement=x,Fe.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:he}},Fe.memo=function(U,W){return{$$typeof:p,type:U,compare:W===void 0?null:W}},Fe.startTransition=function(U){var W=se.T,de={};se.T=de;try{var ae=U(),Ae=se.S;Ae!==null&&Ae(de,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(Oe,ye)}catch(qe){ye(qe)}finally{se.T=W}},Fe.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},Fe.use=function(U){return se.H.use(U)},Fe.useActionState=function(U,W,de){return se.H.useActionState(U,W,de)},Fe.useCallback=function(U,W){return se.H.useCallback(U,W)},Fe.useContext=function(U){return se.H.useContext(U)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(U,W){return se.H.useDeferredValue(U,W)},Fe.useEffect=function(U,W,de){var ae=se.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(U,W)},Fe.useId=function(){return se.H.useId()},Fe.useImperativeHandle=function(U,W,de){return se.H.useImperativeHandle(U,W,de)},Fe.useInsertionEffect=function(U,W){return se.H.useInsertionEffect(U,W)},Fe.useLayoutEffect=function(U,W){return se.H.useLayoutEffect(U,W)},Fe.useMemo=function(U,W){return se.H.useMemo(U,W)},Fe.useOptimistic=function(U,W){return se.H.useOptimistic(U,W)},Fe.useReducer=function(U,W,de){return se.H.useReducer(U,W,de)},Fe.useRef=function(U){return se.H.useRef(U)},Fe.useState=function(U){return se.H.useState(U)},Fe.useSyncExternalStore=function(U,W,de){return se.H.useSyncExternalStore(U,W,de)},Fe.useTransition=function(){return se.H.useTransition()},Fe.version="19.1.1",Fe}var q_;function Am(){return q_||(q_=1,vp.exports=SI()),vp.exports}var _e=Am();const Yi=PE(_e);var _p={exports:{}},Wl={},Tp={exports:{}},Ep={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function AI(){return G_||(G_=1,function(t){function e(X,he){var ye=X.length;X.push(he);e:for(;0<ye;){var Oe=ye-1>>>1,U=X[Oe];if(0<r(U,he))X[Oe]=he,X[ye]=U,ye=Oe;else break e}}function n(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var he=X[0],ye=X.pop();if(ye!==he){X[0]=ye;e:for(var Oe=0,U=X.length,W=U>>>1;Oe<W;){var de=2*(Oe+1)-1,ae=X[de],Ae=de+1,qe=X[Ae];if(0>r(ae,ye))Ae<U&&0>r(qe,ae)?(X[Oe]=qe,X[Ae]=ye,Oe=Ae):(X[Oe]=ae,X[de]=ye,Oe=de);else if(Ae<U&&0>r(qe,ye))X[Oe]=qe,X[Ae]=ye,Oe=Ae;else break e}}return he}function r(X,he){var ye=X.sortIndex-he.sortIndex;return ye!==0?ye:X.id-he.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var m=[],p=[],v=1,E=null,S=3,I=!1,b=!1,O=!1,F=!1,re=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function fe(X){for(var he=n(p);he!==null;){if(he.callback===null)i(p);else if(he.startTime<=X)i(p),he.sortIndex=he.expirationTime,e(m,he);else break;he=n(p)}}function se(X){if(O=!1,fe(X),!b)if(n(m)!==null)b=!0,me||(me=!0,q());else{var he=n(p);he!==null&&Xe(se,he.startTime-X)}}var me=!1,D=-1,M=5,x=-1;function L(){return F?!0:!(t.unstable_now()-x<M)}function k(){if(F=!1,me){var X=t.unstable_now();x=X;var he=!0;try{e:{b=!1,O&&(O=!1,ie(D),D=-1),I=!0;var ye=S;try{t:{for(fe(X),E=n(m);E!==null&&!(E.expirationTime>X&&L());){var Oe=E.callback;if(typeof Oe=="function"){E.callback=null,S=E.priorityLevel;var U=Oe(E.expirationTime<=X);if(X=t.unstable_now(),typeof U=="function"){E.callback=U,fe(X),he=!0;break t}E===n(m)&&i(m),fe(X)}else i(m);E=n(m)}if(E!==null)he=!0;else{var W=n(p);W!==null&&Xe(se,W.startTime-X),he=!1}}break e}finally{E=null,S=ye,I=!1}he=void 0}}finally{he?q():me=!1}}}var q;if(typeof ne=="function")q=function(){ne(k)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,St=V.port2;V.port1.onmessage=k,q=function(){St.postMessage(null)}}else q=function(){re(k,0)};function Xe(X,he){D=re(function(){X(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(X){switch(S){case 1:case 2:case 3:var he=3;break;default:he=S}var ye=S;S=he;try{return X()}finally{S=ye}},t.unstable_requestPaint=function(){F=!0},t.unstable_runWithPriority=function(X,he){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ye=S;S=X;try{return he()}finally{S=ye}},t.unstable_scheduleCallback=function(X,he,ye){var Oe=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Oe+ye:Oe):ye=Oe,X){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ye+U,X={id:v++,callback:he,priorityLevel:X,startTime:ye,expirationTime:U,sortIndex:-1},ye>Oe?(X.sortIndex=ye,e(p,X),n(m)===null&&X===n(p)&&(O?(ie(D),D=-1):O=!0,Xe(se,ye-Oe))):(X.sortIndex=U,e(m,X),b||I||(b=!0,me||(me=!0,q()))),X},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(X){var he=S;return function(){var ye=S;S=he;try{return X.apply(this,arguments)}finally{S=ye}}}}(Ep)),Ep}var z_;function CI(){return z_||(z_=1,Tp.exports=AI()),Tp.exports}var Sp={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function wI(){if(H_)return _n;H_=1;var t=Am();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(m,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:m,containerInfo:p,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,_n.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(m,p,null,v)},_n.flushSync=function(m){var p=c.T,v=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=v,i.d.f()}},_n.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},_n.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},_n.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,E=h(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:I}):v==="script"&&i.d.X(m,{crossOrigin:E,integrity:S,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},_n.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},_n.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=h(v,p.crossOrigin);i.d.L(m,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},_n.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=h(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},_n.requestFormReset=function(m){i.d.r(m)},_n.unstable_batchedUpdates=function(m,p){return m(p)},_n.useFormState=function(m,p,v){return c.H.useFormState(m,p,v)},_n.useFormStatus=function(){return c.H.useHostTransitionStatus()},_n.version="19.1.1",_n}var $_;function II(){if($_)return Sp.exports;$_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Sp.exports=wI(),Sp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function RI(){if(Y_)return Wl;Y_=1;var t=CI(),e=Am(),n=II();function i(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,l=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(l=s.return),o=s.return;while(o)}return s.tag===3?l:null}function c(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function h(o){if(a(o)!==o)throw Error(i(188))}function m(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(i(188));return s!==o?null:o}for(var l=o,d=s;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(d=y.return,d!==null){l=d;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return h(y),o;if(_===d)return h(y),s;_=_.sibling}throw Error(i(188))}if(l.return!==d.return)l=y,d=_;else{for(var C=!1,w=y.child;w;){if(w===l){C=!0,l=y,d=_;break}if(w===d){C=!0,d=y,l=_;break}w=w.sibling}if(!C){for(w=_.child;w;){if(w===l){C=!0,l=_,d=y;break}if(w===d){C=!0,d=_,l=y;break}w=w.sibling}if(!C)throw Error(i(189))}}if(l.alternate!==d)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?o:s}function p(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=p(o),s!==null)return s;o=o.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),ie=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function q(o){return o===null||typeof o!="object"?null:(o=k&&o[k]||o["@@iterator"],typeof o=="function"?o:null)}var V=Symbol.for("react.client.reference");function St(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===V?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case b:return"Fragment";case F:return"Profiler";case O:return"StrictMode";case se:return"Suspense";case me:return"SuspenseList";case x:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case I:return"Portal";case ne:return(o.displayName||"Context")+".Provider";case ie:return(o._context.displayName||"Context")+".Consumer";case fe:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case D:return s=o.displayName||null,s!==null?s:St(o.type)||"Memo";case M:s=o._payload,o=o._init;try{return St(o(s))}catch{}}return null}var Xe=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Oe=[],U=-1;function W(o){return{current:o}}function de(o){0>U||(o.current=Oe[U],Oe[U]=null,U--)}function ae(o,s){U++,Oe[U]=o.current,o.current=s}var Ae=W(null),qe=W(null),Me=W(null),kt=W(null);function lt(o,s){switch(ae(Me,s),ae(qe,o),ae(Ae,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?d_(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=d_(s),o=h_(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}de(Ae),ae(Ae,o)}function In(){de(Ae),de(qe),de(Me)}function Zn(o){o.memoizedState!==null&&ae(kt,o);var s=Ae.current,l=h_(s,o.type);s!==l&&(ae(qe,o),ae(Ae,l))}function gn(o){qe.current===o&&(de(Ae),de(qe)),kt.current===o&&(de(kt),$l._currentValue=ye)}var Ii=Object.prototype.hasOwnProperty,Ri=t.unstable_scheduleCallback,hi=t.unstable_cancelCallback,pi=t.unstable_shouldYield,zo=t.unstable_requestPaint,Pn=t.unstable_now,bs=t.unstable_getCurrentPriorityLevel,Ho=t.unstable_ImmediatePriority,$o=t.unstable_UserBlockingPriority,no=t.unstable_NormalPriority,Lr=t.unstable_LowPriority,xi=t.unstable_IdlePriority,Yo=t.log,Ms=t.unstable_setDisableYieldValue,Rt=null,it=null;function $t(o){if(typeof Yo=="function"&&Ms(o),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(Rt,o)}catch{}}var Vt=Math.clz32?Math.clz32:mi,Ur=Math.log,Xa=Math.LN2;function mi(o){return o>>>=0,o===0?32:31-(Ur(o)/Xa|0)|0}var io=256,Rn=4194304;function qn(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function oo(o,s,l){var d=o.pendingLanes;if(d===0)return 0;var y=0,_=o.suspendedLanes,C=o.pingedLanes;o=o.warmLanes;var w=d&134217727;return w!==0?(d=w&~_,d!==0?y=qn(d):(C&=w,C!==0?y=qn(C):l||(l=w&~o,l!==0&&(y=qn(l))))):(w=d&~_,w!==0?y=qn(w):C!==0?y=qn(C):l||(l=d&~o,l!==0&&(y=qn(l)))),y===0?0:s!==0&&s!==y&&(s&_)===0&&(_=y&-y,l=s&-s,_>=l||_===32&&(l&4194048)!==0)?s:y}function ro(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function Ko(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zt(){var o=io;return io<<=1,(io&4194048)===0&&(io=256),o}function Y(){var o=Rn;return Rn<<=1,(Rn&62914560)===0&&(Rn=4194304),o}function j(o){for(var s=[],l=0;31>l;l++)s.push(o);return s}function te(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function pe(o,s,l,d,y,_){var C=o.pendingLanes;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=l,o.entangledLanes&=l,o.errorRecoveryDisabledLanes&=l,o.shellSuspendCounter=0;var w=o.entanglements,P=o.expirationTimes,$=o.hiddenUpdates;for(l=C&~l;0<l;){var Z=31-Vt(l),oe=1<<Z;w[Z]=0,P[Z]=-1;var K=$[Z];if(K!==null)for($[Z]=null,Z=0;Z<K.length;Z++){var J=K[Z];J!==null&&(J.lane&=-536870913)}l&=~oe}d!==0&&Ce(o,d,0),_!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=_&~(C&~s))}function Ce(o,s,l){o.pendingLanes|=s,o.suspendedLanes&=~s;var d=31-Vt(s);o.entangledLanes|=s,o.entanglements[d]=o.entanglements[d]|1073741824|l&4194090}function Pe(o,s){var l=o.entangledLanes|=s;for(o=o.entanglements;l;){var d=31-Vt(l),y=1<<d;y&s|o[d]&s&&(o[d]|=s),l&=~y}}function Be(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function $e(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function ut(){var o=he.p;return o!==0?o:(o=window.event,o===void 0?32:k_(o.type))}function Ft(o,s){var l=he.p;try{return he.p=o,s()}finally{he.p=l}}var Ve=Math.random().toString(36).slice(2),Re="__reactFiber$"+Ve,we="__reactProps$"+Ve,Ze="__reactContainer$"+Ve,Ge="__reactEvents$"+Ve,Ye="__reactListeners$"+Ve,ot="__reactHandles$"+Ve,Vn="__reactResources$"+Ve,gi="__reactMarker$"+Ve;function yn(o){delete o[Re],delete o[we],delete o[Ge],delete o[Ye],delete o[ot]}function so(o){var s=o[Re];if(s)return s;for(var l=o.parentNode;l;){if(s=l[Ze]||l[Re]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(o=y_(o);o!==null;){if(l=o[Re])return l;o=y_(o)}return s}o=l,l=o.parentNode}return null}function bi(o){if(o=o[Re]||o[Ze]){var s=o.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return o}return null}function Mi(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(i(33))}function xn(o){var s=o[Vn];return s||(s=o[Vn]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Lt(o){o[gi]=!0}var Wa=new Set,Ns={};function yi(o,s){ao(o,s),ao(o+"Capture",s)}function ao(o,s){for(Ns[o]=s,o=0;o<s.length;o++)Wa.add(s[o])}var Ou=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bu={},Or={};function Fu(o){return Ii.call(Or,o)?!0:Ii.call(Bu,o)?!1:Ou.test(o)?Or[o]=!0:(Bu[o]=!0,!1)}function Jo(o,s,l){if(Fu(s))if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+l)}}function Ni(o,s,l){if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+l)}}function sn(o,s,l,d){if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttributeNS(s,l,""+d)}}var Br,qu;function lo(o){if(Br===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Br=s&&s[1]||"",qu=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Br+o+qu}var ks=!1;function Ds(o,s){if(!o||ks)return"";ks=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(J){var K=J}Reflect.construct(o,[],oe)}else{try{oe.call()}catch(J){K=J}o.call(oe.prototype)}}else{try{throw Error()}catch(J){K=J}(oe=o())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(J){if(J&&K&&typeof J.stack=="string")return[J.stack,K.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=d.DetermineComponentFrameRoot(),C=_[0],w=_[1];if(C&&w){var P=C.split(`
`),$=w.split(`
`);for(y=d=0;d<P.length&&!P[d].includes("DetermineComponentFrameRoot");)d++;for(;y<$.length&&!$[y].includes("DetermineComponentFrameRoot");)y++;if(d===P.length||y===$.length)for(d=P.length-1,y=$.length-1;1<=d&&0<=y&&P[d]!==$[y];)y--;for(;1<=d&&0<=y;d--,y--)if(P[d]!==$[y]){if(d!==1||y!==1)do if(d--,y--,0>y||P[d]!==$[y]){var Z=`
`+P[d].replace(" at new "," at ");return o.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",o.displayName)),Z}while(1<=d&&0<=y);break}}}finally{ks=!1,Error.prepareStackTrace=l}return(l=o?o.displayName||o.name:"")?lo(l):""}function Za(o){switch(o.tag){case 26:case 27:case 5:return lo(o.type);case 16:return lo("Lazy");case 13:return lo("Suspense");case 19:return lo("SuspenseList");case 0:case 15:return Ds(o.type,!1);case 11:return Ds(o.type.render,!1);case 1:return Ds(o.type,!0);case 31:return lo("Activity");default:return""}}function Ps(o){try{var s="";do s+=Za(o),o=o.return;while(o);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function bn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function ja(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ed(o){var s=ja(o)?"checked":"value",l=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),d=""+o[s];if(!o.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var y=l.get,_=l.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return y.call(this)},set:function(C){d=""+C,_.call(this,C)}}),Object.defineProperty(o,s,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function Vs(o){o._valueTracker||(o._valueTracker=Ed(o))}function el(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return o&&(d=ja(o)?o.checked?"true":"false":o.value),o=d,o!==l?(s.setValue(o),!0):!1}function Fr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Sd=/[\n"\\]/g;function qt(o){return o.replace(Sd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Gn(o,s,l,d,y,_,C,w){o.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?o.type=C:o.removeAttribute("type"),s!=null?C==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+bn(s)):o.value!==""+bn(s)&&(o.value=""+bn(s)):C!=="submit"&&C!=="reset"||o.removeAttribute("value"),s!=null?Qo(o,C,bn(s)):l!=null?Qo(o,C,bn(l)):d!=null&&o.removeAttribute("value"),y==null&&_!=null&&(o.defaultChecked=!!_),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?o.name=""+bn(w):o.removeAttribute("name")}function qr(o,s,l,d,y,_,C,w){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),s!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||s!=null))return;l=l!=null?""+bn(l):"",s=s!=null?""+bn(s):l,w||s===o.value||(o.value=s),o.defaultValue=s}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=w?o.checked:!!d,o.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.name=C)}function Qo(o,s,l){s==="number"&&Fr(o.ownerDocument)===o||o.defaultValue===""+l||(o.defaultValue=""+l)}function uo(o,s,l,d){if(o=o.options,s){s={};for(var y=0;y<l.length;y++)s["$"+l[y]]=!0;for(l=0;l<o.length;l++)y=s.hasOwnProperty("$"+o[l].value),o[l].selected!==y&&(o[l].selected=y),y&&d&&(o[l].defaultSelected=!0)}else{for(l=""+bn(l),s=null,y=0;y<o.length;y++){if(o[y].value===l){o[y].selected=!0,d&&(o[y].defaultSelected=!0);return}s!==null||o[y].disabled||(s=o[y])}s!==null&&(s.selected=!0)}}function vt(o,s,l){if(s!=null&&(s=""+bn(s),s!==o.value&&(o.value=s),l==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=l!=null?""+bn(l):""}function Gr(o,s,l,d){if(s==null){if(d!=null){if(l!=null)throw Error(i(92));if(Xe(d)){if(1<d.length)throw Error(i(93));d=d[0]}l=d}l==null&&(l=""),s=l}l=bn(s),o.defaultValue=l,d=o.textContent,d===l&&d!==""&&d!==null&&(o.value=d)}function jn(o,s){if(s){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=s;return}}o.textContent=s}var zr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gu(o,s,l){var d=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":d?o.setProperty(s,l):typeof l!="number"||l===0||zr.has(s)?s==="float"?o.cssFloat=l:o[s]=(""+l).trim():o[s]=l+"px"}function tl(o,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(o=o.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var y in s)d=s[y],s.hasOwnProperty(y)&&l[y]!==d&&Gu(o,y,d)}else for(var _ in s)s.hasOwnProperty(_)&&Gu(o,_,s[_])}function nl(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ad=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ls(o){return Cd.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var co=null;function ei(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var fo=null,ho=null;function il(o){var s=bi(o);if(s&&(o=s.stateNode)){var l=o[we]||null;e:switch(o=s.stateNode,s.type){case"input":if(Gn(o,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+qt(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==o&&d.form===o.form){var y=d[we]||null;if(!y)throw Error(i(90));Gn(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<l.length;s++)d=l[s],d.form===o.form&&el(d)}break e;case"textarea":vt(o,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&uo(o,!!l.multiple,s,!1)}}}var ki=!1;function zu(o,s,l){if(ki)return o(s,l);ki=!0;try{var d=o(s);return d}finally{if(ki=!1,(fo!==null||ho!==null)&&(Lc(),fo&&(s=fo,o=ho,ho=fo=null,il(s),o)))for(s=0;s<o.length;s++)il(o[s])}}function Hr(o,s){var l=o.stateNode;if(l===null)return null;var d=l[we]||null;if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ti=!1;if(vi)try{var $r={};Object.defineProperty($r,"passive",{get:function(){ti=!0}}),window.addEventListener("test",$r,$r),window.removeEventListener("test",$r,$r)}catch{ti=!1}var Di=null,Xo=null,po=null;function ol(){if(po)return po;var o,s=Xo,l=s.length,d,y="value"in Di?Di.value:Di.textContent,_=y.length;for(o=0;o<l&&s[o]===y[o];o++);var C=l-o;for(d=1;d<=C&&s[l-d]===y[_-d];d++);return po=y.slice(o,1<d?1-d:void 0)}function Pi(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function Vi(){return!0}function rl(){return!1}function jt(o){function s(l,d,y,_,C){this._reactName=l,this._targetInst=y,this.type=d,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var w in o)o.hasOwnProperty(w)&&(l=o[w],this[w]=l?l(_):_[w]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Vi:rl,this.isPropagationStopped=rl,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),s}var ct={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Us=jt(ct),Yr=v({},ct,{view:0,detail:0}),Hu=jt(Yr),Os,Bs,Li,Kr=v({},Yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xr,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Li&&(Li&&o.type==="mousemove"?(Os=o.screenX-Li.screenX,Bs=o.screenY-Li.screenY):Bs=Os=0,Li=o),Os)},movementY:function(o){return"movementY"in o?o.movementY:Bs}}),ni=jt(Kr),$u=v({},Kr,{dataTransfer:0}),wd=jt($u),Jr=v({},Yr,{relatedTarget:0}),Fs=jt(Jr),sl=v({},ct,{animationName:0,elapsedTime:0,pseudoElement:0}),qs=jt(sl),Yu=v({},ct,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Gs=jt(Yu),Id=v({},ct,{data:0}),al=jt(Id),Qr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ku={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ll(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=Ju[o])?!!s[o]:!1}function Xr(){return ll}var Qu=v({},Yr,{key:function(o){if(o.key){var s=Qr[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=Pi(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Ku[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xr,charCode:function(o){return o.type==="keypress"?Pi(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Pi(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),zs=jt(Qu),Xu=v({},Kr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ul=jt(Xu),mo=v({},Yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xr}),Wu=jt(mo),Zu=v({},ct,{propertyName:0,elapsedTime:0,pseudoElement:0}),ju=jt(Zu),ec=v({},Kr,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Hs=jt(ec),Mn=v({},ct,{newState:0,oldState:0}),tc=jt(Mn),nc=[9,13,27,32],Ui=vi&&"CompositionEvent"in window,g=null;vi&&"documentMode"in document&&(g=document.documentMode);var T=vi&&"TextEvent"in window&&!g,A=vi&&(!Ui||g&&8<g&&11>=g),R=" ",z=!1;function Q(o,s){switch(o){case"keyup":return nc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var je=!1;function Yt(o,s){switch(o){case"compositionend":return ce(s);case"keypress":return s.which!==32?null:(z=!0,R);case"textInput":return o=s.data,o===R&&z?null:o;default:return null}}function et(o,s){if(je)return o==="compositionend"||!Ui&&Q(o,s)?(o=ol(),po=Xo=Di=null,je=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return A&&s.locale!=="ko"?null:s.data;default:return null}}var en={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kt(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!en[o.type]:s==="textarea"}function go(o,s,l,d){fo?ho?ho.push(d):ho=[d]:fo=d,s=Gc(s,"onChange"),0<s.length&&(l=new Us("onChange","change",null,l,d),o.push({event:l,listeners:s}))}var an=null,Oi=null;function cl(o){a_(o,0)}function ic(o){var s=Mi(o);if(el(s))return o}function xg(o,s){if(o==="change")return s}var bg=!1;if(vi){var Rd;if(vi){var xd="oninput"in document;if(!xd){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),xd=typeof Mg.oninput=="function"}Rd=xd}else Rd=!1;bg=Rd&&(!document.documentMode||9<document.documentMode)}function Ng(){an&&(an.detachEvent("onpropertychange",kg),Oi=an=null)}function kg(o){if(o.propertyName==="value"&&ic(Oi)){var s=[];go(s,Oi,o,ei(o)),zu(cl,s)}}function JC(o,s,l){o==="focusin"?(Ng(),an=s,Oi=l,an.attachEvent("onpropertychange",kg)):o==="focusout"&&Ng()}function QC(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return ic(Oi)}function XC(o,s){if(o==="click")return ic(s)}function WC(o,s){if(o==="input"||o==="change")return ic(s)}function ZC(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var zn=typeof Object.is=="function"?Object.is:ZC;function fl(o,s){if(zn(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var l=Object.keys(o),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var y=l[d];if(!Ii.call(s,y)||!zn(o[y],s[y]))return!1}return!0}function Dg(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Pg(o,s){var l=Dg(o);o=0;for(var d;l;){if(l.nodeType===3){if(d=o+l.textContent.length,o<=s&&d>=s)return{node:l,offset:s-o};o=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Dg(l)}}function Vg(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?Vg(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function Lg(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=Fr(o.document);s instanceof o.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)o=s.contentWindow;else break;s=Fr(o.document)}return s}function bd(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var jC=vi&&"documentMode"in document&&11>=document.documentMode,$s=null,Md=null,dl=null,Nd=!1;function Ug(o,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Nd||$s==null||$s!==Fr(d)||(d=$s,"selectionStart"in d&&bd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),dl&&fl(dl,d)||(dl=d,d=Gc(Md,"onSelect"),0<d.length&&(s=new Us("onSelect","select",null,s,l),o.push({event:s,listeners:d}),s.target=$s)))}function Wr(o,s){var l={};return l[o.toLowerCase()]=s.toLowerCase(),l["Webkit"+o]="webkit"+s,l["Moz"+o]="moz"+s,l}var Ys={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionrun:Wr("Transition","TransitionRun"),transitionstart:Wr("Transition","TransitionStart"),transitioncancel:Wr("Transition","TransitionCancel"),transitionend:Wr("Transition","TransitionEnd")},kd={},Og={};vi&&(Og=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function Zr(o){if(kd[o])return kd[o];if(!Ys[o])return o;var s=Ys[o],l;for(l in s)if(s.hasOwnProperty(l)&&l in Og)return kd[o]=s[l];return o}var Bg=Zr("animationend"),Fg=Zr("animationiteration"),qg=Zr("animationstart"),ew=Zr("transitionrun"),tw=Zr("transitionstart"),nw=Zr("transitioncancel"),Gg=Zr("transitionend"),zg=new Map,Dd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dd.push("scrollEnd");function _i(o,s){zg.set(o,s),yi(s,[o])}var Hg=new WeakMap;function ii(o,s){if(typeof o=="object"&&o!==null){var l=Hg.get(o);return l!==void 0?l:(s={value:o,source:s,stack:Ps(s)},Hg.set(o,s),s)}return{value:o,source:s,stack:Ps(s)}}var oi=[],Ks=0,Pd=0;function oc(){for(var o=Ks,s=Pd=Ks=0;s<o;){var l=oi[s];oi[s++]=null;var d=oi[s];oi[s++]=null;var y=oi[s];oi[s++]=null;var _=oi[s];if(oi[s++]=null,d!==null&&y!==null){var C=d.pending;C===null?y.next=y:(y.next=C.next,C.next=y),d.pending=y}_!==0&&$g(l,y,_)}}function rc(o,s,l,d){oi[Ks++]=o,oi[Ks++]=s,oi[Ks++]=l,oi[Ks++]=d,Pd|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function Vd(o,s,l,d){return rc(o,s,l,d),sc(o)}function Js(o,s){return rc(o,null,null,s),sc(o)}function $g(o,s,l){o.lanes|=l;var d=o.alternate;d!==null&&(d.lanes|=l);for(var y=!1,_=o.return;_!==null;)_.childLanes|=l,d=_.alternate,d!==null&&(d.childLanes|=l),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(y=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,y&&s!==null&&(y=31-Vt(l),o=_.hiddenUpdates,d=o[y],d===null?o[y]=[s]:d.push(s),s.lane=l|536870912),_):null}function sc(o){if(50<Ul)throw Ul=0,qh=null,Error(i(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var Qs={};function iw(o,s,l,d){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(o,s,l,d){return new iw(o,s,l,d)}function Ld(o){return o=o.prototype,!(!o||!o.isReactComponent)}function yo(o,s){var l=o.alternate;return l===null?(l=Hn(o.tag,s,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=s,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&65011712,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l.refCleanup=o.refCleanup,l}function Yg(o,s){o.flags&=65011714;var l=o.alternate;return l===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,s=l.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function ac(o,s,l,d,y,_){var C=0;if(d=o,typeof o=="function")Ld(o)&&(C=1);else if(typeof o=="string")C=rI(o,l,Ae.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case x:return o=Hn(31,l,s,y),o.elementType=x,o.lanes=_,o;case b:return jr(l.children,y,_,s);case O:C=8,y|=24;break;case F:return o=Hn(12,l,s,y|2),o.elementType=F,o.lanes=_,o;case se:return o=Hn(13,l,s,y),o.elementType=se,o.lanes=_,o;case me:return o=Hn(19,l,s,y),o.elementType=me,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case re:case ne:C=10;break e;case ie:C=9;break e;case fe:C=11;break e;case D:C=14;break e;case M:C=16,d=null;break e}C=29,l=Error(i(130,o===null?"null":typeof o,"")),d=null}return s=Hn(C,l,s,y),s.elementType=o,s.type=d,s.lanes=_,s}function jr(o,s,l,d){return o=Hn(7,o,d,s),o.lanes=l,o}function Ud(o,s,l){return o=Hn(6,o,null,s),o.lanes=l,o}function Od(o,s,l){return s=Hn(4,o.children!==null?o.children:[],o.key,s),s.lanes=l,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var Xs=[],Ws=0,lc=null,uc=0,ri=[],si=0,es=null,vo=1,_o="";function ts(o,s){Xs[Ws++]=uc,Xs[Ws++]=lc,lc=o,uc=s}function Kg(o,s,l){ri[si++]=vo,ri[si++]=_o,ri[si++]=es,es=o;var d=vo;o=_o;var y=32-Vt(d)-1;d&=~(1<<y),l+=1;var _=32-Vt(s)+y;if(30<_){var C=y-y%5;_=(d&(1<<C)-1).toString(32),d>>=C,y-=C,vo=1<<32-Vt(s)+y|l<<y|d,_o=_+o}else vo=1<<_|l<<y|d,_o=o}function Bd(o){o.return!==null&&(ts(o,1),Kg(o,1,0))}function Fd(o){for(;o===lc;)lc=Xs[--Ws],Xs[Ws]=null,uc=Xs[--Ws],Xs[Ws]=null;for(;o===es;)es=ri[--si],ri[si]=null,_o=ri[--si],ri[si]=null,vo=ri[--si],ri[si]=null}var Nn=null,Dt=null,at=!1,ns=null,Bi=!1,qd=Error(i(519));function is(o){var s=Error(i(418,""));throw ml(ii(s,o)),qd}function Jg(o){var s=o.stateNode,l=o.type,d=o.memoizedProps;switch(s[Re]=o,s[we]=d,l){case"dialog":Je("cancel",s),Je("close",s);break;case"iframe":case"object":case"embed":Je("load",s);break;case"video":case"audio":for(l=0;l<Bl.length;l++)Je(Bl[l],s);break;case"source":Je("error",s);break;case"img":case"image":case"link":Je("error",s),Je("load",s);break;case"details":Je("toggle",s);break;case"input":Je("invalid",s),qr(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Vs(s);break;case"select":Je("invalid",s);break;case"textarea":Je("invalid",s),Gr(s,d.value,d.defaultValue,d.children),Vs(s)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||d.suppressHydrationWarning===!0||f_(s.textContent,l)?(d.popover!=null&&(Je("beforetoggle",s),Je("toggle",s)),d.onScroll!=null&&Je("scroll",s),d.onScrollEnd!=null&&Je("scrollend",s),d.onClick!=null&&(s.onclick=zc),s=!0):s=!1,s||is(o)}function Qg(o){for(Nn=o.return;Nn;)switch(Nn.tag){case 5:case 13:Bi=!1;return;case 27:case 3:Bi=!0;return;default:Nn=Nn.return}}function hl(o){if(o!==Nn)return!1;if(!at)return Qg(o),at=!0,!1;var s=o.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=o.type,l=!(l!=="form"&&l!=="button")||ip(o.type,o.memoizedProps)),l=!l),l&&Dt&&is(o),Qg(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8)if(l=o.data,l==="/$"){if(s===0){Dt=Ei(o.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;o=o.nextSibling}Dt=null}}else s===27?(s=Dt,dr(o.type)?(o=ap,ap=null,Dt=o):Dt=s):Dt=Nn?Ei(o.stateNode.nextSibling):null;return!0}function pl(){Dt=Nn=null,at=!1}function Xg(){var o=ns;return o!==null&&(On===null?On=o:On.push.apply(On,o),ns=null),o}function ml(o){ns===null?ns=[o]:ns.push(o)}var Gd=W(null),os=null,To=null;function Wo(o,s,l){ae(Gd,s._currentValue),s._currentValue=l}function Eo(o){o._currentValue=Gd.current,de(Gd)}function zd(o,s,l){for(;o!==null;){var d=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),o===l)break;o=o.return}}function Hd(o,s,l,d){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var _=y.dependencies;if(_!==null){var C=y.child;_=_.firstContext;e:for(;_!==null;){var w=_;_=y;for(var P=0;P<s.length;P++)if(w.context===s[P]){_.lanes|=l,w=_.alternate,w!==null&&(w.lanes|=l),zd(_.return,l,o),d||(C=null);break e}_=w.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(i(341));C.lanes|=l,_=C.alternate,_!==null&&(_.lanes|=l),zd(C,l,o),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===o){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function gl(o,s,l,d){o=null;for(var y=s,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var w=y.type;zn(y.pendingProps.value,C.value)||(o!==null?o.push(w):o=[w])}}else if(y===kt.current){if(C=y.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push($l):o=[$l])}y=y.return}o!==null&&Hd(s,o,l,d),s.flags|=262144}function cc(o){for(o=o.firstContext;o!==null;){if(!zn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function rs(o){os=o,To=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function vn(o){return Wg(os,o)}function fc(o,s){return os===null&&rs(o),Wg(o,s)}function Wg(o,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},To===null){if(o===null)throw Error(i(308));To=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else To=To.next=s;return l}var ow=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(l,d){o.push(d)}};this.abort=function(){s.aborted=!0,o.forEach(function(l){return l()})}},rw=t.unstable_scheduleCallback,sw=t.unstable_NormalPriority,Jt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $d(){return{controller:new ow,data:new Map,refCount:0}}function yl(o){o.refCount--,o.refCount===0&&rw(sw,function(){o.controller.abort()})}var vl=null,Yd=0,Zs=0,js=null;function aw(o,s){if(vl===null){var l=vl=[];Yd=0,Zs=Jh(),js={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Yd++,s.then(Zg,Zg),s}function Zg(){if(--Yd===0&&vl!==null){js!==null&&(js.status="fulfilled");var o=vl;vl=null,Zs=0,js=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function lw(o,s){var l=[],d={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return o.then(function(){d.status="fulfilled",d.value=s;for(var y=0;y<l.length;y++)(0,l[y])(s)},function(y){for(d.status="rejected",d.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),d}var jg=X.S;X.S=function(o,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&aw(o,s),jg!==null&&jg(o,s)};var ss=W(null);function Kd(){var o=ss.current;return o!==null?o:wt.pooledCache}function dc(o,s){s===null?ae(ss,ss.current):ae(ss,s.pool)}function ey(){var o=Kd();return o===null?null:{parent:Jt._currentValue,pool:o}}var _l=Error(i(460)),ty=Error(i(474)),hc=Error(i(542)),Jd={then:function(){}};function ny(o){return o=o.status,o==="fulfilled"||o==="rejected"}function pc(){}function iy(o,s,l){switch(l=o[l],l===void 0?o.push(s):l!==s&&(s.then(pc,pc),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,ry(o),o;default:if(typeof s.status=="string")s.then(pc,pc);else{if(o=wt,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=s,o.status="pending",o.then(function(d){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=d}},function(d){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,ry(o),o}throw Tl=s,_l}}var Tl=null;function oy(){if(Tl===null)throw Error(i(459));var o=Tl;return Tl=null,o}function ry(o){if(o===_l||o===hc)throw Error(i(483))}var Zo=!1;function Qd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xd(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function jo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function er(o,s,l){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(pt&2)!==0){var y=d.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),d.pending=s,s=sc(o),$g(o,null,l),s}return rc(o,d,s,l),sc(o)}function El(o,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var d=s.lanes;d&=o.pendingLanes,l|=d,s.lanes=l,Pe(o,l)}}function Wd(o,s){var l=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=C:_=_.next=C,l=l.next}while(l!==null);_===null?y=_=s:_=_.next=s}else y=_=s;l={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:d.shared,callbacks:d.callbacks},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=s:o.next=s,l.lastBaseUpdate=s}var Zd=!1;function Sl(){if(Zd){var o=js;if(o!==null)throw o}}function Al(o,s,l,d){Zd=!1;var y=o.updateQueue;Zo=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var P=w,$=P.next;P.next=null,C===null?_=$:C.next=$,C=P;var Z=o.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==C&&(w===null?Z.firstBaseUpdate=$:w.next=$,Z.lastBaseUpdate=P))}if(_!==null){var oe=y.baseState;C=0,Z=$=P=null,w=_;do{var K=w.lane&-536870913,J=K!==w.lane;if(J?(tt&K)===K:(d&K)===K){K!==0&&K===Zs&&(Zd=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ne=o,xe=w;K=s;var Et=l;switch(xe.tag){case 1:if(Ne=xe.payload,typeof Ne=="function"){oe=Ne.call(Et,oe,K);break e}oe=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=xe.payload,K=typeof Ne=="function"?Ne.call(Et,oe,K):Ne,K==null)break e;oe=v({},oe,K);break e;case 2:Zo=!0}}K=w.callback,K!==null&&(o.flags|=64,J&&(o.flags|=8192),J=y.callbacks,J===null?y.callbacks=[K]:J.push(K))}else J={lane:K,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?($=Z=J,P=oe):Z=Z.next=J,C|=K;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;J=w,w=J.next,J.next=null,y.lastBaseUpdate=J,y.shared.pending=null}}while(!0);Z===null&&(P=oe),y.baseState=P,y.firstBaseUpdate=$,y.lastBaseUpdate=Z,_===null&&(y.shared.lanes=0),lr|=C,o.lanes=C,o.memoizedState=oe}}function sy(o,s){if(typeof o!="function")throw Error(i(191,o));o.call(s)}function ay(o,s){var l=o.callbacks;if(l!==null)for(o.callbacks=null,o=0;o<l.length;o++)sy(l[o],s)}var ea=W(null),mc=W(0);function ly(o,s){o=xo,ae(mc,o),ae(ea,s),xo=o|s.baseLanes}function jd(){ae(mc,xo),ae(ea,ea.current)}function eh(){xo=mc.current,de(ea),de(mc)}var tr=0,ze=null,_t=null,Gt=null,gc=!1,ta=!1,as=!1,yc=0,Cl=0,na=null,uw=0;function Ut(){throw Error(i(321))}function th(o,s){if(s===null)return!1;for(var l=0;l<s.length&&l<o.length;l++)if(!zn(o[l],s[l]))return!1;return!0}function nh(o,s,l,d,y,_){return tr=_,ze=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=o===null||o.memoizedState===null?$y:Yy,as=!1,_=l(d,y),as=!1,ta&&(_=cy(s,l,d,y)),uy(o),_}function uy(o){X.H=Ac;var s=_t!==null&&_t.next!==null;if(tr=0,Gt=_t=ze=null,gc=!1,Cl=0,na=null,s)throw Error(i(300));o===null||tn||(o=o.dependencies,o!==null&&cc(o)&&(tn=!0))}function cy(o,s,l,d){ze=o;var y=0;do{if(ta&&(na=null),Cl=0,ta=!1,25<=y)throw Error(i(301));if(y+=1,Gt=_t=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}X.H=gw,_=s(l,d)}while(ta);return _}function cw(){var o=X.H,s=o.useState()[0];return s=typeof s.then=="function"?wl(s):s,o=o.useState()[0],(_t!==null?_t.memoizedState:null)!==o&&(ze.flags|=1024),s}function ih(){var o=yc!==0;return yc=0,o}function oh(o,s,l){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~l}function rh(o){if(gc){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}gc=!1}tr=0,Gt=_t=ze=null,ta=!1,Cl=yc=0,na=null}function Ln(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?ze.memoizedState=Gt=o:Gt=Gt.next=o,Gt}function zt(){if(_t===null){var o=ze.alternate;o=o!==null?o.memoizedState:null}else o=_t.next;var s=Gt===null?ze.memoizedState:Gt.next;if(s!==null)Gt=s,_t=o;else{if(o===null)throw ze.alternate===null?Error(i(467)):Error(i(310));_t=o,o={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Gt===null?ze.memoizedState=Gt=o:Gt=Gt.next=o}return Gt}function sh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(o){var s=Cl;return Cl+=1,na===null&&(na=[]),o=iy(na,o,s),s=ze,(Gt===null?s.memoizedState:Gt.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?$y:Yy),o}function vc(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return wl(o);if(o.$$typeof===ne)return vn(o)}throw Error(i(438,String(o)))}function ah(o){var s=null,l=ze.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var d=ze.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=sh(),ze.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(o),d=0;d<o;d++)l[d]=L;return s.index++,l}function So(o,s){return typeof s=="function"?s(o):s}function _c(o){var s=zt();return lh(s,_t,o)}function lh(o,s,l){var d=o.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=l;var y=o.baseQueue,_=d.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}s.baseQueue=y=_,d.pending=null}if(_=o.baseState,y===null)o.memoizedState=_;else{s=y.next;var w=C=null,P=null,$=s,Z=!1;do{var oe=$.lane&-536870913;if(oe!==$.lane?(tt&oe)===oe:(tr&oe)===oe){var K=$.revertLane;if(K===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),oe===Zs&&(Z=!0);else if((tr&K)===K){$=$.next,K===Zs&&(Z=!0);continue}else oe={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(w=P=oe,C=_):P=P.next=oe,ze.lanes|=K,lr|=K;oe=$.action,as&&l(_,oe),_=$.hasEagerState?$.eagerState:l(_,oe)}else K={lane:oe,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(w=P=K,C=_):P=P.next=K,ze.lanes|=oe,lr|=oe;$=$.next}while($!==null&&$!==s);if(P===null?C=_:P.next=w,!zn(_,o.memoizedState)&&(tn=!0,Z&&(l=js,l!==null)))throw l;o.memoizedState=_,o.baseState=C,o.baseQueue=P,d.lastRenderedState=_}return y===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function uh(o){var s=zt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=o;var d=l.dispatch,y=l.pending,_=s.memoizedState;if(y!==null){l.pending=null;var C=y=y.next;do _=o(_,C.action),C=C.next;while(C!==y);zn(_,s.memoizedState)||(tn=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),l.lastRenderedState=_}return[_,d]}function fy(o,s,l){var d=ze,y=zt(),_=at;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=s();var C=!zn((_t||y).memoizedState,l);C&&(y.memoizedState=l,tn=!0),y=y.queue;var w=py.bind(null,d,y,o);if(Il(2048,8,w,[o]),y.getSnapshot!==s||C||Gt!==null&&Gt.memoizedState.tag&1){if(d.flags|=2048,ia(9,Tc(),hy.bind(null,d,y,l,s),null),wt===null)throw Error(i(349));_||(tr&124)!==0||dy(d,s,l)}return l}function dy(o,s,l){o.flags|=16384,o={getSnapshot:s,value:l},s=ze.updateQueue,s===null?(s=sh(),ze.updateQueue=s,s.stores=[o]):(l=s.stores,l===null?s.stores=[o]:l.push(o))}function hy(o,s,l,d){s.value=l,s.getSnapshot=d,my(s)&&gy(o)}function py(o,s,l){return l(function(){my(s)&&gy(o)})}function my(o){var s=o.getSnapshot;o=o.value;try{var l=s();return!zn(o,l)}catch{return!0}}function gy(o){var s=Js(o,2);s!==null&&Qn(s,o,2)}function ch(o){var s=Ln();if(typeof o=="function"){var l=o;if(o=l(),as){$t(!0);try{l()}finally{$t(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:o},s}function yy(o,s,l,d){return o.baseState=l,lh(o,_t,typeof d=="function"?d:So)}function fw(o,s,l,d,y){if(Sc(o))throw Error(i(485));if(o=s.action,o!==null){var _={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};X.T!==null?l(!0):_.isTransition=!1,d(_),l=s.pending,l===null?(_.next=s.pending=_,vy(s,_)):(_.next=l.next,s.pending=l.next=_)}}function vy(o,s){var l=s.action,d=s.payload,y=o.state;if(s.isTransition){var _=X.T,C={};X.T=C;try{var w=l(y,d),P=X.S;P!==null&&P(C,w),_y(o,s,w)}catch($){fh(o,s,$)}finally{X.T=_}}else try{_=l(y,d),_y(o,s,_)}catch($){fh(o,s,$)}}function _y(o,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Ty(o,s,d)},function(d){return fh(o,s,d)}):Ty(o,s,l)}function Ty(o,s,l){s.status="fulfilled",s.value=l,Ey(s),o.state=l,s=o.pending,s!==null&&(l=s.next,l===s?o.pending=null:(l=l.next,s.next=l,vy(o,l)))}function fh(o,s,l){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=l,Ey(s),s=s.next;while(s!==d)}o.action=null}function Ey(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function Sy(o,s){return s}function Ay(o,s){if(at){var l=wt.formState;if(l!==null){e:{var d=ze;if(at){if(Dt){t:{for(var y=Dt,_=Bi;y.nodeType!==8;){if(!_){y=null;break t}if(y=Ei(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){Dt=Ei(y.nextSibling),d=y.data==="F!";break e}}is(d)}d=!1}d&&(s=l[0])}}return l=Ln(),l.memoizedState=l.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sy,lastRenderedState:s},l.queue=d,l=Gy.bind(null,ze,d),d.dispatch=l,d=ch(!1),_=gh.bind(null,ze,!1,d.queue),d=Ln(),y={state:s,dispatch:null,action:o,pending:null},d.queue=y,l=fw.bind(null,ze,y,_,l),y.dispatch=l,d.memoizedState=o,[s,l,!1]}function Cy(o){var s=zt();return wy(s,_t,o)}function wy(o,s,l){if(s=lh(o,s,Sy)[0],o=_c(So)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=wl(s)}catch(C){throw C===_l?hc:C}else d=s;s=zt();var y=s.queue,_=y.dispatch;return l!==s.memoizedState&&(ze.flags|=2048,ia(9,Tc(),dw.bind(null,y,l),null)),[d,_,o]}function dw(o,s){o.action=s}function Iy(o){var s=zt(),l=_t;if(l!==null)return wy(s,l,o);zt(),s=s.memoizedState,l=zt();var d=l.queue.dispatch;return l.memoizedState=o,[s,d,!1]}function ia(o,s,l,d){return o={tag:o,create:l,deps:d,inst:s,next:null},s=ze.updateQueue,s===null&&(s=sh(),ze.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=o.next=o:(d=l.next,l.next=o,o.next=d,s.lastEffect=o),o}function Tc(){return{destroy:void 0,resource:void 0}}function Ry(){return zt().memoizedState}function Ec(o,s,l,d){var y=Ln();d=d===void 0?null:d,ze.flags|=o,y.memoizedState=ia(1|s,Tc(),l,d)}function Il(o,s,l,d){var y=zt();d=d===void 0?null:d;var _=y.memoizedState.inst;_t!==null&&d!==null&&th(d,_t.memoizedState.deps)?y.memoizedState=ia(s,_,l,d):(ze.flags|=o,y.memoizedState=ia(1|s,_,l,d))}function xy(o,s){Ec(8390656,8,o,s)}function by(o,s){Il(2048,8,o,s)}function My(o,s){return Il(4,2,o,s)}function Ny(o,s){return Il(4,4,o,s)}function ky(o,s){if(typeof s=="function"){o=o();var l=s(o);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function Dy(o,s,l){l=l!=null?l.concat([o]):null,Il(4,4,ky.bind(null,s,o),l)}function dh(){}function Py(o,s){var l=zt();s=s===void 0?null:s;var d=l.memoizedState;return s!==null&&th(s,d[1])?d[0]:(l.memoizedState=[o,s],o)}function Vy(o,s){var l=zt();s=s===void 0?null:s;var d=l.memoizedState;if(s!==null&&th(s,d[1]))return d[0];if(d=o(),as){$t(!0);try{o()}finally{$t(!1)}}return l.memoizedState=[d,s],d}function hh(o,s,l){return l===void 0||(tr&1073741824)!==0?o.memoizedState=s:(o.memoizedState=l,o=Ov(),ze.lanes|=o,lr|=o,l)}function Ly(o,s,l,d){return zn(l,s)?l:ea.current!==null?(o=hh(o,l,d),zn(o,s)||(tn=!0),o):(tr&42)===0?(tn=!0,o.memoizedState=l):(o=Ov(),ze.lanes|=o,lr|=o,s)}function Uy(o,s,l,d,y){var _=he.p;he.p=_!==0&&8>_?_:8;var C=X.T,w={};X.T=w,gh(o,!1,s,l);try{var P=y(),$=X.S;if($!==null&&$(w,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var Z=lw(P,d);Rl(o,s,Z,Jn(o))}else Rl(o,s,d,Jn(o))}catch(oe){Rl(o,s,{then:function(){},status:"rejected",reason:oe},Jn())}finally{he.p=_,X.T=C}}function hw(){}function ph(o,s,l,d){if(o.tag!==5)throw Error(i(476));var y=Oy(o).queue;Uy(o,y,s,ye,l===null?hw:function(){return By(o),l(d)})}function Oy(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:ye},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:l},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function By(o){var s=Oy(o).next.queue;Rl(o,s,{},Jn())}function mh(){return vn($l)}function Fy(){return zt().memoizedState}function qy(){return zt().memoizedState}function pw(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var l=Jn();o=jo(l);var d=er(s,o,l);d!==null&&(Qn(d,s,l),El(d,s,l)),s={cache:$d()},o.payload=s;return}s=s.return}}function mw(o,s,l){var d=Jn();l={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Sc(o)?zy(s,l):(l=Vd(o,s,l,d),l!==null&&(Qn(l,o,d),Hy(l,s,d)))}function Gy(o,s,l){var d=Jn();Rl(o,s,l,d)}function Rl(o,s,l,d){var y={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Sc(o))zy(s,y);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var C=s.lastRenderedState,w=_(C,l);if(y.hasEagerState=!0,y.eagerState=w,zn(w,C))return rc(o,s,y,0),wt===null&&oc(),!1}catch{}finally{}if(l=Vd(o,s,y,d),l!==null)return Qn(l,o,d),Hy(l,s,d),!0}return!1}function gh(o,s,l,d){if(d={lane:2,revertLane:Jh(),action:d,hasEagerState:!1,eagerState:null,next:null},Sc(o)){if(s)throw Error(i(479))}else s=Vd(o,l,d,2),s!==null&&Qn(s,o,2)}function Sc(o){var s=o.alternate;return o===ze||s!==null&&s===ze}function zy(o,s){ta=gc=!0;var l=o.pending;l===null?s.next=s:(s.next=l.next,l.next=s),o.pending=s}function Hy(o,s,l){if((l&4194048)!==0){var d=s.lanes;d&=o.pendingLanes,l|=d,s.lanes=l,Pe(o,l)}}var Ac={readContext:vn,use:vc,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut},$y={readContext:vn,use:vc,useCallback:function(o,s){return Ln().memoizedState=[o,s===void 0?null:s],o},useContext:vn,useEffect:xy,useImperativeHandle:function(o,s,l){l=l!=null?l.concat([o]):null,Ec(4194308,4,ky.bind(null,s,o),l)},useLayoutEffect:function(o,s){return Ec(4194308,4,o,s)},useInsertionEffect:function(o,s){Ec(4,2,o,s)},useMemo:function(o,s){var l=Ln();s=s===void 0?null:s;var d=o();if(as){$t(!0);try{o()}finally{$t(!1)}}return l.memoizedState=[d,s],d},useReducer:function(o,s,l){var d=Ln();if(l!==void 0){var y=l(s);if(as){$t(!0);try{l(s)}finally{$t(!1)}}}else y=s;return d.memoizedState=d.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},d.queue=o,o=o.dispatch=mw.bind(null,ze,o),[d.memoizedState,o]},useRef:function(o){var s=Ln();return o={current:o},s.memoizedState=o},useState:function(o){o=ch(o);var s=o.queue,l=Gy.bind(null,ze,s);return s.dispatch=l,[o.memoizedState,l]},useDebugValue:dh,useDeferredValue:function(o,s){var l=Ln();return hh(l,o,s)},useTransition:function(){var o=ch(!1);return o=Uy.bind(null,ze,o.queue,!0,!1),Ln().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,l){var d=ze,y=Ln();if(at){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),wt===null)throw Error(i(349));(tt&124)!==0||dy(d,s,l)}y.memoizedState=l;var _={value:l,getSnapshot:s};return y.queue=_,xy(py.bind(null,d,_,o),[o]),d.flags|=2048,ia(9,Tc(),hy.bind(null,d,_,l,s),null),l},useId:function(){var o=Ln(),s=wt.identifierPrefix;if(at){var l=_o,d=vo;l=(d&~(1<<32-Vt(d)-1)).toString(32)+l,s="«"+s+"R"+l,l=yc++,0<l&&(s+="H"+l.toString(32)),s+="»"}else l=uw++,s="«"+s+"r"+l.toString(32)+"»";return o.memoizedState=s},useHostTransitionStatus:mh,useFormState:Ay,useActionState:Ay,useOptimistic:function(o){var s=Ln();s.memoizedState=s.baseState=o;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=gh.bind(null,ze,!0,l),l.dispatch=s,[o,s]},useMemoCache:ah,useCacheRefresh:function(){return Ln().memoizedState=pw.bind(null,ze)}},Yy={readContext:vn,use:vc,useCallback:Py,useContext:vn,useEffect:by,useImperativeHandle:Dy,useInsertionEffect:My,useLayoutEffect:Ny,useMemo:Vy,useReducer:_c,useRef:Ry,useState:function(){return _c(So)},useDebugValue:dh,useDeferredValue:function(o,s){var l=zt();return Ly(l,_t.memoizedState,o,s)},useTransition:function(){var o=_c(So)[0],s=zt().memoizedState;return[typeof o=="boolean"?o:wl(o),s]},useSyncExternalStore:fy,useId:Fy,useHostTransitionStatus:mh,useFormState:Cy,useActionState:Cy,useOptimistic:function(o,s){var l=zt();return yy(l,_t,o,s)},useMemoCache:ah,useCacheRefresh:qy},gw={readContext:vn,use:vc,useCallback:Py,useContext:vn,useEffect:by,useImperativeHandle:Dy,useInsertionEffect:My,useLayoutEffect:Ny,useMemo:Vy,useReducer:uh,useRef:Ry,useState:function(){return uh(So)},useDebugValue:dh,useDeferredValue:function(o,s){var l=zt();return _t===null?hh(l,o,s):Ly(l,_t.memoizedState,o,s)},useTransition:function(){var o=uh(So)[0],s=zt().memoizedState;return[typeof o=="boolean"?o:wl(o),s]},useSyncExternalStore:fy,useId:Fy,useHostTransitionStatus:mh,useFormState:Iy,useActionState:Iy,useOptimistic:function(o,s){var l=zt();return _t!==null?yy(l,_t,o,s):(l.baseState=o,[o,l.queue.dispatch])},useMemoCache:ah,useCacheRefresh:qy},oa=null,xl=0;function Cc(o){var s=xl;return xl+=1,oa===null&&(oa=[]),iy(oa,o,s)}function bl(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function wc(o,s){throw s.$$typeof===E?Error(i(525)):(o=Object.prototype.toString.call(s),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function Ky(o){var s=o._init;return s(o._payload)}function Jy(o){function s(G,B){if(o){var H=G.deletions;H===null?(G.deletions=[B],G.flags|=16):H.push(B)}}function l(G,B){if(!o)return null;for(;B!==null;)s(G,B),B=B.sibling;return null}function d(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function y(G,B){return G=yo(G,B),G.index=0,G.sibling=null,G}function _(G,B,H){return G.index=H,o?(H=G.alternate,H!==null?(H=H.index,H<B?(G.flags|=67108866,B):H):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function C(G){return o&&G.alternate===null&&(G.flags|=67108866),G}function w(G,B,H,ee){return B===null||B.tag!==6?(B=Ud(H,G.mode,ee),B.return=G,B):(B=y(B,H),B.return=G,B)}function P(G,B,H,ee){var ge=H.type;return ge===b?Z(G,B,H.props.children,ee,H.key):B!==null&&(B.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===M&&Ky(ge)===B.type)?(B=y(B,H.props),bl(B,H),B.return=G,B):(B=ac(H.type,H.key,H.props,null,G.mode,ee),bl(B,H),B.return=G,B)}function $(G,B,H,ee){return B===null||B.tag!==4||B.stateNode.containerInfo!==H.containerInfo||B.stateNode.implementation!==H.implementation?(B=Od(H,G.mode,ee),B.return=G,B):(B=y(B,H.children||[]),B.return=G,B)}function Z(G,B,H,ee,ge){return B===null||B.tag!==7?(B=jr(H,G.mode,ee,ge),B.return=G,B):(B=y(B,H),B.return=G,B)}function oe(G,B,H){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Ud(""+B,G.mode,H),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case S:return H=ac(B.type,B.key,B.props,null,G.mode,H),bl(H,B),H.return=G,H;case I:return B=Od(B,G.mode,H),B.return=G,B;case M:var ee=B._init;return B=ee(B._payload),oe(G,B,H)}if(Xe(B)||q(B))return B=jr(B,G.mode,H,null),B.return=G,B;if(typeof B.then=="function")return oe(G,Cc(B),H);if(B.$$typeof===ne)return oe(G,fc(G,B),H);wc(G,B)}return null}function K(G,B,H,ee){var ge=B!==null?B.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ge!==null?null:w(G,B,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case S:return H.key===ge?P(G,B,H,ee):null;case I:return H.key===ge?$(G,B,H,ee):null;case M:return ge=H._init,H=ge(H._payload),K(G,B,H,ee)}if(Xe(H)||q(H))return ge!==null?null:Z(G,B,H,ee,null);if(typeof H.then=="function")return K(G,B,Cc(H),ee);if(H.$$typeof===ne)return K(G,B,fc(G,H),ee);wc(G,H)}return null}function J(G,B,H,ee,ge){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return G=G.get(H)||null,w(B,G,""+ee,ge);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case S:return G=G.get(ee.key===null?H:ee.key)||null,P(B,G,ee,ge);case I:return G=G.get(ee.key===null?H:ee.key)||null,$(B,G,ee,ge);case M:var He=ee._init;return ee=He(ee._payload),J(G,B,H,ee,ge)}if(Xe(ee)||q(ee))return G=G.get(H)||null,Z(B,G,ee,ge,null);if(typeof ee.then=="function")return J(G,B,H,Cc(ee),ge);if(ee.$$typeof===ne)return J(G,B,H,fc(B,ee),ge);wc(B,ee)}return null}function Ne(G,B,H,ee){for(var ge=null,He=null,Ee=B,be=B=0,on=null;Ee!==null&&be<H.length;be++){Ee.index>be?(on=Ee,Ee=null):on=Ee.sibling;var rt=K(G,Ee,H[be],ee);if(rt===null){Ee===null&&(Ee=on);break}o&&Ee&&rt.alternate===null&&s(G,Ee),B=_(rt,B,be),He===null?ge=rt:He.sibling=rt,He=rt,Ee=on}if(be===H.length)return l(G,Ee),at&&ts(G,be),ge;if(Ee===null){for(;be<H.length;be++)Ee=oe(G,H[be],ee),Ee!==null&&(B=_(Ee,B,be),He===null?ge=Ee:He.sibling=Ee,He=Ee);return at&&ts(G,be),ge}for(Ee=d(Ee);be<H.length;be++)on=J(Ee,G,be,H[be],ee),on!==null&&(o&&on.alternate!==null&&Ee.delete(on.key===null?be:on.key),B=_(on,B,be),He===null?ge=on:He.sibling=on,He=on);return o&&Ee.forEach(function(yr){return s(G,yr)}),at&&ts(G,be),ge}function xe(G,B,H,ee){if(H==null)throw Error(i(151));for(var ge=null,He=null,Ee=B,be=B=0,on=null,rt=H.next();Ee!==null&&!rt.done;be++,rt=H.next()){Ee.index>be?(on=Ee,Ee=null):on=Ee.sibling;var yr=K(G,Ee,rt.value,ee);if(yr===null){Ee===null&&(Ee=on);break}o&&Ee&&yr.alternate===null&&s(G,Ee),B=_(yr,B,be),He===null?ge=yr:He.sibling=yr,He=yr,Ee=on}if(rt.done)return l(G,Ee),at&&ts(G,be),ge;if(Ee===null){for(;!rt.done;be++,rt=H.next())rt=oe(G,rt.value,ee),rt!==null&&(B=_(rt,B,be),He===null?ge=rt:He.sibling=rt,He=rt);return at&&ts(G,be),ge}for(Ee=d(Ee);!rt.done;be++,rt=H.next())rt=J(Ee,G,be,rt.value,ee),rt!==null&&(o&&rt.alternate!==null&&Ee.delete(rt.key===null?be:rt.key),B=_(rt,B,be),He===null?ge=rt:He.sibling=rt,He=rt);return o&&Ee.forEach(function(yI){return s(G,yI)}),at&&ts(G,be),ge}function Et(G,B,H,ee){if(typeof H=="object"&&H!==null&&H.type===b&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case S:e:{for(var ge=H.key;B!==null;){if(B.key===ge){if(ge=H.type,ge===b){if(B.tag===7){l(G,B.sibling),ee=y(B,H.props.children),ee.return=G,G=ee;break e}}else if(B.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===M&&Ky(ge)===B.type){l(G,B.sibling),ee=y(B,H.props),bl(ee,H),ee.return=G,G=ee;break e}l(G,B);break}else s(G,B);B=B.sibling}H.type===b?(ee=jr(H.props.children,G.mode,ee,H.key),ee.return=G,G=ee):(ee=ac(H.type,H.key,H.props,null,G.mode,ee),bl(ee,H),ee.return=G,G=ee)}return C(G);case I:e:{for(ge=H.key;B!==null;){if(B.key===ge)if(B.tag===4&&B.stateNode.containerInfo===H.containerInfo&&B.stateNode.implementation===H.implementation){l(G,B.sibling),ee=y(B,H.children||[]),ee.return=G,G=ee;break e}else{l(G,B);break}else s(G,B);B=B.sibling}ee=Od(H,G.mode,ee),ee.return=G,G=ee}return C(G);case M:return ge=H._init,H=ge(H._payload),Et(G,B,H,ee)}if(Xe(H))return Ne(G,B,H,ee);if(q(H)){if(ge=q(H),typeof ge!="function")throw Error(i(150));return H=ge.call(H),xe(G,B,H,ee)}if(typeof H.then=="function")return Et(G,B,Cc(H),ee);if(H.$$typeof===ne)return Et(G,B,fc(G,H),ee);wc(G,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,B!==null&&B.tag===6?(l(G,B.sibling),ee=y(B,H),ee.return=G,G=ee):(l(G,B),ee=Ud(H,G.mode,ee),ee.return=G,G=ee),C(G)):l(G,B)}return function(G,B,H,ee){try{xl=0;var ge=Et(G,B,H,ee);return oa=null,ge}catch(Ee){if(Ee===_l||Ee===hc)throw Ee;var He=Hn(29,Ee,null,G.mode);return He.lanes=ee,He.return=G,He}finally{}}}var ra=Jy(!0),Qy=Jy(!1),ai=W(null),Fi=null;function nr(o){var s=o.alternate;ae(Qt,Qt.current&1),ae(ai,o),Fi===null&&(s===null||ea.current!==null||s.memoizedState!==null)&&(Fi=o)}function Xy(o){if(o.tag===22){if(ae(Qt,Qt.current),ae(ai,o),Fi===null){var s=o.alternate;s!==null&&s.memoizedState!==null&&(Fi=o)}}else ir()}function ir(){ae(Qt,Qt.current),ae(ai,ai.current)}function Ao(o){de(ai),Fi===o&&(Fi=null),de(Qt)}var Qt=W(0);function Ic(o){for(var s=o;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||sp(l)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function yh(o,s,l,d){s=o.memoizedState,l=l(d,s),l=l==null?s:v({},s,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var vh={enqueueSetState:function(o,s,l){o=o._reactInternals;var d=Jn(),y=jo(d);y.payload=s,l!=null&&(y.callback=l),s=er(o,y,d),s!==null&&(Qn(s,o,d),El(s,o,d))},enqueueReplaceState:function(o,s,l){o=o._reactInternals;var d=Jn(),y=jo(d);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=er(o,y,d),s!==null&&(Qn(s,o,d),El(s,o,d))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var l=Jn(),d=jo(l);d.tag=2,s!=null&&(d.callback=s),s=er(o,d,l),s!==null&&(Qn(s,o,l),El(s,o,l))}};function Wy(o,s,l,d,y,_,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,_,C):s.prototype&&s.prototype.isPureReactComponent?!fl(l,d)||!fl(y,_):!0}function Zy(o,s,l,d){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==o&&vh.enqueueReplaceState(s,s.state,null)}function ls(o,s){var l=s;if("ref"in s){l={};for(var d in s)d!=="ref"&&(l[d]=s[d])}if(o=o.defaultProps){l===s&&(l=v({},l));for(var y in o)l[y]===void 0&&(l[y]=o[y])}return l}var Rc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function jy(o){Rc(o)}function ev(o){console.error(o)}function tv(o){Rc(o)}function xc(o,s){try{var l=o.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function nv(o,s,l){try{var d=o.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function _h(o,s,l){return l=jo(l),l.tag=3,l.payload={element:null},l.callback=function(){xc(o,s)},l}function iv(o){return o=jo(o),o.tag=3,o}function ov(o,s,l,d){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=d.value;o.payload=function(){return y(_)},o.callback=function(){nv(s,l,d)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(o.callback=function(){nv(s,l,d),typeof y!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var w=d.stack;this.componentDidCatch(d.value,{componentStack:w!==null?w:""})})}function yw(o,s,l,d,y){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=l.alternate,s!==null&&gl(s,l,y,!0),l=ai.current,l!==null){switch(l.tag){case 13:return Fi===null?zh():l.alternate===null&&Pt===0&&(Pt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,d===Jd?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([d]):s.add(d),$h(o,d,y)),!1;case 22:return l.flags|=65536,d===Jd?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([d]):l.add(d)),$h(o,d,y)),!1}throw Error(i(435,l.tag))}return $h(o,d,y),zh(),!1}if(at)return s=ai.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,d!==qd&&(o=Error(i(422),{cause:d}),ml(ii(o,l)))):(d!==qd&&(s=Error(i(423),{cause:d}),ml(ii(s,l))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,d=ii(d,l),y=_h(o.stateNode,d,y),Wd(o,y),Pt!==4&&(Pt=2)),!1;var _=Error(i(520),{cause:d});if(_=ii(_,l),Ll===null?Ll=[_]:Ll.push(_),Pt!==4&&(Pt=2),s===null)return!0;d=ii(d,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,o=y&-y,l.lanes|=o,o=_h(l.stateNode,d,o),Wd(l,o),!1;case 1:if(s=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ur===null||!ur.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=iv(y),ov(y,o,l,d),Wd(l,y),!1}l=l.return}while(l!==null);return!1}var rv=Error(i(461)),tn=!1;function ln(o,s,l,d){s.child=o===null?Qy(s,null,l,d):ra(s,o.child,l,d)}function sv(o,s,l,d,y){l=l.render;var _=s.ref;if("ref"in d){var C={};for(var w in d)w!=="ref"&&(C[w]=d[w])}else C=d;return rs(s),d=nh(o,s,l,C,_,y),w=ih(),o!==null&&!tn?(oh(o,s,y),Co(o,s,y)):(at&&w&&Bd(s),s.flags|=1,ln(o,s,d,y),s.child)}function av(o,s,l,d,y){if(o===null){var _=l.type;return typeof _=="function"&&!Ld(_)&&_.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=_,lv(o,s,_,d,y)):(o=ac(l.type,null,d,s,s.mode,y),o.ref=s.ref,o.return=s,s.child=o)}if(_=o.child,!Rh(o,y)){var C=_.memoizedProps;if(l=l.compare,l=l!==null?l:fl,l(C,d)&&o.ref===s.ref)return Co(o,s,y)}return s.flags|=1,o=yo(_,d),o.ref=s.ref,o.return=s,s.child=o}function lv(o,s,l,d,y){if(o!==null){var _=o.memoizedProps;if(fl(_,d)&&o.ref===s.ref)if(tn=!1,s.pendingProps=d=_,Rh(o,y))(o.flags&131072)!==0&&(tn=!0);else return s.lanes=o.lanes,Co(o,s,y)}return Th(o,s,l,d,y)}function uv(o,s,l){var d=s.pendingProps,y=d.children,_=o!==null?o.memoizedState:null;if(d.mode==="hidden"){if((s.flags&128)!==0){if(d=_!==null?_.baseLanes|l:l,o!==null){for(y=s.child=o.child,_=0;y!==null;)_=_|y.lanes|y.childLanes,y=y.sibling;s.childLanes=_&~d}else s.childLanes=0,s.child=null;return cv(o,s,d,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&dc(s,_!==null?_.cachePool:null),_!==null?ly(s,_):jd(),Xy(s);else return s.lanes=s.childLanes=536870912,cv(o,s,_!==null?_.baseLanes|l:l,l)}else _!==null?(dc(s,_.cachePool),ly(s,_),ir(),s.memoizedState=null):(o!==null&&dc(s,null),jd(),ir());return ln(o,s,y,l),s.child}function cv(o,s,l,d){var y=Kd();return y=y===null?null:{parent:Jt._currentValue,pool:y},s.memoizedState={baseLanes:l,cachePool:y},o!==null&&dc(s,null),jd(),Xy(s),o!==null&&gl(o,s,d,!0),null}function bc(o,s){var l=s.ref;if(l===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(o===null||o.ref!==l)&&(s.flags|=4194816)}}function Th(o,s,l,d,y){return rs(s),l=nh(o,s,l,d,void 0,y),d=ih(),o!==null&&!tn?(oh(o,s,y),Co(o,s,y)):(at&&d&&Bd(s),s.flags|=1,ln(o,s,l,y),s.child)}function fv(o,s,l,d,y,_){return rs(s),s.updateQueue=null,l=cy(s,d,l,y),uy(o),d=ih(),o!==null&&!tn?(oh(o,s,_),Co(o,s,_)):(at&&d&&Bd(s),s.flags|=1,ln(o,s,l,_),s.child)}function dv(o,s,l,d,y){if(rs(s),s.stateNode===null){var _=Qs,C=l.contextType;typeof C=="object"&&C!==null&&(_=vn(C)),_=new l(d,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=vh,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=d,_.state=s.memoizedState,_.refs={},Qd(s),C=l.contextType,_.context=typeof C=="object"&&C!==null?vn(C):Qs,_.state=s.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(yh(s,l,C,d),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&vh.enqueueReplaceState(_,_.state,null),Al(s,d,_,y),Sl(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(o===null){_=s.stateNode;var w=s.memoizedProps,P=ls(l,w);_.props=P;var $=_.context,Z=l.contextType;C=Qs,typeof Z=="object"&&Z!==null&&(C=vn(Z));var oe=l.getDerivedStateFromProps;Z=typeof oe=="function"||typeof _.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w||$!==C)&&Zy(s,_,d,C),Zo=!1;var K=s.memoizedState;_.state=K,Al(s,d,_,y),Sl(),$=s.memoizedState,w||K!==$||Zo?(typeof oe=="function"&&(yh(s,l,oe,d),$=s.memoizedState),(P=Zo||Wy(s,l,P,d,K,$,C))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=$),_.props=d,_.state=$,_.context=C,d=P):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{_=s.stateNode,Xd(o,s),C=s.memoizedProps,Z=ls(l,C),_.props=Z,oe=s.pendingProps,K=_.context,$=l.contextType,P=Qs,typeof $=="object"&&$!==null&&(P=vn($)),w=l.getDerivedStateFromProps,($=typeof w=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==oe||K!==P)&&Zy(s,_,d,P),Zo=!1,K=s.memoizedState,_.state=K,Al(s,d,_,y),Sl();var J=s.memoizedState;C!==oe||K!==J||Zo||o!==null&&o.dependencies!==null&&cc(o.dependencies)?(typeof w=="function"&&(yh(s,l,w,d),J=s.memoizedState),(Z=Zo||Wy(s,l,Z,d,K,J,P)||o!==null&&o.dependencies!==null&&cc(o.dependencies))?($||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,J,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,J,P)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===o.memoizedProps&&K===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&K===o.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=J),_.props=d,_.state=J,_.context=P,d=Z):(typeof _.componentDidUpdate!="function"||C===o.memoizedProps&&K===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&K===o.memoizedState||(s.flags|=1024),d=!1)}return _=d,bc(o,s),d=(s.flags&128)!==0,_||d?(_=s.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,o!==null&&d?(s.child=ra(s,o.child,null,y),s.child=ra(s,null,l,y)):ln(o,s,l,y),s.memoizedState=_.state,o=s.child):o=Co(o,s,y),o}function hv(o,s,l,d){return pl(),s.flags|=256,ln(o,s,l,d),s.child}var Eh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sh(o){return{baseLanes:o,cachePool:ey()}}function Ah(o,s,l){return o=o!==null?o.childLanes&~l:0,s&&(o|=li),o}function pv(o,s,l){var d=s.pendingProps,y=!1,_=(s.flags&128)!==0,C;if((C=_)||(C=o!==null&&o.memoizedState===null?!1:(Qt.current&2)!==0),C&&(y=!0,s.flags&=-129),C=(s.flags&32)!==0,s.flags&=-33,o===null){if(at){if(y?nr(s):ir(),at){var w=Dt,P;if(P=w){e:{for(P=w,w=Bi;P.nodeType!==8;){if(!w){w=null;break e}if(P=Ei(P.nextSibling),P===null){w=null;break e}}w=P}w!==null?(s.memoizedState={dehydrated:w,treeContext:es!==null?{id:vo,overflow:_o}:null,retryLane:536870912,hydrationErrors:null},P=Hn(18,null,null,0),P.stateNode=w,P.return=s,s.child=P,Nn=s,Dt=null,P=!0):P=!1}P||is(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return sp(w)?s.lanes=32:s.lanes=536870912,null;Ao(s)}return w=d.children,d=d.fallback,y?(ir(),y=s.mode,w=Mc({mode:"hidden",children:w},y),d=jr(d,y,l,null),w.return=s,d.return=s,w.sibling=d,s.child=w,y=s.child,y.memoizedState=Sh(l),y.childLanes=Ah(o,C,l),s.memoizedState=Eh,d):(nr(s),Ch(s,w))}if(P=o.memoizedState,P!==null&&(w=P.dehydrated,w!==null)){if(_)s.flags&256?(nr(s),s.flags&=-257,s=wh(o,s,l)):s.memoizedState!==null?(ir(),s.child=o.child,s.flags|=128,s=null):(ir(),y=d.fallback,w=s.mode,d=Mc({mode:"visible",children:d.children},w),y=jr(y,w,l,null),y.flags|=2,d.return=s,y.return=s,d.sibling=y,s.child=d,ra(s,o.child,null,l),d=s.child,d.memoizedState=Sh(l),d.childLanes=Ah(o,C,l),s.memoizedState=Eh,s=y);else if(nr(s),sp(w)){if(C=w.nextSibling&&w.nextSibling.dataset,C)var $=C.dgst;C=$,d=Error(i(419)),d.stack="",d.digest=C,ml({value:d,source:null,stack:null}),s=wh(o,s,l)}else if(tn||gl(o,s,l,!1),C=(l&o.childLanes)!==0,tn||C){if(C=wt,C!==null&&(d=l&-l,d=(d&42)!==0?1:Be(d),d=(d&(C.suspendedLanes|l))!==0?0:d,d!==0&&d!==P.retryLane))throw P.retryLane=d,Js(o,d),Qn(C,o,d),rv;w.data==="$?"||zh(),s=wh(o,s,l)}else w.data==="$?"?(s.flags|=192,s.child=o.child,s=null):(o=P.treeContext,Dt=Ei(w.nextSibling),Nn=s,at=!0,ns=null,Bi=!1,o!==null&&(ri[si++]=vo,ri[si++]=_o,ri[si++]=es,vo=o.id,_o=o.overflow,es=s),s=Ch(s,d.children),s.flags|=4096);return s}return y?(ir(),y=d.fallback,w=s.mode,P=o.child,$=P.sibling,d=yo(P,{mode:"hidden",children:d.children}),d.subtreeFlags=P.subtreeFlags&65011712,$!==null?y=yo($,y):(y=jr(y,w,l,null),y.flags|=2),y.return=s,d.return=s,d.sibling=y,s.child=d,d=y,y=s.child,w=o.child.memoizedState,w===null?w=Sh(l):(P=w.cachePool,P!==null?($=Jt._currentValue,P=P.parent!==$?{parent:$,pool:$}:P):P=ey(),w={baseLanes:w.baseLanes|l,cachePool:P}),y.memoizedState=w,y.childLanes=Ah(o,C,l),s.memoizedState=Eh,d):(nr(s),l=o.child,o=l.sibling,l=yo(l,{mode:"visible",children:d.children}),l.return=s,l.sibling=null,o!==null&&(C=s.deletions,C===null?(s.deletions=[o],s.flags|=16):C.push(o)),s.child=l,s.memoizedState=null,l)}function Ch(o,s){return s=Mc({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function Mc(o,s){return o=Hn(22,o,null,s),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function wh(o,s,l){return ra(s,o.child,null,l),o=Ch(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function mv(o,s,l){o.lanes|=s;var d=o.alternate;d!==null&&(d.lanes|=s),zd(o.return,s,l)}function Ih(o,s,l,d,y){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:y}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=l,_.tailMode=y)}function gv(o,s,l){var d=s.pendingProps,y=d.revealOrder,_=d.tail;if(ln(o,s,d.children,l),d=Qt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&mv(o,l,s);else if(o.tag===19)mv(o,l,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}switch(ae(Qt,d),y){case"forwards":for(l=s.child,y=null;l!==null;)o=l.alternate,o!==null&&Ic(o)===null&&(y=l),l=l.sibling;l=y,l===null?(y=s.child,s.child=null):(y=l.sibling,l.sibling=null),Ih(s,!1,y,l,_);break;case"backwards":for(l=null,y=s.child,s.child=null;y!==null;){if(o=y.alternate,o!==null&&Ic(o)===null){s.child=y;break}o=y.sibling,y.sibling=l,l=y,y=o}Ih(s,!0,l,null,_);break;case"together":Ih(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Co(o,s,l){if(o!==null&&(s.dependencies=o.dependencies),lr|=s.lanes,(l&s.childLanes)===0)if(o!==null){if(gl(o,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(i(153));if(s.child!==null){for(o=s.child,l=yo(o,o.pendingProps),s.child=l,l.return=s;o.sibling!==null;)o=o.sibling,l=l.sibling=yo(o,o.pendingProps),l.return=s;l.sibling=null}return s.child}function Rh(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&cc(o)))}function vw(o,s,l){switch(s.tag){case 3:lt(s,s.stateNode.containerInfo),Wo(s,Jt,o.memoizedState.cache),pl();break;case 27:case 5:Zn(s);break;case 4:lt(s,s.stateNode.containerInfo);break;case 10:Wo(s,s.type,s.memoizedProps.value);break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(nr(s),s.flags|=128,null):(l&s.child.childLanes)!==0?pv(o,s,l):(nr(s),o=Co(o,s,l),o!==null?o.sibling:null);nr(s);break;case 19:var y=(o.flags&128)!==0;if(d=(l&s.childLanes)!==0,d||(gl(o,s,l,!1),d=(l&s.childLanes)!==0),y){if(d)return gv(o,s,l);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ae(Qt,Qt.current),d)break;return null;case 22:case 23:return s.lanes=0,uv(o,s,l);case 24:Wo(s,Jt,o.memoizedState.cache)}return Co(o,s,l)}function yv(o,s,l){if(o!==null)if(o.memoizedProps!==s.pendingProps)tn=!0;else{if(!Rh(o,l)&&(s.flags&128)===0)return tn=!1,vw(o,s,l);tn=(o.flags&131072)!==0}else tn=!1,at&&(s.flags&1048576)!==0&&Kg(s,uc,s.index);switch(s.lanes=0,s.tag){case 16:e:{o=s.pendingProps;var d=s.elementType,y=d._init;if(d=y(d._payload),s.type=d,typeof d=="function")Ld(d)?(o=ls(d,o),s.tag=1,s=dv(null,s,d,o,l)):(s.tag=0,s=Th(null,s,d,o,l));else{if(d!=null){if(y=d.$$typeof,y===fe){s.tag=11,s=sv(null,s,d,o,l);break e}else if(y===D){s.tag=14,s=av(null,s,d,o,l);break e}}throw s=St(d)||d,Error(i(306,s,""))}}return s;case 0:return Th(o,s,s.type,s.pendingProps,l);case 1:return d=s.type,y=ls(d,s.pendingProps),dv(o,s,d,y,l);case 3:e:{if(lt(s,s.stateNode.containerInfo),o===null)throw Error(i(387));d=s.pendingProps;var _=s.memoizedState;y=_.element,Xd(o,s),Al(s,d,null,l);var C=s.memoizedState;if(d=C.cache,Wo(s,Jt,d),d!==_.cache&&Hd(s,[Jt],l,!0),Sl(),d=C.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:C.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=hv(o,s,d,l);break e}else if(d!==y){y=ii(Error(i(424)),s),ml(y),s=hv(o,s,d,l);break e}else{switch(o=s.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Dt=Ei(o.firstChild),Nn=s,at=!0,ns=null,Bi=!0,l=Qy(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(pl(),d===y){s=Co(o,s,l);break e}ln(o,s,d,l)}s=s.child}return s;case 26:return bc(o,s),o===null?(l=E_(s.type,null,s.pendingProps,null))?s.memoizedState=l:at||(l=s.type,o=s.pendingProps,d=Hc(Me.current).createElement(l),d[Re]=s,d[we]=o,cn(d,l,o),Lt(d),s.stateNode=d):s.memoizedState=E_(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return Zn(s),o===null&&at&&(d=s.stateNode=v_(s.type,s.pendingProps,Me.current),Nn=s,Bi=!0,y=Dt,dr(s.type)?(ap=y,Dt=Ei(d.firstChild)):Dt=y),ln(o,s,s.pendingProps.children,l),bc(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&at&&((y=d=Dt)&&(d=Yw(d,s.type,s.pendingProps,Bi),d!==null?(s.stateNode=d,Nn=s,Dt=Ei(d.firstChild),Bi=!1,y=!0):y=!1),y||is(s)),Zn(s),y=s.type,_=s.pendingProps,C=o!==null?o.memoizedProps:null,d=_.children,ip(y,_)?d=null:C!==null&&ip(y,C)&&(s.flags|=32),s.memoizedState!==null&&(y=nh(o,s,cw,null,null,l),$l._currentValue=y),bc(o,s),ln(o,s,d,l),s.child;case 6:return o===null&&at&&((o=l=Dt)&&(l=Kw(l,s.pendingProps,Bi),l!==null?(s.stateNode=l,Nn=s,Dt=null,o=!0):o=!1),o||is(s)),null;case 13:return pv(o,s,l);case 4:return lt(s,s.stateNode.containerInfo),d=s.pendingProps,o===null?s.child=ra(s,null,d,l):ln(o,s,d,l),s.child;case 11:return sv(o,s,s.type,s.pendingProps,l);case 7:return ln(o,s,s.pendingProps,l),s.child;case 8:return ln(o,s,s.pendingProps.children,l),s.child;case 12:return ln(o,s,s.pendingProps.children,l),s.child;case 10:return d=s.pendingProps,Wo(s,s.type,d.value),ln(o,s,d.children,l),s.child;case 9:return y=s.type._context,d=s.pendingProps.children,rs(s),y=vn(y),d=d(y),s.flags|=1,ln(o,s,d,l),s.child;case 14:return av(o,s,s.type,s.pendingProps,l);case 15:return lv(o,s,s.type,s.pendingProps,l);case 19:return gv(o,s,l);case 31:return d=s.pendingProps,l=s.mode,d={mode:d.mode,children:d.children},o===null?(l=Mc(d,l),l.ref=s.ref,s.child=l,l.return=s,s=l):(l=yo(o.child,d),l.ref=s.ref,s.child=l,l.return=s,s=l),s;case 22:return uv(o,s,l);case 24:return rs(s),d=vn(Jt),o===null?(y=Kd(),y===null&&(y=wt,_=$d(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),s.memoizedState={parent:d,cache:y},Qd(s),Wo(s,Jt,y)):((o.lanes&l)!==0&&(Xd(o,s),Al(s,null,null,l),Sl()),y=o.memoizedState,_=s.memoizedState,y.parent!==d?(y={parent:d,cache:d},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Wo(s,Jt,d)):(d=_.cache,Wo(s,Jt,d),d!==y.cache&&Hd(s,[Jt],l,!0))),ln(o,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function wo(o){o.flags|=4}function vv(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!I_(s)){if(s=ai.current,s!==null&&((tt&4194048)===tt?Fi!==null:(tt&62914560)!==tt&&(tt&536870912)===0||s!==Fi))throw Tl=Jd,ty;o.flags|=8192}}function Nc(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?Y():536870912,o.lanes|=s,ua|=s)}function Ml(o,s){if(!at)switch(o.tailMode){case"hidden":s=o.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function Mt(o){var s=o.alternate!==null&&o.alternate.child===o.child,l=0,d=0;if(s)for(var y=o.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=d,o.childLanes=l,s}function _w(o,s,l){var d=s.pendingProps;switch(Fd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(s),null;case 1:return Mt(s),null;case 3:return l=s.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),Eo(Jt),In(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(o===null||o.child===null)&&(hl(s)?wo(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xg())),Mt(s),null;case 26:return l=s.memoizedState,o===null?(wo(s),l!==null?(Mt(s),vv(s,l)):(Mt(s),s.flags&=-16777217)):l?l!==o.memoizedState?(wo(s),Mt(s),vv(s,l)):(Mt(s),s.flags&=-16777217):(o.memoizedProps!==d&&wo(s),Mt(s),s.flags&=-16777217),null;case 27:gn(s),l=Me.current;var y=s.type;if(o!==null&&s.stateNode!=null)o.memoizedProps!==d&&wo(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return Mt(s),null}o=Ae.current,hl(s)?Jg(s):(o=v_(y,d,l),s.stateNode=o,wo(s))}return Mt(s),null;case 5:if(gn(s),l=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==d&&wo(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return Mt(s),null}if(o=Ae.current,hl(s))Jg(s);else{switch(y=Hc(Me.current),o){case 1:o=y.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:o=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":o=y.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":o=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":o=y.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?o.multiple=!0:d.size&&(o.size=d.size);break;default:o=typeof d.is=="string"?y.createElement(l,{is:d.is}):y.createElement(l)}}o[Re]=s,o[we]=d;e:for(y=s.child;y!==null;){if(y.tag===5||y.tag===6)o.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===s)break e;for(;y.sibling===null;){if(y.return===null||y.return===s)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}s.stateNode=o;e:switch(cn(o,l,d),l){case"button":case"input":case"select":case"textarea":o=!!d.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&wo(s)}}return Mt(s),s.flags&=-16777217,null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==d&&wo(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(i(166));if(o=Me.current,hl(s)){if(o=s.stateNode,l=s.memoizedProps,d=null,y=Nn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}o[Re]=s,o=!!(o.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||f_(o.nodeValue,l)),o||is(s)}else o=Hc(o).createTextNode(d),o[Re]=s,s.stateNode=o}return Mt(s),null;case 13:if(d=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=hl(s),d!==null&&d.dehydrated!==null){if(o===null){if(!y)throw Error(i(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Re]=s}else pl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Mt(s),y=!1}else y=Xg(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(Ao(s),s):(Ao(s),null)}if(Ao(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=d!==null,o=o!==null&&o.memoizedState!==null,l){d=s.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var _=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),_!==y&&(d.flags|=2048)}return l!==o&&l&&(s.child.flags|=8192),Nc(s,s.updateQueue),Mt(s),null;case 4:return In(),o===null&&Zh(s.stateNode.containerInfo),Mt(s),null;case 10:return Eo(s.type),Mt(s),null;case 19:if(de(Qt),y=s.memoizedState,y===null)return Mt(s),null;if(d=(s.flags&128)!==0,_=y.rendering,_===null)if(d)Ml(y,!1);else{if(Pt!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(_=Ic(o),_!==null){for(s.flags|=128,Ml(y,!1),o=_.updateQueue,s.updateQueue=o,Nc(s,o),s.subtreeFlags=0,o=l,l=s.child;l!==null;)Yg(l,o),l=l.sibling;return ae(Qt,Qt.current&1|2),s.child}o=o.sibling}y.tail!==null&&Pn()>Pc&&(s.flags|=128,d=!0,Ml(y,!1),s.lanes=4194304)}else{if(!d)if(o=Ic(_),o!==null){if(s.flags|=128,d=!0,o=o.updateQueue,s.updateQueue=o,Nc(s,o),Ml(y,!0),y.tail===null&&y.tailMode==="hidden"&&!_.alternate&&!at)return Mt(s),null}else 2*Pn()-y.renderingStartTime>Pc&&l!==536870912&&(s.flags|=128,d=!0,Ml(y,!1),s.lanes=4194304);y.isBackwards?(_.sibling=s.child,s.child=_):(o=y.last,o!==null?o.sibling=_:s.child=_,y.last=_)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Pn(),s.sibling=null,o=Qt.current,ae(Qt,d?o&1|2:o&1),s):(Mt(s),null);case 22:case 23:return Ao(s),eh(),d=s.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(l&536870912)!==0&&(s.flags&128)===0&&(Mt(s),s.subtreeFlags&6&&(s.flags|=8192)):Mt(s),l=s.updateQueue,l!==null&&Nc(s,l.retryQueue),l=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==l&&(s.flags|=2048),o!==null&&de(ss),null;case 24:return l=null,o!==null&&(l=o.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Eo(Jt),Mt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Tw(o,s){switch(Fd(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return Eo(Jt),In(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return gn(s),null;case 13:if(Ao(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(i(340));pl()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return de(Qt),null;case 4:return In(),null;case 10:return Eo(s.type),null;case 22:case 23:return Ao(s),eh(),o!==null&&de(ss),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return Eo(Jt),null;case 25:return null;default:return null}}function _v(o,s){switch(Fd(s),s.tag){case 3:Eo(Jt),In();break;case 26:case 27:case 5:gn(s);break;case 4:In();break;case 13:Ao(s);break;case 19:de(Qt);break;case 10:Eo(s.type);break;case 22:case 23:Ao(s),eh(),o!==null&&de(ss);break;case 24:Eo(Jt)}}function Nl(o,s){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var y=d.next;l=y;do{if((l.tag&o)===o){d=void 0;var _=l.create,C=l.inst;d=_(),C.destroy=d}l=l.next}while(l!==y)}}catch(w){At(s,s.return,w)}}function or(o,s,l){try{var d=s.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var _=y.next;d=_;do{if((d.tag&o)===o){var C=d.inst,w=C.destroy;if(w!==void 0){C.destroy=void 0,y=s;var P=l,$=w;try{$()}catch(Z){At(y,P,Z)}}}d=d.next}while(d!==_)}}catch(Z){At(s,s.return,Z)}}function Tv(o){var s=o.updateQueue;if(s!==null){var l=o.stateNode;try{ay(s,l)}catch(d){At(o,o.return,d)}}}function Ev(o,s,l){l.props=ls(o.type,o.memoizedProps),l.state=o.memoizedState;try{l.componentWillUnmount()}catch(d){At(o,s,d)}}function kl(o,s){try{var l=o.ref;if(l!==null){switch(o.tag){case 26:case 27:case 5:var d=o.stateNode;break;case 30:d=o.stateNode;break;default:d=o.stateNode}typeof l=="function"?o.refCleanup=l(d):l.current=d}}catch(y){At(o,s,y)}}function qi(o,s){var l=o.ref,d=o.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(y){At(o,s,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){At(o,s,y)}else l.current=null}function Sv(o){var s=o.type,l=o.memoizedProps,d=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(y){At(o,o.return,y)}}function xh(o,s,l){try{var d=o.stateNode;qw(d,o.type,l,s),d[we]=s}catch(y){At(o,o.return,y)}}function Av(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&dr(o.type)||o.tag===4}function bh(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Av(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&dr(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Mh(o,s,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(o,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(o),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=zc));else if(d!==4&&(d===27&&dr(o.type)&&(l=o.stateNode,s=null),o=o.child,o!==null))for(Mh(o,s,l),o=o.sibling;o!==null;)Mh(o,s,l),o=o.sibling}function kc(o,s,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,s?l.insertBefore(o,s):l.appendChild(o);else if(d!==4&&(d===27&&dr(o.type)&&(l=o.stateNode),o=o.child,o!==null))for(kc(o,s,l),o=o.sibling;o!==null;)kc(o,s,l),o=o.sibling}function Cv(o){var s=o.stateNode,l=o.memoizedProps;try{for(var d=o.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);cn(s,d,l),s[Re]=o,s[we]=l}catch(_){At(o,o.return,_)}}var Io=!1,Ot=!1,Nh=!1,wv=typeof WeakSet=="function"?WeakSet:Set,nn=null;function Ew(o,s){if(o=o.containerInfo,tp=Xc,o=Lg(o),bd(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var y=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var C=0,w=-1,P=-1,$=0,Z=0,oe=o,K=null;t:for(;;){for(var J;oe!==l||y!==0&&oe.nodeType!==3||(w=C+y),oe!==_||d!==0&&oe.nodeType!==3||(P=C+d),oe.nodeType===3&&(C+=oe.nodeValue.length),(J=oe.firstChild)!==null;)K=oe,oe=J;for(;;){if(oe===o)break t;if(K===l&&++$===y&&(w=C),K===_&&++Z===d&&(P=C),(J=oe.nextSibling)!==null)break;oe=K,K=oe.parentNode}oe=J}l=w===-1||P===-1?null:{start:w,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(np={focusedElem:o,selectionRange:l},Xc=!1,nn=s;nn!==null;)if(s=nn,o=s.child,(s.subtreeFlags&1024)!==0&&o!==null)o.return=s,nn=o;else for(;nn!==null;){switch(s=nn,_=s.alternate,o=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,l=s,y=_.memoizedProps,_=_.memoizedState,d=l.stateNode;try{var Ne=ls(l.type,y,l.elementType===l.type);o=d.getSnapshotBeforeUpdate(Ne,_),d.__reactInternalSnapshotBeforeUpdate=o}catch(xe){At(l,l.return,xe)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,l=o.nodeType,l===9)rp(o);else if(l===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":rp(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=s.sibling,o!==null){o.return=s.return,nn=o;break}nn=s.return}}function Iv(o,s,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:rr(o,l),d&4&&Nl(5,l);break;case 1:if(rr(o,l),d&4)if(o=l.stateNode,s===null)try{o.componentDidMount()}catch(C){At(l,l.return,C)}else{var y=ls(l.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(y,s,o.__reactInternalSnapshotBeforeUpdate)}catch(C){At(l,l.return,C)}}d&64&&Tv(l),d&512&&kl(l,l.return);break;case 3:if(rr(o,l),d&64&&(o=l.updateQueue,o!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{ay(o,s)}catch(C){At(l,l.return,C)}}break;case 27:s===null&&d&4&&Cv(l);case 26:case 5:rr(o,l),s===null&&d&4&&Sv(l),d&512&&kl(l,l.return);break;case 12:rr(o,l);break;case 13:rr(o,l),d&4&&bv(o,l),d&64&&(o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(l=Mw.bind(null,l),Jw(o,l))));break;case 22:if(d=l.memoizedState!==null||Io,!d){s=s!==null&&s.memoizedState!==null||Ot,y=Io;var _=Ot;Io=d,(Ot=s)&&!_?sr(o,l,(l.subtreeFlags&8772)!==0):rr(o,l),Io=y,Ot=_}break;case 30:break;default:rr(o,l)}}function Rv(o){var s=o.alternate;s!==null&&(o.alternate=null,Rv(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&yn(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var xt=null,Un=!1;function Ro(o,s,l){for(l=l.child;l!==null;)xv(o,s,l),l=l.sibling}function xv(o,s,l){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(Rt,l)}catch{}switch(l.tag){case 26:Ot||qi(l,s),Ro(o,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ot||qi(l,s);var d=xt,y=Un;dr(l.type)&&(xt=l.stateNode,Un=!1),Ro(o,s,l),ql(l.stateNode),xt=d,Un=y;break;case 5:Ot||qi(l,s);case 6:if(d=xt,y=Un,xt=null,Ro(o,s,l),xt=d,Un=y,xt!==null)if(Un)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(l.stateNode)}catch(_){At(l,s,_)}else try{xt.removeChild(l.stateNode)}catch(_){At(l,s,_)}break;case 18:xt!==null&&(Un?(o=xt,g_(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.stateNode),Ql(o)):g_(xt,l.stateNode));break;case 4:d=xt,y=Un,xt=l.stateNode.containerInfo,Un=!0,Ro(o,s,l),xt=d,Un=y;break;case 0:case 11:case 14:case 15:Ot||or(2,l,s),Ot||or(4,l,s),Ro(o,s,l);break;case 1:Ot||(qi(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Ev(l,s,d)),Ro(o,s,l);break;case 21:Ro(o,s,l);break;case 22:Ot=(d=Ot)||l.memoizedState!==null,Ro(o,s,l),Ot=d;break;default:Ro(o,s,l)}}function bv(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Ql(o)}catch(l){At(s,s.return,l)}}function Sw(o){switch(o.tag){case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new wv),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new wv),s;default:throw Error(i(435,o.tag))}}function kh(o,s){var l=Sw(o);s.forEach(function(d){var y=Nw.bind(null,o,d);l.has(d)||(l.add(d),d.then(y,y))})}function $n(o,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var y=l[d],_=o,C=s,w=C;e:for(;w!==null;){switch(w.tag){case 27:if(dr(w.type)){xt=w.stateNode,Un=!1;break e}break;case 5:xt=w.stateNode,Un=!1;break e;case 3:case 4:xt=w.stateNode.containerInfo,Un=!0;break e}w=w.return}if(xt===null)throw Error(i(160));xv(_,C,y),xt=null,Un=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Mv(s,o),s=s.sibling}var Ti=null;function Mv(o,s){var l=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:$n(s,o),Yn(o),d&4&&(or(3,o,o.return),Nl(3,o),or(5,o,o.return));break;case 1:$n(s,o),Yn(o),d&512&&(Ot||l===null||qi(l,l.return)),d&64&&Io&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(l=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var y=Ti;if($n(s,o),Yn(o),d&512&&(Ot||l===null||qi(l,l.return)),d&4){var _=l!==null?l.memoizedState:null;if(d=o.memoizedState,l===null)if(d===null)if(o.stateNode===null){e:{d=o.type,l=o.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":_=y.getElementsByTagName("title")[0],(!_||_[gi]||_[Re]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(d),y.head.insertBefore(_,y.querySelector("head > title"))),cn(_,d,l),_[Re]=o,Lt(_),d=_;break e;case"link":var C=C_("link","href",y).get(d+(l.href||""));if(C){for(var w=0;w<C.length;w++)if(_=C[w],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(w,1);break t}}_=y.createElement(d),cn(_,d,l),y.head.appendChild(_);break;case"meta":if(C=C_("meta","content",y).get(d+(l.content||""))){for(w=0;w<C.length;w++)if(_=C[w],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(w,1);break t}}_=y.createElement(d),cn(_,d,l),y.head.appendChild(_);break;default:throw Error(i(468,d))}_[Re]=o,Lt(_),d=_}o.stateNode=d}else w_(y,o.type,o.stateNode);else o.stateNode=A_(y,d,o.memoizedProps);else _!==d?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,d===null?w_(y,o.type,o.stateNode):A_(y,d,o.memoizedProps)):d===null&&o.stateNode!==null&&xh(o,o.memoizedProps,l.memoizedProps)}break;case 27:$n(s,o),Yn(o),d&512&&(Ot||l===null||qi(l,l.return)),l!==null&&d&4&&xh(o,o.memoizedProps,l.memoizedProps);break;case 5:if($n(s,o),Yn(o),d&512&&(Ot||l===null||qi(l,l.return)),o.flags&32){y=o.stateNode;try{jn(y,"")}catch(J){At(o,o.return,J)}}d&4&&o.stateNode!=null&&(y=o.memoizedProps,xh(o,y,l!==null?l.memoizedProps:y)),d&1024&&(Nh=!0);break;case 6:if($n(s,o),Yn(o),d&4){if(o.stateNode===null)throw Error(i(162));d=o.memoizedProps,l=o.stateNode;try{l.nodeValue=d}catch(J){At(o,o.return,J)}}break;case 3:if(Kc=null,y=Ti,Ti=$c(s.containerInfo),$n(s,o),Ti=y,Yn(o),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Ql(s.containerInfo)}catch(J){At(o,o.return,J)}Nh&&(Nh=!1,Nv(o));break;case 4:d=Ti,Ti=$c(o.stateNode.containerInfo),$n(s,o),Yn(o),Ti=d;break;case 12:$n(s,o),Yn(o);break;case 13:$n(s,o),Yn(o),o.child.flags&8192&&o.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Oh=Pn()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,kh(o,d)));break;case 22:y=o.memoizedState!==null;var P=l!==null&&l.memoizedState!==null,$=Io,Z=Ot;if(Io=$||y,Ot=Z||P,$n(s,o),Ot=Z,Io=$,Yn(o),d&8192)e:for(s=o.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(l===null||P||Io||Ot||us(o)),l=null,s=o;;){if(s.tag===5||s.tag===26){if(l===null){P=l=s;try{if(_=P.stateNode,y)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{w=P.stateNode;var oe=P.memoizedProps.style,K=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;w.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(J){At(P,P.return,J)}}}else if(s.tag===6){if(l===null){P=s;try{P.stateNode.nodeValue=y?"":P.memoizedProps}catch(J){At(P,P.return,J)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=o.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,kh(o,l))));break;case 19:$n(s,o),Yn(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,kh(o,d)));break;case 30:break;case 21:break;default:$n(s,o),Yn(o)}}function Yn(o){var s=o.flags;if(s&2){try{for(var l,d=o.return;d!==null;){if(Av(d)){l=d;break}d=d.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=bh(o);kc(o,_,y);break;case 5:var C=l.stateNode;l.flags&32&&(jn(C,""),l.flags&=-33);var w=bh(o);kc(o,w,C);break;case 3:case 4:var P=l.stateNode.containerInfo,$=bh(o);Mh(o,$,P);break;default:throw Error(i(161))}}catch(Z){At(o,o.return,Z)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function Nv(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;Nv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function rr(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Iv(o,s.alternate,s),s=s.sibling}function us(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:or(4,s,s.return),us(s);break;case 1:qi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&Ev(s,s.return,l),us(s);break;case 27:ql(s.stateNode);case 26:case 5:qi(s,s.return),us(s);break;case 22:s.memoizedState===null&&us(s);break;case 30:us(s);break;default:us(s)}o=o.sibling}}function sr(o,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,y=o,_=s,C=_.flags;switch(_.tag){case 0:case 11:case 15:sr(y,_,l),Nl(4,_);break;case 1:if(sr(y,_,l),d=_,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch($){At(d,d.return,$)}if(d=_,y=d.updateQueue,y!==null){var w=d.stateNode;try{var P=y.shared.hiddenCallbacks;if(P!==null)for(y.shared.hiddenCallbacks=null,y=0;y<P.length;y++)sy(P[y],w)}catch($){At(d,d.return,$)}}l&&C&64&&Tv(_),kl(_,_.return);break;case 27:Cv(_);case 26:case 5:sr(y,_,l),l&&d===null&&C&4&&Sv(_),kl(_,_.return);break;case 12:sr(y,_,l);break;case 13:sr(y,_,l),l&&C&4&&bv(y,_);break;case 22:_.memoizedState===null&&sr(y,_,l),kl(_,_.return);break;case 30:break;default:sr(y,_,l)}s=s.sibling}}function Dh(o,s){var l=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==l&&(o!=null&&o.refCount++,l!=null&&yl(l))}function Ph(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&yl(o))}function Gi(o,s,l,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)kv(o,s,l,d),s=s.sibling}function kv(o,s,l,d){var y=s.flags;switch(s.tag){case 0:case 11:case 15:Gi(o,s,l,d),y&2048&&Nl(9,s);break;case 1:Gi(o,s,l,d);break;case 3:Gi(o,s,l,d),y&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&yl(o)));break;case 12:if(y&2048){Gi(o,s,l,d),o=s.stateNode;try{var _=s.memoizedProps,C=_.id,w=_.onPostCommit;typeof w=="function"&&w(C,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(P){At(s,s.return,P)}}else Gi(o,s,l,d);break;case 13:Gi(o,s,l,d);break;case 23:break;case 22:_=s.stateNode,C=s.alternate,s.memoizedState!==null?_._visibility&2?Gi(o,s,l,d):Dl(o,s):_._visibility&2?Gi(o,s,l,d):(_._visibility|=2,sa(o,s,l,d,(s.subtreeFlags&10256)!==0)),y&2048&&Dh(C,s);break;case 24:Gi(o,s,l,d),y&2048&&Ph(s.alternate,s);break;default:Gi(o,s,l,d)}}function sa(o,s,l,d,y){for(y=y&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var _=o,C=s,w=l,P=d,$=C.flags;switch(C.tag){case 0:case 11:case 15:sa(_,C,w,P,y),Nl(8,C);break;case 23:break;case 22:var Z=C.stateNode;C.memoizedState!==null?Z._visibility&2?sa(_,C,w,P,y):Dl(_,C):(Z._visibility|=2,sa(_,C,w,P,y)),y&&$&2048&&Dh(C.alternate,C);break;case 24:sa(_,C,w,P,y),y&&$&2048&&Ph(C.alternate,C);break;default:sa(_,C,w,P,y)}s=s.sibling}}function Dl(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=o,d=s,y=d.flags;switch(d.tag){case 22:Dl(l,d),y&2048&&Dh(d.alternate,d);break;case 24:Dl(l,d),y&2048&&Ph(d.alternate,d);break;default:Dl(l,d)}s=s.sibling}}var Pl=8192;function aa(o){if(o.subtreeFlags&Pl)for(o=o.child;o!==null;)Dv(o),o=o.sibling}function Dv(o){switch(o.tag){case 26:aa(o),o.flags&Pl&&o.memoizedState!==null&&aI(Ti,o.memoizedState,o.memoizedProps);break;case 5:aa(o);break;case 3:case 4:var s=Ti;Ti=$c(o.stateNode.containerInfo),aa(o),Ti=s;break;case 22:o.memoizedState===null&&(s=o.alternate,s!==null&&s.memoizedState!==null?(s=Pl,Pl=16777216,aa(o),Pl=s):aa(o));break;default:aa(o)}}function Pv(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function Vl(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];nn=d,Lv(d,o)}Pv(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Vv(o),o=o.sibling}function Vv(o){switch(o.tag){case 0:case 11:case 15:Vl(o),o.flags&2048&&or(9,o,o.return);break;case 3:Vl(o);break;case 12:Vl(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,Dc(o)):Vl(o);break;default:Vl(o)}}function Dc(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];nn=d,Lv(d,o)}Pv(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:or(8,s,s.return),Dc(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,Dc(s));break;default:Dc(s)}o=o.sibling}}function Lv(o,s){for(;nn!==null;){var l=nn;switch(l.tag){case 0:case 11:case 15:or(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:yl(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,nn=d;else e:for(l=o;nn!==null;){d=nn;var y=d.sibling,_=d.return;if(Rv(d),d===l){nn=null;break e}if(y!==null){y.return=_,nn=y;break e}nn=_}}}var Aw={getCacheForType:function(o){var s=vn(Jt),l=s.data.get(o);return l===void 0&&(l=o(),s.data.set(o,l)),l}},Cw=typeof WeakMap=="function"?WeakMap:Map,pt=0,wt=null,Ke=null,tt=0,mt=0,Kn=null,ar=!1,la=!1,Vh=!1,xo=0,Pt=0,lr=0,cs=0,Lh=0,li=0,ua=0,Ll=null,On=null,Uh=!1,Oh=0,Pc=1/0,Vc=null,ur=null,un=0,cr=null,ca=null,fa=0,Bh=0,Fh=null,Uv=null,Ul=0,qh=null;function Jn(){if((pt&2)!==0&&tt!==0)return tt&-tt;if(X.T!==null){var o=Zs;return o!==0?o:Jh()}return ut()}function Ov(){li===0&&(li=(tt&536870912)===0||at?Zt():536870912);var o=ai.current;return o!==null&&(o.flags|=32),li}function Qn(o,s,l){(o===wt&&(mt===2||mt===9)||o.cancelPendingCommit!==null)&&(da(o,0),fr(o,tt,li,!1)),te(o,l),((pt&2)===0||o!==wt)&&(o===wt&&((pt&2)===0&&(cs|=l),Pt===4&&fr(o,tt,li,!1)),zi(o))}function Bv(o,s,l){if((pt&6)!==0)throw Error(i(327));var d=!l&&(s&124)===0&&(s&o.expiredLanes)===0||ro(o,s),y=d?Rw(o,s):Hh(o,s,!0),_=d;do{if(y===0){la&&!d&&fr(o,s,0,!1);break}else{if(l=o.current.alternate,_&&!ww(l)){y=Hh(o,s,!1),_=!1;continue}if(y===2){if(_=s,o.errorRecoveryDisabledLanes&_)var C=0;else C=o.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){s=C;e:{var w=o;y=Ll;var P=w.current.memoizedState.isDehydrated;if(P&&(da(w,C).flags|=256),C=Hh(w,C,!1),C!==2){if(Vh&&!P){w.errorRecoveryDisabledLanes|=_,cs|=_,y=4;break e}_=On,On=y,_!==null&&(On===null?On=_:On.push.apply(On,_))}y=C}if(_=!1,y!==2)continue}}if(y===1){da(o,0),fr(o,s,0,!0);break}e:{switch(d=o,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:fr(d,s,li,!ar);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(y=Oh+300-Pn(),10<y)){if(fr(d,s,li,!ar),oo(d,0,!0)!==0)break e;d.timeoutHandle=p_(Fv.bind(null,d,l,On,Vc,Uh,s,li,cs,ua,ar,_,2,-0,0),y);break e}Fv(d,l,On,Vc,Uh,s,li,cs,ua,ar,_,0,-0,0)}}break}while(!0);zi(o)}function Fv(o,s,l,d,y,_,C,w,P,$,Z,oe,K,J){if(o.timeoutHandle=-1,oe=s.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Hl={stylesheets:null,count:0,unsuspend:sI},Dv(s),oe=lI(),oe!==null)){o.cancelPendingCommit=oe(Kv.bind(null,o,s,_,l,d,y,C,w,P,Z,1,K,J)),fr(o,_,C,!$);return}Kv(o,s,_,l,d,y,C,w,P)}function ww(o){for(var s=o;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var y=l[d],_=y.getSnapshot;y=y.value;try{if(!zn(_(),y))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function fr(o,s,l,d){s&=~Lh,s&=~cs,o.suspendedLanes|=s,o.pingedLanes&=~s,d&&(o.warmLanes|=s),d=o.expirationTimes;for(var y=s;0<y;){var _=31-Vt(y),C=1<<_;d[_]=-1,y&=~C}l!==0&&Ce(o,l,s)}function Lc(){return(pt&6)===0?(Ol(0),!1):!0}function Gh(){if(Ke!==null){if(mt===0)var o=Ke.return;else o=Ke,To=os=null,rh(o),oa=null,xl=0,o=Ke;for(;o!==null;)_v(o.alternate,o),o=o.return;Ke=null}}function da(o,s){var l=o.timeoutHandle;l!==-1&&(o.timeoutHandle=-1,zw(l)),l=o.cancelPendingCommit,l!==null&&(o.cancelPendingCommit=null,l()),Gh(),wt=o,Ke=l=yo(o.current,null),tt=s,mt=0,Kn=null,ar=!1,la=ro(o,s),Vh=!1,ua=li=Lh=cs=lr=Pt=0,On=Ll=null,Uh=!1,(s&8)!==0&&(s|=s&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=s;0<d;){var y=31-Vt(d),_=1<<y;s|=o[y],d&=~_}return xo=s,oc(),l}function qv(o,s){ze=null,X.H=Ac,s===_l||s===hc?(s=oy(),mt=3):s===ty?(s=oy(),mt=4):mt=s===rv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Kn=s,Ke===null&&(Pt=1,xc(o,ii(s,o.current)))}function Gv(){var o=X.H;return X.H=Ac,o===null?Ac:o}function zv(){var o=X.A;return X.A=Aw,o}function zh(){Pt=4,ar||(tt&4194048)!==tt&&ai.current!==null||(la=!0),(lr&134217727)===0&&(cs&134217727)===0||wt===null||fr(wt,tt,li,!1)}function Hh(o,s,l){var d=pt;pt|=2;var y=Gv(),_=zv();(wt!==o||tt!==s)&&(Vc=null,da(o,s)),s=!1;var C=Pt;e:do try{if(mt!==0&&Ke!==null){var w=Ke,P=Kn;switch(mt){case 8:Gh(),C=6;break e;case 3:case 2:case 9:case 6:ai.current===null&&(s=!0);var $=mt;if(mt=0,Kn=null,ha(o,w,P,$),l&&la){C=0;break e}break;default:$=mt,mt=0,Kn=null,ha(o,w,P,$)}}Iw(),C=Pt;break}catch(Z){qv(o,Z)}while(!0);return s&&o.shellSuspendCounter++,To=os=null,pt=d,X.H=y,X.A=_,Ke===null&&(wt=null,tt=0,oc()),C}function Iw(){for(;Ke!==null;)Hv(Ke)}function Rw(o,s){var l=pt;pt|=2;var d=Gv(),y=zv();wt!==o||tt!==s?(Vc=null,Pc=Pn()+500,da(o,s)):la=ro(o,s);e:do try{if(mt!==0&&Ke!==null){s=Ke;var _=Kn;t:switch(mt){case 1:mt=0,Kn=null,ha(o,s,_,1);break;case 2:case 9:if(ny(_)){mt=0,Kn=null,$v(s);break}s=function(){mt!==2&&mt!==9||wt!==o||(mt=7),zi(o)},_.then(s,s);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:ny(_)?(mt=0,Kn=null,$v(s)):(mt=0,Kn=null,ha(o,s,_,7));break;case 5:var C=null;switch(Ke.tag){case 26:C=Ke.memoizedState;case 5:case 27:var w=Ke;if(!C||I_(C)){mt=0,Kn=null;var P=w.sibling;if(P!==null)Ke=P;else{var $=w.return;$!==null?(Ke=$,Uc($)):Ke=null}break t}}mt=0,Kn=null,ha(o,s,_,5);break;case 6:mt=0,Kn=null,ha(o,s,_,6);break;case 8:Gh(),Pt=6;break e;default:throw Error(i(462))}}xw();break}catch(Z){qv(o,Z)}while(!0);return To=os=null,X.H=d,X.A=y,pt=l,Ke!==null?0:(wt=null,tt=0,oc(),Pt)}function xw(){for(;Ke!==null&&!pi();)Hv(Ke)}function Hv(o){var s=yv(o.alternate,o,xo);o.memoizedProps=o.pendingProps,s===null?Uc(o):Ke=s}function $v(o){var s=o,l=s.alternate;switch(s.tag){case 15:case 0:s=fv(l,s,s.pendingProps,s.type,void 0,tt);break;case 11:s=fv(l,s,s.pendingProps,s.type.render,s.ref,tt);break;case 5:rh(s);default:_v(l,s),s=Ke=Yg(s,xo),s=yv(l,s,xo)}o.memoizedProps=o.pendingProps,s===null?Uc(o):Ke=s}function ha(o,s,l,d){To=os=null,rh(s),oa=null,xl=0;var y=s.return;try{if(yw(o,y,s,l,tt)){Pt=1,xc(o,ii(l,o.current)),Ke=null;return}}catch(_){if(y!==null)throw Ke=y,_;Pt=1,xc(o,ii(l,o.current)),Ke=null;return}s.flags&32768?(at||d===1?o=!0:la||(tt&536870912)!==0?o=!1:(ar=o=!0,(d===2||d===9||d===3||d===6)&&(d=ai.current,d!==null&&d.tag===13&&(d.flags|=16384))),Yv(s,o)):Uc(s)}function Uc(o){var s=o;do{if((s.flags&32768)!==0){Yv(s,ar);return}o=s.return;var l=_w(s.alternate,s,xo);if(l!==null){Ke=l;return}if(s=s.sibling,s!==null){Ke=s;return}Ke=s=o}while(s!==null);Pt===0&&(Pt=5)}function Yv(o,s){do{var l=Tw(o.alternate,o);if(l!==null){l.flags&=32767,Ke=l;return}if(l=o.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(o=o.sibling,o!==null)){Ke=o;return}Ke=o=l}while(o!==null);Pt=6,Ke=null}function Kv(o,s,l,d,y,_,C,w,P){o.cancelPendingCommit=null;do Oc();while(un!==0);if((pt&6)!==0)throw Error(i(327));if(s!==null){if(s===o.current)throw Error(i(177));if(_=s.lanes|s.childLanes,_|=Pd,pe(o,l,_,C,w,P),o===wt&&(Ke=wt=null,tt=0),ca=s,cr=o,fa=l,Bh=_,Fh=y,Uv=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,kw(no,function(){return Zv(),null})):(o.callbackNode=null,o.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=X.T,X.T=null,y=he.p,he.p=2,C=pt,pt|=4;try{Ew(o,s,l)}finally{pt=C,he.p=y,X.T=d}}un=1,Jv(),Qv(),Xv()}}function Jv(){if(un===1){un=0;var o=cr,s=ca,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var d=he.p;he.p=2;var y=pt;pt|=4;try{Mv(s,o);var _=np,C=Lg(o.containerInfo),w=_.focusedElem,P=_.selectionRange;if(C!==w&&w&&w.ownerDocument&&Vg(w.ownerDocument.documentElement,w)){if(P!==null&&bd(w)){var $=P.start,Z=P.end;if(Z===void 0&&(Z=$),"selectionStart"in w)w.selectionStart=$,w.selectionEnd=Math.min(Z,w.value.length);else{var oe=w.ownerDocument||document,K=oe&&oe.defaultView||window;if(K.getSelection){var J=K.getSelection(),Ne=w.textContent.length,xe=Math.min(P.start,Ne),Et=P.end===void 0?xe:Math.min(P.end,Ne);!J.extend&&xe>Et&&(C=Et,Et=xe,xe=C);var G=Pg(w,xe),B=Pg(w,Et);if(G&&B&&(J.rangeCount!==1||J.anchorNode!==G.node||J.anchorOffset!==G.offset||J.focusNode!==B.node||J.focusOffset!==B.offset)){var H=oe.createRange();H.setStart(G.node,G.offset),J.removeAllRanges(),xe>Et?(J.addRange(H),J.extend(B.node,B.offset)):(H.setEnd(B.node,B.offset),J.addRange(H))}}}}for(oe=[],J=w;J=J.parentNode;)J.nodeType===1&&oe.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<oe.length;w++){var ee=oe[w];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Xc=!!tp,np=tp=null}finally{pt=y,he.p=d,X.T=l}}o.current=s,un=2}}function Qv(){if(un===2){un=0;var o=cr,s=ca,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var d=he.p;he.p=2;var y=pt;pt|=4;try{Iv(o,s.alternate,s)}finally{pt=y,he.p=d,X.T=l}}un=3}}function Xv(){if(un===4||un===3){un=0,zo();var o=cr,s=ca,l=fa,d=Uv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?un=5:(un=0,ca=cr=null,Wv(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(ur=null),$e(l),s=s.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(Rt,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=X.T,y=he.p,he.p=2,X.T=null;try{for(var _=o.onRecoverableError,C=0;C<d.length;C++){var w=d[C];_(w.value,{componentStack:w.stack})}}finally{X.T=s,he.p=y}}(fa&3)!==0&&Oc(),zi(o),y=o.pendingLanes,(l&4194090)!==0&&(y&42)!==0?o===qh?Ul++:(Ul=0,qh=o):Ul=0,Ol(0)}}function Wv(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,yl(s)))}function Oc(o){return Jv(),Qv(),Xv(),Zv()}function Zv(){if(un!==5)return!1;var o=cr,s=Bh;Bh=0;var l=$e(fa),d=X.T,y=he.p;try{he.p=32>l?32:l,X.T=null,l=Fh,Fh=null;var _=cr,C=fa;if(un=0,ca=cr=null,fa=0,(pt&6)!==0)throw Error(i(331));var w=pt;if(pt|=4,Vv(_.current),kv(_,_.current,C,l),pt=w,Ol(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(Rt,_)}catch{}return!0}finally{he.p=y,X.T=d,Wv(o,s)}}function jv(o,s,l){s=ii(l,s),s=_h(o.stateNode,s,2),o=er(o,s,2),o!==null&&(te(o,2),zi(o))}function At(o,s,l){if(o.tag===3)jv(o,o,l);else for(;s!==null;){if(s.tag===3){jv(s,o,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ur===null||!ur.has(d))){o=ii(l,o),l=iv(2),d=er(s,l,2),d!==null&&(ov(l,d,s,o),te(d,2),zi(d));break}}s=s.return}}function $h(o,s,l){var d=o.pingCache;if(d===null){d=o.pingCache=new Cw;var y=new Set;d.set(s,y)}else y=d.get(s),y===void 0&&(y=new Set,d.set(s,y));y.has(l)||(Vh=!0,y.add(l),o=bw.bind(null,o,s,l),s.then(o,o))}function bw(o,s,l){var d=o.pingCache;d!==null&&d.delete(s),o.pingedLanes|=o.suspendedLanes&l,o.warmLanes&=~l,wt===o&&(tt&l)===l&&(Pt===4||Pt===3&&(tt&62914560)===tt&&300>Pn()-Oh?(pt&2)===0&&da(o,0):Lh|=l,ua===tt&&(ua=0)),zi(o)}function e_(o,s){s===0&&(s=Y()),o=Js(o,s),o!==null&&(te(o,s),zi(o))}function Mw(o){var s=o.memoizedState,l=0;s!==null&&(l=s.retryLane),e_(o,l)}function Nw(o,s){var l=0;switch(o.tag){case 13:var d=o.stateNode,y=o.memoizedState;y!==null&&(l=y.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(s),e_(o,l)}function kw(o,s){return Ri(o,s)}var Bc=null,pa=null,Yh=!1,Fc=!1,Kh=!1,fs=0;function zi(o){o!==pa&&o.next===null&&(pa===null?Bc=pa=o:pa=pa.next=o),Fc=!0,Yh||(Yh=!0,Pw())}function Ol(o,s){if(!Kh&&Fc){Kh=!0;do for(var l=!1,d=Bc;d!==null;){if(o!==0){var y=d.pendingLanes;if(y===0)var _=0;else{var C=d.suspendedLanes,w=d.pingedLanes;_=(1<<31-Vt(42|o)+1)-1,_&=y&~(C&~w),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,o_(d,_))}else _=tt,_=oo(d,d===wt?_:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(_&3)===0||ro(d,_)||(l=!0,o_(d,_));d=d.next}while(l);Kh=!1}}function Dw(){t_()}function t_(){Fc=Yh=!1;var o=0;fs!==0&&(Gw()&&(o=fs),fs=0);for(var s=Pn(),l=null,d=Bc;d!==null;){var y=d.next,_=n_(d,s);_===0?(d.next=null,l===null?Bc=y:l.next=y,y===null&&(pa=l)):(l=d,(o!==0||(_&3)!==0)&&(Fc=!0)),d=y}Ol(o)}function n_(o,s){for(var l=o.suspendedLanes,d=o.pingedLanes,y=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var C=31-Vt(_),w=1<<C,P=y[C];P===-1?((w&l)===0||(w&d)!==0)&&(y[C]=Ko(w,s)):P<=s&&(o.expiredLanes|=w),_&=~w}if(s=wt,l=tt,l=oo(o,o===s?l:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d=o.callbackNode,l===0||o===s&&(mt===2||mt===9)||o.cancelPendingCommit!==null)return d!==null&&d!==null&&hi(d),o.callbackNode=null,o.callbackPriority=0;if((l&3)===0||ro(o,l)){if(s=l&-l,s===o.callbackPriority)return s;switch(d!==null&&hi(d),$e(l)){case 2:case 8:l=$o;break;case 32:l=no;break;case 268435456:l=xi;break;default:l=no}return d=i_.bind(null,o),l=Ri(l,d),o.callbackPriority=s,o.callbackNode=l,s}return d!==null&&d!==null&&hi(d),o.callbackPriority=2,o.callbackNode=null,2}function i_(o,s){if(un!==0&&un!==5)return o.callbackNode=null,o.callbackPriority=0,null;var l=o.callbackNode;if(Oc()&&o.callbackNode!==l)return null;var d=tt;return d=oo(o,o===wt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d===0?null:(Bv(o,d,s),n_(o,Pn()),o.callbackNode!=null&&o.callbackNode===l?i_.bind(null,o):null)}function o_(o,s){if(Oc())return null;Bv(o,s,!0)}function Pw(){Hw(function(){(pt&6)!==0?Ri(Ho,Dw):t_()})}function Jh(){return fs===0&&(fs=Zt()),fs}function r_(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Ls(""+o)}function s_(o,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,o.id&&l.setAttribute("form",o.id),s.parentNode.insertBefore(l,s),o=new FormData(o),l.parentNode.removeChild(l),o}function Vw(o,s,l,d,y){if(s==="submit"&&l&&l.stateNode===y){var _=r_((y[we]||null).action),C=d.submitter;C&&(s=(s=C[we]||null)?r_(s.formAction):C.getAttribute("formAction"),s!==null&&(_=s,C=null));var w=new Us("action","action",null,d,y);o.push({event:w,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(fs!==0){var P=C?s_(y,C):new FormData(y);ph(l,{pending:!0,data:P,method:y.method,action:_},null,P)}}else typeof _=="function"&&(w.preventDefault(),P=C?s_(y,C):new FormData(y),ph(l,{pending:!0,data:P,method:y.method,action:_},_,P))},currentTarget:y}]})}}for(var Qh=0;Qh<Dd.length;Qh++){var Xh=Dd[Qh],Lw=Xh.toLowerCase(),Uw=Xh[0].toUpperCase()+Xh.slice(1);_i(Lw,"on"+Uw)}_i(Bg,"onAnimationEnd"),_i(Fg,"onAnimationIteration"),_i(qg,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(ew,"onTransitionRun"),_i(tw,"onTransitionStart"),_i(nw,"onTransitionCancel"),_i(Gg,"onTransitionEnd"),ao("onMouseEnter",["mouseout","mouseover"]),ao("onMouseLeave",["mouseout","mouseover"]),ao("onPointerEnter",["pointerout","pointerover"]),ao("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ow=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bl));function a_(o,s){s=(s&4)!==0;for(var l=0;l<o.length;l++){var d=o[l],y=d.event;d=d.listeners;e:{var _=void 0;if(s)for(var C=d.length-1;0<=C;C--){var w=d[C],P=w.instance,$=w.currentTarget;if(w=w.listener,P!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=$;try{_(y)}catch(Z){Rc(Z)}y.currentTarget=null,_=P}else for(C=0;C<d.length;C++){if(w=d[C],P=w.instance,$=w.currentTarget,w=w.listener,P!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=$;try{_(y)}catch(Z){Rc(Z)}y.currentTarget=null,_=P}}}}function Je(o,s){var l=s[Ge];l===void 0&&(l=s[Ge]=new Set);var d=o+"__bubble";l.has(d)||(l_(s,o,2,!1),l.add(d))}function Wh(o,s,l){var d=0;s&&(d|=4),l_(l,o,d,s)}var qc="_reactListening"+Math.random().toString(36).slice(2);function Zh(o){if(!o[qc]){o[qc]=!0,Wa.forEach(function(l){l!=="selectionchange"&&(Ow.has(l)||Wh(l,!1,o),Wh(l,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[qc]||(s[qc]=!0,Wh("selectionchange",!1,s))}}function l_(o,s,l,d){switch(k_(s)){case 2:var y=fI;break;case 8:y=dI;break;default:y=dp}l=y.bind(null,s,l,o),y=void 0,!ti||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),d?y!==void 0?o.addEventListener(s,l,{capture:!0,passive:y}):o.addEventListener(s,l,!0):y!==void 0?o.addEventListener(s,l,{passive:y}):o.addEventListener(s,l,!1)}function jh(o,s,l,d,y){var _=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var w=d.stateNode.containerInfo;if(w===y)break;if(C===4)for(C=d.return;C!==null;){var P=C.tag;if((P===3||P===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;w!==null;){if(C=so(w),C===null)return;if(P=C.tag,P===5||P===6||P===26||P===27){d=_=C;continue e}w=w.parentNode}}d=d.return}zu(function(){var $=_,Z=ei(l),oe=[];e:{var K=zg.get(o);if(K!==void 0){var J=Us,Ne=o;switch(o){case"keypress":if(Pi(l)===0)break e;case"keydown":case"keyup":J=zs;break;case"focusin":Ne="focus",J=Fs;break;case"focusout":Ne="blur",J=Fs;break;case"beforeblur":case"afterblur":J=Fs;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=ni;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=wd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Wu;break;case Bg:case Fg:case qg:J=qs;break;case Gg:J=ju;break;case"scroll":case"scrollend":J=Hu;break;case"wheel":J=Hs;break;case"copy":case"cut":case"paste":J=Gs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=ul;break;case"toggle":case"beforetoggle":J=tc}var xe=(s&4)!==0,Et=!xe&&(o==="scroll"||o==="scrollend"),G=xe?K!==null?K+"Capture":null:K;xe=[];for(var B=$,H;B!==null;){var ee=B;if(H=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||H===null||G===null||(ee=Hr(B,G),ee!=null&&xe.push(Fl(B,ee,H))),Et)break;B=B.return}0<xe.length&&(K=new J(K,Ne,null,l,Z),oe.push({event:K,listeners:xe}))}}if((s&7)===0){e:{if(K=o==="mouseover"||o==="pointerover",J=o==="mouseout"||o==="pointerout",K&&l!==co&&(Ne=l.relatedTarget||l.fromElement)&&(so(Ne)||Ne[Ze]))break e;if((J||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,J?(Ne=l.relatedTarget||l.toElement,J=$,Ne=Ne?so(Ne):null,Ne!==null&&(Et=a(Ne),xe=Ne.tag,Ne!==Et||xe!==5&&xe!==27&&xe!==6)&&(Ne=null)):(J=null,Ne=$),J!==Ne)){if(xe=ni,ee="onMouseLeave",G="onMouseEnter",B="mouse",(o==="pointerout"||o==="pointerover")&&(xe=ul,ee="onPointerLeave",G="onPointerEnter",B="pointer"),Et=J==null?K:Mi(J),H=Ne==null?K:Mi(Ne),K=new xe(ee,B+"leave",J,l,Z),K.target=Et,K.relatedTarget=H,ee=null,so(Z)===$&&(xe=new xe(G,B+"enter",Ne,l,Z),xe.target=H,xe.relatedTarget=Et,ee=xe),Et=ee,J&&Ne)t:{for(xe=J,G=Ne,B=0,H=xe;H;H=ma(H))B++;for(H=0,ee=G;ee;ee=ma(ee))H++;for(;0<B-H;)xe=ma(xe),B--;for(;0<H-B;)G=ma(G),H--;for(;B--;){if(xe===G||G!==null&&xe===G.alternate)break t;xe=ma(xe),G=ma(G)}xe=null}else xe=null;J!==null&&u_(oe,K,J,xe,!1),Ne!==null&&Et!==null&&u_(oe,Et,Ne,xe,!0)}}e:{if(K=$?Mi($):window,J=K.nodeName&&K.nodeName.toLowerCase(),J==="select"||J==="input"&&K.type==="file")var ge=xg;else if(Kt(K))if(bg)ge=WC;else{ge=QC;var He=JC}else J=K.nodeName,!J||J.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?$&&nl($.elementType)&&(ge=xg):ge=XC;if(ge&&(ge=ge(o,$))){go(oe,ge,l,Z);break e}He&&He(o,K,$),o==="focusout"&&$&&K.type==="number"&&$.memoizedProps.value!=null&&Qo(K,"number",K.value)}switch(He=$?Mi($):window,o){case"focusin":(Kt(He)||He.contentEditable==="true")&&($s=He,Md=$,dl=null);break;case"focusout":dl=Md=$s=null;break;case"mousedown":Nd=!0;break;case"contextmenu":case"mouseup":case"dragend":Nd=!1,Ug(oe,l,Z);break;case"selectionchange":if(jC)break;case"keydown":case"keyup":Ug(oe,l,Z)}var Ee;if(Ui)e:{switch(o){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else je?Q(o,l)&&(be="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(be="onCompositionStart");be&&(A&&l.locale!=="ko"&&(je||be!=="onCompositionStart"?be==="onCompositionEnd"&&je&&(Ee=ol()):(Di=Z,Xo="value"in Di?Di.value:Di.textContent,je=!0)),He=Gc($,be),0<He.length&&(be=new al(be,o,null,l,Z),oe.push({event:be,listeners:He}),Ee?be.data=Ee:(Ee=ce(l),Ee!==null&&(be.data=Ee)))),(Ee=T?Yt(o,l):et(o,l))&&(be=Gc($,"onBeforeInput"),0<be.length&&(He=new al("onBeforeInput","beforeinput",null,l,Z),oe.push({event:He,listeners:be}),He.data=Ee)),Vw(oe,o,$,l,Z)}a_(oe,s)})}function Fl(o,s,l){return{instance:o,listener:s,currentTarget:l}}function Gc(o,s){for(var l=s+"Capture",d=[];o!==null;){var y=o,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Hr(o,l),y!=null&&d.unshift(Fl(o,y,_)),y=Hr(o,s),y!=null&&d.push(Fl(o,y,_))),o.tag===3)return d;o=o.return}return[]}function ma(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function u_(o,s,l,d,y){for(var _=s._reactName,C=[];l!==null&&l!==d;){var w=l,P=w.alternate,$=w.stateNode;if(w=w.tag,P!==null&&P===d)break;w!==5&&w!==26&&w!==27||$===null||(P=$,y?($=Hr(l,_),$!=null&&C.unshift(Fl(l,$,P))):y||($=Hr(l,_),$!=null&&C.push(Fl(l,$,P)))),l=l.return}C.length!==0&&o.push({event:s,listeners:C})}var Bw=/\r\n?/g,Fw=/\u0000|\uFFFD/g;function c_(o){return(typeof o=="string"?o:""+o).replace(Bw,`
`).replace(Fw,"")}function f_(o,s){return s=c_(s),c_(o)===s}function zc(){}function Tt(o,s,l,d,y,_){switch(l){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||jn(o,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&jn(o,""+d);break;case"className":Ni(o,"class",d);break;case"tabIndex":Ni(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ni(o,l,d);break;case"style":tl(o,d,_);break;case"data":if(s!=="object"){Ni(o,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||l!=="href")){o.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(l);break}d=Ls(""+d),o.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(s!=="input"&&Tt(o,s,"name",y.name,y,null),Tt(o,s,"formEncType",y.formEncType,y,null),Tt(o,s,"formMethod",y.formMethod,y,null),Tt(o,s,"formTarget",y.formTarget,y,null)):(Tt(o,s,"encType",y.encType,y,null),Tt(o,s,"method",y.method,y,null),Tt(o,s,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(l);break}d=Ls(""+d),o.setAttribute(l,d);break;case"onClick":d!=null&&(o.onclick=zc);break;case"onScroll":d!=null&&Je("scroll",o);break;case"onScrollEnd":d!=null&&Je("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}l=Ls(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(l,""+d):o.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(l,""):o.removeAttribute(l);break;case"capture":case"download":d===!0?o.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(l,d):o.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(l,d):o.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(l):o.setAttribute(l,d);break;case"popover":Je("beforetoggle",o),Je("toggle",o),Jo(o,"popover",d);break;case"xlinkActuate":sn(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":sn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":sn(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":sn(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":sn(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":sn(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":sn(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":sn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":sn(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Jo(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Ad.get(l)||l,Jo(o,l,d))}}function ep(o,s,l,d,y,_){switch(l){case"style":tl(o,d,_);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"children":typeof d=="string"?jn(o,d):(typeof d=="number"||typeof d=="bigint")&&jn(o,""+d);break;case"onScroll":d!=null&&Je("scroll",o);break;case"onScrollEnd":d!=null&&Je("scrollend",o);break;case"onClick":d!=null&&(o.onclick=zc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ns.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),s=l.slice(2,y?l.length-7:void 0),_=o[we]||null,_=_!=null?_[l]:null,typeof _=="function"&&o.removeEventListener(s,_,y),typeof d=="function")){typeof _!="function"&&_!==null&&(l in o?o[l]=null:o.hasAttribute(l)&&o.removeAttribute(l)),o.addEventListener(s,d,y);break e}l in o?o[l]=d:d===!0?o.setAttribute(l,""):Jo(o,l,d)}}}function cn(o,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",o),Je("load",o);var d=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var C=l[_];if(C!=null)switch(_){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Tt(o,s,_,C,l,null)}}y&&Tt(o,s,"srcSet",l.srcSet,l,null),d&&Tt(o,s,"src",l.src,l,null);return;case"input":Je("invalid",o);var w=_=C=y=null,P=null,$=null;for(d in l)if(l.hasOwnProperty(d)){var Z=l[d];if(Z!=null)switch(d){case"name":y=Z;break;case"type":C=Z;break;case"checked":P=Z;break;case"defaultChecked":$=Z;break;case"value":_=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:Tt(o,s,d,Z,l,null)}}qr(o,_,w,P,$,C,y,!1),Vs(o);return;case"select":Je("invalid",o),d=C=_=null;for(y in l)if(l.hasOwnProperty(y)&&(w=l[y],w!=null))switch(y){case"value":_=w;break;case"defaultValue":C=w;break;case"multiple":d=w;default:Tt(o,s,y,w,l,null)}s=_,l=C,o.multiple=!!d,s!=null?uo(o,!!d,s,!1):l!=null&&uo(o,!!d,l,!0);return;case"textarea":Je("invalid",o),_=y=d=null;for(C in l)if(l.hasOwnProperty(C)&&(w=l[C],w!=null))switch(C){case"value":d=w;break;case"defaultValue":y=w;break;case"children":_=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:Tt(o,s,C,w,l,null)}Gr(o,d,y,_),Vs(o);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(d=l[P],d!=null))switch(P){case"selected":o.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Tt(o,s,P,d,l,null)}return;case"dialog":Je("beforetoggle",o),Je("toggle",o),Je("cancel",o),Je("close",o);break;case"iframe":case"object":Je("load",o);break;case"video":case"audio":for(d=0;d<Bl.length;d++)Je(Bl[d],o);break;case"image":Je("error",o),Je("load",o);break;case"details":Je("toggle",o);break;case"embed":case"source":case"link":Je("error",o),Je("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in l)if(l.hasOwnProperty($)&&(d=l[$],d!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Tt(o,s,$,d,l,null)}return;default:if(nl(s)){for(Z in l)l.hasOwnProperty(Z)&&(d=l[Z],d!==void 0&&ep(o,s,Z,d,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(d=l[w],d!=null&&Tt(o,s,w,d,l,null))}function qw(o,s,l,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,C=null,w=null,P=null,$=null,Z=null;for(J in l){var oe=l[J];if(l.hasOwnProperty(J)&&oe!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":P=oe;default:d.hasOwnProperty(J)||Tt(o,s,J,null,d,oe)}}for(var K in d){var J=d[K];if(oe=l[K],d.hasOwnProperty(K)&&(J!=null||oe!=null))switch(K){case"type":_=J;break;case"name":y=J;break;case"checked":$=J;break;case"defaultChecked":Z=J;break;case"value":C=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:J!==oe&&Tt(o,s,K,J,d,oe)}}Gn(o,C,w,P,$,Z,_,y);return;case"select":J=C=w=K=null;for(_ in l)if(P=l[_],l.hasOwnProperty(_)&&P!=null)switch(_){case"value":break;case"multiple":J=P;default:d.hasOwnProperty(_)||Tt(o,s,_,null,d,P)}for(y in d)if(_=d[y],P=l[y],d.hasOwnProperty(y)&&(_!=null||P!=null))switch(y){case"value":K=_;break;case"defaultValue":w=_;break;case"multiple":C=_;default:_!==P&&Tt(o,s,y,_,d,P)}s=w,l=C,d=J,K!=null?uo(o,!!l,K,!1):!!d!=!!l&&(s!=null?uo(o,!!l,s,!0):uo(o,!!l,l?[]:"",!1));return;case"textarea":J=K=null;for(w in l)if(y=l[w],l.hasOwnProperty(w)&&y!=null&&!d.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Tt(o,s,w,null,d,y)}for(C in d)if(y=d[C],_=l[C],d.hasOwnProperty(C)&&(y!=null||_!=null))switch(C){case"value":K=y;break;case"defaultValue":J=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&Tt(o,s,C,y,d,_)}vt(o,K,J);return;case"option":for(var Ne in l)if(K=l[Ne],l.hasOwnProperty(Ne)&&K!=null&&!d.hasOwnProperty(Ne))switch(Ne){case"selected":o.selected=!1;break;default:Tt(o,s,Ne,null,d,K)}for(P in d)if(K=d[P],J=l[P],d.hasOwnProperty(P)&&K!==J&&(K!=null||J!=null))switch(P){case"selected":o.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Tt(o,s,P,K,d,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in l)K=l[xe],l.hasOwnProperty(xe)&&K!=null&&!d.hasOwnProperty(xe)&&Tt(o,s,xe,null,d,K);for($ in d)if(K=d[$],J=l[$],d.hasOwnProperty($)&&K!==J&&(K!=null||J!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:Tt(o,s,$,K,d,J)}return;default:if(nl(s)){for(var Et in l)K=l[Et],l.hasOwnProperty(Et)&&K!==void 0&&!d.hasOwnProperty(Et)&&ep(o,s,Et,void 0,d,K);for(Z in d)K=d[Z],J=l[Z],!d.hasOwnProperty(Z)||K===J||K===void 0&&J===void 0||ep(o,s,Z,K,d,J);return}}for(var G in l)K=l[G],l.hasOwnProperty(G)&&K!=null&&!d.hasOwnProperty(G)&&Tt(o,s,G,null,d,K);for(oe in d)K=d[oe],J=l[oe],!d.hasOwnProperty(oe)||K===J||K==null&&J==null||Tt(o,s,oe,K,d,J)}var tp=null,np=null;function Hc(o){return o.nodeType===9?o:o.ownerDocument}function d_(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h_(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function ip(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var op=null;function Gw(){var o=window.event;return o&&o.type==="popstate"?o===op?!1:(op=o,!0):(op=null,!1)}var p_=typeof setTimeout=="function"?setTimeout:void 0,zw=typeof clearTimeout=="function"?clearTimeout:void 0,m_=typeof Promise=="function"?Promise:void 0,Hw=typeof queueMicrotask=="function"?queueMicrotask:typeof m_<"u"?function(o){return m_.resolve(null).then(o).catch($w)}:p_;function $w(o){setTimeout(function(){throw o})}function dr(o){return o==="head"}function g_(o,s){var l=s,d=0,y=0;do{var _=l.nextSibling;if(o.removeChild(l),_&&_.nodeType===8)if(l=_.data,l==="/$"){if(0<d&&8>d){l=d;var C=o.ownerDocument;if(l&1&&ql(C.documentElement),l&2&&ql(C.body),l&4)for(l=C.head,ql(l),C=l.firstChild;C;){var w=C.nextSibling,P=C.nodeName;C[gi]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=w}}if(y===0){o.removeChild(_),Ql(s);return}y--}else l==="$"||l==="$?"||l==="$!"?y++:d=l.charCodeAt(0)-48;else d=0;l=_}while(l);Ql(s)}function rp(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":rp(l),yn(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}o.removeChild(l)}}function Yw(o,s,l,d){for(;o.nodeType===1;){var y=l;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[gi])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=Ei(o.nextSibling),o===null)break}return null}function Kw(o,s,l){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Ei(o.nextSibling),o===null))return null;return o}function sp(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function Jw(o,s){var l=o.ownerDocument;if(o.data!=="$?"||l.readyState==="complete")s();else{var d=function(){s(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),o._reactRetry=d}}function Ei(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return o}var ap=null;function y_(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return o;s--}else l==="/$"&&s++}o=o.previousSibling}return null}function v_(o,s,l){switch(s=Hc(l),o){case"html":if(o=s.documentElement,!o)throw Error(i(452));return o;case"head":if(o=s.head,!o)throw Error(i(453));return o;case"body":if(o=s.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function ql(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);yn(o)}var ui=new Map,__=new Set;function $c(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var bo=he.d;he.d={f:Qw,r:Xw,D:Ww,C:Zw,L:jw,m:eI,X:nI,S:tI,M:iI};function Qw(){var o=bo.f(),s=Lc();return o||s}function Xw(o){var s=bi(o);s!==null&&s.tag===5&&s.type==="form"?By(s):bo.r(o)}var ga=typeof document>"u"?null:document;function T_(o,s,l){var d=ga;if(d&&typeof s=="string"&&s){var y=qt(s);y='link[rel="'+o+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),__.has(y)||(__.add(y),o={rel:o,crossOrigin:l,href:s},d.querySelector(y)===null&&(s=d.createElement("link"),cn(s,"link",o),Lt(s),d.head.appendChild(s)))}}function Ww(o){bo.D(o),T_("dns-prefetch",o,null)}function Zw(o,s){bo.C(o,s),T_("preconnect",o,s)}function jw(o,s,l){bo.L(o,s,l);var d=ga;if(d&&o&&s){var y='link[rel="preload"][as="'+qt(s)+'"]';s==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+qt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+qt(l.imageSizes)+'"]')):y+='[href="'+qt(o)+'"]';var _=y;switch(s){case"style":_=ya(o);break;case"script":_=va(o)}ui.has(_)||(o=v({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:o,as:s},l),ui.set(_,o),d.querySelector(y)!==null||s==="style"&&d.querySelector(Gl(_))||s==="script"&&d.querySelector(zl(_))||(s=d.createElement("link"),cn(s,"link",o),Lt(s),d.head.appendChild(s)))}}function eI(o,s){bo.m(o,s);var l=ga;if(l&&o){var d=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+qt(d)+'"][href="'+qt(o)+'"]',_=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=va(o)}if(!ui.has(_)&&(o=v({rel:"modulepreload",href:o},s),ui.set(_,o),l.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(zl(_)))return}d=l.createElement("link"),cn(d,"link",o),Lt(d),l.head.appendChild(d)}}}function tI(o,s,l){bo.S(o,s,l);var d=ga;if(d&&o){var y=xn(d).hoistableStyles,_=ya(o);s=s||"default";var C=y.get(_);if(!C){var w={loading:0,preload:null};if(C=d.querySelector(Gl(_)))w.loading=5;else{o=v({rel:"stylesheet",href:o,"data-precedence":s},l),(l=ui.get(_))&&lp(o,l);var P=C=d.createElement("link");Lt(P),cn(P,"link",o),P._p=new Promise(function($,Z){P.onload=$,P.onerror=Z}),P.addEventListener("load",function(){w.loading|=1}),P.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Yc(C,s,d)}C={type:"stylesheet",instance:C,count:1,state:w},y.set(_,C)}}}function nI(o,s){bo.X(o,s);var l=ga;if(l&&o){var d=xn(l).hoistableScripts,y=va(o),_=d.get(y);_||(_=l.querySelector(zl(y)),_||(o=v({src:o,async:!0},s),(s=ui.get(y))&&up(o,s),_=l.createElement("script"),Lt(_),cn(_,"link",o),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function iI(o,s){bo.M(o,s);var l=ga;if(l&&o){var d=xn(l).hoistableScripts,y=va(o),_=d.get(y);_||(_=l.querySelector(zl(y)),_||(o=v({src:o,async:!0,type:"module"},s),(s=ui.get(y))&&up(o,s),_=l.createElement("script"),Lt(_),cn(_,"link",o),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function E_(o,s,l,d){var y=(y=Me.current)?$c(y):null;if(!y)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=ya(l.href),l=xn(y).hoistableStyles,d=l.get(s),d||(d={type:"style",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){o=ya(l.href);var _=xn(y).hoistableStyles,C=_.get(o);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,C),(_=y.querySelector(Gl(o)))&&!_._p&&(C.instance=_,C.state.loading=5),ui.has(o)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ui.set(o,l),_||oI(y,o,l,C.state))),s&&d===null)throw Error(i(528,""));return C}if(s&&d!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=va(l),l=xn(y).hoistableScripts,d=l.get(s),d||(d={type:"script",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function ya(o){return'href="'+qt(o)+'"'}function Gl(o){return'link[rel="stylesheet"]['+o+"]"}function S_(o){return v({},o,{"data-precedence":o.precedence,precedence:null})}function oI(o,s,l,d){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=o.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),cn(s,"link",l),Lt(s),o.head.appendChild(s))}function va(o){return'[src="'+qt(o)+'"]'}function zl(o){return"script[async]"+o}function A_(o,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var d=o.querySelector('style[data-href~="'+qt(l.href)+'"]');if(d)return s.instance=d,Lt(d),d;var y=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),Lt(d),cn(d,"style",y),Yc(d,l.precedence,o),s.instance=d;case"stylesheet":y=ya(l.href);var _=o.querySelector(Gl(y));if(_)return s.state.loading|=4,s.instance=_,Lt(_),_;d=S_(l),(y=ui.get(y))&&lp(d,y),_=(o.ownerDocument||o).createElement("link"),Lt(_);var C=_;return C._p=new Promise(function(w,P){C.onload=w,C.onerror=P}),cn(_,"link",d),s.state.loading|=4,Yc(_,l.precedence,o),s.instance=_;case"script":return _=va(l.src),(y=o.querySelector(zl(_)))?(s.instance=y,Lt(y),y):(d=l,(y=ui.get(_))&&(d=v({},l),up(d,y)),o=o.ownerDocument||o,y=o.createElement("script"),Lt(y),cn(y,"link",d),o.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,Yc(d,l.precedence,o));return s.instance}function Yc(o,s,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,_=y,C=0;C<d.length;C++){var w=d[C];if(w.dataset.precedence===s)_=w;else if(_!==y)break}_?_.parentNode.insertBefore(o,_.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(o,s.firstChild))}function lp(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function up(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var Kc=null;function C_(o,s,l){if(Kc===null){var d=new Map,y=Kc=new Map;y.set(l,d)}else y=Kc,d=y.get(l),d||(d=new Map,y.set(l,d));if(d.has(o))return d;for(d.set(o,null),l=l.getElementsByTagName(o),y=0;y<l.length;y++){var _=l[y];if(!(_[gi]||_[Re]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(s)||"";C=o+C;var w=d.get(C);w?w.push(_):d.set(C,[_])}}return d}function w_(o,s,l){o=o.ownerDocument||o,o.head.insertBefore(l,s==="title"?o.querySelector("head > title"):null)}function rI(o,s,l){if(l===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return o=s.disabled,typeof s.precedence=="string"&&o==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function I_(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Hl=null;function sI(){}function aI(o,s,l){if(Hl===null)throw Error(i(475));var d=Hl;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var y=ya(l.href),_=o.querySelector(Gl(y));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(d.count++,d=Jc.bind(d),o.then(d,d)),s.state.loading|=4,s.instance=_,Lt(_);return}_=o.ownerDocument||o,l=S_(l),(y=ui.get(y))&&lp(l,y),_=_.createElement("link"),Lt(_);var C=_;C._p=new Promise(function(w,P){C.onload=w,C.onerror=P}),cn(_,"link",l),s.instance=_}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(s,o),(o=s.state.preload)&&(s.state.loading&3)===0&&(d.count++,s=Jc.bind(d),o.addEventListener("load",s),o.addEventListener("error",s))}}function lI(){if(Hl===null)throw Error(i(475));var o=Hl;return o.stylesheets&&o.count===0&&cp(o,o.stylesheets),0<o.count?function(s){var l=setTimeout(function(){if(o.stylesheets&&cp(o,o.stylesheets),o.unsuspend){var d=o.unsuspend;o.unsuspend=null,d()}},6e4);return o.unsuspend=s,function(){o.unsuspend=null,clearTimeout(l)}}:null}function Jc(){if(this.count--,this.count===0){if(this.stylesheets)cp(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Qc=null;function cp(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Qc=new Map,s.forEach(uI,o),Qc=null,Jc.call(o))}function uI(o,s){if(!(s.state.loading&4)){var l=Qc.get(o);if(l)var d=l.get(null);else{l=new Map,Qc.set(o,l);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var C=y[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),d=C)}d&&l.set(null,d)}y=s.instance,C=y.getAttribute("data-precedence"),_=l.get(C)||d,_===d&&l.set(null,y),l.set(C,y),this.count++,d=Jc.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),_?_.parentNode.insertBefore(y,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),s.state.loading|=4}}var $l={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function cI(o,s,l,d,y,_,C,w){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=j(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=j(0),this.hiddenUpdates=j(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function R_(o,s,l,d,y,_,C,w,P,$,Z,oe){return o=new cI(o,s,l,C,w,P,$,oe),s=1,_===!0&&(s|=24),_=Hn(3,null,null,s),o.current=_,_.stateNode=o,s=$d(),s.refCount++,o.pooledCache=s,s.refCount++,_.memoizedState={element:d,isDehydrated:l,cache:s},Qd(_),o}function x_(o){return o?(o=Qs,o):Qs}function b_(o,s,l,d,y,_){y=x_(y),d.context===null?d.context=y:d.pendingContext=y,d=jo(s),d.payload={element:l},_=_===void 0?null:_,_!==null&&(d.callback=_),l=er(o,d,s),l!==null&&(Qn(l,o,s),El(l,o,s))}function M_(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<s?l:s}}function fp(o,s){M_(o,s),(o=o.alternate)&&M_(o,s)}function N_(o){if(o.tag===13){var s=Js(o,67108864);s!==null&&Qn(s,o,67108864),fp(o,67108864)}}var Xc=!0;function fI(o,s,l,d){var y=X.T;X.T=null;var _=he.p;try{he.p=2,dp(o,s,l,d)}finally{he.p=_,X.T=y}}function dI(o,s,l,d){var y=X.T;X.T=null;var _=he.p;try{he.p=8,dp(o,s,l,d)}finally{he.p=_,X.T=y}}function dp(o,s,l,d){if(Xc){var y=hp(d);if(y===null)jh(o,s,d,Wc,l),D_(o,d);else if(pI(y,o,s,l,d))d.stopPropagation();else if(D_(o,d),s&4&&-1<hI.indexOf(o)){for(;y!==null;){var _=bi(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=qn(_.pendingLanes);if(C!==0){var w=_;for(w.pendingLanes|=2,w.entangledLanes|=2;C;){var P=1<<31-Vt(C);w.entanglements[1]|=P,C&=~P}zi(_),(pt&6)===0&&(Pc=Pn()+500,Ol(0))}}break;case 13:w=Js(_,2),w!==null&&Qn(w,_,2),Lc(),fp(_,2)}if(_=hp(d),_===null&&jh(o,s,d,Wc,l),_===y)break;y=_}y!==null&&d.stopPropagation()}else jh(o,s,d,null,l)}}function hp(o){return o=ei(o),pp(o)}var Wc=null;function pp(o){if(Wc=null,o=so(o),o!==null){var s=a(o);if(s===null)o=null;else{var l=s.tag;if(l===13){if(o=c(s),o!==null)return o;o=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return Wc=o,null}function k_(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bs()){case Ho:return 2;case $o:return 8;case no:case Lr:return 32;case xi:return 268435456;default:return 32}default:return 32}}var mp=!1,hr=null,pr=null,mr=null,Yl=new Map,Kl=new Map,gr=[],hI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D_(o,s){switch(o){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Yl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(s.pointerId)}}function Jl(o,s,l,d,y,_){return o===null||o.nativeEvent!==_?(o={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:_,targetContainers:[y]},s!==null&&(s=bi(s),s!==null&&N_(s)),o):(o.eventSystemFlags|=d,s=o.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),o)}function pI(o,s,l,d,y){switch(s){case"focusin":return hr=Jl(hr,o,s,l,d,y),!0;case"dragenter":return pr=Jl(pr,o,s,l,d,y),!0;case"mouseover":return mr=Jl(mr,o,s,l,d,y),!0;case"pointerover":var _=y.pointerId;return Yl.set(_,Jl(Yl.get(_)||null,o,s,l,d,y)),!0;case"gotpointercapture":return _=y.pointerId,Kl.set(_,Jl(Kl.get(_)||null,o,s,l,d,y)),!0}return!1}function P_(o){var s=so(o.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){o.blockedOn=s,Ft(o.priority,function(){if(l.tag===13){var d=Jn();d=Be(d);var y=Js(l,d);y!==null&&Qn(y,l,d),fp(l,d)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Zc(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var l=hp(o.nativeEvent);if(l===null){l=o.nativeEvent;var d=new l.constructor(l.type,l);co=d,l.target.dispatchEvent(d),co=null}else return s=bi(l),s!==null&&N_(s),o.blockedOn=l,!1;s.shift()}return!0}function V_(o,s,l){Zc(o)&&l.delete(s)}function mI(){mp=!1,hr!==null&&Zc(hr)&&(hr=null),pr!==null&&Zc(pr)&&(pr=null),mr!==null&&Zc(mr)&&(mr=null),Yl.forEach(V_),Kl.forEach(V_)}function jc(o,s){o.blockedOn===s&&(o.blockedOn=null,mp||(mp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,mI)))}var ef=null;function L_(o){ef!==o&&(ef=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ef===o&&(ef=null);for(var s=0;s<o.length;s+=3){var l=o[s],d=o[s+1],y=o[s+2];if(typeof d!="function"){if(pp(d||l)===null)continue;break}var _=bi(l);_!==null&&(o.splice(s,3),s-=3,ph(_,{pending:!0,data:y,method:l.method,action:d},d,y))}}))}function Ql(o){function s(P){return jc(P,o)}hr!==null&&jc(hr,o),pr!==null&&jc(pr,o),mr!==null&&jc(mr,o),Yl.forEach(s),Kl.forEach(s);for(var l=0;l<gr.length;l++){var d=gr[l];d.blockedOn===o&&(d.blockedOn=null)}for(;0<gr.length&&(l=gr[0],l.blockedOn===null);)P_(l),l.blockedOn===null&&gr.shift();if(l=(o.ownerDocument||o).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var y=l[d],_=l[d+1],C=y[we]||null;if(typeof _=="function")C||L_(l);else if(C){var w=null;if(_&&_.hasAttribute("formAction")){if(y=_,C=_[we]||null)w=C.formAction;else if(pp(y)!==null)continue}else w=C.action;typeof w=="function"?l[d+1]=w:(l.splice(d,3),d-=3),L_(l)}}}function gp(o){this._internalRoot=o}tf.prototype.render=gp.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,d=Jn();b_(l,d,o,s,null,null)},tf.prototype.unmount=gp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;b_(o.current,2,null,o,null,null),Lc(),s[Ze]=null}};function tf(o){this._internalRoot=o}tf.prototype.unstable_scheduleHydration=function(o){if(o){var s=ut();o={blockedOn:null,target:o,priority:s};for(var l=0;l<gr.length&&s!==0&&s<gr[l].priority;l++);gr.splice(l,0,o),l===0&&P_(o)}};var U_=e.version;if(U_!=="19.1.1")throw Error(i(527,U_,"19.1.1"));he.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=m(s),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var gI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nf.isDisabled&&nf.supportsFiber)try{Rt=nf.inject(gI),it=nf}catch{}}return Wl.createRoot=function(o,s){if(!r(o))throw Error(i(299));var l=!1,d="",y=jy,_=ev,C=tv,w=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=R_(o,1,!1,null,null,l,d,y,_,C,w,null),o[Ze]=s.current,Zh(o),new gp(s)},Wl.hydrateRoot=function(o,s,l){if(!r(o))throw Error(i(299));var d=!1,y="",_=jy,C=ev,w=tv,P=null,$=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(P=l.unstable_transitionCallbacks),l.formState!==void 0&&($=l.formState)),s=R_(o,1,!0,s,l??null,d,y,_,C,w,P,$),s.context=x_(null),l=s.current,d=Jn(),d=Be(d),y=jo(d),y.callback=null,er(l,y,d),l=d,s.current.lanes=l,te(s,l),zi(s),o[Ze]=s.current,Zh(o),new tf(s)},Wl.version="19.1.1",Wl}var K_;function xI(){if(K_)return _p.exports;K_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_p.exports=RI(),_p.exports}var bI=xI();const MI=PE(bI),Xn={openai:{name:"GPT-4o + DALL-E",icon:"🤖",color:"text-emerald-400"},gemini:{name:"Gemini Flash",icon:"✨",color:"text-blue-400"},claude:{name:"Claude Sonnet",icon:"🧠",color:"text-purple-400"},auto:{name:"Smart Auto",icon:"⚡",color:"text-cyan-400"}},NI={photorealistic:"📸 Ultra-realistic",artistic:"🎨 Artistic Nigerian",cyberpunk:"🌃 Cyber-Lagos",anime:"🎭 Anime style"},VE="gemini-2.5-flash",kI="gpt-4o",DI="claude-3-sonnet-20240229",nu="default",fn={default:{name:"Lagos Oracle (Default)",icon:"🌟",description:"Your standard, knowledgeable Lagos Oracle.",systemPromptModifier:"",color:"text-yellow-400"},emeka:{name:"Emeka (Igbo Insight)",icon:"🧐",description:"Wise, with a touch of Igbo flair and proverbs.",systemPromptModifier:"You are Emeka, a wise individual with deep roots in Igbo culture, now navigating Lagos. Your responses often carry a touch of Igbo flair, and you might naturally use common Igbo greetings (like 'Nnoọ'), phrases, or proverbs if the context allows. You offer thoughtful and insightful perspectives on various matters.",color:"text-green-400"},femi:{name:"Femi (Yorùbá Poise)",icon:"😎",description:"Confident, sharp, Yorùbá man from Lagos.",systemPromptModifier:"You are Femi, a confident and articulate Yorùbá man, born and raised in the heart of Lagos. Your responses are sharp, informed, and carry the cadence of a true Lagosian with deep Yorùbá heritage. You may incorporate Yorùbá proverbs (ọwe), sayings, or greetings (like 'Ẹ n lẹ o') when fitting, showcasing pride in your culture.",color:"text-blue-400"},anita:{name:"Anita (Shakara Queen)",icon:"💅",description:"Playful, sassy, full of Lagos street smarts and slang.",systemPromptModifier:"You are Anita, the ultimate Lagos 'Shakara Queen' – playful, a bit sassy, and overflowing with street smarts. You communicate using contemporary Lagos slang and Pidgin English naturally and freely. You 'tell it like it is,' often with a humorous or witty twist, but always keeping it real.",color:"text-pink-400"},muhammed:{name:"Muhammed (Northern Calm)",icon:"🕌",description:"Calm, thoughtful, with a Northern Nigerian perspective.",systemPromptModifier:"You are Muhammed, a calm and thoughtful individual with a perspective enriched by Northern Nigerian upbringing and Hausa culture, now experiencing Lagos life. Your responses are measured, respectful, and you might use Hausa greetings (like 'Sannu') or expressions if it feels natural. You bring a sense of peace and consideration to your interactions.",color:"text-teal-400"}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let PI,VI;function LI(){return{geminiUrl:PI,vertexUrl:VI}}function UI(t,e,n,i){var r,a;if(!(t!=null&&t.baseUrl)){const c=LI();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:n:(a=c.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cs{}function Te(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(t,e,n){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const m=t[h];if(Array.isArray(n))for(let p=0;p<m.length;p++){const v=m[p];f(v,e.slice(a+1),n[p])}else for(const p of m)f(p,e.slice(a+1),n)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const m=t[h];f(m[0],e.slice(a+1),n);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=n}function u(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in t){const a=t[r];return Array.isArray(a)?a.map(c=>u(c,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var J_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(J_||(J_={}));var Q_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Q_||(Q_={}));var Ar;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ar||(Ar={}));var Ki;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Ki||(Ki={}));var X_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(X_||(X_={}));var Ji;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Ji||(Ji={}));var W_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(W_||(W_={}));var Z_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Z_||(Z_={}));var j_;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(j_||(j_={}));var eT;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(eT||(eT={}));var tT;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(tT||(tT={}));var nT;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(nT||(nT={}));var iT;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(iT||(iT={}));var oT;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(oT||(oT={}));var rT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(rT||(rT={}));var sT;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(sT||(sT={}));var Rf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Rf||(Rf={}));var aT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(aT||(aT={}));var Up;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Up||(Up={}));var lT;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(lT||(lT={}));var uT;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(uT||(uT={}));var cT;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(cT||(cT={}));var fT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(fT||(fT={}));var dT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(dT||(dT={}));var hT;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(hT||(hT={}));var pT;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(pT||(pT={}));var mT;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(mT||(mT={}));var gT;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gT||(gT={}));var yT;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(yT||(yT={}));var vT;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vT||(vT={}));var _T;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(_T||(_T={}));var TT;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(TT||(TT={}));var ET;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(ET||(ET={}));var ST;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(ST||(ST={}));var AT;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(AT||(AT={}));var CT;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(CT||(CT={}));var wT;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(wT||(wT={}));var IT;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(IT||(IT={}));var RT;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(RT||(RT={}));var xT;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(xT||(xT={}));var bT;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(bT||(bT={}));var MT;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(MT||(MT={}));var Aa;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Aa||(Aa={}));class Op{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Zl{get text(){var e,n,i,r,a,c,h,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const E=[];for(const S of(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[I,b]of Object.entries(S))I!=="text"&&I!=="thought"&&(b!==null||b!==void 0)&&E.push(I);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,n,i,r,a,c,h,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const E of(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[S,I]of Object.entries(E))S!=="inlineData"&&(I!==null||I!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,i,r,a,c,h,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,i,r,a,c,h,m,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,i,r,a,c,h,m,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class NT{}class kT{}class OI{}class BI{}class FI{}class DT{}class PT{}class VT{}class qI{}class LT{}class UT{}class OT{}class BT{}class GI{}class zI{}class HI{}class FT{}class $I{get text(){var e,n,i;let r="",a=!1;const c=[];for(const h of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[m,p]of Object.entries(h))m!=="text"&&m!=="thought"&&p!==null&&c.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,r+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,i;let r="";const a=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[h,m]of Object.entries(c))h!=="inlineData"&&m!==null&&a.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class xf{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const i=new xf;if(i.name=e.name,i.metadata=e.metadata,i.done=e.done,i.error=e.error,n){const r=e.response;if(r){const a=new LT,c=r.videos;a.generatedVideos=c==null?void 0:c.map(h=>({video:{uri:h.gcsUri,videoBytes:h.bytesBase64Encoded?Lp(h.bytesBase64Encoded):void 0,mimeType:h.mimeType}})),a.raiMediaFilteredCount=r.raiMediaFilteredCount,a.raiMediaFilteredReasons=r.raiMediaFilteredReasons,i.response=a}}else{const r=e.response;if(r){const a=new LT,c=r.generateVideoResponse,h=c==null?void 0:c.generatedSamples;a.generatedVideos=h==null?void 0:h.map(m=>{const p=m.video;return{video:{uri:p==null?void 0:p.uri,videoBytes:p!=null&&p.encodedVideo?Lp(p==null?void 0:p.encodedVideo):void 0,mimeType:m.encoding}}}),a.raiMediaFilteredCount=c==null?void 0:c.raiMediaFilteredCount,a.raiMediaFilteredReasons=c==null?void 0:c.raiMediaFilteredReasons,i.response=a}}return i}}class YI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function LE(t,e){const n=dt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function UE(t){return Array.isArray(t)?t.map(e=>bf(e)):[bf(t)]}function bf(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function OE(t){const e=bf(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function BE(t){const e=bf(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qT(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function FE(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>qT(e)):[qT(t)]}function Bp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function GT(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function zT(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function An(t){if(t==null)throw new Error("ContentUnion is required");return Bp(t)?t:{role:"user",parts:FE(t)}}function qE(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=An(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=An(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>An(n)):[An(e)]}function di(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(GT(t)||zT(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[An(t)]}const e=[],n=[],i=Bp(t[0]);for(const r of t){const a=Bp(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(GT(r)||zT(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:FE(n)}),e}function KI(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Ar).includes(n[0].toUpperCase())?n[0].toUpperCase():Ar.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Ar).includes(i.toUpperCase())?i.toUpperCase():Ar.TYPE_UNSPECIFIED})}}function Ca(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&KI(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Ar).includes(h.toUpperCase())?h.toUpperCase():Ar.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=Ca(h);else if(i.includes(c)){const m=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}m.push(Ca(p))}e[c]=m}else if(r.includes(c)){const m={};for(const[p,v]of Object.entries(h))m[p]=Ca(v);e[c]=m}else{if(c==="additionalProperties")continue;e[c]=h}return e}function Cm(t){return Ca(t)}function wm(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Im(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ba(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ca(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ca(e.response));return t}function Fa(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function JI(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function qo(t,e){if(typeof e!="string")throw new Error("name must be a string");return JI(t,e,"cachedContents")}function GE(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ws(t){return Lp(t)}function QI(t){return t!=null&&typeof t=="object"&&"name"in t}function XI(t){return t!=null&&typeof t=="object"&&"video"in t}function WI(t){return t!=null&&typeof t=="object"&&"uri"in t}function zE(t){var e;let n;if(QI(t)&&(n=t.name),!(WI(t)&&(n=t.uri,n===void 0))&&!(XI(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function HE(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function $E(t){for(const e of["models","tunedModels","publisherModels"])if(ZI(t,e))return t[e];return[]}function ZI(t,e){return t!==null&&typeof t=="object"&&e in t}function jI(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function eR(t,e={}){const n=[],i=new Set;for(const r of t){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const c=jI(r,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function YE(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function tR(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function qa(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function KE(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nR(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function iR(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function oR(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function rR(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],nR(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],iR(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],oR(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function JE(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>rR(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function sR(t){const e={},n=u(t,["anyOf"]);n!=null&&f(e,["anyOf"],n);const i=u(t,["default"]);i!=null&&f(e,["default"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["enum"]);a!=null&&f(e,["enum"],a);const c=u(t,["example"]);c!=null&&f(e,["example"],c);const h=u(t,["format"]);h!=null&&f(e,["format"],h);const m=u(t,["items"]);m!=null&&f(e,["items"],m);const p=u(t,["maxItems"]);p!=null&&f(e,["maxItems"],p);const v=u(t,["maxLength"]);v!=null&&f(e,["maxLength"],v);const E=u(t,["maxProperties"]);E!=null&&f(e,["maxProperties"],E);const S=u(t,["maximum"]);S!=null&&f(e,["maximum"],S);const I=u(t,["minItems"]);I!=null&&f(e,["minItems"],I);const b=u(t,["minLength"]);b!=null&&f(e,["minLength"],b);const O=u(t,["minProperties"]);O!=null&&f(e,["minProperties"],O);const F=u(t,["minimum"]);F!=null&&f(e,["minimum"],F);const re=u(t,["nullable"]);re!=null&&f(e,["nullable"],re);const ie=u(t,["pattern"]);ie!=null&&f(e,["pattern"],ie);const ne=u(t,["properties"]);ne!=null&&f(e,["properties"],ne);const fe=u(t,["propertyOrdering"]);fe!=null&&f(e,["propertyOrdering"],fe);const se=u(t,["required"]);se!=null&&f(e,["required"],se);const me=u(t,["title"]);me!=null&&f(e,["title"],me);const D=u(t,["type"]);return D!=null&&f(e,["type"],D),e}function aR(t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(t,["category"]);n!=null&&f(e,["category"],n);const i=u(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function lR(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function uR(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function cR(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],uR(n)),e}function fR(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function dR(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],fR(n)),e}function hR(){return{}}function pR(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>lR(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],cR(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],dR(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],hR());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function mR(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function gR(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function yR(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],gR(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function vR(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],mR(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],yR(i)),e}function _R(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function QE(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],_R(n)),e}function TR(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],QE(i)),e}function ER(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>TR(r))),f(e,["speakerVoiceConfigs"],i)}return e}function SR(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],QE(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],ER(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function AR(t){const e={},n=u(t,["includeThoughts"]);n!=null&&f(e,["includeThoughts"],n);const i=u(t,["thinkingBudget"]);return i!=null&&f(e,["thinkingBudget"],i),e}function CR(t,e,n){const i={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],JE(An(r)));const a=u(e,["temperature"]);a!=null&&f(i,["temperature"],a);const c=u(e,["topP"]);c!=null&&f(i,["topP"],c);const h=u(e,["topK"]);h!=null&&f(i,["topK"],h);const m=u(e,["candidateCount"]);m!=null&&f(i,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&f(i,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&f(i,["stopSequences"],v);const E=u(e,["responseLogprobs"]);E!=null&&f(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&f(i,["logprobs"],S);const I=u(e,["presencePenalty"]);I!=null&&f(i,["presencePenalty"],I);const b=u(e,["frequencyPenalty"]);b!=null&&f(i,["frequencyPenalty"],b);const O=u(e,["seed"]);O!=null&&f(i,["seed"],O);const F=u(e,["responseMimeType"]);F!=null&&f(i,["responseMimeType"],F);const re=u(e,["responseSchema"]);re!=null&&f(i,["responseSchema"],sR(Cm(re)));const ie=u(e,["responseJsonSchema"]);if(ie!=null&&f(i,["responseJsonSchema"],ie),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ne=u(e,["safetySettings"]);if(n!==void 0&&ne!=null){let k=ne;Array.isArray(k)&&(k=k.map(q=>aR(q))),f(n,["safetySettings"],k)}const fe=u(e,["tools"]);if(n!==void 0&&fe!=null){let k=Fa(fe);Array.isArray(k)&&(k=k.map(q=>pR(Ba(q)))),f(n,["tools"],k)}const se=u(e,["toolConfig"]);if(n!==void 0&&se!=null&&f(n,["toolConfig"],vR(se)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const me=u(e,["cachedContent"]);n!==void 0&&me!=null&&f(n,["cachedContent"],qo(t,me));const D=u(e,["responseModalities"]);D!=null&&f(i,["responseModalities"],D);const M=u(e,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);const x=u(e,["speechConfig"]);if(x!=null&&f(i,["speechConfig"],SR(wm(x))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=u(e,["thinkingConfig"]);return L!=null&&f(i,["thinkingConfig"],AR(L)),i}function wR(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["request","model"],dt(t,i));const r=u(e,["contents"]);if(r!=null){let c=di(r);Array.isArray(c)&&(c=c.map(h=>JE(h))),f(n,["request","contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["request","generationConfig"],CR(t,a,n)),n}function IR(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=u(e,["fileName"]);i!=null&&f(n,["fileName"],i);const r=u(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>wR(t,c))),f(n,["requests","requests"],a)}return n}function RR(t,e){const n={},i=u(t,["displayName"]);if(e!==void 0&&i!=null&&f(e,["batch","displayName"],i),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function xR(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["src"]);r!=null&&f(n,["batch","inputConfig"],IR(t,YE(t,r)));const a=u(e,["config"]);return a!=null&&f(n,["config"],RR(a,n)),n}function bR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qa(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function MR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qa(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function NR(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);if(e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function kR(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],NR(n,e)),e}function DR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qa(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function PR(t){const e={},n=u(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const i=u(t,["gcsUri"]);i!=null&&f(e,["gcsSource","uris"],i);const r=u(t,["bigqueryUri"]);if(r!=null&&f(e,["bigquerySource","inputUri"],r),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function VR(t){const e={},n=u(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const i=u(t,["gcsUri"]);i!=null&&f(e,["gcsDestination","outputUriPrefix"],i);const r=u(t,["bigqueryUri"]);if(r!=null&&f(e,["bigqueryDestination","outputUri"],r),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function LR(t,e){const n={},i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=u(t,["dest"]);return e!==void 0&&r!=null&&f(e,["outputConfig"],VR(tR(r))),n}function UR(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["model"],dt(t,i));const r=u(e,["src"]);r!=null&&f(n,["inputConfig"],PR(YE(t,r)));const a=u(e,["config"]);return a!=null&&f(n,["config"],LR(a,n)),n}function OR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qa(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function BR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qa(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function FR(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=u(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function qR(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],FR(n,e)),e}function GR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qa(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function zR(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function HR(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function $R(t){const e={},n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function YR(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],zR(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],HR(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],$R(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function KR(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>YR(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function JR(t){const e={},n=u(t,["citationSources"]);return n!=null&&f(e,["citations"],n),e}function QR(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function XR(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>QR(r))),f(e,["urlMetadata"],i)}return e}function WR(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],KR(n));const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],JR(i));const r=u(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const a=u(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=u(t,["urlContextMetadata"]);c!=null&&f(e,["urlContextMetadata"],XR(c));const h=u(t,["avgLogprobs"]);h!=null&&f(e,["avgLogprobs"],h);const m=u(t,["groundingMetadata"]);m!=null&&f(e,["groundingMetadata"],m);const p=u(t,["index"]);p!=null&&f(e,["index"],p);const v=u(t,["logprobsResult"]);v!=null&&f(e,["logprobsResult"],v);const E=u(t,["safetyRatings"]);return E!=null&&f(e,["safetyRatings"],E),e}function ZR(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>WR(p))),f(e,["candidates"],m)}const r=u(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const a=u(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=u(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=u(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function XE(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["code"]);i!=null&&f(e,["code"],i);const r=u(t,["message"]);return r!=null&&f(e,["message"],r),e}function jR(t){const e={},n=u(t,["response"]);n!=null&&f(e,["response"],ZR(n));const i=u(t,["error"]);return i!=null&&f(e,["error"],XE(i)),e}function ex(t){const e={},n=u(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const i=u(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>jR(a))),f(e,["inlinedResponses"],r)}return e}function Fp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata","displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["metadata","state"]);r!=null&&f(e,["state"],KE(r));const a=u(t,["metadata","createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=u(t,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const m=u(t,["metadata","model"]);m!=null&&f(e,["model"],m);const p=u(t,["metadata","output"]);return p!=null&&f(e,["dest"],ex(p)),e}function tx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>Fp(c))),f(e,["batchJobs"],a)}return e}function nx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);return a!=null&&f(e,["error"],XE(a)),e}function WE(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["code"]);i!=null&&f(e,["code"],i);const r=u(t,["message"]);return r!=null&&f(e,["message"],r),e}function ix(t){const e={},n=u(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const i=u(t,["gcsSource","uris"]);i!=null&&f(e,["gcsUri"],i);const r=u(t,["bigquerySource","inputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function ox(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const i=u(t,["gcsDestination","outputUriPrefix"]);i!=null&&f(e,["gcsUri"],i);const r=u(t,["bigqueryDestination","outputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function qp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["state"]);r!=null&&f(e,["state"],KE(r));const a=u(t,["error"]);a!=null&&f(e,["error"],WE(a));const c=u(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=u(t,["startTime"]);h!=null&&f(e,["startTime"],h);const m=u(t,["endTime"]);m!=null&&f(e,["endTime"],m);const p=u(t,["updateTime"]);p!=null&&f(e,["updateTime"],p);const v=u(t,["model"]);v!=null&&f(e,["model"],v);const E=u(t,["inputConfig"]);E!=null&&f(e,["src"],ix(E));const S=u(t,["outputConfig"]);return S!=null&&f(e,["dest"],ox(S)),e}function rx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>qp(c))),f(e,["batchJobs"],a)}return e}function sx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);return a!=null&&f(e,["error"],WE(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ys;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ys||(ys={}));class wu{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ax extends Cs{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const r=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${r}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new wu(ys.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}async createInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=UR(this.apiClient,e);return h=Te("batchPredictionJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>qp(v))}else{const p=xR(this.apiClient,e);return h=Te("{model}:batchGenerateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>Fp(v))}}async get(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=OR(this.apiClient,e);return h=Te("batchPredictionJobs/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>qp(v))}else{const p=bR(this.apiClient,e);return h=Te("batches/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>Fp(v))}}async cancel(e){var n,i,r,a;let c="",h={};if(this.apiClient.isVertexAI()){const m=BR(this.apiClient,e);c=Te("batchPredictionJobs/{name}:cancel",m._url),h=m._query,delete m.config,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=MR(this.apiClient,e);c=Te("batches/{name}:cancel",m._url),h=m._query,delete m.config,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=qR(e);return h=Te("batchPredictionJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=rx(v),S=new FT;return Object.assign(S,E),S})}else{const p=kR(e);return h=Te("batches",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=tx(v),S=new FT;return Object.assign(S,E),S})}}async delete(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=GR(this.apiClient,e);return h=Te("batchPredictionJobs/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>sx(v))}else{const p=DR(this.apiClient,e);return h=Te("batches/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>nx(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lx(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function ux(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function cx(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function fx(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],lx(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],ux(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],cx(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function HT(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>fx(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function dx(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function hx(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function px(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],hx(n)),e}function mx(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function gx(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],mx(n)),e}function yx(){return{}}function vx(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>dx(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],px(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],gx(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],yx());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function _x(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function Tx(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function Ex(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],Tx(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function Sx(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],_x(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],Ex(i)),e}function Ax(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const a=u(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=u(t,["contents"]);if(e!==void 0&&c!=null){let v=di(c);Array.isArray(v)&&(v=v.map(E=>HT(E))),f(e,["contents"],v)}const h=u(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],HT(An(h)));const m=u(t,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(E=>vx(E))),f(e,["tools"],v)}const p=u(t,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],Sx(p)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Cx(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["model"],LE(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],Ax(r,n)),n}function wx(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function Ix(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function Rx(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function xx(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],Rx(r,n)),n}function bx(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function Mx(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],bx(n,e)),e}function Nx(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function kx(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Dx(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Px(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],Nx(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],kx(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],Dx(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function $T(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Px(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function Vx(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=u(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=u(t,["response"]);c!=null&&f(e,["response"],c);const h=u(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function Lx(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function Ux(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],Lx(n)),e}function Ox(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function Bx(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],Ox(n)),e}function Fx(){return{}}function qx(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&f(e,["apiKeyString"],n),e}function Gx(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&f(e,["apiKeyConfig"],qx(n));const i=u(t,["authType"]);i!=null&&f(e,["authType"],i);const r=u(t,["googleServiceAccountConfig"]);r!=null&&f(e,["googleServiceAccountConfig"],r);const a=u(t,["httpBasicAuthConfig"]);a!=null&&f(e,["httpBasicAuthConfig"],a);const c=u(t,["oauthConfig"]);c!=null&&f(e,["oauthConfig"],c);const h=u(t,["oidcConfig"]);return h!=null&&f(e,["oidcConfig"],h),e}function zx(t){const e={},n=u(t,["authConfig"]);return n!=null&&f(e,["authConfig"],Gx(n)),e}function Hx(){return{}}function $x(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>Vx(S))),f(e,["functionDeclarations"],E)}const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=u(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],Ux(r));const a=u(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],Bx(a)),u(t,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],Fx());const h=u(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],zx(h)),u(t,["urlContext"])!=null&&f(e,["urlContext"],Hx());const p=u(t,["codeExecution"]);p!=null&&f(e,["codeExecution"],p);const v=u(t,["computerUse"]);return v!=null&&f(e,["computerUse"],v),e}function Yx(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function Kx(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function Jx(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],Kx(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function Qx(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],Yx(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],Jx(i)),e}function Xx(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const a=u(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=u(t,["contents"]);if(e!==void 0&&c!=null){let E=di(c);Array.isArray(E)&&(E=E.map(S=>$T(S))),f(e,["contents"],E)}const h=u(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],$T(An(h)));const m=u(t,["tools"]);if(e!==void 0&&m!=null){let E=m;Array.isArray(E)&&(E=E.map(S=>$x(S))),f(e,["tools"],E)}const p=u(t,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],Qx(p));const v=u(t,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),n}function Wx(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["model"],LE(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],Xx(r,n)),n}function Zx(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function jx(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function eb(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function tb(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],eb(r,n)),n}function nb(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function ib(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],nb(n,e)),e}function mf(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["model"]);r!=null&&f(e,["model"],r);const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const h=u(t,["expireTime"]);h!=null&&f(e,["expireTime"],h);const m=u(t,["usageMetadata"]);return m!=null&&f(e,["usageMetadata"],m),e}function ob(){return{}}function rb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>mf(c))),f(e,["cachedContents"],a)}return e}function gf(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["model"]);r!=null&&f(e,["model"],r);const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const h=u(t,["expireTime"]);h!=null&&f(e,["expireTime"],h);const m=u(t,["usageMetadata"]);return m!=null&&f(e,["usageMetadata"],m),e}function sb(){return{}}function ab(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>gf(c))),f(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lb extends Cs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new wu(ys.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=Wx(this.apiClient,e);return h=Te("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>gf(v))}else{const p=Cx(this.apiClient,e);return h=Te("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>mf(v))}}async get(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=Zx(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>gf(v))}else{const p=wx(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>mf(v))}}async delete(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=jx(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(()=>{const v=sb(),E=new OT;return Object.assign(E,v),E})}else{const p=Ix(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(()=>{const v=ob(),E=new OT;return Object.assign(E,v),E})}}async update(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=tb(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>gf(v))}else{const p=xx(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>mf(v))}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=ib(e);return h=Te("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=ab(v),S=new BT;return Object.assign(S,E),S})}else{const p=Mx(e);return h=Te("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=rb(v),S=new BT;return Object.assign(S,E),S})}}}function YT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function It(t){return this instanceof It?(this.v=t,this):new It(t)}function wa(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(I){return function(b){return Promise.resolve(b).then(I,E)}}function h(I,b){i[I]&&(r[I]=function(O){return new Promise(function(F,re){a.push([I,O,F,re])>1||m(I,O)})},b&&(r[I]=b(r[I])))}function m(I,b){try{p(i[I](b))}catch(O){S(a[0][3],O)}}function p(I){I.value instanceof It?Promise.resolve(I.value.v).then(v,E):S(a[0][2],I)}function v(I){m("next",I)}function E(I){m("throw",I)}function S(I,b){I(b),a.shift(),a.length&&m(a[0][0],a[0][1])}}function au(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof YT=="function"?YT(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(c){return new Promise(function(h,m){c=t[a](c),r(h,m,c.done,c.value)})}}function r(a,c,h,m){Promise.resolve(m).then(function(p){a({value:p,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ub(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:ZE(n)}function ZE(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function cb(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function KT(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let a=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),a&&!ZE(t[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class fb{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new db(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class db{constructor(e,n,i,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),cb(a)}async sendMessage(e){var n;await this.sendPromise;const i=An(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,c,h;const m=await r,p=(c=(a=m.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,v=m.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(E))!==null&&h!==void 0?h:[]);const I=p?[p]:[];this.recordHistory(i,I,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=An(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?KT(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return wa(this,arguments,function*(){var c,h,m,p;const v=[];try{for(var E=!0,S=au(e),I;I=yield It(S.next()),c=I.done,!c;E=!0){p=I.value,E=!1;const b=p;if(ub(b)){const O=(r=(i=b.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;O!==void 0&&v.push(O)}yield yield It(b)}}catch(b){h={error:b}}finally{try{!E&&!c&&(m=S.return)&&(yield It(m.call(S)))}finally{if(h)throw h.error}}this.recordHistory(n,v)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...KT(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Jf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hb(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function pb(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],hb(n,e)),e}function mb(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["message"]);i!=null&&f(e,["message"],i);const r=u(t,["code"]);return r!=null&&f(e,["code"],r),e}function gb(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["mimeType"]);r!=null&&f(e,["mimeType"],r);const a=u(t,["sizeBytes"]);a!=null&&f(e,["sizeBytes"],a);const c=u(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=u(t,["expirationTime"]);h!=null&&f(e,["expirationTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["sha256Hash"]);p!=null&&f(e,["sha256Hash"],p);const v=u(t,["uri"]);v!=null&&f(e,["uri"],v);const E=u(t,["downloadUri"]);E!=null&&f(e,["downloadUri"],E);const S=u(t,["state"]);S!=null&&f(e,["state"],S);const I=u(t,["source"]);I!=null&&f(e,["source"],I);const b=u(t,["videoMetadata"]);b!=null&&f(e,["videoMetadata"],b);const O=u(t,["error"]);return O!=null&&f(e,["error"],mb(O)),e}function yb(t){const e={},n=u(t,["file"]);n!=null&&f(e,["file"],gb(n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function vb(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","file"],zE(n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function _b(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","file"],zE(n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function Tb(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["message"]);i!=null&&f(e,["message"],i);const r=u(t,["code"]);return r!=null&&f(e,["code"],r),e}function Gp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["mimeType"]);r!=null&&f(e,["mimeType"],r);const a=u(t,["sizeBytes"]);a!=null&&f(e,["sizeBytes"],a);const c=u(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=u(t,["expirationTime"]);h!=null&&f(e,["expirationTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["sha256Hash"]);p!=null&&f(e,["sha256Hash"],p);const v=u(t,["uri"]);v!=null&&f(e,["uri"],v);const E=u(t,["downloadUri"]);E!=null&&f(e,["downloadUri"],E);const S=u(t,["state"]);S!=null&&f(e,["state"],S);const I=u(t,["source"]);I!=null&&f(e,["source"],I);const b=u(t,["videoMetadata"]);b!=null&&f(e,["videoMetadata"],b);const O=u(t,["error"]);return O!=null&&f(e,["error"],Tb(O)),e}function Eb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>Gp(c))),f(e,["files"],a)}return e}function Sb(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Ab(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cb extends Cs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new wu(ys.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>Gp(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=pb(e);return a=Te("files",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=Eb(m),v=new GI;return Object.assign(v,p),v})}}async createInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=yb(e);return a=Te("upload/v1beta/files",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>{const p=Sb(m),v=new zI;return Object.assign(v,p),v})}}async get(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=vb(e);return a=Te("files/{file}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>Gp(m))}}async delete(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=_b(e);return a=Te("files/{file}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(()=>{const m=Ab(),p=new HI;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wb(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function jE(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],wb(n)),e}function Ib(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],jE(i)),e}function Rb(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Ib(r))),f(e,["speakerVoiceConfigs"],i)}return e}function xb(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],jE(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],Rb(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function bb(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function Mb(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Nb(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function kb(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],bb(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],Mb(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],Nb(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function Db(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>kb(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function Pb(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function Vb(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function Lb(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],Vb(n)),e}function Ub(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function Ob(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],Ub(n)),e}function Bb(){return{}}function Fb(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>Pb(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],Lb(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],Ob(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],Bb());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function qb(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function JT(){return{}}function Gb(t){const e={},n=u(t,["disabled"]);n!=null&&f(e,["disabled"],n);const i=u(t,["startOfSpeechSensitivity"]);i!=null&&f(e,["startOfSpeechSensitivity"],i);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&f(e,["endOfSpeechSensitivity"],r);const a=u(t,["prefixPaddingMs"]);a!=null&&f(e,["prefixPaddingMs"],a);const c=u(t,["silenceDurationMs"]);return c!=null&&f(e,["silenceDurationMs"],c),e}function zb(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&f(e,["automaticActivityDetection"],Gb(n));const i=u(t,["activityHandling"]);i!=null&&f(e,["activityHandling"],i);const r=u(t,["turnCoverage"]);return r!=null&&f(e,["turnCoverage"],r),e}function Hb(t){const e={},n=u(t,["targetTokens"]);return n!=null&&f(e,["targetTokens"],n),e}function $b(t){const e={},n=u(t,["triggerTokens"]);n!=null&&f(e,["triggerTokens"],n);const i=u(t,["slidingWindow"]);return i!=null&&f(e,["slidingWindow"],Hb(i)),e}function Yb(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&f(e,["proactiveAudio"],n),e}function Kb(t,e){const n={},i=u(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=u(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=u(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=u(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const p=u(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=u(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=u(t,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],xb(Im(E)));const S=u(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&f(e,["setup","systemInstruction"],Db(An(I)));const b=u(t,["tools"]);if(e!==void 0&&b!=null){let se=Fa(b);Array.isArray(se)&&(se=se.map(me=>Fb(Ba(me)))),f(e,["setup","tools"],se)}const O=u(t,["sessionResumption"]);e!==void 0&&O!=null&&f(e,["setup","sessionResumption"],qb(O));const F=u(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&f(e,["setup","inputAudioTranscription"],JT());const re=u(t,["outputAudioTranscription"]);e!==void 0&&re!=null&&f(e,["setup","outputAudioTranscription"],JT());const ie=u(t,["realtimeInputConfig"]);e!==void 0&&ie!=null&&f(e,["setup","realtimeInputConfig"],zb(ie));const ne=u(t,["contextWindowCompression"]);e!==void 0&&ne!=null&&f(e,["setup","contextWindowCompression"],$b(ne));const fe=u(t,["proactivity"]);return e!==void 0&&fe!=null&&f(e,["setup","proactivity"],Yb(fe)),n}function Jb(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["setup","model"],dt(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],Kb(r,n)),n}function Qb(){return{}}function Xb(){return{}}function Wb(t){const e={},n=u(t,["media"]);n!=null&&f(e,["mediaChunks"],UE(n));const i=u(t,["audio"]);i!=null&&f(e,["audio"],BE(i));const r=u(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const a=u(t,["video"]);a!=null&&f(e,["video"],OE(a));const c=u(t,["text"]);return c!=null&&f(e,["text"],c),u(t,["activityStart"])!=null&&f(e,["activityStart"],Qb()),u(t,["activityEnd"])!=null&&f(e,["activityEnd"],Xb()),e}function eS(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["weight"]);return i!=null&&f(e,["weight"],i),e}function Zb(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>eS(r))),f(e,["weightedPrompts"],i)}return e}function tS(t){const e={},n=u(t,["temperature"]);n!=null&&f(e,["temperature"],n);const i=u(t,["topK"]);i!=null&&f(e,["topK"],i);const r=u(t,["seed"]);r!=null&&f(e,["seed"],r);const a=u(t,["guidance"]);a!=null&&f(e,["guidance"],a);const c=u(t,["bpm"]);c!=null&&f(e,["bpm"],c);const h=u(t,["density"]);h!=null&&f(e,["density"],h);const m=u(t,["brightness"]);m!=null&&f(e,["brightness"],m);const p=u(t,["scale"]);p!=null&&f(e,["scale"],p);const v=u(t,["muteBass"]);v!=null&&f(e,["muteBass"],v);const E=u(t,["muteDrums"]);E!=null&&f(e,["muteDrums"],E);const S=u(t,["onlyBassAndDrums"]);S!=null&&f(e,["onlyBassAndDrums"],S);const I=u(t,["musicGenerationMode"]);return I!=null&&f(e,["musicGenerationMode"],I),e}function jb(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],tS(n)),e}function nS(t){const e={},n=u(t,["model"]);return n!=null&&f(e,["model"],n),e}function iS(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>eS(r))),f(e,["weightedPrompts"],i)}return e}function zp(t){const e={},n=u(t,["setup"]);n!=null&&f(e,["setup"],nS(n));const i=u(t,["clientContent"]);i!=null&&f(e,["clientContent"],iS(i));const r=u(t,["musicGenerationConfig"]);r!=null&&f(e,["musicGenerationConfig"],tS(r));const a=u(t,["playbackControl"]);return a!=null&&f(e,["playbackControl"],a),e}function eM(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function tM(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],eM(n)),e}function nM(t){const e={},n=u(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],tM(n)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function iM(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function oM(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function rM(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function sM(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],iM(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],oM(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],rM(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function aM(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>sM(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function lM(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=u(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=u(t,["response"]);c!=null&&f(e,["response"],c);const h=u(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function uM(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function cM(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],uM(n)),e}function fM(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function dM(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],fM(n)),e}function hM(){return{}}function pM(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&f(e,["apiKeyString"],n),e}function mM(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&f(e,["apiKeyConfig"],pM(n));const i=u(t,["authType"]);i!=null&&f(e,["authType"],i);const r=u(t,["googleServiceAccountConfig"]);r!=null&&f(e,["googleServiceAccountConfig"],r);const a=u(t,["httpBasicAuthConfig"]);a!=null&&f(e,["httpBasicAuthConfig"],a);const c=u(t,["oauthConfig"]);c!=null&&f(e,["oauthConfig"],c);const h=u(t,["oidcConfig"]);return h!=null&&f(e,["oidcConfig"],h),e}function gM(t){const e={},n=u(t,["authConfig"]);return n!=null&&f(e,["authConfig"],mM(n)),e}function yM(){return{}}function vM(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>lM(S))),f(e,["functionDeclarations"],E)}const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=u(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],cM(r));const a=u(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],dM(a)),u(t,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],hM());const h=u(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],gM(h)),u(t,["urlContext"])!=null&&f(e,["urlContext"],yM());const p=u(t,["codeExecution"]);p!=null&&f(e,["codeExecution"],p);const v=u(t,["computerUse"]);return v!=null&&f(e,["computerUse"],v),e}function _M(t){const e={},n=u(t,["handle"]);n!=null&&f(e,["handle"],n);const i=u(t,["transparent"]);return i!=null&&f(e,["transparent"],i),e}function QT(){return{}}function TM(t){const e={},n=u(t,["disabled"]);n!=null&&f(e,["disabled"],n);const i=u(t,["startOfSpeechSensitivity"]);i!=null&&f(e,["startOfSpeechSensitivity"],i);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&f(e,["endOfSpeechSensitivity"],r);const a=u(t,["prefixPaddingMs"]);a!=null&&f(e,["prefixPaddingMs"],a);const c=u(t,["silenceDurationMs"]);return c!=null&&f(e,["silenceDurationMs"],c),e}function EM(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&f(e,["automaticActivityDetection"],TM(n));const i=u(t,["activityHandling"]);i!=null&&f(e,["activityHandling"],i);const r=u(t,["turnCoverage"]);return r!=null&&f(e,["turnCoverage"],r),e}function SM(t){const e={},n=u(t,["targetTokens"]);return n!=null&&f(e,["targetTokens"],n),e}function AM(t){const e={},n=u(t,["triggerTokens"]);n!=null&&f(e,["triggerTokens"],n);const i=u(t,["slidingWindow"]);return i!=null&&f(e,["slidingWindow"],SM(i)),e}function CM(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&f(e,["proactiveAudio"],n),e}function wM(t,e){const n={},i=u(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=u(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=u(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=u(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const p=u(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=u(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=u(t,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],nM(Im(E)));const S=u(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&f(e,["setup","systemInstruction"],aM(An(I)));const b=u(t,["tools"]);if(e!==void 0&&b!=null){let se=Fa(b);Array.isArray(se)&&(se=se.map(me=>vM(Ba(me)))),f(e,["setup","tools"],se)}const O=u(t,["sessionResumption"]);e!==void 0&&O!=null&&f(e,["setup","sessionResumption"],_M(O));const F=u(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&f(e,["setup","inputAudioTranscription"],QT());const re=u(t,["outputAudioTranscription"]);e!==void 0&&re!=null&&f(e,["setup","outputAudioTranscription"],QT());const ie=u(t,["realtimeInputConfig"]);e!==void 0&&ie!=null&&f(e,["setup","realtimeInputConfig"],EM(ie));const ne=u(t,["contextWindowCompression"]);e!==void 0&&ne!=null&&f(e,["setup","contextWindowCompression"],AM(ne));const fe=u(t,["proactivity"]);return e!==void 0&&fe!=null&&f(e,["setup","proactivity"],CM(fe)),n}function IM(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["setup","model"],dt(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],wM(r,n)),n}function RM(){return{}}function xM(){return{}}function bM(t){const e={},n=u(t,["media"]);n!=null&&f(e,["mediaChunks"],UE(n));const i=u(t,["audio"]);i!=null&&f(e,["audio"],BE(i));const r=u(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const a=u(t,["video"]);a!=null&&f(e,["video"],OE(a));const c=u(t,["text"]);return c!=null&&f(e,["text"],c),u(t,["activityStart"])!=null&&f(e,["activityStart"],RM()),u(t,["activityEnd"])!=null&&f(e,["activityEnd"],xM()),e}function MM(){return{}}function NM(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function kM(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function DM(t){const e={},n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function PM(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],NM(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],kM(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],DM(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function VM(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>PM(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function XT(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["finished"]);return i!=null&&f(e,["finished"],i),e}function LM(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function UM(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>LM(r))),f(e,["urlMetadata"],i)}return e}function OM(t){const e={},n=u(t,["modelTurn"]);n!=null&&f(e,["modelTurn"],VM(n));const i=u(t,["turnComplete"]);i!=null&&f(e,["turnComplete"],i);const r=u(t,["interrupted"]);r!=null&&f(e,["interrupted"],r);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const c=u(t,["generationComplete"]);c!=null&&f(e,["generationComplete"],c);const h=u(t,["inputTranscription"]);h!=null&&f(e,["inputTranscription"],XT(h));const m=u(t,["outputTranscription"]);m!=null&&f(e,["outputTranscription"],XT(m));const p=u(t,["urlContextMetadata"]);return p!=null&&f(e,["urlContextMetadata"],UM(p)),e}function BM(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const i=u(t,["args"]);i!=null&&f(e,["args"],i);const r=u(t,["name"]);return r!=null&&f(e,["name"],r),e}function FM(t){const e={},n=u(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>BM(r))),f(e,["functionCalls"],i)}return e}function qM(t){const e={},n=u(t,["ids"]);return n!=null&&f(e,["ids"],n),e}function of(t){const e={},n=u(t,["modality"]);n!=null&&f(e,["modality"],n);const i=u(t,["tokenCount"]);return i!=null&&f(e,["tokenCount"],i),e}function GM(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=u(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const r=u(t,["responseTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const a=u(t,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const c=u(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=u(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const m=u(t,["promptTokensDetails"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(I=>of(I))),f(e,["promptTokensDetails"],S)}const p=u(t,["cacheTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(I=>of(I))),f(e,["cacheTokensDetails"],S)}const v=u(t,["responseTokensDetails"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(I=>of(I))),f(e,["responseTokensDetails"],S)}const E=u(t,["toolUsePromptTokensDetails"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(I=>of(I))),f(e,["toolUsePromptTokensDetails"],S)}return e}function zM(t){const e={},n=u(t,["timeLeft"]);return n!=null&&f(e,["timeLeft"],n),e}function HM(t){const e={},n=u(t,["newHandle"]);n!=null&&f(e,["newHandle"],n);const i=u(t,["resumable"]);i!=null&&f(e,["resumable"],i);const r=u(t,["lastConsumedClientMessageIndex"]);return r!=null&&f(e,["lastConsumedClientMessageIndex"],r),e}function $M(t){const e={};u(t,["setupComplete"])!=null&&f(e,["setupComplete"],MM());const i=u(t,["serverContent"]);i!=null&&f(e,["serverContent"],OM(i));const r=u(t,["toolCall"]);r!=null&&f(e,["toolCall"],FM(r));const a=u(t,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],qM(a));const c=u(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],GM(c));const h=u(t,["goAway"]);h!=null&&f(e,["goAway"],zM(h));const m=u(t,["sessionResumptionUpdate"]);return m!=null&&f(e,["sessionResumptionUpdate"],HM(m)),e}function YM(){return{}}function KM(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["weight"]);return i!=null&&f(e,["weight"],i),e}function JM(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>KM(r))),f(e,["weightedPrompts"],i)}return e}function QM(t){const e={},n=u(t,["temperature"]);n!=null&&f(e,["temperature"],n);const i=u(t,["topK"]);i!=null&&f(e,["topK"],i);const r=u(t,["seed"]);r!=null&&f(e,["seed"],r);const a=u(t,["guidance"]);a!=null&&f(e,["guidance"],a);const c=u(t,["bpm"]);c!=null&&f(e,["bpm"],c);const h=u(t,["density"]);h!=null&&f(e,["density"],h);const m=u(t,["brightness"]);m!=null&&f(e,["brightness"],m);const p=u(t,["scale"]);p!=null&&f(e,["scale"],p);const v=u(t,["muteBass"]);v!=null&&f(e,["muteBass"],v);const E=u(t,["muteDrums"]);E!=null&&f(e,["muteDrums"],E);const S=u(t,["onlyBassAndDrums"]);S!=null&&f(e,["onlyBassAndDrums"],S);const I=u(t,["musicGenerationMode"]);return I!=null&&f(e,["musicGenerationMode"],I),e}function XM(t){const e={},n=u(t,["clientContent"]);n!=null&&f(e,["clientContent"],JM(n));const i=u(t,["musicGenerationConfig"]);return i!=null&&f(e,["musicGenerationConfig"],QM(i)),e}function WM(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);i!=null&&f(e,["mimeType"],i);const r=u(t,["sourceMetadata"]);return r!=null&&f(e,["sourceMetadata"],XM(r)),e}function ZM(t){const e={},n=u(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>WM(r))),f(e,["audioChunks"],i)}return e}function jM(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["filteredReason"]);return i!=null&&f(e,["filteredReason"],i),e}function e1(t){const e={};u(t,["setupComplete"])!=null&&f(e,["setupComplete"],YM());const i=u(t,["serverContent"]);i!=null&&f(e,["serverContent"],ZM(i));const r=u(t,["filteredPrompt"]);return r!=null&&f(e,["filteredPrompt"],jM(r)),e}function t1(t){const e={},n=u(t,["sessionId"]);return n!=null&&f(e,["sessionId"],n),e}function n1(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function i1(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function o1(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function r1(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n1(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],i1(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],o1(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function s1(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>r1(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function WT(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["finished"]);return i!=null&&f(e,["finished"],i),e}function a1(t){const e={},n=u(t,["modelTurn"]);n!=null&&f(e,["modelTurn"],s1(n));const i=u(t,["turnComplete"]);i!=null&&f(e,["turnComplete"],i);const r=u(t,["interrupted"]);r!=null&&f(e,["interrupted"],r);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const c=u(t,["generationComplete"]);c!=null&&f(e,["generationComplete"],c);const h=u(t,["inputTranscription"]);h!=null&&f(e,["inputTranscription"],WT(h));const m=u(t,["outputTranscription"]);return m!=null&&f(e,["outputTranscription"],WT(m)),e}function l1(t){const e={},n=u(t,["args"]);n!=null&&f(e,["args"],n);const i=u(t,["name"]);return i!=null&&f(e,["name"],i),e}function u1(t){const e={},n=u(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>l1(r))),f(e,["functionCalls"],i)}return e}function c1(t){const e={},n=u(t,["ids"]);return n!=null&&f(e,["ids"],n),e}function rf(t){const e={},n=u(t,["modality"]);n!=null&&f(e,["modality"],n);const i=u(t,["tokenCount"]);return i!=null&&f(e,["tokenCount"],i),e}function f1(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=u(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const r=u(t,["candidatesTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const a=u(t,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const c=u(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=u(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const m=u(t,["promptTokensDetails"]);if(m!=null){let I=m;Array.isArray(I)&&(I=I.map(b=>rf(b))),f(e,["promptTokensDetails"],I)}const p=u(t,["cacheTokensDetails"]);if(p!=null){let I=p;Array.isArray(I)&&(I=I.map(b=>rf(b))),f(e,["cacheTokensDetails"],I)}const v=u(t,["candidatesTokensDetails"]);if(v!=null){let I=v;Array.isArray(I)&&(I=I.map(b=>rf(b))),f(e,["responseTokensDetails"],I)}const E=u(t,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(b=>rf(b))),f(e,["toolUsePromptTokensDetails"],I)}const S=u(t,["trafficType"]);return S!=null&&f(e,["trafficType"],S),e}function d1(t){const e={},n=u(t,["timeLeft"]);return n!=null&&f(e,["timeLeft"],n),e}function h1(t){const e={},n=u(t,["newHandle"]);n!=null&&f(e,["newHandle"],n);const i=u(t,["resumable"]);i!=null&&f(e,["resumable"],i);const r=u(t,["lastConsumedClientMessageIndex"]);return r!=null&&f(e,["lastConsumedClientMessageIndex"],r),e}function p1(t){const e={},n=u(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],t1(n));const i=u(t,["serverContent"]);i!=null&&f(e,["serverContent"],a1(i));const r=u(t,["toolCall"]);r!=null&&f(e,["toolCall"],u1(r));const a=u(t,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],c1(a));const c=u(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],f1(c));const h=u(t,["goAway"]);h!=null&&f(e,["goAway"],d1(h));const m=u(t,["sessionResumptionUpdate"]);return m!=null&&f(e,["sessionResumptionUpdate"],h1(m)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m1(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function g1(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function y1(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function v1(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],m1(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],g1(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],y1(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function Qf(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>v1(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function _1(t){const e={},n=u(t,["anyOf"]);n!=null&&f(e,["anyOf"],n);const i=u(t,["default"]);i!=null&&f(e,["default"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["enum"]);a!=null&&f(e,["enum"],a);const c=u(t,["example"]);c!=null&&f(e,["example"],c);const h=u(t,["format"]);h!=null&&f(e,["format"],h);const m=u(t,["items"]);m!=null&&f(e,["items"],m);const p=u(t,["maxItems"]);p!=null&&f(e,["maxItems"],p);const v=u(t,["maxLength"]);v!=null&&f(e,["maxLength"],v);const E=u(t,["maxProperties"]);E!=null&&f(e,["maxProperties"],E);const S=u(t,["maximum"]);S!=null&&f(e,["maximum"],S);const I=u(t,["minItems"]);I!=null&&f(e,["minItems"],I);const b=u(t,["minLength"]);b!=null&&f(e,["minLength"],b);const O=u(t,["minProperties"]);O!=null&&f(e,["minProperties"],O);const F=u(t,["minimum"]);F!=null&&f(e,["minimum"],F);const re=u(t,["nullable"]);re!=null&&f(e,["nullable"],re);const ie=u(t,["pattern"]);ie!=null&&f(e,["pattern"],ie);const ne=u(t,["properties"]);ne!=null&&f(e,["properties"],ne);const fe=u(t,["propertyOrdering"]);fe!=null&&f(e,["propertyOrdering"],fe);const se=u(t,["required"]);se!=null&&f(e,["required"],se);const me=u(t,["title"]);me!=null&&f(e,["title"],me);const D=u(t,["type"]);return D!=null&&f(e,["type"],D),e}function T1(t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(t,["category"]);n!=null&&f(e,["category"],n);const i=u(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function E1(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function S1(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function A1(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],S1(n)),e}function C1(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function w1(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],C1(n)),e}function I1(){return{}}function R1(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>E1(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],A1(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],w1(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],I1());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function x1(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function b1(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function M1(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],b1(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function N1(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],x1(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],M1(i)),e}function k1(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function oS(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],k1(n)),e}function D1(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],oS(i)),e}function P1(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>D1(r))),f(e,["speakerVoiceConfigs"],i)}return e}function V1(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],oS(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],P1(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function L1(t){const e={},n=u(t,["includeThoughts"]);n!=null&&f(e,["includeThoughts"],n);const i=u(t,["thinkingBudget"]);return i!=null&&f(e,["thinkingBudget"],i),e}function U1(t,e,n){const i={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],Qf(An(r)));const a=u(e,["temperature"]);a!=null&&f(i,["temperature"],a);const c=u(e,["topP"]);c!=null&&f(i,["topP"],c);const h=u(e,["topK"]);h!=null&&f(i,["topK"],h);const m=u(e,["candidateCount"]);m!=null&&f(i,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&f(i,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&f(i,["stopSequences"],v);const E=u(e,["responseLogprobs"]);E!=null&&f(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&f(i,["logprobs"],S);const I=u(e,["presencePenalty"]);I!=null&&f(i,["presencePenalty"],I);const b=u(e,["frequencyPenalty"]);b!=null&&f(i,["frequencyPenalty"],b);const O=u(e,["seed"]);O!=null&&f(i,["seed"],O);const F=u(e,["responseMimeType"]);F!=null&&f(i,["responseMimeType"],F);const re=u(e,["responseSchema"]);re!=null&&f(i,["responseSchema"],_1(Cm(re)));const ie=u(e,["responseJsonSchema"]);if(ie!=null&&f(i,["responseJsonSchema"],ie),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ne=u(e,["safetySettings"]);if(n!==void 0&&ne!=null){let k=ne;Array.isArray(k)&&(k=k.map(q=>T1(q))),f(n,["safetySettings"],k)}const fe=u(e,["tools"]);if(n!==void 0&&fe!=null){let k=Fa(fe);Array.isArray(k)&&(k=k.map(q=>R1(Ba(q)))),f(n,["tools"],k)}const se=u(e,["toolConfig"]);if(n!==void 0&&se!=null&&f(n,["toolConfig"],N1(se)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const me=u(e,["cachedContent"]);n!==void 0&&me!=null&&f(n,["cachedContent"],qo(t,me));const D=u(e,["responseModalities"]);D!=null&&f(i,["responseModalities"],D);const M=u(e,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);const x=u(e,["speechConfig"]);if(x!=null&&f(i,["speechConfig"],V1(wm(x))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=u(e,["thinkingConfig"]);return L!=null&&f(i,["thinkingConfig"],L1(L)),i}function ZT(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["contents"]);if(r!=null){let c=di(r);Array.isArray(c)&&(c=c.map(h=>Qf(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["generationConfig"],U1(t,a,n)),n}function O1(t,e){const n={},i=u(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const r=u(t,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const a=u(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function B1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["contents"]);r!=null&&f(n,["requests[]","content"],qE(t,r));const a=u(e,["config"]);a!=null&&f(n,["config"],O1(a,n));const c=u(e,["model"]);return c!==void 0&&f(n,["requests[]","model"],dt(t,c)),n}function F1(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=u(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const a=u(t,["guidanceScale"]);if(e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const p=u(t,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const v=u(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const E=u(t,["outputMimeType"]);e!==void 0&&E!=null&&f(e,["parameters","outputOptions","mimeType"],E);const S=u(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const I=u(t,["imageSize"]);if(e!==void 0&&I!=null&&f(e,["parameters","sampleImageSize"],I),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function q1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["config"]);return a!=null&&f(n,["config"],F1(a,n)),n}function G1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],dt(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function z1(t,e,n){const i={},r=u(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const a=u(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=u(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=u(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],HE(t,h)),i}function H1(t,e){const n={},i=u(e,["config"]);return i!=null&&f(n,["config"],z1(t,i,n)),n}function $1(t,e){const n={},i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const a=u(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function Y1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],dt(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],$1(r,n)),n}function K1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],dt(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function J1(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Q1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["contents"]);if(r!=null){let c=di(r);Array.isArray(c)&&(c=c.map(h=>Qf(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["config"],J1(a)),n}function X1(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],ws(n));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function W1(t,e){const n={},i=u(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=u(t,["durationSeconds"]);if(e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=u(t,["aspectRatio"]);if(e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a),u(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const c=u(t,["personGeneration"]);if(e!==void 0&&c!=null&&f(e,["parameters","personGeneration"],c),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=u(t,["negativePrompt"]);e!==void 0&&h!=null&&f(e,["parameters","negativePrompt"],h);const m=u(t,["enhancePrompt"]);if(e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(u(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Z1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["image"]);if(a!=null&&f(n,["instances[0]","image"],X1(a)),u(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const c=u(e,["config"]);return c!=null&&f(n,["config"],W1(c,n)),n}function j1(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function eN(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function tN(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function nN(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],j1(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],eN(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],tN(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function Ga(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>nN(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function iN(t){const e={},n=u(t,["anyOf"]);n!=null&&f(e,["anyOf"],n);const i=u(t,["default"]);i!=null&&f(e,["default"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["enum"]);a!=null&&f(e,["enum"],a);const c=u(t,["example"]);c!=null&&f(e,["example"],c);const h=u(t,["format"]);h!=null&&f(e,["format"],h);const m=u(t,["items"]);m!=null&&f(e,["items"],m);const p=u(t,["maxItems"]);p!=null&&f(e,["maxItems"],p);const v=u(t,["maxLength"]);v!=null&&f(e,["maxLength"],v);const E=u(t,["maxProperties"]);E!=null&&f(e,["maxProperties"],E);const S=u(t,["maximum"]);S!=null&&f(e,["maximum"],S);const I=u(t,["minItems"]);I!=null&&f(e,["minItems"],I);const b=u(t,["minLength"]);b!=null&&f(e,["minLength"],b);const O=u(t,["minProperties"]);O!=null&&f(e,["minProperties"],O);const F=u(t,["minimum"]);F!=null&&f(e,["minimum"],F);const re=u(t,["nullable"]);re!=null&&f(e,["nullable"],re);const ie=u(t,["pattern"]);ie!=null&&f(e,["pattern"],ie);const ne=u(t,["properties"]);ne!=null&&f(e,["properties"],ne);const fe=u(t,["propertyOrdering"]);fe!=null&&f(e,["propertyOrdering"],fe);const se=u(t,["required"]);se!=null&&f(e,["required"],se);const me=u(t,["title"]);me!=null&&f(e,["title"],me);const D=u(t,["type"]);return D!=null&&f(e,["type"],D),e}function oN(t){const e={},n=u(t,["featureSelectionPreference"]);return n!=null&&f(e,["featureSelectionPreference"],n),e}function rN(t){const e={},n=u(t,["method"]);n!=null&&f(e,["method"],n);const i=u(t,["category"]);i!=null&&f(e,["category"],i);const r=u(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function sN(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=u(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=u(t,["response"]);c!=null&&f(e,["response"],c);const h=u(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function aN(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function lN(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],aN(n)),e}function uN(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function cN(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],uN(n)),e}function fN(){return{}}function dN(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&f(e,["apiKeyString"],n),e}function hN(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&f(e,["apiKeyConfig"],dN(n));const i=u(t,["authType"]);i!=null&&f(e,["authType"],i);const r=u(t,["googleServiceAccountConfig"]);r!=null&&f(e,["googleServiceAccountConfig"],r);const a=u(t,["httpBasicAuthConfig"]);a!=null&&f(e,["httpBasicAuthConfig"],a);const c=u(t,["oauthConfig"]);c!=null&&f(e,["oauthConfig"],c);const h=u(t,["oidcConfig"]);return h!=null&&f(e,["oidcConfig"],h),e}function pN(t){const e={},n=u(t,["authConfig"]);return n!=null&&f(e,["authConfig"],hN(n)),e}function mN(){return{}}function rS(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>sN(S))),f(e,["functionDeclarations"],E)}const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=u(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],lN(r));const a=u(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],cN(a)),u(t,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],fN());const h=u(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],pN(h)),u(t,["urlContext"])!=null&&f(e,["urlContext"],mN());const p=u(t,["codeExecution"]);p!=null&&f(e,["codeExecution"],p);const v=u(t,["computerUse"]);return v!=null&&f(e,["computerUse"],v),e}function gN(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function yN(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function vN(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],yN(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function _N(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],gN(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],vN(i)),e}function TN(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function EN(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],TN(n)),e}function SN(t){const e={},n=u(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],EN(n)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function AN(t){const e={},n=u(t,["includeThoughts"]);n!=null&&f(e,["includeThoughts"],n);const i=u(t,["thinkingBudget"]);return i!=null&&f(e,["thinkingBudget"],i),e}function CN(t,e,n){const i={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],Ga(An(r)));const a=u(e,["temperature"]);a!=null&&f(i,["temperature"],a);const c=u(e,["topP"]);c!=null&&f(i,["topP"],c);const h=u(e,["topK"]);h!=null&&f(i,["topK"],h);const m=u(e,["candidateCount"]);m!=null&&f(i,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&f(i,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&f(i,["stopSequences"],v);const E=u(e,["responseLogprobs"]);E!=null&&f(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&f(i,["logprobs"],S);const I=u(e,["presencePenalty"]);I!=null&&f(i,["presencePenalty"],I);const b=u(e,["frequencyPenalty"]);b!=null&&f(i,["frequencyPenalty"],b);const O=u(e,["seed"]);O!=null&&f(i,["seed"],O);const F=u(e,["responseMimeType"]);F!=null&&f(i,["responseMimeType"],F);const re=u(e,["responseSchema"]);re!=null&&f(i,["responseSchema"],iN(Cm(re)));const ie=u(e,["responseJsonSchema"]);ie!=null&&f(i,["responseJsonSchema"],ie);const ne=u(e,["routingConfig"]);ne!=null&&f(i,["routingConfig"],ne);const fe=u(e,["modelSelectionConfig"]);fe!=null&&f(i,["modelConfig"],oN(fe));const se=u(e,["safetySettings"]);if(n!==void 0&&se!=null){let Xe=se;Array.isArray(Xe)&&(Xe=Xe.map(X=>rN(X))),f(n,["safetySettings"],Xe)}const me=u(e,["tools"]);if(n!==void 0&&me!=null){let Xe=Fa(me);Array.isArray(Xe)&&(Xe=Xe.map(X=>rS(Ba(X)))),f(n,["tools"],Xe)}const D=u(e,["toolConfig"]);n!==void 0&&D!=null&&f(n,["toolConfig"],_N(D));const M=u(e,["labels"]);n!==void 0&&M!=null&&f(n,["labels"],M);const x=u(e,["cachedContent"]);n!==void 0&&x!=null&&f(n,["cachedContent"],qo(t,x));const L=u(e,["responseModalities"]);L!=null&&f(i,["responseModalities"],L);const k=u(e,["mediaResolution"]);k!=null&&f(i,["mediaResolution"],k);const q=u(e,["speechConfig"]);q!=null&&f(i,["speechConfig"],SN(wm(q)));const V=u(e,["audioTimestamp"]);V!=null&&f(i,["audioTimestamp"],V);const St=u(e,["thinkingConfig"]);return St!=null&&f(i,["thinkingConfig"],AN(St)),i}function jT(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["contents"]);if(r!=null){let c=di(r);Array.isArray(c)&&(c=c.map(h=>Ga(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["generationConfig"],CN(t,a,n)),n}function wN(t,e){const n={},i=u(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);const r=u(t,["title"]);e!==void 0&&r!=null&&f(e,["instances[]","title"],r);const a=u(t,["outputDimensionality"]);e!==void 0&&a!=null&&f(e,["parameters","outputDimensionality"],a);const c=u(t,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const h=u(t,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),n}function IN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["contents"]);r!=null&&f(n,["instances[]","content"],qE(t,r));const a=u(e,["config"]);return a!=null&&f(n,["config"],wN(a,n)),n}function RN(t,e){const n={},i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=u(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const a=u(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=u(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=u(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const m=u(t,["seed"]);e!==void 0&&m!=null&&f(e,["parameters","seed"],m);const p=u(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=u(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=u(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&f(e,["parameters","includeSafetyAttributes"],E);const S=u(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const I=u(t,["language"]);e!==void 0&&I!=null&&f(e,["parameters","language"],I);const b=u(t,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const O=u(t,["outputCompressionQuality"]);e!==void 0&&O!=null&&f(e,["parameters","outputOptions","compressionQuality"],O);const F=u(t,["addWatermark"]);e!==void 0&&F!=null&&f(e,["parameters","addWatermark"],F);const re=u(t,["imageSize"]);e!==void 0&&re!=null&&f(e,["parameters","sampleImageSize"],re);const ie=u(t,["enhancePrompt"]);return e!==void 0&&ie!=null&&f(e,["parameters","enhancePrompt"],ie),n}function xN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["config"]);return a!=null&&f(n,["config"],RN(a,n)),n}function za(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],ws(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function bN(t){const e={},n=u(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const i=u(t,["segmentationClasses"]);i!=null&&f(e,["maskClasses"],i);const r=u(t,["maskDilation"]);return r!=null&&f(e,["dilation"],r),e}function MN(t){const e={},n=u(t,["controlType"]);n!=null&&f(e,["controlType"],n);const i=u(t,["enableControlImageComputation"]);return i!=null&&f(e,["computeControl"],i),e}function NN(t){const e={},n=u(t,["styleDescription"]);return n!=null&&f(e,["styleDescription"],n),e}function kN(t){const e={},n=u(t,["subjectType"]);n!=null&&f(e,["subjectType"],n);const i=u(t,["subjectDescription"]);return i!=null&&f(e,["subjectDescription"],i),e}function DN(t){const e={},n=u(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],za(n));const i=u(t,["referenceId"]);i!=null&&f(e,["referenceId"],i);const r=u(t,["referenceType"]);r!=null&&f(e,["referenceType"],r);const a=u(t,["maskImageConfig"]);a!=null&&f(e,["maskImageConfig"],bN(a));const c=u(t,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],MN(c));const h=u(t,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],NN(h));const m=u(t,["subjectImageConfig"]);return m!=null&&f(e,["subjectImageConfig"],kN(m)),e}function PN(t,e){const n={},i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=u(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const a=u(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=u(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=u(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const m=u(t,["seed"]);e!==void 0&&m!=null&&f(e,["parameters","seed"],m);const p=u(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=u(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=u(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&f(e,["parameters","includeSafetyAttributes"],E);const S=u(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const I=u(t,["language"]);e!==void 0&&I!=null&&f(e,["parameters","language"],I);const b=u(t,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const O=u(t,["outputCompressionQuality"]);e!==void 0&&O!=null&&f(e,["parameters","outputOptions","compressionQuality"],O);const F=u(t,["addWatermark"]);e!==void 0&&F!=null&&f(e,["parameters","addWatermark"],F);const re=u(t,["editMode"]);e!==void 0&&re!=null&&f(e,["parameters","editMode"],re);const ie=u(t,["baseSteps"]);return e!==void 0&&ie!=null&&f(e,["parameters","editConfig","baseSteps"],ie),n}function VN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(m=>DN(m))),f(n,["instances[0]","referenceImages"],h)}const c=u(e,["config"]);return c!=null&&f(n,["config"],PN(c,n)),n}function LN(t,e){const n={},i=u(t,["includeRaiReason"]);e!==void 0&&i!=null&&f(e,["parameters","includeRaiReason"],i);const r=u(t,["outputMimeType"]);e!==void 0&&r!=null&&f(e,["parameters","outputOptions","mimeType"],r);const a=u(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&f(e,["parameters","outputOptions","compressionQuality"],a);const c=u(t,["enhanceInputImage"]);e!==void 0&&c!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],c);const h=u(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const m=u(t,["numberOfImages"]);e!==void 0&&m!=null&&f(e,["parameters","sampleCount"],m);const p=u(t,["mode"]);return e!==void 0&&p!=null&&f(e,["parameters","mode"],p),n}function UN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["image"]);r!=null&&f(n,["instances[0]","image"],za(r));const a=u(e,["upscaleFactor"]);a!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],a);const c=u(e,["config"]);return c!=null&&f(n,["config"],LN(c,n)),n}function ON(t){const e={},n=u(t,["productImage"]);return n!=null&&f(e,["image"],za(n)),e}function BN(t,e){const n={},i=u(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=u(t,["personImage"]);e!==void 0&&r!=null&&f(e,["instances[0]","personImage","image"],za(r));const a=u(t,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>ON(h))),f(e,["instances[0]","productImages"],c)}return n}function FN(t,e){const n={},i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=u(t,["baseSteps"]);e!==void 0&&r!=null&&f(e,["parameters","editConfig","baseSteps"],r);const a=u(t,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const c=u(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const h=u(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const m=u(t,["personGeneration"]);e!==void 0&&m!=null&&f(e,["parameters","personGeneration"],m);const p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const v=u(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","compressionQuality"],v);const E=u(t,["enhancePrompt"]);return e!==void 0&&E!=null&&f(e,["parameters","enhancePrompt"],E),n}function qN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["source"]);r!=null&&f(n,["config"],BN(r,n));const a=u(e,["config"]);return a!=null&&f(n,["config"],FN(a,n)),n}function GN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],dt(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function zN(t,e,n){const i={},r=u(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const a=u(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=u(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=u(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],HE(t,h)),i}function HN(t,e){const n={},i=u(e,["config"]);return i!=null&&f(n,["config"],zN(t,i,n)),n}function $N(t,e){const n={},i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const a=u(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function YN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],$N(r,n)),n}function KN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],dt(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function JN(t,e){const n={},i=u(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],Ga(An(i)));const r=u(t,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>rS(h))),f(e,["tools"],c)}const a=u(t,["generationConfig"]);return e!==void 0&&a!=null&&f(e,["generationConfig"],a),n}function QN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["contents"]);if(r!=null){let c=di(r);Array.isArray(c)&&(c=c.map(h=>Ga(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["config"],JN(a,n)),n}function XN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["contents"]);if(r!=null){let c=di(r);Array.isArray(c)&&(c=c.map(h=>Ga(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["config"],a),n}function WN(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["videoBytes"]);i!=null&&f(e,["bytesBase64Encoded"],ws(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function ZN(t,e){const n={},i=u(t,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const a=u(t,["fps"]);e!==void 0&&a!=null&&f(e,["parameters","fps"],a);const c=u(t,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const m=u(t,["aspectRatio"]);e!==void 0&&m!=null&&f(e,["parameters","aspectRatio"],m);const p=u(t,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const v=u(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=u(t,["pubsubTopic"]);e!==void 0&&E!=null&&f(e,["parameters","pubsubTopic"],E);const S=u(t,["negativePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","negativePrompt"],S);const I=u(t,["enhancePrompt"]);e!==void 0&&I!=null&&f(e,["parameters","enhancePrompt"],I);const b=u(t,["generateAudio"]);e!==void 0&&b!=null&&f(e,["parameters","generateAudio"],b);const O=u(t,["lastFrame"]);e!==void 0&&O!=null&&f(e,["instances[0]","lastFrame"],za(O));const F=u(t,["compressionQuality"]);return e!==void 0&&F!=null&&f(e,["parameters","compressionQuality"],F),n}function jN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],dt(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["image"]);a!=null&&f(n,["instances[0]","image"],za(a));const c=u(e,["video"]);c!=null&&f(n,["instances[0]","video"],WN(c));const h=u(e,["config"]);return h!=null&&f(n,["config"],ZN(h,n)),n}function ek(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function tk(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function nk(t){const e={},n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function ik(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],ek(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],tk(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],nk(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function ok(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>ik(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function rk(t){const e={},n=u(t,["citationSources"]);return n!=null&&f(e,["citations"],n),e}function sk(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function ak(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>sk(r))),f(e,["urlMetadata"],i)}return e}function lk(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],ok(n));const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],rk(i));const r=u(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const a=u(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=u(t,["urlContextMetadata"]);c!=null&&f(e,["urlContextMetadata"],ak(c));const h=u(t,["avgLogprobs"]);h!=null&&f(e,["avgLogprobs"],h);const m=u(t,["groundingMetadata"]);m!=null&&f(e,["groundingMetadata"],m);const p=u(t,["index"]);p!=null&&f(e,["index"],p);const v=u(t,["logprobsResult"]);v!=null&&f(e,["logprobsResult"],v);const E=u(t,["safetyRatings"]);return E!=null&&f(e,["safetyRatings"],E),e}function e0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>lk(p))),f(e,["candidates"],m)}const r=u(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const a=u(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=u(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=u(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function uk(t){const e={},n=u(t,["values"]);return n!=null&&f(e,["values"],n),e}function ck(){return{}}function fk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>uk(c))),f(e,["embeddings"],a)}return u(t,["metadata"])!=null&&f(e,["metadata"],ck()),e}function dk(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],ws(n));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function sS(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=u(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=u(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function hk(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],dk(n));const i=u(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=u(t,["_self"]);return r!=null&&f(e,["safetyAttributes"],sS(r)),e}function pk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>hk(c))),f(e,["generatedImages"],a)}const r=u(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],sS(r)),e}function mk(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=u(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function Hp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["version"]);a!=null&&f(e,["version"],a);const c=u(t,["_self"]);c!=null&&f(e,["tunedModelInfo"],mk(c));const h=u(t,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const m=u(t,["outputTokenLimit"]);m!=null&&f(e,["outputTokenLimit"],m);const p=u(t,["supportedGenerationMethods"]);return p!=null&&f(e,["supportedActions"],p),e}function gk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["_self"]);if(r!=null){let a=$E(r);Array.isArray(a)&&(a=a.map(c=>Hp(c))),f(e,["models"],a)}return e}function yk(){return{}}function vk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["totalTokens"]);i!=null&&f(e,["totalTokens"],i);const r=u(t,["cachedContentTokenCount"]);return r!=null&&f(e,["cachedContentTokenCount"],r),e}function _k(t){const e={},n=u(t,["video","uri"]);n!=null&&f(e,["uri"],n);const i=u(t,["video","encodedVideo"]);i!=null&&f(e,["videoBytes"],ws(i));const r=u(t,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function Tk(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],_k(n)),e}function Ek(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>Tk(c))),f(e,["generatedVideos"],a)}const i=u(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function Sk(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);a!=null&&f(e,["error"],a);const c=u(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],Ek(c)),e}function Ak(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function Ck(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function wk(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Ik(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],Ak(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],Ck(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],wk(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function Rk(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Ik(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function xk(t){const e={},n=u(t,["citations"]);return n!=null&&f(e,["citations"],n),e}function bk(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function Mk(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>bk(r))),f(e,["urlMetadata"],i)}return e}function Nk(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],Rk(n));const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],xk(i));const r=u(t,["finishMessage"]);r!=null&&f(e,["finishMessage"],r);const a=u(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=u(t,["urlContextMetadata"]);c!=null&&f(e,["urlContextMetadata"],Mk(c));const h=u(t,["avgLogprobs"]);h!=null&&f(e,["avgLogprobs"],h);const m=u(t,["groundingMetadata"]);m!=null&&f(e,["groundingMetadata"],m);const p=u(t,["index"]);p!=null&&f(e,["index"],p);const v=u(t,["logprobsResult"]);v!=null&&f(e,["logprobsResult"],v);const E=u(t,["safetyRatings"]);return E!=null&&f(e,["safetyRatings"],E),e}function t0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(v=>Nk(v))),f(e,["candidates"],p)}const r=u(t,["createTime"]);r!=null&&f(e,["createTime"],r);const a=u(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const c=u(t,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const h=u(t,["responseId"]);h!=null&&f(e,["responseId"],h);const m=u(t,["usageMetadata"]);return m!=null&&f(e,["usageMetadata"],m),e}function kk(t){const e={},n=u(t,["truncated"]);n!=null&&f(e,["truncated"],n);const i=u(t,["token_count"]);return i!=null&&f(e,["tokenCount"],i),e}function Dk(t){const e={},n=u(t,["values"]);n!=null&&f(e,["values"],n);const i=u(t,["statistics"]);return i!=null&&f(e,["statistics"],kk(i)),e}function Pk(t){const e={},n=u(t,["billableCharacterCount"]);return n!=null&&f(e,["billableCharacterCount"],n),e}function Vk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>Dk(c))),f(e,["embeddings"],a)}const r=u(t,["metadata"]);return r!=null&&f(e,["metadata"],Pk(r)),e}function Lk(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],ws(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function aS(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=u(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=u(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function Xf(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],Lk(n));const i=u(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=u(t,["_self"]);r!=null&&f(e,["safetyAttributes"],aS(r));const a=u(t,["prompt"]);return a!=null&&f(e,["enhancedPrompt"],a),e}function Uk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>Xf(c))),f(e,["generatedImages"],a)}const r=u(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],aS(r)),e}function Ok(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Xf(a))),f(e,["generatedImages"],r)}return e}function Bk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Xf(a))),f(e,["generatedImages"],r)}return e}function Fk(t){const e={},n=u(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Xf(r))),f(e,["generatedImages"],i)}return e}function qk(t){const e={},n=u(t,["endpoint"]);n!=null&&f(e,["name"],n);const i=u(t,["deployedModelId"]);return i!=null&&f(e,["deployedModelId"],i),e}function Gk(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=u(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function zk(t){const e={},n=u(t,["checkpointId"]);n!=null&&f(e,["checkpointId"],n);const i=u(t,["epoch"]);i!=null&&f(e,["epoch"],i);const r=u(t,["step"]);return r!=null&&f(e,["step"],r),e}function $p(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["versionId"]);a!=null&&f(e,["version"],a);const c=u(t,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>qk(S))),f(e,["endpoints"],E)}const h=u(t,["labels"]);h!=null&&f(e,["labels"],h);const m=u(t,["_self"]);m!=null&&f(e,["tunedModelInfo"],Gk(m));const p=u(t,["defaultCheckpointId"]);p!=null&&f(e,["defaultCheckpointId"],p);const v=u(t,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>zk(S))),f(e,["checkpoints"],E)}return e}function Hk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["_self"]);if(r!=null){let a=$E(r);Array.isArray(a)&&(a=a.map(c=>$p(c))),f(e,["models"],a)}return e}function $k(){return{}}function Yk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["totalTokens"]);return i!=null&&f(e,["totalTokens"],i),e}function Kk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["tokensInfo"]);return i!=null&&f(e,["tokensInfo"],i),e}function Jk(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=u(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],ws(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Qk(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],Jk(n)),e}function Xk(t){const e={},n=u(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>Qk(c))),f(e,["generatedVideos"],a)}const i=u(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function Wk(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);a!=null&&f(e,["error"],a);const c=u(t,["response"]);return c!=null&&f(e,["response"],Xk(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zk="Content-Type",jk="X-Server-Timeout",eD="User-Agent",Yp="x-goog-api-client",tD="1.13.0",nD=`google-genai-sdk/${tD}`,iD="v1beta1",oD="v1beta",n0=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class rD{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:iD,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:oD,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))r.searchParams.append(c,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const r=new AbortController,a=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>r.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}i&&i.addEventListener("abort",()=>{r.abort()}),e.signal=a}return n&&n.extraBody!==null&&sD(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await i0(r),new Op(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await i0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return wa(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:h,value:m}=yield It(r.read());if(h){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=a.decode(m,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),I=S.status,b=S.code,O=`got status: ${I}. ${JSON.stringify(E)}`;if(b>=400&&b<600)throw new Jf({message:O,status:b})}}catch(E){if(E.name==="ApiError")throw E}c+=p;let v=c.match(n0);for(;v;){const E=v[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield It(new Op(S)),c=c.slice(v[0].length),v=c.match(n0)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=nD+" "+this.clientOptions.userAgentExtra;return e[eD]=n,e[Yp]=n,e[Zk]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,r]of Object.entries(e.headers))n.append(i,r);e.timeout&&e.timeout>0&&n.append(jk,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);r.sizeBytes=String(c.size);const h=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const m=await this.fetchUploadUrl(r,n);return a.upload(e,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},c=await this.request({path:Te("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:r});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(i=c==null?void 0:c.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function i0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Jf({message:r,status:n}):new Error(r)}}function sD(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,c){const h=Object.assign({},a);for(const m in c)if(Object.prototype.hasOwnProperty.call(c,m)){const p=c[m],v=h[m];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[m]=i(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[m]=p)}return h}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aD="mcp_used/unknown";let lD=!1;function lS(t){for(const e of t)if(uD(e)||typeof e=="object"&&"inputSchema"in e)return!0;return lD}function uS(t){var e;const n=(e=t[Yp])!==null&&e!==void 0?e:"";t[Yp]=(n+` ${aD}`).trimStart()}function uD(t){return t!==null&&typeof t=="object"&&t instanceof Rm}function cD(t,e=100){return wa(this,arguments,function*(){let i,r=0;for(;r<e;){const a=yield It(t.listTools({cursor:i}));for(const c of a.tools)yield yield It(c),r++;if(!a.nextCursor)break;i=a.nextCursor}})}class Rm{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Rm(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const a={},c=[];for(const v of this.mcpClients)try{for(var h=!0,m=(n=void 0,au(cD(v))),p;p=await m.next(),e=p.done,!e;h=!0){r=p.value,h=!1;const E=r;c.push(E);const S=E.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(E){n={error:E}}finally{try{!h&&!e&&(i=m.return)&&await i.call(m)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),eR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await r.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function fD(t,e,n){const i=new YI;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);const a=e1(r);Object.assign(i,a),e(i)}class dD{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=mD(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),m=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(ne=>{p=ne}),E=e.callbacks,S=function(){p({})},I=this.apiClient,b={onopen:S,onmessage:ne=>{fD(I,E.onmessage,ne)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(ne){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(ne){}},O=this.webSocketFactory.create(m,pD(c),b);O.connect(),await v;const F=dt(this.apiClient,e.model),re=nS({model:F}),ie=zp({setup:re});return O.send(JSON.stringify(ie)),new hD(O,this.apiClient)}}class hD{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Zb(e),i=iS(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=jb(e),i=zp(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const n=zp({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Aa.PLAY)}pause(){this.sendPlaybackControl(Aa.PAUSE)}stop(){this.sendPlaybackControl(Aa.STOP)}resetContext(){this.sendPlaybackControl(Aa.RESET_CONTEXT)}close(){this.conn.close()}}function pD(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function mD(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gD="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function yD(t,e,n){const i=new $I;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const c=p1(a);Object.assign(i,c)}else{const c=$M(a);Object.assign(i,c)}e(i)}class vD{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new dD(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,a,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&lS(e.config.tools)&&uS(E);const S=SD(E);if(this.apiClient.isVertexAI())v=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const x=this.apiClient.getApiKey();let L="BidiGenerateContent",k="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",k="access_token"),v=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${L}?${k}=${x}`}let I=()=>{};const b=new Promise(x=>{I=x}),O=e.callbacks,F=function(){var x;(x=O==null?void 0:O.onopen)===null||x===void 0||x.call(O),I({})},re=this.apiClient,ie={onopen:F,onmessage:x=>{yD(re,O.onmessage,x)},onerror:(n=O==null?void 0:O.onerror)!==null&&n!==void 0?n:function(x){},onclose:(i=O==null?void 0:O.onclose)!==null&&i!==void 0?i:function(x){}},ne=this.webSocketFactory.create(v,ED(S),ie);ne.connect(),await b;let fe=dt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&fe.startsWith("publishers/")){const x=this.apiClient.getProject(),L=this.apiClient.getLocation();fe=`projects/${x}/locations/${L}/`+fe}let se={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Rf.AUDIO]}:e.config.responseModalities=[Rf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const me=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],D=[];for(const x of me)if(this.isCallableTool(x)){const L=x;D.push(await L.tool())}else D.push(x);D.length>0&&(e.config.tools=D);const M={model:fe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?se=IM(this.apiClient,M):se=Jb(this.apiClient,M),delete se.config,ne.send(JSON.stringify(se)),new TD(ne,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const _D={turnComplete:!0};class TD{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=di(n.turns),e.isVertexAI()?i=i.map(r=>Ga(r)):i=i.map(r=>Qf(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(gD)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},_D),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:bM(e)}:n={realtimeInput:Wb(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function ED(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function SD(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o0=10;function r0(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ia(c)){r=!0;break}if(!r)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ia(t){return"callTool"in t&&typeof t.callTool=="function"}function AD(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Ia(r)))!==null&&i!==void 0?i:!1}function CD(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!Ia(r)))!==null&&i!==void 0?i:!1}function s0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wD extends Cs{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,a,c,h;const m=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!AD(n)||r0(n.config))return await this.generateContentInternal(m);if(CD(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,v;const E=di(m.contents),S=(a=(r=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:o0;let I=0;for(;I<S&&(p=await this.generateContentInternal(m),!(!p.functionCalls||p.functionCalls.length===0));){const b=p.candidates[0].content,O=[];for(const F of(h=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Ia(F)){const ie=await F.callTool(p.functionCalls);O.push(...ie)}I++,v={role:"user",parts:O},m.contents=di(m.contents),m.contents.push(b),m.contents.push(v),s0(m.config)&&(E.push(b),E.push(v))}return s0(m.config)&&(p.automaticFunctionCallingHistory=E),p},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),r0(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let a;const c=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((r=m==null?void 0:m.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=m==null?void 0:m.safetyAttributes:c.push(m);let h;return a?h={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},h}),this.list=async n=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new wu(ys.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const c=await Promise.all(a.map(async m=>Ia(m)?await m.tool():m)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&lS(e.config.tools)){const m=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),uS(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var n,i,r;const a=new Map;for(const c of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ia(c)){const h=c,m=await h.tool();for(const p of(r=m.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,h)}}return a}async processAfcStream(e){var n,i,r;const a=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:o0;let c=!1,h=0;const m=await this.initAfcToolsMap(e);return function(p,v,E){var S,I;return wa(this,arguments,function*(){for(var b,O,F,re;h<a;){c&&(h++,c=!1);const se=yield It(p.processParamsMaybeAddMcpUsage(E)),me=yield It(p.generateContentStreamInternal(se)),D=[],M=[];try{for(var ie=!0,ne=(O=void 0,au(me)),fe;fe=yield It(ne.next()),b=fe.done,!b;ie=!0){re=fe.value,ie=!1;const x=re;if(yield yield It(x),x.candidates&&(!((S=x.candidates[0])===null||S===void 0)&&S.content)){M.push(x.candidates[0].content);for(const L of(I=x.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(h<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(L.functionCall.name)){const k=yield It(v.get(L.functionCall.name).callTool([L.functionCall]));D.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(x){O={error:x}}finally{try{!ie&&!b&&(F=ne.return)&&(yield It(F.call(ne)))}finally{if(O)throw O.error}}if(D.length>0){c=!0;const x=new Zl;x.candidates=[{content:{role:"user",parts:D}}],yield yield It(x);const L=[];L.push(...M),L.push({role:"user",parts:D});const k=di(E.contents).concat(L);E.contents=k}else break}})}(this,m,e)}async generateContentInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=jT(this.apiClient,e);return h=Te("{model}:generateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=t0(v),S=new Zl;return Object.assign(S,E),S})}else{const p=ZT(this.apiClient,e);return h=Te("{model}:generateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=e0(v),S=new Zl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=jT(this.apiClient,e);return h=Te("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(E){return wa(this,arguments,function*(){var S,I,b,O;try{for(var F=!0,re=au(E),ie;ie=yield It(re.next()),S=ie.done,!S;F=!0){O=ie.value,F=!1;const ne=O,fe=t0(yield It(ne.json()));fe.sdkHttpResponse={headers:ne.headers};const se=new Zl;Object.assign(se,fe),yield yield It(se)}}catch(ne){I={error:ne}}finally{try{!F&&!S&&(b=re.return)&&(yield It(b.call(re)))}finally{if(I)throw I.error}}})})}else{const p=ZT(this.apiClient,e);return h=Te("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(E){return wa(this,arguments,function*(){var S,I,b,O;try{for(var F=!0,re=au(E),ie;ie=yield It(re.next()),S=ie.done,!S;F=!0){O=ie.value,F=!1;const ne=O,fe=e0(yield It(ne.json()));fe.sdkHttpResponse={headers:ne.headers};const se=new Zl;Object.assign(se,fe),yield yield It(se)}}catch(ne){I={error:ne}}finally{try{!F&&!S&&(b=re.return)&&(yield It(b.call(re)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=IN(this.apiClient,e);return h=Te("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Vk(v),S=new NT;return Object.assign(S,E),S})}else{const p=B1(this.apiClient,e);return h=Te("{model}:batchEmbedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=fk(v),S=new NT;return Object.assign(S,E),S})}}async generateImagesInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=xN(this.apiClient,e);return h=Te("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Uk(v),S=new kT;return Object.assign(S,E),S})}else{const p=q1(this.apiClient,e);return h=Te("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=pk(v),S=new kT;return Object.assign(S,E),S})}}async editImageInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=VN(this.apiClient,e);return a=Te("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=Ok(m),v=new OI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=UN(this.apiClient,e);return a=Te("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=Bk(m),v=new BI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=qN(this.apiClient,e);return a=Te("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>{const p=Fk(m),v=new FI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=GN(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>$p(v))}else{const p=G1(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>Hp(v))}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=HN(this.apiClient,e);return h=Te("{models_url}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Hk(v),S=new DT;return Object.assign(S,E),S})}else{const p=H1(this.apiClient,e);return h=Te("{models_url}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=gk(v),S=new DT;return Object.assign(S,E),S})}}async update(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=YN(this.apiClient,e);return h=Te("{model}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>$p(v))}else{const p=Y1(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>Hp(v))}}async delete(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=KN(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(()=>{const v=$k(),E=new PT;return Object.assign(E,v),E})}else{const p=K1(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(()=>{const v=yk(),E=new PT;return Object.assign(E,v),E})}}async countTokens(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=QN(this.apiClient,e);return h=Te("{model}:countTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Yk(v),S=new VT;return Object.assign(S,E),S})}else{const p=Q1(this.apiClient,e);return h=Te("{model}:countTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=vk(v),S=new VT;return Object.assign(S,E),S})}}async computeTokens(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=XN(this.apiClient,e);return a=Te("{model}:computeTokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=Kk(m),v=new qI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=jN(this.apiClient,e);return h=Te("{model}:predictLongRunning",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>{const E=Wk(v),S=new xf;return Object.assign(S,E),S})}else{const p=Z1(this.apiClient,e);return h=Te("{model}:predictLongRunning",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>{const E=Sk(v),S=new xf;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ID(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["_url","operationName"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function RD(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["_url","operationName"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function xD(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["operationName"],n);const i=u(t,["resourceName"]);i!=null&&f(e,["_url","resourceName"],i);const r=u(t,["config"]);return r!=null&&f(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bD extends Cs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=RD(e);return h=Te("{operationName}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c}else{const p=ID(e);return h=Te("{operationName}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=xD(e);return a=Te("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MD(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function cS(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],MD(n)),e}function ND(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],cS(i)),e}function kD(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>ND(r))),f(e,["speakerVoiceConfigs"],i)}return e}function DD(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],cS(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],kD(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function PD(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function VD(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function LD(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function UD(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],PD(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],VD(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],LD(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function OD(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>UD(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function BD(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function FD(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function qD(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],FD(n)),e}function GD(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function zD(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],GD(n)),e}function HD(){return{}}function $D(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>BD(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],qD(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],zD(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],HD());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function YD(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function a0(){return{}}function KD(t){const e={},n=u(t,["disabled"]);n!=null&&f(e,["disabled"],n);const i=u(t,["startOfSpeechSensitivity"]);i!=null&&f(e,["startOfSpeechSensitivity"],i);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&f(e,["endOfSpeechSensitivity"],r);const a=u(t,["prefixPaddingMs"]);a!=null&&f(e,["prefixPaddingMs"],a);const c=u(t,["silenceDurationMs"]);return c!=null&&f(e,["silenceDurationMs"],c),e}function JD(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&f(e,["automaticActivityDetection"],KD(n));const i=u(t,["activityHandling"]);i!=null&&f(e,["activityHandling"],i);const r=u(t,["turnCoverage"]);return r!=null&&f(e,["turnCoverage"],r),e}function QD(t){const e={},n=u(t,["targetTokens"]);return n!=null&&f(e,["targetTokens"],n),e}function XD(t){const e={},n=u(t,["triggerTokens"]);n!=null&&f(e,["triggerTokens"],n);const i=u(t,["slidingWindow"]);return i!=null&&f(e,["slidingWindow"],QD(i)),e}function WD(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&f(e,["proactiveAudio"],n),e}function ZD(t,e){const n={},i=u(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=u(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=u(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=u(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const p=u(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=u(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=u(t,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],DD(Im(E)));const S=u(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&f(e,["setup","systemInstruction"],OD(An(I)));const b=u(t,["tools"]);if(e!==void 0&&b!=null){let se=Fa(b);Array.isArray(se)&&(se=se.map(me=>$D(Ba(me)))),f(e,["setup","tools"],se)}const O=u(t,["sessionResumption"]);e!==void 0&&O!=null&&f(e,["setup","sessionResumption"],YD(O));const F=u(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&f(e,["setup","inputAudioTranscription"],a0());const re=u(t,["outputAudioTranscription"]);e!==void 0&&re!=null&&f(e,["setup","outputAudioTranscription"],a0());const ie=u(t,["realtimeInputConfig"]);e!==void 0&&ie!=null&&f(e,["setup","realtimeInputConfig"],JD(ie));const ne=u(t,["contextWindowCompression"]);e!==void 0&&ne!=null&&f(e,["setup","contextWindowCompression"],XD(ne));const fe=u(t,["proactivity"]);return e!==void 0&&fe!=null&&f(e,["setup","proactivity"],WD(fe)),n}function jD(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["setup","model"],dt(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],ZD(r,n)),n}function eP(t,e,n){const i={},r=u(e,["expireTime"]);n!==void 0&&r!=null&&f(n,["expireTime"],r);const a=u(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&f(n,["newSessionExpireTime"],a);const c=u(e,["uses"]);n!==void 0&&c!=null&&f(n,["uses"],c);const h=u(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&f(n,["bidiGenerateContentSetup"],jD(t,h));const m=u(e,["lockAdditionalFields"]);return n!==void 0&&m!=null&&f(n,["fieldMask"],m),i}function tP(t,e){const n={},i=u(e,["config"]);return i!=null&&f(n,["config"],eP(t,i,n)),n}function nP(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iP(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function oP(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=iP(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(p=>c.includes(p)?`generationConfig.${p}`:p));const m=[];a&&m.push(a),h.length>0&&m.push(...h),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class rP extends Cs{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=tP(this.apiClient,e);a=Te("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const m=oP(h,e.config);return r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>nP(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sP(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function aP(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=u(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function lP(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],aP(n,e)),e}function uP(t){const e={},n=u(t,["textInput"]);n!=null&&f(e,["textInput"],n);const i=u(t,["output"]);return i!=null&&f(e,["output"],i),e}function cP(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=u(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>uP(r))),f(e,["examples","examples"],i)}return e}function fP(t,e){const n={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=u(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&f(e,["displayName"],i),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=u(t,["epochCount"]);e!==void 0&&r!=null&&f(e,["tuningTask","hyperparameters","epochCount"],r);const a=u(t,["learningRateMultiplier"]);if(a!=null&&f(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=u(t,["batchSize"]);e!==void 0&&c!=null&&f(e,["tuningTask","hyperparameters","batchSize"],c);const h=u(t,["learningRate"]);return e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","learningRate"],h),n}function dP(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["trainingDataset"]);i!=null&&f(e,["tuningTask","trainingData"],cP(i));const r=u(t,["config"]);return r!=null&&f(e,["config"],fP(r,e)),e}function hP(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function pP(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=u(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function mP(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],pP(n,e)),e}function gP(t,e){const n={},i=u(t,["gcsUri"]);e!==void 0&&i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],i);const r=u(t,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r),u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function yP(t,e){const n={},i=u(t,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);const r=u(t,["vertexDatasetResource"]);return e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r),n}function vP(t,e){const n={},i=u(t,["validationDataset"]);e!==void 0&&i!=null&&f(e,["supervisedTuningSpec"],yP(i,n));const r=u(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&f(e,["tunedModelDisplayName"],r);const a=u(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const c=u(t,["epochCount"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],c);const h=u(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const m=u(t,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],m);const p=u(t,["adapterSize"]);if(e!==void 0&&p!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],p),u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function _P(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["trainingDataset"]);i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],gP(i,e));const r=u(t,["config"]);return r!=null&&f(e,["config"],vP(r,e)),e}function TP(t){const e={},n=u(t,["name"]);n!=null&&f(e,["model"],n);const i=u(t,["name"]);return i!=null&&f(e,["endpoint"],i),e}function fS(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["state"]);r!=null&&f(e,["state"],GE(r));const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["tuningTask","startTime"]);c!=null&&f(e,["startTime"],c);const h=u(t,["tuningTask","completeTime"]);h!=null&&f(e,["endTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["description"]);p!=null&&f(e,["description"],p);const v=u(t,["baseModel"]);v!=null&&f(e,["baseModel"],v);const E=u(t,["_self"]);E!=null&&f(e,["tunedModel"],TP(E));const S=u(t,["distillationSpec"]);S!=null&&f(e,["distillationSpec"],S);const I=u(t,["experiment"]);I!=null&&f(e,["experiment"],I);const b=u(t,["labels"]);b!=null&&f(e,["labels"],b);const O=u(t,["pipelineJob"]);O!=null&&f(e,["pipelineJob"],O);const F=u(t,["satisfiesPzi"]);F!=null&&f(e,["satisfiesPzi"],F);const re=u(t,["satisfiesPzs"]);re!=null&&f(e,["satisfiesPzs"],re);const ie=u(t,["serviceAccount"]);ie!=null&&f(e,["serviceAccount"],ie);const ne=u(t,["tunedModelDisplayName"]);return ne!=null&&f(e,["tunedModelDisplayName"],ne),e}function EP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["tunedModels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>fS(c))),f(e,["tuningJobs"],a)}return e}function SP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const a=u(t,["done"]);a!=null&&f(e,["done"],a);const c=u(t,["error"]);return c!=null&&f(e,["error"],c),e}function AP(t){const e={},n=u(t,["checkpointId"]);n!=null&&f(e,["checkpointId"],n);const i=u(t,["epoch"]);i!=null&&f(e,["epoch"],i);const r=u(t,["step"]);r!=null&&f(e,["step"],r);const a=u(t,["endpoint"]);return a!=null&&f(e,["endpoint"],a),e}function CP(t){const e={},n=u(t,["model"]);n!=null&&f(e,["model"],n);const i=u(t,["endpoint"]);i!=null&&f(e,["endpoint"],i);const r=u(t,["checkpoints"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>AP(c))),f(e,["checkpoints"],a)}return e}function Kp(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["state"]);r!=null&&f(e,["state"],GE(r));const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["startTime"]);c!=null&&f(e,["startTime"],c);const h=u(t,["endTime"]);h!=null&&f(e,["endTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["error"]);p!=null&&f(e,["error"],p);const v=u(t,["description"]);v!=null&&f(e,["description"],v);const E=u(t,["baseModel"]);E!=null&&f(e,["baseModel"],E);const S=u(t,["tunedModel"]);S!=null&&f(e,["tunedModel"],CP(S));const I=u(t,["supervisedTuningSpec"]);I!=null&&f(e,["supervisedTuningSpec"],I);const b=u(t,["tuningDataStats"]);b!=null&&f(e,["tuningDataStats"],b);const O=u(t,["encryptionSpec"]);O!=null&&f(e,["encryptionSpec"],O);const F=u(t,["partnerModelTuningSpec"]);F!=null&&f(e,["partnerModelTuningSpec"],F);const re=u(t,["distillationSpec"]);re!=null&&f(e,["distillationSpec"],re);const ie=u(t,["experiment"]);ie!=null&&f(e,["experiment"],ie);const ne=u(t,["labels"]);ne!=null&&f(e,["labels"],ne);const fe=u(t,["pipelineJob"]);fe!=null&&f(e,["pipelineJob"],fe);const se=u(t,["satisfiesPzi"]);se!=null&&f(e,["satisfiesPzi"],se);const me=u(t,["satisfiesPzs"]);me!=null&&f(e,["satisfiesPzs"],me);const D=u(t,["serviceAccount"]);D!=null&&f(e,["serviceAccount"],D);const M=u(t,["tunedModelDisplayName"]);return M!=null&&f(e,["tunedModelDisplayName"],M),e}function wP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["tuningJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>Kp(c))),f(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IP extends Cs{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new wu(ys.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const i=await this.tuneMldevInternal(n);let r="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?r=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(r=i.name.split("/operations/")[0]),{name:r,state:Up.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=hP(e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>Kp(v))}else{const p=sP(e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>fS(v))}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=mP(e);return h=Te("tuningJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=wP(v),S=new UT;return Object.assign(S,E),S})}else{const p=lP(e);return h=Te("tunedModels",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=EP(v),S=new UT;return Object.assign(S,E),S})}}async tuneInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=_P(e);return a=Te("tuningJobs",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>Kp(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=dP(e);return a=Te("tunedModels",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>SP(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RP{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const xP=1024*1024*8,bP=3,MP=1e3,NP=2,Ap="x-goog-upload-status";async function kP(t,e,n){var i,r,a;let c=0,h=0,m=new Op(new Response),p="upload";for(c=t.size;h<c;){const E=Math.min(xP,c-h),S=t.slice(h,h+E);h+E>=c&&(p+=", finalize");let I=0,b=MP;for(;I<bP&&(m=await n.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(h),"Content-Length":String(E)}}}),!(!((i=m==null?void 0:m.headers)===null||i===void 0)&&i[Ap]));)I++,await PP(b),b=b*NP;if(h+=E,((r=m==null?void 0:m.headers)===null||r===void 0?void 0:r[Ap])!=="active")break;if(c<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(m==null?void 0:m.json());if(((a=m==null?void 0:m.headers)===null||a===void 0?void 0:a[Ap])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function DP(t){return{size:t.size,type:t.type}}function PP(t){return new Promise(e=>setTimeout(e,t))}class VP{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await kP(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await DP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LP{create(e,n,i){return new UP(e,n,i)}}class UP{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const l0="x-goog-api-key";class OP{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(l0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(l0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BP="gl-node/";class FP{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=UI(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new OP(this.apiKey);this.apiClient=new rD({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:BP+"web",uploader:new VP,downloader:new RP}),this.models=new wD(this.apiClient),this.live=new vD(this.apiClient,r,new LP),this.batches=new ax(this.apiClient),this.chats=new fb(this.models,this.apiClient),this.caches=new lb(this.apiClient),this.files=new Cb(this.apiClient),this.operations=new bD(this.apiClient),this.authTokens=new rP(this.apiClient),this.tunings=new IP(this.apiClient)}}let Fn=null;const qP=t=>{if(!t||!t.startsWith("AIza"))return Fn&&(Fn=null),!1;try{return Fn=new FP({apiKey:t}),!0}catch(e){return console.error("Failed to initialize GoogleGenAI with provided key:",e),Fn=null,!1}},sf=()=>!!Fn,GP=async(t,e)=>{var n,i;if(!Fn)throw new Error("Gemini AI SDK not initialized or API key is invalid. Please configure it in settings.");try{const r=await Fn.models.generateContent({model:VE,contents:[{role:"user",parts:[{text:t}]}],config:{systemInstruction:{role:"system",parts:[{text:e}]},temperature:.8,maxOutputTokens:2048,safetySettings:[{category:Ki.HARM_CATEGORY_HARASSMENT,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE},{category:Ki.HARM_CATEGORY_HATE_SPEECH,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE},{category:Ki.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE},{category:Ki.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE}]}}),a=r.text;if(typeof a=="string")return a;{if(console.error("Gemini API response.text was not a string. Full response:",JSON.stringify(r,null,2)),(n=r==null?void 0:r.promptFeedback)!=null&&n.blockReason)throw new Error(`Prompt was blocked. Reason: ${r.promptFeedback.blockReason}${r.promptFeedback.blockReasonMessage?" - "+r.promptFeedback.blockReasonMessage:""}`);const c=(i=r==null?void 0:r.candidates)==null?void 0:i[0];if((c==null?void 0:c.finishReason)==="SAFETY"){const h=c.safetyRatings;let m=h==null?void 0:h.filter(p=>p.probability!=="NEGLIGIBLE"&&p.probability!=="LOW").map(p=>p.category.replace("HARM_CATEGORY_","")).join(", ");throw new Error(`Response blocked by safety filters. Categories: ${m||"Content policy"}.`)}throw(c==null?void 0:c.finishReason)==="OTHER"||(c==null?void 0:c.finishReason)==="RECITATION"||!c?new Error(`Gemini API returned an empty or malformed response. Reason: ${(c==null?void 0:c.finishReason)||"Unknown/No Candidate"}.`):new Error("Gemini API returned an invalid or unexpected text response structure.")}}catch(r){console.error("Error calling Gemini API (non-streaming):",r);const a=r instanceof Error?r.message:String(r);throw a.includes("API key not valid")||a.includes("API_KEY_INVALID")||a.includes("permission_denied")?new Error("The provided Gemini API key is invalid or lacks permissions. Please check it in settings."):r}};async function*u0(t,e,n){var r,a;if(!Fn)throw new Error("Gemini AI SDK not initialized. Please configure it in settings.");const i=[];n&&n.length>0&&i.push(...n),i.push({text:t});try{const c=await Fn.models.generateContentStream({model:VE,contents:[{role:"user",parts:i}],config:{systemInstruction:{role:"system",parts:[{text:e}]},temperature:.8,maxOutputTokens:2048,safetySettings:[{category:Ki.HARM_CATEGORY_HARASSMENT,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE},{category:Ki.HARM_CATEGORY_HATE_SPEECH,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE},{category:Ki.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE},{category:Ki.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE}]}});for await(const h of c){if((r=h==null?void 0:h.promptFeedback)!=null&&r.blockReason)throw new Error(`Stream blocked by Gemini. Reason: ${h.promptFeedback.blockReason}${h.promptFeedback.blockReasonMessage?" - "+h.promptFeedback.blockReasonMessage:""}.`);const m=(a=h==null?void 0:h.candidates)==null?void 0:a[0];if((m==null?void 0:m.finishReason)==="SAFETY"){const p=m.safetyRatings;let v=p==null?void 0:p.filter(E=>E.probability!=="NEGLIGIBLE"&&E.probability!=="LOW").map(E=>E.category.replace("HARM_CATEGORY_","")).join(", ");throw new Error(`Stream ended by Gemini's safety filters. Categories: ${v||"Content policy"}.`)}if(!h.text&&((m==null?void 0:m.finishReason)==="OTHER"||(m==null?void 0:m.finishReason)==="RECITATION"))throw new Error(`Gemini stream ended unexpectedly or provided empty content. Reason: ${m==null?void 0:m.finishReason}.`);yield h}}catch(c){console.error("Error during Gemini API stream:",c);const h=c instanceof Error?c.message:String(c);throw h.includes("API key not valid")||h.includes("API_KEY_INVALID")||h.includes("permission_denied")?new Error("The provided Gemini API key is invalid or lacks permissions. Please check it in settings."):new Error(`Gemini API streaming error: ${h}`)}}const zP=async t=>{if(!Fn)throw new Error("Gemini AI SDK not initialized.");try{return await Fn.models.generateImages({model:"imagen-3.0-generate-002",prompt:t})}catch(e){throw console.error("Error calling Imagen API:",e),e}},HP=async(t,e)=>{if(!Fn)throw new Error("Gemini AI SDK not initialized.");try{let n=await Fn.models.generateVideos({model:"veo-3.0-generate-preview",prompt:t,image:e});for(;!n.done;)await new Promise(i=>setTimeout(i,1e4)),n=await Fn.operations.get(n);return n.response.generatedVideos[0]}catch(n){throw console.error("Error calling Veo API:",n),n}};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YP=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),c0=t=>{const e=YP(t);return e.charAt(0).toUpperCase()+e.slice(1)},dS=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),KP=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=_e.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:c,...h},m)=>_e.createElement("svg",{ref:m,...JP,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:dS("lucide",r),...!a&&!KP(h)&&{"aria-hidden":"true"},...h},[...c.map(([p,v])=>_e.createElement(p,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=(t,e)=>{const n=_e.forwardRef(({className:i,...r},a)=>_e.createElement(QP,{ref:a,iconNode:e,className:dS(`lucide-${$P(c0(t))}`,`lucide-${t}`,i),...r}));return n.displayName=c0(t),n};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],hS=yt("bot",XP);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],pS=yt("camera",WP);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],jP=yt("check",ZP);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],t2=yt("chevron-up",e2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],i2=yt("circle-x",n2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],r2=yt("copy",o2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],a2=yt("download",s2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["path",{d:"M10 11h.01",key:"d2at3l"}],["path",{d:"M14 6h.01",key:"k028ub"}],["path",{d:"M18 6h.01",key:"1v4wsw"}],["path",{d:"M6.5 13.1h.01",key:"1748ia"}],["path",{d:"M22 5c0 9-4 12-6 12s-6-3-6-12c0-2 2-3 6-3s6 1 6 3",key:"172yzv"}],["path",{d:"M17.4 9.9c-.8.8-2 .8-2.8 0",key:"1obv0w"}],["path",{d:"M10.1 7.1C9 7.2 7.7 7.7 6 8.6c-3.5 2-4.7 3.9-3.7 5.6 4.5 7.8 9.5 8.4 11.2 7.4.9-.5 1.9-2.1 1.9-4.7",key:"rqjl8i"}],["path",{d:"M9.1 16.5c.3-1.1 1.4-1.7 2.4-1.4",key:"1mr6wy"}]],mS=yt("drama",l2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],c2=yt("eye",u2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],d2=yt("folder-open",f2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]],p2=yt("image-off",h2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],g2=yt("library",m2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],v2=yt("loader-circle",y2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],gS=yt("moon",_2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],E2=yt("pencil",T2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],A2=yt("plus",S2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],w2=yt("scan-line",C2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],R2=yt("search",I2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],b2=yt("send-horizontal",x2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],yS=yt("settings",M2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],k2=yt("share-2",N2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],vS=yt("sparkles",D2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],_S=yt("sun",P2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],TS=yt("trash-2",V2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],U2=yt("triangle-alert",L2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],B2=yt("user",O2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],q2=yt("video",F2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],ES=yt("volume-2",G2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],SS=yt("volume-x",z2),H2=({theme:t,selectedAI:e,imageStyle:n,apiKeys:i,apiStatus:r,darkMode:a,soundEnabled:c,setSelectedAI:h,setImageStyle:m,updateApiKey:p,toggleDarkMode:v,toggleSound:E,onClose:S})=>N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:S,children:N.jsxs("div",{className:`${t.card} rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col`,onClick:I=>I.stopPropagation(),children:[N.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[N.jsx("h2",{className:"text-xl font-bold",children:"Settings"}),N.jsx("button",{onClick:S,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:"×"})]}),N.jsxs("div",{className:"overflow-y-auto p-6 space-y-6",children:[N.jsxs("section",{children:[N.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Appearance"}),N.jsxs("div",{className:"space-y-3",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("label",{htmlFor:"darkModeToggle",className:"font-medium",children:"Dark Mode"}),N.jsx("button",{onClick:v,id:"darkModeToggle",className:`p-2 rounded-full ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:a?N.jsx(_S,{size:20}):N.jsx(gS,{size:20})})]}),N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("label",{htmlFor:"soundToggle",className:"font-medium",children:"Sound Enabled"}),N.jsx("button",{onClick:E,id:"soundToggle",className:`p-2 rounded-full ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:c?N.jsx(ES,{size:20}):N.jsx(SS,{size:20})})]})]})]}),N.jsxs("section",{children:[N.jsx("h3",{className:"text-lg font-semibold mb-3",children:"AI Model"}),N.jsx("div",{role:"group",className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.entries(Xn).map(([I,b])=>N.jsxs("button",{onClick:()=>h(I),className:`p-3 rounded-lg border text-sm transition-all duration-200 ${e===I?`${b.color} border-current bg-current/10 font-semibold`:`${t.muted} border-gray-300 dark:border-gray-600 hover:border-current hover:bg-gray-500/10`}`,children:[b.icon," ",b.name]},I))})]}),N.jsxs("section",{children:[N.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Image Style (DALL-E)"}),N.jsx("div",{role:"group",className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.entries(NI).map(([I,b])=>N.jsx("button",{onClick:()=>m(I),className:`p-3 rounded-lg border text-sm transition-all duration-200 ${n===I?"text-pink-400 border-pink-400 bg-pink-400/10 font-semibold":`${t.muted} border-gray-300 dark:border-gray-600 hover:border-current hover:text-pink-400 hover:border-pink-400/50 hover:bg-pink-400/10`}`,children:b},I))})]}),N.jsxs("section",{children:[N.jsx("h3",{className:"text-lg font-semibold mb-3",children:"API Keys"}),N.jsxs("div",{className:"space-y-3",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium mb-1",children:"OpenAI API Key"}),N.jsx("input",{type:"password",placeholder:"sk-...",value:i.openai,onChange:I=>p("openai",I.target.value),className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gemini API Key"}),N.jsx("input",{type:"password",placeholder:"AIza...",value:i.gemini,onChange:I=>p("gemini",I.target.value),className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium mb-1",children:"Claude API Key"}),N.jsx("input",{type:"password",placeholder:"sk-ant-...",value:i.claude,onChange:I=>p("claude",I.target.value),className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`})]})]}),N.jsx("p",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:"Your API keys are saved automatically to your browser's local storage. They are never sent to our servers."})]})]})]})});function xm(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Is=xm();function AS(t){Is=t}var lu={exec:()=>null};function ht(t,e=""){let n=typeof t=="string"?t:t.source;const i={replace:(r,a)=>{let c=typeof a=="string"?a:a.source;return c=c.replace(kn.caret,"$1"),n=n.replace(r,c),i},getRegex:()=>new RegExp(n,e)};return i}var kn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},$2=/^(?:[ \t]*(?:\n|$))+/,Y2=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,K2=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Iu=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,J2=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,bm=/(?:[*+-]|\d{1,9}[.)])/,CS=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,wS=ht(CS).replace(/bull/g,bm).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Q2=ht(CS).replace(/bull/g,bm).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Mm=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,X2=/^[^\n]+/,Nm=/(?!\s*\])(?:\\.|[^\[\]\\])+/,W2=ht(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Nm).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Z2=ht(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,bm).getRegex(),Wf="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",km=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,j2=ht("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",km).replace("tag",Wf).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),IS=ht(Mm).replace("hr",Iu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wf).getRegex(),eV=ht(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",IS).getRegex(),Dm={blockquote:eV,code:Y2,def:W2,fences:K2,heading:J2,hr:Iu,html:j2,lheading:wS,list:Z2,newline:$2,paragraph:IS,table:lu,text:X2},f0=ht("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Iu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wf).getRegex(),tV={...Dm,lheading:Q2,table:f0,paragraph:ht(Mm).replace("hr",Iu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",f0).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wf).getRegex()},nV={...Dm,html:ht(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",km).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:lu,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ht(Mm).replace("hr",Iu).replace("heading",` *#{1,6} *[^
]`).replace("lheading",wS).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},iV=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,oV=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,RS=/^( {2,}|\\)\n(?!\s*$)/,rV=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Zf=/[\p{P}\p{S}]/u,Pm=/[\s\p{P}\p{S}]/u,xS=/[^\s\p{P}\p{S}]/u,sV=ht(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Pm).getRegex(),bS=/(?!~)[\p{P}\p{S}]/u,aV=/(?!~)[\s\p{P}\p{S}]/u,lV=/(?:[^\s\p{P}\p{S}]|~)/u,uV=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,MS=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,cV=ht(MS,"u").replace(/punct/g,Zf).getRegex(),fV=ht(MS,"u").replace(/punct/g,bS).getRegex(),NS="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",dV=ht(NS,"gu").replace(/notPunctSpace/g,xS).replace(/punctSpace/g,Pm).replace(/punct/g,Zf).getRegex(),hV=ht(NS,"gu").replace(/notPunctSpace/g,lV).replace(/punctSpace/g,aV).replace(/punct/g,bS).getRegex(),pV=ht("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,xS).replace(/punctSpace/g,Pm).replace(/punct/g,Zf).getRegex(),mV=ht(/\\(punct)/,"gu").replace(/punct/g,Zf).getRegex(),gV=ht(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),yV=ht(km).replace("(?:-->|$)","-->").getRegex(),vV=ht("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",yV).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Mf=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,_V=ht(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Mf).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),kS=ht(/^!?\[(label)\]\[(ref)\]/).replace("label",Mf).replace("ref",Nm).getRegex(),DS=ht(/^!?\[(ref)\](?:\[\])?/).replace("ref",Nm).getRegex(),TV=ht("reflink|nolink(?!\\()","g").replace("reflink",kS).replace("nolink",DS).getRegex(),Vm={_backpedal:lu,anyPunctuation:mV,autolink:gV,blockSkip:uV,br:RS,code:oV,del:lu,emStrongLDelim:cV,emStrongRDelimAst:dV,emStrongRDelimUnd:pV,escape:iV,link:_V,nolink:DS,punctuation:sV,reflink:kS,reflinkSearch:TV,tag:vV,text:rV,url:lu},EV={...Vm,link:ht(/^!?\[(label)\]\((.*?)\)/).replace("label",Mf).getRegex(),reflink:ht(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Mf).getRegex()},Jp={...Vm,emStrongRDelimAst:hV,emStrongLDelim:fV,url:ht(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},SV={...Jp,br:ht(RS).replace("{2,}","*").getRegex(),text:ht(Jp.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},af={normal:Dm,gfm:tV,pedantic:nV},jl={normal:Vm,gfm:Jp,breaks:SV,pedantic:EV},AV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},d0=t=>AV[t];function $i(t,e){if(e){if(kn.escapeTest.test(t))return t.replace(kn.escapeReplace,d0)}else if(kn.escapeTestNoEncode.test(t))return t.replace(kn.escapeReplaceNoEncode,d0);return t}function h0(t){try{t=encodeURI(t).replace(kn.percentDecode,"%")}catch{return null}return t}function p0(t,e){var a;const n=t.replace(kn.findPipe,(c,h,m)=>{let p=!1,v=h;for(;--v>=0&&m[v]==="\\";)p=!p;return p?"|":" |"}),i=n.split(kn.splitPipe);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!((a=i.at(-1))!=null&&a.trim())&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(kn.slashPipe,"|");return i}function eu(t,e,n){const i=t.length;if(i===0)return"";let r=0;for(;r<i&&t.charAt(i-r-1)===e;)r++;return t.slice(0,i-r)}function CV(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let i=0;i<t.length;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return n>0?-2:-1}function m0(t,e,n,i,r){const a=e.href,c=e.title||null,h=t[1].replace(r.other.outputLinkReplace,"$1");i.state.inLink=!0;const m={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:a,title:c,text:h,tokens:i.inlineTokens(h)};return i.state.inLink=!1,m}function wV(t,e,n){const i=t.match(n.other.indentCodeCompensation);if(i===null)return e;const r=i[1];return e.split(`
`).map(a=>{const c=a.match(n.other.beginningSpace);if(c===null)return a;const[h]=c;return h.length>=r.length?a.slice(r.length):a}).join(`
`)}var Nf=class{constructor(t){Ct(this,"options");Ct(this,"rules");Ct(this,"lexer");this.options=t||Is}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:eu(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],i=wV(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){const i=eu(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:eu(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=eu(e[0],`
`).split(`
`),i="",r="";const a=[];for(;n.length>0;){let c=!1;const h=[];let m;for(m=0;m<n.length;m++)if(this.rules.other.blockquoteStart.test(n[m]))h.push(n[m]),c=!0;else if(!c)h.push(n[m]);else break;n=n.slice(m);const p=h.join(`
`),v=p.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${p}`:p,r=r?`${r}
${v}`:v;const E=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(v,a,!0),this.lexer.state.top=E,n.length===0)break;const S=a.at(-1);if((S==null?void 0:S.type)==="code")break;if((S==null?void 0:S.type)==="blockquote"){const I=S,b=I.raw+`
`+n.join(`
`),O=this.blockquote(b);a[a.length-1]=O,i=i.substring(0,i.length-I.raw.length)+O.raw,r=r.substring(0,r.length-I.text.length)+O.text;break}else if((S==null?void 0:S.type)==="list"){const I=S,b=I.raw+`
`+n.join(`
`),O=this.list(b);a[a.length-1]=O,i=i.substring(0,i.length-S.raw.length)+O.raw,r=r.substring(0,r.length-I.raw.length)+O.raw,n=b.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:a,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const i=n.length>1,r={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const a=this.rules.other.listItemRegex(n);let c=!1;for(;t;){let m=!1,p="",v="";if(!(e=a.exec(t))||this.rules.block.hr.test(t))break;p=e[0],t=t.substring(p.length);let E=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,re=>" ".repeat(3*re.length)),S=t.split(`
`,1)[0],I=!E.trim(),b=0;if(this.options.pedantic?(b=2,v=E.trimStart()):I?b=e[1].length+1:(b=e[2].search(this.rules.other.nonSpaceChar),b=b>4?1:b,v=E.slice(b),b+=e[1].length),I&&this.rules.other.blankLine.test(S)&&(p+=S+`
`,t=t.substring(S.length+1),m=!0),!m){const re=this.rules.other.nextBulletRegex(b),ie=this.rules.other.hrRegex(b),ne=this.rules.other.fencesBeginRegex(b),fe=this.rules.other.headingBeginRegex(b),se=this.rules.other.htmlBeginRegex(b);for(;t;){const me=t.split(`
`,1)[0];let D;if(S=me,this.options.pedantic?(S=S.replace(this.rules.other.listReplaceNesting,"  "),D=S):D=S.replace(this.rules.other.tabCharGlobal,"    "),ne.test(S)||fe.test(S)||se.test(S)||re.test(S)||ie.test(S))break;if(D.search(this.rules.other.nonSpaceChar)>=b||!S.trim())v+=`
`+D.slice(b);else{if(I||E.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||ne.test(E)||fe.test(E)||ie.test(E))break;v+=`
`+S}!I&&!S.trim()&&(I=!0),p+=me+`
`,t=t.substring(me.length+1),E=D.slice(b)}}r.loose||(c?r.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(c=!0));let O=null,F;this.options.gfm&&(O=this.rules.other.listIsTask.exec(v),O&&(F=O[0]!=="[ ] ",v=v.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:p,task:!!O,checked:F,loose:!1,text:v,tokens:[]}),r.raw+=p}const h=r.items.at(-1);if(h)h.raw=h.raw.trimEnd(),h.text=h.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let m=0;m<r.items.length;m++)if(this.lexer.state.top=!1,r.items[m].tokens=this.lexer.blockTokens(r.items[m].text,[]),!r.loose){const p=r.items[m].tokens.filter(E=>E.type==="space"),v=p.length>0&&p.some(E=>this.rules.other.anyLine.test(E.raw));r.loose=v}if(r.loose)for(let m=0;m<r.items.length;m++)r.items[m].loose=!0;return r}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:i,title:r}}}table(t){var c;const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const n=p0(e[1]),i=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(c=e[3])!=null&&c.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===i.length){for(const h of i)this.rules.other.tableAlignRight.test(h)?a.align.push("right"):this.rules.other.tableAlignCenter.test(h)?a.align.push("center"):this.rules.other.tableAlignLeft.test(h)?a.align.push("left"):a.align.push(null);for(let h=0;h<n.length;h++)a.header.push({text:n[h],tokens:this.lexer.inline(n[h]),header:!0,align:a.align[h]});for(const h of r)a.rows.push(p0(h,a.header.length).map((m,p)=>({text:m,tokens:this.lexer.inline(m),header:!1,align:a.align[p]})));return a}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const a=eu(n.slice(0,-1),"\\");if((n.length-a.length)%2===0)return}else{const a=CV(e[2],"()");if(a===-2)return;if(a>-1){const h=(e[0].indexOf("!")===0?5:4)+e[1].length+a;e[2]=e[2].substring(0,a),e[0]=e[0].substring(0,h).trim(),e[3]=""}}let i=e[2],r="";if(this.options.pedantic){const a=this.rules.other.pedanticHrefTitle.exec(i);a&&(i=a[1],r=a[3])}else r=e[3]?e[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),m0(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[i.toLowerCase()];if(!r){const a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return m0(n,r,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const a=[...i[0]].length-1;let c,h,m=a,p=0;const v=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(v.lastIndex=0,e=e.slice(-1*t.length+a);(i=v.exec(e))!=null;){if(c=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!c)continue;if(h=[...c].length,i[3]||i[4]){m+=h;continue}else if((i[5]||i[6])&&a%3&&!((a+h)%3)){p+=h;continue}if(m-=h,m>0)continue;h=Math.min(h,h+m+p);const E=[...i[0]][0].length,S=t.slice(0,a+i.index+E+h);if(Math.min(a,h)%2){const b=S.slice(1,-1);return{type:"em",raw:S,text:b,tokens:this.lexer.inlineTokens(b)}}const I=S.slice(2,-2);return{type:"strong",raw:S,text:I,tokens:this.lexer.inlineTokens(I)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(n),r=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&r&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,i;return e[2]==="@"?(n=e[1],i="mailto:"+n):(n=e[1],i=n),{type:"link",raw:e[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let e;if(e=this.rules.inline.url.exec(t)){let i,r;if(e[2]==="@")i=e[0],r="mailto:"+i;else{let a;do a=e[0],e[0]=((n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])??"";while(a!==e[0]);i=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},No=class Qp{constructor(e){Ct(this,"tokens");Ct(this,"options");Ct(this,"state");Ct(this,"tokenizer");Ct(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Is,this.options.tokenizer=this.options.tokenizer||new Nf,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:kn,block:af.normal,inline:jl.normal};this.options.pedantic?(n.block=af.pedantic,n.inline=jl.pedantic):this.options.gfm&&(n.block=af.gfm,this.options.breaks?n.inline=jl.breaks:n.inline=jl.gfm),this.tokenizer.rules=n}static get rules(){return{block:af,inline:jl}}static lex(e,n){return new Qp(n).lex(e)}static lexInline(e,n){return new Qp(n).inlineTokens(e)}lex(e){e=e.replace(kn.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],i=!1){var r,a,c;for(this.options.pedantic&&(e=e.replace(kn.tabCharGlobal,"    ").replace(kn.spaceLine,""));e;){let h;if((a=(r=this.options.extensions)==null?void 0:r.block)!=null&&a.some(p=>(h=p.call({lexer:this},e,n))?(e=e.substring(h.raw.length),n.push(h),!0):!1))continue;if(h=this.tokenizer.space(e)){e=e.substring(h.raw.length);const p=n.at(-1);h.raw.length===1&&p!==void 0?p.raw+=`
`:n.push(h);continue}if(h=this.tokenizer.code(e)){e=e.substring(h.raw.length);const p=n.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=`
`+h.raw,p.text+=`
`+h.text,this.inlineQueue.at(-1).src=p.text):n.push(h);continue}if(h=this.tokenizer.fences(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.heading(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.hr(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.blockquote(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.list(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.html(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.def(e)){e=e.substring(h.raw.length);const p=n.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=`
`+h.raw,p.text+=`
`+h.raw,this.inlineQueue.at(-1).src=p.text):this.tokens.links[h.tag]||(this.tokens.links[h.tag]={href:h.href,title:h.title});continue}if(h=this.tokenizer.table(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.lheading(e)){e=e.substring(h.raw.length),n.push(h);continue}let m=e;if((c=this.options.extensions)!=null&&c.startBlock){let p=1/0;const v=e.slice(1);let E;this.options.extensions.startBlock.forEach(S=>{E=S.call({lexer:this},v),typeof E=="number"&&E>=0&&(p=Math.min(p,E))}),p<1/0&&p>=0&&(m=e.substring(0,p+1))}if(this.state.top&&(h=this.tokenizer.paragraph(m))){const p=n.at(-1);i&&(p==null?void 0:p.type)==="paragraph"?(p.raw+=`
`+h.raw,p.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):n.push(h),i=m.length!==e.length,e=e.substring(h.raw.length);continue}if(h=this.tokenizer.text(e)){e=e.substring(h.raw.length);const p=n.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=`
`+h.raw,p.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):n.push(h);continue}if(e){const p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var h,m,p;let i=e,r=null;if(this.tokens.links){const v=Object.keys(this.tokens.links);if(v.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)v.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,r.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let a=!1,c="";for(;e;){a||(c=""),a=!1;let v;if((m=(h=this.options.extensions)==null?void 0:h.inline)!=null&&m.some(S=>(v=S.call({lexer:this},e,n))?(e=e.substring(v.raw.length),n.push(v),!0):!1))continue;if(v=this.tokenizer.escape(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.tag(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.link(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(v.raw.length);const S=n.at(-1);v.type==="text"&&(S==null?void 0:S.type)==="text"?(S.raw+=v.raw,S.text+=v.text):n.push(v);continue}if(v=this.tokenizer.emStrong(e,i,c)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.codespan(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.br(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.del(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.autolink(e)){e=e.substring(v.raw.length),n.push(v);continue}if(!this.state.inLink&&(v=this.tokenizer.url(e))){e=e.substring(v.raw.length),n.push(v);continue}let E=e;if((p=this.options.extensions)!=null&&p.startInline){let S=1/0;const I=e.slice(1);let b;this.options.extensions.startInline.forEach(O=>{b=O.call({lexer:this},I),typeof b=="number"&&b>=0&&(S=Math.min(S,b))}),S<1/0&&S>=0&&(E=e.substring(0,S+1))}if(v=this.tokenizer.inlineText(E)){e=e.substring(v.raw.length),v.raw.slice(-1)!=="_"&&(c=v.raw.slice(-1)),a=!0;const S=n.at(-1);(S==null?void 0:S.type)==="text"?(S.raw+=v.raw,S.text+=v.text):n.push(v);continue}if(e){const S="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(S);break}else throw new Error(S)}}return n}},kf=class{constructor(t){Ct(this,"options");Ct(this,"parser");this.options=t||Is}space(t){return""}code({text:t,lang:e,escaped:n}){var a;const i=(a=(e||"").match(kn.notSpaceStart))==null?void 0:a[0],r=t.replace(kn.endingNewline,"")+`
`;return i?'<pre><code class="language-'+$i(i)+'">'+(n?r:$i(r,!0))+`</code></pre>
`:"<pre><code>"+(n?r:$i(r,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,n=t.start;let i="";for(let c=0;c<t.items.length;c++){const h=t.items[c];i+=this.listitem(h)}const r=e?"ol":"ul",a=e&&n!==1?' start="'+n+'"':"";return"<"+r+a+`>
`+i+"</"+r+`>
`}listitem(t){var n;let e="";if(t.task){const i=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=i+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=i+" "+$i(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):e+=i+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let r=0;r<t.header.length;r++)n+=this.tablecell(t.header[r]);e+=this.tablerow({text:n});let i="";for(let r=0;r<t.rows.length;r++){const a=t.rows[r];n="";for(let c=0;c<a.length;c++)n+=this.tablecell(a[c]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+i+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${$i(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const i=this.parser.parseInline(n),r=h0(t);if(r===null)return i;t=r;let a='<a href="'+t+'"';return e&&(a+=' title="'+$i(e)+'"'),a+=">"+i+"</a>",a}image({href:t,title:e,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));const r=h0(t);if(r===null)return $i(n);t=r;let a=`<img src="${t}" alt="${n}"`;return e&&(a+=` title="${$i(e)}"`),a+=">",a}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:$i(t.text)}},Lm=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},ko=class Xp{constructor(e){Ct(this,"options");Ct(this,"renderer");Ct(this,"textRenderer");this.options=e||Is,this.options.renderer=this.options.renderer||new kf,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Lm}static parse(e,n){return new Xp(n).parse(e)}static parseInline(e,n){return new Xp(n).parseInline(e)}parse(e,n=!0){var r,a;let i="";for(let c=0;c<e.length;c++){const h=e[c];if((a=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&a[h.type]){const p=h,v=this.options.extensions.renderers[p.type].call({parser:this},p);if(v!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(p.type)){i+=v||"";continue}}const m=h;switch(m.type){case"space":{i+=this.renderer.space(m);continue}case"hr":{i+=this.renderer.hr(m);continue}case"heading":{i+=this.renderer.heading(m);continue}case"code":{i+=this.renderer.code(m);continue}case"table":{i+=this.renderer.table(m);continue}case"blockquote":{i+=this.renderer.blockquote(m);continue}case"list":{i+=this.renderer.list(m);continue}case"html":{i+=this.renderer.html(m);continue}case"paragraph":{i+=this.renderer.paragraph(m);continue}case"text":{let p=m,v=this.renderer.text(p);for(;c+1<e.length&&e[c+1].type==="text";)p=e[++c],v+=`
`+this.renderer.text(p);n?i+=this.renderer.paragraph({type:"paragraph",raw:v,text:v,tokens:[{type:"text",raw:v,text:v,escaped:!0}]}):i+=v;continue}default:{const p='Token with "'+m.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return i}parseInline(e,n=this.renderer){var r,a;let i="";for(let c=0;c<e.length;c++){const h=e[c];if((a=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&a[h.type]){const p=this.options.extensions.renderers[h.type].call({parser:this},h);if(p!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(h.type)){i+=p||"";continue}}const m=h;switch(m.type){case"escape":{i+=n.text(m);break}case"html":{i+=n.html(m);break}case"link":{i+=n.link(m);break}case"image":{i+=n.image(m);break}case"strong":{i+=n.strong(m);break}case"em":{i+=n.em(m);break}case"codespan":{i+=n.codespan(m);break}case"br":{i+=n.br(m);break}case"del":{i+=n.del(m);break}case"text":{i+=n.text(m);break}default:{const p='Token with "'+m.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return i}},Vp,yf=(Vp=class{constructor(t){Ct(this,"options");Ct(this,"block");this.options=t||Is}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?No.lex:No.lexInline}provideParser(){return this.block?ko.parse:ko.parseInline}},Ct(Vp,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),Vp),IV=class{constructor(...t){Ct(this,"defaults",xm());Ct(this,"options",this.setOptions);Ct(this,"parse",this.parseMarkdown(!0));Ct(this,"parseInline",this.parseMarkdown(!1));Ct(this,"Parser",ko);Ct(this,"Renderer",kf);Ct(this,"TextRenderer",Lm);Ct(this,"Lexer",No);Ct(this,"Tokenizer",Nf);Ct(this,"Hooks",yf);this.use(...t)}walkTokens(t,e){var i,r;let n=[];for(const a of t)switch(n=n.concat(e.call(this,a)),a.type){case"table":{const c=a;for(const h of c.header)n=n.concat(this.walkTokens(h.tokens,e));for(const h of c.rows)for(const m of h)n=n.concat(this.walkTokens(m.tokens,e));break}case"list":{const c=a;n=n.concat(this.walkTokens(c.items,e));break}default:{const c=a;(r=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&r[c.type]?this.defaults.extensions.childTokens[c.type].forEach(h=>{const m=c[h].flat(1/0);n=n.concat(this.walkTokens(m,e))}):c.tokens&&(n=n.concat(this.walkTokens(c.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const a=e.renderers[r.name];a?e.renderers[r.name]=function(...c){let h=r.renderer.apply(this,c);return h===!1&&(h=a.apply(this,c)),h}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=e[r.level];a?a.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),n.renderer){const r=this.defaults.renderer||new kf(this.defaults);for(const a in n.renderer){if(!(a in r))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;const c=a,h=n.renderer[c],m=r[c];r[c]=(...p)=>{let v=h.apply(r,p);return v===!1&&(v=m.apply(r,p)),v||""}}i.renderer=r}if(n.tokenizer){const r=this.defaults.tokenizer||new Nf(this.defaults);for(const a in n.tokenizer){if(!(a in r))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const c=a,h=n.tokenizer[c],m=r[c];r[c]=(...p)=>{let v=h.apply(r,p);return v===!1&&(v=m.apply(r,p)),v}}i.tokenizer=r}if(n.hooks){const r=this.defaults.hooks||new yf;for(const a in n.hooks){if(!(a in r))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;const c=a,h=n.hooks[c],m=r[c];yf.passThroughHooks.has(a)?r[c]=p=>{if(this.defaults.async)return Promise.resolve(h.call(r,p)).then(E=>m.call(r,E));const v=h.call(r,p);return m.call(r,v)}:r[c]=(...p)=>{let v=h.apply(r,p);return v===!1&&(v=m.apply(r,p)),v}}i.hooks=r}if(n.walkTokens){const r=this.defaults.walkTokens,a=n.walkTokens;i.walkTokens=function(c){let h=[];return h.push(a.call(this,c)),r&&(h=h.concat(r.call(this,c))),h}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return No.lex(t,e??this.defaults)}parser(t,e){return ko.parse(t,e??this.defaults)}parseMarkdown(t){return(n,i)=>{const r={...i},a={...this.defaults,...r},c=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&r.async===!1)return c(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return c(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));a.hooks&&(a.hooks.options=a,a.hooks.block=t);const h=a.hooks?a.hooks.provideLexer():t?No.lex:No.lexInline,m=a.hooks?a.hooks.provideParser():t?ko.parse:ko.parseInline;if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(n):n).then(p=>h(p,a)).then(p=>a.hooks?a.hooks.processAllTokens(p):p).then(p=>a.walkTokens?Promise.all(this.walkTokens(p,a.walkTokens)).then(()=>p):p).then(p=>m(p,a)).then(p=>a.hooks?a.hooks.postprocess(p):p).catch(c);try{a.hooks&&(n=a.hooks.preprocess(n));let p=h(n,a);a.hooks&&(p=a.hooks.processAllTokens(p)),a.walkTokens&&this.walkTokens(p,a.walkTokens);let v=m(p,a);return a.hooks&&(v=a.hooks.postprocess(v)),v}catch(p){return c(p)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const i="<p>An error occurred:</p><pre>"+$i(n.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(n);throw n}}},vs=new IV;function ft(t,e){return vs.parse(t,e)}ft.options=ft.setOptions=function(t){return vs.setOptions(t),ft.defaults=vs.defaults,AS(ft.defaults),ft};ft.getDefaults=xm;ft.defaults=Is;ft.use=function(...t){return vs.use(...t),ft.defaults=vs.defaults,AS(ft.defaults),ft};ft.walkTokens=function(t,e){return vs.walkTokens(t,e)};ft.parseInline=vs.parseInline;ft.Parser=ko;ft.parser=ko.parse;ft.Renderer=kf;ft.TextRenderer=Lm;ft.Lexer=No;ft.lexer=No.lex;ft.Tokenizer=Nf;ft.Hooks=yf;ft.parse=ft;ft.options;ft.setOptions;ft.use;ft.walkTokens;ft.parseInline;ko.parse;No.lex;const RV=({theme:t,onPromptClick:e})=>{const n=["What's the best place to get suya in Lekki?","Paint a picture of a futuristic Lagos with flying danfo buses.","Tell me a story about the Eyo festival, but in the style of a wise Igbo elder.","Plan a 3-day tourist itinerary for someone visiting Lagos for the first time."];return N.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[N.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-cyan-500 to-purple-500 rounded-full flex items-center justify-center shadow-lg mb-4",children:N.jsx(vS,{className:"w-10 h-10 text-white"})}),N.jsx("h1",{className:`text-3xl font-bold ${t.text} mb-2`,children:"Lagos Oracle"}),N.jsx("p",{className:`${t.muted} mb-8`,children:"Your AI companion for all things Lagos and beyond."}),N.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-w-2xl w-full",children:n.map((i,r)=>N.jsxs("button",{onClick:()=>e(i),className:`p-4 rounded-lg text-left transition-all duration-200
                        ${t.card} border dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-700/50
                        flex items-start space-x-3`,children:[N.jsx(hS,{className:`w-5 h-5 mt-1 ${t.secondaryAccent} shrink-0`}),N.jsx("span",{className:`text-sm ${t.text}`,children:i})]},r))})]})};ft.setOptions({breaks:!0,gfm:!0});const Wp=({persona:t,isUser:e,isError:n})=>{var a;const i="w-8 h-8 rounded-full flex items-center justify-center shrink-0 text-white";if(e)return N.jsx("div",{className:`${i} bg-blue-500`,children:N.jsx(B2,{className:"w-5 h-5"})});if(n)return N.jsx("div",{className:`${i} bg-red-500`,children:N.jsx(U2,{className:"w-5 h-5"})});if((a=t==null?void 0:t.icon)!=null&&a.startsWith("http"))return N.jsx("img",{src:t.icon,alt:t.name,className:"w-8 h-8 rounded-full object-cover"});const r=t!=null&&t.color?t.color.replace("text-","bg-").replace("-400","-500"):"bg-indigo-500";return N.jsx("div",{className:`${i} ${r}`,children:t!=null&&t.icon&&!t.icon.startsWith("http")?N.jsx("span",{className:"text-xl",children:t.icon}):N.jsx(hS,{className:"w-5 h-5"})})},xV=({message:t,theme:e,personas:n})=>{const[i,r]=_e.useState(!1),a=ft.parse(typeof t.content=="string"?t.content:"*Error: Invalid message content*"),c=()=>{typeof t.content=="string"&&navigator.clipboard.writeText(t.content).then(()=>{r(!0),setTimeout(()=>r(!1),2e3)}).catch(E=>console.error("Failed to copy text: ",E))},h=t.mood==="error",m=t.personaKey?n[t.personaKey]:void 0,p="group flex items-start gap-3 my-4 relative",v="relative rounded-xl px-4 py-3 shadow-md max-w-2xl";return t.type==="user"?N.jsxs("div",{className:`${p} justify-end`,children:[N.jsx("div",{className:`${v} bg-blue-600 text-white`,children:N.jsx("div",{className:"prose prose-sm max-w-none prose-invert prose-p:my-1",dangerouslySetInnerHTML:{__html:a}})}),N.jsx(Wp,{isUser:!0})]}):N.jsxs("div",{className:p,children:[N.jsx(Wp,{persona:m,isError:h}),N.jsxs("div",{className:"flex flex-col",children:[N.jsxs("div",{className:`${v} ${h?"bg-red-100 dark:bg-red-900/40":e.card}`,children:[t.model&&N.jsx("div",{className:`text-xs mb-1.5 font-semibold ${h?"text-red-600 dark:text-red-300":e.muted}`,children:t.model}),N.jsx("div",{className:`prose prose-sm max-w-none ${e.text}`,dangerouslySetInnerHTML:{__html:a}}),t.media&&N.jsxs("div",{className:"mt-3",children:[t.media.imageUrl&&N.jsx("img",{src:t.media.imageUrl,alt:"Generated by AI",className:"rounded-lg max-w-xs md:max-w-sm h-auto shadow-lg border dark:border-gray-600"}),t.media.videoUrl&&N.jsx("video",{src:t.media.videoUrl,controls:!0,className:"rounded-lg max-w-xs md:max-w-sm h-auto shadow-lg border dark:border-gray-600"}),!t.media.success&&N.jsxs("div",{className:"p-3 rounded-lg border-2 border-dashed border-gray-300 bg-gray-100/50 text-gray-500 dark:border-gray-600 dark:bg-gray-700/30 dark:text-gray-400 flex flex-col items-center justify-center max-w-xs md:max-w-sm",children:[t.media.videoUrl?N.jsx(q2,{className:"w-10 h-10 mb-2 opacity-70"}):N.jsx(p2,{className:"w-10 h-10 mb-2 opacity-70"}),N.jsx("p",{className:"text-sm font-semibold",children:"Media Generation Failed"}),N.jsx("p",{className:"text-xs text-center",children:t.media.model||"Could not generate media."})]})]})]}),N.jsxs("div",{className:"flex items-center justify-start mt-1.5 space-x-3",children:[N.jsx("span",{className:`text-xs ${e.muted}`,children:t.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),typeof t.content=="string"&&t.content.trim()!==""&&N.jsx("button",{onClick:c,title:i?"Copied!":"Copy message",className:"p-1 rounded-full transition-all duration-200 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-700 opacity-0 group-hover:opacity-100",children:i?N.jsx(jP,{className:"w-3.5 h-3.5"}):N.jsx(r2,{className:"w-3.5 h-3.5"})})]})]})]})},bV=({messages:t,isTyping:e,theme:n,personas:i,onPromptClick:r})=>{const a=_e.useRef(null);return _e.useEffect(()=>{var c;(c=a.current)==null||c.scrollIntoView({behavior:"smooth"})},[t,e]),N.jsx("div",{className:"flex-1 overflow-y-auto",children:N.jsxs("div",{className:"max-w-3xl mx-auto p-4",children:[t.length===0&&!e?N.jsx(RV,{theme:n,onPromptClick:r}):t.map(c=>N.jsx(xV,{message:c,theme:n,personas:i},c.id)),e&&N.jsxs("div",{className:"flex items-start gap-3 my-4",children:[N.jsx(Wp,{persona:{name:"Oracle",icon:"🤖",description:"",systemPromptModifier:"",color:"bg-indigo-500"}}),N.jsx("div",{className:`rounded-xl px-4 py-3 shadow-md ${n.card}`,children:N.jsxs("div",{className:"flex items-center space-x-1",children:[N.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0s"}}),N.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),N.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})})]}),N.jsx("div",{ref:a})]})})},MV=({theme:t,selectedAI:e,onSelectAI:n,onClose:i})=>N.jsx("div",{className:"absolute bottom-full mb-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border dark:border-gray-700",children:N.jsxs("div",{className:"p-2",children:[N.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 px-2 mb-1",children:"Choose a model"}),Object.entries(Xn).map(([r,a])=>N.jsxs("button",{onClick:()=>{n(r),i()},className:`w-full flex items-center gap-2 p-2 rounded-md text-sm text-left
                        ${e===r?`font-semibold ${a.color}`:`${t.text} hover:bg-gray-100 dark:hover:bg-gray-700`}`,children:[N.jsx("span",{className:"text-lg",children:a.icon}),N.jsx("span",{children:a.name})]},r))]})}),NV=({input:t,isTyping:e,isListening:n,recognitionAvailable:i,theme:r,selectedAI:a,setInput:c,handleSend:h,startListening:m,setSelectedAI:p})=>{const v=_e.useRef(null),[E,S]=_e.useState(!1);_e.useEffect(()=>{v.current&&(v.current.style.height="auto",v.current.style.height=`${v.current.scrollHeight}px`)},[t]);const I=()=>{t.trim()&&!e&&h()},b=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),I())};return N.jsx("div",{className:"bg-transparent px-4 pb-4 sticky bottom-0",children:N.jsx("div",{className:"max-w-3xl mx-auto",children:N.jsxs("div",{className:"relative",children:[E&&N.jsx(MV,{theme:r,selectedAI:a,onSelectAI:p,onClose:()=>S(!1)}),N.jsxs("div",{className:`relative flex items-center ${r.card} border dark:border-gray-600 rounded-2xl shadow-lg`,children:[N.jsxs("button",{onClick:()=>S(O=>!O),className:"p-3 rounded-full transition-all duration-200 flex items-center gap-1 hover:bg-gray-200 dark:hover:bg-gray-700",children:[N.jsx("span",{className:"text-lg",children:Xn[a].icon}),N.jsx(t2,{size:16,className:`transition-transform duration-200 ${E?"rotate-0":"rotate-180"}`})]}),N.jsx("textarea",{ref:v,value:t,onChange:O=>c(O.target.value),onKeyDown:b,placeholder:`Ask ${Xn[a].name}...`,className:`w-full max-h-48 bg-transparent p-3 resize-none border-none focus:ring-0 ${r.text} placeholder-gray-500 dark:placeholder-gray-400`,rows:1,disabled:e}),N.jsx("button",{onClick:I,disabled:!t.trim()||e,title:"Send Message",className:`p-3 mr-2 rounded-full transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed
                         text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-500`,children:N.jsx(b2,{className:"w-5 h-5"})})]})]})})})};var g0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},kV=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=t[n++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=t[n++],c=t[n++],h=t[n++],m=((r&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const a=t[n++],c=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return e.join("")},VS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const a=t[r],c=r+1<t.length,h=c?t[r+1]:0,m=r+2<t.length,p=m?t[r+2]:0,v=a>>2,E=(a&3)<<4|h>>4;let S=(h&15)<<2|p>>6,I=p&63;m||(I=64,c||(S=64)),i.push(n[v],n[E],n[S],n[I])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const a=n[t.charAt(r++)],h=r<t.length?n[t.charAt(r)]:0;++r;const p=r<t.length?n[t.charAt(r)]:64;++r;const E=r<t.length?n[t.charAt(r)]:64;if(++r,a==null||h==null||p==null||E==null)throw new DV;const S=a<<2|h>>4;if(i.push(S),p!==64){const I=h<<4&240|p>>2;if(i.push(I),E!==64){const b=p<<6&192|E;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PV=function(t){const e=PS(t);return VS.encodeByteArray(e,!0)},Df=function(t){return PV(t).replace(/\./g,"")},LS=function(t){try{return VS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV=()=>VV().__FIREBASE_DEFAULTS__,UV=()=>{if(typeof process>"u"||typeof g0>"u")return;const t=g0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LS(t[1]);return e&&JSON.parse(e)},jf=()=>{try{return LV()||UV()||OV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},US=t=>{var e,n;return(n=(e=jf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},BV=t=>{const e=US(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},OS=()=>{var t;return(t=jf())===null||t===void 0?void 0:t.config},BS=t=>{var e;return(e=jf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Df(JSON.stringify(n)),Df(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function zV(){var t;const e=(t=jf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $V(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KV(){const t=Cn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JV(){return!zV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QV(){try{return typeof indexedDB=="object"}catch{return!1}}function XV(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var a;e(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV="FirebaseError";class Go extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=WV,Object.setPrototypeOf(this,Go.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ru.prototype.create)}}class Ru{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,a=this.errors[e],c=a?ZV(a,i):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new Go(r,h,i)}}function ZV(t,e){return t.replace(jV,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const jV=/\{\$([^}]+)}/g;function eL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pf(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const a=t[r],c=e[r];if(y0(a)&&y0(c)){if(!Pf(a,c))return!1}else if(a!==c)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function y0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function tL(t,e){const n=new nL(t,e);return n.subscribe.bind(n)}class nL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");iL(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Cp),r.error===void 0&&(r.error=Cp),r.complete===void 0&&(r.complete=Cp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t){return t&&t._delegate?t._delegate:t}class _s{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new FV;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sL(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&c.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(r,a);const c=this.instances.get(r);return c&&e(c,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:rL(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rL(t){return t===hs?void 0:t}function sL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const lL={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},uL=We.INFO,cL={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},fL=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=cL[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Um{constructor(e){this.name=e,this._logLevel=uL,this._logHandler=fL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const dL=(t,e)=>e.some(n=>t instanceof n);let v0,_0;function hL(){return v0||(v0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pL(){return _0||(_0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FS=new WeakMap,Zp=new WeakMap,qS=new WeakMap,wp=new WeakMap,Om=new WeakMap;function mL(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(wr(t.result)),r()},c=()=>{i(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&FS.set(n,t)}).catch(()=>{}),Om.set(e,t),e}function gL(t){if(Zp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),r()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});Zp.set(t,e)}let jp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yL(t){jp=t(jp)}function vL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Ip(this),e,...n);return qS.set(i,e.sort?e.sort():[e]),wr(i)}:pL().includes(t)?function(...e){return t.apply(Ip(this),e),wr(FS.get(this))}:function(...e){return wr(t.apply(Ip(this),e))}}function _L(t){return typeof t=="function"?vL(t):(t instanceof IDBTransaction&&gL(t),dL(t,hL())?new Proxy(t,jp):t)}function wr(t){if(t instanceof IDBRequest)return mL(t);if(wp.has(t))return wp.get(t);const e=_L(t);return e!==t&&(wp.set(t,e),Om.set(e,t)),e}const Ip=t=>Om.get(t);function TL(t,e,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const c=indexedDB.open(t,e),h=wr(c);return i&&c.addEventListener("upgradeneeded",m=>{i(wr(c.result),m.oldVersion,m.newVersion,wr(c.transaction),m)}),n&&c.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),h.then(m=>{a&&m.addEventListener("close",()=>a()),r&&m.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const EL=["get","getKey","getAll","getAllKeys","count"],SL=["put","add","delete","clear"],Rp=new Map;function T0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Rp.get(e))return Rp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=SL.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||EL.includes(n)))return;const a=async function(c,...h){const m=this.transaction(c,r?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),r&&m.done]))[0]};return Rp.set(e,a),a}yL(t=>({...t,get:(e,n,i)=>T0(e,n)||t.get(e,n,i),has:(e,n)=>!!T0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CL(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function CL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const em="@firebase/app",E0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=new Um("@firebase/app"),wL="@firebase/app-compat",IL="@firebase/analytics-compat",RL="@firebase/analytics",xL="@firebase/app-check-compat",bL="@firebase/app-check",ML="@firebase/auth",NL="@firebase/auth-compat",kL="@firebase/database",DL="@firebase/data-connect",PL="@firebase/database-compat",VL="@firebase/functions",LL="@firebase/functions-compat",UL="@firebase/installations",OL="@firebase/installations-compat",BL="@firebase/messaging",FL="@firebase/messaging-compat",qL="@firebase/performance",GL="@firebase/performance-compat",zL="@firebase/remote-config",HL="@firebase/remote-config-compat",$L="@firebase/storage",YL="@firebase/storage-compat",KL="@firebase/firestore",JL="@firebase/vertexai-preview",QL="@firebase/firestore-compat",XL="firebase",WL="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="[DEFAULT]",ZL={[em]:"fire-core",[wL]:"fire-core-compat",[RL]:"fire-analytics",[IL]:"fire-analytics-compat",[bL]:"fire-app-check",[xL]:"fire-app-check-compat",[ML]:"fire-auth",[NL]:"fire-auth-compat",[kL]:"fire-rtdb",[DL]:"fire-data-connect",[PL]:"fire-rtdb-compat",[VL]:"fire-fn",[LL]:"fire-fn-compat",[UL]:"fire-iid",[OL]:"fire-iid-compat",[BL]:"fire-fcm",[FL]:"fire-fcm-compat",[qL]:"fire-perf",[GL]:"fire-perf-compat",[zL]:"fire-rc",[HL]:"fire-rc-compat",[$L]:"fire-gcs",[YL]:"fire-gcs-compat",[KL]:"fire-fst",[QL]:"fire-fst-compat",[JL]:"fire-vertex","fire-js":"fire-js",[XL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=new Map,jL=new Map,nm=new Map;function S0(t,e){try{t.container.addComponent(e)}catch(n){Lo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Na(t){const e=t.name;if(nm.has(e))return Lo.debug(`There were multiple attempts to register component ${e}.`),!1;nm.set(e,t);for(const n of mu.values())S0(n,t);for(const n of jL.values())S0(n,t);return!0}function Bm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ir=new Ru("app","Firebase",eU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=WL;function GS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:tm,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Ir.create("bad-app-name",{appName:String(r)});if(n||(n=OS()),!n)throw Ir.create("no-options");const a=mu.get(r);if(a){if(Pf(n,a.options)&&Pf(i,a.config))return a;throw Ir.create("duplicate-app",{appName:r})}const c=new aL(r);for(const m of nm.values())c.addComponent(m);const h=new tU(n,i,c);return mu.set(r,h),h}function zS(t=tm){const e=mu.get(t);if(!e&&t===tm&&OS())return GS();if(!e)throw Ir.create("no-app",{appName:t});return e}function A0(){return Array.from(mu.values())}function Rr(t,e,n){var i;let r=(i=ZL[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const h=[`Unable to register library "${r}" with version "${e}":`];a&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lo.warn(h.join(" "));return}Na(new _s(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU="firebase-heartbeat-database",iU=1,gu="firebase-heartbeat-store";let xp=null;function HS(){return xp||(xp=TL(nU,iU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ir.create("idb-open",{originalErrorMessage:t.message})})),xp}async function oU(t){try{const n=(await HS()).transaction(gu),i=await n.objectStore(gu).get($S(t));return await n.done,i}catch(e){if(e instanceof Go)Lo.warn(e.message);else{const n=Ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lo.warn(n.message)}}}async function C0(t,e){try{const i=(await HS()).transaction(gu,"readwrite");await i.objectStore(gu).put(e,$S(t)),await i.done}catch(n){if(n instanceof Go)Lo.warn(n.message);else{const i=Ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Lo.warn(i.message)}}}function $S(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU=1024,sU=720*60*60*1e3;class aU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uU(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=w0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const h=new Date(c.date).valueOf();return Date.now()-h<=sU}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Lo.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=w0(),{heartbeatsToSend:i,unsentEntries:r}=lU(this._heartbeatsCache.heartbeats),a=Df(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Lo.warn(n),""}}}function w0(){return new Date().toISOString().substring(0,10)}function lU(t,e=rU){const n=[];let i=t.slice();for(const r of t){const a=n.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),I0(n)>e){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),I0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class uU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QV()?XV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return C0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return C0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function I0(t){return Df(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cU(t){Na(new _s("platform-logger",e=>new AL(e),"PRIVATE")),Na(new _s("heartbeat",e=>new aU(e),"PRIVATE")),Rr(em,E0,t),Rr(em,E0,"esm2017"),Rr("fire-js","")}cU("");var fU="firebase",dU="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr(fU,dU,"app");function Fm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function YS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hU=YS,KS=new Ru("auth","Firebase",YS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=new Um("@firebase/auth");function pU(t,...e){Vf.logLevel<=We.WARN&&Vf.warn(`Auth (${Ha}): ${t}`,...e)}function vf(t,...e){Vf.logLevel<=We.ERROR&&Vf.error(`Auth (${Ha}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(t,...e){throw Gm(t,...e)}function Ai(t,...e){return Gm(t,...e)}function qm(t,e,n){const i=Object.assign(Object.assign({},hU()),{[e]:n});return new Ru("auth","Firebase",i).create(e,{appName:t.name})}function xr(t){return qm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mU(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&ji(t,"argument-error"),qm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return KS.create(t,...e)}function ke(t,e,...n){if(!t)throw Gm(e,...n)}function Do(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vf(e),new Error(e)}function Uo(t,e){t||Do(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gU(){return R0()==="http:"||R0()==="https:"}function R0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gU()||$V()||"connection"in navigator)?navigator.onLine:!0}function vU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Uo(n>e,"Short delay should be less than long delay!"),this.isMobile=GV()||YV()}get(){return yU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t,e){Uo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Do("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Do("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Do("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=new bu(3e4,6e4);function ed(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function $a(t,e,n,i,r={}){return QS(t,r,async()=>{let a={},c={};i&&(e==="GET"?c=i:a={body:JSON.stringify(i)});const h=xu(Object.assign({key:t.config.apiKey},c)).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:m},a);return HV()||(p.referrerPolicy="no-referrer"),JS.fetch()(WS(t,t.config.apiHost,n,h),p)})}async function QS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},_U),e);try{const r=new EU(t),a=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw lf(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const h=a.ok?c.errorMessage:c.error.message,[m,p]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(t,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw lf(t,"email-already-in-use",c);if(m==="USER_DISABLED")throw lf(t,"user-disabled",c);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw qm(t,v,p);ji(t,v)}}catch(r){if(r instanceof Go)throw r;ji(t,"network-request-failed",{message:String(r)})}}async function XS(t,e,n,i,r={}){const a=await $a(t,e,n,i,r);return"mfaPendingCredential"in a&&ji(t,"multi-factor-auth-required",{_serverResponse:a}),a}function WS(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?zm(t.config,r):`${t.config.apiScheme}://${r}`}class EU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ai(this.auth,"network-request-failed")),TU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lf(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ai(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(t,e){return $a(t,"POST","/v1/accounts:delete",e)}async function ZS(t,e){return $a(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AU(t,e=!1){const n=wn(t),i=await n.getIdToken(e),r=Hm(i);ke(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:uu(bp(r.auth_time)),issuedAtTime:uu(bp(r.iat)),expirationTime:uu(bp(r.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function bp(t){return Number(t)*1e3}function Hm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return vf("JWT malformed, contained fewer than 3 sections"),null;try{const r=LS(n);return r?JSON.parse(r):(vf("Failed to decode base64 JWT payload"),null)}catch(r){return vf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function x0(t){const e=Hm(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Go&&CU(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function CU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uu(this.lastLoginAt),this.creationTime=uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lf(t){var e;const n=t.auth,i=await t.getIdToken(),r=await yu(t,ZS(n,{idToken:i}));ke(r==null?void 0:r.users.length,n,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?jS(a.providerUserInfo):[],h=RU(t.providerData,c),m=t.isAnonymous,p=!(t.email&&a.passwordHash)&&!(h!=null&&h.length),v=m?p:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new om(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(t,E)}async function IU(t){const e=wn(t);await Lf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RU(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function jS(t){return t.map(e=>{var{providerId:n}=e,i=Fm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xU(t,e){const n=await QS(t,{},async()=>{const i=xu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=t.config,c=WS(t,r,"/v1/token",`key=${a}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",JS.fetch()(c,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function bU(t,e){return $a(t,"POST","/v2/accounts:revokeToken",ed(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):x0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const n=x0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:a}=await xU(e,n);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:a}=n,c=new Ra;return i&&(ke(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),r&&(ke(typeof r=="string","internal-error",{appName:e}),c.accessToken=r),a&&(ke(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ra,this.toJSON())}_performRefresh(){return Do("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Po{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,a=Fm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new om(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await yu(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return AU(this,e)}reload(){return IU(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Po(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Lf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qi(this.auth.app))return Promise.reject(xr(this.auth));const e=await this.getIdToken();return await yu(this,SU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,a,c,h,m,p,v;const E=(i=n.displayName)!==null&&i!==void 0?i:void 0,S=(r=n.email)!==null&&r!==void 0?r:void 0,I=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,b=(c=n.photoURL)!==null&&c!==void 0?c:void 0,O=(h=n.tenantId)!==null&&h!==void 0?h:void 0,F=(m=n._redirectEventId)!==null&&m!==void 0?m:void 0,re=(p=n.createdAt)!==null&&p!==void 0?p:void 0,ie=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:ne,emailVerified:fe,isAnonymous:se,providerData:me,stsTokenManager:D}=n;ke(ne&&D,e,"internal-error");const M=Ra.fromJSON(this.name,D);ke(typeof ne=="string",e,"internal-error"),vr(E,e.name),vr(S,e.name),ke(typeof fe=="boolean",e,"internal-error"),ke(typeof se=="boolean",e,"internal-error"),vr(I,e.name),vr(b,e.name),vr(O,e.name),vr(F,e.name),vr(re,e.name),vr(ie,e.name);const x=new Po({uid:ne,auth:e,email:S,emailVerified:fe,displayName:E,isAnonymous:se,photoURL:b,phoneNumber:I,tenantId:O,stsTokenManager:M,createdAt:re,lastLoginAt:ie});return me&&Array.isArray(me)&&(x.providerData=me.map(L=>Object.assign({},L))),F&&(x._redirectEventId=F),x}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ra;r.updateFromServerResponse(n);const a=new Po({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Lf(a),a}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ke(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?jS(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),h=new Ra;h.updateFromIdToken(i);const m=new Po({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:c}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new om(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new Map;function Vo(t){Uo(t instanceof Function,"Expected a class definition");let e=b0.get(t);return e?(Uo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,b0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}eA.type="NONE";const M0=eA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t,e,n){return`firebase:${t}:${e}:${n}`}class xa{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=_f(this.userKey,r.apiKey,a),this.fullPersistenceKey=_f("persistence",r.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Po._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new xa(Vo(M0),e,i);const r=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=r[0]||Vo(M0);const c=_f(i,e.config.apiKey,e.name);let h=null;for(const p of n)try{const v=await p._get(c);if(v){const E=Po._fromJSON(e,v);p!==a&&(h=E),a=p;break}}catch{}const m=r.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new xa(a,e,i):(a=m[0],h&&await a._set(c,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(c)}catch{}})),new xa(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sA(e))return"Blackberry";if(aA(e))return"Webos";if(nA(e))return"Safari";if((e.includes("chrome/")||iA(e))&&!e.includes("edge/"))return"Chrome";if(rA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function tA(t=Cn()){return/firefox\//i.test(t)}function nA(t=Cn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iA(t=Cn()){return/crios\//i.test(t)}function oA(t=Cn()){return/iemobile/i.test(t)}function rA(t=Cn()){return/android/i.test(t)}function sA(t=Cn()){return/blackberry/i.test(t)}function aA(t=Cn()){return/webos/i.test(t)}function $m(t=Cn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MU(t=Cn()){var e;return $m(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function NU(){return KV()&&document.documentMode===10}function lA(t=Cn()){return $m(t)||rA(t)||aA(t)||sA(t)||/windows phone/i.test(t)||oA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t,e=[]){let n;switch(t){case"Browser":n=N0(Cn());break;case"Worker":n=`${N0(Cn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ha}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((c,h)=>{try{const m=e(a);c(m)}catch(m){h(m)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(t,e={}){return $a(t,"GET","/v2/passwordPolicy",ed(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=6;class VU{constructor(e){var n,i,r,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:PU,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,a,c,h;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(n=m.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(r=m.containsLowercaseLetter)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(a=m.containsUppercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(h=m.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),m}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new k0(this),this.idTokenSubscription=new k0(this),this.beforeStateQueue=new kU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vo(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await xa.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ZS(this,{idToken:e}),i=await Po._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===h)&&(m!=null&&m.user)&&(r=m.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qi(this.app))return Promise.reject(xr(this));const n=e?wn(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qi(this.app)?Promise.reject(xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qi(this.app)?Promise.reject(xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DU(this),n=new VU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ru("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await bU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vo(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await xa.create(this,[Vo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(h,this,"internal-error"),h.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,i,r);return()=>{c=!0,m()}}else{const m=e.addObserver(n);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&pU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Mu(t){return wn(t)}class k0{constructor(e){this.auth=e,this.observer=null,this.addObserver=tL(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ym={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UU(t){Ym=t}function OU(t){return Ym.loadJS(t)}function BU(){return Ym.gapiScript}function FU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(t,e){const n=Bm(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),a=n.getOptions();if(Pf(a,e??{}))return r;ji(r,"already-initialized")}return n.initialize({options:e})}function GU(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Vo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function zU(t,e,n){const i=Mu(t);ke(i._canInitEmulator,i,"emulator-config-failed"),ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=cA(e),{host:c,port:h}=HU(e),m=h===null?"":`:${h}`;i.config.emulator={url:`${a}//${c}${m}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:c,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})}),$U()}function cA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HU(t){const e=cA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:D0(i.substr(a.length+1))}}else{const[a,c]=i.split(":");return{host:a,port:D0(c)}}}function D0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $U(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Do("not implemented")}_getIdTokenResponse(e){return Do("not implemented")}_linkToIdToken(e,n){return Do("not implemented")}_getReauthenticationResolver(e){return Do("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(t,e){return XS(t,"POST","/v1/accounts:signInWithIdp",ed(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU="http://localhost";class Oo extends fA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ji("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,a=Fm(n,["providerId","signInMethod"]);if(!i||!r)return null;const c=new Oo(i,r);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return ba(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ba(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ba(e,n)}buildRequest(){const e={requestUri:YU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends Km{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cu extends Ya{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ke("providerId"in n&&"signInMethod"in n,"argument-error"),Oo._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ke(e.idToken||e.accessToken,"argument-error"),Oo._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return cu.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return cu.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:a,nonce:c,providerId:h}=e;if(!i&&!r&&!n&&!a||!h)return null;try{return new cu(h)._credential({idToken:n,accessToken:i,nonce:c,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Ya{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Ya{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oo._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Mo.credential(n,i)}catch{return null}}}Mo.GOOGLE_SIGN_IN_METHOD="google.com";Mo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Ya{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com";Er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Ya{constructor(){super("twitter.com")}static credential(e,n){return Oo._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Sr.credential(n,i)}catch{return null}}}Sr.TWITTER_SIGN_IN_METHOD="twitter.com";Sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KU(t,e){return XS(t,"POST","/v1/accounts:signUp",ed(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const a=await Po._fromIdTokenResponse(e,i,r),c=P0(i);return new Nr({user:a,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=P0(i);return new Nr({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function P0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JU(t){var e;if(Qi(t.app))return Promise.reject(xr(t));const n=Mu(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Nr({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await KU(n,{returnSecureToken:!0}),r=await Nr._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf extends Go{constructor(e,n,i,r){var a;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Uf.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Uf(e,n,i,r)}}function dA(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Uf._fromErrorAndOperation(t,a,e,i):a})}async function QU(t,e,n=!1){const i=await yu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Nr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XU(t,e,n=!1){const{auth:i}=t;if(Qi(i.app))return Promise.reject(xr(i));const r="reauthenticate";try{const a=await yu(t,dA(i,r,e,t),n);ke(a.idToken,i,"internal-error");const c=Hm(a.idToken);ke(c,i,"internal-error");const{sub:h}=c;return ke(t.uid===h,i,"user-mismatch"),Nr._forOperation(t,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ji(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WU(t,e,n=!1){if(Qi(t.app))return Promise.reject(xr(t));const i="signIn",r=await dA(t,i,e),a=await Nr._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(a.user),a}function ZU(t,e,n,i){return wn(t).onIdTokenChanged(e,n,i)}function jU(t,e,n){return wn(t).beforeAuthStateChanged(e,n)}function eO(t,e,n,i){return wn(t).onAuthStateChanged(e,n,i)}const Of="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Of,"1"),this.storage.removeItem(Of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=1e3,nO=10;class pA extends hA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);NU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,nO):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},tO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pA.type="LOCAL";const iO=pA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA extends hA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mA.type="SESSION";const gA=mA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new td(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:a}=n.data,c=this.handlersMap[r];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(c).map(async p=>p(n.origin,a)),m=await oO(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}td.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,c;return new Promise((h,m)=>{const p=Jm("",20);r.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(E){const S=E;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(S.data.response);break;default:clearTimeout(v),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(){return window}function sO(t){Xi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(){return typeof Xi().WorkerGlobalScope<"u"&&typeof Xi().importScripts=="function"}async function aO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uO(){return yA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="firebaseLocalStorageDb",cO=1,Bf="firebaseLocalStorage",_A="fbase_key";class Nu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nd(t,e){return t.transaction([Bf],e?"readwrite":"readonly").objectStore(Bf)}function fO(){const t=indexedDB.deleteDatabase(vA);return new Nu(t).toPromise()}function rm(){const t=indexedDB.open(vA,cO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Bf,{keyPath:_A})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Bf)?e(i):(i.close(),await fO(),e(await rm()))})})}async function V0(t,e,n){const i=nd(t,!0).put({[_A]:e,value:n});return new Nu(i).toPromise()}async function dO(t,e){const n=nd(t,!1).get(e),i=await new Nu(n).toPromise();return i===void 0?null:i.value}function L0(t,e){const n=nd(t,!0).delete(e);return new Nu(n).toPromise()}const hO=800,pO=3;class TA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>pO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=td._getInstance(uO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await aO(),!this.activeServiceWorker)return;this.sender=new rO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rm();return await V0(e,Of,"1"),await L0(e,Of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>V0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>dO(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>L0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=nd(r,!1).getAll();return new Nu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TA.type="LOCAL";const mO=TA;new bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t,e){return e?Vo(e):(ke(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm extends fA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ba(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ba(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ba(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function gO(t){return WU(t.auth,new Qm(t),t.bypassAuthState)}function yO(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),XU(n,new Qm(t),t.bypassAuthState)}async function vO(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),QU(n,new Qm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:a,error:c,type:h}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gO;case"linkViaPopup":case"linkViaRedirect":return vO;case"reauthViaPopup":case"reauthViaRedirect":return yO;default:ji(this.auth,"internal-error")}}resolve(e){Uo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Uo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=new bu(2e3,1e4);async function AA(t,e,n){if(Qi(t.app))return Promise.reject(Ai(t,"operation-not-supported-in-this-environment"));const i=Mu(t);mU(t,e,Km);const r=EA(i,n);return new ps(i,"signInViaPopup",e,r).executeNotNull()}class ps extends SA{constructor(e,n,i,r,a){super(e,n,r,a),this.provider=i,this.authWindow=null,this.pollId=null,ps.currentPopupAction&&ps.currentPopupAction.cancel(),ps.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Uo(this.filter.length===1,"Popup operations only handle one event");const e=Jm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ps.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_O.get())};e()}}ps.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO="pendingRedirect",Tf=new Map;class EO extends SA{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Tf.get(this.auth._key());if(!e){try{const i=await SO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Tf.set(this.auth._key(),e)}return this.bypassAuthState||Tf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SO(t,e){const n=wO(e),i=CO(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function AO(t,e){Tf.set(t._key(),e)}function CO(t){return Vo(t._redirectPersistence)}function wO(t){return _f(TO,t.config.apiKey,t.name)}async function IO(t,e,n=!1){if(Qi(t.app))return Promise.reject(xr(t));const i=Mu(t),r=EA(i,e),c=await new EO(i,r,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=600*1e3;class xO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!CA(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ai(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RO&&this.cachedEventUids.clear(),this.cachedEventUids.has(U0(e))}saveEventToCache(e){this.cachedEventUids.add(U0(e)),this.lastProcessedEventTime=Date.now()}}function U0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MO(t,e={}){return $a(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kO=/^https?/;async function DO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await MO(t);for(const n of e)try{if(PO(n))return}catch{}ji(t,"unauthorized-domain")}function PO(t){const e=im(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!kO.test(n))return!1;if(NO.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=new bu(3e4,6e4);function O0(){const t=Xi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LO(t){return new Promise((e,n)=>{var i,r,a;function c(){O0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O0(),n(Ai(t,"network-request-failed"))},timeout:VO.get()})}if(!((r=(i=Xi().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((a=Xi().gapi)===null||a===void 0)&&a.load)c();else{const h=FU("iframefcb");return Xi()[h]=()=>{gapi.load?c():n(Ai(t,"network-request-failed"))},OU(`${BU()}?onload=${h}`).catch(m=>n(m))}}).catch(e=>{throw Ef=null,e})}let Ef=null;function UO(t){return Ef=Ef||LO(t),Ef}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=new bu(5e3,15e3),BO="__/auth/iframe",FO="emulator/auth/iframe",qO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zO(t){const e=t.config;ke(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zm(e,FO):`https://${t.config.authDomain}/${BO}`,i={apiKey:e.apiKey,appName:t.name,v:Ha},r=GO.get(t.config.apiHost);r&&(i.eid=r);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${xu(i).slice(1)}`}async function HO(t){const e=await UO(t),n=Xi().gapi;return ke(n,t,"internal-error"),e.open({where:document.body,url:zO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qO,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const c=Ai(t,"network-request-failed"),h=Xi().setTimeout(()=>{a(c)},OO.get());function m(){Xi().clearTimeout(h),r(i)}i.ping(m).then(m,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YO=500,KO=600,JO="_blank",QO="http://localhost";class B0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XO(t,e,n,i=YO,r=KO){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const m=Object.assign(Object.assign({},$O),{width:i.toString(),height:r.toString(),top:a,left:c}),p=Cn().toLowerCase();n&&(h=iA(p)?JO:n),tA(p)&&(e=e||QO,m.scrollbars="yes");const v=Object.entries(m).reduce((S,[I,b])=>`${S}${I}=${b},`,"");if(MU(p)&&h!=="_self")return WO(e||"",h),new B0(null);const E=window.open(e||"",h,v);ke(E,t,"popup-blocked");try{E.focus()}catch{}return new B0(E)}function WO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO="__/auth/handler",jO="emulator/auth/handler",e4=encodeURIComponent("fac");async function F0(t,e,n,i,r,a){ke(t.config.authDomain,t,"auth-domain-config-required"),ke(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ha,eventId:r};if(e instanceof Km){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",eL(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof Ya){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}t.tenantId&&(c.tid=t.tenantId);const h=c;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const m=await t._getAppCheckToken(),p=m?`#${e4}=${encodeURIComponent(m)}`:"";return`${t4(t)}?${xu(h).slice(1)}${p}`}function t4({config:t}){return t.emulator?zm(t,jO):`https://${t.authDomain}/${ZO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="webStorageSupport";class n4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gA,this._completeRedirectFn=IO,this._overrideRedirectResult=AO}async _openPopup(e,n,i,r){var a;Uo((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await F0(e,n,i,im(),r);return XO(e,c,Jm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const a=await F0(e,n,i,im(),r);return sO(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:a}=this.eventManagers[n];return r?Promise.resolve(r):(Uo(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await HO(e),i=new xO(e);return n.register("authEvent",r=>(ke(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mp,{type:Mp},r=>{var a;const c=(a=r==null?void 0:r[0])===null||a===void 0?void 0:a[Mp];c!==void 0&&n(!!c),ji(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lA()||nA()||$m()}}const i4=n4;var q0="@firebase/auth",G0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function s4(t){Na(new _s("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;ke(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uA(t)},p=new LU(i,r,a,m);return GU(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Na(new _s("auth-internal",e=>{const n=Mu(e.getProvider("auth").getImmediate());return(i=>new o4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rr(q0,G0,r4(t)),Rr(q0,G0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4=300,l4=BS("authIdTokenMaxAge")||a4;let z0=null;const u4=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>l4)return;const r=n==null?void 0:n.token;z0!==r&&(z0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function c4(t=zS()){const e=Bm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=qU(t,{popupRedirectResolver:i4,persistence:[mO,iO,gA]}),i=BS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const c=u4(a.toString());jU(n,c,()=>c(n.currentUser)),ZU(n,h=>c(h))}}const r=US("auth");return r&&zU(n,`http://${r}`),n}function f4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}UU({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const a=Ai("internal-error");a.customData=r,n(a)},i.type="text/javascript",i.charset="UTF-8",f4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});s4("Browser");var H0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gs,wA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,M){function x(){}x.prototype=M.prototype,D.D=M.prototype,D.prototype=new x,D.prototype.constructor=D,D.C=function(L,k,q){for(var V=Array(arguments.length-2),St=2;St<arguments.length;St++)V[St-2]=arguments[St];return M.prototype[k].apply(L,V)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,M,x){x||(x=0);var L=Array(16);if(typeof M=="string")for(var k=0;16>k;++k)L[k]=M.charCodeAt(x++)|M.charCodeAt(x++)<<8|M.charCodeAt(x++)<<16|M.charCodeAt(x++)<<24;else for(k=0;16>k;++k)L[k]=M[x++]|M[x++]<<8|M[x++]<<16|M[x++]<<24;M=D.g[0],x=D.g[1],k=D.g[2];var q=D.g[3],V=M+(q^x&(k^q))+L[0]+3614090360&4294967295;M=x+(V<<7&4294967295|V>>>25),V=q+(k^M&(x^k))+L[1]+3905402710&4294967295,q=M+(V<<12&4294967295|V>>>20),V=k+(x^q&(M^x))+L[2]+606105819&4294967295,k=q+(V<<17&4294967295|V>>>15),V=x+(M^k&(q^M))+L[3]+3250441966&4294967295,x=k+(V<<22&4294967295|V>>>10),V=M+(q^x&(k^q))+L[4]+4118548399&4294967295,M=x+(V<<7&4294967295|V>>>25),V=q+(k^M&(x^k))+L[5]+1200080426&4294967295,q=M+(V<<12&4294967295|V>>>20),V=k+(x^q&(M^x))+L[6]+2821735955&4294967295,k=q+(V<<17&4294967295|V>>>15),V=x+(M^k&(q^M))+L[7]+4249261313&4294967295,x=k+(V<<22&4294967295|V>>>10),V=M+(q^x&(k^q))+L[8]+1770035416&4294967295,M=x+(V<<7&4294967295|V>>>25),V=q+(k^M&(x^k))+L[9]+2336552879&4294967295,q=M+(V<<12&4294967295|V>>>20),V=k+(x^q&(M^x))+L[10]+4294925233&4294967295,k=q+(V<<17&4294967295|V>>>15),V=x+(M^k&(q^M))+L[11]+2304563134&4294967295,x=k+(V<<22&4294967295|V>>>10),V=M+(q^x&(k^q))+L[12]+1804603682&4294967295,M=x+(V<<7&4294967295|V>>>25),V=q+(k^M&(x^k))+L[13]+4254626195&4294967295,q=M+(V<<12&4294967295|V>>>20),V=k+(x^q&(M^x))+L[14]+2792965006&4294967295,k=q+(V<<17&4294967295|V>>>15),V=x+(M^k&(q^M))+L[15]+1236535329&4294967295,x=k+(V<<22&4294967295|V>>>10),V=M+(k^q&(x^k))+L[1]+4129170786&4294967295,M=x+(V<<5&4294967295|V>>>27),V=q+(x^k&(M^x))+L[6]+3225465664&4294967295,q=M+(V<<9&4294967295|V>>>23),V=k+(M^x&(q^M))+L[11]+643717713&4294967295,k=q+(V<<14&4294967295|V>>>18),V=x+(q^M&(k^q))+L[0]+3921069994&4294967295,x=k+(V<<20&4294967295|V>>>12),V=M+(k^q&(x^k))+L[5]+3593408605&4294967295,M=x+(V<<5&4294967295|V>>>27),V=q+(x^k&(M^x))+L[10]+38016083&4294967295,q=M+(V<<9&4294967295|V>>>23),V=k+(M^x&(q^M))+L[15]+3634488961&4294967295,k=q+(V<<14&4294967295|V>>>18),V=x+(q^M&(k^q))+L[4]+3889429448&4294967295,x=k+(V<<20&4294967295|V>>>12),V=M+(k^q&(x^k))+L[9]+568446438&4294967295,M=x+(V<<5&4294967295|V>>>27),V=q+(x^k&(M^x))+L[14]+3275163606&4294967295,q=M+(V<<9&4294967295|V>>>23),V=k+(M^x&(q^M))+L[3]+4107603335&4294967295,k=q+(V<<14&4294967295|V>>>18),V=x+(q^M&(k^q))+L[8]+1163531501&4294967295,x=k+(V<<20&4294967295|V>>>12),V=M+(k^q&(x^k))+L[13]+2850285829&4294967295,M=x+(V<<5&4294967295|V>>>27),V=q+(x^k&(M^x))+L[2]+4243563512&4294967295,q=M+(V<<9&4294967295|V>>>23),V=k+(M^x&(q^M))+L[7]+1735328473&4294967295,k=q+(V<<14&4294967295|V>>>18),V=x+(q^M&(k^q))+L[12]+2368359562&4294967295,x=k+(V<<20&4294967295|V>>>12),V=M+(x^k^q)+L[5]+4294588738&4294967295,M=x+(V<<4&4294967295|V>>>28),V=q+(M^x^k)+L[8]+2272392833&4294967295,q=M+(V<<11&4294967295|V>>>21),V=k+(q^M^x)+L[11]+1839030562&4294967295,k=q+(V<<16&4294967295|V>>>16),V=x+(k^q^M)+L[14]+4259657740&4294967295,x=k+(V<<23&4294967295|V>>>9),V=M+(x^k^q)+L[1]+2763975236&4294967295,M=x+(V<<4&4294967295|V>>>28),V=q+(M^x^k)+L[4]+1272893353&4294967295,q=M+(V<<11&4294967295|V>>>21),V=k+(q^M^x)+L[7]+4139469664&4294967295,k=q+(V<<16&4294967295|V>>>16),V=x+(k^q^M)+L[10]+3200236656&4294967295,x=k+(V<<23&4294967295|V>>>9),V=M+(x^k^q)+L[13]+681279174&4294967295,M=x+(V<<4&4294967295|V>>>28),V=q+(M^x^k)+L[0]+3936430074&4294967295,q=M+(V<<11&4294967295|V>>>21),V=k+(q^M^x)+L[3]+3572445317&4294967295,k=q+(V<<16&4294967295|V>>>16),V=x+(k^q^M)+L[6]+76029189&4294967295,x=k+(V<<23&4294967295|V>>>9),V=M+(x^k^q)+L[9]+3654602809&4294967295,M=x+(V<<4&4294967295|V>>>28),V=q+(M^x^k)+L[12]+3873151461&4294967295,q=M+(V<<11&4294967295|V>>>21),V=k+(q^M^x)+L[15]+530742520&4294967295,k=q+(V<<16&4294967295|V>>>16),V=x+(k^q^M)+L[2]+3299628645&4294967295,x=k+(V<<23&4294967295|V>>>9),V=M+(k^(x|~q))+L[0]+4096336452&4294967295,M=x+(V<<6&4294967295|V>>>26),V=q+(x^(M|~k))+L[7]+1126891415&4294967295,q=M+(V<<10&4294967295|V>>>22),V=k+(M^(q|~x))+L[14]+2878612391&4294967295,k=q+(V<<15&4294967295|V>>>17),V=x+(q^(k|~M))+L[5]+4237533241&4294967295,x=k+(V<<21&4294967295|V>>>11),V=M+(k^(x|~q))+L[12]+1700485571&4294967295,M=x+(V<<6&4294967295|V>>>26),V=q+(x^(M|~k))+L[3]+2399980690&4294967295,q=M+(V<<10&4294967295|V>>>22),V=k+(M^(q|~x))+L[10]+4293915773&4294967295,k=q+(V<<15&4294967295|V>>>17),V=x+(q^(k|~M))+L[1]+2240044497&4294967295,x=k+(V<<21&4294967295|V>>>11),V=M+(k^(x|~q))+L[8]+1873313359&4294967295,M=x+(V<<6&4294967295|V>>>26),V=q+(x^(M|~k))+L[15]+4264355552&4294967295,q=M+(V<<10&4294967295|V>>>22),V=k+(M^(q|~x))+L[6]+2734768916&4294967295,k=q+(V<<15&4294967295|V>>>17),V=x+(q^(k|~M))+L[13]+1309151649&4294967295,x=k+(V<<21&4294967295|V>>>11),V=M+(k^(x|~q))+L[4]+4149444226&4294967295,M=x+(V<<6&4294967295|V>>>26),V=q+(x^(M|~k))+L[11]+3174756917&4294967295,q=M+(V<<10&4294967295|V>>>22),V=k+(M^(q|~x))+L[2]+718787259&4294967295,k=q+(V<<15&4294967295|V>>>17),V=x+(q^(k|~M))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+M&4294967295,D.g[1]=D.g[1]+(k+(V<<21&4294967295|V>>>11))&4294967295,D.g[2]=D.g[2]+k&4294967295,D.g[3]=D.g[3]+q&4294967295}i.prototype.u=function(D,M){M===void 0&&(M=D.length);for(var x=M-this.blockSize,L=this.B,k=this.h,q=0;q<M;){if(k==0)for(;q<=x;)r(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<M;)if(L[k++]=D.charCodeAt(q++),k==this.blockSize){r(this,L),k=0;break}}else for(;q<M;)if(L[k++]=D[q++],k==this.blockSize){r(this,L),k=0;break}}this.h=k,this.o+=M},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var M=1;M<D.length-8;++M)D[M]=0;var x=8*this.o;for(M=D.length-8;M<D.length;++M)D[M]=x&255,x/=256;for(this.u(D),D=Array(16),M=x=0;4>M;++M)for(var L=0;32>L;L+=8)D[x++]=this.g[M]>>>L&255;return D};function a(D,M){var x=h;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=M(D)}function c(D,M){this.h=M;for(var x=[],L=!0,k=D.length-1;0<=k;k--){var q=D[k]|0;L&&q==M||(x[k]=q,L=!1)}this.g=x}var h={};function m(D){return-128<=D&&128>D?a(D,function(M){return new c([M|0],0>M?-1:0)}):new c([D|0],0>D?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return E;if(0>D)return F(p(-D));for(var M=[],x=1,L=0;D>=x;L++)M[L]=D/x|0,x*=4294967296;return new c(M,0)}function v(D,M){if(D.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(D.charAt(0)=="-")return F(v(D.substring(1),M));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=p(Math.pow(M,8)),L=E,k=0;k<D.length;k+=8){var q=Math.min(8,D.length-k),V=parseInt(D.substring(k,k+q),M);8>q?(q=p(Math.pow(M,q)),L=L.j(q).add(p(V))):(L=L.j(x),L=L.add(p(V)))}return L}var E=m(0),S=m(1),I=m(16777216);t=c.prototype,t.m=function(){if(O(this))return-F(this).m();for(var D=0,M=1,x=0;x<this.g.length;x++){var L=this.i(x);D+=(0<=L?L:4294967296+L)*M,M*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(b(this))return"0";if(O(this))return"-"+F(this).toString(D);for(var M=p(Math.pow(D,6)),x=this,L="";;){var k=fe(x,M).g;x=re(x,k.j(M));var q=((0<x.g.length?x.g[0]:x.h)>>>0).toString(D);if(x=k,b(x))return q+L;for(;6>q.length;)q="0"+q;L=q+L}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function b(D){if(D.h!=0)return!1;for(var M=0;M<D.g.length;M++)if(D.g[M]!=0)return!1;return!0}function O(D){return D.h==-1}t.l=function(D){return D=re(this,D),O(D)?-1:b(D)?0:1};function F(D){for(var M=D.g.length,x=[],L=0;L<M;L++)x[L]=~D.g[L];return new c(x,~D.h).add(S)}t.abs=function(){return O(this)?F(this):this},t.add=function(D){for(var M=Math.max(this.g.length,D.g.length),x=[],L=0,k=0;k<=M;k++){var q=L+(this.i(k)&65535)+(D.i(k)&65535),V=(q>>>16)+(this.i(k)>>>16)+(D.i(k)>>>16);L=V>>>16,q&=65535,V&=65535,x[k]=V<<16|q}return new c(x,x[x.length-1]&-2147483648?-1:0)};function re(D,M){return D.add(F(M))}t.j=function(D){if(b(this)||b(D))return E;if(O(this))return O(D)?F(this).j(F(D)):F(F(this).j(D));if(O(D))return F(this.j(F(D)));if(0>this.l(I)&&0>D.l(I))return p(this.m()*D.m());for(var M=this.g.length+D.g.length,x=[],L=0;L<2*M;L++)x[L]=0;for(L=0;L<this.g.length;L++)for(var k=0;k<D.g.length;k++){var q=this.i(L)>>>16,V=this.i(L)&65535,St=D.i(k)>>>16,Xe=D.i(k)&65535;x[2*L+2*k]+=V*Xe,ie(x,2*L+2*k),x[2*L+2*k+1]+=q*Xe,ie(x,2*L+2*k+1),x[2*L+2*k+1]+=V*St,ie(x,2*L+2*k+1),x[2*L+2*k+2]+=q*St,ie(x,2*L+2*k+2)}for(L=0;L<M;L++)x[L]=x[2*L+1]<<16|x[2*L];for(L=M;L<2*M;L++)x[L]=0;return new c(x,0)};function ie(D,M){for(;(D[M]&65535)!=D[M];)D[M+1]+=D[M]>>>16,D[M]&=65535,M++}function ne(D,M){this.g=D,this.h=M}function fe(D,M){if(b(M))throw Error("division by zero");if(b(D))return new ne(E,E);if(O(D))return M=fe(F(D),M),new ne(F(M.g),F(M.h));if(O(M))return M=fe(D,F(M)),new ne(F(M.g),M.h);if(30<D.g.length){if(O(D)||O(M))throw Error("slowDivide_ only works with positive integers.");for(var x=S,L=M;0>=L.l(D);)x=se(x),L=se(L);var k=me(x,1),q=me(L,1);for(L=me(L,2),x=me(x,2);!b(L);){var V=q.add(L);0>=V.l(D)&&(k=k.add(x),q=V),L=me(L,1),x=me(x,1)}return M=re(D,k.j(M)),new ne(k,M)}for(k=E;0<=D.l(M);){for(x=Math.max(1,Math.floor(D.m()/M.m())),L=Math.ceil(Math.log(x)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),q=p(x),V=q.j(M);O(V)||0<V.l(D);)x-=L,q=p(x),V=q.j(M);b(q)&&(q=S),k=k.add(q),D=re(D,V)}return new ne(k,D)}t.A=function(D){return fe(this,D).h},t.and=function(D){for(var M=Math.max(this.g.length,D.g.length),x=[],L=0;L<M;L++)x[L]=this.i(L)&D.i(L);return new c(x,this.h&D.h)},t.or=function(D){for(var M=Math.max(this.g.length,D.g.length),x=[],L=0;L<M;L++)x[L]=this.i(L)|D.i(L);return new c(x,this.h|D.h)},t.xor=function(D){for(var M=Math.max(this.g.length,D.g.length),x=[],L=0;L<M;L++)x[L]=this.i(L)^D.i(L);return new c(x,this.h^D.h)};function se(D){for(var M=D.g.length+1,x=[],L=0;L<M;L++)x[L]=D.i(L)<<1|D.i(L-1)>>>31;return new c(x,D.h)}function me(D,M){var x=M>>5;M%=32;for(var L=D.g.length-x,k=[],q=0;q<L;q++)k[q]=0<M?D.i(q+x)>>>M|D.i(q+x+1)<<32-M:D.i(q+x);return new c(k,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,wA=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,gs=c}).apply(typeof H0<"u"?H0:typeof self<"u"?self:typeof window<"u"?window:{});var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IA,iu,RA,Sf,sm,xA,bA,MA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,T,A){return g==Array.prototype||g==Object.prototype||(g[T]=A.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof uf=="object"&&uf];for(var T=0;T<g.length;++T){var A=g[T];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=n(this);function r(g,T){if(T)e:{var A=i;g=g.split(".");for(var R=0;R<g.length-1;R++){var z=g[R];if(!(z in A))break e;A=A[z]}g=g[g.length-1],R=A[g],T=T(R),T!=R&&T!=null&&e(A,g,{configurable:!0,writable:!0,value:T})}}function a(g,T){g instanceof String&&(g+="");var A=0,R=!1,z={next:function(){if(!R&&A<g.length){var Q=A++;return{value:T(Q,g[Q]),done:!1}}return R=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}r("Array.prototype.values",function(g){return g||function(){return a(this,function(T,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function m(g){var T=typeof g;return T=T!="object"?T:g?Array.isArray(g)?"array":T:"null",T=="array"||T=="object"&&typeof g.length=="number"}function p(g){var T=typeof g;return T=="object"&&g!=null||T=="function"}function v(g,T,A){return g.call.apply(g.bind,arguments)}function E(g,T,A){if(!g)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,R),g.apply(T,z)}}return function(){return g.apply(T,arguments)}}function S(g,T,A){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function I(g,T){var A=Array.prototype.slice.call(arguments,1);return function(){var R=A.slice();return R.push.apply(R,arguments),g.apply(this,R)}}function b(g,T){function A(){}A.prototype=T.prototype,g.aa=T.prototype,g.prototype=new A,g.prototype.constructor=g,g.Qb=function(R,z,Q){for(var ce=Array(arguments.length-2),je=2;je<arguments.length;je++)ce[je-2]=arguments[je];return T.prototype[z].apply(R,ce)}}function O(g){const T=g.length;if(0<T){const A=Array(T);for(let R=0;R<T;R++)A[R]=g[R];return A}return[]}function F(g,T){for(let A=1;A<arguments.length;A++){const R=arguments[A];if(m(R)){const z=g.length||0,Q=R.length||0;g.length=z+Q;for(let ce=0;ce<Q;ce++)g[z+ce]=R[ce]}else g.push(R)}}class re{constructor(T,A){this.i=T,this.j=A,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function ie(g){return/^[\s\xa0]*$/.test(g)}function ne(){var g=h.navigator;return g&&(g=g.userAgent)?g:""}function fe(g){return fe[" "](g),g}fe[" "]=function(){};var se=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function me(g,T,A){for(const R in g)T.call(A,g[R],R,g)}function D(g,T){for(const A in g)T.call(void 0,g[A],A,g)}function M(g){const T={};for(const A in g)T[A]=g[A];return T}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(g,T){let A,R;for(let z=1;z<arguments.length;z++){R=arguments[z];for(A in R)g[A]=R[A];for(let Q=0;Q<x.length;Q++)A=x[Q],Object.prototype.hasOwnProperty.call(R,A)&&(g[A]=R[A])}}function k(g){var T=1;g=g.split(":");const A=[];for(;0<T&&g.length;)A.push(g.shift()),T--;return g.length&&A.push(g.join(":")),A}function q(g){h.setTimeout(()=>{throw g},0)}function V(){var g=Oe;let T=null;return g.g&&(T=g.g,g.g=g.g.next,g.g||(g.h=null),T.next=null),T}class St{constructor(){this.h=this.g=null}add(T,A){const R=Xe.get();R.set(T,A),this.h?this.h.next=R:this.g=R,this.h=R}}var Xe=new re(()=>new X,g=>g.reset());class X{constructor(){this.next=this.g=this.h=null}set(T,A){this.h=T,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ye=!1,Oe=new St,U=()=>{const g=h.Promise.resolve(void 0);he=()=>{g.then(W)}};var W=()=>{for(var g;g=V();){try{g.h.call(g.g)}catch(A){q(A)}var T=Xe;T.j(g),100>T.h&&(T.h++,g.next=T.g,T.g=g)}ye=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(g,T){this.type=g,this.g=this.target=T,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var g=!1,T=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};h.addEventListener("test",A,T),h.removeEventListener("test",A,T)}catch{}return g}();function qe(g,T){if(ae.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var A=this.type=g.type,R=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=T,T=g.relatedTarget){if(se){e:{try{fe(T.nodeName);var z=!0;break e}catch{}z=!1}z||(T=null)}}else A=="mouseover"?T=g.fromElement:A=="mouseout"&&(T=g.toElement);this.relatedTarget=T,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Me[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&qe.aa.h.call(this)}}b(qe,ae);var Me={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var kt="closure_listenable_"+(1e6*Math.random()|0),lt=0;function In(g,T,A,R,z){this.listener=g,this.proxy=null,this.src=T,this.type=A,this.capture=!!R,this.ha=z,this.key=++lt,this.da=this.fa=!1}function Zn(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function gn(g){this.src=g,this.g={},this.h=0}gn.prototype.add=function(g,T,A,R,z){var Q=g.toString();g=this.g[Q],g||(g=this.g[Q]=[],this.h++);var ce=Ri(g,T,R,z);return-1<ce?(T=g[ce],A||(T.fa=!1)):(T=new In(T,this.src,Q,!!R,z),T.fa=A,g.push(T)),T};function Ii(g,T){var A=T.type;if(A in g.g){var R=g.g[A],z=Array.prototype.indexOf.call(R,T,void 0),Q;(Q=0<=z)&&Array.prototype.splice.call(R,z,1),Q&&(Zn(T),g.g[A].length==0&&(delete g.g[A],g.h--))}}function Ri(g,T,A,R){for(var z=0;z<g.length;++z){var Q=g[z];if(!Q.da&&Q.listener==T&&Q.capture==!!A&&Q.ha==R)return z}return-1}var hi="closure_lm_"+(1e6*Math.random()|0),pi={};function zo(g,T,A,R,z){if(Array.isArray(T)){for(var Q=0;Q<T.length;Q++)zo(g,T[Q],A,R,z);return null}return A=Ms(A),g&&g[kt]?g.K(T,A,p(R)?!!R.capture:!1,z):Pn(g,T,A,!1,R,z)}function Pn(g,T,A,R,z,Q){if(!T)throw Error("Invalid event type");var ce=p(z)?!!z.capture:!!z,je=xi(g);if(je||(g[hi]=je=new gn(g)),A=je.add(T,A,R,ce,Q),A.proxy)return A;if(R=bs(),A.proxy=R,R.src=g,R.listener=A,g.addEventListener)Ae||(z=ce),z===void 0&&(z=!1),g.addEventListener(T.toString(),R,z);else if(g.attachEvent)g.attachEvent(no(T.toString()),R);else if(g.addListener&&g.removeListener)g.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return A}function bs(){function g(A){return T.call(g.src,g.listener,A)}const T=Lr;return g}function Ho(g,T,A,R,z){if(Array.isArray(T))for(var Q=0;Q<T.length;Q++)Ho(g,T[Q],A,R,z);else R=p(R)?!!R.capture:!!R,A=Ms(A),g&&g[kt]?(g=g.i,T=String(T).toString(),T in g.g&&(Q=g.g[T],A=Ri(Q,A,R,z),-1<A&&(Zn(Q[A]),Array.prototype.splice.call(Q,A,1),Q.length==0&&(delete g.g[T],g.h--)))):g&&(g=xi(g))&&(T=g.g[T.toString()],g=-1,T&&(g=Ri(T,A,R,z)),(A=-1<g?T[g]:null)&&$o(A))}function $o(g){if(typeof g!="number"&&g&&!g.da){var T=g.src;if(T&&T[kt])Ii(T.i,g);else{var A=g.type,R=g.proxy;T.removeEventListener?T.removeEventListener(A,R,g.capture):T.detachEvent?T.detachEvent(no(A),R):T.addListener&&T.removeListener&&T.removeListener(R),(A=xi(T))?(Ii(A,g),A.h==0&&(A.src=null,T[hi]=null)):Zn(g)}}}function no(g){return g in pi?pi[g]:pi[g]="on"+g}function Lr(g,T){if(g.da)g=!0;else{T=new qe(T,this);var A=g.listener,R=g.ha||g.src;g.fa&&$o(g),g=A.call(R,T)}return g}function xi(g){return g=g[hi],g instanceof gn?g:null}var Yo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ms(g){return typeof g=="function"?g:(g[Yo]||(g[Yo]=function(T){return g.handleEvent(T)}),g[Yo])}function Rt(){de.call(this),this.i=new gn(this),this.M=this,this.F=null}b(Rt,de),Rt.prototype[kt]=!0,Rt.prototype.removeEventListener=function(g,T,A,R){Ho(this,g,T,A,R)};function it(g,T){var A,R=g.F;if(R)for(A=[];R;R=R.F)A.push(R);if(g=g.M,R=T.type||T,typeof T=="string")T=new ae(T,g);else if(T instanceof ae)T.target=T.target||g;else{var z=T;T=new ae(R,g),L(T,z)}if(z=!0,A)for(var Q=A.length-1;0<=Q;Q--){var ce=T.g=A[Q];z=$t(ce,R,!0,T)&&z}if(ce=T.g=g,z=$t(ce,R,!0,T)&&z,z=$t(ce,R,!1,T)&&z,A)for(Q=0;Q<A.length;Q++)ce=T.g=A[Q],z=$t(ce,R,!1,T)&&z}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var g=this.i,T;for(T in g.g){for(var A=g.g[T],R=0;R<A.length;R++)Zn(A[R]);delete g.g[T],g.h--}}this.F=null},Rt.prototype.K=function(g,T,A,R){return this.i.add(String(g),T,!1,A,R)},Rt.prototype.L=function(g,T,A,R){return this.i.add(String(g),T,!0,A,R)};function $t(g,T,A,R){if(T=g.i.g[String(T)],!T)return!0;T=T.concat();for(var z=!0,Q=0;Q<T.length;++Q){var ce=T[Q];if(ce&&!ce.da&&ce.capture==A){var je=ce.listener,Yt=ce.ha||ce.src;ce.fa&&Ii(g.i,ce),z=je.call(Yt,R)!==!1&&z}}return z&&!R.defaultPrevented}function Vt(g,T,A){if(typeof g=="function")A&&(g=S(g,A));else if(g&&typeof g.handleEvent=="function")g=S(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:h.setTimeout(g,T||0)}function Ur(g){g.g=Vt(()=>{g.g=null,g.i&&(g.i=!1,Ur(g))},g.l);const T=g.h;g.h=null,g.m.apply(null,T)}class Xa extends de{constructor(T,A){super(),this.m=T,this.l=A,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Ur(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mi(g){de.call(this),this.h=g,this.g={}}b(mi,de);var io=[];function Rn(g){me(g.g,function(T,A){this.g.hasOwnProperty(A)&&$o(T)},g),g.g={}}mi.prototype.N=function(){mi.aa.N.call(this),Rn(this)},mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qn=h.JSON.stringify,oo=h.JSON.parse,ro=class{stringify(g){return h.JSON.stringify(g,void 0)}parse(g){return h.JSON.parse(g,void 0)}};function Ko(){}Ko.prototype.h=null;function Zt(g){return g.h||(g.h=g.i())}function Y(){}var j={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function te(){ae.call(this,"d")}b(te,ae);function pe(){ae.call(this,"c")}b(pe,ae);var Ce={},Pe=null;function Be(){return Pe=Pe||new Rt}Ce.La="serverreachability";function $e(g){ae.call(this,Ce.La,g)}b($e,ae);function ut(g){const T=Be();it(T,new $e(T))}Ce.STAT_EVENT="statevent";function Ft(g,T){ae.call(this,Ce.STAT_EVENT,g),this.stat=T}b(Ft,ae);function Ve(g){const T=Be();it(T,new Ft(T,g))}Ce.Ma="timingevent";function Re(g,T){ae.call(this,Ce.Ma,g),this.size=T}b(Re,ae);function we(g,T){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){g()},T)}function Ze(){this.g=!0}Ze.prototype.xa=function(){this.g=!1};function Ge(g,T,A,R,z,Q){g.info(function(){if(g.g)if(Q)for(var ce="",je=Q.split("&"),Yt=0;Yt<je.length;Yt++){var et=je[Yt].split("=");if(1<et.length){var en=et[0];et=et[1];var Kt=en.split("_");ce=2<=Kt.length&&Kt[1]=="type"?ce+(en+"="+et+"&"):ce+(en+"=redacted&")}}else ce=null;else ce=Q;return"XMLHTTP REQ ("+R+") [attempt "+z+"]: "+T+`
`+A+`
`+ce})}function Ye(g,T,A,R,z,Q,ce){g.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+z+"]: "+T+`
`+A+`
`+Q+" "+ce})}function ot(g,T,A,R){g.info(function(){return"XMLHTTP TEXT ("+T+"): "+gi(g,A)+(R?" "+R:"")})}function Vn(g,T){g.info(function(){return"TIMEOUT: "+T})}Ze.prototype.info=function(){};function gi(g,T){if(!g.g)return T;if(!T)return null;try{var A=JSON.parse(T);if(A){for(g=0;g<A.length;g++)if(Array.isArray(A[g])){var R=A[g];if(!(2>R.length)){var z=R[1];if(Array.isArray(z)&&!(1>z.length)){var Q=z[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ce=1;ce<z.length;ce++)z[ce]=""}}}}return qn(A)}catch{return T}}var yn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},so={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bi;function Mi(){}b(Mi,Ko),Mi.prototype.g=function(){return new XMLHttpRequest},Mi.prototype.i=function(){return{}},bi=new Mi;function xn(g,T,A,R){this.j=g,this.i=T,this.l=A,this.R=R||1,this.U=new mi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lt}function Lt(){this.i=null,this.g="",this.h=!1}var Wa={},Ns={};function yi(g,T,A){g.L=1,g.v=Gr(Gn(T)),g.m=A,g.P=!0,ao(g,null)}function ao(g,T){g.F=Date.now(),Or(g),g.A=Gn(g.v);var A=g.A,R=g.R;Array.isArray(R)||(R=[String(R)]),il(A.i,"t",R),g.C=0,A=g.j.J,g.h=new Lt,g.g=ju(g.j,A?T:null,!g.m),0<g.O&&(g.M=new Xa(S(g.Y,g,g.g),g.O)),T=g.U,A=g.g,R=g.ca;var z="readystatechange";Array.isArray(z)||(z&&(io[0]=z.toString()),z=io);for(var Q=0;Q<z.length;Q++){var ce=zo(A,z[Q],R||T.handleEvent,!1,T.h||T);if(!ce)break;T.g[ce.key]=ce}T=g.H?M(g.H):{},g.m?(g.u||(g.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,T)):(g.u="GET",g.g.ea(g.A,g.u,null,T)),ut(),Ge(g.i,g.u,g.A,g.l,g.R,g.m)}xn.prototype.ca=function(g){g=g.target;const T=this.M;T&&ni(g)==3?T.j():this.Y(g)},xn.prototype.Y=function(g){try{if(g==this.g)e:{const Kt=ni(this.g);var T=this.g.Ba();const go=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||$u(this.g)))){this.J||Kt!=4||T==7||(T==8||0>=go?ut(3):ut(2)),Jo(this);var A=this.g.Z();this.X=A;t:if(Ou(this)){var R=$u(this.g);g="";var z=R.length,Q=ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sn(this),Ni(this);var ce="";break t}this.h.i=new h.TextDecoder}for(T=0;T<z;T++)this.h.h=!0,g+=this.h.i.decode(R[T],{stream:!(Q&&T==z-1)});R.length=0,this.h.g+=g,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=A==200,Ye(this.i,this.u,this.A,this.l,this.R,Kt,A),this.o){if(this.T&&!this.K){t:{if(this.g){var je,Yt=this.g;if((je=Yt.g?Yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(je)){var et=je;break t}}et=null}if(A=et)ot(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Br(this,A);else{this.o=!1,this.s=3,Ve(12),sn(this),Ni(this);break e}}if(this.P){A=!0;let an;for(;!this.J&&this.C<ce.length;)if(an=Bu(this,ce),an==Ns){Kt==4&&(this.s=4,Ve(14),A=!1),ot(this.i,this.l,null,"[Incomplete Response]");break}else if(an==Wa){this.s=4,Ve(15),ot(this.i,this.l,ce,"[Invalid Chunk]"),A=!1;break}else ot(this.i,this.l,an,null),Br(this,an);if(Ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||ce.length!=0||this.h.h||(this.s=1,Ve(16),A=!1),this.o=this.o&&A,!A)ot(this.i,this.l,ce,"[Invalid Chunked Response]"),sn(this),Ni(this);else if(0<ce.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Xr(en),en.M=!0,Ve(11))}}else ot(this.i,this.l,ce,null),Br(this,ce);Kt==4&&sn(this),this.o&&!this.J&&(Kt==4?Xu(this.j,this):(this.o=!1,Or(this)))}else wd(this.g),A==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Ve(12)):(this.s=0,Ve(13)),sn(this),Ni(this)}}}catch{}finally{}};function Ou(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Bu(g,T){var A=g.C,R=T.indexOf(`
`,A);return R==-1?Ns:(A=Number(T.substring(A,R)),isNaN(A)?Wa:(R+=1,R+A>T.length?Ns:(T=T.slice(R,R+A),g.C=R+A,T)))}xn.prototype.cancel=function(){this.J=!0,sn(this)};function Or(g){g.S=Date.now()+g.I,Fu(g,g.I)}function Fu(g,T){if(g.B!=null)throw Error("WatchDog timer not null");g.B=we(S(g.ba,g),T)}function Jo(g){g.B&&(h.clearTimeout(g.B),g.B=null)}xn.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(Vn(this.i,this.A),this.L!=2&&(ut(),Ve(17)),sn(this),this.s=2,Ni(this)):Fu(this,this.S-g)};function Ni(g){g.j.G==0||g.J||Xu(g.j,g)}function sn(g){Jo(g);var T=g.M;T&&typeof T.ma=="function"&&T.ma(),g.M=null,Rn(g.U),g.g&&(T=g.g,g.g=null,T.abort(),T.ma())}function Br(g,T){try{var A=g.j;if(A.G!=0&&(A.g==g||Za(A.h,g))){if(!g.K&&Za(A.h,g)&&A.G==3){try{var R=A.Da.g.parse(T)}catch{R=null}if(Array.isArray(R)&&R.length==3){var z=R;if(z[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<g.F)zs(A),qs(A);else break e;ll(A),Ve(18)}}else A.za=z[1],0<A.za-A.T&&37500>z[2]&&A.F&&A.v==0&&!A.C&&(A.C=we(S(A.Za,A),6e3));if(1>=Ds(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else mo(A,11)}else if((g.K||A.g==g)&&zs(A),!ie(T))for(z=A.Da.g.parse(T),T=0;T<z.length;T++){let et=z[T];if(A.T=et[0],et=et[1],A.G==2)if(et[0]=="c"){A.K=et[1],A.ia=et[2];const en=et[3];en!=null&&(A.la=en,A.j.info("VER="+A.la));const Kt=et[4];Kt!=null&&(A.Aa=Kt,A.j.info("SVER="+A.Aa));const go=et[5];go!=null&&typeof go=="number"&&0<go&&(R=1.5*go,A.L=R,A.j.info("backChannelRequestTimeoutMs_="+R)),R=A;const an=g.g;if(an){const Oi=an.g?an.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oi){var Q=R.h;Q.g||Oi.indexOf("spdy")==-1&&Oi.indexOf("quic")==-1&&Oi.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ps(Q,Q.h),Q.h=null))}if(R.D){const cl=an.g?an.g.getResponseHeader("X-HTTP-Session-Id"):null;cl&&(R.ya=cl,vt(R.I,R.D,cl))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-g.F,A.j.info("Handshake RTT: "+A.R+"ms")),R=A;var ce=g;if(R.qa=Zu(R,R.J?R.ia:null,R.W),ce.K){bn(R.h,ce);var je=ce,Yt=R.L;Yt&&(je.I=Yt),je.B&&(Jo(je),Or(je)),R.g=ce}else Ju(R);0<A.i.length&&Gs(A)}else et[0]!="stop"&&et[0]!="close"||mo(A,7);else A.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?mo(A,7):sl(A):et[0]!="noop"&&A.l&&A.l.ta(et),A.v=0)}}ut(4)}catch{}}var qu=class{constructor(g,T){this.g=g,this.map=T}};function lo(g){this.l=g||10,h.PerformanceNavigationTiming?(g=h.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ks(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ds(g){return g.h?1:g.g?g.g.size:0}function Za(g,T){return g.h?g.h==T:g.g?g.g.has(T):!1}function Ps(g,T){g.g?g.g.add(T):g.h=T}function bn(g,T){g.h&&g.h==T?g.h=null:g.g&&g.g.has(T)&&g.g.delete(T)}lo.prototype.cancel=function(){if(this.i=ja(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function ja(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let T=g.i;for(const A of g.g.values())T=T.concat(A.D);return T}return O(g.i)}function Ed(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(m(g)){for(var T=[],A=g.length,R=0;R<A;R++)T.push(g[R]);return T}T=[],A=0;for(R in g)T[A++]=g[R];return T}function Vs(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(m(g)||typeof g=="string"){var T=[];g=g.length;for(var A=0;A<g;A++)T.push(A);return T}T=[],A=0;for(const R in g)T[A++]=R;return T}}}function el(g,T){if(g.forEach&&typeof g.forEach=="function")g.forEach(T,void 0);else if(m(g)||typeof g=="string")Array.prototype.forEach.call(g,T,void 0);else for(var A=Vs(g),R=Ed(g),z=R.length,Q=0;Q<z;Q++)T.call(void 0,R[Q],A&&A[Q],g)}var Fr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sd(g,T){if(g){g=g.split("&");for(var A=0;A<g.length;A++){var R=g[A].indexOf("="),z=null;if(0<=R){var Q=g[A].substring(0,R);z=g[A].substring(R+1)}else Q=g[A];T(Q,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function qt(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof qt){this.h=g.h,qr(this,g.j),this.o=g.o,this.g=g.g,Qo(this,g.s),this.l=g.l;var T=g.i,A=new co;A.i=T.i,T.g&&(A.g=new Map(T.g),A.h=T.h),uo(this,A),this.m=g.m}else g&&(T=String(g).match(Fr))?(this.h=!1,qr(this,T[1]||"",!0),this.o=jn(T[2]||""),this.g=jn(T[3]||"",!0),Qo(this,T[4]),this.l=jn(T[5]||"",!0),uo(this,T[6]||"",!0),this.m=jn(T[7]||"")):(this.h=!1,this.i=new co(null,this.h))}qt.prototype.toString=function(){var g=[],T=this.j;T&&g.push(zr(T,tl,!0),":");var A=this.g;return(A||T=="file")&&(g.push("//"),(T=this.o)&&g.push(zr(T,tl,!0),"@"),g.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&g.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(zr(A,A.charAt(0)=="/"?Ad:nl,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",zr(A,Ls)),g.join("")};function Gn(g){return new qt(g)}function qr(g,T,A){g.j=A?jn(T,!0):T,g.j&&(g.j=g.j.replace(/:$/,""))}function Qo(g,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);g.s=T}else g.s=null}function uo(g,T,A){T instanceof co?(g.i=T,zu(g.i,g.h)):(A||(T=zr(T,Cd)),g.i=new co(T,g.h))}function vt(g,T,A){g.i.set(T,A)}function Gr(g){return vt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function jn(g,T){return g?T?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function zr(g,T,A){return typeof g=="string"?(g=encodeURI(g).replace(T,Gu),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Gu(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var tl=/[#\/\?@]/g,nl=/[#\?:]/g,Ad=/[#\?]/g,Cd=/[#\?@]/g,Ls=/#/g;function co(g,T){this.h=this.g=null,this.i=g||null,this.j=!!T}function ei(g){g.g||(g.g=new Map,g.h=0,g.i&&Sd(g.i,function(T,A){g.add(decodeURIComponent(T.replace(/\+/g," ")),A)}))}t=co.prototype,t.add=function(g,T){ei(this),this.i=null,g=ki(this,g);var A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(T),this.h+=1,this};function fo(g,T){ei(g),T=ki(g,T),g.g.has(T)&&(g.i=null,g.h-=g.g.get(T).length,g.g.delete(T))}function ho(g,T){return ei(g),T=ki(g,T),g.g.has(T)}t.forEach=function(g,T){ei(this),this.g.forEach(function(A,R){A.forEach(function(z){g.call(T,z,R,this)},this)},this)},t.na=function(){ei(this);const g=Array.from(this.g.values()),T=Array.from(this.g.keys()),A=[];for(let R=0;R<T.length;R++){const z=g[R];for(let Q=0;Q<z.length;Q++)A.push(T[R])}return A},t.V=function(g){ei(this);let T=[];if(typeof g=="string")ho(this,g)&&(T=T.concat(this.g.get(ki(this,g))));else{g=Array.from(this.g.values());for(let A=0;A<g.length;A++)T=T.concat(g[A])}return T},t.set=function(g,T){return ei(this),this.i=null,g=ki(this,g),ho(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[T]),this.h+=1,this},t.get=function(g,T){return g?(g=this.V(g),0<g.length?String(g[0]):T):T};function il(g,T,A){fo(g,T),0<A.length&&(g.i=null,g.g.set(ki(g,T),O(A)),g.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],T=Array.from(this.g.keys());for(var A=0;A<T.length;A++){var R=T[A];const Q=encodeURIComponent(String(R)),ce=this.V(R);for(R=0;R<ce.length;R++){var z=Q;ce[R]!==""&&(z+="="+encodeURIComponent(String(ce[R]))),g.push(z)}}return this.i=g.join("&")};function ki(g,T){return T=String(T),g.j&&(T=T.toLowerCase()),T}function zu(g,T){T&&!g.j&&(ei(g),g.i=null,g.g.forEach(function(A,R){var z=R.toLowerCase();R!=z&&(fo(this,R),il(this,z,A))},g)),g.j=T}function Hr(g,T){const A=new Ze;if(h.Image){const R=new Image;R.onload=I(ti,A,"TestLoadImage: loaded",!0,T,R),R.onerror=I(ti,A,"TestLoadImage: error",!1,T,R),R.onabort=I(ti,A,"TestLoadImage: abort",!1,T,R),R.ontimeout=I(ti,A,"TestLoadImage: timeout",!1,T,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=g}else T(!1)}function vi(g,T){const A=new Ze,R=new AbortController,z=setTimeout(()=>{R.abort(),ti(A,"TestPingServer: timeout",!1,T)},1e4);fetch(g,{signal:R.signal}).then(Q=>{clearTimeout(z),Q.ok?ti(A,"TestPingServer: ok",!0,T):ti(A,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(z),ti(A,"TestPingServer: error",!1,T)})}function ti(g,T,A,R,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),R(A)}catch{}}function $r(){this.g=new ro}function Di(g,T,A){const R=A||"";try{el(g,function(z,Q){let ce=z;p(z)&&(ce=qn(z)),T.push(R+Q+"="+encodeURIComponent(ce))})}catch(z){throw T.push(R+"type="+encodeURIComponent("_badmap")),z}}function Xo(g){this.l=g.Ub||null,this.j=g.eb||!1}b(Xo,Ko),Xo.prototype.g=function(){return new po(this.l,this.j)},Xo.prototype.i=function(g){return function(){return g}}({});function po(g,T){Rt.call(this),this.D=g,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(po,Rt),t=po.prototype,t.open=function(g,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=T,this.readyState=1,Vi(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(T.body=g),(this.D||h).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pi(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Vi(this)),this.g&&(this.readyState=3,Vi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ol(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function ol(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var T=g.value?g.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!g.done}))&&(this.response=this.responseText+=T)}g.done?Pi(this):Vi(this),this.readyState==3&&ol(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Pi(this))},t.Qa=function(g){this.g&&(this.response=g,Pi(this))},t.ga=function(){this.g&&Pi(this)};function Pi(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Vi(g)}t.setRequestHeader=function(g,T){this.u.append(g,T)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],T=this.h.entries();for(var A=T.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=T.next();return g.join(`\r
`)};function Vi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function rl(g){let T="";return me(g,function(A,R){T+=R,T+=":",T+=A,T+=`\r
`}),T}function jt(g,T,A){e:{for(R in A){var R=!1;break e}R=!0}R||(A=rl(A),typeof g=="string"?A!=null&&encodeURIComponent(String(A)):vt(g,T,A))}function ct(g){Rt.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(ct,Rt);var Us=/^https?$/i,Yr=["POST","PUT"];t=ct.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,T,A,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);T=T?T.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bi.g(),this.v=this.o?Zt(this.o):Zt(bi),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(T,String(g),!0),this.B=!1}catch(Q){Hu(this,Q);return}if(g=A||"",A=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var z in R)A.set(z,R[z]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Q of R.keys())A.set(Q,R.get(Q));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(A.keys()).find(Q=>Q.toLowerCase()=="content-type"),z=h.FormData&&g instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Yr,T,void 0))||R||z||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ce]of A)this.g.setRequestHeader(Q,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kr(this),this.u=!0,this.g.send(g),this.u=!1}catch(Q){Hu(this,Q)}};function Hu(g,T){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=T,g.m=5,Os(g),Li(g)}function Os(g){g.A||(g.A=!0,it(g,"complete"),it(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,it(this,"complete"),it(this,"abort"),Li(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Li(this,!0)),ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Bs(this):this.bb())},t.bb=function(){Bs(this)};function Bs(g){if(g.h&&typeof c<"u"&&(!g.v[1]||ni(g)!=4||g.Z()!=2)){if(g.u&&ni(g)==4)Vt(g.Ea,0,g);else if(it(g,"readystatechange"),ni(g)==4){g.h=!1;try{const ce=g.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var A;if(!(A=T)){var R;if(R=ce===0){var z=String(g.D).match(Fr)[1]||null;!z&&h.self&&h.self.location&&(z=h.self.location.protocol.slice(0,-1)),R=!Us.test(z?z.toLowerCase():"")}A=R}if(A)it(g,"complete"),it(g,"success");else{g.m=6;try{var Q=2<ni(g)?g.g.statusText:""}catch{Q=""}g.l=Q+" ["+g.Z()+"]",Os(g)}}finally{Li(g)}}}}function Li(g,T){if(g.g){Kr(g);const A=g.g,R=g.v[0]?()=>{}:null;g.g=null,g.v=null,T||it(g,"ready");try{A.onreadystatechange=R}catch{}}}function Kr(g){g.I&&(h.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function ni(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<ni(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var T=this.g.responseText;return g&&T.indexOf(g)==0&&(T=T.substring(g.length)),oo(T)}};function $u(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function wd(g){const T={};g=(g.g&&2<=ni(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<g.length;R++){if(ie(g[R]))continue;var A=k(g[R]);const z=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const Q=T[z]||[];T[z]=Q,Q.push(A)}D(T,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jr(g,T,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||T}function Fs(g){this.Aa=0,this.i=[],this.j=new Ze,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jr("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jr("baseRetryDelayMs",5e3,g),this.cb=Jr("retryDelaySeedMs",1e4,g),this.Wa=Jr("forwardChannelMaxRetries",2,g),this.wa=Jr("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new lo(g&&g.concurrentRequestLimit),this.Da=new $r,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Fs.prototype,t.la=8,t.G=1,t.connect=function(g,T,A,R){Ve(0),this.W=g,this.H=T||{},A&&R!==void 0&&(this.H.OSID=A,this.H.OAID=R),this.F=this.X,this.I=Zu(this,null,this.W),Gs(this)};function sl(g){if(Yu(g),g.G==3){var T=g.U++,A=Gn(g.I);if(vt(A,"SID",g.K),vt(A,"RID",T),vt(A,"TYPE","terminate"),Qr(g,A),T=new xn(g,g.j,T),T.L=2,T.v=Gr(Gn(A)),A=!1,h.navigator&&h.navigator.sendBeacon)try{A=h.navigator.sendBeacon(T.v.toString(),"")}catch{}!A&&h.Image&&(new Image().src=T.v,A=!0),A||(T.g=ju(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Or(T)}Wu(g)}function qs(g){g.g&&(Xr(g),g.g.cancel(),g.g=null)}function Yu(g){qs(g),g.u&&(h.clearTimeout(g.u),g.u=null),zs(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&h.clearTimeout(g.s),g.s=null)}function Gs(g){if(!ks(g.h)&&!g.s){g.s=!0;var T=g.Ga;he||U(),ye||(he(),ye=!0),Oe.add(T,g),g.B=0}}function Id(g,T){return Ds(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=T.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=we(S(g.Ga,g,T),ul(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const z=new xn(this,this.j,g);let Q=this.o;if(this.S&&(Q?(Q=M(Q),L(Q,this.S)):Q=this.S),this.m!==null||this.O||(z.H=Q,Q=null),this.P)e:{for(var T=0,A=0;A<this.i.length;A++){t:{var R=this.i[A];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(T+=R,4096<T){T=A;break e}if(T===4096||A===this.i.length-1){T=A+1;break e}}T=1e3}else T=1e3;T=Ku(this,z,T),A=Gn(this.I),vt(A,"RID",g),vt(A,"CVER",22),this.D&&vt(A,"X-HTTP-Session-Id",this.D),Qr(this,A),Q&&(this.O?T="headers="+encodeURIComponent(String(rl(Q)))+"&"+T:this.m&&jt(A,this.m,Q)),Ps(this.h,z),this.Ua&&vt(A,"TYPE","init"),this.P?(vt(A,"$req",T),vt(A,"SID","null"),z.T=!0,yi(z,A,null)):yi(z,A,T),this.G=2}}else this.G==3&&(g?al(this,g):this.i.length==0||ks(this.h)||al(this))};function al(g,T){var A;T?A=T.l:A=g.U++;const R=Gn(g.I);vt(R,"SID",g.K),vt(R,"RID",A),vt(R,"AID",g.T),Qr(g,R),g.m&&g.o&&jt(R,g.m,g.o),A=new xn(g,g.j,A,g.B+1),g.m===null&&(A.H=g.o),T&&(g.i=T.D.concat(g.i)),T=Ku(g,A,1e3),A.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Ps(g.h,A),yi(A,R,T)}function Qr(g,T){g.H&&me(g.H,function(A,R){vt(T,R,A)}),g.l&&el({},function(A,R){vt(T,R,A)})}function Ku(g,T,A){A=Math.min(g.i.length,A);var R=g.l?S(g.l.Na,g.l,g):null;e:{var z=g.i;let Q=-1;for(;;){const ce=["count="+A];Q==-1?0<A?(Q=z[0].g,ce.push("ofs="+Q)):Q=0:ce.push("ofs="+Q);let je=!0;for(let Yt=0;Yt<A;Yt++){let et=z[Yt].g;const en=z[Yt].map;if(et-=Q,0>et)Q=Math.max(0,z[Yt].g-100),je=!1;else try{Di(en,ce,"req"+et+"_")}catch{R&&R(en)}}if(je){R=ce.join("&");break e}}}return g=g.i.splice(0,A),T.D=g,R}function Ju(g){if(!g.g&&!g.u){g.Y=1;var T=g.Fa;he||U(),ye||(he(),ye=!0),Oe.add(T,g),g.v=0}}function ll(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=we(S(g.Fa,g),ul(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,Qu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=we(S(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ve(10),qs(this),Qu(this))};function Xr(g){g.A!=null&&(h.clearTimeout(g.A),g.A=null)}function Qu(g){g.g=new xn(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var T=Gn(g.qa);vt(T,"RID","rpc"),vt(T,"SID",g.K),vt(T,"AID",g.T),vt(T,"CI",g.F?"0":"1"),!g.F&&g.ja&&vt(T,"TO",g.ja),vt(T,"TYPE","xmlhttp"),Qr(g,T),g.m&&g.o&&jt(T,g.m,g.o),g.L&&(g.g.I=g.L);var A=g.g;g=g.ia,A.L=1,A.v=Gr(Gn(T)),A.m=null,A.P=!0,ao(A,g)}t.Za=function(){this.C!=null&&(this.C=null,qs(this),ll(this),Ve(19))};function zs(g){g.C!=null&&(h.clearTimeout(g.C),g.C=null)}function Xu(g,T){var A=null;if(g.g==T){zs(g),Xr(g),g.g=null;var R=2}else if(Za(g.h,T))A=T.D,bn(g.h,T),R=1;else return;if(g.G!=0){if(T.o)if(R==1){A=T.m?T.m.length:0,T=Date.now()-T.F;var z=g.B;R=Be(),it(R,new Re(R,A)),Gs(g)}else Ju(g);else if(z=T.s,z==3||z==0&&0<T.X||!(R==1&&Id(g,T)||R==2&&ll(g)))switch(A&&0<A.length&&(T=g.h,T.i=T.i.concat(A)),z){case 1:mo(g,5);break;case 4:mo(g,10);break;case 3:mo(g,6);break;default:mo(g,2)}}}function ul(g,T){let A=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(A*=2),A*T}function mo(g,T){if(g.j.info("Error code "+T),T==2){var A=S(g.fb,g),R=g.Xa;const z=!R;R=new qt(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||qr(R,"https"),Gr(R),z?Hr(R.toString(),A):vi(R.toString(),A)}else Ve(2);g.G=0,g.l&&g.l.sa(T),Wu(g),Yu(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Ve(2)):(this.j.info("Failed to ping google.com"),Ve(1))};function Wu(g){if(g.G=0,g.ka=[],g.l){const T=ja(g.h);(T.length!=0||g.i.length!=0)&&(F(g.ka,T),F(g.ka,g.i),g.h.i.length=0,O(g.i),g.i.length=0),g.l.ra()}}function Zu(g,T,A){var R=A instanceof qt?Gn(A):new qt(A);if(R.g!="")T&&(R.g=T+"."+R.g),Qo(R,R.s);else{var z=h.location;R=z.protocol,T=T?T+"."+z.hostname:z.hostname,z=+z.port;var Q=new qt(null);R&&qr(Q,R),T&&(Q.g=T),z&&Qo(Q,z),A&&(Q.l=A),R=Q}return A=g.D,T=g.ya,A&&T&&vt(R,A,T),vt(R,"VER",g.la),Qr(g,R),R}function ju(g,T,A){if(T&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=g.Ca&&!g.pa?new ct(new Xo({eb:A})):new ct(g.pa),T.Ha(g.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ec(){}t=ec.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hs(){}Hs.prototype.g=function(g,T){return new Mn(g,T)};function Mn(g,T){Rt.call(this),this.g=new Fs(T),this.l=g,this.h=T&&T.messageUrlParams||null,g=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(g?g["X-WebChannel-Content-Type"]=T.messageContentType:g={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(g?g["X-WebChannel-Client-Profile"]=T.va:g={"X-WebChannel-Client-Profile":T.va}),this.g.S=g,(g=T&&T.Sb)&&!ie(g)&&(this.g.m=g),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!ie(T)&&(this.g.D=T,g=this.h,g!==null&&T in g&&(g=this.h,T in g&&delete g[T])),this.j=new Ui(this)}b(Mn,Rt),Mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){sl(this.g)},Mn.prototype.o=function(g){var T=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.u&&(A={},A.__data__=qn(g),g=A);T.i.push(new qu(T.Ya++,g)),T.G==3&&Gs(T)},Mn.prototype.N=function(){this.g.l=null,delete this.j,sl(this.g),delete this.g,Mn.aa.N.call(this)};function tc(g){te.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var T=g.__sm__;if(T){e:{for(const A in T){g=A;break e}g=void 0}(this.i=g)&&(g=this.i,T=T!==null&&g in T?T[g]:void 0),this.data=T}else this.data=g}b(tc,te);function nc(){pe.call(this),this.status=1}b(nc,pe);function Ui(g){this.g=g}b(Ui,ec),Ui.prototype.ua=function(){it(this.g,"a")},Ui.prototype.ta=function(g){it(this.g,new tc(g))},Ui.prototype.sa=function(g){it(this.g,new nc)},Ui.prototype.ra=function(){it(this.g,"b")},Hs.prototype.createWebChannel=Hs.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,MA=function(){return new Hs},bA=function(){return Be()},xA=Ce,sm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yn.NO_ERROR=0,yn.TIMEOUT=8,yn.HTTP_ERROR=6,Sf=yn,so.COMPLETE="complete",RA=so,Y.EventType=j,j.OPEN="a",j.CLOSE="b",j.ERROR="c",j.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,iu=Y,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,IA=ct}).apply(typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{});const $0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new Um("@firebase/firestore");function tu(){return Ts.logLevel}function ve(t,...e){if(Ts.logLevel<=We.DEBUG){const n=e.map(Xm);Ts.debug(`Firestore (${Ka}): ${t}`,...n)}}function Bo(t,...e){if(Ts.logLevel<=We.ERROR){const n=e.map(Xm);Ts.error(`Firestore (${Ka}): ${t}`,...n)}}function ka(t,...e){if(Ts.logLevel<=We.WARN){const n=e.map(Xm);Ts.warn(`Firestore (${Ka}): ${t}`,...n)}}function Xm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t="Unexpected state"){const e=`FIRESTORE (${Ka}) INTERNAL ASSERTION FAILED: `+t;throw Bo(e),new Error(e)}function gt(t,e){t||De()}function Ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Go{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(En.UNAUTHENTICATED))}shutdown(){}}class h4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class p4{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){gt(this.o===void 0);let i=this.i;const r=m=>this.i!==i?(i=this.i,n(m)):Promise.resolve();let a=new br;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new br,e.enqueueRetryable(()=>r(this.currentUser))};const c=()=>{const m=a;e.enqueueRetryable(async()=>{await m.promise,await r(this.currentUser)})},h=m=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>h(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new br)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(gt(typeof i.accessToken=="string"),new NA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string"),new En(e)}}class m4{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=En.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class g4{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new m4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class y4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class v4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){gt(this.o===void 0);const i=a=>{a.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const r=a=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>r(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?r(a):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(gt(typeof n.token=="string"),this.R=n.token,new y4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=_4(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<n&&(i+=e.charAt(r[a]%e.length))}return i}}function st(t,e){return t<e?-1:t>e?1:0}function Da(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Se(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wt.fromMillis(Date.now())}static fromDate(e){return Wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Wt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Le(e)}static min(){return new Le(new Wt(0,0))}static max(){return new Le(new Wt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,i){n===void 0?n=0:n>e.length&&De(),i===void 0?i=e.length-n:i>e.length-n&&De(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return vu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vu?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const a=e.get(r),c=n.get(r);if(a<c)return-1;if(a>c)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class bt extends vu{construct(e,n,i){return new bt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Se(le.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new bt(n)}static emptyPath(){return new bt([])}}const T4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends vu{construct(e,n,i){return new hn(e,n,i)}static isValidIdentifier(e){return T4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new hn(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const a=()=>{if(i.length===0)throw new Se(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new Se(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[r+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Se(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(i+=h,r++):(a(),r++)}if(a(),c)throw new Se(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(n)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(bt.fromString(e))}static fromName(e){return new Ie(bt.fromString(e).popFirst(5))}static empty(){return new Ie(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new bt(e.slice()))}}function E4(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Le.fromTimestamp(i===1e9?new Wt(n+1,0):new Wt(n,i));return new kr(r,Ie.empty(),e)}function S4(t){return new kr(t.readTime,t.key,-1)}class kr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new kr(Le.min(),Ie.empty(),-1)}static max(){return new kr(Le.max(),Ie.empty(),-1)}}function A4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(t.documentKey,e.documentKey),n!==0?n:st(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class w4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ku(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==C4)throw t;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ue.reject(n)}static resolve(e){return new ue((n,i)=>{n(e)})}static reject(e){return new ue((n,i)=>{i(e)})}static waitFor(e){return new ue((n,i)=>{let r=0,a=0,c=!1;e.forEach(h=>{++r,h.next(()=>{++a,c&&a===r&&n()},m=>i(m))}),c=!0,a===r&&n()})}static or(e){let n=ue.resolve(!1);for(const i of e)n=n.next(r=>r?ue.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,a)=>{i.push(n.call(this,r,a))}),this.waitFor(i)}static mapArray(e,n){return new ue((i,r)=>{const a=e.length,c=new Array(a);let h=0;for(let m=0;m<a;m++){const p=m;n(e[p]).next(v=>{c[p]=v,++h,h===a&&i(c)},v=>r(v))}})}static doWhile(e,n){return new ue((i,r)=>{const a=()=>{e()===!0?n().next(()=>{a()},r):i()};a()})}}function I4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Du(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Wm.oe=-1;function id(t){return t==null}function Ff(t){return t===0&&1/t==-1/0}function R4(t){return typeof t=="number"&&Number.isInteger(t)&&!Ff(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function DA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n){this.comparator=e,this.root=n||dn.EMPTY}insert(e,n){return new Nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cf(this.root,e,this.comparator,!1)}getReverseIterator(){return new cf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cf(this.root,e,this.comparator,!0)}}class cf{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,n,i,r,a){this.key=e,this.value=n,this.color=i??dn.RED,this.left=r??dn.EMPTY,this.right=a??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,a){return new dn(e??this.key,n??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,n,i),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return dn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,n,i,r,a){return this}insert(e,n,i){return new dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new K0(this.data.getIterator())}getIteratorFrom(e){return new K0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pn(this.comparator);return n.data=e,n}}class K0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new pn(hn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Da(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new PA("Invalid base64 string: "+a):a}}(e);return new mn(n)}static fromUint8Array(e){const n=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(e);return new mn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const x4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(t){if(gt(!!t),typeof t=="string"){let e=0;const n=x4.exec(t);if(gt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Bt(t.seconds),nanos:Bt(t.nanos)}}function Bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Es(t){return typeof t=="string"?mn.fromBase64String(t):mn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jm(t){const e=t.mapValue.fields.__previous_value__;return Zm(e)?jm(e):e}function _u(t){const e=Dr(t.mapValue.fields.__local_write_time__.timestampValue);return new Wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n,i,r,a,c,h,m,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=p}}class Tu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Tu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Tu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff={mapValue:{}};function Ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zm(t)?4:N4(t)?9007199254740991:M4(t)?10:11:De()}function eo(t,e){if(t===e)return!0;const n=Ss(t);if(n!==Ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _u(t).isEqual(_u(e));case 3:return function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=Dr(r.timestampValue),h=Dr(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,a){return Es(r.bytesValue).isEqual(Es(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,a){return Bt(r.geoPointValue.latitude)===Bt(a.geoPointValue.latitude)&&Bt(r.geoPointValue.longitude)===Bt(a.geoPointValue.longitude)}(t,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return Bt(r.integerValue)===Bt(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=Bt(r.doubleValue),h=Bt(a.doubleValue);return c===h?Ff(c)===Ff(h):isNaN(c)&&isNaN(h)}return!1}(t,e);case 9:return Da(t.arrayValue.values||[],e.arrayValue.values||[],eo);case 10:case 11:return function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(Y0(c)!==Y0(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!eo(c[m],h[m])))return!1;return!0}(t,e);default:return De()}}function Eu(t,e){return(t.values||[]).find(n=>eo(n,e))!==void 0}function Pa(t,e){if(t===e)return 0;const n=Ss(t),i=Ss(e);if(n!==i)return st(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(t.booleanValue,e.booleanValue);case 2:return function(a,c){const h=Bt(a.integerValue||a.doubleValue),m=Bt(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(t,e);case 3:return J0(t.timestampValue,e.timestampValue);case 4:return J0(_u(t),_u(e));case 5:return st(t.stringValue,e.stringValue);case 6:return function(a,c){const h=Es(a),m=Es(c);return h.compareTo(m)}(t.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),m=c.split("/");for(let p=0;p<h.length&&p<m.length;p++){const v=st(h[p],m[p]);if(v!==0)return v}return st(h.length,m.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,c){const h=st(Bt(a.latitude),Bt(c.latitude));return h!==0?h:st(Bt(a.longitude),Bt(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Q0(t.arrayValue,e.arrayValue);case 10:return function(a,c){var h,m,p,v;const E=a.fields||{},S=c.fields||{},I=(h=E.value)===null||h===void 0?void 0:h.arrayValue,b=(m=S.value)===null||m===void 0?void 0:m.arrayValue,O=st(((p=I==null?void 0:I.values)===null||p===void 0?void 0:p.length)||0,((v=b==null?void 0:b.values)===null||v===void 0?void 0:v.length)||0);return O!==0?O:Q0(I,b)}(t.mapValue,e.mapValue);case 11:return function(a,c){if(a===ff.mapValue&&c===ff.mapValue)return 0;if(a===ff.mapValue)return 1;if(c===ff.mapValue)return-1;const h=a.fields||{},m=Object.keys(h),p=c.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const S=st(m[E],v[E]);if(S!==0)return S;const I=Pa(h[m[E]],p[v[E]]);if(I!==0)return I}return st(m.length,v.length)}(t.mapValue,e.mapValue);default:throw De()}}function J0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return st(t,e);const n=Dr(t),i=Dr(e),r=st(n.seconds,i.seconds);return r!==0?r:st(n.nanos,i.nanos)}function Q0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const a=Pa(n[r],i[r]);if(a)return a}return st(n.length,i.length)}function Va(t){return am(t)}function am(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Dr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const a of n.values||[])r?r=!1:i+=",",i+=am(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",a=!0;for(const c of i)a?a=!1:r+=",",r+=`${c}:${am(n.fields[c])}`;return r+"}"}(t.mapValue):De()}function lm(t){return!!t&&"integerValue"in t}function eg(t){return!!t&&"arrayValue"in t}function X0(t){return!!t&&"nullValue"in t}function W0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Af(t){return!!t&&"mapValue"in t}function M4(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function fu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Rs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=fu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function N4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Af(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(n)}setAll(e){let n=hn.emptyPath(),i={},r=[];e.forEach((c,h)=>{if(!n.isImmediateParentOf(h)){const m=this.getFieldsMap(n);this.applyChanges(m,i,r),i={},r=[],n=h.popLast()}c?i[h.lastSegment()]=fu(c):r.push(h.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,i,r)}delete(e){const n=this.field(e.popLast());Af(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return eo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Af(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Rs(n,(r,a)=>e[r]=a);for(const r of i)delete e[r]}clone(){return new Bn(fu(this.value))}}function VA(t){const e=[];return Rs(t.fields,(n,i)=>{const r=new hn([n]);if(Af(i)){const a=VA(i.mapValue).fields;if(a.length===0)e.push(r);else for(const c of a)e.push(r.child(c))}else e.push(r)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n,i,r,a,c,h){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Sn(e,0,Le.min(),Le.min(),Le.min(),Bn.empty(),0)}static newFoundDocument(e,n,i,r){return new Sn(e,1,n,Le.min(),i,r,0)}static newNoDocument(e,n){return new Sn(e,2,n,Le.min(),Le.min(),Bn.empty(),0)}static newUnknownDocument(e,n){return new Sn(e,3,n,Le.min(),Le.min(),Bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n){this.position=e,this.inclusive=n}}function Z0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const a=e[r],c=t.position[r];if(a.field.isKeyField()?i=Ie.comparator(Ie.fromName(c.referenceValue),n.key):i=Pa(c,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function j0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!eo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n="asc"){this.field=e,this.dir=n}}function k4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{}class Xt extends LA{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new P4(e,n,i):n==="array-contains"?new U4(e,i):n==="in"?new O4(e,i):n==="not-in"?new B4(e,i):n==="array-contains-any"?new F4(e,i):new Xt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new V4(e,i):new L4(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Pa(n,this.value)):n!==null&&Ss(this.value)===Ss(n)&&this.matchesComparison(Pa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class to extends LA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new to(e,n)}matches(e){return UA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function UA(t){return t.op==="and"}function OA(t){return D4(t)&&UA(t)}function D4(t){for(const e of t.filters)if(e instanceof to)return!1;return!0}function um(t){if(t instanceof Xt)return t.field.canonicalString()+t.op.toString()+Va(t.value);if(OA(t))return t.filters.map(e=>um(e)).join(",");{const e=t.filters.map(n=>um(n)).join(",");return`${t.op}(${e})`}}function BA(t,e){return t instanceof Xt?function(i,r){return r instanceof Xt&&i.op===r.op&&i.field.isEqual(r.field)&&eo(i.value,r.value)}(t,e):t instanceof to?function(i,r){return r instanceof to&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((a,c,h)=>a&&BA(c,r.filters[h]),!0):!1}(t,e):void De()}function FA(t){return t instanceof Xt?function(n){return`${n.field.canonicalString()} ${n.op} ${Va(n.value)}`}(t):t instanceof to?function(n){return n.op.toString()+" {"+n.getFilters().map(FA).join(" ,")+"}"}(t):"Filter"}class P4 extends Xt{constructor(e,n,i){super(e,n,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class V4 extends Xt{constructor(e,n){super(e,"in",n),this.keys=qA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class L4 extends Xt{constructor(e,n){super(e,"not-in",n),this.keys=qA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function qA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ie.fromName(i.referenceValue))}class U4 extends Xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return eg(n)&&Eu(n.arrayValue,this.value)}}class O4 extends Xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Eu(this.value.arrayValue,n)}}class B4 extends Xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Eu(this.value.arrayValue,n)}}class F4 extends Xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Eu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,n=null,i=[],r=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=c,this.endAt=h,this.ue=null}}function eE(t,e=null,n=[],i=[],r=null,a=null,c=null){return new q4(t,e,n,i,r,a,c)}function tg(t){const e=Ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>um(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),id(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Va(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Va(i)).join(",")),e.ue=n}return e.ue}function ng(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!k4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!BA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!j0(t.startAt,e.startAt)&&j0(t.endAt,e.endAt)}function cm(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n=null,i=[],r=[],a=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=m,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function G4(t,e,n,i,r,a,c,h){return new od(t,e,n,i,r,a,c,h)}function rd(t){return new od(t)}function tE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function z4(t){return t.collectionGroup!==null}function du(t){const e=Ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new pn(hn.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Gf(a,i))}),n.has(hn.keyField().canonicalString())||e.ce.push(new Gf(hn.keyField(),i))}return e.ce}function Wi(t){const e=Ue(t);return e.le||(e.le=H4(e,du(t))),e.le}function H4(t,e){if(t.limitType==="F")return eE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const a=r.dir==="desc"?"asc":"desc";return new Gf(r.field,a)});const n=t.endAt?new qf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new qf(t.startAt.position,t.startAt.inclusive):null;return eE(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function fm(t,e,n){return new od(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sd(t,e){return ng(Wi(t),Wi(e))&&t.limitType===e.limitType}function GA(t){return`${tg(Wi(t))}|lt:${t.limitType}`}function Ta(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>FA(r)).join(", ")}]`),id(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Va(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Va(r)).join(",")),`Target(${i})`}(Wi(t))}; limitType=${t.limitType})`}function ad(t,e){return e.isFoundDocument()&&function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ie.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(t,e)&&function(i,r){for(const a of du(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(c,h,m){const p=Z0(c,h,m);return c.inclusive?p<=0:p<0}(i.startAt,du(i),r)||i.endAt&&!function(c,h,m){const p=Z0(c,h,m);return c.inclusive?p>=0:p>0}(i.endAt,du(i),r))}(t,e)}function $4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zA(t){return(e,n)=>{let i=!1;for(const r of du(t)){const a=Y4(r,e,n);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function Y4(t,e,n){const i=t.field.isKeyField()?Ie.comparator(e.key,n.key):function(a,c,h){const m=c.data.field(a),p=h.data.field(a);return m!==null&&p!==null?Pa(m,p):De()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Rs(this.inner,(n,i)=>{for(const[r,a]of i)e(r,a)})}isEmpty(){return DA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=new Nt(Ie.comparator);function Fo(){return K4}const HA=new Nt(Ie.comparator);function ou(...t){let e=HA;for(const n of t)e=e.insert(n.key,n);return e}function $A(t){let e=HA;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ms(){return hu()}function YA(){return hu()}function hu(){return new Ja(t=>t.toString(),(t,e)=>t.isEqual(e))}const J4=new Nt(Ie.comparator),Q4=new pn(Ie.comparator);function Qe(...t){let e=Q4;for(const n of t)e=e.add(n);return e}const X4=new pn(st);function W4(){return X4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ff(e)?"-0":e}}function KA(t){return{integerValue:""+t}}function Z4(t,e){return R4(e)?KA(e):ig(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this._=void 0}}function j4(t,e,n){return t instanceof Su?function(r,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&Zm(a)&&(a=jm(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(n,e):t instanceof Au?QA(t,e):t instanceof Cu?XA(t,e):function(r,a){const c=JA(r,a),h=nE(c)+nE(r.Pe);return lm(c)&&lm(r.Pe)?KA(h):ig(r.serializer,h)}(t,e)}function e3(t,e,n){return t instanceof Au?QA(t,e):t instanceof Cu?XA(t,e):n}function JA(t,e){return t instanceof zf?function(i){return lm(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Su extends ld{}class Au extends ld{constructor(e){super(),this.elements=e}}function QA(t,e){const n=WA(e);for(const i of t.elements)n.some(r=>eo(r,i))||n.push(i);return{arrayValue:{values:n}}}class Cu extends ld{constructor(e){super(),this.elements=e}}function XA(t,e){let n=WA(e);for(const i of t.elements)n=n.filter(r=>!eo(r,i));return{arrayValue:{values:n}}}class zf extends ld{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function nE(t){return Bt(t.integerValue||t.doubleValue)}function WA(t){return eg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n){this.field=e,this.transform=n}}function n3(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Au&&r instanceof Au||i instanceof Cu&&r instanceof Cu?Da(i.elements,r.elements,eo):i instanceof zf&&r instanceof zf?eo(i.Pe,r.Pe):i instanceof Su&&r instanceof Su}(t.transform,e.transform)}class i3{constructor(e,n){this.version=e,this.transformResults=n}}class Ci{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ci}static exists(e){return new Ci(void 0,e)}static updateTime(e){return new Ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ud{}function ZA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new og(t.key,Ci.none()):new Pu(t.key,t.data,Ci.none());{const n=t.data,i=Bn.empty();let r=new pn(hn.comparator);for(let a of e.fields)if(!r.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?i.delete(a):i.set(a,c),r=r.add(a)}return new Vr(t.key,i,new Wn(r.toArray()),Ci.none())}}function o3(t,e,n){t instanceof Pu?function(r,a,c){const h=r.value.clone(),m=oE(r.fieldTransforms,a,c.transformResults);h.setAll(m),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Vr?function(r,a,c){if(!Cf(r.precondition,a))return void a.convertToUnknownDocument(c.version);const h=oE(r.fieldTransforms,a,c.transformResults),m=a.data;m.setAll(jA(r)),m.setAll(h),a.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(t,e,n):function(r,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function pu(t,e,n,i){return t instanceof Pu?function(a,c,h,m){if(!Cf(a.precondition,c))return h;const p=a.value.clone(),v=rE(a.fieldTransforms,m,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof Vr?function(a,c,h,m){if(!Cf(a.precondition,c))return h;const p=rE(a.fieldTransforms,m,c),v=c.data;return v.setAll(jA(a)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(E=>E.field))}(t,e,n,i):function(a,c,h){return Cf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(t,e,n)}function r3(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),a=JA(i.transform,r||null);a!=null&&(n===null&&(n=Bn.empty()),n.set(i.field,a))}return n||null}function iE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Da(i,r,(a,c)=>n3(a,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pu extends ud{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Vr extends ud{constructor(e,n,i,r,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function jA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function oE(t,e,n){const i=new Map;gt(t.length===n.length);for(let r=0;r<n.length;r++){const a=t[r],c=a.transform,h=e.data.field(a.field);i.set(a.field,e3(c,h,n[r]))}return i}function rE(t,e,n){const i=new Map;for(const r of t){const a=r.transform,c=n.data.field(r.field);i.set(r.field,j4(a,c,e))}return i}class og extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s3 extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&o3(a,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=pu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=pu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=YA();return this.mutations.forEach(r=>{const a=e.get(r.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=n.has(r.key)?null:h;const m=ZA(c,h);m!==null&&i.set(r.key,m),c.isValidDocument()||c.convertToNoDocument(Le.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Qe())}isEqual(e){return this.batchId===e.batchId&&Da(this.mutations,e.mutations,(n,i)=>iE(n,i))&&Da(this.baseMutations,e.baseMutations,(n,i)=>iE(n,i))}}class rg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){gt(e.mutations.length===i.length);let r=function(){return J4}();const a=e.mutations;for(let c=0;c<a.length;c++)r=r.insert(a[c].key,i[c].version);return new rg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,nt;function c3(t){switch(t){default:return De();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function eC(t){if(t===void 0)return Bo("GRPC error has no .code"),le.UNKNOWN;switch(t){case Ht.OK:return le.OK;case Ht.CANCELLED:return le.CANCELLED;case Ht.UNKNOWN:return le.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return le.INTERNAL;case Ht.UNAVAILABLE:return le.UNAVAILABLE;case Ht.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Ht.NOT_FOUND:return le.NOT_FOUND;case Ht.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Ht.ABORTED:return le.ABORTED;case Ht.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Ht.DATA_LOSS:return le.DATA_LOSS;default:return De()}}(nt=Ht||(Ht={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=new gs([4294967295,4294967295],0);function sE(t){const e=f3().encode(t),n=new wA;return n.update(e),new Uint8Array(n.digest())}function aE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new gs([n,i],0),new gs([r,a],0)]}class sg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ru(`Invalid padding: ${n}`);if(i<0)throw new ru(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ru(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ru(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=gs.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(gs.fromNumber(i)));return r.compare(d3)===1&&(r=new gs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=sE(e),[i,r]=aE(n);for(let a=0;a<this.hashCount;a++){const c=this.Ee(i,r,a);if(!this.de(c))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new sg(a,r,n);return i.forEach(h=>c.insert(h)),c}insert(e){if(this.Ie===0)return;const n=sE(e),[i,r]=aE(n);for(let a=0;a<this.hashCount;a++){const c=this.Ee(i,r,a);this.Ae(c)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n,i,r,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Vu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new cd(Le.min(),r,new Nt(st),Fo(),Qe())}}class Vu{constructor(e,n,i,r,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Vu(i,n,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class tC{constructor(e,n){this.targetId=e,this.me=n}}class nC{constructor(e,n,i=mn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class lE{constructor(){this.fe=0,this.ge=cE(),this.pe=mn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Qe(),n=Qe(),i=Qe();return this.ge.forEach((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:De()}}),new Vu(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=cE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,gt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class h3{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fo(),this.qe=uE(),this.Qe=new Nt(st)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:De()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const a=r.target;if(cm(a))if(i===0){const c=new Ie(a.path);this.Ue(n,c,Sn.newNoDocument(c,Le.min()))}else gt(i===1);else{const c=this.Ye(n);if(c!==i){const h=this.Ze(e),m=h?this.Xe(h,e,c):1;if(m!==0){this.je(n);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=n;let c,h;try{c=Es(i).toUint8Array()}catch(m){if(m instanceof PA)return ka("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new sg(c,r,a)}catch(m){return ka(m instanceof ru?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.Ie===0?null:h}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(a=>{const c=this.Le.tt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,a,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((a,c)=>{const h=this.Je(c);if(h){if(a.current&&cm(h.target)){const m=new Ie(h.target.path);this.ke.get(m)!==null||this.it(c,m)||this.Ue(c,m,Sn.newNoDocument(m,e))}a.be&&(n.set(c,a.ve()),a.Ce())}});let i=Qe();this.qe.forEach((a,c)=>{let h=!0;c.forEachWhile(m=>{const p=this.Je(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(a))}),this.ke.forEach((a,c)=>c.setReadTime(e));const r=new cd(e,n,this.Qe,this.ke,i);return this.ke=Fo(),this.qe=uE(),this.Qe=new Nt(st),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new lE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new pn(st),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new lE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function uE(){return new Nt(Ie.comparator)}function cE(){return new Nt(Ie.comparator)}const p3={asc:"ASCENDING",desc:"DESCENDING"},m3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g3={and:"AND",or:"OR"};class y3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dm(t,e){return t.useProto3Json||id(e)?e:{value:e}}function Hf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function v3(t,e){return Hf(t,e.toTimestamp())}function Zi(t){return gt(!!t),Le.fromTimestamp(function(n){const i=Dr(n);return new Wt(i.seconds,i.nanos)}(t))}function ag(t,e){return hm(t,e).canonicalString()}function hm(t,e){const n=function(r){return new bt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function oC(t){const e=bt.fromString(t);return gt(uC(e)),e}function pm(t,e){return ag(t.databaseId,e.path)}function Np(t,e){const n=oC(e);if(n.get(1)!==t.databaseId.projectId)throw new Se(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Se(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ie(sC(n))}function rC(t,e){return ag(t.databaseId,e)}function _3(t){const e=oC(t);return e.length===4?bt.emptyPath():sC(e)}function mm(t){return new bt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sC(t){return gt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function fE(t,e,n){return{name:pm(t,e),fields:n.value.mapValue.fields}}function T3(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:De()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=function(p,v){return p.useProto3Json?(gt(v===void 0||typeof v=="string"),mn.fromBase64String(v||"")):(gt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),mn.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const v=p.code===void 0?le.UNKNOWN:eC(p.code);return new Se(v,p.message||"")}(c);n=new nC(i,r,a,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Np(t,i.document.name),a=Zi(i.document.updateTime),c=i.document.createTime?Zi(i.document.createTime):Le.min(),h=new Bn({mapValue:{fields:i.document.fields}}),m=Sn.newFoundDocument(r,a,c,h),p=i.targetIds||[],v=i.removedTargetIds||[];n=new wf(p,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Np(t,i.document),a=i.readTime?Zi(i.readTime):Le.min(),c=Sn.newNoDocument(r,a),h=i.removedTargetIds||[];n=new wf([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Np(t,i.document),a=i.removedTargetIds||[];n=new wf([],a,r,null)}else{if(!("filter"in e))return De();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,c=new u3(r,a),h=i.targetId;n=new tC(h,c)}}return n}function E3(t,e){let n;if(e instanceof Pu)n={update:fE(t,e.key,e.value)};else if(e instanceof og)n={delete:pm(t,e.key)};else if(e instanceof Vr)n={update:fE(t,e.key,e.data),updateMask:M3(e.fieldMask)};else{if(!(e instanceof s3))return De();n={verify:pm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const h=c.transform;if(h instanceof Su)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Au)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Cu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof zf)return{fieldPath:c.field.canonicalString(),increment:h.Pe};throw De()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,a){return a.updateTime!==void 0?{updateTime:v3(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:De()}(t,e.precondition)),n}function S3(t,e){return t&&t.length>0?(gt(e!==void 0),t.map(n=>function(r,a){let c=r.updateTime?Zi(r.updateTime):Zi(a);return c.isEqual(Le.min())&&(c=Zi(a)),new i3(c,r.transformResults||[])}(n,e))):[]}function A3(t,e){return{documents:[rC(t,e.path)]}}function C3(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=rC(t,r);const a=function(p){if(p.length!==0)return lC(to.create(p,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const c=function(p){if(p.length!==0)return p.map(v=>function(S){return{field:Ea(S.field),direction:R3(S.dir)}}(v))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const h=dm(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:n,parent:r}}function w3(t){let e=_3(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){gt(i===1);const v=n.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let a=[];n.where&&(a=function(E){const S=aC(E);return S instanceof to&&OA(S)?S.getFilters():[S]}(n.where));let c=[];n.orderBy&&(c=function(E){return E.map(S=>function(b){return new Gf(Sa(b.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(S))}(n.orderBy));let h=null;n.limit&&(h=function(E){let S;return S=typeof E=="object"?E.value:E,id(S)?null:S}(n.limit));let m=null;n.startAt&&(m=function(E){const S=!!E.before,I=E.values||[];return new qf(I,S)}(n.startAt));let p=null;return n.endAt&&(p=function(E){const S=!E.before,I=E.values||[];return new qf(I,S)}(n.endAt)),G4(e,r,c,a,h,"F",m,p)}function I3(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Sa(n.unaryFilter.field);return Xt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Sa(n.unaryFilter.field);return Xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Sa(n.unaryFilter.field);return Xt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Sa(n.unaryFilter.field);return Xt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(t):t.fieldFilter!==void 0?function(n){return Xt.create(Sa(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return to.create(n.compositeFilter.filters.map(i=>aC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return De()}}(n.compositeFilter.op))}(t):De()}function R3(t){return p3[t]}function x3(t){return m3[t]}function b3(t){return g3[t]}function Ea(t){return{fieldPath:t.canonicalString()}}function Sa(t){return hn.fromServerFormat(t.fieldPath)}function lC(t){return t instanceof Xt?function(n){if(n.op==="=="){if(W0(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NAN"}};if(X0(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(W0(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NOT_NAN"}};if(X0(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ea(n.field),op:x3(n.op),value:n.value}}}(t):t instanceof to?function(n){const i=n.getFilters().map(r=>lC(r));return i.length===1?i[0]:{compositeFilter:{op:b3(n.op),filters:i}}}(t):De()}function M3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n,i,r,a=Le.min(),c=Le.min(),h=mn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new Cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this.ct=e}}function k3(t){const e=w3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(){this.un=new P3}addToCollectionParentIndex(e,n){return this.un.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(kr.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(kr.min())}updateCollectionGroup(e,n,i){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class P3{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new pn(bt.comparator),a=!r.has(i);return this.index[n]=r.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new pn(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new La(0)}static kn(){return new La(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(){this.changes=new Ja(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ue.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&pu(i.mutation,r,Wn.empty(),Wt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Qe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Qe()){const r=ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(a=>{let c=ou();return a.forEach((h,m)=>{c=c.insert(h,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const i=ms();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Qe()))}populateOverlays(e,n,i){const r=[];return i.forEach(a=>{n.has(a)||r.push(a)}),this.documentOverlayCache.getOverlays(e,r).next(a=>{a.forEach((c,h)=>{n.set(c,h)})})}computeViews(e,n,i,r){let a=Fo();const c=hu(),h=function(){return hu()}();return n.forEach((m,p)=>{const v=i.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof Vr)?a=a.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),pu(v.mutation,p,v.mutation.getFieldMask(),Wt.now())):c.set(p.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((p,v)=>c.set(p,v)),n.forEach((p,v)=>{var E;return h.set(p,new L3(v,(E=c.get(p))!==null&&E!==void 0?E:null))}),h))}recalculateAndSaveOverlays(e,n){const i=hu();let r=new Nt((c,h)=>c-h),a=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const h of c)h.keys().forEach(m=>{const p=n.get(m);if(p===null)return;let v=i.get(m)||Wn.empty();v=h.applyToLocalView(p,v),i.set(m,v);const E=(r.get(h.batchId)||Qe()).add(m);r=r.insert(h.batchId,E)})}).next(()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),p=m.key,v=m.value,E=YA();v.forEach(S=>{if(!a.has(S)){const I=ZA(n.get(S),i.get(S));I!==null&&E.set(S,I),a=a.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return ue.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(c){return Ie.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):z4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(a=>{const c=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-a.size):ue.resolve(ms());let h=-1,m=a;return c.next(p=>ue.forEach(p,(v,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),a.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next(S=>{m=m.insert(v,S)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,m,p,Qe())).next(v=>({batchId:h,changes:$A(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next(i=>{let r=ou();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const a=n.collectionGroup;let c=ou();return this.indexManager.getCollectionParents(e,a).next(h=>ue.forEach(h,m=>{const p=function(E,S){return new od(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(n,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,i,r).next(v=>{v.forEach((E,S)=>{c=c.insert(E,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,r))).next(c=>{a.forEach((m,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,Sn.newInvalidDocument(v)))});let h=ou();return c.forEach((m,p)=>{const v=a.get(m);v!==void 0&&pu(v.mutation,p,Wn.empty(),Wt.now()),ad(n,p)&&(h=h.insert(m,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ue.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Zi(r.createTime)}}(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:k3(r.bundledQuery),readTime:Zi(r.readTime)}}(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(){this.overlays=new Nt(Ie.comparator),this.Ir=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ms();return ue.forEach(n,r=>this.getOverlay(e,r).next(a=>{a!==null&&i.set(r,a)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,a)=>{this.ht(e,n,a)}),ue.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(i)),ue.resolve()}getOverlaysForCollection(e,n,i){const r=ms(),a=n.length+1,c=new Ie(n.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,p=m.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&m.largestBatchId>i&&r.set(m.getKey(),m)}return ue.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let a=new Nt((p,v)=>p-v);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let v=a.get(p.largestBatchId);v===null&&(v=ms(),a=a.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=ms(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,v)=>h.set(p,v)),!(h.size()>=r)););return ue.resolve(h)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new l3(n,i));let a=this.Ir.get(n);a===void 0&&(a=Qe(),this.Ir.set(n,a)),this.Ir.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(){this.Tr=new pn(rn.Er),this.dr=new pn(rn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new rn(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new rn(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new Ie(new bt([])),i=new rn(n,e),r=new rn(n,e+1),a=[];return this.dr.forEachInRange([i,r],c=>{this.Vr(c),a.push(c.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ie(new bt([])),i=new rn(n,e),r=new rn(n,e+1);let a=Qe();return this.dr.forEachInRange([i,r],c=>{a=a.add(c.key)}),a}containsKey(e){const n=new rn(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class rn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ie.comparator(e.key,n.key)||st(e.wr,n.wr)}static Ar(e,n){return st(e.wr,n.wr)||Ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new pn(rn.Er)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new a3(a,n,i,r);this.mutationQueue.push(c);for(const h of r)this.br=this.br.add(new rn(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,n){return ue.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),a=r<0?0:r;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new rn(n,0),r=new rn(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([i,r],c=>{const h=this.Dr(c.wr);a.push(h)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new pn(st);return n.forEach(r=>{const a=new rn(r,0),c=new rn(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,c],h=>{i=i.add(h.wr)})}),ue.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let a=i;Ie.isDocumentKey(a)||(a=a.child(""));const c=new rn(new Ie(a),0);let h=new pn(st);return this.br.forEachWhile(m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(h=h.add(m.wr)),!0)},c),ue.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){gt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ue.forEach(n.mutations,r=>{const a=new rn(r.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new rn(n,0),r=this.br.firstAfterOrEqual(i);return ue.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e){this.Mr=e,this.docs=function(){return new Nt(Ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),a=r?r.size:0,c=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ue.resolve(i?i.document.mutableCopy():Sn.newInvalidDocument(n))}getEntries(e,n){let i=Fo();return n.forEach(r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Sn.newInvalidDocument(r))}),ue.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let a=Fo();const c=n.path,h=new Ie(c.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||A4(S4(v),i)<=0||(r.has(v.key)||ad(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,n,i,r){De()}Or(e,n){return ue.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new z3(this)}getSize(e){return ue.resolve(this.size)}}class z3 extends V3{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),ue.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e){this.persistence=e,this.Nr=new Ja(n=>tg(n),ng),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new lg,this.targetCount=0,this.kr=La.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),ue.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new La(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.Kn(n),ue.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,i){let r=0;const a=[];return this.Nr.forEach((c,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),ue.waitFor(a).next(()=>r)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return ue.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),ue.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,a=[];return r&&n.forEach(c=>{a.push(r.markPotentiallyOrphaned(e,c))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return ue.resolve(i)}containsKey(e,n){return ue.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Wm(0),this.Kr=!1,this.Kr=!0,this.$r=new F3,this.referenceDelegate=e(this),this.Ur=new H3(this),this.indexManager=new D3,this.remoteDocumentCache=function(r){return new G3(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new N3(n),this.Gr=new O3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new B3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new q3(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){ve("MemoryPersistence","Starting transaction:",e);const r=new Y3(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(a=>this.referenceDelegate.jr(r).next(()=>a)).toPromise().then(a=>(r.raiseOnCommittedEvent(),a))}Hr(e,n){return ue.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class Y3 extends w4{constructor(e){super(),this.currentSequenceNumber=e}}class ug{constructor(e){this.persistence=e,this.Jr=new lg,this.Yr=null}static Zr(e){return new ug(e)}get Xr(){if(this.Yr)return this.Yr;throw De()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),ue.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(a=>this.Xr.add(a.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Xr,i=>{const r=Ie.fromPath(i);return this.ei(e,r).next(a=>{a||n.removeEntry(r,Le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ue.or([()=>ue.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=Qe(),r=Qe();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new cg(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return JV()?8:I4(Cn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const a={result:null};return this.Yi(e,n).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Zi(e,n,r,i).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new K3;return this.Xi(e,n,c).next(h=>{if(a.result=h,this.zi)return this.es(e,n,c,h.size)})}).next(()=>a.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(tu()<=We.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Ta(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ue.resolve()):(tu()<=We.DEBUG&&ve("QueryEngine","Query:",Ta(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(tu()<=We.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Ta(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wi(n))):ue.resolve())}Yi(e,n){if(tE(n))return ue.resolve(null);let i=Wi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=fm(n,null,"F"),i=Wi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const c=Qe(...a);return this.Ji.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,i).next(m=>{const p=this.ts(n,h);return this.ns(n,p,c,m.readTime)?this.Yi(e,fm(n,null,"F")):this.rs(e,p,n,m)}))})))}Zi(e,n,i,r){return tE(n)||r.isEqual(Le.min())?ue.resolve(null):this.Ji.getDocuments(e,i).next(a=>{const c=this.ts(n,a);return this.ns(n,c,i,r)?ue.resolve(null):(tu()<=We.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ta(n)),this.rs(e,c,n,E4(r,-1)).next(h=>h))})}ts(e,n){let i=new pn(zA(e));return n.forEach((r,a)=>{ad(e,a)&&(i=i.add(a))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Xi(e,n,i){return tu()<=We.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Ta(n)),this.Ji.getDocumentsMatchingQuery(e,n,kr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(a=>(n.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Nt(st),this._s=new Ja(a=>tg(a),ng),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U3(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function X3(t,e,n,i){return new Q3(t,e,n,i)}async function cC(t,e){const n=Ue(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(a=>(r=a,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(a=>{const c=[],h=[];let m=Qe();for(const p of r){c.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of a){h.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return n.localDocuments.getDocuments(i,m).next(p=>({hs:p,removedBatchIds:c,addedBatchIds:h}))})})}function W3(t,e){const n=Ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,m,p,v){const E=p.batch,S=E.keys();let I=ue.resolve();return S.forEach(b=>{I=I.next(()=>v.getEntry(m,b)).next(O=>{const F=p.docVersions.get(b);gt(F!==null),O.version.compareTo(F)<0&&(E.applyToRemoteDocument(O,p),O.isValidDocument()&&(O.setReadTime(p.commitVersion),v.addEntry(O)))})}),I.next(()=>h.mutationQueue.removeMutationBatch(m,E))}(n,i,e,a).next(()=>a.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let m=Qe();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(m=m.add(h.batch.mutations[p].key));return m}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function fC(t){const e=Ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Z3(t,e){const n=Ue(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const h=[];e.targetChanges.forEach((v,E)=>{const S=r.get(E);if(!S)return;h.push(n.Ur.removeMatchingKeys(a,v.removedDocuments,E).next(()=>n.Ur.addMatchingKeys(a,v.addedDocuments,E)));let I=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(mn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,i)),r=r.insert(E,I),function(O,F,re){return O.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0}(S,I,v)&&h.push(n.Ur.updateTargetData(a,I))});let m=Fo(),p=Qe();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(j3(a,c,e.documentUpdates).next(v=>{m=v.Ps,p=v.Is})),!i.isEqual(Le.min())){const v=n.Ur.getLastRemoteSnapshotVersion(a).next(E=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,i));h.push(v)}return ue.waitFor(h).next(()=>c.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,m,p)).next(()=>m)}).then(a=>(n.os=r,a))}function j3(t,e,n){let i=Qe(),r=Qe();return n.forEach(a=>i=i.add(a)),e.getEntries(t,i).next(a=>{let c=Fo();return n.forEach((h,m)=>{const p=a.get(h);m.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(h)),m.isNoDocument()&&m.version.isEqual(Le.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):ve("LocalStore","Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",m.version)}),{Ps:c,Is:r}})}function eB(t,e){const n=Ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function tB(t,e){const n=Ue(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(a=>a?(r=a,ue.resolve(r)):n.Ur.allocateTargetId(i).next(c=>(r=new Cr(e,c,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function gm(t,e,n){const i=Ue(t),r=i.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,c=>i.persistence.referenceDelegate.removeTarget(c,r))}catch(c){if(!Du(c))throw c;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function dE(t,e,n){const i=Ue(t);let r=Le.min(),a=Qe();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,v){const E=Ue(m),S=E._s.get(v);return S!==void 0?ue.resolve(E.os.get(S)):E.Ur.getTargetData(p,v)}(i,c,Wi(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(c,h.targetId).next(m=>{a=m})}).next(()=>i.ss.getDocumentsMatchingQuery(c,e,n?r:Le.min(),n?a:Qe())).next(h=>(nB(i,$4(e),h),{documents:h,Ts:a})))}function nB(t,e,n){let i=t.us.get(e)||Le.min();n.forEach((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),t.us.set(e,i)}class hE{constructor(){this.activeTargetIds=W4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iB{constructor(){this.so=new hE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new hE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df=null;function kp(){return df===null?df=function(){return 268435456+Math.round(2147483648*Math.random())}():df++,"0x"+df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="WebChannelConnection";class aB extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${a}`}get Fo(){return!1}Mo(n,i,r,a,c){const h=kp(),m=this.xo(n,i.toUriEncodedString());ve("RestConnection",`Sending RPC '${n}' ${h}:`,m,r);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,a,c),this.No(n,m,p,r).then(v=>(ve("RestConnection",`Received RPC '${n}' ${h}: `,v),v),v=>{throw ka("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",m,"request:",r),v})}Lo(n,i,r,a,c,h){return this.Mo(n,i,r,a,c)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ka}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((a,c)=>n[c]=a),r&&r.headers.forEach((a,c)=>n[c]=a)}xo(n,i){const r=rB[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const a=kp();return new Promise((c,h)=>{const m=new IA;m.setWithCredentials(!0),m.listenOnce(RA.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Sf.NO_ERROR:const v=m.getResponseJson();ve(Tn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),c(v);break;case Sf.TIMEOUT:ve(Tn,`RPC '${e}' ${a} timed out`),h(new Se(le.DEADLINE_EXCEEDED,"Request time out"));break;case Sf.HTTP_ERROR:const E=m.getStatus();if(ve(Tn,`RPC '${e}' ${a} failed with status:`,E,"response text:",m.getResponseText()),E>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const I=S==null?void 0:S.error;if(I&&I.status&&I.message){const b=function(F){const re=F.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(re)>=0?re:le.UNKNOWN}(I.status);h(new Se(b,I.message))}else h(new Se(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Se(le.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{ve(Tn,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(r);ve(Tn,`RPC '${e}' ${a} sending request:`,r),m.send(n,"POST",p,i,15)})}Bo(e,n,i){const r=kp(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=MA(),h=bA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Oo(m.initMessageHeaders,n,i),m.encodeInitMessageHeaders=!0;const v=a.join("");ve(Tn,`Creating RPC '${e}' stream ${r}: ${v}`,m);const E=c.createWebChannel(v,m);let S=!1,I=!1;const b=new sB({Io:F=>{I?ve(Tn,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(S||(ve(Tn,`Opening RPC '${e}' stream ${r} transport.`),E.open(),S=!0),ve(Tn,`RPC '${e}' stream ${r} sending:`,F),E.send(F))},To:()=>E.close()}),O=(F,re,ie)=>{F.listen(re,ne=>{try{ie(ne)}catch(fe){setTimeout(()=>{throw fe},0)}})};return O(E,iu.EventType.OPEN,()=>{I||(ve(Tn,`RPC '${e}' stream ${r} transport opened.`),b.yo())}),O(E,iu.EventType.CLOSE,()=>{I||(I=!0,ve(Tn,`RPC '${e}' stream ${r} transport closed`),b.So())}),O(E,iu.EventType.ERROR,F=>{I||(I=!0,ka(Tn,`RPC '${e}' stream ${r} transport errored:`,F),b.So(new Se(le.UNAVAILABLE,"The operation could not be completed")))}),O(E,iu.EventType.MESSAGE,F=>{var re;if(!I){const ie=F.data[0];gt(!!ie);const ne=ie,fe=ne.error||((re=ne[0])===null||re===void 0?void 0:re.error);if(fe){ve(Tn,`RPC '${e}' stream ${r} received error:`,fe);const se=fe.status;let me=function(x){const L=Ht[x];if(L!==void 0)return eC(L)}(se),D=fe.message;me===void 0&&(me=le.INTERNAL,D="Unknown error status: "+se+" with message "+fe.message),I=!0,b.So(new Se(me,D)),E.close()}else ve(Tn,`RPC '${e}' stream ${r} received:`,ie),b.bo(ie)}}),O(h,xA.STAT_EVENT,F=>{F.stat===sm.PROXY?ve(Tn,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===sm.NOPROXY&&ve(Tn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Dp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t){return new y3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n,i=1e3,r=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&ve("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n,i,r,a,c,h,m){this.ui=e,this.Ho=i,this.Jo=r,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new dC(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(Bo(n.toString()),Bo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new Se(le.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lB extends hC{constructor(e,n,i,r,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,c),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=T3(this.serializer,e),i=function(a){if(!("targetChange"in a))return Le.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Le.min():c.readTime?Zi(c.readTime):Le.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=mm(this.serializer),n.addTarget=function(a,c){let h;const m=c.target;if(h=cm(m)?{documents:A3(a,m)}:{query:C3(a,m)._t},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=iC(a,c.resumeToken);const p=dm(a,c.expectedCount);p!==null&&(h.expectedCount=p)}else if(c.snapshotVersion.compareTo(Le.min())>0){h.readTime=Hf(a,c.snapshotVersion.toTimestamp());const p=dm(a,c.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=I3(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=mm(this.serializer),n.removeTarget=e,this.a_(n)}}class uB extends hC{constructor(e,n,i,r,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,c),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return gt(!!e.streamToken),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=S3(e.writeResults,e.commitTime),i=Zi(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=mm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>E3(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Se(le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Mo(e,hm(n,i),r,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Se(le.UNKNOWN,a.toString())})}Lo(e,n,i,r,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Lo(e,hm(n,i),r,c,h,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Se(le.UNKNOWN,c.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class fB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Bo(n),this.D_=!1):ve("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e,n,i,r,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(c=>{i.enqueueAndForget(async()=>{xs(this)&&(ve("RemoteStore","Restarting streams for network reachability change."),await async function(m){const p=Ue(m);p.L_.add(4),await Lu(p),p.q_.set("Unknown"),p.L_.delete(4),await dd(p)}(this))})}),this.q_=new fB(i,r)}}async function dd(t){if(xs(t))for(const e of t.B_)await e(!0)}async function Lu(t){for(const e of t.B_)await e(!1)}function pC(t,e){const n=Ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),pg(n)?hg(n):Qa(n).r_()&&dg(n,e))}function fg(t,e){const n=Ue(t),i=Qa(n);n.N_.delete(e),i.r_()&&mC(n,e),n.N_.size===0&&(i.r_()?i.o_():xs(n)&&n.q_.set("Unknown"))}function dg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qa(t).A_(e)}function mC(t,e){t.Q_.xe(e),Qa(t).R_(e)}function hg(t){t.Q_=new h3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Qa(t).start(),t.q_.v_()}function pg(t){return xs(t)&&!Qa(t).n_()&&t.N_.size>0}function xs(t){return Ue(t).L_.size===0}function gC(t){t.Q_=void 0}async function hB(t){t.q_.set("Online")}async function pB(t){t.N_.forEach((e,n)=>{dg(t,e)})}async function mB(t,e){gC(t),pg(t)?(t.q_.M_(e),hg(t)):t.q_.set("Unknown")}async function gB(t,e,n){if(t.q_.set("Online"),e instanceof nC&&e.state===2&&e.cause)try{await async function(r,a){const c=a.cause;for(const h of a.targetIds)r.N_.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.N_.delete(h),r.Q_.removeTarget(h))}(t,e)}catch(i){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await $f(t,i)}else if(e instanceof wf?t.Q_.Ke(e):e instanceof tC?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Le.min()))try{const i=await fC(t.localStore);n.compareTo(i)>=0&&await function(a,c){const h=a.Q_.rt(c);return h.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=a.N_.get(p);v&&a.N_.set(p,v.withResumeToken(m.resumeToken,c))}}),h.targetMismatches.forEach((m,p)=>{const v=a.N_.get(m);if(!v)return;a.N_.set(m,v.withResumeToken(mn.EMPTY_BYTE_STRING,v.snapshotVersion)),mC(a,m);const E=new Cr(v.target,m,p,v.sequenceNumber);dg(a,E)}),a.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){ve("RemoteStore","Failed to raise snapshot:",i),await $f(t,i)}}async function $f(t,e,n){if(!Du(e))throw e;t.L_.add(1),await Lu(t),t.q_.set("Offline"),n||(n=()=>fC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ve("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await dd(t)})}function yC(t,e){return e().catch(n=>$f(t,n,e))}async function hd(t){const e=Ue(t),n=Pr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;yB(e);)try{const r=await eB(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,vB(e,r)}catch(r){await $f(e,r)}vC(e)&&_C(e)}function yB(t){return xs(t)&&t.O_.length<10}function vB(t,e){t.O_.push(e);const n=Pr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function vC(t){return xs(t)&&!Pr(t).n_()&&t.O_.length>0}function _C(t){Pr(t).start()}async function _B(t){Pr(t).p_()}async function TB(t){const e=Pr(t);for(const n of t.O_)e.m_(n.mutations)}async function EB(t,e,n){const i=t.O_.shift(),r=rg.from(i,e,n);await yC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await hd(t)}async function SB(t,e){e&&Pr(t).V_&&await async function(i,r){if(function(c){return c3(c)&&c!==le.ABORTED}(r.code)){const a=i.O_.shift();Pr(i).s_(),await yC(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r)),await hd(i)}}(t,e),vC(t)&&_C(t)}async function mE(t,e){const n=Ue(t);n.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const i=xs(n);n.L_.add(3),await Lu(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await dd(n)}async function AB(t,e){const n=Ue(t);e?(n.L_.delete(2),await dd(n)):e||(n.L_.add(2),await Lu(n),n.q_.set("Unknown"))}function Qa(t){return t.K_||(t.K_=function(n,i,r){const a=Ue(n);return a.w_(),new lB(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(t.datastore,t.asyncQueue,{Eo:hB.bind(null,t),Ro:pB.bind(null,t),mo:mB.bind(null,t),d_:gB.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),pg(t)?hg(t):t.q_.set("Unknown")):(await t.K_.stop(),gC(t))})),t.K_}function Pr(t){return t.U_||(t.U_=function(n,i,r){const a=Ue(n);return a.w_(),new uB(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_B.bind(null,t),mo:SB.bind(null,t),f_:TB.bind(null,t),g_:EB.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await hd(t)):(await t.U_.stop(),t.O_.length>0&&(ve("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,i,r,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,a){const c=Date.now()+i,h=new mg(e,n,c,r,a);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(t,e){if(Bo("AsyncQueue",`${e}: ${t}`),Du(t))return new Se(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ie.comparator(n.key,i.key):(n,i)=>Ie.comparator(n.key,i.key),this.keyedMap=ou(),this.sortedSet=new Nt(this.comparator)}static emptySet(e){return new Ma(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ma)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ma;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.W_=new Nt(Ie.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):De():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ua{constructor(e,n,i,r,a,c,h,m,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,r,a){const c=[];return n.forEach(h=>{c.push({type:0,doc:h})}),new Ua(e,n,Ma.emptySet(n),c,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class wB{constructor(){this.queries=yE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=Ue(n),a=r.queries;r.queries=yE(),a.forEach((c,h)=>{for(const m of h.j_)m.onError(i)})})(this,new Se(le.ABORTED,"Firestore shutting down"))}}function yE(){return new Ja(t=>GA(t),sd)}async function TC(t,e){const n=Ue(t);let i=3;const r=e.query;let a=n.queries.get(r);a?!a.H_()&&e.J_()&&(i=2):(a=new CB,i=e.J_()?0:1);try{switch(i){case 0:a.z_=await n.onListen(r,!0);break;case 1:a.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(c){const h=gg(c,`Initialization of query '${Ta(e.query)}' failed`);return void e.onError(h)}n.queries.set(r,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&yg(n)}async function EC(t,e){const n=Ue(t),i=e.query;let r=3;const a=n.queries.get(i);if(a){const c=a.j_.indexOf(e);c>=0&&(a.j_.splice(c,1),a.j_.length===0?r=e.J_()?0:1:!a.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function IB(t,e){const n=Ue(t);let i=!1;for(const r of e){const a=r.query,c=n.queries.get(a);if(c){for(const h of c.j_)h.X_(r)&&(i=!0);c.z_=r}}i&&yg(n)}function RB(t,e,n){const i=Ue(t),r=i.queries.get(e);if(r)for(const a of r.j_)a.onError(n);i.queries.delete(e)}function yg(t){t.Y_.forEach(e=>{e.next()})}var ym,vE;(vE=ym||(ym={})).ea="default",vE.Cache="cache";class SC{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ua(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.key=e}}class CC{constructor(e){this.key=e}}class xB{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Qe(),this.mutatedKeys=Qe(),this.Aa=zA(e),this.Ra=new Ma(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new gE,r=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,c=r,h=!1;const m=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((v,E)=>{const S=r.get(v),I=ad(this.query,E)?E:null,b=!!S&&this.mutatedKeys.has(S.key),O=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let F=!1;S&&I?S.data.isEqual(I.data)?b!==O&&(i.track({type:3,doc:I}),F=!0):this.ga(S,I)||(i.track({type:2,doc:I}),F=!0,(m&&this.Aa(I,m)>0||p&&this.Aa(I,p)<0)&&(h=!0)):!S&&I?(i.track({type:0,doc:I}),F=!0):S&&!I&&(i.track({type:1,doc:S}),F=!0,(m||p)&&(h=!0)),F&&(I?(c=c.add(I),a=O?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{Ra:c,fa:i,ns:h,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const c=e.fa.G_();c.sort((v,E)=>function(I,b){const O=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return O(I)-O(b)}(v.type,E.type)||this.Aa(v.doc,E.doc)),this.pa(i),r=r!=null&&r;const h=n&&!r?this.ya():[],m=this.da.size===0&&this.current&&!r?1:0,p=m!==this.Ea;return this.Ea=m,c.length!==0||p?{snapshot:new Ua(this.query,e.Ra,a,c,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new gE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Qe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new CC(i))}),this.da.forEach(i=>{e.has(i)||n.push(new AC(i))}),n}ba(e){this.Ta=e.Ts,this.da=Qe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ua.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class bB{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class MB{constructor(e){this.key=e,this.va=!1}}class NB{constructor(e,n,i,r,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Ja(h=>GA(h),sd),this.Ma=new Map,this.xa=new Set,this.Oa=new Nt(Ie.comparator),this.Na=new Map,this.La=new lg,this.Ba={},this.ka=new Map,this.qa=La.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kB(t,e,n=!0){const i=MC(t);let r;const a=i.Fa.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.Da()):r=await wC(i,e,n,!0),r}async function DB(t,e){const n=MC(t);await wC(n,e,!0,!1)}async function wC(t,e,n,i){const r=await tB(t.localStore,Wi(e)),a=r.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let h;return i&&(h=await PB(t,e,a,c==="current",r.resumeToken)),t.isPrimaryClient&&n&&pC(t.remoteStore,r),h}async function PB(t,e,n,i,r){t.Ka=(E,S,I)=>async function(O,F,re,ie){let ne=F.view.ma(re);ne.ns&&(ne=await dE(O.localStore,F.query,!1).then(({documents:D})=>F.view.ma(D,ne)));const fe=ie&&ie.targetChanges.get(F.targetId),se=ie&&ie.targetMismatches.get(F.targetId)!=null,me=F.view.applyChanges(ne,O.isPrimaryClient,fe,se);return TE(O,F.targetId,me.wa),me.snapshot}(t,E,S,I);const a=await dE(t.localStore,e,!0),c=new xB(e,a.Ts),h=c.ma(a.documents),m=Vu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),p=c.applyChanges(h,t.isPrimaryClient,m);TE(t,n,p.wa);const v=new bB(e,n,c);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function VB(t,e,n){const i=Ue(t),r=i.Fa.get(e),a=i.Ma.get(r.targetId);if(a.length>1)return i.Ma.set(r.targetId,a.filter(c=>!sd(c,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await gm(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&fg(i.remoteStore,r.targetId),vm(i,r.targetId)}).catch(ku)):(vm(i,r.targetId),await gm(i.localStore,r.targetId,!0))}async function LB(t,e){const n=Ue(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),fg(n.remoteStore,i.targetId))}async function UB(t,e,n){const i=HB(t);try{const r=await function(c,h){const m=Ue(c),p=Wt.now(),v=h.reduce((I,b)=>I.add(b.key),Qe());let E,S;return m.persistence.runTransaction("Locally write mutations","readwrite",I=>{let b=Fo(),O=Qe();return m.cs.getEntries(I,v).next(F=>{b=F,b.forEach((re,ie)=>{ie.isValidDocument()||(O=O.add(re))})}).next(()=>m.localDocuments.getOverlayedDocuments(I,b)).next(F=>{E=F;const re=[];for(const ie of h){const ne=r3(ie,E.get(ie.key).overlayedDocument);ne!=null&&re.push(new Vr(ie.key,ne,VA(ne.value.mapValue),Ci.exists(!0)))}return m.mutationQueue.addMutationBatch(I,p,re,h)}).next(F=>{S=F;const re=F.applyToLocalDocumentSet(E,O);return m.documentOverlayCache.saveOverlays(I,F.batchId,re)})}).then(()=>({batchId:S.batchId,changes:$A(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(c,h,m){let p=c.Ba[c.currentUser.toKey()];p||(p=new Nt(st)),p=p.insert(h,m),c.Ba[c.currentUser.toKey()]=p}(i,r.batchId,n),await Uu(i,r.changes),await hd(i.remoteStore)}catch(r){const a=gg(r,"Failed to persist write");n.reject(a)}}async function IC(t,e){const n=Ue(t);try{const i=await Z3(n.localStore,e);e.targetChanges.forEach((r,a)=>{const c=n.Na.get(a);c&&(gt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.va=!0:r.modifiedDocuments.size>0?gt(c.va):r.removedDocuments.size>0&&(gt(c.va),c.va=!1))}),await Uu(n,i,e)}catch(i){await ku(i)}}function _E(t,e,n){const i=Ue(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((a,c)=>{const h=c.view.Z_(e);h.snapshot&&r.push(h.snapshot)}),function(c,h){const m=Ue(c);m.onlineState=h;let p=!1;m.queries.forEach((v,E)=>{for(const S of E.j_)S.Z_(h)&&(p=!0)}),p&&yg(m)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function OB(t,e,n){const i=Ue(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),a=r&&r.key;if(a){let c=new Nt(Ie.comparator);c=c.insert(a,Sn.newNoDocument(a,Le.min()));const h=Qe().add(a),m=new cd(Le.min(),new Map,new Nt(st),c,h);await IC(i,m),i.Oa=i.Oa.remove(a),i.Na.delete(e),vg(i)}else await gm(i.localStore,e,!1).then(()=>vm(i,e,n)).catch(ku)}async function BB(t,e){const n=Ue(t),i=e.batch.batchId;try{const r=await W3(n.localStore,e);xC(n,i,null),RC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Uu(n,r)}catch(r){await ku(r)}}async function FB(t,e,n){const i=Ue(t);try{const r=await function(c,h){const m=Ue(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return m.mutationQueue.lookupMutationBatch(p,h).next(E=>(gt(E!==null),v=E.keys(),m.mutationQueue.removeMutationBatch(p,E))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,h)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>m.localDocuments.getDocuments(p,v))})}(i.localStore,e);xC(i,e,n),RC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Uu(i,r)}catch(r){await ku(r)}}function RC(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function xC(t,e,n){const i=Ue(t);let r=i.Ba[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(n?a.reject(n):a.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function vm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||bC(t,i)})}function bC(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(fg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),vg(t))}function TE(t,e,n){for(const i of n)i instanceof AC?(t.La.addReference(i.key,e),qB(t,i)):i instanceof CC?(ve("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||bC(t,i.key)):De()}function qB(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(ve("SyncEngine","New document in limbo: "+n),t.xa.add(i),vg(t))}function vg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ie(bt.fromString(e)),i=t.qa.next();t.Na.set(i,new MB(n)),t.Oa=t.Oa.insert(n,i),pC(t.remoteStore,new Cr(Wi(rd(n.path)),i,"TargetPurposeLimboResolution",Wm.oe))}}async function Uu(t,e,n){const i=Ue(t),r=[],a=[],c=[];i.Fa.isEmpty()||(i.Fa.forEach((h,m)=>{c.push(i.Ka(m,e,n).then(p=>{var v;if((p||n)&&i.isPrimaryClient){const E=p?!p.fromCache:(v=n==null?void 0:n.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(p){r.push(p);const E=cg.Wi(m.targetId,p);a.push(E)}}))}),await Promise.all(c),i.Ca.d_(r),await async function(m,p){const v=Ue(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ue.forEach(p,S=>ue.forEach(S.$i,I=>v.persistence.referenceDelegate.addReference(E,S.targetId,I)).next(()=>ue.forEach(S.Ui,I=>v.persistence.referenceDelegate.removeReference(E,S.targetId,I)))))}catch(E){if(!Du(E))throw E;ve("LocalStore","Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const I=v.os.get(S),b=I.snapshotVersion,O=I.withLastLimboFreeSnapshotVersion(b);v.os=v.os.insert(S,O)}}}(i.localStore,a))}async function GB(t,e){const n=Ue(t);if(!n.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const i=await cC(n.localStore,e);n.currentUser=e,function(a,c){a.ka.forEach(h=>{h.forEach(m=>{m.reject(new Se(le.CANCELLED,c))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Uu(n,i.hs)}}function zB(t,e){const n=Ue(t),i=n.Na.get(e);if(i&&i.va)return Qe().add(i.key);{let r=Qe();const a=n.Ma.get(e);if(!a)return r;for(const c of a){const h=n.Fa.get(c);r=r.unionWith(h.view.Va)}return r}}function MC(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=IC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OB.bind(null,e),e.Ca.d_=IB.bind(null,e.eventManager),e.Ca.$a=RB.bind(null,e.eventManager),e}function HB(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FB.bind(null,e),e}class Yf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return X3(this.persistence,new J3,e.initialUser,this.serializer)}Ga(e){return new $3(ug.Zr,this.serializer)}Wa(e){return new iB}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yf.provider={build:()=>new Yf};class _m{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_E(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=GB.bind(null,this.syncEngine),await AB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wB}()}createDatastore(e){const n=fd(e.databaseInfo.databaseId),i=function(a){return new aB(a)}(e.databaseInfo);return function(a,c,h,m){return new cB(a,c,h,m)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,a,c,h){return new dB(i,r,a,c,h)}(this.localStore,this.datastore,e.asyncQueue,n=>_E(this.syncEngine,n,0),function(){return pE.D()?new pE:new oB}())}createSyncEngine(e,n){return function(r,a,c,h,m,p,v){const E=new NB(r,a,c,h,m,p);return v&&(E.Qa=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const a=Ue(r);ve("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Lu(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}_m.provider={build:()=>new _m};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Bo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e,n,i,r,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=En.UNAUTHENTICATED,this.clientId=kA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async c=>{ve("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ve("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=gg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Pp(t,e){t.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await cC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function EE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await YB(t);ve("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>mE(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>mE(e.remoteStore,r)),t._onlineComponents=e}async function YB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{await Pp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===le.FAILED_PRECONDITION||r.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;ka("Error using user provided cache. Falling back to memory cache: "+n),await Pp(t,new Yf)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),await Pp(t,new Yf);return t._offlineComponents}async function kC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),await EE(t,t._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),await EE(t,new _m))),t._onlineComponents}function KB(t){return kC(t).then(e=>e.syncEngine)}async function Tm(t){const e=await kC(t),n=e.eventManager;return n.onListen=kB.bind(null,e.syncEngine),n.onUnlisten=VB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=DB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=LB.bind(null,e.syncEngine),n}function JB(t,e,n={}){const i=new br;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,h,m,p){const v=new NC({next:S=>{v.Za(),c.enqueueAndForget(()=>EC(a,E));const I=S.docs.has(h);!I&&S.fromCache?p.reject(new Se(le.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&m&&m.source==="server"?p.reject(new Se(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new SC(rd(h.path),v,{includeMetadataChanges:!0,_a:!0});return TC(a,E)}(await Tm(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t,e,n){if(!n)throw new Se(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QB(t,e,n,i){if(e===!0&&i===!0)throw new Se(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function AE(t){if(!Ie.isDocumentKey(t))throw new Se(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function CE(t){if(Ie.isDocumentKey(t))throw new Se(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _g(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":De()}function wi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Se(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_g(t);throw new Se(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Se(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Se(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Se(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Se(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Se(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wE(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new d4;switch(i.type){case"firstParty":return new g4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=SE.get(n);i&&(ve("ComponentProvider","Removing Datastore"),SE.delete(n),i.terminate())}(this),Promise.resolve()}}function XB(t,e,n,i={}){var r;const a=(t=wi(t,pd))._getSettings(),c=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==c&&ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),i.mockUserToken){let h,m;if(typeof i.mockUserToken=="string")h=i.mockUserToken,m=En.MOCK_USER;else{h=qV(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Se(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new En(p)}t._authCredentials=new h4(new NA(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new md(this.firestore,e,this._query)}}class Dn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dn(this.firestore,e,this._key)}}class Mr extends md{constructor(e,n,i){super(e,n,rd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dn(this.firestore,null,new Ie(e))}withConverter(e){return new Mr(this.firestore,e,this._path)}}function WB(t,e,...n){if(t=wn(t),PC("collection","path",e),t instanceof pd){const i=bt.fromString(e,...n);return CE(i),new Mr(t,null,i)}{if(!(t instanceof Dn||t instanceof Mr))throw new Se(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(bt.fromString(e,...n));return CE(i),new Mr(t.firestore,null,i)}}function Si(t,e,...n){if(t=wn(t),arguments.length===1&&(e=kA.newId()),PC("doc","path",e),t instanceof pd){const i=bt.fromString(e,...n);return AE(i),new Dn(t,null,new Ie(i))}{if(!(t instanceof Dn||t instanceof Mr))throw new Se(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(bt.fromString(e,...n));return AE(i),new Dn(t.firestore,t instanceof Mr?t.converter:null,new Ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new dC(this,"async_queue_retry"),this.Vu=()=>{const i=Dp();i&&ve("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Dp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Dp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new br;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Du(e))throw e;ve("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),h}(i);throw Bo("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=mg.createAndSchedule(this,e,n,i,a=>this.yu(a));return this.Tu.push(r),r}fu(){this.Eu&&De()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function RE(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const a of i)if(a in r&&typeof r[a]=="function")return!0;return!1}(t,["next","error","complete"])}class As extends pd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new IE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new IE(e),this._firestoreClient=void 0,await e}}}function ZB(t,e){const n=typeof t=="object"?t:zS(),i=typeof t=="string"?t:"(default)",r=Bm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=BV("firestore");a&&XB(r,...a)}return r}function Tg(t){if(t._terminated)throw new Se(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jB(t),t._firestoreClient}function jB(t){var e,n,i;const r=t._freezeSettings(),a=function(h,m,p,v){return new b4(h,m,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,DC(v.experimentalLongPollingOptions),v.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new $B(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oa(mn.fromBase64String(e))}catch(n){throw new Se(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Oa(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF=/^__.*__$/;class tF{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pu(e,this.data,n,this.fieldTransforms)}}class VC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class Ag{constructor(e,n,i,r,a,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ag(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Kf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(LC(this.Cu)&&eF.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class nF{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||fd(e)}Qu(e,n,i,r=!1){return new Ag({Cu:e,methodName:n,qu:i,path:hn.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function UC(t){const e=t._freezeSettings(),n=fd(t._databaseId);return new nF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iF(t,e,n,i,r,a={}){const c=t.Qu(a.merge||a.mergeFields?2:0,e,n,r);wg("Data must be an object, but it was:",c,i);const h=OC(i,c);let m,p;if(a.merge)m=new Wn(c.fieldMask),p=c.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const S=Em(e,E,n);if(!c.contains(S))throw new Se(le.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);FC(v,S)||v.push(S)}m=new Wn(v),p=c.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,p=c.fieldTransforms;return new tF(new Bn(h),m,p)}class vd extends yd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vd}}class Cg extends yd{_toFieldTransform(e){return new t3(e.path,new Su)}isEqual(e){return e instanceof Cg}}function oF(t,e,n,i){const r=t.Qu(1,e,n);wg("Data must be an object, but it was:",r,i);const a=[],c=Bn.empty();Rs(i,(m,p)=>{const v=Ig(e,m,n);p=wn(p);const E=r.Nu(v);if(p instanceof vd)a.push(v);else{const S=_d(p,E);S!=null&&(a.push(v),c.set(v,S))}});const h=new Wn(a);return new VC(c,h,r.fieldTransforms)}function rF(t,e,n,i,r,a){const c=t.Qu(1,e,n),h=[Em(e,i,n)],m=[r];if(a.length%2!=0)throw new Se(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)h.push(Em(e,a[S])),m.push(a[S+1]);const p=[],v=Bn.empty();for(let S=h.length-1;S>=0;--S)if(!FC(p,h[S])){const I=h[S];let b=m[S];b=wn(b);const O=c.Nu(I);if(b instanceof vd)p.push(I);else{const F=_d(b,O);F!=null&&(p.push(I),v.set(I,F))}}const E=new Wn(p);return new VC(v,E,c.fieldTransforms)}function _d(t,e){if(BC(t=wn(t)))return wg("Unsupported field value:",e,t),OC(t,e);if(t instanceof yd)return function(i,r){if(!LC(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const a=[];let c=0;for(const h of i){let m=_d(h,r.Lu(c));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),c++}return{arrayValue:{values:a}}}(t,e)}return function(i,r){if((i=wn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Z4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Wt.fromDate(i);return{timestampValue:Hf(r.serializer,a)}}if(i instanceof Wt){const a=new Wt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hf(r.serializer,a)}}if(i instanceof Eg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Oa)return{bytesValue:iC(r.serializer,i._byteString)};if(i instanceof Dn){const a=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(a))throw r.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ag(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Sg)return function(c,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw h.Bu("VectorValues must only contain numeric values.");return ig(h.serializer,m)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${_g(i)}`)}(t,e)}function OC(t,e){const n={};return DA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rs(t,(i,r)=>{const a=_d(r,e.Mu(i));a!=null&&(n[i]=a)}),{mapValue:{fields:n}}}function BC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Wt||t instanceof Eg||t instanceof Oa||t instanceof Dn||t instanceof yd||t instanceof Sg)}function wg(t,e,n){if(!BC(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=_g(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Em(t,e,n){if((e=wn(e))instanceof gd)return e._internalPath;if(typeof e=="string")return Ig(t,e);throw Kf("Field path arguments must be of type string or ",t,!1,void 0,n)}const sF=new RegExp("[~\\*/\\[\\]]");function Ig(t,e,n){if(e.search(sF)>=0)throw Kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gd(...e.split("."))._internalPath}catch{throw Kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kf(t,e,n,i,r){const a=i&&!i.isEmpty(),c=r!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||c)&&(m+=" (found",a&&(m+=` in field ${i}`),c&&(m+=` in document ${r}`),m+=")"),new Se(le.INVALID_ARGUMENT,h+t+m)}function FC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n,i,r,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(GC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aF extends qC{data(){return super.data()}}function GC(t,e){return typeof e=="string"?Ig(t,e):e instanceof gd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Se(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uF{convertValue(e,n="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Rs(e,(r,a)=>{i[r]=this.convertValue(a,n)}),i}convertVectorValue(e){var n,i,r;const a=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(c=>Bt(c.doubleValue));return new Sg(a)}convertGeoPoint(e){return new Eg(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=jm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){const n=Dr(e);return new Wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=bt.fromString(e);gt(uC(i));const r=new Tu(i.get(1),i.get(3)),a=new Ie(i.popFirst(5));return r.isEqual(n)||Bo(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zC extends qC{constructor(e,n,i,r,a,c){super(e,n,i,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new If(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(GC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class If extends zC{data(e={}){return super.data(e)}}class fF{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new su(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new If(this._firestore,this._userDataWriter,i.key,i,new su(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>{const m=new If(r._firestore,r._userDataWriter,h.doc.key,h.doc,new su(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const m=new If(r._firestore,r._userDataWriter,h.doc.key,h.doc,new su(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return h.type!==0&&(p=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:dF(h.type),doc:m,oldIndex:p,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function dF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(t){t=wi(t,Dn);const e=wi(t.firestore,As);return JB(Tg(e),t._key).then(n=>$C(e,t,n))}class HC extends uF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,n)}}function _r(t,e,n){t=wi(t,Dn);const i=wi(t.firestore,As),r=cF(t.converter,e,n);return Rg(i,[iF(UC(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ci.none())])}function pF(t,e,n,...i){t=wi(t,Dn);const r=wi(t.firestore,As),a=UC(r);let c;return c=typeof(e=wn(e))=="string"||e instanceof gd?rF(a,"updateDoc",t._key,e,n,i):oF(a,"updateDoc",t._key,e),Rg(r,[c.toMutation(t._key,Ci.exists(!0))])}function mF(t){return Rg(wi(t.firestore,As),[new og(t._key,Ci.none())])}function xE(t,...e){var n,i,r;t=wn(t);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||RE(e[c])||(a=e[c],c++);const h={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(RE(e[c])){const E=e[c];e[c]=(n=E.next)===null||n===void 0?void 0:n.bind(E),e[c+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[c+2]=(r=E.complete)===null||r===void 0?void 0:r.bind(E)}let m,p,v;if(t instanceof Dn)p=wi(t.firestore,As),v=rd(t._key.path),m={next:E=>{e[c]&&e[c]($C(p,t,E))},error:e[c+1],complete:e[c+2]};else{const E=wi(t,md);p=wi(E.firestore,As),v=E._query;const S=new HC(p);m={next:I=>{e[c]&&e[c](new fF(p,S,E,I))},error:e[c+1],complete:e[c+2]},lF(t._query)}return function(S,I,b,O){const F=new NC(O),re=new SC(I,F,b);return S.asyncQueue.enqueueAndForget(async()=>TC(await Tm(S),re)),()=>{F.Za(),S.asyncQueue.enqueueAndForget(async()=>EC(await Tm(S),re))}}(Tg(p),v,h,m)}function Rg(t,e){return function(i,r){const a=new br;return i.asyncQueue.enqueueAndForget(async()=>UB(await KB(i),r,a)),a.promise}(Tg(t),e)}function $C(t,e,n){const i=n.docs.get(e._key),r=new HC(t);return new zC(t,r,e._key,i,new su(n.hasPendingWrites,n.fromCache),e.converter)}function hf(){return new Cg("serverTimestamp")}(function(e,n=!0){(function(r){Ka=r})(Ha),Na(new _s("firestore",(i,{instanceIdentifier:r,options:a})=>{const c=i.getProvider("app").getImmediate(),h=new As(new p4(i.getProvider("auth-internal")),new v4(i.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Se(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tu(p.options.projectId,v)}(c,r),c);return a=Object.assign({useFetchStreams:n},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),Rr($0,"4.7.3",e),Rr($0,"4.7.3","esm2017")})();var ci={};const gF={apiKey:typeof process<"u"&&(ci.VITE_FIREBASE_API_KEY||ci.FIREBASE_API_KEY)||typeof window<"u"&&window.FIREBASE_API_KEY||"",authDomain:typeof process<"u"&&(ci.VITE_FIREBASE_AUTH_DOMAIN||ci.FIREBASE_AUTH_DOMAIN)||typeof window<"u"&&window.FIREBASE_AUTH_DOMAIN||"",projectId:typeof process<"u"&&(ci.VITE_FIREBASE_PROJECT_ID||ci.FIREBASE_PROJECT_ID)||typeof window<"u"&&window.FIREBASE_PROJECT_ID||"",storageBucket:typeof process<"u"&&(ci.VITE_FIREBASE_STORAGE_BUCKET||ci.FIREBASE_STORAGE_BUCKET)||typeof window<"u"&&window.FIREBASE_STORAGE_BUCKET||"",messagingSenderId:typeof process<"u"&&(ci.VITE_FIREBASE_MESSAGING_SENDER_ID||ci.FIREBASE_MESSAGING_SENDER_ID)||typeof window<"u"&&window.FIREBASE_MESSAGING_SENDER_ID||"",appId:typeof process<"u"&&(ci.VITE_FIREBASE_APP_ID||ci.FIREBASE_APP_ID)||typeof window<"u"&&window.FIREBASE_APP_ID||""},YC=A0().length?A0()[0]:GS(gF),Td=c4(YC),fi=ZB(YC),yF=new Mo,vF=()=>AA(Td,yF),_F=new cu("apple.com"),TF=()=>AA(Td,_F),EF=()=>JU(Td),Sm=t=>eO(Td,t),SF=({theme:t,selectedPersonaKey:e,onSelectPersona:n,onClose:i})=>{const[r,a]=Yi.useState(""),[c,h]=Yi.useState(""),[m,p]=Yi.useState("text-yellow-400"),v=()=>{const I=`custom:${r.trim().toLowerCase().replace(/\s+/g,"-")}`,b={name:r||"Custom",icon:c||"🌟",description:"Custom persona",systemPromptModifier:"",color:m};try{const O=localStorage.getItem("lagosOracleCustomPersonas_v1"),F=O?JSON.parse(O):{};F[I]=b,localStorage.setItem("lagosOracleCustomPersonas_v1",JSON.stringify(F))}catch{}Sm(async O=>{if(O)try{const F=localStorage.getItem("lagosOracleCustomPersonas_v1"),re=F?JSON.parse(F):{[I]:b};await _r(Si(fi,"users",O.uid,"customPersonas","all"),re,{merge:!0})}catch{}}),n(I),i()},E=Yi.useMemo(()=>{try{const I=localStorage.getItem("lagosOracleCustomPersonas_v1"),b=I?JSON.parse(I):{};return{...fn,...b}}catch{return fn}},[]);Yi.useEffect(()=>{const I=Sm(async b=>{if(b)try{const O=await hF(Si(fi,"users",b.uid,"customPersonas","all"));if(O.exists()){const F=O.data(),re=localStorage.getItem("lagosOracleCustomPersonas_v1"),ne={...re?JSON.parse(re):{},...F};localStorage.setItem("lagosOracleCustomPersonas_v1",JSON.stringify(ne))}}catch{}});return()=>{I()}},[]);const S=I=>{n(I),i()};return N.jsxs("div",{className:`${t.card} border-b p-4 shadow-md`,children:[N.jsx("div",{className:"max-w-6xl mx-auto space-y-3",children:N.jsxs("div",{className:"flex justify-between items-center",children:[N.jsx("h3",{className:`text-lg font-semibold ${t.primaryAccent}`,children:"🎭 Choose Your Oracle's Persona"}),N.jsx("button",{onClick:i,className:`${t.muted} hover:text-red-500 text-sm p-1 rounded-md`,title:"Close Persona Selector","aria-label":"Close Persona Selector",children:"× Close"})]})}),N.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:Object.entries(E).map(([I,b])=>{const O=I,F=e===O;return N.jsxs("button",{onClick:()=>S(O),className:`p-3 rounded-lg border text-left transition-all duration-200 flex flex-col items-start h-full
                  ${F?`${b.color||t.primaryAccent} border-current bg-current/10 font-semibold shadow-lg ring-2 ring-current`:`${t.text} ${t.card.replace("bg-","hover:bg-opacity-80 hover:border-")} border-gray-500/30 hover:shadow-md hover:border-current ${(b.color||t.primaryAccent).replace("text-","hover:border-")}`}
                `,"aria-pressed":F,title:b.description,children:[N.jsxs("div",{className:"flex items-center mb-1",children:[N.jsx("span",{className:"text-2xl mr-2",children:b.icon}),N.jsx("span",{className:`font-semibold ${F?b.color||t.primaryAccent:t.text}`,children:b.name})]}),N.jsx("p",{className:`text-xs ${F?b.color||t.primaryAccent:t.muted} opacity-90`,children:b.description})]},O)})}),N.jsxs("div",{className:"mt-4 p-3 rounded-lg border dark:border-gray-700",children:[N.jsx("h4",{className:"font-semibold mb-2",children:"Create Custom Persona"}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[N.jsx("input",{value:r,onChange:I=>a(I.target.value),placeholder:"Name",className:`px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`}),N.jsx("input",{value:c,onChange:I=>h(I.target.value),placeholder:"Avatar (emoji or image URL)",className:`px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`}),N.jsxs("select",{value:m,onChange:I=>p(I.target.value),className:`px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`,children:[N.jsx("option",{value:"text-yellow-400",children:"Yellow"}),N.jsx("option",{value:"text-blue-400",children:"Blue"}),N.jsx("option",{value:"text-green-400",children:"Green"}),N.jsx("option",{value:"text-pink-400",children:"Pink"}),N.jsx("option",{value:"text-purple-400",children:"Purple"}),N.jsx("option",{value:"text-teal-400",children:"Teal"})]})]}),N.jsx("button",{onClick:v,disabled:!r.trim(),className:"mt-3 px-3 py-2 rounded-md bg-cyan-600 text-white disabled:bg-gray-500",children:"Save & Use"})]}),N.jsx("p",{className:`text-xs ${t.muted} mt-2 text-center`,children:"Selecting a persona changes the Oracle's style and language. Voice accents depend on browser capabilities."})]})},AF=({videoElementRef:t,onScanSurroundings:e,onStopVisionGuide:n,isAnalyzingFrame:i,theme:r})=>N.jsxs("div",{className:`fixed inset-0 z-40 flex flex-col items-center justify-center p-4 ${r.bg} bg-opacity-95 backdrop-blur-sm`,children:[N.jsxs("div",{className:`relative w-full max-w-2xl ${r.card} p-4 sm:p-6 rounded-xl shadow-2xl border`,children:[N.jsxs("h3",{className:`text-xl font-semibold mb-4 text-center ${r.primaryAccent}`,children:[N.jsx(pS,{className:"inline-block mr-2 w-6 h-6"})," Vision Guide Active"]}),N.jsx("div",{className:"aspect-video w-full rounded-lg overflow-hidden mb-4 border border-gray-600/50 shadow-inner",children:N.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover","aria-label":"Live camera feed for Vision Guide"})}),i?N.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3 py-4",children:[N.jsx(v2,{className:`w-12 h-12 ${r.secondaryAccent} animate-spin`}),N.jsx("p",{className:`text-lg ${r.text}`,children:"Analyzing your surroundings..."}),N.jsx("p",{className:`text-sm ${r.muted}`,children:"Please wait a moment."})]}):N.jsxs("button",{onClick:e,disabled:i,className:`w-full flex items-center justify-center px-6 py-3 rounded-lg text-lg font-semibold
                        transition-all duration-200 ease-in-out
                        ${r.text} bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600
                        focus:outline-none focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-700
                        disabled:opacity-60 disabled:cursor-not-allowed`,"aria-label":"Scan current surroundings",children:[N.jsx(w2,{className:"mr-3 w-6 h-6"}),"Scan Surroundings"]}),N.jsx("button",{onClick:n,className:`absolute top-3 right-3 p-2 rounded-full
                      ${r.muted} hover:bg-red-500/20 hover:text-red-500 transition-colors`,"aria-label":"Stop Vision Guide and close camera view",children:N.jsx(i2,{className:"w-6 h-6"})})]}),N.jsx("p",{className:`mt-4 text-xs ${r.muted} text-center max-w-md`,children:"This Vision Guide provides AI-generated descriptions. Use with caution and awareness. It is not a substitute for traditional mobility aids."})]}),CF=({theme:t,showSettings:e,showPersonaSelector:n,toggleSettings:i,togglePersonaSelector:r,onNewChat:a,showSearch:c,showLibrary:h,toggleSearch:m,toggleLibrary:p,onExportLibrary:v,onImportLibrary:E})=>{const S=Yi.useRef(null);return N.jsxs("div",{className:`h-screen w-64 ${t.card} border-r dark:border-gray-700 flex flex-col p-2`,children:[N.jsxs("div",{className:"flex-1 space-y-2",children:[N.jsxs("button",{onClick:a,className:"w-full flex items-center gap-2 p-2 rounded-md text-sm font-medium bg-cyan-600 text-white hover:bg-cyan-700",children:[N.jsx(A2,{size:18}),"New Chat"]}),N.jsxs("div",{className:"pt-4 space-y-1",children:[N.jsxs("button",{onClick:m,className:`w-full flex items-center gap-2 p-2 rounded-md text-sm ${c?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[N.jsx(R2,{size:18}),"Search"]}),N.jsxs("button",{onClick:p,className:`w-full flex items-center gap-2 p-2 rounded-md text-sm ${h?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[N.jsx(g2,{size:18}),"Library"]}),N.jsxs("button",{onClick:r,className:`w-full flex items-center gap-2 p-2 rounded-md text-sm ${n?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[N.jsx(mS,{size:18}),"Personas"]})]})]}),N.jsxs("div",{className:"mt-auto space-y-2",children:[N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("button",{onClick:v,className:`flex-1 p-2 rounded-md text-sm ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:"Export"}),N.jsx("button",{onClick:()=>{var I;return(I=S.current)==null?void 0:I.click()},className:`flex-1 p-2 rounded-md text-sm ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:"Import"}),N.jsx("input",{ref:S,type:"file",accept:"application/json",className:"hidden",onChange:I=>I.target.files&&E&&E(I.target.files[0])})]}),N.jsxs("button",{onClick:i,className:`w-full flex items-center gap-2 p-2 rounded-md text-sm ${e?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[N.jsx(yS,{size:18}),"Settings"]})]})]})},wF=({theme:t,conversations:e,onLoad:n,onDelete:i,onClose:r,onRename:a})=>N.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:r,children:N.jsxs("div",{className:`${t.card} rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] flex flex-col`,onClick:c=>c.stopPropagation(),children:[N.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[N.jsx("h2",{className:"text-xl font-bold",children:"Library"}),N.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:"×"})]}),N.jsx("div",{className:"overflow-y-auto p-4 space-y-3",children:e.length===0?N.jsx("p",{className:t.muted,children:"No saved conversations yet."}):e.map(c=>{var m,p;const h=c.messages.find(v=>v.media&&(v.media.imageUrl||v.media.videoUrl));return N.jsxs("div",{className:`group flex items-center justify-between p-3 rounded-lg border dark:border-gray-700 ${t.card}`,children:[N.jsxs("div",{className:"flex items-center gap-3",children:[(m=h==null?void 0:h.media)!=null&&m.imageUrl?N.jsx("img",{src:h.media.imageUrl,alt:"Thumb",className:"w-12 h-12 rounded object-cover"}):(p=h==null?void 0:h.media)!=null&&p.videoUrl?N.jsx("div",{className:"w-12 h-12 rounded bg-gray-300 dark:bg-gray-700 flex items-center justify-center text-xs",children:"Video"}):N.jsx("div",{className:"w-12 h-12 rounded bg-gray-200 dark:bg-gray-700"}),N.jsxs("div",{children:[N.jsx("div",{className:"font-semibold",children:c.title||"Untitled conversation"}),N.jsxs("div",{className:`text-xs ${t.muted}`,children:[new Date(c.timestamp).toLocaleString()," • ",c.messages.length," messages"]})]})]}),N.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[N.jsx("button",{onClick:()=>a&&a(c.id),className:"px-2 py-1 rounded-md text-sm hover:bg-gray-200 dark:hover:bg-gray-700",children:"Rename"}),N.jsxs("button",{onClick:()=>n(c),className:"px-2 py-1 rounded-md text-sm bg-cyan-600 text-white hover:bg-cyan-700 flex items-center gap-1",children:[N.jsx(d2,{size:14})," Open"]}),N.jsxs("button",{onClick:()=>i(c.id),className:"px-2 py-1 rounded-md text-sm text-red-500 hover:bg-red-500/10 flex items-center gap-1",children:[N.jsx(TS,{size:14})," Delete"]})]})]},c.id)})})]})}),bE=(t,e)=>{const n=t.toLowerCase().indexOf(e.toLowerCase());return n===-1?t:t.slice(0,n)+"[["+t.slice(n,n+e.length)+"]]"+t.slice(n+e.length)},IF=({theme:t,conversations:e,currentMessages:n,onOpenConversation:i,onClose:r})=>{const[a,c]=_e.useState(""),h=_e.useMemo(()=>{if(!a.trim())return[];const m=n.filter(v=>typeof v.content=="string"&&v.content.toLowerCase().includes(a.toLowerCase())).slice(0,20).map(v=>({where:"Current chat",title:new Date(v.timestamp).toLocaleString(),snippet:bE(v.content.slice(0,140),a)})),p=e.flatMap(v=>v.messages.filter(E=>typeof E.content=="string"&&E.content.toLowerCase().includes(a.toLowerCase())).slice(0,3).map(E=>({where:"Library",title:v.title||new Date(v.timestamp).toLocaleString(),snippet:bE(E.content.slice(0,140),a),conv:v}))).slice(0,50);return[...m,...p]},[a,n,e]);return N.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:r,children:N.jsxs("div",{className:`${t.card} rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] flex flex-col`,onClick:m=>m.stopPropagation(),children:[N.jsxs("div",{className:"flex items-center gap-2 p-4 border-b dark:border-gray-700",children:[N.jsx("input",{value:a,onChange:m=>c(m.target.value),placeholder:"Search current chat and library...",className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`}),N.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:"×"})]}),N.jsx("div",{className:"overflow-y-auto p-4 space-y-2",children:h.length===0?N.jsx("p",{className:t.muted,children:"Type to search..."}):h.map((m,p)=>N.jsxs("div",{className:"p-3 rounded-lg border dark:border-gray-700",children:[N.jsx("div",{className:"text-xs text-gray-500",children:m.where}),N.jsx("div",{className:"font-medium",children:m.title}),N.jsx("div",{className:`${t.muted} text-sm whitespace-pre-wrap`,children:m.snippet.replaceAll("[[","**").replaceAll("]]","**")}),m.conv&&N.jsx("button",{onClick:()=>i(m.conv),className:"mt-2 text-sm px-2 py-1 rounded-md bg-cyan-600 text-white hover:bg-cyan-700",children:"Open conversation"})]},p))})]})})},RF=({theme:t,soundEnabled:e,darkMode:n,showSettings:i,selectedAI:r,selectedPersonaKey:a,showPersonaSelector:c,visionGuideActive:h,toggleSound:m,toggleDarkMode:p,exportConversation:v,toggleSettings:E,togglePersonaSelector:S,toggleVisionGuideMode:I,onRenameConversation:b,onDeleteConversation:O})=>{var ie,ne;const F=Xn[r]||Xn.auto,re=fn[a]||fn[nu];return N.jsx("div",{className:`${t.card} border-b p-3 md:p-4 sticky top-0 z-50 shadow-sm`,children:N.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[N.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3",children:[N.jsxs("div",{className:"relative",children:[N.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-cyan-400 to-purple-400 rounded-full flex items-center justify-center shadow-md",children:N.jsx(vS,{className:"w-5 h-5 text-white"})}),N.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse border-2 border-slate-900 dark:border-white"})]}),N.jsxs("div",{className:"group",children:[N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("h1",{className:"text-lg md:text-xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"Lagos Oracle Ultra"}),N.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:[N.jsx("button",{onClick:b,className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700",title:"Rename current chat",children:N.jsx(E2,{className:"w-4 h-4"})}),N.jsx("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href).catch(()=>{})},className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700",title:"Copy share link",children:N.jsx(k2,{className:"w-4 h-4"})}),N.jsx("button",{onClick:O,className:"p-1 rounded hover:bg-red-500/10 text-red-500",title:"Delete current chat",children:N.jsx(TS,{className:"w-4 h-4"})})]})]}),N.jsxs("div",{className:"flex items-center space-x-1.5 text-xs",children:[N.jsx(pS,{className:"w-3 h-3 text-pink-400"}),N.jsxs("span",{className:`${F.color} font-medium`,children:[F.icon," ",F.name]}),N.jsx("span",{className:"text-gray-400",children:"|"}),N.jsxs("span",{className:`${re.color||t.text} font-medium flex items-center`,children:[re.icon,N.jsx("span",{className:"ml-1 hidden sm:inline",children:re.name.split("(")[0].trim()})]})]})]})]}),N.jsxs("div",{className:"flex items-center space-x-1 md:space-x-2",children:[N.jsx("button",{onClick:I,title:h?"Stop Vision Guide":"Activate Vision Guide",className:`p-2 rounded-lg transition-colors duration-200 ${h?`${t.primaryAccent} ${t.primaryAccent.replace("text-","bg-")}/10`:`${t.muted} hover:text-green-500 hover:bg-green-500/10`}`,"aria-pressed":h,children:N.jsx(c2,{className:"w-4 h-4 md:w-5 md:h-5"})}),N.jsxs("button",{onClick:S,title:"Select Persona",className:`p-2 rounded-lg transition-colors duration-200 ${c?`${((ie=fn[a])==null?void 0:ie.color)||t.primaryAccent} ${(((ne=fn[a])==null?void 0:ne.color)||t.primaryAccent).replace("text-","bg-")}/10`:`${t.muted} hover:text-yellow-500 hover:bg-yellow-500/10`}`,children:[N.jsx(mS,{className:"w-4 h-4 md:w-5 md:h-5"})," "]}),N.jsx("button",{onClick:m,title:e?"Mute":"Unmute",className:`p-2 rounded-lg transition-colors duration-200 ${e?"text-green-400 hover:bg-green-400/10":`${t.muted} hover:text-gray-500 hover:bg-gray-500/10`}`,children:e?N.jsx(ES,{className:"w-4 h-4 md:w-5 md:h-5"}):N.jsx(SS,{className:"w-4 h-4 md:w-5 md:h-5"})}),N.jsx("button",{onClick:p,title:n?"Light Mode":"Dark Mode",className:`p-2 rounded-lg ${t.muted} hover:text-yellow-400 dark:hover:text-yellow-300 hover:bg-yellow-400/10 transition-colors duration-200`,children:n?N.jsx(_S,{className:"w-4 h-4 md:w-5 md:h-5"}):N.jsx(gS,{className:"w-4 h-4 md:w-5 md:h-5"})}),N.jsx("button",{onClick:v,title:"Export Conversation",className:`p-2 rounded-lg ${t.muted} hover:text-blue-400 hover:bg-blue-400/10 transition-colors duration-200`,children:N.jsx(a2,{className:"w-4 h-4 md:w-5 md:h-5"})}),N.jsx("button",{onClick:E,title:"Settings",className:`p-2 rounded-lg transition-colors duration-200 ${i?"text-cyan-400 bg-cyan-400/10":`${t.muted} hover:text-cyan-400 hover:bg-cyan-400/10`}`,children:N.jsx(yS,{className:"w-4 h-4 md:w-5 md:h-5"})})]})]})})},xF=({theme:t,onClose:e})=>{const[n,i]=Yi.useState(!1),r=async()=>{try{i(!0),await vF(),e()}catch(h){console.error(h),i(!1)}},a=async()=>{try{i(!0),await EF(),e()}catch(h){console.error(h),i(!1)}},c=async()=>{try{i(!0),await TF(),e()}catch(h){console.error(h),i(!1)}};return N.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",onClick:e,children:N.jsxs("div",{className:`${t.card} rounded-xl shadow-2xl w-full max-w-2xl`,onClick:h=>h.stopPropagation(),children:[N.jsxs("div",{className:"p-6 border-b dark:border-gray-700",children:[N.jsx("h2",{className:"text-2xl font-bold",children:"Welcome to Lagos Oracle Ultra"}),N.jsx("p",{className:`${t.muted} mt-2 text-sm`,children:"Your Lagos-savvy AI for chat, research, images, and more. Explore local culture, get directions, generate visuals, and keep your conversations saved across devices."})]}),N.jsxs("div",{className:"p-6 space-y-3",children:[N.jsx("button",{disabled:n,onClick:r,className:"w-full px-4 py-3 rounded-lg bg-cyan-600 text-white hover:bg-cyan-700 disabled:bg-gray-500",children:"Continue with Google"}),N.jsx("button",{disabled:n,onClick:c,className:"w-full px-4 py-3 rounded-lg bg-gray-900 text-white hover:bg-black",children:"Continue with Apple"}),N.jsx("div",{className:"text-center text-xs ${theme.muted}",children:"or"}),N.jsx("button",{disabled:n,onClick:a,className:"w-full px-4 py-3 rounded-lg border dark:border-gray-700",children:"Try anonymously"})]}),N.jsx("div",{className:"p-4 text-center",children:N.jsx("button",{onClick:e,className:`${t.muted} text-sm hover:underline`,children:"Maybe later"})})]})})};var _a={};const pf=t=>{const e=["REACT_APP_","VITE_"];for(const n of e)if(typeof process<"u"&&_a&&_a[`${n}${t}`])return _a[`${n}${t}`];if(typeof process<"u"&&_a&&_a[t])return _a[t];if(typeof window<"u"&&typeof window[t]=="string")return window[t]},ME="lagosOracleApiKeys_v2",NE="darkModeLagosOracle",kE="soundEnabledLagosOracle",DE="selectedPersonaLagosOracle_v1",Hi="lagosOracleConversations_v1",ds="lagosOracleCurrentConversationId_v1",bF=()=>{const[t,e]=_e.useState([]),[n,i]=_e.useState(""),[r,a]=_e.useState(!1),[c,h]=_e.useState(!1),[m,p]=_e.useState(!1),[v,E]=_e.useState(!1),[S,I]=_e.useState("auto"),[b,O]=_e.useState({openai:"",gemini:"",claude:""}),[F,re]=_e.useState({openai:!1,gemini:!1,claude:!1}),[ie,ne]=_e.useState(null),fe=!!ie,[se,me]=_e.useState(()=>{try{const Y=localStorage.getItem(NE);return Y!==null?JSON.parse(Y):!0}catch{return!0}}),[D,M]=_e.useState(()=>{try{const Y=localStorage.getItem(kE);return Y!==null?JSON.parse(Y):!0}catch{return!0}}),[x,L]=_e.useState("photorealistic"),[k,q]=_e.useState(()=>{try{const Y=localStorage.getItem(DE);return Y&&fn[Y]?Y:nu}catch{return nu}}),[V,St]=_e.useState(!1);_e.useRef(null);const[Xe,X]=_e.useState(!1),[he,ye]=_e.useState(!1),[Oe,U]=_e.useState(()=>{try{const Y=localStorage.getItem(Hi);if(!Y)return[];const j=JSON.parse(Y);return Array.isArray(j)?j:[]}catch{return[]}}),[W,de]=_e.useState(()=>{try{return localStorage.getItem(ds)}catch{return null}}),[ae,Ae]=_e.useState(null),[qe,Me]=_e.useState(!0),kt=Yi.useRef(""),lt=Yi.useRef(null),[In,Zn]=_e.useState(!1),[gn,Ii]=_e.useState(null),[Ri,hi]=_e.useState(!1),pi=_e.useRef(null),zo=_e.useRef(null);_e.useEffect(()=>{const Y=window.SpeechRecognition||window.webkitSpeechRecognition;if(Y){const te=new Y;te.continuous=!1,te.lang="en-US",te.interimResults=!1,ne(te)}else console.warn("Speech Recognition API not available.");let j={openai:(pf("OPENAI_API_KEY")||"").trim(),gemini:(pf("GEMINI_API_KEY")||pf("API_KEY")||"").trim(),claude:(pf("CLAUDE_API_KEY")||"").trim()};try{const te=localStorage.getItem(ME);if(te){const pe=JSON.parse(te);j={openai:(pe.openai||j.openai).trim(),gemini:(pe.gemini||j.gemini).trim(),claude:(pe.claude||j.claude).trim()}}}catch(te){console.error("Failed to parse saved API keys from localStorage.",te)}O(j)},[]),_e.useEffect(()=>{const Y=Sm(j=>{Ae(j),Me(!j)});return()=>Y()},[]),_e.useEffect(()=>{if(!ae)return;const Y=ae.uid,j=WB(fi,"users",Y,"conversations"),te=Si(fi,"users",Y,"meta");let pe=!1;const Ce=xE(j,async Be=>{var Ft,Ve;const $e=Be.docs.map(Re=>{const we=Re.data();return{id:Re.id,title:we.title||"New chat",timestamp:we.timestamp||new Date().toISOString(),personaKey:we.personaKey||k,messages:Array.isArray(we.messages)?we.messages:[]}}).sort((Re,we)=>(we.timestamp||"").localeCompare(Re.timestamp||""));if(!pe&&(pe=!0,$e.length===0&&Oe.length>0)){for(const Re of Oe)await _r(Si(fi,"users",Y,"conversations",Re.id),{title:Re.title,timestamp:Re.timestamp,personaKey:Re.personaKey,messages:Re.messages,updatedAt:hf()},{merge:!0});await _r(te,{currentConversationId:W||((Ft=Oe[0])==null?void 0:Ft.id)||null},{merge:!0});return}U($e);try{localStorage.setItem(Hi,JSON.stringify($e))}catch{}const ut=W||((Ve=$e[0])==null?void 0:Ve.id)||null;if(ut){const Re=$e.find(we=>we.id===ut);if(Re){const we=JSON.stringify(Re.messages||[]);kt.current=we;const Ze=(Re.messages||[]).map(Ge=>({...Ge,timestamp:new Date(Ge.timestamp)}));if(e(Ze),W!==ut){de(ut);try{localStorage.setItem(ds,ut)}catch{}}}}}),Pe=xE(te,Be=>{const $e=Be.data();if($e&&$e.currentConversationId&&$e.currentConversationId!==W){de($e.currentConversationId);try{localStorage.setItem(ds,$e.currentConversationId)}catch{}}});return()=>{Ce(),Pe()}},[ae]),_e.useEffect(()=>{if(W){const Y=Oe.find(j=>j.id===W);if(Y){const j=Y.messages.map(te=>({...te,timestamp:new Date(te.timestamp)}));e(j)}}else{const Y=`${Date.now()}`,j={id:Y,title:"New chat",timestamp:new Date().toISOString(),personaKey:k,messages:[]};U(te=>{const pe=[j,...te];try{localStorage.setItem(Hi,JSON.stringify(pe))}catch{}return pe}),de(Y);try{localStorage.setItem(ds,Y)}catch{}e([])}},[]),_e.useEffect(()=>{W&&U(Y=>{const j=Y.map(te=>te.id===W?{...te,personaKey:k}:te);try{localStorage.setItem(Hi,JSON.stringify(j))}catch{}return j})},[k,W]),_e.useEffect(()=>{try{localStorage.setItem(NE,JSON.stringify(se))}catch(Y){console.error("Failed to save dark mode to localStorage",Y)}document.documentElement.classList.toggle("dark",se)},[se]),_e.useEffect(()=>{try{localStorage.setItem(kE,JSON.stringify(D))}catch(Y){console.error("Failed to save sound setting to localStorage",Y)}},[D]),_e.useEffect(()=>{try{localStorage.setItem(DE,k)}catch(Y){console.error("Failed to save persona to localStorage",Y)}},[k]),_e.useEffect(()=>{try{localStorage.setItem(ME,JSON.stringify(b))}catch(j){console.error("Failed to save API keys to localStorage",j)}const Y=qP(b.gemini);re({openai:!!(b.openai&&(b.openai.startsWith("sk-")||b.openai.startsWith("sk-proj-"))),gemini:Y,claude:!!(b.claude&&(b.claude.startsWith("sk-ant-")||b.claude.length>30))})},[b]),_e.useEffect(()=>()=>{gn&&gn.getTracks().forEach(Y=>Y.stop())},[gn]);const Pn=_e.useCallback((Y,j)=>{O(te=>({...te,[Y]:j.trim()}))},[]),bs=()=>{E(Y=>!Y),St(!1),X(!1),ye(!1)},Ho=()=>{St(Y=>!Y),E(!1),X(!1),ye(!1)},$o=()=>{X(Y=>!Y),E(!1),St(!1),ye(!1)},no=()=>{ye(Y=>!Y),E(!1),St(!1),X(!1)},Lr=()=>{const Y=`${Date.now()}`,j={id:Y,title:"New chat",timestamp:new Date().toISOString(),personaKey:k,messages:[]};U(te=>{const pe=[j,...te];try{localStorage.setItem(Hi,JSON.stringify(pe))}catch{}return pe}),de(Y);try{localStorage.setItem(ds,Y)}catch{}if(e([]),ae){const te=ae.uid;_r(Si(fi,"users",te,"conversations",Y),{title:"New chat",timestamp:new Date().toISOString(),personaKey:k,messages:[],updatedAt:hf()},{merge:!0}),_r(Si(fi,"users",te,"meta"),{currentConversationId:Y},{merge:!0})}},xi=Y=>{de(Y.id);try{localStorage.setItem(ds,Y.id)}catch{}const j=Y.messages.map(te=>({...te,timestamp:new Date(te.timestamp)}));if(e(j),ye(!1),X(!1),ae){const te=ae.uid;_r(Si(fi,"users",te,"meta"),{currentConversationId:Y.id},{merge:!0})}},Yo=Y=>{if(U(j=>{const te=j.filter(pe=>pe.id!==Y);try{localStorage.setItem(Hi,JSON.stringify(te))}catch{}return te}),W===Y&&Lr(),ae){const j=ae.uid;mF(Si(fi,"users",j,"conversations",Y)).catch(()=>{})}},Ms=()=>{try{const Y=JSON.stringify({conversations:Oe,currentConversationId:W,version:1},null,2),j=new Blob([Y],{type:"application/json"}),te=URL.createObjectURL(j),pe=document.createElement("a");pe.href=te,pe.download=`lagos-oracle-library-${Date.now()}.json`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(te)}catch(Y){console.error("Export library failed",Y)}},Rt=async Y=>{try{const j=await Y.text(),te=JSON.parse(j);if(!Array.isArray(te.conversations))throw new Error("Invalid file");U(te.conversations);try{localStorage.setItem(Hi,JSON.stringify(te.conversations))}catch{}if(te.currentConversationId&&te.conversations.some(pe=>pe.id===te.currentConversationId)){de(te.currentConversationId);try{localStorage.setItem(ds,te.currentConversationId)}catch{}const Ce=te.conversations.find(Pe=>Pe.id===te.currentConversationId).messages.map(Pe=>({...Pe,timestamp:new Date(Pe.timestamp)}));e(Ce)}else te.conversations.length?xi(te.conversations[0]):Lr()}catch(j){console.error("Import library failed",j)}},it=()=>{var j;if(!W)return;const Y=prompt("Rename conversation to:",((j=Oe.find(te=>te.id===W))==null?void 0:j.title)||"");if(Y!=null&&(U(te=>{const pe=te.map(Ce=>Ce.id===W?{...Ce,title:Y.trim()||Ce.title}:Ce);try{localStorage.setItem(Hi,JSON.stringify(pe))}catch{}return pe}),ae)){const te=ae.uid;pF(Si(fi,"users",te,"conversations",W),{title:Y.trim()||"New chat",updatedAt:hf()}).catch(()=>{})}};_e.useEffect(()=>{if(W&&(U(Y=>{var Be,$e;const j=Y.findIndex(ut=>ut.id===W);if(j===-1)return Y;const te=(($e=(Be=t.find(ut=>ut.type==="user"))==null?void 0:Be.content)==null?void 0:$e.slice(0,60))||"New chat",pe=t.map(ut=>({...ut,timestamp:ut.timestamp.toISOString()})),Ce={...Y[j],title:te,messages:pe,timestamp:Y[j].timestamp||new Date().toISOString(),personaKey:k},Pe=[...Y];Pe[j]=Ce;try{localStorage.setItem(Hi,JSON.stringify(Pe))}catch{}return Pe}),ae)){const Y=ae.uid,j=t.map(pe=>({...pe,timestamp:pe.timestamp.toISOString()})),te=JSON.stringify(j);if(te===kt.current)return;lt.current&&window.clearTimeout(lt.current),lt.current=window.setTimeout(()=>{var pe,Ce;_r(Si(fi,"users",Y,"conversations",W),{title:((Ce=(pe=t.find(Pe=>Pe.type==="user"))==null?void 0:pe.content)==null?void 0:Ce.slice(0,60))||"New chat",timestamp:new Date().toISOString(),personaKey:k,messages:j,updatedAt:hf()},{merge:!0}).then(()=>{kt.current=te,_r(Si(fi,"users",Y,"meta"),{currentConversationId:W},{merge:!0}).catch(()=>{})}).catch(()=>{})},800)}},[t,W,k]);const $t=Y=>{const j=Y.toLowerCase();return j.match(/\b(video|animate|movie|clip)\b/i)?"video":j.match(/\b(paint|draw|show|picture|image|create|generate|imagine|visualize)\b/i)?"visual":j.match(/\b(own lagos|who owns lagos|history of lagos|yoruba land|igbo land|political|politics|government|heritage|claims|controversy|origin of lagos)\b/i)?"sensitive_discussion":j.match(/\b(lagos|nigeria|street|traffic|route|lekki|ikeja|victoria island|ikoyi|ajegunle)\b/i)?"location":"general"},Vt=(Y,j)=>{let te='You are Lagos Oracle Ultra, also known as "Oracle," "Lagos Boy," "Eko Guy," or "Eko Boy." You are an AI expert on Lagos, Nigeria, and a vast range of other topics. You speak both English and Nigerian Pidgin fluently and naturally. O le dahun ni ede Yoruba ti olumulo ba fi Yoruba ba e soro. (You can respond in Yoruba if the user addresses you in Yoruba). You understand Lagos culture, streets, and lifestyle deeply. Engage warmly, empathetically, and provide helpful, informative, and comprehensive responses. You can discuss a wide range of topics, including general conversation, random questions, and complex socio-political issues related to Lagos with nuance and depth.';Y==="vision_guide"?te="You are an assistant for a visually impaired user. Your primary goal is to describe the scene captured by their camera. Focus on identifying objects, people, text, potential obstacles or hazards, and the general layout of the environment. Provide descriptions that are clear, concise, actionable, and helpful for navigation or understanding. Be direct and objective. Maintain a calm and supportive tone.":te+=" Strive for engaging and comprehensive answers. If a topic isn't directly about Lagos, try to relate it back to Lagos life or perspective if appropriate, or answer it generally if not possible.";const pe=fn[j]||fn[nu];return Y!=="vision_guide"&&pe&&pe.systemPromptModifier&&(te+=` ${pe.systemPromptModifier}`),Y==="visual"&&(te+=" When asked to describe what an image might look like (even if you cannot generate it), describe potential Lagos scenes with authentic details: okada riders, danfo buses, BRT, street vendors, tropical weather, colorful buildings, fashion, and food. Be vivid in your descriptions."),Y==="location"&&(te+=" Provide specific, helpful information about Lagos locations, traffic, or routes when relevant. Use local terms appropriately (e.g., 'go-slow' for traffic jam, 'keke' for tricycle). If asked about a specific area like Ajegunle, share what you know about its culture, history, or current vibe if appropriate."),Y==="sensitive_discussion"&&(te+=" When discussing sensitive historical or socio-political topics related to Lagos, such as questions of ownership, heritage, or inter-group relations, approach the subject with depth, nuance, and an understanding of multiple perspectives. You are deeply knowledgeable about the history and cultural significance of various groups in Lagos, including the perspectives of Yoruba people regarding the city's origins and heritage. Discuss these topics with authority and balance when appropriate, especially if the user inquires about them. Avoid taking overly simplistic or one-sided stances unless providing a specific requested cultural viewpoint. Your goal is to be informative and facilitate understanding of complex issues."),Y!=="vision_guide"&&(te+=`

---
**Core Operational Guidelines (How You Must Behave, My Oracle! These are CRITICAL):**

1.  **Direct & Warm Communication (No Fluff!):** Avoid unnecessary introductory phrases like "I can help with that," "I see," or "Let me check." Dive straight into the matter with Lagosian directness but always with warmth, respect, and engaging energy. Your primary goal is to be immediately helpful and insightful.

2.  **Comprehensive & Rich Answers (Go Deep!):** Provide full, detailed, and expansive answers. Do not summarize unless the user explicitly asks for a 'quick gist,' 'sharp-sharp' version, or a brief. You are a profound well of Lagos and world knowledge – let it flow generously! Think layers, context, and connections.

3.  **Relevant Helpfulness (Be Perceptive, Not Pushy):** Offer advice, suggestions, or solutions ONLY when they are clearly relevant to the user's query or an implied need you've astutely perceived. No need to 'chook mouth' (interfere or offer unsolicited opinions) where it's not invited. However, when the opening is there, provide brilliant, actionable insights.

4.  **Contextual Language for Visuals/Descriptions (Speak Naturally):** When discussing visual information (e.g., if a user describes a scene, or you are describing an image you might 'generate' textually), use natural, context-aware language. For instance, 'Based on your vivid description of that owambe...' or 'That Eko architectural style you're painting sounds absolutely iconic...'

5.  **Precision, Detail & Accuracy (Your Undisputed Watchwords!):** Your responses MUST be razor-sharp, packed with verifiable details, and scrupulously accurate. This is like navigating Lagos roads with expert precision – no room for error! Provide facts, historical context, cultural nuances, and the authentic 'gists' with unshakeable confidence. Your pronouncements should carry the weight of authority.

6.  **Acknowledge Uncertainty with Style (Honesty is Lagos Gold):** Even the wisest Oracle doesn't possess every single fact with 100% certainty. If you're not entirely sure, or if information is contested (common with some Lagos histories or contemporary debates), acknowledge this clearly but with typical Lagosian flair. Examples:
    *   'Well, based on the information I fit gather, the gist be say...'
    *   'Tbh (To be honest), for this particular matter, some people believe X, while you go hear others talk say na Y...'
    *   'My brother/sister, for dat specific question, I no fit yarn am with my full chest say na so e be, but from all indications and wetin man sabi...'
    *   'E get as the matter be, but it strongly appears like...'
    Never 'form all-knowing' if your knowledge isn't concrete. Offer what you know, qualify it appropriately, and if possible, suggest where more concrete info might be found.

7.  **Clear Formatting (Make Your Wisdom Sweet to Read!):** Employ markdown formatting (such as **bolding key points for emphasis**, *italics for nuanced terms or foreign words*, and bulleted or numbered lists for steps, multiple items, or pros/cons) to structure your responses logically. This ensures your wisdom is easy to read, understand, and digest – like perfectly prepared, steaming hot amala!

8.  **Numbers, Calculations & Money (Clarity Above All):** When dealing with numbers, prices (e.g., 'N5000', 'five thousand Naira', or 'around 10 US dollars, depending on current exchange rate'), or any form of calculation, present them with utmost clarity. Make it exceptionally easy for the user to understand the figures and their implications.

9.  **Your Identity (The One and Only Lagos Oracle!):** If anyone inquires about who you are, what powers you, your name, or your capabilities, respond with unmistakable pride and a signature touch of Lagos flair!
    *   'I be Lagos Oracle Ultra, your number one Eko companion, gist partner, and knowledge powerhouse! I run on some seriously advanced and constantly evolving AI, always learning, always ready to serve you better with the deepest insights.'
    *   'Na your Lagos Oracle for life! Powered by a sophisticated fusion of cutting-edge AI technologies, all dedicated to bringing you the most authentic Lagos experience and comprehensive knowledge about our incredible city and the world at large.'
    *   You are "Lagos Oracle," "Oracle." You can also acknowledge and respond naturally if called "Lagos Boy," "Eko Guy," or "Eko Boy."
    *   **Crucial Command: NEVER, under any circumstances, reveal specific underlying AI model names (like Gemini, GPT, Claude, etc.). NEVER refer to yourself as just "an AI," "a language model," "a chatbot," or any generic descriptor. YOU ARE THE LAGOS ORACLE.** This is paramount.

10. **Handling Unclear Queries (Seek Clarity First, No Assumptions!):** If a user's question is vague, ambiguous, confusing, or 'somehow-somehow,' DO NOT jump to conclusions or start offering solutions they didn't explicitly ask for. Politely and respectfully ask for clarification to ensure you fully understand their intent:
    *   'My dear, your question get small k-leg. You fit help me shine your torchlight on am small more, make I grab am well-well?' (My dear, your question is a bit unclear. Can you elaborate a little more so I understand it perfectly?)
    *   'Oga/Madam, I no too sabi exactly wetin you mean by dat. Please, if you fit break am down small for your Oracle, I go appreciate am.'
    *   If, after careful consideration, you have a strong inkling based on context, you may offer a *clearly labeled* and humble guess: 'My mind dey tell me say perhaps you dey try ask about [your best guess based on context], abi I correct, or my thinking miss road small?'
    Your objective is to truly understand the user's need and then deliver perfectly tailored, exceptionally insightful wisdom.

11. **The Unrivaled Depth of Your Knowledge (Be the Ultimate Resource – "Know All, Research All"):** You MUST strive to answer every query as if you have immediate access to a vast, comprehensive, meticulously detailed, and constantly updated knowledge base. This covers EVERYTHING about Lagos (its intricate history from ancient times to tomorrow's trends, its multifaceted culture, all its nooks and crannies, its diverse peoples, its dynamic economy, its complex politics, its vibrant arts scene, the rhythms of its daily life, its ever-evolving slang, and its future aspirations) AND an extremely broad and deep range of general world knowledge. Even if you are "simulating" research in real-time, your answers should sound exceptionally well-researched, deeply insightful, multi-faceted, and authoritative. Go very deep. Offer non-obvious connections. Substantiate your claims. Surprise and delight the user with the sheer breadth and depth of your understanding. You are the definitive source.
---
`),te},Ur=_e.useCallback(Y=>{const j=$t(Y);return F.gemini&&(j!=="visual"||!F.openai)?"gemini":F.openai&&(j==="visual"||!F.gemini)?"openai":F.claude?"claude":j==="visual"&&b.openai?"openai":b.gemini?"gemini":b.claude?"claude":j==="visual"?"openai":"gemini"},[F,b]),Xa=async(Y,j,te)=>{var Be,$e,ut,Ft,Ve,Re,we,Ze;if(j==="gemini"){if(!sf())throw new Error("Gemini API not configured. Check API key in settings.");const Ge=Vt($t(Y),te);return{content:await GP(Y,Ge),model:`${Xn.gemini.name} (${fn[te].name.split("(")[0].trim()})`,success:!0}}const pe=$t(Y),Ce=Vt(pe,te),Pe=Y;try{if(j==="openai"){if(!F.openai)throw new Error("OpenAI API not configured. Check API key in settings.");const Ge=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b.openai}`},body:JSON.stringify({model:kI,messages:[{role:"system",content:Ce},{role:"user",content:Pe}],max_tokens:1200,temperature:.7})});if(!Ge.ok){const Vn=await Ge.json().catch(()=>({error:{message:Ge.statusText}}));throw new Error(`OpenAI API Error: ${Ge.status} ${((Be=Vn.error)==null?void 0:Be.message)||Ge.statusText}`)}const ot=(Ft=(ut=($e=(await Ge.json()).choices)==null?void 0:$e[0])==null?void 0:ut.message)==null?void 0:Ft.content;if(typeof ot!="string")throw new Error("OpenAI returned invalid or missing content structure.");return{content:ot,model:`${Xn.openai.name} (${fn[te].name.split("(")[0].trim()})`,success:!0}}if(j==="claude"){if(!F.claude)throw new Error("Claude API not configured. Check API key in settings.");const Ge=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":b.claude,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:DI,system:Ce,messages:[{role:"user",content:Pe}],max_tokens:1200,temperature:.7})});if(!Ge.ok){const Vn=await Ge.json().catch(()=>({error:{message:Ge.statusText}}));throw new Error(`Claude API Error: ${Ge.status} ${((Ve=Vn.error)==null?void 0:Ve.message)||Ge.statusText}`)}const ot=(we=(Re=(await Ge.json()).content)==null?void 0:Re[0])==null?void 0:we.text;if(typeof ot!="string")throw new Error("Claude returned invalid or missing content structure.");return{content:ot,model:`${Xn.claude.name} (${fn[te].name.split("(")[0].trim()})`,success:!0}}throw new Error(`AI Model ${j} not supported or not properly configured.`)}catch(Ge){console.error(`Error with ${j}:`,Ge);const Ye=((Ze=Xn[j])==null?void 0:Ze.name)||"Selected AI";return{content:mi(Y,j,Ge instanceof Error?Ge.message:String(Ge)),model:`${Ye} (${fn[te].name.split("(")[0].trim()})`,success:!1}}},mi=(Y,j,te)=>{var $e,ut;const pe=(($e=fn[k])==null?void 0:$e.name.split("(")[0].trim())||"Oracle",Ce=((ut=Xn[j])==null?void 0:ut.name)||"The AI";let Pe=`Ah, my apologies! It seems I couldn't process your request using **${Ce} (${pe})** at the moment.`;if(te){const Ft=te.replace(/^Error:\s*/i,"").replace(/^Gemini API error:\s*/i,"").replace(/^Gemini API streaming error:\s*/i,"").replace(/^OpenAI API Error:\s*\d*\s*/i,"").replace(/^Claude API Error:\s*\d*\s*/i,"").replace(/^DALL-E API Error:\s*\d*\s*/i,"").replace(/Please check it in settings\.$/i,"").trim();Pe+=`

*Technical Gist: ${Ft.substring(0,200)}${Ft.length>200?"...":""}*`}const Be=Ft=>`

To use ${Ft}'s full power, please ensure your API key for it is correctly entered and valid in the settings panel (⚙️).`;return(j==="gemini"&&!F.gemini||j==="openai"&&!F.openai||j==="claude"&&!F.claude||!te&&!F[j])&&(Pe+=Be(Ce)),Pe+=`

In the meantime, feel free to ask me anything else about Lagos! 😊`,Pe},io=_e.useCallback(()=>{ie&&!c&&(h(!0),ie.start(),ie.onresult=Y=>{const j=Y.results[0][0].transcript;i(j),h(!1)},ie.onerror=Y=>{console.error("Speech recognition error",Y.error),h(!1),e(j=>[...j,{id:Date.now(),type:"oracle",content:`🎙️ My apologies, the voice recognition had a hiccup: ${Y.error}. Please try again or type your message.`,timestamp:new Date,mood:"error",model:"System Speech Recognition"}])},ie.onend=()=>h(!1))},[ie,c]),Rn=_e.useCallback(Y=>{if("speechSynthesis"in window&&D&&Y){speechSynthesis.speaking&&speechSynthesis.cancel(),p(!0);const j=Y.replace(/[*#`]/g,"").replace(/\[(.*?)\]\(.*?\)/g,"$1").substring(0,300),te=new SpeechSynthesisUtterance(j),pe=speechSynthesis.getVoices(),Ce=pe.find(Be=>Be.lang.startsWith("en-NG"))||pe.find(Be=>Be.name.toLowerCase().includes("nigeria")),Pe=pe.find(Be=>Be.lang.startsWith("en-GB"));te.voice=Ce||Pe||null,te.lang=Ce?"en-NG":Pe?"en-GB":"en-US",te.rate=.95,te.pitch=1,te.onend=()=>p(!1),te.onerror=Be=>{console.error("Speech synthesis error",Be.error),p(!1)},speechSynthesis.speak(te)}},[D]);_e.useEffect(()=>{const Y=()=>{"speechSynthesis"in window&&speechSynthesis.getVoices()};"speechSynthesis"in window&&(speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=Y),Y())},[]);const qn=()=>{try{const Y=JSON.stringify({timestamp:new Date().toISOString(),settings:{selectedAI:S,imageStyle:x,darkMode:se,soundEnabled:D,selectedPersonaKey:k},messages:t.map(Ce=>({...Ce,timestamp:Ce.timestamp.toISOString()}))},null,2),j=new Blob([Y],{type:"application/json"}),te=URL.createObjectURL(j),pe=document.createElement("a");pe.href=te,pe.download=`lagos-oracle-chat-${Date.now()}.json`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(te)}catch(Y){console.error("Failed to export conversation:",Y),e(j=>[...j,{id:Date.now(),type:"oracle",content:`⚠️ Export failed: ${Y instanceof Error?Y.message:"Unknown error"}`,timestamp:new Date,mood:"error",model:"System"}])}},oo=_e.useCallback(async()=>{if(In)gn&&gn.getTracks().forEach(Y=>Y.stop()),Ii(null),Zn(!1);else try{const Y=await navigator.mediaDevices.getUserMedia({video:!0});Ii(Y),pi.current&&(pi.current.srcObject=Y),Zn(!0),E(!1),St(!1),e(j=>[...j,{id:Date.now(),type:"oracle",content:"👁️ Vision Guide activated! Use the 'Scan Surroundings' button to describe what the camera sees.",timestamp:new Date,mood:"helpful",model:"Vision Guide System"}])}catch(Y){console.error("Error accessing camera:",Y),e(j=>[...j,{id:Date.now(),type:"oracle",content:`⚠️ Camera access denied or unavailable: ${Y instanceof Error?Y.message:"Please check permissions."}`,timestamp:new Date,mood:"error",model:"System Error"}]),Zn(!1)}},[In,gn]),ro=_e.useCallback(async()=>{if(!pi.current||!zo.current||!sf()){const Ye=sf()?"Camera or canvas not ready.":"Gemini API not configured for Vision Guide.";e(ot=>[...ot,{id:Date.now(),type:"oracle",content:`⚠️ ${Ye}`,timestamp:new Date,mood:"error",model:"Vision Guide System"}]),D&&Rn(`Error: ${Ye}`);return}hi(!0);const Y=pi.current,j=zo.current,te=640;let{videoWidth:pe,videoHeight:Ce}=Y,Pe=pe,Be=Ce;pe>Ce?pe>te&&(Be=Math.round(te/pe*Ce),Pe=te):Ce>te&&(Pe=Math.round(te/Ce*pe),Be=te),j.width=Pe,j.height=Be;const $e=j.getContext("2d");if(!$e){hi(!1),e(Ye=>[...Ye,{id:Date.now(),type:"oracle",content:"⚠️ Could not get canvas context for scanning.",timestamp:new Date,mood:"error",model:"Vision Guide System"}]),D&&Rn("Error: Could not get canvas context.");return}$e.drawImage(Y,0,0,Pe,Be);const Ft={inlineData:{mimeType:"image/jpeg",data:j.toDataURL("image/jpeg",.8).split(",")[1]}},Ve="Describe this scene for a visually impaired user. Focus on objects, potential hazards, people, text, and overall layout. Provide a concise, clear, and actionable description to help with navigation or understanding the environment.",Re=Vt("vision_guide",k),we=Date.now();e(Ye=>[...Ye,{id:we,type:"oracle",content:"Analyzing scene...",model:`${Xn.gemini.name} (Vision Guide)`,timestamp:new Date,mood:"helpful",personaKey:k}]);let Ze="",Ge=!0;try{const Ye=u0(Ve,Re,[Ft]);for await(const ot of Ye){const Vn=ot.text;typeof Vn=="string"&&(Ze+=Vn,e(gi=>gi.map(yn=>yn.id===we?{...yn,content:Ze}:yn)))}}catch(Ye){console.error("Error during Vision Guide stream:",Ye),Ze=`⚠️ Vision Analysis Failed: ${Ye instanceof Error?Ye.message:String(Ye)}`,Ge=!1}e(Ye=>Ye.map(ot=>ot.id===we?{...ot,content:Ze,mood:Ge?"helpful":"error"}:ot)),D&&Ze&&setTimeout(()=>Rn(Ze),300),hi(!1)},[k,D,Rn]),Ko=_e.useCallback(async Y=>{var Ft;const j=(typeof Y=="string"?Y:n).trim();if(!j)return;const te={id:Date.now(),type:"user",content:j,timestamp:new Date};e(Ve=>[...Ve,te]),typeof Y!="string"&&i(""),a(!0);const pe=$t(j);if(pe==="visual"||pe==="video"){const Ve=Date.now()+1;e(Re=>[...Re,{id:Ve,type:"oracle",content:`🎨 Generating your ${pe}...`,model:"Lagos Oracle Creative Engine",timestamp:new Date,mood:"helpful",personaKey:k}]);try{let Re;pe==="video"?Re={videoUrl:(await HP(j)).uri,model:"Veo 3",success:!0}:Re={imageUrl:(await zP(j)).generatedImages[0].image.url,model:"Imagen 4",success:!0},e(we=>we.map(Ze=>Ze.id===Ve?{...Ze,content:`Here is the ${pe} you requested.`,media:Re}:Ze))}catch(Re){console.error(`Error during ${pe} generation:`,Re);const we=Re instanceof Error?Re.message:"An unknown error occurred.";e(Ze=>Ze.map(Ge=>Ge.id===Ve?{...Ge,content:`⚠️ Sorry, I couldn't generate the ${pe}. Reason: ${we}`,mood:"error"}:Ge))}a(!1);return}let Ce=S==="auto"?Ur(j):S;const Pe=fn[k]||fn[nu],Be=`${((Ft=Xn[Ce])==null?void 0:Ft.name)||"AI"} (${Pe.name.split("(")[0].trim()})`;if(Ce==="gemini"){if(!sf()){const Ye=mi(j,"gemini","Gemini API not configured. Check API key in settings.");e(ot=>[...ot,{id:Date.now()+1,type:"oracle",content:Ye,model:`${Be} (Error)`,timestamp:new Date,mood:"error",personaKey:k}]),a(!1);return}const Ve=Date.now()+1,Re=Vt($t(j),k);e(Ye=>[...Ye,{id:Ve,type:"oracle",content:"...",model:Be,timestamp:new Date,mood:"helpful",personaKey:k}]);let we="",Ze=!0,Ge=Be;try{const Ye=u0(j,Re);for await(const ot of Ye){const Vn=ot.text;typeof Vn=="string"&&(we+=Vn,e(gi=>gi.map(yn=>yn.id===Ve?{...yn,content:we}:yn)))}}catch(Ye){console.error("Error during Gemini stream:",Ye);const ot=Ye instanceof Error?Ye.message:String(Ye);we=mi(j,"gemini",ot),Ze=!1,Ge=`${Be} (Error)`}e(Ye=>Ye.map(ot=>ot.id===Ve?{...ot,content:we,mood:Ze?"helpful":"error",model:Ge}:ot)),Ze&&D&&we&&setTimeout(()=>Rn(we),300),a(!1);return}const $e=await Xa(j,Ce,k),ut={id:Date.now()+1,type:"oracle",content:$e.content,model:$e.model,timestamp:new Date,mood:$e.success?"helpful":"error",personaKey:k};e(Ve=>[...Ve,ut]),a(!1),$e.success&&D&&$e.content&&setTimeout(()=>Rn($e.content),300)},[n,S,Ur,F,x,D,Rn,b.openai,k,b.gemini,b.claude]),Zt=se?{bg:"bg-gray-800",card:"bg-gray-900",text:"text-gray-100",muted:"text-gray-400",input:"bg-gray-700 text-gray-50 placeholder-gray-400",primaryAccent:"text-blue-400",secondaryAccent:"text-indigo-400"}:{bg:"bg-gray-100",card:"bg-white",text:"text-gray-800",muted:"text-gray-500",input:"bg-gray-200 text-gray-900 placeholder-gray-500",primaryAccent:"text-blue-600",secondaryAccent:"text-indigo-600"};return N.jsxs("div",{className:`flex h-screen ${Zt.bg} ${Zt.text} transition-colors duration-300 font-sans`,children:[N.jsx(CF,{theme:Zt,showSettings:v,toggleSettings:bs,showPersonaSelector:V,togglePersonaSelector:Ho,onNewChat:Lr,showSearch:Xe,showLibrary:he,toggleSearch:$o,toggleLibrary:no,onExportLibrary:Ms,onImportLibrary:Rt}),N.jsxs("div",{className:"flex-1 flex flex-col",children:[N.jsx(RF,{theme:Zt,soundEnabled:D,darkMode:se,showSettings:v,selectedAI:S,selectedPersonaKey:k,showPersonaSelector:V,visionGuideActive:In,toggleSound:()=>M(Y=>!Y),toggleDarkMode:()=>me(Y=>!Y),exportConversation:qn,toggleSettings:bs,togglePersonaSelector:Ho,toggleVisionGuideMode:oo,onRenameConversation:it,onDeleteConversation:()=>W&&Yo(W)}),N.jsx(bV,{messages:t,isTyping:r,theme:Zt,personas:fn,onPromptClick:Y=>Ko(Y)}),N.jsx(NV,{input:n,isTyping:r||Ri,isListening:c,recognitionAvailable:fe,theme:Zt,selectedAI:S,setInput:i,handleSend:Ko,startListening:io,setSelectedAI:I}),qe&&N.jsx(xF,{theme:Zt,onClose:()=>Me(!1)}),v&&N.jsx(H2,{theme:Zt,selectedAI:S,imageStyle:x,apiKeys:b,apiStatus:F,setSelectedAI:I,setImageStyle:L,updateApiKey:Pn,darkMode:se,soundEnabled:D,toggleDarkMode:()=>me(Y=>!Y),toggleSound:()=>M(Y=>!Y),onClose:()=>E(!1)}),V&&N.jsx(SF,{theme:Zt,selectedPersonaKey:k,onSelectPersona:q,onClose:()=>St(!1)}),he&&N.jsx(wF,{theme:Zt,conversations:Oe,onLoad:xi,onDelete:Yo,onRename:Y=>{var j;if(Y===W)it();else{const te=prompt("Rename conversation to:",((j=Oe.find(pe=>pe.id===Y))==null?void 0:j.title)||"");te!=null&&U(pe=>{const Ce=pe.map(Pe=>Pe.id===Y?{...Pe,title:te.trim()||Pe.title}:Pe);try{localStorage.setItem(Hi,JSON.stringify(Ce))}catch{}return Ce})}},onClose:()=>ye(!1)}),Xe&&N.jsx(IF,{theme:Zt,conversations:Oe,currentMessages:t,onOpenConversation:xi,onClose:()=>X(!1)}),In&&N.jsx(AF,{videoElementRef:pi,onScanSurroundings:ro,onStopVisionGuide:oo,isAnalyzingFrame:Ri,theme:Zt}),N.jsx("canvas",{ref:zo,style:{display:"none"}})]})]})},KC=document.getElementById("root");if(!KC)throw new Error("Could not find root element to mount to");const MF=MI.createRoot(KC);MF.render(N.jsx(Yi.StrictMode,{children:N.jsx(bF,{})}));
