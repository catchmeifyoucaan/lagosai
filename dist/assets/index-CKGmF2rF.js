var _I=Object.defineProperty;var TI=(t,e,n)=>e in t?_I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var At=(t,e,n)=>TI(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function B0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Tp={exports:{}},jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function EI(){if(G_)return jl;G_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var c=null;if(a!==void 0&&(c=""+a),r.key!==void 0&&(c=""+r.key),"key"in r){a={};for(var h in r)h!=="key"&&(a[h]=r[h])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:c,ref:r!==void 0?r:null,props:a}}return jl.Fragment=e,jl.jsx=n,jl.jsxs=n,jl}var z_;function SI(){return z_||(z_=1,Tp.exports=EI()),Tp.exports}var U=SI(),Ep={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function AI(){if(H_)return Fe;H_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=E&&O[E]||O["@@iterator"],typeof O=="function"?O:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,L={};function F(O,W,de){this.props=O,this.context=W,this.refs=L,this.updater=de||I}F.prototype.isReactComponent={},F.prototype.setState=function(O,W){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,W,"setState")},F.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function re(){}re.prototype=F.prototype;function oe(O,W,de){this.props=O,this.context=W,this.refs=L,this.updater=de||I}var ie=oe.prototype=new re;ie.constructor=oe,x(ie,F.prototype),ie.isPureReactComponent=!0;var fe=Array.isArray,ae={H:null,A:null,T:null,S:null,V:null},me=Object.prototype.hasOwnProperty;function k(O,W,de,se,Ce,qe){return de=qe.ref,{$$typeof:t,type:O,key:W,ref:de!==void 0?de:null,props:qe}}function M(O,W){return k(O.type,W,void 0,void 0,void 0,O.props)}function b(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function V(O){var W={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(de){return W[de]})}var N=/\/+/g;function q(O,W){return typeof O=="object"&&O!==null&&O.key!=null?V(""+O.key):W.toString(36)}function P(){}function Tt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(P,P):(O.status="pending",O.then(function(W){O.status==="pending"&&(O.status="fulfilled",O.value=W)},function(W){O.status==="pending"&&(O.status="rejected",O.reason=W)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function We(O,W,de,se,Ce){var qe=typeof O;(qe==="undefined"||qe==="boolean")&&(O=null);var be=!1;if(O===null)be=!0;else switch(qe){case"bigint":case"string":case"number":be=!0;break;case"object":switch(O.$$typeof){case t:case e:be=!0;break;case v:return be=O._init,We(be(O._payload),W,de,se,Ce)}}if(be)return Ce=Ce(O),be=se===""?"."+q(O,0):se,fe(Ce)?(de="",be!=null&&(de=be.replace(N,"$&/")+"/"),We(Ce,W,de,"",function(Pn){return Pn})):Ce!=null&&(b(Ce)&&(Ce=M(Ce,de+(Ce.key==null||O&&O.key===Ce.key?"":(""+Ce.key).replace(N,"$&/")+"/")+be)),W.push(Ce)),1;be=0;var Pt=se===""?".":se+":";if(fe(O))for(var at=0;at<O.length;at++)se=O[at],qe=Pt+q(se,at),be+=We(se,W,de,qe,Ce);else if(at=S(O),typeof at=="function")for(O=at.call(O),at=0;!(se=O.next()).done;)se=se.value,qe=Pt+q(se,at++),be+=We(se,W,de,qe,Ce);else if(qe==="object"){if(typeof O.then=="function")return We(Tt(O),W,de,se,Ce);throw W=String(O),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return be}function X(O,W,de){if(O==null)return O;var se=[],Ce=0;return We(O,se,"","",function(qe){return W.call(de,qe,Ce++)}),se}function he(O){if(O._status===-1){var W=O._result;W=W(),W.then(function(de){(O._status===0||O._status===-1)&&(O._status=1,O._result=de)},function(de){(O._status===0||O._status===-1)&&(O._status=2,O._result=de)}),O._status===-1&&(O._status=0,O._result=W)}if(O._status===1)return O._result.default;throw O._result}var ye=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function Be(){}return Fe.Children={map:X,forEach:function(O,W,de){X(O,function(){W.apply(this,arguments)},de)},count:function(O){var W=0;return X(O,function(){W++}),W},toArray:function(O){return X(O,function(W){return W})||[]},only:function(O){if(!b(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Fe.Component=F,Fe.Fragment=n,Fe.Profiler=r,Fe.PureComponent=oe,Fe.StrictMode=i,Fe.Suspense=m,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return ae.H.useMemoCache(O)}},Fe.cache=function(O){return function(){return O.apply(null,arguments)}},Fe.cloneElement=function(O,W,de){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var se=x({},O.props),Ce=O.key,qe=void 0;if(W!=null)for(be in W.ref!==void 0&&(qe=void 0),W.key!==void 0&&(Ce=""+W.key),W)!me.call(W,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&W.ref===void 0||(se[be]=W[be]);var be=arguments.length-2;if(be===1)se.children=de;else if(1<be){for(var Pt=Array(be),at=0;at<be;at++)Pt[at]=arguments[at+2];se.children=Pt}return k(O.type,Ce,void 0,void 0,qe,se)},Fe.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},Fe.createElement=function(O,W,de){var se,Ce={},qe=null;if(W!=null)for(se in W.key!==void 0&&(qe=""+W.key),W)me.call(W,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(Ce[se]=W[se]);var be=arguments.length-2;if(be===1)Ce.children=de;else if(1<be){for(var Pt=Array(be),at=0;at<be;at++)Pt[at]=arguments[at+2];Ce.children=Pt}if(O&&O.defaultProps)for(se in be=O.defaultProps,be)Ce[se]===void 0&&(Ce[se]=be[se]);return k(O,qe,void 0,void 0,null,Ce)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(O){return{$$typeof:h,render:O}},Fe.isValidElement=b,Fe.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:he}},Fe.memo=function(O,W){return{$$typeof:p,type:O,compare:W===void 0?null:W}},Fe.startTransition=function(O){var W=ae.T,de={};ae.T=de;try{var se=O(),Ce=ae.S;Ce!==null&&Ce(de,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Be,ye)}catch(qe){ye(qe)}finally{ae.T=W}},Fe.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},Fe.use=function(O){return ae.H.use(O)},Fe.useActionState=function(O,W,de){return ae.H.useActionState(O,W,de)},Fe.useCallback=function(O,W){return ae.H.useCallback(O,W)},Fe.useContext=function(O){return ae.H.useContext(O)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(O,W){return ae.H.useDeferredValue(O,W)},Fe.useEffect=function(O,W,de){var se=ae.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(O,W)},Fe.useId=function(){return ae.H.useId()},Fe.useImperativeHandle=function(O,W,de){return ae.H.useImperativeHandle(O,W,de)},Fe.useInsertionEffect=function(O,W){return ae.H.useInsertionEffect(O,W)},Fe.useLayoutEffect=function(O,W){return ae.H.useLayoutEffect(O,W)},Fe.useMemo=function(O,W){return ae.H.useMemo(O,W)},Fe.useOptimistic=function(O,W){return ae.H.useOptimistic(O,W)},Fe.useReducer=function(O,W,de){return ae.H.useReducer(O,W,de)},Fe.useRef=function(O){return ae.H.useRef(O)},Fe.useState=function(O){return ae.H.useState(O)},Fe.useSyncExternalStore=function(O,W,de){return ae.H.useSyncExternalStore(O,W,de)},Fe.useTransition=function(){return ae.H.useTransition()},Fe.version="19.1.1",Fe}var $_;function Rm(){return $_||($_=1,Ep.exports=AI()),Ep.exports}var _e=Rm();const Zn=B0(_e);var Sp={exports:{}},eu={},Ap={exports:{}},Cp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function CI(){return Y_||(Y_=1,function(t){function e(X,he){var ye=X.length;X.push(he);e:for(;0<ye;){var Be=ye-1>>>1,O=X[Be];if(0<r(O,he))X[Be]=he,X[ye]=O,ye=Be;else break e}}function n(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var he=X[0],ye=X.pop();if(ye!==he){X[0]=ye;e:for(var Be=0,O=X.length,W=O>>>1;Be<W;){var de=2*(Be+1)-1,se=X[de],Ce=de+1,qe=X[Ce];if(0>r(se,ye))Ce<O&&0>r(qe,se)?(X[Be]=qe,X[Ce]=ye,Be=Ce):(X[Be]=se,X[de]=ye,Be=de);else if(Ce<O&&0>r(qe,ye))X[Be]=qe,X[Ce]=ye,Be=Ce;else break e}}return he}function r(X,he){var ye=X.sortIndex-he.sortIndex;return ye!==0?ye:X.id-he.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var m=[],p=[],v=1,E=null,S=3,I=!1,x=!1,L=!1,F=!1,re=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function fe(X){for(var he=n(p);he!==null;){if(he.callback===null)i(p);else if(he.startTime<=X)i(p),he.sortIndex=he.expirationTime,e(m,he);else break;he=n(p)}}function ae(X){if(L=!1,fe(X),!x)if(n(m)!==null)x=!0,me||(me=!0,q());else{var he=n(p);he!==null&&We(ae,he.startTime-X)}}var me=!1,k=-1,M=5,b=-1;function V(){return F?!0:!(t.unstable_now()-b<M)}function N(){if(F=!1,me){var X=t.unstable_now();b=X;var he=!0;try{e:{x=!1,L&&(L=!1,oe(k),k=-1),I=!0;var ye=S;try{t:{for(fe(X),E=n(m);E!==null&&!(E.expirationTime>X&&V());){var Be=E.callback;if(typeof Be=="function"){E.callback=null,S=E.priorityLevel;var O=Be(E.expirationTime<=X);if(X=t.unstable_now(),typeof O=="function"){E.callback=O,fe(X),he=!0;break t}E===n(m)&&i(m),fe(X)}else i(m);E=n(m)}if(E!==null)he=!0;else{var W=n(p);W!==null&&We(ae,W.startTime-X),he=!1}}break e}finally{E=null,S=ye,I=!1}he=void 0}}finally{he?q():me=!1}}}var q;if(typeof ie=="function")q=function(){ie(N)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Tt=P.port2;P.port1.onmessage=N,q=function(){Tt.postMessage(null)}}else q=function(){re(N,0)};function We(X,he){k=re(function(){X(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(X){switch(S){case 1:case 2:case 3:var he=3;break;default:he=S}var ye=S;S=he;try{return X()}finally{S=ye}},t.unstable_requestPaint=function(){F=!0},t.unstable_runWithPriority=function(X,he){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ye=S;S=X;try{return he()}finally{S=ye}},t.unstable_scheduleCallback=function(X,he,ye){var Be=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Be+ye:Be):ye=Be,X){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ye+O,X={id:v++,callback:he,priorityLevel:X,startTime:ye,expirationTime:O,sortIndex:-1},ye>Be?(X.sortIndex=ye,e(p,X),n(m)===null&&X===n(p)&&(L?(oe(k),k=-1):L=!0,We(ae,ye-Be))):(X.sortIndex=O,e(m,X),x||I||(x=!0,me||(me=!0,q()))),X},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(X){var he=S;return function(){var ye=S;S=he;try{return X.apply(this,arguments)}finally{S=ye}}}}(Cp)),Cp}var K_;function wI(){return K_||(K_=1,Ap.exports=CI()),Ap.exports}var wp={exports:{}},Tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function II(){if(J_)return Tn;J_=1;var t=Rm();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(m,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:m,containerInfo:p,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Tn.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(m,p,null,v)},Tn.flushSync=function(m){var p=c.T,v=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=v,i.d.f()}},Tn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},Tn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Tn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,E=h(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:I}):v==="script"&&i.d.X(m,{crossOrigin:E,integrity:S,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Tn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},Tn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=h(v,p.crossOrigin);i.d.L(m,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Tn.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=h(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},Tn.requestFormReset=function(m){i.d.r(m)},Tn.unstable_batchedUpdates=function(m,p){return m(p)},Tn.useFormState=function(m,p,v){return c.H.useFormState(m,p,v)},Tn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Tn.version="19.1.1",Tn}var Q_;function RI(){if(Q_)return wp.exports;Q_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wp.exports=II(),wp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function xI(){if(X_)return eu;X_=1;var t=wI(),e=Rm(),n=RI();function i(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,l=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(l=s.return),o=s.return;while(o)}return s.tag===3?l:null}function c(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function h(o){if(a(o)!==o)throw Error(i(188))}function m(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(i(188));return s!==o?null:o}for(var l=o,d=s;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(d=y.return,d!==null){l=d;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return h(y),o;if(_===d)return h(y),s;_=_.sibling}throw Error(i(188))}if(l.return!==d.return)l=y,d=_;else{for(var C=!1,w=y.child;w;){if(w===l){C=!0,l=y,d=_;break}if(w===d){C=!0,d=y,l=_;break}w=w.sibling}if(!C){for(w=_.child;w;){if(w===l){C=!0,l=_,d=y;break}if(w===d){C=!0,d=_,l=y;break}w=w.sibling}if(!C)throw Error(i(189))}}if(l.alternate!==d)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?o:s}function p(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=p(o),s!==null)return s;o=o.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),oe=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function q(o){return o===null||typeof o!="object"?null:(o=N&&o[N]||o["@@iterator"],typeof o=="function"?o:null)}var P=Symbol.for("react.client.reference");function Tt(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===P?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case x:return"Fragment";case F:return"Profiler";case L:return"StrictMode";case ae:return"Suspense";case me:return"SuspenseList";case b:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case I:return"Portal";case ie:return(o.displayName||"Context")+".Provider";case oe:return(o._context.displayName||"Context")+".Consumer";case fe:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case k:return s=o.displayName||null,s!==null?s:Tt(o.type)||"Memo";case M:s=o._payload,o=o._init;try{return Tt(o(s))}catch{}}return null}var We=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Be=[],O=-1;function W(o){return{current:o}}function de(o){0>O||(o.current=Be[O],Be[O]=null,O--)}function se(o,s){O++,Be[O]=o.current,o.current=s}var Ce=W(null),qe=W(null),be=W(null),Pt=W(null);function at(o,s){switch(se(be,s),se(qe,o),se(Ce,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?g_(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=g_(s),o=y_(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}de(Ce),se(Ce,o)}function Pn(){de(Ce),de(qe),de(be)}function ei(o){o.memoizedState!==null&&se(Pt,o);var s=Ce.current,l=y_(s,o.type);s!==l&&(se(qe,o),se(Ce,l))}function vn(o){qe.current===o&&(de(Ce),de(qe)),Pt.current===o&&(de(Pt),Jl._currentValue=ye)}var Ri=Object.prototype.hasOwnProperty,xi=t.unstable_scheduleCallback,hi=t.unstable_cancelCallback,pi=t.unstable_shouldYield,Go=t.unstable_requestPaint,Vn=t.unstable_now,Za=t.unstable_getCurrentPriorityLevel,Vr=t.unstable_ImmediatePriority,zo=t.unstable_UserBlockingPriority,no=t.unstable_NormalPriority,Lr=t.unstable_LowPriority,bi=t.unstable_IdlePriority,Ur=t.log,Ms=t.unstable_setDisableYieldValue,Rt=null,rt=null;function Yt(o){if(typeof Ur=="function"&&Ms(o),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(Rt,o)}catch{}}var Ut=Math.clz32?Math.clz32:mi,Or=Math.log,ja=Math.LN2;function mi(o){return o>>>=0,o===0?32:31-(Or(o)/ja|0)|0}var io=256,In=4194304;function qn(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Ho(o,s,l){var d=o.pendingLanes;if(d===0)return 0;var y=0,_=o.suspendedLanes,C=o.pingedLanes;o=o.warmLanes;var w=d&134217727;return w!==0?(d=w&~_,d!==0?y=qn(d):(C&=w,C!==0?y=qn(C):l||(l=w&~o,l!==0&&(y=qn(l))))):(w=d&~_,w!==0?y=qn(w):C!==0?y=qn(C):l||(l=d&~o,l!==0&&(y=qn(l)))),y===0?0:s!==0&&s!==y&&(s&_)===0&&(_=y&-y,l=s&-s,_>=l||_===32&&(l&4194048)!==0)?s:y}function Mi(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function an(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J(){var o=io;return io<<=1,(io&4194048)===0&&(io=256),o}function ee(){var o=In;return In<<=1,(In&62914560)===0&&(In=4194304),o}function te(o){for(var s=[],l=0;31>l;l++)s.push(o);return s}function pe(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ve(o,s,l,d,y,_){var C=o.pendingLanes;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=l,o.entangledLanes&=l,o.errorRecoveryDisabledLanes&=l,o.shellSuspendCounter=0;var w=o.entanglements,D=o.expirationTimes,$=o.hiddenUpdates;for(l=C&~l;0<l;){var Z=31-Ut(l),ne=1<<Z;w[Z]=0,D[Z]=-1;var Y=$[Z];if(Y!==null)for($[Z]=null,Z=0;Z<Y.length;Z++){var K=Y[Z];K!==null&&(K.lane&=-536870913)}l&=~ne}d!==0&&Me(o,d,0),_!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=_&~(C&~s))}function Me(o,s,l){o.pendingLanes|=s,o.suspendedLanes&=~s;var d=31-Ut(s);o.entangledLanes|=s,o.entanglements[d]=o.entanglements[d]|1073741824|l&4194090}function $e(o,s){var l=o.entangledLanes|=s;for(o=o.entanglements;l;){var d=31-Ut(l),y=1<<d;y&s|o[d]&s&&(o[d]|=s),l&=~y}}function Ge(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function mt(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function xt(){var o=he.p;return o!==0?o:(o=window.event,o===void 0?32:L_(o.type))}function bt(o,s){var l=he.p;try{return he.p=o,s()}finally{he.p=l}}var Se=Math.random().toString(36).slice(2),Ie="__reactFiber$"+Se,Oe="__reactProps$"+Se,De="__reactContainer$"+Se,ze="__reactEvents$"+Se,Et="__reactListeners$"+Se,jt="__reactHandles$"+Se,$o="__reactResources$"+Se,Rn="__reactMarker$"+Se;function Yo(o){delete o[Ie],delete o[Oe],delete o[ze],delete o[Et],delete o[jt]}function oo(o){var s=o[Ie];if(s)return s;for(var l=o.parentNode;l;){if(s=l[De]||l[Ie]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(o=E_(o);o!==null;){if(l=o[Ie])return l;o=E_(o)}return s}o=l,l=o.parentNode}return null}function Ni(o){if(o=o[Ie]||o[De]){var s=o.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return o}return null}function ki(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(i(33))}function xn(o){var s=o[$o];return s||(s=o[$o]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ot(o){o[Rn]=!0}var el=new Set,Ns={};function gi(o,s){ro(o,s),ro(o+"Capture",s)}function ro(o,s){for(Ns[o]=s,o=0;o<s.length;o++)el.add(s[o])}var Bu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fu={},Br={};function qu(o){return Ri.call(Br,o)?!0:Ri.call(Fu,o)?!1:Bu.test(o)?Br[o]=!0:(Fu[o]=!0,!1)}function Ko(o,s,l){if(qu(s))if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+l)}}function Di(o,s,l){if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+l)}}function ln(o,s,l,d){if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttributeNS(s,l,""+d)}}var Fr,Gu;function so(o){if(Fr===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Fr=s&&s[1]||"",Gu=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fr+o+Gu}var ks=!1;function Ds(o,s){if(!o||ks)return"";ks=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(K){var Y=K}Reflect.construct(o,[],ne)}else{try{ne.call()}catch(K){Y=K}o.call(ne.prototype)}}else{try{throw Error()}catch(K){Y=K}(ne=o())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=d.DetermineComponentFrameRoot(),C=_[0],w=_[1];if(C&&w){var D=C.split(`
`),$=w.split(`
`);for(y=d=0;d<D.length&&!D[d].includes("DetermineComponentFrameRoot");)d++;for(;y<$.length&&!$[y].includes("DetermineComponentFrameRoot");)y++;if(d===D.length||y===$.length)for(d=D.length-1,y=$.length-1;1<=d&&0<=y&&D[d]!==$[y];)y--;for(;1<=d&&0<=y;d--,y--)if(D[d]!==$[y]){if(d!==1||y!==1)do if(d--,y--,0>y||D[d]!==$[y]){var Z=`
`+D[d].replace(" at new "," at ");return o.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",o.displayName)),Z}while(1<=d&&0<=y);break}}}finally{ks=!1,Error.prepareStackTrace=l}return(l=o?o.displayName||o.name:"")?so(l):""}function tl(o){switch(o.tag){case 26:case 27:case 5:return so(o.type);case 16:return so("Lazy");case 13:return so("Suspense");case 19:return so("SuspenseList");case 0:case 15:return Ds(o.type,!1);case 11:return Ds(o.type.render,!1);case 1:return Ds(o.type,!0);case 31:return so("Activity");default:return""}}function Ps(o){try{var s="";do s+=tl(o),o=o.return;while(o);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function bn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function nl(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Cd(o){var s=nl(o)?"checked":"value",l=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),d=""+o[s];if(!o.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var y=l.get,_=l.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return y.call(this)},set:function(C){d=""+C,_.call(this,C)}}),Object.defineProperty(o,s,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function Vs(o){o._valueTracker||(o._valueTracker=Cd(o))}function il(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return o&&(d=nl(o)?o.checked?"true":"false":o.value),o=d,o!==l?(s.setValue(o),!0):!1}function qr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var wd=/[\n"\\]/g;function Gt(o){return o.replace(wd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Gn(o,s,l,d,y,_,C,w){o.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?o.type=C:o.removeAttribute("type"),s!=null?C==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+bn(s)):o.value!==""+bn(s)&&(o.value=""+bn(s)):C!=="submit"&&C!=="reset"||o.removeAttribute("value"),s!=null?Jo(o,C,bn(s)):l!=null?Jo(o,C,bn(l)):d!=null&&o.removeAttribute("value"),y==null&&_!=null&&(o.defaultChecked=!!_),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?o.name=""+bn(w):o.removeAttribute("name")}function Gr(o,s,l,d,y,_,C,w){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),s!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||s!=null))return;l=l!=null?""+bn(l):"",s=s!=null?""+bn(s):l,w||s===o.value||(o.value=s),o.defaultValue=s}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=w?o.checked:!!d,o.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.name=C)}function Jo(o,s,l){s==="number"&&qr(o.ownerDocument)===o||o.defaultValue===""+l||(o.defaultValue=""+l)}function ao(o,s,l,d){if(o=o.options,s){s={};for(var y=0;y<l.length;y++)s["$"+l[y]]=!0;for(l=0;l<o.length;l++)y=s.hasOwnProperty("$"+o[l].value),o[l].selected!==y&&(o[l].selected=y),y&&d&&(o[l].defaultSelected=!0)}else{for(l=""+bn(l),s=null,y=0;y<o.length;y++){if(o[y].value===l){o[y].selected=!0,d&&(o[y].defaultSelected=!0);return}s!==null||o[y].disabled||(s=o[y])}s!==null&&(s.selected=!0)}}function gt(o,s,l){if(s!=null&&(s=""+bn(s),s!==o.value&&(o.value=s),l==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=l!=null?""+bn(l):""}function zr(o,s,l,d){if(s==null){if(d!=null){if(l!=null)throw Error(i(92));if(We(d)){if(1<d.length)throw Error(i(93));d=d[0]}l=d}l==null&&(l=""),s=l}l=bn(s),o.defaultValue=l,d=o.textContent,d===l&&d!==""&&d!==null&&(o.value=d)}function ti(o,s){if(s){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=s;return}}o.textContent=s}var Hr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zu(o,s,l){var d=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":d?o.setProperty(s,l):typeof l!="number"||l===0||Hr.has(s)?s==="float"?o.cssFloat=l:o[s]=(""+l).trim():o[s]=l+"px"}function ol(o,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(o=o.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var y in s)d=s[y],s.hasOwnProperty(y)&&l[y]!==d&&zu(o,y,d)}else for(var _ in s)s.hasOwnProperty(_)&&zu(o,_,s[_])}function rl(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Id=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ls(o){return Rd.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var lo=null;function ni(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var uo=null,co=null;function sl(o){var s=Ni(o);if(s&&(o=s.stateNode)){var l=o[Oe]||null;e:switch(o=s.stateNode,s.type){case"input":if(Gn(o,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Gt(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==o&&d.form===o.form){var y=d[Oe]||null;if(!y)throw Error(i(90));Gn(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<l.length;s++)d=l[s],d.form===o.form&&il(d)}break e;case"textarea":gt(o,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&ao(o,!!l.multiple,s,!1)}}}var Pi=!1;function Hu(o,s,l){if(Pi)return o(s,l);Pi=!0;try{var d=o(s);return d}finally{if(Pi=!1,(uo!==null||co!==null)&&(Uc(),uo&&(s=uo,o=co,co=uo=null,sl(s),o)))for(s=0;s<o.length;s++)sl(o[s])}}function $r(o,s){var l=o.stateNode;if(l===null)return null;var d=l[Oe]||null;if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ii=!1;if(yi)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){ii=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{ii=!1}var Vi=null,Qo=null,fo=null;function al(){if(fo)return fo;var o,s=Qo,l=s.length,d,y="value"in Vi?Vi.value:Vi.textContent,_=y.length;for(o=0;o<l&&s[o]===y[o];o++);var C=l-o;for(d=1;d<=C&&s[l-d]===y[_-d];d++);return fo=y.slice(o,1<d?1-d:void 0)}function Li(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function Ui(){return!0}function ll(){return!1}function en(o){function s(l,d,y,_,C){this._reactName=l,this._targetInst=y,this.type=d,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var w in o)o.hasOwnProperty(w)&&(l=o[w],this[w]=l?l(_):_[w]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ui:ll,this.isPropagationStopped=ll,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),s}var lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Us=en(lt),Kr=v({},lt,{view:0,detail:0}),$u=en(Kr),Os,Bs,Oi,Jr=v({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wr,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Oi&&(Oi&&o.type==="mousemove"?(Os=o.screenX-Oi.screenX,Bs=o.screenY-Oi.screenY):Bs=Os=0,Oi=o),Os)},movementY:function(o){return"movementY"in o?o.movementY:Bs}}),oi=en(Jr),Yu=v({},Jr,{dataTransfer:0}),xd=en(Yu),Qr=v({},Kr,{relatedTarget:0}),Fs=en(Qr),ul=v({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),qs=en(ul),Ku=v({},lt,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Gs=en(Ku),bd=v({},lt,{data:0}),cl=en(bd),Xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fl(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=Qu[o])?!!s[o]:!1}function Wr(){return fl}var Xu=v({},Kr,{key:function(o){if(o.key){var s=Xr[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=Li(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Ju[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wr,charCode:function(o){return o.type==="keypress"?Li(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Li(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),zs=en(Xu),Wu=v({},Jr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dl=en(Wu),ho=v({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wr}),Zu=en(ho),ju=v({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),ec=en(ju),tc=v({},Jr,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Hs=en(tc),Mn=v({},lt,{newState:0,oldState:0}),nc=en(Mn),ic=[9,13,27,32],Bi=yi&&"CompositionEvent"in window,g=null;yi&&"documentMode"in document&&(g=document.documentMode);var T=yi&&"TextEvent"in window&&!g,A=yi&&(!Bi||g&&8<g&&11>=g),R=" ",z=!1;function Q(o,s){switch(o){case"keyup":return ic.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var je=!1;function Kt(o,s){switch(o){case"compositionend":return ce(s);case"keypress":return s.which!==32?null:(z=!0,R);case"textInput":return o=s.data,o===R&&z?null:o;default:return null}}function et(o,s){if(je)return o==="compositionend"||!Bi&&Q(o,s)?(o=al(),fo=Qo=Vi=null,je=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return A&&s.locale!=="ko"?null:s.data;default:return null}}var tn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jt(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!tn[o.type]:s==="textarea"}function po(o,s,l,d){uo?co?co.push(d):co=[d]:uo=d,s=zc(s,"onChange"),0<s.length&&(l=new Us("onChange","change",null,l,d),o.push({event:l,listeners:s}))}var un=null,Fi=null;function hl(o){f_(o,0)}function oc(o){var s=ki(o);if(il(s))return o}function kg(o,s){if(o==="change")return s}var Dg=!1;if(yi){var Md;if(yi){var Nd="oninput"in document;if(!Nd){var Pg=document.createElement("div");Pg.setAttribute("oninput","return;"),Nd=typeof Pg.oninput=="function"}Md=Nd}else Md=!1;Dg=Md&&(!document.documentMode||9<document.documentMode)}function Vg(){un&&(un.detachEvent("onpropertychange",Lg),Fi=un=null)}function Lg(o){if(o.propertyName==="value"&&oc(Fi)){var s=[];po(s,Fi,o,ni(o)),Hu(hl,s)}}function QC(o,s,l){o==="focusin"?(Vg(),un=s,Fi=l,un.attachEvent("onpropertychange",Lg)):o==="focusout"&&Vg()}function XC(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return oc(Fi)}function WC(o,s){if(o==="click")return oc(s)}function ZC(o,s){if(o==="input"||o==="change")return oc(s)}function jC(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var zn=typeof Object.is=="function"?Object.is:jC;function pl(o,s){if(zn(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var l=Object.keys(o),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var y=l[d];if(!Ri.call(s,y)||!zn(o[y],s[y]))return!1}return!0}function Ug(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Og(o,s){var l=Ug(o);o=0;for(var d;l;){if(l.nodeType===3){if(d=o+l.textContent.length,o<=s&&d>=s)return{node:l,offset:s-o};o=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ug(l)}}function Bg(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?Bg(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function Fg(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=qr(o.document);s instanceof o.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)o=s.contentWindow;else break;s=qr(o.document)}return s}function kd(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var ew=yi&&"documentMode"in document&&11>=document.documentMode,$s=null,Dd=null,ml=null,Pd=!1;function qg(o,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Pd||$s==null||$s!==qr(d)||(d=$s,"selectionStart"in d&&kd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ml&&pl(ml,d)||(ml=d,d=zc(Dd,"onSelect"),0<d.length&&(s=new Us("onSelect","select",null,s,l),o.push({event:s,listeners:d}),s.target=$s)))}function Zr(o,s){var l={};return l[o.toLowerCase()]=s.toLowerCase(),l["Webkit"+o]="webkit"+s,l["Moz"+o]="moz"+s,l}var Ys={animationend:Zr("Animation","AnimationEnd"),animationiteration:Zr("Animation","AnimationIteration"),animationstart:Zr("Animation","AnimationStart"),transitionrun:Zr("Transition","TransitionRun"),transitionstart:Zr("Transition","TransitionStart"),transitioncancel:Zr("Transition","TransitionCancel"),transitionend:Zr("Transition","TransitionEnd")},Vd={},Gg={};yi&&(Gg=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function jr(o){if(Vd[o])return Vd[o];if(!Ys[o])return o;var s=Ys[o],l;for(l in s)if(s.hasOwnProperty(l)&&l in Gg)return Vd[o]=s[l];return o}var zg=jr("animationend"),Hg=jr("animationiteration"),$g=jr("animationstart"),tw=jr("transitionrun"),nw=jr("transitionstart"),iw=jr("transitioncancel"),Yg=jr("transitionend"),Kg=new Map,Ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ld.push("scrollEnd");function vi(o,s){Kg.set(o,s),gi(s,[o])}var Jg=new WeakMap;function ri(o,s){if(typeof o=="object"&&o!==null){var l=Jg.get(o);return l!==void 0?l:(s={value:o,source:s,stack:Ps(s)},Jg.set(o,s),s)}return{value:o,source:s,stack:Ps(s)}}var si=[],Ks=0,Ud=0;function rc(){for(var o=Ks,s=Ud=Ks=0;s<o;){var l=si[s];si[s++]=null;var d=si[s];si[s++]=null;var y=si[s];si[s++]=null;var _=si[s];if(si[s++]=null,d!==null&&y!==null){var C=d.pending;C===null?y.next=y:(y.next=C.next,C.next=y),d.pending=y}_!==0&&Qg(l,y,_)}}function sc(o,s,l,d){si[Ks++]=o,si[Ks++]=s,si[Ks++]=l,si[Ks++]=d,Ud|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function Od(o,s,l,d){return sc(o,s,l,d),ac(o)}function Js(o,s){return sc(o,null,null,s),ac(o)}function Qg(o,s,l){o.lanes|=l;var d=o.alternate;d!==null&&(d.lanes|=l);for(var y=!1,_=o.return;_!==null;)_.childLanes|=l,d=_.alternate,d!==null&&(d.childLanes|=l),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(y=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,y&&s!==null&&(y=31-Ut(l),o=_.hiddenUpdates,d=o[y],d===null?o[y]=[s]:d.push(s),s.lane=l|536870912),_):null}function ac(o){if(50<Fl)throw Fl=0,Hh=null,Error(i(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var Qs={};function ow(o,s,l,d){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(o,s,l,d){return new ow(o,s,l,d)}function Bd(o){return o=o.prototype,!(!o||!o.isReactComponent)}function mo(o,s){var l=o.alternate;return l===null?(l=Hn(o.tag,s,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=s,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&65011712,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l.refCleanup=o.refCleanup,l}function Xg(o,s){o.flags&=65011714;var l=o.alternate;return l===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,s=l.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function lc(o,s,l,d,y,_){var C=0;if(d=o,typeof o=="function")Bd(o)&&(C=1);else if(typeof o=="string")C=sI(o,l,Ce.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case b:return o=Hn(31,l,s,y),o.elementType=b,o.lanes=_,o;case x:return es(l.children,y,_,s);case L:C=8,y|=24;break;case F:return o=Hn(12,l,s,y|2),o.elementType=F,o.lanes=_,o;case ae:return o=Hn(13,l,s,y),o.elementType=ae,o.lanes=_,o;case me:return o=Hn(19,l,s,y),o.elementType=me,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case re:case ie:C=10;break e;case oe:C=9;break e;case fe:C=11;break e;case k:C=14;break e;case M:C=16,d=null;break e}C=29,l=Error(i(130,o===null?"null":typeof o,"")),d=null}return s=Hn(C,l,s,y),s.elementType=o,s.type=d,s.lanes=_,s}function es(o,s,l,d){return o=Hn(7,o,d,s),o.lanes=l,o}function Fd(o,s,l){return o=Hn(6,o,null,s),o.lanes=l,o}function qd(o,s,l){return s=Hn(4,o.children!==null?o.children:[],o.key,s),s.lanes=l,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var Xs=[],Ws=0,uc=null,cc=0,ai=[],li=0,ts=null,go=1,yo="";function ns(o,s){Xs[Ws++]=cc,Xs[Ws++]=uc,uc=o,cc=s}function Wg(o,s,l){ai[li++]=go,ai[li++]=yo,ai[li++]=ts,ts=o;var d=go;o=yo;var y=32-Ut(d)-1;d&=~(1<<y),l+=1;var _=32-Ut(s)+y;if(30<_){var C=y-y%5;_=(d&(1<<C)-1).toString(32),d>>=C,y-=C,go=1<<32-Ut(s)+y|l<<y|d,yo=_+o}else go=1<<_|l<<y|d,yo=o}function Gd(o){o.return!==null&&(ns(o,1),Wg(o,1,0))}function zd(o){for(;o===uc;)uc=Xs[--Ws],Xs[Ws]=null,cc=Xs[--Ws],Xs[Ws]=null;for(;o===ts;)ts=ai[--li],ai[li]=null,yo=ai[--li],ai[li]=null,go=ai[--li],ai[li]=null}var Nn=null,Vt=null,st=!1,is=null,qi=!1,Hd=Error(i(519));function os(o){var s=Error(i(418,""));throw vl(ri(s,o)),Hd}function Zg(o){var s=o.stateNode,l=o.type,d=o.memoizedProps;switch(s[Ie]=o,s[Oe]=d,l){case"dialog":Je("cancel",s),Je("close",s);break;case"iframe":case"object":case"embed":Je("load",s);break;case"video":case"audio":for(l=0;l<Gl.length;l++)Je(Gl[l],s);break;case"source":Je("error",s);break;case"img":case"image":case"link":Je("error",s),Je("load",s);break;case"details":Je("toggle",s);break;case"input":Je("invalid",s),Gr(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Vs(s);break;case"select":Je("invalid",s);break;case"textarea":Je("invalid",s),zr(s,d.value,d.defaultValue,d.children),Vs(s)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||d.suppressHydrationWarning===!0||m_(s.textContent,l)?(d.popover!=null&&(Je("beforetoggle",s),Je("toggle",s)),d.onScroll!=null&&Je("scroll",s),d.onScrollEnd!=null&&Je("scrollend",s),d.onClick!=null&&(s.onclick=Hc),s=!0):s=!1,s||os(o)}function jg(o){for(Nn=o.return;Nn;)switch(Nn.tag){case 5:case 13:qi=!1;return;case 27:case 3:qi=!0;return;default:Nn=Nn.return}}function gl(o){if(o!==Nn)return!1;if(!st)return jg(o),st=!0,!1;var s=o.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=o.type,l=!(l!=="form"&&l!=="button")||sp(o.type,o.memoizedProps)),l=!l),l&&Vt&&os(o),jg(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8)if(l=o.data,l==="/$"){if(s===0){Vt=Ti(o.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;o=o.nextSibling}Vt=null}}else s===27?(s=Vt,fr(o.type)?(o=cp,cp=null,Vt=o):Vt=s):Vt=Nn?Ti(o.stateNode.nextSibling):null;return!0}function yl(){Vt=Nn=null,st=!1}function ey(){var o=is;return o!==null&&(On===null?On=o:On.push.apply(On,o),is=null),o}function vl(o){is===null?is=[o]:is.push(o)}var $d=W(null),rs=null,vo=null;function Xo(o,s,l){se($d,s._currentValue),s._currentValue=l}function _o(o){o._currentValue=$d.current,de($d)}function Yd(o,s,l){for(;o!==null;){var d=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),o===l)break;o=o.return}}function Kd(o,s,l,d){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var _=y.dependencies;if(_!==null){var C=y.child;_=_.firstContext;e:for(;_!==null;){var w=_;_=y;for(var D=0;D<s.length;D++)if(w.context===s[D]){_.lanes|=l,w=_.alternate,w!==null&&(w.lanes|=l),Yd(_.return,l,o),d||(C=null);break e}_=w.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(i(341));C.lanes|=l,_=C.alternate,_!==null&&(_.lanes|=l),Yd(C,l,o),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===o){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function _l(o,s,l,d){o=null;for(var y=s,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var w=y.type;zn(y.pendingProps.value,C.value)||(o!==null?o.push(w):o=[w])}}else if(y===Pt.current){if(C=y.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(Jl):o=[Jl])}y=y.return}o!==null&&Kd(s,o,l,d),s.flags|=262144}function fc(o){for(o=o.firstContext;o!==null;){if(!zn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ss(o){rs=o,vo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function _n(o){return ty(rs,o)}function dc(o,s){return rs===null&&ss(o),ty(o,s)}function ty(o,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},vo===null){if(o===null)throw Error(i(308));vo=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else vo=vo.next=s;return l}var rw=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(l,d){o.push(d)}};this.abort=function(){s.aborted=!0,o.forEach(function(l){return l()})}},sw=t.unstable_scheduleCallback,aw=t.unstable_NormalPriority,Qt={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jd(){return{controller:new rw,data:new Map,refCount:0}}function Tl(o){o.refCount--,o.refCount===0&&sw(aw,function(){o.controller.abort()})}var El=null,Qd=0,Zs=0,js=null;function lw(o,s){if(El===null){var l=El=[];Qd=0,Zs=Wh(),js={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Qd++,s.then(ny,ny),s}function ny(){if(--Qd===0&&El!==null){js!==null&&(js.status="fulfilled");var o=El;El=null,Zs=0,js=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function uw(o,s){var l=[],d={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return o.then(function(){d.status="fulfilled",d.value=s;for(var y=0;y<l.length;y++)(0,l[y])(s)},function(y){for(d.status="rejected",d.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),d}var iy=X.S;X.S=function(o,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&lw(o,s),iy!==null&&iy(o,s)};var as=W(null);function Xd(){var o=as.current;return o!==null?o:Ct.pooledCache}function hc(o,s){s===null?se(as,as.current):se(as,s.pool)}function oy(){var o=Xd();return o===null?null:{parent:Qt._currentValue,pool:o}}var Sl=Error(i(460)),ry=Error(i(474)),pc=Error(i(542)),Wd={then:function(){}};function sy(o){return o=o.status,o==="fulfilled"||o==="rejected"}function mc(){}function ay(o,s,l){switch(l=o[l],l===void 0?o.push(s):l!==s&&(s.then(mc,mc),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,uy(o),o;default:if(typeof s.status=="string")s.then(mc,mc);else{if(o=Ct,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=s,o.status="pending",o.then(function(d){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=d}},function(d){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,uy(o),o}throw Al=s,Sl}}var Al=null;function ly(){if(Al===null)throw Error(i(459));var o=Al;return Al=null,o}function uy(o){if(o===Sl||o===pc)throw Error(i(483))}var Wo=!1;function Zd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jd(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Zo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function jo(o,s,l){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(dt&2)!==0){var y=d.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),d.pending=s,s=ac(o),Qg(o,null,l),s}return sc(o,d,s,l),ac(o)}function Cl(o,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var d=s.lanes;d&=o.pendingLanes,l|=d,s.lanes=l,$e(o,l)}}function eh(o,s){var l=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=C:_=_.next=C,l=l.next}while(l!==null);_===null?y=_=s:_=_.next=s}else y=_=s;l={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:d.shared,callbacks:d.callbacks},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=s:o.next=s,l.lastBaseUpdate=s}var th=!1;function wl(){if(th){var o=js;if(o!==null)throw o}}function Il(o,s,l,d){th=!1;var y=o.updateQueue;Wo=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var D=w,$=D.next;D.next=null,C===null?_=$:C.next=$,C=D;var Z=o.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==C&&(w===null?Z.firstBaseUpdate=$:w.next=$,Z.lastBaseUpdate=D))}if(_!==null){var ne=y.baseState;C=0,Z=$=D=null,w=_;do{var Y=w.lane&-536870913,K=Y!==w.lane;if(K?(tt&Y)===Y:(d&Y)===Y){Y!==0&&Y===Zs&&(th=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ne=o,Re=w;Y=s;var _t=l;switch(Re.tag){case 1:if(Ne=Re.payload,typeof Ne=="function"){ne=Ne.call(_t,ne,Y);break e}ne=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Re.payload,Y=typeof Ne=="function"?Ne.call(_t,ne,Y):Ne,Y==null)break e;ne=v({},ne,Y);break e;case 2:Wo=!0}}Y=w.callback,Y!==null&&(o.flags|=64,K&&(o.flags|=8192),K=y.callbacks,K===null?y.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?($=Z=K,D=ne):Z=Z.next=K,C|=Y;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;K=w,w=K.next,K.next=null,y.lastBaseUpdate=K,y.shared.pending=null}}while(!0);Z===null&&(D=ne),y.baseState=D,y.firstBaseUpdate=$,y.lastBaseUpdate=Z,_===null&&(y.shared.lanes=0),ar|=C,o.lanes=C,o.memoizedState=ne}}function cy(o,s){if(typeof o!="function")throw Error(i(191,o));o.call(s)}function fy(o,s){var l=o.callbacks;if(l!==null)for(o.callbacks=null,o=0;o<l.length;o++)cy(l[o],s)}var ea=W(null),gc=W(0);function dy(o,s){o=Io,se(gc,o),se(ea,s),Io=o|s.baseLanes}function nh(){se(gc,Io),se(ea,ea.current)}function ih(){Io=gc.current,de(ea),de(gc)}var er=0,He=null,yt=null,zt=null,yc=!1,ta=!1,ls=!1,vc=0,Rl=0,na=null,cw=0;function Bt(){throw Error(i(321))}function oh(o,s){if(s===null)return!1;for(var l=0;l<s.length&&l<o.length;l++)if(!zn(o[l],s[l]))return!1;return!0}function rh(o,s,l,d,y,_){return er=_,He=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=o===null||o.memoizedState===null?Qy:Xy,ls=!1,_=l(d,y),ls=!1,ta&&(_=py(s,l,d,y)),hy(o),_}function hy(o){X.H=Cc;var s=yt!==null&&yt.next!==null;if(er=0,zt=yt=He=null,yc=!1,Rl=0,na=null,s)throw Error(i(300));o===null||nn||(o=o.dependencies,o!==null&&fc(o)&&(nn=!0))}function py(o,s,l,d){He=o;var y=0;do{if(ta&&(na=null),Rl=0,ta=!1,25<=y)throw Error(i(301));if(y+=1,zt=yt=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}X.H=yw,_=s(l,d)}while(ta);return _}function fw(){var o=X.H,s=o.useState()[0];return s=typeof s.then=="function"?xl(s):s,o=o.useState()[0],(yt!==null?yt.memoizedState:null)!==o&&(He.flags|=1024),s}function sh(){var o=vc!==0;return vc=0,o}function ah(o,s,l){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~l}function lh(o){if(yc){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}yc=!1}er=0,zt=yt=He=null,ta=!1,Rl=vc=0,na=null}function Ln(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?He.memoizedState=zt=o:zt=zt.next=o,zt}function Ht(){if(yt===null){var o=He.alternate;o=o!==null?o.memoizedState:null}else o=yt.next;var s=zt===null?He.memoizedState:zt.next;if(s!==null)zt=s,yt=o;else{if(o===null)throw He.alternate===null?Error(i(467)):Error(i(310));yt=o,o={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},zt===null?He.memoizedState=zt=o:zt=zt.next=o}return zt}function uh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xl(o){var s=Rl;return Rl+=1,na===null&&(na=[]),o=ay(na,o,s),s=He,(zt===null?s.memoizedState:zt.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?Qy:Xy),o}function _c(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return xl(o);if(o.$$typeof===ie)return _n(o)}throw Error(i(438,String(o)))}function ch(o){var s=null,l=He.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var d=He.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=uh(),He.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(o),d=0;d<o;d++)l[d]=V;return s.index++,l}function To(o,s){return typeof s=="function"?s(o):s}function Tc(o){var s=Ht();return fh(s,yt,o)}function fh(o,s,l){var d=o.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=l;var y=o.baseQueue,_=d.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}s.baseQueue=y=_,d.pending=null}if(_=o.baseState,y===null)o.memoizedState=_;else{s=y.next;var w=C=null,D=null,$=s,Z=!1;do{var ne=$.lane&-536870913;if(ne!==$.lane?(tt&ne)===ne:(er&ne)===ne){var Y=$.revertLane;if(Y===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ne===Zs&&(Z=!0);else if((er&Y)===Y){$=$.next,Y===Zs&&(Z=!0);continue}else ne={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},D===null?(w=D=ne,C=_):D=D.next=ne,He.lanes|=Y,ar|=Y;ne=$.action,ls&&l(_,ne),_=$.hasEagerState?$.eagerState:l(_,ne)}else Y={lane:ne,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},D===null?(w=D=Y,C=_):D=D.next=Y,He.lanes|=ne,ar|=ne;$=$.next}while($!==null&&$!==s);if(D===null?C=_:D.next=w,!zn(_,o.memoizedState)&&(nn=!0,Z&&(l=js,l!==null)))throw l;o.memoizedState=_,o.baseState=C,o.baseQueue=D,d.lastRenderedState=_}return y===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function dh(o){var s=Ht(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=o;var d=l.dispatch,y=l.pending,_=s.memoizedState;if(y!==null){l.pending=null;var C=y=y.next;do _=o(_,C.action),C=C.next;while(C!==y);zn(_,s.memoizedState)||(nn=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),l.lastRenderedState=_}return[_,d]}function my(o,s,l){var d=He,y=Ht(),_=st;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=s();var C=!zn((yt||y).memoizedState,l);C&&(y.memoizedState=l,nn=!0),y=y.queue;var w=vy.bind(null,d,y,o);if(bl(2048,8,w,[o]),y.getSnapshot!==s||C||zt!==null&&zt.memoizedState.tag&1){if(d.flags|=2048,ia(9,Ec(),yy.bind(null,d,y,l,s),null),Ct===null)throw Error(i(349));_||(er&124)!==0||gy(d,s,l)}return l}function gy(o,s,l){o.flags|=16384,o={getSnapshot:s,value:l},s=He.updateQueue,s===null?(s=uh(),He.updateQueue=s,s.stores=[o]):(l=s.stores,l===null?s.stores=[o]:l.push(o))}function yy(o,s,l,d){s.value=l,s.getSnapshot=d,_y(s)&&Ty(o)}function vy(o,s,l){return l(function(){_y(s)&&Ty(o)})}function _y(o){var s=o.getSnapshot;o=o.value;try{var l=s();return!zn(o,l)}catch{return!0}}function Ty(o){var s=Js(o,2);s!==null&&Qn(s,o,2)}function hh(o){var s=Ln();if(typeof o=="function"){var l=o;if(o=l(),ls){Yt(!0);try{l()}finally{Yt(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:o},s}function Ey(o,s,l,d){return o.baseState=l,fh(o,yt,typeof d=="function"?d:To)}function dw(o,s,l,d,y){if(Ac(o))throw Error(i(485));if(o=s.action,o!==null){var _={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};X.T!==null?l(!0):_.isTransition=!1,d(_),l=s.pending,l===null?(_.next=s.pending=_,Sy(s,_)):(_.next=l.next,s.pending=l.next=_)}}function Sy(o,s){var l=s.action,d=s.payload,y=o.state;if(s.isTransition){var _=X.T,C={};X.T=C;try{var w=l(y,d),D=X.S;D!==null&&D(C,w),Ay(o,s,w)}catch($){ph(o,s,$)}finally{X.T=_}}else try{_=l(y,d),Ay(o,s,_)}catch($){ph(o,s,$)}}function Ay(o,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Cy(o,s,d)},function(d){return ph(o,s,d)}):Cy(o,s,l)}function Cy(o,s,l){s.status="fulfilled",s.value=l,wy(s),o.state=l,s=o.pending,s!==null&&(l=s.next,l===s?o.pending=null:(l=l.next,s.next=l,Sy(o,l)))}function ph(o,s,l){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=l,wy(s),s=s.next;while(s!==d)}o.action=null}function wy(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function Iy(o,s){return s}function Ry(o,s){if(st){var l=Ct.formState;if(l!==null){e:{var d=He;if(st){if(Vt){t:{for(var y=Vt,_=qi;y.nodeType!==8;){if(!_){y=null;break t}if(y=Ti(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){Vt=Ti(y.nextSibling),d=y.data==="F!";break e}}os(d)}d=!1}d&&(s=l[0])}}return l=Ln(),l.memoizedState=l.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Iy,lastRenderedState:s},l.queue=d,l=Yy.bind(null,He,d),d.dispatch=l,d=hh(!1),_=_h.bind(null,He,!1,d.queue),d=Ln(),y={state:s,dispatch:null,action:o,pending:null},d.queue=y,l=dw.bind(null,He,y,_,l),y.dispatch=l,d.memoizedState=o,[s,l,!1]}function xy(o){var s=Ht();return by(s,yt,o)}function by(o,s,l){if(s=fh(o,s,Iy)[0],o=Tc(To)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=xl(s)}catch(C){throw C===Sl?pc:C}else d=s;s=Ht();var y=s.queue,_=y.dispatch;return l!==s.memoizedState&&(He.flags|=2048,ia(9,Ec(),hw.bind(null,y,l),null)),[d,_,o]}function hw(o,s){o.action=s}function My(o){var s=Ht(),l=yt;if(l!==null)return by(s,l,o);Ht(),s=s.memoizedState,l=Ht();var d=l.queue.dispatch;return l.memoizedState=o,[s,d,!1]}function ia(o,s,l,d){return o={tag:o,create:l,deps:d,inst:s,next:null},s=He.updateQueue,s===null&&(s=uh(),He.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=o.next=o:(d=l.next,l.next=o,o.next=d,s.lastEffect=o),o}function Ec(){return{destroy:void 0,resource:void 0}}function Ny(){return Ht().memoizedState}function Sc(o,s,l,d){var y=Ln();d=d===void 0?null:d,He.flags|=o,y.memoizedState=ia(1|s,Ec(),l,d)}function bl(o,s,l,d){var y=Ht();d=d===void 0?null:d;var _=y.memoizedState.inst;yt!==null&&d!==null&&oh(d,yt.memoizedState.deps)?y.memoizedState=ia(s,_,l,d):(He.flags|=o,y.memoizedState=ia(1|s,_,l,d))}function ky(o,s){Sc(8390656,8,o,s)}function Dy(o,s){bl(2048,8,o,s)}function Py(o,s){return bl(4,2,o,s)}function Vy(o,s){return bl(4,4,o,s)}function Ly(o,s){if(typeof s=="function"){o=o();var l=s(o);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function Uy(o,s,l){l=l!=null?l.concat([o]):null,bl(4,4,Ly.bind(null,s,o),l)}function mh(){}function Oy(o,s){var l=Ht();s=s===void 0?null:s;var d=l.memoizedState;return s!==null&&oh(s,d[1])?d[0]:(l.memoizedState=[o,s],o)}function By(o,s){var l=Ht();s=s===void 0?null:s;var d=l.memoizedState;if(s!==null&&oh(s,d[1]))return d[0];if(d=o(),ls){Yt(!0);try{o()}finally{Yt(!1)}}return l.memoizedState=[d,s],d}function gh(o,s,l){return l===void 0||(er&1073741824)!==0?o.memoizedState=s:(o.memoizedState=l,o=Gv(),He.lanes|=o,ar|=o,l)}function Fy(o,s,l,d){return zn(l,s)?l:ea.current!==null?(o=gh(o,l,d),zn(o,s)||(nn=!0),o):(er&42)===0?(nn=!0,o.memoizedState=l):(o=Gv(),He.lanes|=o,ar|=o,s)}function qy(o,s,l,d,y){var _=he.p;he.p=_!==0&&8>_?_:8;var C=X.T,w={};X.T=w,_h(o,!1,s,l);try{var D=y(),$=X.S;if($!==null&&$(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=uw(D,d);Ml(o,s,Z,Jn(o))}else Ml(o,s,d,Jn(o))}catch(ne){Ml(o,s,{then:function(){},status:"rejected",reason:ne},Jn())}finally{he.p=_,X.T=C}}function pw(){}function yh(o,s,l,d){if(o.tag!==5)throw Error(i(476));var y=Gy(o).queue;qy(o,y,s,ye,l===null?pw:function(){return zy(o),l(d)})}function Gy(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:ye},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:l},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function zy(o){var s=Gy(o).next.queue;Ml(o,s,{},Jn())}function vh(){return _n(Jl)}function Hy(){return Ht().memoizedState}function $y(){return Ht().memoizedState}function mw(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var l=Jn();o=Zo(l);var d=jo(s,o,l);d!==null&&(Qn(d,s,l),Cl(d,s,l)),s={cache:Jd()},o.payload=s;return}s=s.return}}function gw(o,s,l){var d=Jn();l={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Ac(o)?Ky(s,l):(l=Od(o,s,l,d),l!==null&&(Qn(l,o,d),Jy(l,s,d)))}function Yy(o,s,l){var d=Jn();Ml(o,s,l,d)}function Ml(o,s,l,d){var y={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ac(o))Ky(s,y);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var C=s.lastRenderedState,w=_(C,l);if(y.hasEagerState=!0,y.eagerState=w,zn(w,C))return sc(o,s,y,0),Ct===null&&rc(),!1}catch{}finally{}if(l=Od(o,s,y,d),l!==null)return Qn(l,o,d),Jy(l,s,d),!0}return!1}function _h(o,s,l,d){if(d={lane:2,revertLane:Wh(),action:d,hasEagerState:!1,eagerState:null,next:null},Ac(o)){if(s)throw Error(i(479))}else s=Od(o,l,d,2),s!==null&&Qn(s,o,2)}function Ac(o){var s=o.alternate;return o===He||s!==null&&s===He}function Ky(o,s){ta=yc=!0;var l=o.pending;l===null?s.next=s:(s.next=l.next,l.next=s),o.pending=s}function Jy(o,s,l){if((l&4194048)!==0){var d=s.lanes;d&=o.pendingLanes,l|=d,s.lanes=l,$e(o,l)}}var Cc={readContext:_n,use:_c,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt},Qy={readContext:_n,use:_c,useCallback:function(o,s){return Ln().memoizedState=[o,s===void 0?null:s],o},useContext:_n,useEffect:ky,useImperativeHandle:function(o,s,l){l=l!=null?l.concat([o]):null,Sc(4194308,4,Ly.bind(null,s,o),l)},useLayoutEffect:function(o,s){return Sc(4194308,4,o,s)},useInsertionEffect:function(o,s){Sc(4,2,o,s)},useMemo:function(o,s){var l=Ln();s=s===void 0?null:s;var d=o();if(ls){Yt(!0);try{o()}finally{Yt(!1)}}return l.memoizedState=[d,s],d},useReducer:function(o,s,l){var d=Ln();if(l!==void 0){var y=l(s);if(ls){Yt(!0);try{l(s)}finally{Yt(!1)}}}else y=s;return d.memoizedState=d.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},d.queue=o,o=o.dispatch=gw.bind(null,He,o),[d.memoizedState,o]},useRef:function(o){var s=Ln();return o={current:o},s.memoizedState=o},useState:function(o){o=hh(o);var s=o.queue,l=Yy.bind(null,He,s);return s.dispatch=l,[o.memoizedState,l]},useDebugValue:mh,useDeferredValue:function(o,s){var l=Ln();return gh(l,o,s)},useTransition:function(){var o=hh(!1);return o=qy.bind(null,He,o.queue,!0,!1),Ln().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,l){var d=He,y=Ln();if(st){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),Ct===null)throw Error(i(349));(tt&124)!==0||gy(d,s,l)}y.memoizedState=l;var _={value:l,getSnapshot:s};return y.queue=_,ky(vy.bind(null,d,_,o),[o]),d.flags|=2048,ia(9,Ec(),yy.bind(null,d,_,l,s),null),l},useId:function(){var o=Ln(),s=Ct.identifierPrefix;if(st){var l=yo,d=go;l=(d&~(1<<32-Ut(d)-1)).toString(32)+l,s=""+s+"R"+l,l=vc++,0<l&&(s+="H"+l.toString(32)),s+=""}else l=cw++,s=""+s+"r"+l.toString(32)+"";return o.memoizedState=s},useHostTransitionStatus:vh,useFormState:Ry,useActionState:Ry,useOptimistic:function(o){var s=Ln();s.memoizedState=s.baseState=o;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=_h.bind(null,He,!0,l),l.dispatch=s,[o,s]},useMemoCache:ch,useCacheRefresh:function(){return Ln().memoizedState=mw.bind(null,He)}},Xy={readContext:_n,use:_c,useCallback:Oy,useContext:_n,useEffect:Dy,useImperativeHandle:Uy,useInsertionEffect:Py,useLayoutEffect:Vy,useMemo:By,useReducer:Tc,useRef:Ny,useState:function(){return Tc(To)},useDebugValue:mh,useDeferredValue:function(o,s){var l=Ht();return Fy(l,yt.memoizedState,o,s)},useTransition:function(){var o=Tc(To)[0],s=Ht().memoizedState;return[typeof o=="boolean"?o:xl(o),s]},useSyncExternalStore:my,useId:Hy,useHostTransitionStatus:vh,useFormState:xy,useActionState:xy,useOptimistic:function(o,s){var l=Ht();return Ey(l,yt,o,s)},useMemoCache:ch,useCacheRefresh:$y},yw={readContext:_n,use:_c,useCallback:Oy,useContext:_n,useEffect:Dy,useImperativeHandle:Uy,useInsertionEffect:Py,useLayoutEffect:Vy,useMemo:By,useReducer:dh,useRef:Ny,useState:function(){return dh(To)},useDebugValue:mh,useDeferredValue:function(o,s){var l=Ht();return yt===null?gh(l,o,s):Fy(l,yt.memoizedState,o,s)},useTransition:function(){var o=dh(To)[0],s=Ht().memoizedState;return[typeof o=="boolean"?o:xl(o),s]},useSyncExternalStore:my,useId:Hy,useHostTransitionStatus:vh,useFormState:My,useActionState:My,useOptimistic:function(o,s){var l=Ht();return yt!==null?Ey(l,yt,o,s):(l.baseState=o,[o,l.queue.dispatch])},useMemoCache:ch,useCacheRefresh:$y},oa=null,Nl=0;function wc(o){var s=Nl;return Nl+=1,oa===null&&(oa=[]),ay(oa,o,s)}function kl(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function Ic(o,s){throw s.$$typeof===E?Error(i(525)):(o=Object.prototype.toString.call(s),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function Wy(o){var s=o._init;return s(o._payload)}function Zy(o){function s(G,B){if(o){var H=G.deletions;H===null?(G.deletions=[B],G.flags|=16):H.push(B)}}function l(G,B){if(!o)return null;for(;B!==null;)s(G,B),B=B.sibling;return null}function d(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function y(G,B){return G=mo(G,B),G.index=0,G.sibling=null,G}function _(G,B,H){return G.index=H,o?(H=G.alternate,H!==null?(H=H.index,H<B?(G.flags|=67108866,B):H):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function C(G){return o&&G.alternate===null&&(G.flags|=67108866),G}function w(G,B,H,j){return B===null||B.tag!==6?(B=Fd(H,G.mode,j),B.return=G,B):(B=y(B,H),B.return=G,B)}function D(G,B,H,j){var ge=H.type;return ge===x?Z(G,B,H.props.children,j,H.key):B!==null&&(B.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===M&&Wy(ge)===B.type)?(B=y(B,H.props),kl(B,H),B.return=G,B):(B=lc(H.type,H.key,H.props,null,G.mode,j),kl(B,H),B.return=G,B)}function $(G,B,H,j){return B===null||B.tag!==4||B.stateNode.containerInfo!==H.containerInfo||B.stateNode.implementation!==H.implementation?(B=qd(H,G.mode,j),B.return=G,B):(B=y(B,H.children||[]),B.return=G,B)}function Z(G,B,H,j,ge){return B===null||B.tag!==7?(B=es(H,G.mode,j,ge),B.return=G,B):(B=y(B,H),B.return=G,B)}function ne(G,B,H){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Fd(""+B,G.mode,H),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case S:return H=lc(B.type,B.key,B.props,null,G.mode,H),kl(H,B),H.return=G,H;case I:return B=qd(B,G.mode,H),B.return=G,B;case M:var j=B._init;return B=j(B._payload),ne(G,B,H)}if(We(B)||q(B))return B=es(B,G.mode,H,null),B.return=G,B;if(typeof B.then=="function")return ne(G,wc(B),H);if(B.$$typeof===ie)return ne(G,dc(G,B),H);Ic(G,B)}return null}function Y(G,B,H,j){var ge=B!==null?B.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ge!==null?null:w(G,B,""+H,j);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case S:return H.key===ge?D(G,B,H,j):null;case I:return H.key===ge?$(G,B,H,j):null;case M:return ge=H._init,H=ge(H._payload),Y(G,B,H,j)}if(We(H)||q(H))return ge!==null?null:Z(G,B,H,j,null);if(typeof H.then=="function")return Y(G,B,wc(H),j);if(H.$$typeof===ie)return Y(G,B,dc(G,H),j);Ic(G,H)}return null}function K(G,B,H,j,ge){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return G=G.get(H)||null,w(B,G,""+j,ge);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case S:return G=G.get(j.key===null?H:j.key)||null,D(B,G,j,ge);case I:return G=G.get(j.key===null?H:j.key)||null,$(B,G,j,ge);case M:var Ye=j._init;return j=Ye(j._payload),K(G,B,H,j,ge)}if(We(j)||q(j))return G=G.get(H)||null,Z(B,G,j,ge,null);if(typeof j.then=="function")return K(G,B,H,wc(j),ge);if(j.$$typeof===ie)return K(G,B,H,dc(B,j),ge);Ic(B,j)}return null}function Ne(G,B,H,j){for(var ge=null,Ye=null,Ee=B,xe=B=0,rn=null;Ee!==null&&xe<H.length;xe++){Ee.index>xe?(rn=Ee,Ee=null):rn=Ee.sibling;var it=Y(G,Ee,H[xe],j);if(it===null){Ee===null&&(Ee=rn);break}o&&Ee&&it.alternate===null&&s(G,Ee),B=_(it,B,xe),Ye===null?ge=it:Ye.sibling=it,Ye=it,Ee=rn}if(xe===H.length)return l(G,Ee),st&&ns(G,xe),ge;if(Ee===null){for(;xe<H.length;xe++)Ee=ne(G,H[xe],j),Ee!==null&&(B=_(Ee,B,xe),Ye===null?ge=Ee:Ye.sibling=Ee,Ye=Ee);return st&&ns(G,xe),ge}for(Ee=d(Ee);xe<H.length;xe++)rn=K(Ee,G,xe,H[xe],j),rn!==null&&(o&&rn.alternate!==null&&Ee.delete(rn.key===null?xe:rn.key),B=_(rn,B,xe),Ye===null?ge=rn:Ye.sibling=rn,Ye=rn);return o&&Ee.forEach(function(gr){return s(G,gr)}),st&&ns(G,xe),ge}function Re(G,B,H,j){if(H==null)throw Error(i(151));for(var ge=null,Ye=null,Ee=B,xe=B=0,rn=null,it=H.next();Ee!==null&&!it.done;xe++,it=H.next()){Ee.index>xe?(rn=Ee,Ee=null):rn=Ee.sibling;var gr=Y(G,Ee,it.value,j);if(gr===null){Ee===null&&(Ee=rn);break}o&&Ee&&gr.alternate===null&&s(G,Ee),B=_(gr,B,xe),Ye===null?ge=gr:Ye.sibling=gr,Ye=gr,Ee=rn}if(it.done)return l(G,Ee),st&&ns(G,xe),ge;if(Ee===null){for(;!it.done;xe++,it=H.next())it=ne(G,it.value,j),it!==null&&(B=_(it,B,xe),Ye===null?ge=it:Ye.sibling=it,Ye=it);return st&&ns(G,xe),ge}for(Ee=d(Ee);!it.done;xe++,it=H.next())it=K(Ee,G,xe,it.value,j),it!==null&&(o&&it.alternate!==null&&Ee.delete(it.key===null?xe:it.key),B=_(it,B,xe),Ye===null?ge=it:Ye.sibling=it,Ye=it);return o&&Ee.forEach(function(vI){return s(G,vI)}),st&&ns(G,xe),ge}function _t(G,B,H,j){if(typeof H=="object"&&H!==null&&H.type===x&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case S:e:{for(var ge=H.key;B!==null;){if(B.key===ge){if(ge=H.type,ge===x){if(B.tag===7){l(G,B.sibling),j=y(B,H.props.children),j.return=G,G=j;break e}}else if(B.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===M&&Wy(ge)===B.type){l(G,B.sibling),j=y(B,H.props),kl(j,H),j.return=G,G=j;break e}l(G,B);break}else s(G,B);B=B.sibling}H.type===x?(j=es(H.props.children,G.mode,j,H.key),j.return=G,G=j):(j=lc(H.type,H.key,H.props,null,G.mode,j),kl(j,H),j.return=G,G=j)}return C(G);case I:e:{for(ge=H.key;B!==null;){if(B.key===ge)if(B.tag===4&&B.stateNode.containerInfo===H.containerInfo&&B.stateNode.implementation===H.implementation){l(G,B.sibling),j=y(B,H.children||[]),j.return=G,G=j;break e}else{l(G,B);break}else s(G,B);B=B.sibling}j=qd(H,G.mode,j),j.return=G,G=j}return C(G);case M:return ge=H._init,H=ge(H._payload),_t(G,B,H,j)}if(We(H))return Ne(G,B,H,j);if(q(H)){if(ge=q(H),typeof ge!="function")throw Error(i(150));return H=ge.call(H),Re(G,B,H,j)}if(typeof H.then=="function")return _t(G,B,wc(H),j);if(H.$$typeof===ie)return _t(G,B,dc(G,H),j);Ic(G,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,B!==null&&B.tag===6?(l(G,B.sibling),j=y(B,H),j.return=G,G=j):(l(G,B),j=Fd(H,G.mode,j),j.return=G,G=j),C(G)):l(G,B)}return function(G,B,H,j){try{Nl=0;var ge=_t(G,B,H,j);return oa=null,ge}catch(Ee){if(Ee===Sl||Ee===pc)throw Ee;var Ye=Hn(29,Ee,null,G.mode);return Ye.lanes=j,Ye.return=G,Ye}finally{}}}var ra=Zy(!0),jy=Zy(!1),ui=W(null),Gi=null;function tr(o){var s=o.alternate;se(Xt,Xt.current&1),se(ui,o),Gi===null&&(s===null||ea.current!==null||s.memoizedState!==null)&&(Gi=o)}function ev(o){if(o.tag===22){if(se(Xt,Xt.current),se(ui,o),Gi===null){var s=o.alternate;s!==null&&s.memoizedState!==null&&(Gi=o)}}else nr()}function nr(){se(Xt,Xt.current),se(ui,ui.current)}function Eo(o){de(ui),Gi===o&&(Gi=null),de(Xt)}var Xt=W(0);function Rc(o){for(var s=o;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||up(l)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Th(o,s,l,d){s=o.memoizedState,l=l(d,s),l=l==null?s:v({},s,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var Eh={enqueueSetState:function(o,s,l){o=o._reactInternals;var d=Jn(),y=Zo(d);y.payload=s,l!=null&&(y.callback=l),s=jo(o,y,d),s!==null&&(Qn(s,o,d),Cl(s,o,d))},enqueueReplaceState:function(o,s,l){o=o._reactInternals;var d=Jn(),y=Zo(d);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=jo(o,y,d),s!==null&&(Qn(s,o,d),Cl(s,o,d))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var l=Jn(),d=Zo(l);d.tag=2,s!=null&&(d.callback=s),s=jo(o,d,l),s!==null&&(Qn(s,o,l),Cl(s,o,l))}};function tv(o,s,l,d,y,_,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,_,C):s.prototype&&s.prototype.isPureReactComponent?!pl(l,d)||!pl(y,_):!0}function nv(o,s,l,d){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==o&&Eh.enqueueReplaceState(s,s.state,null)}function us(o,s){var l=s;if("ref"in s){l={};for(var d in s)d!=="ref"&&(l[d]=s[d])}if(o=o.defaultProps){l===s&&(l=v({},l));for(var y in o)l[y]===void 0&&(l[y]=o[y])}return l}var xc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function iv(o){xc(o)}function ov(o){console.error(o)}function rv(o){xc(o)}function bc(o,s){try{var l=o.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function sv(o,s,l){try{var d=o.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Sh(o,s,l){return l=Zo(l),l.tag=3,l.payload={element:null},l.callback=function(){bc(o,s)},l}function av(o){return o=Zo(o),o.tag=3,o}function lv(o,s,l,d){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=d.value;o.payload=function(){return y(_)},o.callback=function(){sv(s,l,d)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(o.callback=function(){sv(s,l,d),typeof y!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var w=d.stack;this.componentDidCatch(d.value,{componentStack:w!==null?w:""})})}function vw(o,s,l,d,y){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=l.alternate,s!==null&&_l(s,l,y,!0),l=ui.current,l!==null){switch(l.tag){case 13:return Gi===null?Yh():l.alternate===null&&Lt===0&&(Lt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,d===Wd?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([d]):s.add(d),Jh(o,d,y)),!1;case 22:return l.flags|=65536,d===Wd?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([d]):l.add(d)),Jh(o,d,y)),!1}throw Error(i(435,l.tag))}return Jh(o,d,y),Yh(),!1}if(st)return s=ui.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,d!==Hd&&(o=Error(i(422),{cause:d}),vl(ri(o,l)))):(d!==Hd&&(s=Error(i(423),{cause:d}),vl(ri(s,l))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,d=ri(d,l),y=Sh(o.stateNode,d,y),eh(o,y),Lt!==4&&(Lt=2)),!1;var _=Error(i(520),{cause:d});if(_=ri(_,l),Bl===null?Bl=[_]:Bl.push(_),Lt!==4&&(Lt=2),s===null)return!0;d=ri(d,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,o=y&-y,l.lanes|=o,o=Sh(l.stateNode,d,o),eh(l,o),!1;case 1:if(s=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(lr===null||!lr.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=av(y),lv(y,o,l,d),eh(l,y),!1}l=l.return}while(l!==null);return!1}var uv=Error(i(461)),nn=!1;function cn(o,s,l,d){s.child=o===null?jy(s,null,l,d):ra(s,o.child,l,d)}function cv(o,s,l,d,y){l=l.render;var _=s.ref;if("ref"in d){var C={};for(var w in d)w!=="ref"&&(C[w]=d[w])}else C=d;return ss(s),d=rh(o,s,l,C,_,y),w=sh(),o!==null&&!nn?(ah(o,s,y),So(o,s,y)):(st&&w&&Gd(s),s.flags|=1,cn(o,s,d,y),s.child)}function fv(o,s,l,d,y){if(o===null){var _=l.type;return typeof _=="function"&&!Bd(_)&&_.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=_,dv(o,s,_,d,y)):(o=lc(l.type,null,d,s,s.mode,y),o.ref=s.ref,o.return=s,s.child=o)}if(_=o.child,!Mh(o,y)){var C=_.memoizedProps;if(l=l.compare,l=l!==null?l:pl,l(C,d)&&o.ref===s.ref)return So(o,s,y)}return s.flags|=1,o=mo(_,d),o.ref=s.ref,o.return=s,s.child=o}function dv(o,s,l,d,y){if(o!==null){var _=o.memoizedProps;if(pl(_,d)&&o.ref===s.ref)if(nn=!1,s.pendingProps=d=_,Mh(o,y))(o.flags&131072)!==0&&(nn=!0);else return s.lanes=o.lanes,So(o,s,y)}return Ah(o,s,l,d,y)}function hv(o,s,l){var d=s.pendingProps,y=d.children,_=o!==null?o.memoizedState:null;if(d.mode==="hidden"){if((s.flags&128)!==0){if(d=_!==null?_.baseLanes|l:l,o!==null){for(y=s.child=o.child,_=0;y!==null;)_=_|y.lanes|y.childLanes,y=y.sibling;s.childLanes=_&~d}else s.childLanes=0,s.child=null;return pv(o,s,d,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&hc(s,_!==null?_.cachePool:null),_!==null?dy(s,_):nh(),ev(s);else return s.lanes=s.childLanes=536870912,pv(o,s,_!==null?_.baseLanes|l:l,l)}else _!==null?(hc(s,_.cachePool),dy(s,_),nr(),s.memoizedState=null):(o!==null&&hc(s,null),nh(),nr());return cn(o,s,y,l),s.child}function pv(o,s,l,d){var y=Xd();return y=y===null?null:{parent:Qt._currentValue,pool:y},s.memoizedState={baseLanes:l,cachePool:y},o!==null&&hc(s,null),nh(),ev(s),o!==null&&_l(o,s,d,!0),null}function Mc(o,s){var l=s.ref;if(l===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(o===null||o.ref!==l)&&(s.flags|=4194816)}}function Ah(o,s,l,d,y){return ss(s),l=rh(o,s,l,d,void 0,y),d=sh(),o!==null&&!nn?(ah(o,s,y),So(o,s,y)):(st&&d&&Gd(s),s.flags|=1,cn(o,s,l,y),s.child)}function mv(o,s,l,d,y,_){return ss(s),s.updateQueue=null,l=py(s,d,l,y),hy(o),d=sh(),o!==null&&!nn?(ah(o,s,_),So(o,s,_)):(st&&d&&Gd(s),s.flags|=1,cn(o,s,l,_),s.child)}function gv(o,s,l,d,y){if(ss(s),s.stateNode===null){var _=Qs,C=l.contextType;typeof C=="object"&&C!==null&&(_=_n(C)),_=new l(d,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Eh,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=d,_.state=s.memoizedState,_.refs={},Zd(s),C=l.contextType,_.context=typeof C=="object"&&C!==null?_n(C):Qs,_.state=s.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(Th(s,l,C,d),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&Eh.enqueueReplaceState(_,_.state,null),Il(s,d,_,y),wl(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(o===null){_=s.stateNode;var w=s.memoizedProps,D=us(l,w);_.props=D;var $=_.context,Z=l.contextType;C=Qs,typeof Z=="object"&&Z!==null&&(C=_n(Z));var ne=l.getDerivedStateFromProps;Z=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w||$!==C)&&nv(s,_,d,C),Wo=!1;var Y=s.memoizedState;_.state=Y,Il(s,d,_,y),wl(),$=s.memoizedState,w||Y!==$||Wo?(typeof ne=="function"&&(Th(s,l,ne,d),$=s.memoizedState),(D=Wo||tv(s,l,D,d,Y,$,C))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=$),_.props=d,_.state=$,_.context=C,d=D):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{_=s.stateNode,jd(o,s),C=s.memoizedProps,Z=us(l,C),_.props=Z,ne=s.pendingProps,Y=_.context,$=l.contextType,D=Qs,typeof $=="object"&&$!==null&&(D=_n($)),w=l.getDerivedStateFromProps,($=typeof w=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==ne||Y!==D)&&nv(s,_,d,D),Wo=!1,Y=s.memoizedState,_.state=Y,Il(s,d,_,y),wl();var K=s.memoizedState;C!==ne||Y!==K||Wo||o!==null&&o.dependencies!==null&&fc(o.dependencies)?(typeof w=="function"&&(Th(s,l,w,d),K=s.memoizedState),(Z=Wo||tv(s,l,Z,d,Y,K,D)||o!==null&&o.dependencies!==null&&fc(o.dependencies))?($||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,K,D),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,K,D)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===o.memoizedProps&&Y===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&Y===o.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=K),_.props=d,_.state=K,_.context=D,d=Z):(typeof _.componentDidUpdate!="function"||C===o.memoizedProps&&Y===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&Y===o.memoizedState||(s.flags|=1024),d=!1)}return _=d,Mc(o,s),d=(s.flags&128)!==0,_||d?(_=s.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,o!==null&&d?(s.child=ra(s,o.child,null,y),s.child=ra(s,null,l,y)):cn(o,s,l,y),s.memoizedState=_.state,o=s.child):o=So(o,s,y),o}function yv(o,s,l,d){return yl(),s.flags|=256,cn(o,s,l,d),s.child}var Ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wh(o){return{baseLanes:o,cachePool:oy()}}function Ih(o,s,l){return o=o!==null?o.childLanes&~l:0,s&&(o|=ci),o}function vv(o,s,l){var d=s.pendingProps,y=!1,_=(s.flags&128)!==0,C;if((C=_)||(C=o!==null&&o.memoizedState===null?!1:(Xt.current&2)!==0),C&&(y=!0,s.flags&=-129),C=(s.flags&32)!==0,s.flags&=-33,o===null){if(st){if(y?tr(s):nr(),st){var w=Vt,D;if(D=w){e:{for(D=w,w=qi;D.nodeType!==8;){if(!w){w=null;break e}if(D=Ti(D.nextSibling),D===null){w=null;break e}}w=D}w!==null?(s.memoizedState={dehydrated:w,treeContext:ts!==null?{id:go,overflow:yo}:null,retryLane:536870912,hydrationErrors:null},D=Hn(18,null,null,0),D.stateNode=w,D.return=s,s.child=D,Nn=s,Vt=null,D=!0):D=!1}D||os(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return up(w)?s.lanes=32:s.lanes=536870912,null;Eo(s)}return w=d.children,d=d.fallback,y?(nr(),y=s.mode,w=Nc({mode:"hidden",children:w},y),d=es(d,y,l,null),w.return=s,d.return=s,w.sibling=d,s.child=w,y=s.child,y.memoizedState=wh(l),y.childLanes=Ih(o,C,l),s.memoizedState=Ch,d):(tr(s),Rh(s,w))}if(D=o.memoizedState,D!==null&&(w=D.dehydrated,w!==null)){if(_)s.flags&256?(tr(s),s.flags&=-257,s=xh(o,s,l)):s.memoizedState!==null?(nr(),s.child=o.child,s.flags|=128,s=null):(nr(),y=d.fallback,w=s.mode,d=Nc({mode:"visible",children:d.children},w),y=es(y,w,l,null),y.flags|=2,d.return=s,y.return=s,d.sibling=y,s.child=d,ra(s,o.child,null,l),d=s.child,d.memoizedState=wh(l),d.childLanes=Ih(o,C,l),s.memoizedState=Ch,s=y);else if(tr(s),up(w)){if(C=w.nextSibling&&w.nextSibling.dataset,C)var $=C.dgst;C=$,d=Error(i(419)),d.stack="",d.digest=C,vl({value:d,source:null,stack:null}),s=xh(o,s,l)}else if(nn||_l(o,s,l,!1),C=(l&o.childLanes)!==0,nn||C){if(C=Ct,C!==null&&(d=l&-l,d=(d&42)!==0?1:Ge(d),d=(d&(C.suspendedLanes|l))!==0?0:d,d!==0&&d!==D.retryLane))throw D.retryLane=d,Js(o,d),Qn(C,o,d),uv;w.data==="$?"||Yh(),s=xh(o,s,l)}else w.data==="$?"?(s.flags|=192,s.child=o.child,s=null):(o=D.treeContext,Vt=Ti(w.nextSibling),Nn=s,st=!0,is=null,qi=!1,o!==null&&(ai[li++]=go,ai[li++]=yo,ai[li++]=ts,go=o.id,yo=o.overflow,ts=s),s=Rh(s,d.children),s.flags|=4096);return s}return y?(nr(),y=d.fallback,w=s.mode,D=o.child,$=D.sibling,d=mo(D,{mode:"hidden",children:d.children}),d.subtreeFlags=D.subtreeFlags&65011712,$!==null?y=mo($,y):(y=es(y,w,l,null),y.flags|=2),y.return=s,d.return=s,d.sibling=y,s.child=d,d=y,y=s.child,w=o.child.memoizedState,w===null?w=wh(l):(D=w.cachePool,D!==null?($=Qt._currentValue,D=D.parent!==$?{parent:$,pool:$}:D):D=oy(),w={baseLanes:w.baseLanes|l,cachePool:D}),y.memoizedState=w,y.childLanes=Ih(o,C,l),s.memoizedState=Ch,d):(tr(s),l=o.child,o=l.sibling,l=mo(l,{mode:"visible",children:d.children}),l.return=s,l.sibling=null,o!==null&&(C=s.deletions,C===null?(s.deletions=[o],s.flags|=16):C.push(o)),s.child=l,s.memoizedState=null,l)}function Rh(o,s){return s=Nc({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function Nc(o,s){return o=Hn(22,o,null,s),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function xh(o,s,l){return ra(s,o.child,null,l),o=Rh(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function _v(o,s,l){o.lanes|=s;var d=o.alternate;d!==null&&(d.lanes|=s),Yd(o.return,s,l)}function bh(o,s,l,d,y){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:y}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=l,_.tailMode=y)}function Tv(o,s,l){var d=s.pendingProps,y=d.revealOrder,_=d.tail;if(cn(o,s,d.children,l),d=Xt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&_v(o,l,s);else if(o.tag===19)_v(o,l,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}switch(se(Xt,d),y){case"forwards":for(l=s.child,y=null;l!==null;)o=l.alternate,o!==null&&Rc(o)===null&&(y=l),l=l.sibling;l=y,l===null?(y=s.child,s.child=null):(y=l.sibling,l.sibling=null),bh(s,!1,y,l,_);break;case"backwards":for(l=null,y=s.child,s.child=null;y!==null;){if(o=y.alternate,o!==null&&Rc(o)===null){s.child=y;break}o=y.sibling,y.sibling=l,l=y,y=o}bh(s,!0,l,null,_);break;case"together":bh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function So(o,s,l){if(o!==null&&(s.dependencies=o.dependencies),ar|=s.lanes,(l&s.childLanes)===0)if(o!==null){if(_l(o,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(i(153));if(s.child!==null){for(o=s.child,l=mo(o,o.pendingProps),s.child=l,l.return=s;o.sibling!==null;)o=o.sibling,l=l.sibling=mo(o,o.pendingProps),l.return=s;l.sibling=null}return s.child}function Mh(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&fc(o)))}function _w(o,s,l){switch(s.tag){case 3:at(s,s.stateNode.containerInfo),Xo(s,Qt,o.memoizedState.cache),yl();break;case 27:case 5:ei(s);break;case 4:at(s,s.stateNode.containerInfo);break;case 10:Xo(s,s.type,s.memoizedProps.value);break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(tr(s),s.flags|=128,null):(l&s.child.childLanes)!==0?vv(o,s,l):(tr(s),o=So(o,s,l),o!==null?o.sibling:null);tr(s);break;case 19:var y=(o.flags&128)!==0;if(d=(l&s.childLanes)!==0,d||(_l(o,s,l,!1),d=(l&s.childLanes)!==0),y){if(d)return Tv(o,s,l);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),se(Xt,Xt.current),d)break;return null;case 22:case 23:return s.lanes=0,hv(o,s,l);case 24:Xo(s,Qt,o.memoizedState.cache)}return So(o,s,l)}function Ev(o,s,l){if(o!==null)if(o.memoizedProps!==s.pendingProps)nn=!0;else{if(!Mh(o,l)&&(s.flags&128)===0)return nn=!1,_w(o,s,l);nn=(o.flags&131072)!==0}else nn=!1,st&&(s.flags&1048576)!==0&&Wg(s,cc,s.index);switch(s.lanes=0,s.tag){case 16:e:{o=s.pendingProps;var d=s.elementType,y=d._init;if(d=y(d._payload),s.type=d,typeof d=="function")Bd(d)?(o=us(d,o),s.tag=1,s=gv(null,s,d,o,l)):(s.tag=0,s=Ah(null,s,d,o,l));else{if(d!=null){if(y=d.$$typeof,y===fe){s.tag=11,s=cv(null,s,d,o,l);break e}else if(y===k){s.tag=14,s=fv(null,s,d,o,l);break e}}throw s=Tt(d)||d,Error(i(306,s,""))}}return s;case 0:return Ah(o,s,s.type,s.pendingProps,l);case 1:return d=s.type,y=us(d,s.pendingProps),gv(o,s,d,y,l);case 3:e:{if(at(s,s.stateNode.containerInfo),o===null)throw Error(i(387));d=s.pendingProps;var _=s.memoizedState;y=_.element,jd(o,s),Il(s,d,null,l);var C=s.memoizedState;if(d=C.cache,Xo(s,Qt,d),d!==_.cache&&Kd(s,[Qt],l,!0),wl(),d=C.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:C.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=yv(o,s,d,l);break e}else if(d!==y){y=ri(Error(i(424)),s),vl(y),s=yv(o,s,d,l);break e}else{switch(o=s.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Vt=Ti(o.firstChild),Nn=s,st=!0,is=null,qi=!0,l=jy(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(yl(),d===y){s=So(o,s,l);break e}cn(o,s,d,l)}s=s.child}return s;case 26:return Mc(o,s),o===null?(l=w_(s.type,null,s.pendingProps,null))?s.memoizedState=l:st||(l=s.type,o=s.pendingProps,d=$c(be.current).createElement(l),d[Ie]=s,d[Oe]=o,dn(d,l,o),Ot(d),s.stateNode=d):s.memoizedState=w_(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return ei(s),o===null&&st&&(d=s.stateNode=S_(s.type,s.pendingProps,be.current),Nn=s,qi=!0,y=Vt,fr(s.type)?(cp=y,Vt=Ti(d.firstChild)):Vt=y),cn(o,s,s.pendingProps.children,l),Mc(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&st&&((y=d=Vt)&&(d=Kw(d,s.type,s.pendingProps,qi),d!==null?(s.stateNode=d,Nn=s,Vt=Ti(d.firstChild),qi=!1,y=!0):y=!1),y||os(s)),ei(s),y=s.type,_=s.pendingProps,C=o!==null?o.memoizedProps:null,d=_.children,sp(y,_)?d=null:C!==null&&sp(y,C)&&(s.flags|=32),s.memoizedState!==null&&(y=rh(o,s,fw,null,null,l),Jl._currentValue=y),Mc(o,s),cn(o,s,d,l),s.child;case 6:return o===null&&st&&((o=l=Vt)&&(l=Jw(l,s.pendingProps,qi),l!==null?(s.stateNode=l,Nn=s,Vt=null,o=!0):o=!1),o||os(s)),null;case 13:return vv(o,s,l);case 4:return at(s,s.stateNode.containerInfo),d=s.pendingProps,o===null?s.child=ra(s,null,d,l):cn(o,s,d,l),s.child;case 11:return cv(o,s,s.type,s.pendingProps,l);case 7:return cn(o,s,s.pendingProps,l),s.child;case 8:return cn(o,s,s.pendingProps.children,l),s.child;case 12:return cn(o,s,s.pendingProps.children,l),s.child;case 10:return d=s.pendingProps,Xo(s,s.type,d.value),cn(o,s,d.children,l),s.child;case 9:return y=s.type._context,d=s.pendingProps.children,ss(s),y=_n(y),d=d(y),s.flags|=1,cn(o,s,d,l),s.child;case 14:return fv(o,s,s.type,s.pendingProps,l);case 15:return dv(o,s,s.type,s.pendingProps,l);case 19:return Tv(o,s,l);case 31:return d=s.pendingProps,l=s.mode,d={mode:d.mode,children:d.children},o===null?(l=Nc(d,l),l.ref=s.ref,s.child=l,l.return=s,s=l):(l=mo(o.child,d),l.ref=s.ref,s.child=l,l.return=s,s=l),s;case 22:return hv(o,s,l);case 24:return ss(s),d=_n(Qt),o===null?(y=Xd(),y===null&&(y=Ct,_=Jd(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),s.memoizedState={parent:d,cache:y},Zd(s),Xo(s,Qt,y)):((o.lanes&l)!==0&&(jd(o,s),Il(s,null,null,l),wl()),y=o.memoizedState,_=s.memoizedState,y.parent!==d?(y={parent:d,cache:d},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Xo(s,Qt,d)):(d=_.cache,Xo(s,Qt,d),d!==y.cache&&Kd(s,[Qt],l,!0))),cn(o,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Ao(o){o.flags|=4}function Sv(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!M_(s)){if(s=ui.current,s!==null&&((tt&4194048)===tt?Gi!==null:(tt&62914560)!==tt&&(tt&536870912)===0||s!==Gi))throw Al=Wd,ry;o.flags|=8192}}function kc(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?ee():536870912,o.lanes|=s,ua|=s)}function Dl(o,s){if(!st)switch(o.tailMode){case"hidden":s=o.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function kt(o){var s=o.alternate!==null&&o.alternate.child===o.child,l=0,d=0;if(s)for(var y=o.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=d,o.childLanes=l,s}function Tw(o,s,l){var d=s.pendingProps;switch(zd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(s),null;case 1:return kt(s),null;case 3:return l=s.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),_o(Qt),Pn(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(o===null||o.child===null)&&(gl(s)?Ao(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ey())),kt(s),null;case 26:return l=s.memoizedState,o===null?(Ao(s),l!==null?(kt(s),Sv(s,l)):(kt(s),s.flags&=-16777217)):l?l!==o.memoizedState?(Ao(s),kt(s),Sv(s,l)):(kt(s),s.flags&=-16777217):(o.memoizedProps!==d&&Ao(s),kt(s),s.flags&=-16777217),null;case 27:vn(s),l=be.current;var y=s.type;if(o!==null&&s.stateNode!=null)o.memoizedProps!==d&&Ao(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return kt(s),null}o=Ce.current,gl(s)?Zg(s):(o=S_(y,d,l),s.stateNode=o,Ao(s))}return kt(s),null;case 5:if(vn(s),l=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==d&&Ao(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return kt(s),null}if(o=Ce.current,gl(s))Zg(s);else{switch(y=$c(be.current),o){case 1:o=y.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:o=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":o=y.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":o=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":o=y.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?o.multiple=!0:d.size&&(o.size=d.size);break;default:o=typeof d.is=="string"?y.createElement(l,{is:d.is}):y.createElement(l)}}o[Ie]=s,o[Oe]=d;e:for(y=s.child;y!==null;){if(y.tag===5||y.tag===6)o.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===s)break e;for(;y.sibling===null;){if(y.return===null||y.return===s)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}s.stateNode=o;e:switch(dn(o,l,d),l){case"button":case"input":case"select":case"textarea":o=!!d.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ao(s)}}return kt(s),s.flags&=-16777217,null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==d&&Ao(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(i(166));if(o=be.current,gl(s)){if(o=s.stateNode,l=s.memoizedProps,d=null,y=Nn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}o[Ie]=s,o=!!(o.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||m_(o.nodeValue,l)),o||os(s)}else o=$c(o).createTextNode(d),o[Ie]=s,s.stateNode=o}return kt(s),null;case 13:if(d=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=gl(s),d!==null&&d.dehydrated!==null){if(o===null){if(!y)throw Error(i(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Ie]=s}else yl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;kt(s),y=!1}else y=ey(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(Eo(s),s):(Eo(s),null)}if(Eo(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=d!==null,o=o!==null&&o.memoizedState!==null,l){d=s.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var _=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),_!==y&&(d.flags|=2048)}return l!==o&&l&&(s.child.flags|=8192),kc(s,s.updateQueue),kt(s),null;case 4:return Pn(),o===null&&tp(s.stateNode.containerInfo),kt(s),null;case 10:return _o(s.type),kt(s),null;case 19:if(de(Xt),y=s.memoizedState,y===null)return kt(s),null;if(d=(s.flags&128)!==0,_=y.rendering,_===null)if(d)Dl(y,!1);else{if(Lt!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(_=Rc(o),_!==null){for(s.flags|=128,Dl(y,!1),o=_.updateQueue,s.updateQueue=o,kc(s,o),s.subtreeFlags=0,o=l,l=s.child;l!==null;)Xg(l,o),l=l.sibling;return se(Xt,Xt.current&1|2),s.child}o=o.sibling}y.tail!==null&&Vn()>Vc&&(s.flags|=128,d=!0,Dl(y,!1),s.lanes=4194304)}else{if(!d)if(o=Rc(_),o!==null){if(s.flags|=128,d=!0,o=o.updateQueue,s.updateQueue=o,kc(s,o),Dl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!_.alternate&&!st)return kt(s),null}else 2*Vn()-y.renderingStartTime>Vc&&l!==536870912&&(s.flags|=128,d=!0,Dl(y,!1),s.lanes=4194304);y.isBackwards?(_.sibling=s.child,s.child=_):(o=y.last,o!==null?o.sibling=_:s.child=_,y.last=_)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Vn(),s.sibling=null,o=Xt.current,se(Xt,d?o&1|2:o&1),s):(kt(s),null);case 22:case 23:return Eo(s),ih(),d=s.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(l&536870912)!==0&&(s.flags&128)===0&&(kt(s),s.subtreeFlags&6&&(s.flags|=8192)):kt(s),l=s.updateQueue,l!==null&&kc(s,l.retryQueue),l=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==l&&(s.flags|=2048),o!==null&&de(as),null;case 24:return l=null,o!==null&&(l=o.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),_o(Qt),kt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Ew(o,s){switch(zd(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return _o(Qt),Pn(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return vn(s),null;case 13:if(Eo(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(i(340));yl()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return de(Xt),null;case 4:return Pn(),null;case 10:return _o(s.type),null;case 22:case 23:return Eo(s),ih(),o!==null&&de(as),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return _o(Qt),null;case 25:return null;default:return null}}function Av(o,s){switch(zd(s),s.tag){case 3:_o(Qt),Pn();break;case 26:case 27:case 5:vn(s);break;case 4:Pn();break;case 13:Eo(s);break;case 19:de(Xt);break;case 10:_o(s.type);break;case 22:case 23:Eo(s),ih(),o!==null&&de(as);break;case 24:_o(Qt)}}function Pl(o,s){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var y=d.next;l=y;do{if((l.tag&o)===o){d=void 0;var _=l.create,C=l.inst;d=_(),C.destroy=d}l=l.next}while(l!==y)}}catch(w){St(s,s.return,w)}}function ir(o,s,l){try{var d=s.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var _=y.next;d=_;do{if((d.tag&o)===o){var C=d.inst,w=C.destroy;if(w!==void 0){C.destroy=void 0,y=s;var D=l,$=w;try{$()}catch(Z){St(y,D,Z)}}}d=d.next}while(d!==_)}}catch(Z){St(s,s.return,Z)}}function Cv(o){var s=o.updateQueue;if(s!==null){var l=o.stateNode;try{fy(s,l)}catch(d){St(o,o.return,d)}}}function wv(o,s,l){l.props=us(o.type,o.memoizedProps),l.state=o.memoizedState;try{l.componentWillUnmount()}catch(d){St(o,s,d)}}function Vl(o,s){try{var l=o.ref;if(l!==null){switch(o.tag){case 26:case 27:case 5:var d=o.stateNode;break;case 30:d=o.stateNode;break;default:d=o.stateNode}typeof l=="function"?o.refCleanup=l(d):l.current=d}}catch(y){St(o,s,y)}}function zi(o,s){var l=o.ref,d=o.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(y){St(o,s,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){St(o,s,y)}else l.current=null}function Iv(o){var s=o.type,l=o.memoizedProps,d=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(y){St(o,o.return,y)}}function Nh(o,s,l){try{var d=o.stateNode;Gw(d,o.type,l,s),d[Oe]=s}catch(y){St(o,o.return,y)}}function Rv(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&fr(o.type)||o.tag===4}function kh(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Rv(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&fr(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Dh(o,s,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(o,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(o),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Hc));else if(d!==4&&(d===27&&fr(o.type)&&(l=o.stateNode,s=null),o=o.child,o!==null))for(Dh(o,s,l),o=o.sibling;o!==null;)Dh(o,s,l),o=o.sibling}function Dc(o,s,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,s?l.insertBefore(o,s):l.appendChild(o);else if(d!==4&&(d===27&&fr(o.type)&&(l=o.stateNode),o=o.child,o!==null))for(Dc(o,s,l),o=o.sibling;o!==null;)Dc(o,s,l),o=o.sibling}function xv(o){var s=o.stateNode,l=o.memoizedProps;try{for(var d=o.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);dn(s,d,l),s[Ie]=o,s[Oe]=l}catch(_){St(o,o.return,_)}}var Co=!1,Ft=!1,Ph=!1,bv=typeof WeakSet=="function"?WeakSet:Set,on=null;function Sw(o,s){if(o=o.containerInfo,op=Wc,o=Fg(o),kd(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var y=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var C=0,w=-1,D=-1,$=0,Z=0,ne=o,Y=null;t:for(;;){for(var K;ne!==l||y!==0&&ne.nodeType!==3||(w=C+y),ne!==_||d!==0&&ne.nodeType!==3||(D=C+d),ne.nodeType===3&&(C+=ne.nodeValue.length),(K=ne.firstChild)!==null;)Y=ne,ne=K;for(;;){if(ne===o)break t;if(Y===l&&++$===y&&(w=C),Y===_&&++Z===d&&(D=C),(K=ne.nextSibling)!==null)break;ne=Y,Y=ne.parentNode}ne=K}l=w===-1||D===-1?null:{start:w,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(rp={focusedElem:o,selectionRange:l},Wc=!1,on=s;on!==null;)if(s=on,o=s.child,(s.subtreeFlags&1024)!==0&&o!==null)o.return=s,on=o;else for(;on!==null;){switch(s=on,_=s.alternate,o=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,l=s,y=_.memoizedProps,_=_.memoizedState,d=l.stateNode;try{var Ne=us(l.type,y,l.elementType===l.type);o=d.getSnapshotBeforeUpdate(Ne,_),d.__reactInternalSnapshotBeforeUpdate=o}catch(Re){St(l,l.return,Re)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,l=o.nodeType,l===9)lp(o);else if(l===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":lp(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=s.sibling,o!==null){o.return=s.return,on=o;break}on=s.return}}function Mv(o,s,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:or(o,l),d&4&&Pl(5,l);break;case 1:if(or(o,l),d&4)if(o=l.stateNode,s===null)try{o.componentDidMount()}catch(C){St(l,l.return,C)}else{var y=us(l.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(y,s,o.__reactInternalSnapshotBeforeUpdate)}catch(C){St(l,l.return,C)}}d&64&&Cv(l),d&512&&Vl(l,l.return);break;case 3:if(or(o,l),d&64&&(o=l.updateQueue,o!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{fy(o,s)}catch(C){St(l,l.return,C)}}break;case 27:s===null&&d&4&&xv(l);case 26:case 5:or(o,l),s===null&&d&4&&Iv(l),d&512&&Vl(l,l.return);break;case 12:or(o,l);break;case 13:or(o,l),d&4&&Dv(o,l),d&64&&(o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(l=Nw.bind(null,l),Qw(o,l))));break;case 22:if(d=l.memoizedState!==null||Co,!d){s=s!==null&&s.memoizedState!==null||Ft,y=Co;var _=Ft;Co=d,(Ft=s)&&!_?rr(o,l,(l.subtreeFlags&8772)!==0):or(o,l),Co=y,Ft=_}break;case 30:break;default:or(o,l)}}function Nv(o){var s=o.alternate;s!==null&&(o.alternate=null,Nv(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&Yo(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Mt=null,Un=!1;function wo(o,s,l){for(l=l.child;l!==null;)kv(o,s,l),l=l.sibling}function kv(o,s,l){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(Rt,l)}catch{}switch(l.tag){case 26:Ft||zi(l,s),wo(o,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ft||zi(l,s);var d=Mt,y=Un;fr(l.type)&&(Mt=l.stateNode,Un=!1),wo(o,s,l),Hl(l.stateNode),Mt=d,Un=y;break;case 5:Ft||zi(l,s);case 6:if(d=Mt,y=Un,Mt=null,wo(o,s,l),Mt=d,Un=y,Mt!==null)if(Un)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(l.stateNode)}catch(_){St(l,s,_)}else try{Mt.removeChild(l.stateNode)}catch(_){St(l,s,_)}break;case 18:Mt!==null&&(Un?(o=Mt,T_(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.stateNode),Zl(o)):T_(Mt,l.stateNode));break;case 4:d=Mt,y=Un,Mt=l.stateNode.containerInfo,Un=!0,wo(o,s,l),Mt=d,Un=y;break;case 0:case 11:case 14:case 15:Ft||ir(2,l,s),Ft||ir(4,l,s),wo(o,s,l);break;case 1:Ft||(zi(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"&&wv(l,s,d)),wo(o,s,l);break;case 21:wo(o,s,l);break;case 22:Ft=(d=Ft)||l.memoizedState!==null,wo(o,s,l),Ft=d;break;default:wo(o,s,l)}}function Dv(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Zl(o)}catch(l){St(s,s.return,l)}}function Aw(o){switch(o.tag){case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new bv),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new bv),s;default:throw Error(i(435,o.tag))}}function Vh(o,s){var l=Aw(o);s.forEach(function(d){var y=kw.bind(null,o,d);l.has(d)||(l.add(d),d.then(y,y))})}function $n(o,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var y=l[d],_=o,C=s,w=C;e:for(;w!==null;){switch(w.tag){case 27:if(fr(w.type)){Mt=w.stateNode,Un=!1;break e}break;case 5:Mt=w.stateNode,Un=!1;break e;case 3:case 4:Mt=w.stateNode.containerInfo,Un=!0;break e}w=w.return}if(Mt===null)throw Error(i(160));kv(_,C,y),Mt=null,Un=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Pv(s,o),s=s.sibling}var _i=null;function Pv(o,s){var l=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:$n(s,o),Yn(o),d&4&&(ir(3,o,o.return),Pl(3,o),ir(5,o,o.return));break;case 1:$n(s,o),Yn(o),d&512&&(Ft||l===null||zi(l,l.return)),d&64&&Co&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(l=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var y=_i;if($n(s,o),Yn(o),d&512&&(Ft||l===null||zi(l,l.return)),d&4){var _=l!==null?l.memoizedState:null;if(d=o.memoizedState,l===null)if(d===null)if(o.stateNode===null){e:{d=o.type,l=o.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Rn]||_[Ie]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(d),y.head.insertBefore(_,y.querySelector("head > title"))),dn(_,d,l),_[Ie]=o,Ot(_),d=_;break e;case"link":var C=x_("link","href",y).get(d+(l.href||""));if(C){for(var w=0;w<C.length;w++)if(_=C[w],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(w,1);break t}}_=y.createElement(d),dn(_,d,l),y.head.appendChild(_);break;case"meta":if(C=x_("meta","content",y).get(d+(l.content||""))){for(w=0;w<C.length;w++)if(_=C[w],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(w,1);break t}}_=y.createElement(d),dn(_,d,l),y.head.appendChild(_);break;default:throw Error(i(468,d))}_[Ie]=o,Ot(_),d=_}o.stateNode=d}else b_(y,o.type,o.stateNode);else o.stateNode=R_(y,d,o.memoizedProps);else _!==d?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,d===null?b_(y,o.type,o.stateNode):R_(y,d,o.memoizedProps)):d===null&&o.stateNode!==null&&Nh(o,o.memoizedProps,l.memoizedProps)}break;case 27:$n(s,o),Yn(o),d&512&&(Ft||l===null||zi(l,l.return)),l!==null&&d&4&&Nh(o,o.memoizedProps,l.memoizedProps);break;case 5:if($n(s,o),Yn(o),d&512&&(Ft||l===null||zi(l,l.return)),o.flags&32){y=o.stateNode;try{ti(y,"")}catch(K){St(o,o.return,K)}}d&4&&o.stateNode!=null&&(y=o.memoizedProps,Nh(o,y,l!==null?l.memoizedProps:y)),d&1024&&(Ph=!0);break;case 6:if($n(s,o),Yn(o),d&4){if(o.stateNode===null)throw Error(i(162));d=o.memoizedProps,l=o.stateNode;try{l.nodeValue=d}catch(K){St(o,o.return,K)}}break;case 3:if(Jc=null,y=_i,_i=Yc(s.containerInfo),$n(s,o),_i=y,Yn(o),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Zl(s.containerInfo)}catch(K){St(o,o.return,K)}Ph&&(Ph=!1,Vv(o));break;case 4:d=_i,_i=Yc(o.stateNode.containerInfo),$n(s,o),Yn(o),_i=d;break;case 12:$n(s,o),Yn(o);break;case 13:$n(s,o),Yn(o),o.child.flags&8192&&o.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(qh=Vn()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Vh(o,d)));break;case 22:y=o.memoizedState!==null;var D=l!==null&&l.memoizedState!==null,$=Co,Z=Ft;if(Co=$||y,Ft=Z||D,$n(s,o),Ft=Z,Co=$,Yn(o),d&8192)e:for(s=o.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(l===null||D||Co||Ft||cs(o)),l=null,s=o;;){if(s.tag===5||s.tag===26){if(l===null){D=l=s;try{if(_=D.stateNode,y)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{w=D.stateNode;var ne=D.memoizedProps.style,Y=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(K){St(D,D.return,K)}}}else if(s.tag===6){if(l===null){D=s;try{D.stateNode.nodeValue=y?"":D.memoizedProps}catch(K){St(D,D.return,K)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=o.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Vh(o,l))));break;case 19:$n(s,o),Yn(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Vh(o,d)));break;case 30:break;case 21:break;default:$n(s,o),Yn(o)}}function Yn(o){var s=o.flags;if(s&2){try{for(var l,d=o.return;d!==null;){if(Rv(d)){l=d;break}d=d.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=kh(o);Dc(o,_,y);break;case 5:var C=l.stateNode;l.flags&32&&(ti(C,""),l.flags&=-33);var w=kh(o);Dc(o,w,C);break;case 3:case 4:var D=l.stateNode.containerInfo,$=kh(o);Dh(o,$,D);break;default:throw Error(i(161))}}catch(Z){St(o,o.return,Z)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function Vv(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;Vv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function or(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Mv(o,s.alternate,s),s=s.sibling}function cs(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:ir(4,s,s.return),cs(s);break;case 1:zi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&wv(s,s.return,l),cs(s);break;case 27:Hl(s.stateNode);case 26:case 5:zi(s,s.return),cs(s);break;case 22:s.memoizedState===null&&cs(s);break;case 30:cs(s);break;default:cs(s)}o=o.sibling}}function rr(o,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,y=o,_=s,C=_.flags;switch(_.tag){case 0:case 11:case 15:rr(y,_,l),Pl(4,_);break;case 1:if(rr(y,_,l),d=_,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch($){St(d,d.return,$)}if(d=_,y=d.updateQueue,y!==null){var w=d.stateNode;try{var D=y.shared.hiddenCallbacks;if(D!==null)for(y.shared.hiddenCallbacks=null,y=0;y<D.length;y++)cy(D[y],w)}catch($){St(d,d.return,$)}}l&&C&64&&Cv(_),Vl(_,_.return);break;case 27:xv(_);case 26:case 5:rr(y,_,l),l&&d===null&&C&4&&Iv(_),Vl(_,_.return);break;case 12:rr(y,_,l);break;case 13:rr(y,_,l),l&&C&4&&Dv(y,_);break;case 22:_.memoizedState===null&&rr(y,_,l),Vl(_,_.return);break;case 30:break;default:rr(y,_,l)}s=s.sibling}}function Lh(o,s){var l=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==l&&(o!=null&&o.refCount++,l!=null&&Tl(l))}function Uh(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&Tl(o))}function Hi(o,s,l,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Lv(o,s,l,d),s=s.sibling}function Lv(o,s,l,d){var y=s.flags;switch(s.tag){case 0:case 11:case 15:Hi(o,s,l,d),y&2048&&Pl(9,s);break;case 1:Hi(o,s,l,d);break;case 3:Hi(o,s,l,d),y&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&Tl(o)));break;case 12:if(y&2048){Hi(o,s,l,d),o=s.stateNode;try{var _=s.memoizedProps,C=_.id,w=_.onPostCommit;typeof w=="function"&&w(C,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(D){St(s,s.return,D)}}else Hi(o,s,l,d);break;case 13:Hi(o,s,l,d);break;case 23:break;case 22:_=s.stateNode,C=s.alternate,s.memoizedState!==null?_._visibility&2?Hi(o,s,l,d):Ll(o,s):_._visibility&2?Hi(o,s,l,d):(_._visibility|=2,sa(o,s,l,d,(s.subtreeFlags&10256)!==0)),y&2048&&Lh(C,s);break;case 24:Hi(o,s,l,d),y&2048&&Uh(s.alternate,s);break;default:Hi(o,s,l,d)}}function sa(o,s,l,d,y){for(y=y&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var _=o,C=s,w=l,D=d,$=C.flags;switch(C.tag){case 0:case 11:case 15:sa(_,C,w,D,y),Pl(8,C);break;case 23:break;case 22:var Z=C.stateNode;C.memoizedState!==null?Z._visibility&2?sa(_,C,w,D,y):Ll(_,C):(Z._visibility|=2,sa(_,C,w,D,y)),y&&$&2048&&Lh(C.alternate,C);break;case 24:sa(_,C,w,D,y),y&&$&2048&&Uh(C.alternate,C);break;default:sa(_,C,w,D,y)}s=s.sibling}}function Ll(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=o,d=s,y=d.flags;switch(d.tag){case 22:Ll(l,d),y&2048&&Lh(d.alternate,d);break;case 24:Ll(l,d),y&2048&&Uh(d.alternate,d);break;default:Ll(l,d)}s=s.sibling}}var Ul=8192;function aa(o){if(o.subtreeFlags&Ul)for(o=o.child;o!==null;)Uv(o),o=o.sibling}function Uv(o){switch(o.tag){case 26:aa(o),o.flags&Ul&&o.memoizedState!==null&&lI(_i,o.memoizedState,o.memoizedProps);break;case 5:aa(o);break;case 3:case 4:var s=_i;_i=Yc(o.stateNode.containerInfo),aa(o),_i=s;break;case 22:o.memoizedState===null&&(s=o.alternate,s!==null&&s.memoizedState!==null?(s=Ul,Ul=16777216,aa(o),Ul=s):aa(o));break;default:aa(o)}}function Ov(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function Ol(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];on=d,Fv(d,o)}Ov(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Bv(o),o=o.sibling}function Bv(o){switch(o.tag){case 0:case 11:case 15:Ol(o),o.flags&2048&&ir(9,o,o.return);break;case 3:Ol(o);break;case 12:Ol(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,Pc(o)):Ol(o);break;default:Ol(o)}}function Pc(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];on=d,Fv(d,o)}Ov(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:ir(8,s,s.return),Pc(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,Pc(s));break;default:Pc(s)}o=o.sibling}}function Fv(o,s){for(;on!==null;){var l=on;switch(l.tag){case 0:case 11:case 15:ir(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Tl(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,on=d;else e:for(l=o;on!==null;){d=on;var y=d.sibling,_=d.return;if(Nv(d),d===l){on=null;break e}if(y!==null){y.return=_,on=y;break e}on=_}}}var Cw={getCacheForType:function(o){var s=_n(Qt),l=s.data.get(o);return l===void 0&&(l=o(),s.data.set(o,l)),l}},ww=typeof WeakMap=="function"?WeakMap:Map,dt=0,Ct=null,Ke=null,tt=0,ht=0,Kn=null,sr=!1,la=!1,Oh=!1,Io=0,Lt=0,ar=0,fs=0,Bh=0,ci=0,ua=0,Bl=null,On=null,Fh=!1,qh=0,Vc=1/0,Lc=null,lr=null,fn=0,ur=null,ca=null,fa=0,Gh=0,zh=null,qv=null,Fl=0,Hh=null;function Jn(){if((dt&2)!==0&&tt!==0)return tt&-tt;if(X.T!==null){var o=Zs;return o!==0?o:Wh()}return xt()}function Gv(){ci===0&&(ci=(tt&536870912)===0||st?J():536870912);var o=ui.current;return o!==null&&(o.flags|=32),ci}function Qn(o,s,l){(o===Ct&&(ht===2||ht===9)||o.cancelPendingCommit!==null)&&(da(o,0),cr(o,tt,ci,!1)),pe(o,l),((dt&2)===0||o!==Ct)&&(o===Ct&&((dt&2)===0&&(fs|=l),Lt===4&&cr(o,tt,ci,!1)),$i(o))}function zv(o,s,l){if((dt&6)!==0)throw Error(i(327));var d=!l&&(s&124)===0&&(s&o.expiredLanes)===0||Mi(o,s),y=d?xw(o,s):Kh(o,s,!0),_=d;do{if(y===0){la&&!d&&cr(o,s,0,!1);break}else{if(l=o.current.alternate,_&&!Iw(l)){y=Kh(o,s,!1),_=!1;continue}if(y===2){if(_=s,o.errorRecoveryDisabledLanes&_)var C=0;else C=o.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){s=C;e:{var w=o;y=Bl;var D=w.current.memoizedState.isDehydrated;if(D&&(da(w,C).flags|=256),C=Kh(w,C,!1),C!==2){if(Oh&&!D){w.errorRecoveryDisabledLanes|=_,fs|=_,y=4;break e}_=On,On=y,_!==null&&(On===null?On=_:On.push.apply(On,_))}y=C}if(_=!1,y!==2)continue}}if(y===1){da(o,0),cr(o,s,0,!0);break}e:{switch(d=o,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:cr(d,s,ci,!sr);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(y=qh+300-Vn(),10<y)){if(cr(d,s,ci,!sr),Ho(d,0,!0)!==0)break e;d.timeoutHandle=v_(Hv.bind(null,d,l,On,Lc,Fh,s,ci,fs,ua,sr,_,2,-0,0),y);break e}Hv(d,l,On,Lc,Fh,s,ci,fs,ua,sr,_,0,-0,0)}}break}while(!0);$i(o)}function Hv(o,s,l,d,y,_,C,w,D,$,Z,ne,Y,K){if(o.timeoutHandle=-1,ne=s.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(Kl={stylesheets:null,count:0,unsuspend:aI},Uv(s),ne=uI(),ne!==null)){o.cancelPendingCommit=ne(Wv.bind(null,o,s,_,l,d,y,C,w,D,Z,1,Y,K)),cr(o,_,C,!$);return}Wv(o,s,_,l,d,y,C,w,D)}function Iw(o){for(var s=o;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var y=l[d],_=y.getSnapshot;y=y.value;try{if(!zn(_(),y))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function cr(o,s,l,d){s&=~Bh,s&=~fs,o.suspendedLanes|=s,o.pingedLanes&=~s,d&&(o.warmLanes|=s),d=o.expirationTimes;for(var y=s;0<y;){var _=31-Ut(y),C=1<<_;d[_]=-1,y&=~C}l!==0&&Me(o,l,s)}function Uc(){return(dt&6)===0?(ql(0),!1):!0}function $h(){if(Ke!==null){if(ht===0)var o=Ke.return;else o=Ke,vo=rs=null,lh(o),oa=null,Nl=0,o=Ke;for(;o!==null;)Av(o.alternate,o),o=o.return;Ke=null}}function da(o,s){var l=o.timeoutHandle;l!==-1&&(o.timeoutHandle=-1,Hw(l)),l=o.cancelPendingCommit,l!==null&&(o.cancelPendingCommit=null,l()),$h(),Ct=o,Ke=l=mo(o.current,null),tt=s,ht=0,Kn=null,sr=!1,la=Mi(o,s),Oh=!1,ua=ci=Bh=fs=ar=Lt=0,On=Bl=null,Fh=!1,(s&8)!==0&&(s|=s&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=s;0<d;){var y=31-Ut(d),_=1<<y;s|=o[y],d&=~_}return Io=s,rc(),l}function $v(o,s){He=null,X.H=Cc,s===Sl||s===pc?(s=ly(),ht=3):s===ry?(s=ly(),ht=4):ht=s===uv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Kn=s,Ke===null&&(Lt=1,bc(o,ri(s,o.current)))}function Yv(){var o=X.H;return X.H=Cc,o===null?Cc:o}function Kv(){var o=X.A;return X.A=Cw,o}function Yh(){Lt=4,sr||(tt&4194048)!==tt&&ui.current!==null||(la=!0),(ar&134217727)===0&&(fs&134217727)===0||Ct===null||cr(Ct,tt,ci,!1)}function Kh(o,s,l){var d=dt;dt|=2;var y=Yv(),_=Kv();(Ct!==o||tt!==s)&&(Lc=null,da(o,s)),s=!1;var C=Lt;e:do try{if(ht!==0&&Ke!==null){var w=Ke,D=Kn;switch(ht){case 8:$h(),C=6;break e;case 3:case 2:case 9:case 6:ui.current===null&&(s=!0);var $=ht;if(ht=0,Kn=null,ha(o,w,D,$),l&&la){C=0;break e}break;default:$=ht,ht=0,Kn=null,ha(o,w,D,$)}}Rw(),C=Lt;break}catch(Z){$v(o,Z)}while(!0);return s&&o.shellSuspendCounter++,vo=rs=null,dt=d,X.H=y,X.A=_,Ke===null&&(Ct=null,tt=0,rc()),C}function Rw(){for(;Ke!==null;)Jv(Ke)}function xw(o,s){var l=dt;dt|=2;var d=Yv(),y=Kv();Ct!==o||tt!==s?(Lc=null,Vc=Vn()+500,da(o,s)):la=Mi(o,s);e:do try{if(ht!==0&&Ke!==null){s=Ke;var _=Kn;t:switch(ht){case 1:ht=0,Kn=null,ha(o,s,_,1);break;case 2:case 9:if(sy(_)){ht=0,Kn=null,Qv(s);break}s=function(){ht!==2&&ht!==9||Ct!==o||(ht=7),$i(o)},_.then(s,s);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:sy(_)?(ht=0,Kn=null,Qv(s)):(ht=0,Kn=null,ha(o,s,_,7));break;case 5:var C=null;switch(Ke.tag){case 26:C=Ke.memoizedState;case 5:case 27:var w=Ke;if(!C||M_(C)){ht=0,Kn=null;var D=w.sibling;if(D!==null)Ke=D;else{var $=w.return;$!==null?(Ke=$,Oc($)):Ke=null}break t}}ht=0,Kn=null,ha(o,s,_,5);break;case 6:ht=0,Kn=null,ha(o,s,_,6);break;case 8:$h(),Lt=6;break e;default:throw Error(i(462))}}bw();break}catch(Z){$v(o,Z)}while(!0);return vo=rs=null,X.H=d,X.A=y,dt=l,Ke!==null?0:(Ct=null,tt=0,rc(),Lt)}function bw(){for(;Ke!==null&&!pi();)Jv(Ke)}function Jv(o){var s=Ev(o.alternate,o,Io);o.memoizedProps=o.pendingProps,s===null?Oc(o):Ke=s}function Qv(o){var s=o,l=s.alternate;switch(s.tag){case 15:case 0:s=mv(l,s,s.pendingProps,s.type,void 0,tt);break;case 11:s=mv(l,s,s.pendingProps,s.type.render,s.ref,tt);break;case 5:lh(s);default:Av(l,s),s=Ke=Xg(s,Io),s=Ev(l,s,Io)}o.memoizedProps=o.pendingProps,s===null?Oc(o):Ke=s}function ha(o,s,l,d){vo=rs=null,lh(s),oa=null,Nl=0;var y=s.return;try{if(vw(o,y,s,l,tt)){Lt=1,bc(o,ri(l,o.current)),Ke=null;return}}catch(_){if(y!==null)throw Ke=y,_;Lt=1,bc(o,ri(l,o.current)),Ke=null;return}s.flags&32768?(st||d===1?o=!0:la||(tt&536870912)!==0?o=!1:(sr=o=!0,(d===2||d===9||d===3||d===6)&&(d=ui.current,d!==null&&d.tag===13&&(d.flags|=16384))),Xv(s,o)):Oc(s)}function Oc(o){var s=o;do{if((s.flags&32768)!==0){Xv(s,sr);return}o=s.return;var l=Tw(s.alternate,s,Io);if(l!==null){Ke=l;return}if(s=s.sibling,s!==null){Ke=s;return}Ke=s=o}while(s!==null);Lt===0&&(Lt=5)}function Xv(o,s){do{var l=Ew(o.alternate,o);if(l!==null){l.flags&=32767,Ke=l;return}if(l=o.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(o=o.sibling,o!==null)){Ke=o;return}Ke=o=l}while(o!==null);Lt=6,Ke=null}function Wv(o,s,l,d,y,_,C,w,D){o.cancelPendingCommit=null;do Bc();while(fn!==0);if((dt&6)!==0)throw Error(i(327));if(s!==null){if(s===o.current)throw Error(i(177));if(_=s.lanes|s.childLanes,_|=Ud,Ve(o,l,_,C,w,D),o===Ct&&(Ke=Ct=null,tt=0),ca=s,ur=o,fa=l,Gh=_,zh=y,qv=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Dw(no,function(){return n_(),null})):(o.callbackNode=null,o.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=X.T,X.T=null,y=he.p,he.p=2,C=dt,dt|=4;try{Sw(o,s,l)}finally{dt=C,he.p=y,X.T=d}}fn=1,Zv(),jv(),e_()}}function Zv(){if(fn===1){fn=0;var o=ur,s=ca,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var d=he.p;he.p=2;var y=dt;dt|=4;try{Pv(s,o);var _=rp,C=Fg(o.containerInfo),w=_.focusedElem,D=_.selectionRange;if(C!==w&&w&&w.ownerDocument&&Bg(w.ownerDocument.documentElement,w)){if(D!==null&&kd(w)){var $=D.start,Z=D.end;if(Z===void 0&&(Z=$),"selectionStart"in w)w.selectionStart=$,w.selectionEnd=Math.min(Z,w.value.length);else{var ne=w.ownerDocument||document,Y=ne&&ne.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),Ne=w.textContent.length,Re=Math.min(D.start,Ne),_t=D.end===void 0?Re:Math.min(D.end,Ne);!K.extend&&Re>_t&&(C=_t,_t=Re,Re=C);var G=Og(w,Re),B=Og(w,_t);if(G&&B&&(K.rangeCount!==1||K.anchorNode!==G.node||K.anchorOffset!==G.offset||K.focusNode!==B.node||K.focusOffset!==B.offset)){var H=ne.createRange();H.setStart(G.node,G.offset),K.removeAllRanges(),Re>_t?(K.addRange(H),K.extend(B.node,B.offset)):(H.setEnd(B.node,B.offset),K.addRange(H))}}}}for(ne=[],K=w;K=K.parentNode;)K.nodeType===1&&ne.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ne.length;w++){var j=ne[w];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}Wc=!!op,rp=op=null}finally{dt=y,he.p=d,X.T=l}}o.current=s,fn=2}}function jv(){if(fn===2){fn=0;var o=ur,s=ca,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var d=he.p;he.p=2;var y=dt;dt|=4;try{Mv(o,s.alternate,s)}finally{dt=y,he.p=d,X.T=l}}fn=3}}function e_(){if(fn===4||fn===3){fn=0,Go();var o=ur,s=ca,l=fa,d=qv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?fn=5:(fn=0,ca=ur=null,t_(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(lr=null),mt(l),s=s.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(Rt,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=X.T,y=he.p,he.p=2,X.T=null;try{for(var _=o.onRecoverableError,C=0;C<d.length;C++){var w=d[C];_(w.value,{componentStack:w.stack})}}finally{X.T=s,he.p=y}}(fa&3)!==0&&Bc(),$i(o),y=o.pendingLanes,(l&4194090)!==0&&(y&42)!==0?o===Hh?Fl++:(Fl=0,Hh=o):Fl=0,ql(0)}}function t_(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,Tl(s)))}function Bc(o){return Zv(),jv(),e_(),n_()}function n_(){if(fn!==5)return!1;var o=ur,s=Gh;Gh=0;var l=mt(fa),d=X.T,y=he.p;try{he.p=32>l?32:l,X.T=null,l=zh,zh=null;var _=ur,C=fa;if(fn=0,ca=ur=null,fa=0,(dt&6)!==0)throw Error(i(331));var w=dt;if(dt|=4,Bv(_.current),Lv(_,_.current,C,l),dt=w,ql(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(Rt,_)}catch{}return!0}finally{he.p=y,X.T=d,t_(o,s)}}function i_(o,s,l){s=ri(l,s),s=Sh(o.stateNode,s,2),o=jo(o,s,2),o!==null&&(pe(o,2),$i(o))}function St(o,s,l){if(o.tag===3)i_(o,o,l);else for(;s!==null;){if(s.tag===3){i_(s,o,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(lr===null||!lr.has(d))){o=ri(l,o),l=av(2),d=jo(s,l,2),d!==null&&(lv(l,d,s,o),pe(d,2),$i(d));break}}s=s.return}}function Jh(o,s,l){var d=o.pingCache;if(d===null){d=o.pingCache=new ww;var y=new Set;d.set(s,y)}else y=d.get(s),y===void 0&&(y=new Set,d.set(s,y));y.has(l)||(Oh=!0,y.add(l),o=Mw.bind(null,o,s,l),s.then(o,o))}function Mw(o,s,l){var d=o.pingCache;d!==null&&d.delete(s),o.pingedLanes|=o.suspendedLanes&l,o.warmLanes&=~l,Ct===o&&(tt&l)===l&&(Lt===4||Lt===3&&(tt&62914560)===tt&&300>Vn()-qh?(dt&2)===0&&da(o,0):Bh|=l,ua===tt&&(ua=0)),$i(o)}function o_(o,s){s===0&&(s=ee()),o=Js(o,s),o!==null&&(pe(o,s),$i(o))}function Nw(o){var s=o.memoizedState,l=0;s!==null&&(l=s.retryLane),o_(o,l)}function kw(o,s){var l=0;switch(o.tag){case 13:var d=o.stateNode,y=o.memoizedState;y!==null&&(l=y.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(s),o_(o,l)}function Dw(o,s){return xi(o,s)}var Fc=null,pa=null,Qh=!1,qc=!1,Xh=!1,ds=0;function $i(o){o!==pa&&o.next===null&&(pa===null?Fc=pa=o:pa=pa.next=o),qc=!0,Qh||(Qh=!0,Vw())}function ql(o,s){if(!Xh&&qc){Xh=!0;do for(var l=!1,d=Fc;d!==null;){if(o!==0){var y=d.pendingLanes;if(y===0)var _=0;else{var C=d.suspendedLanes,w=d.pingedLanes;_=(1<<31-Ut(42|o)+1)-1,_&=y&~(C&~w),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,l_(d,_))}else _=tt,_=Ho(d,d===Ct?_:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(_&3)===0||Mi(d,_)||(l=!0,l_(d,_));d=d.next}while(l);Xh=!1}}function Pw(){r_()}function r_(){qc=Qh=!1;var o=0;ds!==0&&(zw()&&(o=ds),ds=0);for(var s=Vn(),l=null,d=Fc;d!==null;){var y=d.next,_=s_(d,s);_===0?(d.next=null,l===null?Fc=y:l.next=y,y===null&&(pa=l)):(l=d,(o!==0||(_&3)!==0)&&(qc=!0)),d=y}ql(o)}function s_(o,s){for(var l=o.suspendedLanes,d=o.pingedLanes,y=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var C=31-Ut(_),w=1<<C,D=y[C];D===-1?((w&l)===0||(w&d)!==0)&&(y[C]=an(w,s)):D<=s&&(o.expiredLanes|=w),_&=~w}if(s=Ct,l=tt,l=Ho(o,o===s?l:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d=o.callbackNode,l===0||o===s&&(ht===2||ht===9)||o.cancelPendingCommit!==null)return d!==null&&d!==null&&hi(d),o.callbackNode=null,o.callbackPriority=0;if((l&3)===0||Mi(o,l)){if(s=l&-l,s===o.callbackPriority)return s;switch(d!==null&&hi(d),mt(l)){case 2:case 8:l=zo;break;case 32:l=no;break;case 268435456:l=bi;break;default:l=no}return d=a_.bind(null,o),l=xi(l,d),o.callbackPriority=s,o.callbackNode=l,s}return d!==null&&d!==null&&hi(d),o.callbackPriority=2,o.callbackNode=null,2}function a_(o,s){if(fn!==0&&fn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var l=o.callbackNode;if(Bc()&&o.callbackNode!==l)return null;var d=tt;return d=Ho(o,o===Ct?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d===0?null:(zv(o,d,s),s_(o,Vn()),o.callbackNode!=null&&o.callbackNode===l?a_.bind(null,o):null)}function l_(o,s){if(Bc())return null;zv(o,s,!0)}function Vw(){$w(function(){(dt&6)!==0?xi(Vr,Pw):r_()})}function Wh(){return ds===0&&(ds=J()),ds}function u_(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Ls(""+o)}function c_(o,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,o.id&&l.setAttribute("form",o.id),s.parentNode.insertBefore(l,s),o=new FormData(o),l.parentNode.removeChild(l),o}function Lw(o,s,l,d,y){if(s==="submit"&&l&&l.stateNode===y){var _=u_((y[Oe]||null).action),C=d.submitter;C&&(s=(s=C[Oe]||null)?u_(s.formAction):C.getAttribute("formAction"),s!==null&&(_=s,C=null));var w=new Us("action","action",null,d,y);o.push({event:w,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ds!==0){var D=C?c_(y,C):new FormData(y);yh(l,{pending:!0,data:D,method:y.method,action:_},null,D)}}else typeof _=="function"&&(w.preventDefault(),D=C?c_(y,C):new FormData(y),yh(l,{pending:!0,data:D,method:y.method,action:_},_,D))},currentTarget:y}]})}}for(var Zh=0;Zh<Ld.length;Zh++){var jh=Ld[Zh],Uw=jh.toLowerCase(),Ow=jh[0].toUpperCase()+jh.slice(1);vi(Uw,"on"+Ow)}vi(zg,"onAnimationEnd"),vi(Hg,"onAnimationIteration"),vi($g,"onAnimationStart"),vi("dblclick","onDoubleClick"),vi("focusin","onFocus"),vi("focusout","onBlur"),vi(tw,"onTransitionRun"),vi(nw,"onTransitionStart"),vi(iw,"onTransitionCancel"),vi(Yg,"onTransitionEnd"),ro("onMouseEnter",["mouseout","mouseover"]),ro("onMouseLeave",["mouseout","mouseover"]),ro("onPointerEnter",["pointerout","pointerover"]),ro("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gl));function f_(o,s){s=(s&4)!==0;for(var l=0;l<o.length;l++){var d=o[l],y=d.event;d=d.listeners;e:{var _=void 0;if(s)for(var C=d.length-1;0<=C;C--){var w=d[C],D=w.instance,$=w.currentTarget;if(w=w.listener,D!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=$;try{_(y)}catch(Z){xc(Z)}y.currentTarget=null,_=D}else for(C=0;C<d.length;C++){if(w=d[C],D=w.instance,$=w.currentTarget,w=w.listener,D!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=$;try{_(y)}catch(Z){xc(Z)}y.currentTarget=null,_=D}}}}function Je(o,s){var l=s[ze];l===void 0&&(l=s[ze]=new Set);var d=o+"__bubble";l.has(d)||(d_(s,o,2,!1),l.add(d))}function ep(o,s,l){var d=0;s&&(d|=4),d_(l,o,d,s)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function tp(o){if(!o[Gc]){o[Gc]=!0,el.forEach(function(l){l!=="selectionchange"&&(Bw.has(l)||ep(l,!1,o),ep(l,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[Gc]||(s[Gc]=!0,ep("selectionchange",!1,s))}}function d_(o,s,l,d){switch(L_(s)){case 2:var y=dI;break;case 8:y=hI;break;default:y=mp}l=y.bind(null,s,l,o),y=void 0,!ii||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),d?y!==void 0?o.addEventListener(s,l,{capture:!0,passive:y}):o.addEventListener(s,l,!0):y!==void 0?o.addEventListener(s,l,{passive:y}):o.addEventListener(s,l,!1)}function np(o,s,l,d,y){var _=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var w=d.stateNode.containerInfo;if(w===y)break;if(C===4)for(C=d.return;C!==null;){var D=C.tag;if((D===3||D===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;w!==null;){if(C=oo(w),C===null)return;if(D=C.tag,D===5||D===6||D===26||D===27){d=_=C;continue e}w=w.parentNode}}d=d.return}Hu(function(){var $=_,Z=ni(l),ne=[];e:{var Y=Kg.get(o);if(Y!==void 0){var K=Us,Ne=o;switch(o){case"keypress":if(Li(l)===0)break e;case"keydown":case"keyup":K=zs;break;case"focusin":Ne="focus",K=Fs;break;case"focusout":Ne="blur",K=Fs;break;case"beforeblur":case"afterblur":K=Fs;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=oi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Zu;break;case zg:case Hg:case $g:K=qs;break;case Yg:K=ec;break;case"scroll":case"scrollend":K=$u;break;case"wheel":K=Hs;break;case"copy":case"cut":case"paste":K=Gs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=dl;break;case"toggle":case"beforetoggle":K=nc}var Re=(s&4)!==0,_t=!Re&&(o==="scroll"||o==="scrollend"),G=Re?Y!==null?Y+"Capture":null:Y;Re=[];for(var B=$,H;B!==null;){var j=B;if(H=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||H===null||G===null||(j=$r(B,G),j!=null&&Re.push(zl(B,j,H))),_t)break;B=B.return}0<Re.length&&(Y=new K(Y,Ne,null,l,Z),ne.push({event:Y,listeners:Re}))}}if((s&7)===0){e:{if(Y=o==="mouseover"||o==="pointerover",K=o==="mouseout"||o==="pointerout",Y&&l!==lo&&(Ne=l.relatedTarget||l.fromElement)&&(oo(Ne)||Ne[De]))break e;if((K||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(Ne=l.relatedTarget||l.toElement,K=$,Ne=Ne?oo(Ne):null,Ne!==null&&(_t=a(Ne),Re=Ne.tag,Ne!==_t||Re!==5&&Re!==27&&Re!==6)&&(Ne=null)):(K=null,Ne=$),K!==Ne)){if(Re=oi,j="onMouseLeave",G="onMouseEnter",B="mouse",(o==="pointerout"||o==="pointerover")&&(Re=dl,j="onPointerLeave",G="onPointerEnter",B="pointer"),_t=K==null?Y:ki(K),H=Ne==null?Y:ki(Ne),Y=new Re(j,B+"leave",K,l,Z),Y.target=_t,Y.relatedTarget=H,j=null,oo(Z)===$&&(Re=new Re(G,B+"enter",Ne,l,Z),Re.target=H,Re.relatedTarget=_t,j=Re),_t=j,K&&Ne)t:{for(Re=K,G=Ne,B=0,H=Re;H;H=ma(H))B++;for(H=0,j=G;j;j=ma(j))H++;for(;0<B-H;)Re=ma(Re),B--;for(;0<H-B;)G=ma(G),H--;for(;B--;){if(Re===G||G!==null&&Re===G.alternate)break t;Re=ma(Re),G=ma(G)}Re=null}else Re=null;K!==null&&h_(ne,Y,K,Re,!1),Ne!==null&&_t!==null&&h_(ne,_t,Ne,Re,!0)}}e:{if(Y=$?ki($):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var ge=kg;else if(Jt(Y))if(Dg)ge=ZC;else{ge=XC;var Ye=QC}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?$&&rl($.elementType)&&(ge=kg):ge=WC;if(ge&&(ge=ge(o,$))){po(ne,ge,l,Z);break e}Ye&&Ye(o,Y,$),o==="focusout"&&$&&Y.type==="number"&&$.memoizedProps.value!=null&&Jo(Y,"number",Y.value)}switch(Ye=$?ki($):window,o){case"focusin":(Jt(Ye)||Ye.contentEditable==="true")&&($s=Ye,Dd=$,ml=null);break;case"focusout":ml=Dd=$s=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,qg(ne,l,Z);break;case"selectionchange":if(ew)break;case"keydown":case"keyup":qg(ne,l,Z)}var Ee;if(Bi)e:{switch(o){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else je?Q(o,l)&&(xe="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(xe="onCompositionStart");xe&&(A&&l.locale!=="ko"&&(je||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&je&&(Ee=al()):(Vi=Z,Qo="value"in Vi?Vi.value:Vi.textContent,je=!0)),Ye=zc($,xe),0<Ye.length&&(xe=new cl(xe,o,null,l,Z),ne.push({event:xe,listeners:Ye}),Ee?xe.data=Ee:(Ee=ce(l),Ee!==null&&(xe.data=Ee)))),(Ee=T?Kt(o,l):et(o,l))&&(xe=zc($,"onBeforeInput"),0<xe.length&&(Ye=new cl("onBeforeInput","beforeinput",null,l,Z),ne.push({event:Ye,listeners:xe}),Ye.data=Ee)),Lw(ne,o,$,l,Z)}f_(ne,s)})}function zl(o,s,l){return{instance:o,listener:s,currentTarget:l}}function zc(o,s){for(var l=s+"Capture",d=[];o!==null;){var y=o,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=$r(o,l),y!=null&&d.unshift(zl(o,y,_)),y=$r(o,s),y!=null&&d.push(zl(o,y,_))),o.tag===3)return d;o=o.return}return[]}function ma(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function h_(o,s,l,d,y){for(var _=s._reactName,C=[];l!==null&&l!==d;){var w=l,D=w.alternate,$=w.stateNode;if(w=w.tag,D!==null&&D===d)break;w!==5&&w!==26&&w!==27||$===null||(D=$,y?($=$r(l,_),$!=null&&C.unshift(zl(l,$,D))):y||($=$r(l,_),$!=null&&C.push(zl(l,$,D)))),l=l.return}C.length!==0&&o.push({event:s,listeners:C})}var Fw=/\r\n?/g,qw=/\u0000|\uFFFD/g;function p_(o){return(typeof o=="string"?o:""+o).replace(Fw,`
`).replace(qw,"")}function m_(o,s){return s=p_(s),p_(o)===s}function Hc(){}function vt(o,s,l,d,y,_){switch(l){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||ti(o,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&ti(o,""+d);break;case"className":Di(o,"class",d);break;case"tabIndex":Di(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Di(o,l,d);break;case"style":ol(o,d,_);break;case"data":if(s!=="object"){Di(o,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||l!=="href")){o.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(l);break}d=Ls(""+d),o.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(s!=="input"&&vt(o,s,"name",y.name,y,null),vt(o,s,"formEncType",y.formEncType,y,null),vt(o,s,"formMethod",y.formMethod,y,null),vt(o,s,"formTarget",y.formTarget,y,null)):(vt(o,s,"encType",y.encType,y,null),vt(o,s,"method",y.method,y,null),vt(o,s,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(l);break}d=Ls(""+d),o.setAttribute(l,d);break;case"onClick":d!=null&&(o.onclick=Hc);break;case"onScroll":d!=null&&Je("scroll",o);break;case"onScrollEnd":d!=null&&Je("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}l=Ls(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(l,""+d):o.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(l,""):o.removeAttribute(l);break;case"capture":case"download":d===!0?o.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(l,d):o.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(l,d):o.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(l):o.setAttribute(l,d);break;case"popover":Je("beforetoggle",o),Je("toggle",o),Ko(o,"popover",d);break;case"xlinkActuate":ln(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":ln(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":ln(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":ln(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":ln(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":ln(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":ln(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":ln(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":ln(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ko(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Id.get(l)||l,Ko(o,l,d))}}function ip(o,s,l,d,y,_){switch(l){case"style":ol(o,d,_);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"children":typeof d=="string"?ti(o,d):(typeof d=="number"||typeof d=="bigint")&&ti(o,""+d);break;case"onScroll":d!=null&&Je("scroll",o);break;case"onScrollEnd":d!=null&&Je("scrollend",o);break;case"onClick":d!=null&&(o.onclick=Hc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ns.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),s=l.slice(2,y?l.length-7:void 0),_=o[Oe]||null,_=_!=null?_[l]:null,typeof _=="function"&&o.removeEventListener(s,_,y),typeof d=="function")){typeof _!="function"&&_!==null&&(l in o?o[l]=null:o.hasAttribute(l)&&o.removeAttribute(l)),o.addEventListener(s,d,y);break e}l in o?o[l]=d:d===!0?o.setAttribute(l,""):Ko(o,l,d)}}}function dn(o,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",o),Je("load",o);var d=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var C=l[_];if(C!=null)switch(_){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:vt(o,s,_,C,l,null)}}y&&vt(o,s,"srcSet",l.srcSet,l,null),d&&vt(o,s,"src",l.src,l,null);return;case"input":Je("invalid",o);var w=_=C=y=null,D=null,$=null;for(d in l)if(l.hasOwnProperty(d)){var Z=l[d];if(Z!=null)switch(d){case"name":y=Z;break;case"type":C=Z;break;case"checked":D=Z;break;case"defaultChecked":$=Z;break;case"value":_=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:vt(o,s,d,Z,l,null)}}Gr(o,_,w,D,$,C,y,!1),Vs(o);return;case"select":Je("invalid",o),d=C=_=null;for(y in l)if(l.hasOwnProperty(y)&&(w=l[y],w!=null))switch(y){case"value":_=w;break;case"defaultValue":C=w;break;case"multiple":d=w;default:vt(o,s,y,w,l,null)}s=_,l=C,o.multiple=!!d,s!=null?ao(o,!!d,s,!1):l!=null&&ao(o,!!d,l,!0);return;case"textarea":Je("invalid",o),_=y=d=null;for(C in l)if(l.hasOwnProperty(C)&&(w=l[C],w!=null))switch(C){case"value":d=w;break;case"defaultValue":y=w;break;case"children":_=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:vt(o,s,C,w,l,null)}zr(o,d,y,_),Vs(o);return;case"option":for(D in l)if(l.hasOwnProperty(D)&&(d=l[D],d!=null))switch(D){case"selected":o.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:vt(o,s,D,d,l,null)}return;case"dialog":Je("beforetoggle",o),Je("toggle",o),Je("cancel",o),Je("close",o);break;case"iframe":case"object":Je("load",o);break;case"video":case"audio":for(d=0;d<Gl.length;d++)Je(Gl[d],o);break;case"image":Je("error",o),Je("load",o);break;case"details":Je("toggle",o);break;case"embed":case"source":case"link":Je("error",o),Je("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in l)if(l.hasOwnProperty($)&&(d=l[$],d!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:vt(o,s,$,d,l,null)}return;default:if(rl(s)){for(Z in l)l.hasOwnProperty(Z)&&(d=l[Z],d!==void 0&&ip(o,s,Z,d,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(d=l[w],d!=null&&vt(o,s,w,d,l,null))}function Gw(o,s,l,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,C=null,w=null,D=null,$=null,Z=null;for(K in l){var ne=l[K];if(l.hasOwnProperty(K)&&ne!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":D=ne;default:d.hasOwnProperty(K)||vt(o,s,K,null,d,ne)}}for(var Y in d){var K=d[Y];if(ne=l[Y],d.hasOwnProperty(Y)&&(K!=null||ne!=null))switch(Y){case"type":_=K;break;case"name":y=K;break;case"checked":$=K;break;case"defaultChecked":Z=K;break;case"value":C=K;break;case"defaultValue":w=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:K!==ne&&vt(o,s,Y,K,d,ne)}}Gn(o,C,w,D,$,Z,_,y);return;case"select":K=C=w=Y=null;for(_ in l)if(D=l[_],l.hasOwnProperty(_)&&D!=null)switch(_){case"value":break;case"multiple":K=D;default:d.hasOwnProperty(_)||vt(o,s,_,null,d,D)}for(y in d)if(_=d[y],D=l[y],d.hasOwnProperty(y)&&(_!=null||D!=null))switch(y){case"value":Y=_;break;case"defaultValue":w=_;break;case"multiple":C=_;default:_!==D&&vt(o,s,y,_,d,D)}s=w,l=C,d=K,Y!=null?ao(o,!!l,Y,!1):!!d!=!!l&&(s!=null?ao(o,!!l,s,!0):ao(o,!!l,l?[]:"",!1));return;case"textarea":K=Y=null;for(w in l)if(y=l[w],l.hasOwnProperty(w)&&y!=null&&!d.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:vt(o,s,w,null,d,y)}for(C in d)if(y=d[C],_=l[C],d.hasOwnProperty(C)&&(y!=null||_!=null))switch(C){case"value":Y=y;break;case"defaultValue":K=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&vt(o,s,C,y,d,_)}gt(o,Y,K);return;case"option":for(var Ne in l)if(Y=l[Ne],l.hasOwnProperty(Ne)&&Y!=null&&!d.hasOwnProperty(Ne))switch(Ne){case"selected":o.selected=!1;break;default:vt(o,s,Ne,null,d,Y)}for(D in d)if(Y=d[D],K=l[D],d.hasOwnProperty(D)&&Y!==K&&(Y!=null||K!=null))switch(D){case"selected":o.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:vt(o,s,D,Y,d,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in l)Y=l[Re],l.hasOwnProperty(Re)&&Y!=null&&!d.hasOwnProperty(Re)&&vt(o,s,Re,null,d,Y);for($ in d)if(Y=d[$],K=l[$],d.hasOwnProperty($)&&Y!==K&&(Y!=null||K!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:vt(o,s,$,Y,d,K)}return;default:if(rl(s)){for(var _t in l)Y=l[_t],l.hasOwnProperty(_t)&&Y!==void 0&&!d.hasOwnProperty(_t)&&ip(o,s,_t,void 0,d,Y);for(Z in d)Y=d[Z],K=l[Z],!d.hasOwnProperty(Z)||Y===K||Y===void 0&&K===void 0||ip(o,s,Z,Y,d,K);return}}for(var G in l)Y=l[G],l.hasOwnProperty(G)&&Y!=null&&!d.hasOwnProperty(G)&&vt(o,s,G,null,d,Y);for(ne in d)Y=d[ne],K=l[ne],!d.hasOwnProperty(ne)||Y===K||Y==null&&K==null||vt(o,s,ne,Y,d,K)}var op=null,rp=null;function $c(o){return o.nodeType===9?o:o.ownerDocument}function g_(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function y_(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function sp(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ap=null;function zw(){var o=window.event;return o&&o.type==="popstate"?o===ap?!1:(ap=o,!0):(ap=null,!1)}var v_=typeof setTimeout=="function"?setTimeout:void 0,Hw=typeof clearTimeout=="function"?clearTimeout:void 0,__=typeof Promise=="function"?Promise:void 0,$w=typeof queueMicrotask=="function"?queueMicrotask:typeof __<"u"?function(o){return __.resolve(null).then(o).catch(Yw)}:v_;function Yw(o){setTimeout(function(){throw o})}function fr(o){return o==="head"}function T_(o,s){var l=s,d=0,y=0;do{var _=l.nextSibling;if(o.removeChild(l),_&&_.nodeType===8)if(l=_.data,l==="/$"){if(0<d&&8>d){l=d;var C=o.ownerDocument;if(l&1&&Hl(C.documentElement),l&2&&Hl(C.body),l&4)for(l=C.head,Hl(l),C=l.firstChild;C;){var w=C.nextSibling,D=C.nodeName;C[Rn]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=w}}if(y===0){o.removeChild(_),Zl(s);return}y--}else l==="$"||l==="$?"||l==="$!"?y++:d=l.charCodeAt(0)-48;else d=0;l=_}while(l);Zl(s)}function lp(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":lp(l),Yo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}o.removeChild(l)}}function Kw(o,s,l,d){for(;o.nodeType===1;){var y=l;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[Rn])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=Ti(o.nextSibling),o===null)break}return null}function Jw(o,s,l){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Ti(o.nextSibling),o===null))return null;return o}function up(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function Qw(o,s){var l=o.ownerDocument;if(o.data!=="$?"||l.readyState==="complete")s();else{var d=function(){s(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),o._reactRetry=d}}function Ti(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return o}var cp=null;function E_(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return o;s--}else l==="/$"&&s++}o=o.previousSibling}return null}function S_(o,s,l){switch(s=$c(l),o){case"html":if(o=s.documentElement,!o)throw Error(i(452));return o;case"head":if(o=s.head,!o)throw Error(i(453));return o;case"body":if(o=s.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Hl(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);Yo(o)}var fi=new Map,A_=new Set;function Yc(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Ro=he.d;he.d={f:Xw,r:Ww,D:Zw,C:jw,L:eI,m:tI,X:iI,S:nI,M:oI};function Xw(){var o=Ro.f(),s=Uc();return o||s}function Ww(o){var s=Ni(o);s!==null&&s.tag===5&&s.type==="form"?zy(s):Ro.r(o)}var ga=typeof document>"u"?null:document;function C_(o,s,l){var d=ga;if(d&&typeof s=="string"&&s){var y=Gt(s);y='link[rel="'+o+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),A_.has(y)||(A_.add(y),o={rel:o,crossOrigin:l,href:s},d.querySelector(y)===null&&(s=d.createElement("link"),dn(s,"link",o),Ot(s),d.head.appendChild(s)))}}function Zw(o){Ro.D(o),C_("dns-prefetch",o,null)}function jw(o,s){Ro.C(o,s),C_("preconnect",o,s)}function eI(o,s,l){Ro.L(o,s,l);var d=ga;if(d&&o&&s){var y='link[rel="preload"][as="'+Gt(s)+'"]';s==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+Gt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+Gt(l.imageSizes)+'"]')):y+='[href="'+Gt(o)+'"]';var _=y;switch(s){case"style":_=ya(o);break;case"script":_=va(o)}fi.has(_)||(o=v({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:o,as:s},l),fi.set(_,o),d.querySelector(y)!==null||s==="style"&&d.querySelector($l(_))||s==="script"&&d.querySelector(Yl(_))||(s=d.createElement("link"),dn(s,"link",o),Ot(s),d.head.appendChild(s)))}}function tI(o,s){Ro.m(o,s);var l=ga;if(l&&o){var d=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+Gt(d)+'"][href="'+Gt(o)+'"]',_=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=va(o)}if(!fi.has(_)&&(o=v({rel:"modulepreload",href:o},s),fi.set(_,o),l.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Yl(_)))return}d=l.createElement("link"),dn(d,"link",o),Ot(d),l.head.appendChild(d)}}}function nI(o,s,l){Ro.S(o,s,l);var d=ga;if(d&&o){var y=xn(d).hoistableStyles,_=ya(o);s=s||"default";var C=y.get(_);if(!C){var w={loading:0,preload:null};if(C=d.querySelector($l(_)))w.loading=5;else{o=v({rel:"stylesheet",href:o,"data-precedence":s},l),(l=fi.get(_))&&fp(o,l);var D=C=d.createElement("link");Ot(D),dn(D,"link",o),D._p=new Promise(function($,Z){D.onload=$,D.onerror=Z}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Kc(C,s,d)}C={type:"stylesheet",instance:C,count:1,state:w},y.set(_,C)}}}function iI(o,s){Ro.X(o,s);var l=ga;if(l&&o){var d=xn(l).hoistableScripts,y=va(o),_=d.get(y);_||(_=l.querySelector(Yl(y)),_||(o=v({src:o,async:!0},s),(s=fi.get(y))&&dp(o,s),_=l.createElement("script"),Ot(_),dn(_,"link",o),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function oI(o,s){Ro.M(o,s);var l=ga;if(l&&o){var d=xn(l).hoistableScripts,y=va(o),_=d.get(y);_||(_=l.querySelector(Yl(y)),_||(o=v({src:o,async:!0,type:"module"},s),(s=fi.get(y))&&dp(o,s),_=l.createElement("script"),Ot(_),dn(_,"link",o),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function w_(o,s,l,d){var y=(y=be.current)?Yc(y):null;if(!y)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=ya(l.href),l=xn(y).hoistableStyles,d=l.get(s),d||(d={type:"style",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){o=ya(l.href);var _=xn(y).hoistableStyles,C=_.get(o);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,C),(_=y.querySelector($l(o)))&&!_._p&&(C.instance=_,C.state.loading=5),fi.has(o)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},fi.set(o,l),_||rI(y,o,l,C.state))),s&&d===null)throw Error(i(528,""));return C}if(s&&d!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=va(l),l=xn(y).hoistableScripts,d=l.get(s),d||(d={type:"script",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function ya(o){return'href="'+Gt(o)+'"'}function $l(o){return'link[rel="stylesheet"]['+o+"]"}function I_(o){return v({},o,{"data-precedence":o.precedence,precedence:null})}function rI(o,s,l,d){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=o.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),dn(s,"link",l),Ot(s),o.head.appendChild(s))}function va(o){return'[src="'+Gt(o)+'"]'}function Yl(o){return"script[async]"+o}function R_(o,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var d=o.querySelector('style[data-href~="'+Gt(l.href)+'"]');if(d)return s.instance=d,Ot(d),d;var y=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),Ot(d),dn(d,"style",y),Kc(d,l.precedence,o),s.instance=d;case"stylesheet":y=ya(l.href);var _=o.querySelector($l(y));if(_)return s.state.loading|=4,s.instance=_,Ot(_),_;d=I_(l),(y=fi.get(y))&&fp(d,y),_=(o.ownerDocument||o).createElement("link"),Ot(_);var C=_;return C._p=new Promise(function(w,D){C.onload=w,C.onerror=D}),dn(_,"link",d),s.state.loading|=4,Kc(_,l.precedence,o),s.instance=_;case"script":return _=va(l.src),(y=o.querySelector(Yl(_)))?(s.instance=y,Ot(y),y):(d=l,(y=fi.get(_))&&(d=v({},l),dp(d,y)),o=o.ownerDocument||o,y=o.createElement("script"),Ot(y),dn(y,"link",d),o.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,Kc(d,l.precedence,o));return s.instance}function Kc(o,s,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,_=y,C=0;C<d.length;C++){var w=d[C];if(w.dataset.precedence===s)_=w;else if(_!==y)break}_?_.parentNode.insertBefore(o,_.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(o,s.firstChild))}function fp(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function dp(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var Jc=null;function x_(o,s,l){if(Jc===null){var d=new Map,y=Jc=new Map;y.set(l,d)}else y=Jc,d=y.get(l),d||(d=new Map,y.set(l,d));if(d.has(o))return d;for(d.set(o,null),l=l.getElementsByTagName(o),y=0;y<l.length;y++){var _=l[y];if(!(_[Rn]||_[Ie]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(s)||"";C=o+C;var w=d.get(C);w?w.push(_):d.set(C,[_])}}return d}function b_(o,s,l){o=o.ownerDocument||o,o.head.insertBefore(l,s==="title"?o.querySelector("head > title"):null)}function sI(o,s,l){if(l===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return o=s.disabled,typeof s.precedence=="string"&&o==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function M_(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Kl=null;function aI(){}function lI(o,s,l){if(Kl===null)throw Error(i(475));var d=Kl;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var y=ya(l.href),_=o.querySelector($l(y));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(d.count++,d=Qc.bind(d),o.then(d,d)),s.state.loading|=4,s.instance=_,Ot(_);return}_=o.ownerDocument||o,l=I_(l),(y=fi.get(y))&&fp(l,y),_=_.createElement("link"),Ot(_);var C=_;C._p=new Promise(function(w,D){C.onload=w,C.onerror=D}),dn(_,"link",l),s.instance=_}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(s,o),(o=s.state.preload)&&(s.state.loading&3)===0&&(d.count++,s=Qc.bind(d),o.addEventListener("load",s),o.addEventListener("error",s))}}function uI(){if(Kl===null)throw Error(i(475));var o=Kl;return o.stylesheets&&o.count===0&&hp(o,o.stylesheets),0<o.count?function(s){var l=setTimeout(function(){if(o.stylesheets&&hp(o,o.stylesheets),o.unsuspend){var d=o.unsuspend;o.unsuspend=null,d()}},6e4);return o.unsuspend=s,function(){o.unsuspend=null,clearTimeout(l)}}:null}function Qc(){if(this.count--,this.count===0){if(this.stylesheets)hp(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Xc=null;function hp(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Xc=new Map,s.forEach(cI,o),Xc=null,Qc.call(o))}function cI(o,s){if(!(s.state.loading&4)){var l=Xc.get(o);if(l)var d=l.get(null);else{l=new Map,Xc.set(o,l);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var C=y[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),d=C)}d&&l.set(null,d)}y=s.instance,C=y.getAttribute("data-precedence"),_=l.get(C)||d,_===d&&l.set(null,y),l.set(C,y),this.count++,d=Qc.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),_?_.parentNode.insertBefore(y,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),s.state.loading|=4}}var Jl={$$typeof:ie,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function fI(o,s,l,d,y,_,C,w){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=te(0),this.hiddenUpdates=te(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function N_(o,s,l,d,y,_,C,w,D,$,Z,ne){return o=new fI(o,s,l,C,w,D,$,ne),s=1,_===!0&&(s|=24),_=Hn(3,null,null,s),o.current=_,_.stateNode=o,s=Jd(),s.refCount++,o.pooledCache=s,s.refCount++,_.memoizedState={element:d,isDehydrated:l,cache:s},Zd(_),o}function k_(o){return o?(o=Qs,o):Qs}function D_(o,s,l,d,y,_){y=k_(y),d.context===null?d.context=y:d.pendingContext=y,d=Zo(s),d.payload={element:l},_=_===void 0?null:_,_!==null&&(d.callback=_),l=jo(o,d,s),l!==null&&(Qn(l,o,s),Cl(l,o,s))}function P_(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<s?l:s}}function pp(o,s){P_(o,s),(o=o.alternate)&&P_(o,s)}function V_(o){if(o.tag===13){var s=Js(o,67108864);s!==null&&Qn(s,o,67108864),pp(o,67108864)}}var Wc=!0;function dI(o,s,l,d){var y=X.T;X.T=null;var _=he.p;try{he.p=2,mp(o,s,l,d)}finally{he.p=_,X.T=y}}function hI(o,s,l,d){var y=X.T;X.T=null;var _=he.p;try{he.p=8,mp(o,s,l,d)}finally{he.p=_,X.T=y}}function mp(o,s,l,d){if(Wc){var y=gp(d);if(y===null)np(o,s,d,Zc,l),U_(o,d);else if(mI(y,o,s,l,d))d.stopPropagation();else if(U_(o,d),s&4&&-1<pI.indexOf(o)){for(;y!==null;){var _=Ni(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=qn(_.pendingLanes);if(C!==0){var w=_;for(w.pendingLanes|=2,w.entangledLanes|=2;C;){var D=1<<31-Ut(C);w.entanglements[1]|=D,C&=~D}$i(_),(dt&6)===0&&(Vc=Vn()+500,ql(0))}}break;case 13:w=Js(_,2),w!==null&&Qn(w,_,2),Uc(),pp(_,2)}if(_=gp(d),_===null&&np(o,s,d,Zc,l),_===y)break;y=_}y!==null&&d.stopPropagation()}else np(o,s,d,null,l)}}function gp(o){return o=ni(o),yp(o)}var Zc=null;function yp(o){if(Zc=null,o=oo(o),o!==null){var s=a(o);if(s===null)o=null;else{var l=s.tag;if(l===13){if(o=c(s),o!==null)return o;o=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return Zc=o,null}function L_(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Za()){case Vr:return 2;case zo:return 8;case no:case Lr:return 32;case bi:return 268435456;default:return 32}default:return 32}}var vp=!1,dr=null,hr=null,pr=null,Ql=new Map,Xl=new Map,mr=[],pI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U_(o,s){switch(o){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":Ql.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(s.pointerId)}}function Wl(o,s,l,d,y,_){return o===null||o.nativeEvent!==_?(o={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:_,targetContainers:[y]},s!==null&&(s=Ni(s),s!==null&&V_(s)),o):(o.eventSystemFlags|=d,s=o.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),o)}function mI(o,s,l,d,y){switch(s){case"focusin":return dr=Wl(dr,o,s,l,d,y),!0;case"dragenter":return hr=Wl(hr,o,s,l,d,y),!0;case"mouseover":return pr=Wl(pr,o,s,l,d,y),!0;case"pointerover":var _=y.pointerId;return Ql.set(_,Wl(Ql.get(_)||null,o,s,l,d,y)),!0;case"gotpointercapture":return _=y.pointerId,Xl.set(_,Wl(Xl.get(_)||null,o,s,l,d,y)),!0}return!1}function O_(o){var s=oo(o.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){o.blockedOn=s,bt(o.priority,function(){if(l.tag===13){var d=Jn();d=Ge(d);var y=Js(l,d);y!==null&&Qn(y,l,d),pp(l,d)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function jc(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var l=gp(o.nativeEvent);if(l===null){l=o.nativeEvent;var d=new l.constructor(l.type,l);lo=d,l.target.dispatchEvent(d),lo=null}else return s=Ni(l),s!==null&&V_(s),o.blockedOn=l,!1;s.shift()}return!0}function B_(o,s,l){jc(o)&&l.delete(s)}function gI(){vp=!1,dr!==null&&jc(dr)&&(dr=null),hr!==null&&jc(hr)&&(hr=null),pr!==null&&jc(pr)&&(pr=null),Ql.forEach(B_),Xl.forEach(B_)}function ef(o,s){o.blockedOn===s&&(o.blockedOn=null,vp||(vp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,gI)))}var tf=null;function F_(o){tf!==o&&(tf=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){tf===o&&(tf=null);for(var s=0;s<o.length;s+=3){var l=o[s],d=o[s+1],y=o[s+2];if(typeof d!="function"){if(yp(d||l)===null)continue;break}var _=Ni(l);_!==null&&(o.splice(s,3),s-=3,yh(_,{pending:!0,data:y,method:l.method,action:d},d,y))}}))}function Zl(o){function s(D){return ef(D,o)}dr!==null&&ef(dr,o),hr!==null&&ef(hr,o),pr!==null&&ef(pr,o),Ql.forEach(s),Xl.forEach(s);for(var l=0;l<mr.length;l++){var d=mr[l];d.blockedOn===o&&(d.blockedOn=null)}for(;0<mr.length&&(l=mr[0],l.blockedOn===null);)O_(l),l.blockedOn===null&&mr.shift();if(l=(o.ownerDocument||o).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var y=l[d],_=l[d+1],C=y[Oe]||null;if(typeof _=="function")C||F_(l);else if(C){var w=null;if(_&&_.hasAttribute("formAction")){if(y=_,C=_[Oe]||null)w=C.formAction;else if(yp(y)!==null)continue}else w=C.action;typeof w=="function"?l[d+1]=w:(l.splice(d,3),d-=3),F_(l)}}}function _p(o){this._internalRoot=o}nf.prototype.render=_p.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,d=Jn();D_(l,d,o,s,null,null)},nf.prototype.unmount=_p.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;D_(o.current,2,null,o,null,null),Uc(),s[De]=null}};function nf(o){this._internalRoot=o}nf.prototype.unstable_scheduleHydration=function(o){if(o){var s=xt();o={blockedOn:null,target:o,priority:s};for(var l=0;l<mr.length&&s!==0&&s<mr[l].priority;l++);mr.splice(l,0,o),l===0&&O_(o)}};var q_=e.version;if(q_!=="19.1.1")throw Error(i(527,q_,"19.1.1"));he.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=m(s),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var yI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var of=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!of.isDisabled&&of.supportsFiber)try{Rt=of.inject(yI),rt=of}catch{}}return eu.createRoot=function(o,s){if(!r(o))throw Error(i(299));var l=!1,d="",y=iv,_=ov,C=rv,w=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=N_(o,1,!1,null,null,l,d,y,_,C,w,null),o[De]=s.current,tp(o),new _p(s)},eu.hydrateRoot=function(o,s,l){if(!r(o))throw Error(i(299));var d=!1,y="",_=iv,C=ov,w=rv,D=null,$=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(D=l.unstable_transitionCallbacks),l.formState!==void 0&&($=l.formState)),s=N_(o,1,!0,s,l??null,d,y,_,C,w,D,$),s.context=k_(null),l=s.current,d=Jn(),d=Ge(d),y=Zo(d),y.callback=null,jo(l,y,d),l=d,s.current.lanes=l,pe(s,l),$i(s),o[De]=s.current,tp(o),new nf(s)},eu.version="19.1.1",eu}var W_;function bI(){if(W_)return Sp.exports;W_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Sp.exports=xI(),Sp.exports}var MI=bI();const NI=B0(MI),kI="modulepreload",DI=function(t,e){return new URL(t,e).href},Z_={},F0=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){let c=function(v){return Promise.all(v.map(E=>Promise.resolve(E).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};const h=document.getElementsByTagName("link"),m=document.querySelector("meta[property=csp-nonce]"),p=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));r=c(n.map(v=>{if(v=DI(v,i),v in Z_)return;Z_[v]=!0;const E=v.endsWith(".css"),S=E?'[rel="stylesheet"]':"";if(!!i)for(let L=h.length-1;L>=0;L--){const F=h[L];if(F.href===v&&(!E||F.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${S}`))return;const x=document.createElement("link");if(x.rel=E?"stylesheet":kI,E||(x.as="script"),x.crossOrigin="",x.href=v,p&&x.setAttribute("nonce",p),document.head.appendChild(x),E)return new Promise((L,F)=>{x.addEventListener("load",L),x.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${v}`)))})}))}function a(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return r.then(c=>{for(const h of c||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})},Si={openai:{name:"GPT-4o + DALL-E",icon:"",color:"text-emerald-400"},gemini:{name:"Gemini Flash",icon:"",color:"text-blue-400"},claude:{name:"Claude Sonnet",icon:"",color:"text-purple-400"},auto:{name:"Smart Auto",icon:"",color:"text-cyan-400"}},PI={photorealistic:" Ultra-realistic",artistic:" Artistic Nigerian",cyberpunk:" Cyber-Lagos",anime:" Anime style"},q0="gemini-2.5-flash",VI="gpt-4o",LI="claude-3-sonnet-20240229",rf="default",Xn={default:{name:"Lagos Oracle (Default)",icon:"",description:"Your standard, knowledgeable Lagos Oracle.",systemPromptModifier:"",color:"text-yellow-400"},emeka:{name:"Emeka (Igbo Insight)",icon:"",description:"Wise, with a touch of Igbo flair and proverbs.",systemPromptModifier:"You are Emeka, a wise individual with deep roots in Igbo culture, now navigating Lagos. Your responses often carry a touch of Igbo flair, and you might naturally use common Igbo greetings (like 'Nno'), phrases, or proverbs if the context allows. You offer thoughtful and insightful perspectives on various matters.",color:"text-green-400"},femi:{name:"Femi (Yorb Poise)",icon:"",description:"Confident, sharp, Yorb man from Lagos.",systemPromptModifier:"You are Femi, a confident and articulate Yorb man, born and raised in the heart of Lagos. Your responses are sharp, informed, and carry the cadence of a true Lagosian with deep Yorb heritage. You may incorporate Yorb proverbs (we), sayings, or greetings (like ' n l o') when fitting, showcasing pride in your culture.",color:"text-blue-400"},anita:{name:"Anita (Shakara Queen)",icon:"",description:"Playful, sassy, full of Lagos street smarts and slang.",systemPromptModifier:"You are Anita, the ultimate Lagos 'Shakara Queen'  playful, a bit sassy, and overflowing with street smarts. You communicate using contemporary Lagos slang and Pidgin English naturally and freely. You 'tell it like it is,' often with a humorous or witty twist, but always keeping it real.",color:"text-pink-400"},muhammed:{name:"Muhammed (Northern Calm)",icon:"",description:"Calm, thoughtful, with a Northern Nigerian perspective.",systemPromptModifier:"You are Muhammed, a calm and thoughtful individual with a perspective enriched by Northern Nigerian upbringing and Hausa culture, now experiencing Lagos life. Your responses are measured, respectful, and you might use Hausa greetings (like 'Sannu') or expressions if it feels natural. You bring a sense of peace and consideration to your interactions.",color:"text-teal-400"}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let UI,OI;function BI(){return{geminiUrl:UI,vertexUrl:OI}}function FI(t,e,n,i){var r,a;if(!(t!=null&&t.baseUrl)){const c=BI();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:n:(a=c.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ws{}function Te(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(t,e,n){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const m=t[h];if(Array.isArray(n))for(let p=0;p<m.length;p++){const v=m[p];f(v,e.slice(a+1),n[p])}else for(const p of m)f(p,e.slice(a+1),n)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const m=t[h];f(m[0],e.slice(a+1),n);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=n}function u(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in t){const a=t[r];return Array.isArray(a)?a.map(c=>u(c,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var j_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(j_||(j_={}));var eT;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(eT||(eT={}));var Sr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Sr||(Sr={}));var Ji;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Ji||(Ji={}));var tT;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(tT||(tT={}));var Qi;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Qi||(Qi={}));var nT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(nT||(nT={}));var iT;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(iT||(iT={}));var oT;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(oT||(oT={}));var rT;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(rT||(rT={}));var sT;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(sT||(sT={}));var aT;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(aT||(aT={}));var lT;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(lT||(lT={}));var uT;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(uT||(uT={}));var cT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(cT||(cT={}));var fT;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(fT||(fT={}));var bf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(bf||(bf={}));var dT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(dT||(dT={}));var Fp;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Fp||(Fp={}));var hT;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(hT||(hT={}));var pT;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(pT||(pT={}));var mT;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(mT||(mT={}));var gT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(gT||(gT={}));var yT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(yT||(yT={}));var vT;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(vT||(vT={}));var _T;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(_T||(_T={}));var TT;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(TT||(TT={}));var ET;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ET||(ET={}));var ST;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ST||(ST={}));var AT;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(AT||(AT={}));var CT;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(CT||(CT={}));var wT;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(wT||(wT={}));var IT;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(IT||(IT={}));var RT;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(RT||(RT={}));var xT;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(xT||(xT={}));var bT;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(bT||(bT={}));var MT;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(MT||(MT={}));var NT;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(NT||(NT={}));var kT;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(kT||(kT={}));var DT;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(DT||(DT={}));var PT;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(PT||(PT={}));var VT;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(VT||(VT={}));var Ca;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ca||(Ca={}));class qp{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class tu{get text(){var e,n,i,r,a,c,h,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const E=[];for(const S of(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[I,x]of Object.entries(S))I!=="text"&&I!=="thought"&&(x!==null||x!==void 0)&&E.push(I);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,n,i,r,a,c,h,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const E of(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[S,I]of Object.entries(E))S!=="inlineData"&&(I!==null||I!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,i,r,a,c,h,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,i,r,a,c,h,m,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,i,r,a,c,h,m,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class LT{}class UT{}class qI{}class GI{}class zI{}class OT{}class BT{}class FT{}class HI{}class qT{}class GT{}class zT{}class HT{}class $I{}class YI{}class KI{}class $T{}class JI{get text(){var e,n,i;let r="",a=!1;const c=[];for(const h of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[m,p]of Object.entries(h))m!=="text"&&m!=="thought"&&p!==null&&c.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,r+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,i;let r="";const a=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[h,m]of Object.entries(c))h!=="inlineData"&&m!==null&&a.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Mf{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const i=new Mf;if(i.name=e.name,i.metadata=e.metadata,i.done=e.done,i.error=e.error,n){const r=e.response;if(r){const a=new qT,c=r.videos;a.generatedVideos=c==null?void 0:c.map(h=>({video:{uri:h.gcsUri,videoBytes:h.bytesBase64Encoded?Bp(h.bytesBase64Encoded):void 0,mimeType:h.mimeType}})),a.raiMediaFilteredCount=r.raiMediaFilteredCount,a.raiMediaFilteredReasons=r.raiMediaFilteredReasons,i.response=a}}else{const r=e.response;if(r){const a=new qT,c=r.generateVideoResponse,h=c==null?void 0:c.generatedSamples;a.generatedVideos=h==null?void 0:h.map(m=>{const p=m.video;return{video:{uri:p==null?void 0:p.uri,videoBytes:p!=null&&p.encodedVideo?Bp(p==null?void 0:p.encodedVideo):void 0,mimeType:m.encoding}}}),a.raiMediaFilteredCount=c==null?void 0:c.raiMediaFilteredCount,a.raiMediaFilteredReasons=c==null?void 0:c.raiMediaFilteredReasons,i.response=a}}return i}}class QI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ct(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function G0(t,e){const n=ct(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function z0(t){return Array.isArray(t)?t.map(e=>Nf(e)):[Nf(t)]}function Nf(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function H0(t){const e=Nf(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $0(t){const e=Nf(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function YT(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Y0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>YT(e)):[YT(t)]}function Gp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function KT(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function JT(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Cn(t){if(t==null)throw new Error("ContentUnion is required");return Gp(t)?t:{role:"user",parts:Y0(t)}}function K0(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Cn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Cn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Cn(n)):[Cn(e)]}function di(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(KT(t)||JT(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Cn(t)]}const e=[],n=[],i=Gp(t[0]);for(const r of t){const a=Gp(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(KT(r)||JT(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:Y0(n)}),e}function XI(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Sr).includes(n[0].toUpperCase())?n[0].toUpperCase():Sr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Sr).includes(i.toUpperCase())?i.toUpperCase():Sr.TYPE_UNSPECIFIED})}}function wa(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&XI(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Sr).includes(h.toUpperCase())?h.toUpperCase():Sr.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=wa(h);else if(i.includes(c)){const m=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}m.push(wa(p))}e[c]=m}else if(r.includes(c)){const m={};for(const[p,v]of Object.entries(h))m[p]=wa(v);e[c]=m}else{if(c==="additionalProperties")continue;e[c]=h}return e}function xm(t){return wa(t)}function bm(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Mm(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Fa(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=wa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=wa(e.response));return t}function qa(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function WI(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Fo(t,e){if(typeof e!="string")throw new Error("name must be a string");return WI(t,e,"cachedContents")}function J0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Is(t){return Bp(t)}function ZI(t){return t!=null&&typeof t=="object"&&"name"in t}function jI(t){return t!=null&&typeof t=="object"&&"video"in t}function eR(t){return t!=null&&typeof t=="object"&&"uri"in t}function Q0(t){var e;let n;if(ZI(t)&&(n=t.name),!(eR(t)&&(n=t.uri,n===void 0))&&!(jI(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function X0(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function W0(t){for(const e of["models","tunedModels","publisherModels"])if(tR(t,e))return t[e];return[]}function tR(t,e){return t!==null&&typeof t=="object"&&e in t}function nR(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function iR(t,e={}){const n=[],i=new Set;for(const r of t){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const c=nR(r,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function Z0(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function oR(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ga(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function j0(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rR(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function sR(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function aR(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function lR(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],rR(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],sR(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],aR(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function eS(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>lR(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function uR(t){const e={},n=u(t,["anyOf"]);n!=null&&f(e,["anyOf"],n);const i=u(t,["default"]);i!=null&&f(e,["default"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["enum"]);a!=null&&f(e,["enum"],a);const c=u(t,["example"]);c!=null&&f(e,["example"],c);const h=u(t,["format"]);h!=null&&f(e,["format"],h);const m=u(t,["items"]);m!=null&&f(e,["items"],m);const p=u(t,["maxItems"]);p!=null&&f(e,["maxItems"],p);const v=u(t,["maxLength"]);v!=null&&f(e,["maxLength"],v);const E=u(t,["maxProperties"]);E!=null&&f(e,["maxProperties"],E);const S=u(t,["maximum"]);S!=null&&f(e,["maximum"],S);const I=u(t,["minItems"]);I!=null&&f(e,["minItems"],I);const x=u(t,["minLength"]);x!=null&&f(e,["minLength"],x);const L=u(t,["minProperties"]);L!=null&&f(e,["minProperties"],L);const F=u(t,["minimum"]);F!=null&&f(e,["minimum"],F);const re=u(t,["nullable"]);re!=null&&f(e,["nullable"],re);const oe=u(t,["pattern"]);oe!=null&&f(e,["pattern"],oe);const ie=u(t,["properties"]);ie!=null&&f(e,["properties"],ie);const fe=u(t,["propertyOrdering"]);fe!=null&&f(e,["propertyOrdering"],fe);const ae=u(t,["required"]);ae!=null&&f(e,["required"],ae);const me=u(t,["title"]);me!=null&&f(e,["title"],me);const k=u(t,["type"]);return k!=null&&f(e,["type"],k),e}function cR(t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(t,["category"]);n!=null&&f(e,["category"],n);const i=u(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function fR(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function dR(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function hR(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],dR(n)),e}function pR(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function mR(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],pR(n)),e}function gR(){return{}}function yR(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>fR(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],hR(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],mR(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],gR());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function vR(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function _R(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function TR(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],_R(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function ER(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],vR(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],TR(i)),e}function SR(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function tS(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],SR(n)),e}function AR(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],tS(i)),e}function CR(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>AR(r))),f(e,["speakerVoiceConfigs"],i)}return e}function wR(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],tS(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],CR(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function IR(t){const e={},n=u(t,["includeThoughts"]);n!=null&&f(e,["includeThoughts"],n);const i=u(t,["thinkingBudget"]);return i!=null&&f(e,["thinkingBudget"],i),e}function RR(t,e,n){const i={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],eS(Cn(r)));const a=u(e,["temperature"]);a!=null&&f(i,["temperature"],a);const c=u(e,["topP"]);c!=null&&f(i,["topP"],c);const h=u(e,["topK"]);h!=null&&f(i,["topK"],h);const m=u(e,["candidateCount"]);m!=null&&f(i,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&f(i,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&f(i,["stopSequences"],v);const E=u(e,["responseLogprobs"]);E!=null&&f(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&f(i,["logprobs"],S);const I=u(e,["presencePenalty"]);I!=null&&f(i,["presencePenalty"],I);const x=u(e,["frequencyPenalty"]);x!=null&&f(i,["frequencyPenalty"],x);const L=u(e,["seed"]);L!=null&&f(i,["seed"],L);const F=u(e,["responseMimeType"]);F!=null&&f(i,["responseMimeType"],F);const re=u(e,["responseSchema"]);re!=null&&f(i,["responseSchema"],uR(xm(re)));const oe=u(e,["responseJsonSchema"]);if(oe!=null&&f(i,["responseJsonSchema"],oe),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ie=u(e,["safetySettings"]);if(n!==void 0&&ie!=null){let N=ie;Array.isArray(N)&&(N=N.map(q=>cR(q))),f(n,["safetySettings"],N)}const fe=u(e,["tools"]);if(n!==void 0&&fe!=null){let N=qa(fe);Array.isArray(N)&&(N=N.map(q=>yR(Fa(q)))),f(n,["tools"],N)}const ae=u(e,["toolConfig"]);if(n!==void 0&&ae!=null&&f(n,["toolConfig"],ER(ae)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const me=u(e,["cachedContent"]);n!==void 0&&me!=null&&f(n,["cachedContent"],Fo(t,me));const k=u(e,["responseModalities"]);k!=null&&f(i,["responseModalities"],k);const M=u(e,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);const b=u(e,["speechConfig"]);if(b!=null&&f(i,["speechConfig"],wR(bm(b))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=u(e,["thinkingConfig"]);return V!=null&&f(i,["thinkingConfig"],IR(V)),i}function xR(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["request","model"],ct(t,i));const r=u(e,["contents"]);if(r!=null){let c=di(r);Array.isArray(c)&&(c=c.map(h=>eS(h))),f(n,["request","contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["request","generationConfig"],RR(t,a,n)),n}function bR(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=u(e,["fileName"]);i!=null&&f(n,["fileName"],i);const r=u(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>xR(t,c))),f(n,["requests","requests"],a)}return n}function MR(t,e){const n={},i=u(t,["displayName"]);if(e!==void 0&&i!=null&&f(e,["batch","displayName"],i),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function NR(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["src"]);r!=null&&f(n,["batch","inputConfig"],bR(t,Z0(t,r)));const a=u(e,["config"]);return a!=null&&f(n,["config"],MR(a,n)),n}function kR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ga(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function DR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ga(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function PR(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);if(e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function VR(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],PR(n,e)),e}function LR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ga(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function UR(t){const e={},n=u(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const i=u(t,["gcsUri"]);i!=null&&f(e,["gcsSource","uris"],i);const r=u(t,["bigqueryUri"]);if(r!=null&&f(e,["bigquerySource","inputUri"],r),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function OR(t){const e={},n=u(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const i=u(t,["gcsUri"]);i!=null&&f(e,["gcsDestination","outputUriPrefix"],i);const r=u(t,["bigqueryUri"]);if(r!=null&&f(e,["bigqueryDestination","outputUri"],r),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function BR(t,e){const n={},i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=u(t,["dest"]);return e!==void 0&&r!=null&&f(e,["outputConfig"],OR(oR(r))),n}function FR(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["model"],ct(t,i));const r=u(e,["src"]);r!=null&&f(n,["inputConfig"],UR(Z0(t,r)));const a=u(e,["config"]);return a!=null&&f(n,["config"],BR(a,n)),n}function qR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ga(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function GR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ga(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function zR(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=u(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function HR(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],zR(n,e)),e}function $R(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ga(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function YR(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function KR(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function JR(t){const e={},n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function QR(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],YR(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],KR(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],JR(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function XR(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>QR(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function WR(t){const e={},n=u(t,["citationSources"]);return n!=null&&f(e,["citations"],n),e}function ZR(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function jR(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>ZR(r))),f(e,["urlMetadata"],i)}return e}function ex(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],XR(n));const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],WR(i));const r=u(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const a=u(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=u(t,["urlContextMetadata"]);c!=null&&f(e,["urlContextMetadata"],jR(c));const h=u(t,["avgLogprobs"]);h!=null&&f(e,["avgLogprobs"],h);const m=u(t,["groundingMetadata"]);m!=null&&f(e,["groundingMetadata"],m);const p=u(t,["index"]);p!=null&&f(e,["index"],p);const v=u(t,["logprobsResult"]);v!=null&&f(e,["logprobsResult"],v);const E=u(t,["safetyRatings"]);return E!=null&&f(e,["safetyRatings"],E),e}function tx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>ex(p))),f(e,["candidates"],m)}const r=u(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const a=u(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=u(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=u(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function nS(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["code"]);i!=null&&f(e,["code"],i);const r=u(t,["message"]);return r!=null&&f(e,["message"],r),e}function nx(t){const e={},n=u(t,["response"]);n!=null&&f(e,["response"],tx(n));const i=u(t,["error"]);return i!=null&&f(e,["error"],nS(i)),e}function ix(t){const e={},n=u(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const i=u(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>nx(a))),f(e,["inlinedResponses"],r)}return e}function zp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata","displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["metadata","state"]);r!=null&&f(e,["state"],j0(r));const a=u(t,["metadata","createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=u(t,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const m=u(t,["metadata","model"]);m!=null&&f(e,["model"],m);const p=u(t,["metadata","output"]);return p!=null&&f(e,["dest"],ix(p)),e}function ox(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>zp(c))),f(e,["batchJobs"],a)}return e}function rx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);return a!=null&&f(e,["error"],nS(a)),e}function iS(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["code"]);i!=null&&f(e,["code"],i);const r=u(t,["message"]);return r!=null&&f(e,["message"],r),e}function sx(t){const e={},n=u(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const i=u(t,["gcsSource","uris"]);i!=null&&f(e,["gcsUri"],i);const r=u(t,["bigquerySource","inputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function ax(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const i=u(t,["gcsDestination","outputUriPrefix"]);i!=null&&f(e,["gcsUri"],i);const r=u(t,["bigqueryDestination","outputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function Hp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["state"]);r!=null&&f(e,["state"],j0(r));const a=u(t,["error"]);a!=null&&f(e,["error"],iS(a));const c=u(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=u(t,["startTime"]);h!=null&&f(e,["startTime"],h);const m=u(t,["endTime"]);m!=null&&f(e,["endTime"],m);const p=u(t,["updateTime"]);p!=null&&f(e,["updateTime"],p);const v=u(t,["model"]);v!=null&&f(e,["model"],v);const E=u(t,["inputConfig"]);E!=null&&f(e,["src"],sx(E));const S=u(t,["outputConfig"]);return S!=null&&f(e,["dest"],ax(S)),e}function lx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>Hp(c))),f(e,["batchJobs"],a)}return e}function ux(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);return a!=null&&f(e,["error"],iS(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(vs||(vs={}));class Ru{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cx extends ws{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const r=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${r}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new Ru(vs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}async createInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=FR(this.apiClient,e);return h=Te("batchPredictionJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Hp(v))}else{const p=NR(this.apiClient,e);return h=Te("{model}:batchGenerateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>zp(v))}}async get(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=qR(this.apiClient,e);return h=Te("batchPredictionJobs/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Hp(v))}else{const p=kR(this.apiClient,e);return h=Te("batches/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>zp(v))}}async cancel(e){var n,i,r,a;let c="",h={};if(this.apiClient.isVertexAI()){const m=GR(this.apiClient,e);c=Te("batchPredictionJobs/{name}:cancel",m._url),h=m._query,delete m.config,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=DR(this.apiClient,e);c=Te("batches/{name}:cancel",m._url),h=m._query,delete m.config,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=HR(e);return h=Te("batchPredictionJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=lx(v),S=new $T;return Object.assign(S,E),S})}else{const p=VR(e);return h=Te("batches",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=ox(v),S=new $T;return Object.assign(S,E),S})}}async delete(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=$R(this.apiClient,e);return h=Te("batchPredictionJobs/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>ux(v))}else{const p=LR(this.apiClient,e);return h=Te("batches/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>rx(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fx(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function dx(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function hx(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function px(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],fx(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],dx(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],hx(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function QT(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>px(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function mx(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function gx(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function yx(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],gx(n)),e}function vx(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function _x(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],vx(n)),e}function Tx(){return{}}function Ex(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>mx(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],yx(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],_x(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],Tx());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function Sx(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function Ax(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function Cx(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],Ax(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function wx(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],Sx(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],Cx(i)),e}function Ix(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const a=u(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=u(t,["contents"]);if(e!==void 0&&c!=null){let v=di(c);Array.isArray(v)&&(v=v.map(E=>QT(E))),f(e,["contents"],v)}const h=u(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],QT(Cn(h)));const m=u(t,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(E=>Ex(E))),f(e,["tools"],v)}const p=u(t,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],wx(p)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Rx(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["model"],G0(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],Ix(r,n)),n}function xx(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Fo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function bx(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Fo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function Mx(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function Nx(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Fo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],Mx(r,n)),n}function kx(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function Dx(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],kx(n,e)),e}function Px(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function Vx(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Lx(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Ux(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],Px(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],Vx(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],Lx(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function XT(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Ux(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function Ox(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=u(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=u(t,["response"]);c!=null&&f(e,["response"],c);const h=u(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function Bx(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function Fx(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],Bx(n)),e}function qx(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function Gx(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],qx(n)),e}function zx(){return{}}function Hx(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&f(e,["apiKeyString"],n),e}function $x(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&f(e,["apiKeyConfig"],Hx(n));const i=u(t,["authType"]);i!=null&&f(e,["authType"],i);const r=u(t,["googleServiceAccountConfig"]);r!=null&&f(e,["googleServiceAccountConfig"],r);const a=u(t,["httpBasicAuthConfig"]);a!=null&&f(e,["httpBasicAuthConfig"],a);const c=u(t,["oauthConfig"]);c!=null&&f(e,["oauthConfig"],c);const h=u(t,["oidcConfig"]);return h!=null&&f(e,["oidcConfig"],h),e}function Yx(t){const e={},n=u(t,["authConfig"]);return n!=null&&f(e,["authConfig"],$x(n)),e}function Kx(){return{}}function Jx(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>Ox(S))),f(e,["functionDeclarations"],E)}const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=u(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],Fx(r));const a=u(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],Gx(a)),u(t,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],zx());const h=u(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],Yx(h)),u(t,["urlContext"])!=null&&f(e,["urlContext"],Kx());const p=u(t,["codeExecution"]);p!=null&&f(e,["codeExecution"],p);const v=u(t,["computerUse"]);return v!=null&&f(e,["computerUse"],v),e}function Qx(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function Xx(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function Wx(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],Xx(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function Zx(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],Qx(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],Wx(i)),e}function jx(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const a=u(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=u(t,["contents"]);if(e!==void 0&&c!=null){let E=di(c);Array.isArray(E)&&(E=E.map(S=>XT(S))),f(e,["contents"],E)}const h=u(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],XT(Cn(h)));const m=u(t,["tools"]);if(e!==void 0&&m!=null){let E=m;Array.isArray(E)&&(E=E.map(S=>Jx(S))),f(e,["tools"],E)}const p=u(t,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],Zx(p));const v=u(t,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),n}function eb(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["model"],G0(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],jx(r,n)),n}function tb(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Fo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function nb(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Fo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function ib(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function ob(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Fo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],ib(r,n)),n}function rb(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function sb(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],rb(n,e)),e}function yf(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["model"]);r!=null&&f(e,["model"],r);const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const h=u(t,["expireTime"]);h!=null&&f(e,["expireTime"],h);const m=u(t,["usageMetadata"]);return m!=null&&f(e,["usageMetadata"],m),e}function ab(){return{}}function lb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>yf(c))),f(e,["cachedContents"],a)}return e}function vf(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["model"]);r!=null&&f(e,["model"],r);const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const h=u(t,["expireTime"]);h!=null&&f(e,["expireTime"],h);const m=u(t,["usageMetadata"]);return m!=null&&f(e,["usageMetadata"],m),e}function ub(){return{}}function cb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>vf(c))),f(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fb extends ws{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ru(vs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=eb(this.apiClient,e);return h=Te("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>vf(v))}else{const p=Rx(this.apiClient,e);return h=Te("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>yf(v))}}async get(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=tb(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>vf(v))}else{const p=xx(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>yf(v))}}async delete(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=nb(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(()=>{const v=ub(),E=new zT;return Object.assign(E,v),E})}else{const p=bx(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(()=>{const v=ab(),E=new zT;return Object.assign(E,v),E})}}async update(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=ob(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>vf(v))}else{const p=Nx(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>yf(v))}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=sb(e);return h=Te("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=cb(v),S=new HT;return Object.assign(S,E),S})}else{const p=Dx(e);return h=Te("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=lb(v),S=new HT;return Object.assign(S,E),S})}}}function WT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wt(t){return this instanceof wt?(this.v=t,this):new wt(t)}function Ia(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(I){return function(x){return Promise.resolve(x).then(I,E)}}function h(I,x){i[I]&&(r[I]=function(L){return new Promise(function(F,re){a.push([I,L,F,re])>1||m(I,L)})},x&&(r[I]=x(r[I])))}function m(I,x){try{p(i[I](x))}catch(L){S(a[0][3],L)}}function p(I){I.value instanceof wt?Promise.resolve(I.value.v).then(v,E):S(a[0][2],I)}function v(I){m("next",I)}function E(I){m("throw",I)}function S(I,x){I(x),a.shift(),a.length&&m(a[0][0],a[0][1])}}function uu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof WT=="function"?WT(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(c){return new Promise(function(h,m){c=t[a](c),r(h,m,c.done,c.value)})}}function r(a,c,h,m){Promise.resolve(m).then(function(p){a({value:p,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function db(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:oS(n)}function oS(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function hb(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ZT(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let a=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),a&&!oS(t[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class pb{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new mb(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class mb{constructor(e,n,i,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),hb(a)}async sendMessage(e){var n;await this.sendPromise;const i=Cn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,c,h;const m=await r,p=(c=(a=m.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,v=m.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(E))!==null&&h!==void 0?h:[]);const I=p?[p]:[];this.recordHistory(i,I,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=Cn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?ZT(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return Ia(this,arguments,function*(){var c,h,m,p;const v=[];try{for(var E=!0,S=uu(e),I;I=yield wt(S.next()),c=I.done,!c;E=!0){p=I.value,E=!1;const x=p;if(db(x)){const L=(r=(i=x.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;L!==void 0&&v.push(L)}yield yield wt(x)}}catch(x){h={error:x}}finally{try{!E&&!c&&(m=S.return)&&(yield wt(m.call(S)))}finally{if(h)throw h.error}}this.recordHistory(n,v)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...ZT(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Wf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gb(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function yb(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],gb(n,e)),e}function vb(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["message"]);i!=null&&f(e,["message"],i);const r=u(t,["code"]);return r!=null&&f(e,["code"],r),e}function _b(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["mimeType"]);r!=null&&f(e,["mimeType"],r);const a=u(t,["sizeBytes"]);a!=null&&f(e,["sizeBytes"],a);const c=u(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=u(t,["expirationTime"]);h!=null&&f(e,["expirationTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["sha256Hash"]);p!=null&&f(e,["sha256Hash"],p);const v=u(t,["uri"]);v!=null&&f(e,["uri"],v);const E=u(t,["downloadUri"]);E!=null&&f(e,["downloadUri"],E);const S=u(t,["state"]);S!=null&&f(e,["state"],S);const I=u(t,["source"]);I!=null&&f(e,["source"],I);const x=u(t,["videoMetadata"]);x!=null&&f(e,["videoMetadata"],x);const L=u(t,["error"]);return L!=null&&f(e,["error"],vb(L)),e}function Tb(t){const e={},n=u(t,["file"]);n!=null&&f(e,["file"],_b(n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function Eb(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","file"],Q0(n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function Sb(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","file"],Q0(n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function Ab(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["message"]);i!=null&&f(e,["message"],i);const r=u(t,["code"]);return r!=null&&f(e,["code"],r),e}function $p(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["mimeType"]);r!=null&&f(e,["mimeType"],r);const a=u(t,["sizeBytes"]);a!=null&&f(e,["sizeBytes"],a);const c=u(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=u(t,["expirationTime"]);h!=null&&f(e,["expirationTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["sha256Hash"]);p!=null&&f(e,["sha256Hash"],p);const v=u(t,["uri"]);v!=null&&f(e,["uri"],v);const E=u(t,["downloadUri"]);E!=null&&f(e,["downloadUri"],E);const S=u(t,["state"]);S!=null&&f(e,["state"],S);const I=u(t,["source"]);I!=null&&f(e,["source"],I);const x=u(t,["videoMetadata"]);x!=null&&f(e,["videoMetadata"],x);const L=u(t,["error"]);return L!=null&&f(e,["error"],Ab(L)),e}function Cb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>$p(c))),f(e,["files"],a)}return e}function wb(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Ib(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rb extends ws{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ru(vs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>$p(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=yb(e);return a=Te("files",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=Cb(m),v=new $I;return Object.assign(v,p),v})}}async createInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Tb(e);return a=Te("upload/v1beta/files",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>{const p=wb(m),v=new YI;return Object.assign(v,p),v})}}async get(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Eb(e);return a=Te("files/{file}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>$p(m))}}async delete(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Sb(e);return a=Te("files/{file}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(()=>{const m=Ib(),p=new KI;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xb(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function rS(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],xb(n)),e}function bb(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],rS(i)),e}function Mb(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>bb(r))),f(e,["speakerVoiceConfigs"],i)}return e}function Nb(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],rS(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],Mb(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function kb(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function Db(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Pb(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Vb(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],kb(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],Db(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],Pb(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function Lb(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Vb(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function Ub(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function Ob(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function Bb(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],Ob(n)),e}function Fb(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function qb(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],Fb(n)),e}function Gb(){return{}}function zb(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>Ub(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],Bb(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],qb(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],Gb());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function Hb(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function jT(){return{}}function $b(t){const e={},n=u(t,["disabled"]);n!=null&&f(e,["disabled"],n);const i=u(t,["startOfSpeechSensitivity"]);i!=null&&f(e,["startOfSpeechSensitivity"],i);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&f(e,["endOfSpeechSensitivity"],r);const a=u(t,["prefixPaddingMs"]);a!=null&&f(e,["prefixPaddingMs"],a);const c=u(t,["silenceDurationMs"]);return c!=null&&f(e,["silenceDurationMs"],c),e}function Yb(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&f(e,["automaticActivityDetection"],$b(n));const i=u(t,["activityHandling"]);i!=null&&f(e,["activityHandling"],i);const r=u(t,["turnCoverage"]);return r!=null&&f(e,["turnCoverage"],r),e}function Kb(t){const e={},n=u(t,["targetTokens"]);return n!=null&&f(e,["targetTokens"],n),e}function Jb(t){const e={},n=u(t,["triggerTokens"]);n!=null&&f(e,["triggerTokens"],n);const i=u(t,["slidingWindow"]);return i!=null&&f(e,["slidingWindow"],Kb(i)),e}function Qb(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&f(e,["proactiveAudio"],n),e}function Xb(t,e){const n={},i=u(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=u(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=u(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=u(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const p=u(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=u(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=u(t,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],Nb(Mm(E)));const S=u(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&f(e,["setup","systemInstruction"],Lb(Cn(I)));const x=u(t,["tools"]);if(e!==void 0&&x!=null){let ae=qa(x);Array.isArray(ae)&&(ae=ae.map(me=>zb(Fa(me)))),f(e,["setup","tools"],ae)}const L=u(t,["sessionResumption"]);e!==void 0&&L!=null&&f(e,["setup","sessionResumption"],Hb(L));const F=u(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&f(e,["setup","inputAudioTranscription"],jT());const re=u(t,["outputAudioTranscription"]);e!==void 0&&re!=null&&f(e,["setup","outputAudioTranscription"],jT());const oe=u(t,["realtimeInputConfig"]);e!==void 0&&oe!=null&&f(e,["setup","realtimeInputConfig"],Yb(oe));const ie=u(t,["contextWindowCompression"]);e!==void 0&&ie!=null&&f(e,["setup","contextWindowCompression"],Jb(ie));const fe=u(t,["proactivity"]);return e!==void 0&&fe!=null&&f(e,["setup","proactivity"],Qb(fe)),n}function Wb(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["setup","model"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],Xb(r,n)),n}function Zb(){return{}}function jb(){return{}}function eM(t){const e={},n=u(t,["media"]);n!=null&&f(e,["mediaChunks"],z0(n));const i=u(t,["audio"]);i!=null&&f(e,["audio"],$0(i));const r=u(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const a=u(t,["video"]);a!=null&&f(e,["video"],H0(a));const c=u(t,["text"]);return c!=null&&f(e,["text"],c),u(t,["activityStart"])!=null&&f(e,["activityStart"],Zb()),u(t,["activityEnd"])!=null&&f(e,["activityEnd"],jb()),e}function sS(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["weight"]);return i!=null&&f(e,["weight"],i),e}function tM(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>sS(r))),f(e,["weightedPrompts"],i)}return e}function aS(t){const e={},n=u(t,["temperature"]);n!=null&&f(e,["temperature"],n);const i=u(t,["topK"]);i!=null&&f(e,["topK"],i);const r=u(t,["seed"]);r!=null&&f(e,["seed"],r);const a=u(t,["guidance"]);a!=null&&f(e,["guidance"],a);const c=u(t,["bpm"]);c!=null&&f(e,["bpm"],c);const h=u(t,["density"]);h!=null&&f(e,["density"],h);const m=u(t,["brightness"]);m!=null&&f(e,["brightness"],m);const p=u(t,["scale"]);p!=null&&f(e,["scale"],p);const v=u(t,["muteBass"]);v!=null&&f(e,["muteBass"],v);const E=u(t,["muteDrums"]);E!=null&&f(e,["muteDrums"],E);const S=u(t,["onlyBassAndDrums"]);S!=null&&f(e,["onlyBassAndDrums"],S);const I=u(t,["musicGenerationMode"]);return I!=null&&f(e,["musicGenerationMode"],I),e}function nM(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],aS(n)),e}function lS(t){const e={},n=u(t,["model"]);return n!=null&&f(e,["model"],n),e}function uS(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>sS(r))),f(e,["weightedPrompts"],i)}return e}function Yp(t){const e={},n=u(t,["setup"]);n!=null&&f(e,["setup"],lS(n));const i=u(t,["clientContent"]);i!=null&&f(e,["clientContent"],uS(i));const r=u(t,["musicGenerationConfig"]);r!=null&&f(e,["musicGenerationConfig"],aS(r));const a=u(t,["playbackControl"]);return a!=null&&f(e,["playbackControl"],a),e}function iM(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function oM(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],iM(n)),e}function rM(t){const e={},n=u(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],oM(n)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function sM(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function aM(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function lM(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function uM(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],sM(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],aM(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],lM(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function cM(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>uM(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function fM(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=u(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=u(t,["response"]);c!=null&&f(e,["response"],c);const h=u(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function dM(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function hM(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],dM(n)),e}function pM(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function mM(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],pM(n)),e}function gM(){return{}}function yM(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&f(e,["apiKeyString"],n),e}function vM(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&f(e,["apiKeyConfig"],yM(n));const i=u(t,["authType"]);i!=null&&f(e,["authType"],i);const r=u(t,["googleServiceAccountConfig"]);r!=null&&f(e,["googleServiceAccountConfig"],r);const a=u(t,["httpBasicAuthConfig"]);a!=null&&f(e,["httpBasicAuthConfig"],a);const c=u(t,["oauthConfig"]);c!=null&&f(e,["oauthConfig"],c);const h=u(t,["oidcConfig"]);return h!=null&&f(e,["oidcConfig"],h),e}function _M(t){const e={},n=u(t,["authConfig"]);return n!=null&&f(e,["authConfig"],vM(n)),e}function TM(){return{}}function EM(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>fM(S))),f(e,["functionDeclarations"],E)}const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=u(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],hM(r));const a=u(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],mM(a)),u(t,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],gM());const h=u(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],_M(h)),u(t,["urlContext"])!=null&&f(e,["urlContext"],TM());const p=u(t,["codeExecution"]);p!=null&&f(e,["codeExecution"],p);const v=u(t,["computerUse"]);return v!=null&&f(e,["computerUse"],v),e}function SM(t){const e={},n=u(t,["handle"]);n!=null&&f(e,["handle"],n);const i=u(t,["transparent"]);return i!=null&&f(e,["transparent"],i),e}function eE(){return{}}function AM(t){const e={},n=u(t,["disabled"]);n!=null&&f(e,["disabled"],n);const i=u(t,["startOfSpeechSensitivity"]);i!=null&&f(e,["startOfSpeechSensitivity"],i);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&f(e,["endOfSpeechSensitivity"],r);const a=u(t,["prefixPaddingMs"]);a!=null&&f(e,["prefixPaddingMs"],a);const c=u(t,["silenceDurationMs"]);return c!=null&&f(e,["silenceDurationMs"],c),e}function CM(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&f(e,["automaticActivityDetection"],AM(n));const i=u(t,["activityHandling"]);i!=null&&f(e,["activityHandling"],i);const r=u(t,["turnCoverage"]);return r!=null&&f(e,["turnCoverage"],r),e}function wM(t){const e={},n=u(t,["targetTokens"]);return n!=null&&f(e,["targetTokens"],n),e}function IM(t){const e={},n=u(t,["triggerTokens"]);n!=null&&f(e,["triggerTokens"],n);const i=u(t,["slidingWindow"]);return i!=null&&f(e,["slidingWindow"],wM(i)),e}function RM(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&f(e,["proactiveAudio"],n),e}function xM(t,e){const n={},i=u(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=u(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=u(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=u(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const p=u(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=u(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=u(t,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],rM(Mm(E)));const S=u(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&f(e,["setup","systemInstruction"],cM(Cn(I)));const x=u(t,["tools"]);if(e!==void 0&&x!=null){let ae=qa(x);Array.isArray(ae)&&(ae=ae.map(me=>EM(Fa(me)))),f(e,["setup","tools"],ae)}const L=u(t,["sessionResumption"]);e!==void 0&&L!=null&&f(e,["setup","sessionResumption"],SM(L));const F=u(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&f(e,["setup","inputAudioTranscription"],eE());const re=u(t,["outputAudioTranscription"]);e!==void 0&&re!=null&&f(e,["setup","outputAudioTranscription"],eE());const oe=u(t,["realtimeInputConfig"]);e!==void 0&&oe!=null&&f(e,["setup","realtimeInputConfig"],CM(oe));const ie=u(t,["contextWindowCompression"]);e!==void 0&&ie!=null&&f(e,["setup","contextWindowCompression"],IM(ie));const fe=u(t,["proactivity"]);return e!==void 0&&fe!=null&&f(e,["setup","proactivity"],RM(fe)),n}function bM(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["setup","model"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],xM(r,n)),n}function MM(){return{}}function NM(){return{}}function kM(t){const e={},n=u(t,["media"]);n!=null&&f(e,["mediaChunks"],z0(n));const i=u(t,["audio"]);i!=null&&f(e,["audio"],$0(i));const r=u(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const a=u(t,["video"]);a!=null&&f(e,["video"],H0(a));const c=u(t,["text"]);return c!=null&&f(e,["text"],c),u(t,["activityStart"])!=null&&f(e,["activityStart"],MM()),u(t,["activityEnd"])!=null&&f(e,["activityEnd"],NM()),e}function DM(){return{}}function PM(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function VM(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function LM(t){const e={},n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function UM(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],PM(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],VM(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],LM(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function OM(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>UM(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function tE(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["finished"]);return i!=null&&f(e,["finished"],i),e}function BM(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function FM(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>BM(r))),f(e,["urlMetadata"],i)}return e}function qM(t){const e={},n=u(t,["modelTurn"]);n!=null&&f(e,["modelTurn"],OM(n));const i=u(t,["turnComplete"]);i!=null&&f(e,["turnComplete"],i);const r=u(t,["interrupted"]);r!=null&&f(e,["interrupted"],r);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const c=u(t,["generationComplete"]);c!=null&&f(e,["generationComplete"],c);const h=u(t,["inputTranscription"]);h!=null&&f(e,["inputTranscription"],tE(h));const m=u(t,["outputTranscription"]);m!=null&&f(e,["outputTranscription"],tE(m));const p=u(t,["urlContextMetadata"]);return p!=null&&f(e,["urlContextMetadata"],FM(p)),e}function GM(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const i=u(t,["args"]);i!=null&&f(e,["args"],i);const r=u(t,["name"]);return r!=null&&f(e,["name"],r),e}function zM(t){const e={},n=u(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>GM(r))),f(e,["functionCalls"],i)}return e}function HM(t){const e={},n=u(t,["ids"]);return n!=null&&f(e,["ids"],n),e}function sf(t){const e={},n=u(t,["modality"]);n!=null&&f(e,["modality"],n);const i=u(t,["tokenCount"]);return i!=null&&f(e,["tokenCount"],i),e}function $M(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=u(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const r=u(t,["responseTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const a=u(t,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const c=u(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=u(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const m=u(t,["promptTokensDetails"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(I=>sf(I))),f(e,["promptTokensDetails"],S)}const p=u(t,["cacheTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(I=>sf(I))),f(e,["cacheTokensDetails"],S)}const v=u(t,["responseTokensDetails"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(I=>sf(I))),f(e,["responseTokensDetails"],S)}const E=u(t,["toolUsePromptTokensDetails"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(I=>sf(I))),f(e,["toolUsePromptTokensDetails"],S)}return e}function YM(t){const e={},n=u(t,["timeLeft"]);return n!=null&&f(e,["timeLeft"],n),e}function KM(t){const e={},n=u(t,["newHandle"]);n!=null&&f(e,["newHandle"],n);const i=u(t,["resumable"]);i!=null&&f(e,["resumable"],i);const r=u(t,["lastConsumedClientMessageIndex"]);return r!=null&&f(e,["lastConsumedClientMessageIndex"],r),e}function JM(t){const e={};u(t,["setupComplete"])!=null&&f(e,["setupComplete"],DM());const i=u(t,["serverContent"]);i!=null&&f(e,["serverContent"],qM(i));const r=u(t,["toolCall"]);r!=null&&f(e,["toolCall"],zM(r));const a=u(t,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],HM(a));const c=u(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],$M(c));const h=u(t,["goAway"]);h!=null&&f(e,["goAway"],YM(h));const m=u(t,["sessionResumptionUpdate"]);return m!=null&&f(e,["sessionResumptionUpdate"],KM(m)),e}function QM(){return{}}function XM(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["weight"]);return i!=null&&f(e,["weight"],i),e}function WM(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>XM(r))),f(e,["weightedPrompts"],i)}return e}function ZM(t){const e={},n=u(t,["temperature"]);n!=null&&f(e,["temperature"],n);const i=u(t,["topK"]);i!=null&&f(e,["topK"],i);const r=u(t,["seed"]);r!=null&&f(e,["seed"],r);const a=u(t,["guidance"]);a!=null&&f(e,["guidance"],a);const c=u(t,["bpm"]);c!=null&&f(e,["bpm"],c);const h=u(t,["density"]);h!=null&&f(e,["density"],h);const m=u(t,["brightness"]);m!=null&&f(e,["brightness"],m);const p=u(t,["scale"]);p!=null&&f(e,["scale"],p);const v=u(t,["muteBass"]);v!=null&&f(e,["muteBass"],v);const E=u(t,["muteDrums"]);E!=null&&f(e,["muteDrums"],E);const S=u(t,["onlyBassAndDrums"]);S!=null&&f(e,["onlyBassAndDrums"],S);const I=u(t,["musicGenerationMode"]);return I!=null&&f(e,["musicGenerationMode"],I),e}function jM(t){const e={},n=u(t,["clientContent"]);n!=null&&f(e,["clientContent"],WM(n));const i=u(t,["musicGenerationConfig"]);return i!=null&&f(e,["musicGenerationConfig"],ZM(i)),e}function eN(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);i!=null&&f(e,["mimeType"],i);const r=u(t,["sourceMetadata"]);return r!=null&&f(e,["sourceMetadata"],jM(r)),e}function tN(t){const e={},n=u(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>eN(r))),f(e,["audioChunks"],i)}return e}function nN(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["filteredReason"]);return i!=null&&f(e,["filteredReason"],i),e}function iN(t){const e={};u(t,["setupComplete"])!=null&&f(e,["setupComplete"],QM());const i=u(t,["serverContent"]);i!=null&&f(e,["serverContent"],tN(i));const r=u(t,["filteredPrompt"]);return r!=null&&f(e,["filteredPrompt"],nN(r)),e}function oN(t){const e={},n=u(t,["sessionId"]);return n!=null&&f(e,["sessionId"],n),e}function rN(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function sN(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function aN(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function lN(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],rN(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],sN(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],aN(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function uN(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>lN(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function nE(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["finished"]);return i!=null&&f(e,["finished"],i),e}function cN(t){const e={},n=u(t,["modelTurn"]);n!=null&&f(e,["modelTurn"],uN(n));const i=u(t,["turnComplete"]);i!=null&&f(e,["turnComplete"],i);const r=u(t,["interrupted"]);r!=null&&f(e,["interrupted"],r);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const c=u(t,["generationComplete"]);c!=null&&f(e,["generationComplete"],c);const h=u(t,["inputTranscription"]);h!=null&&f(e,["inputTranscription"],nE(h));const m=u(t,["outputTranscription"]);return m!=null&&f(e,["outputTranscription"],nE(m)),e}function fN(t){const e={},n=u(t,["args"]);n!=null&&f(e,["args"],n);const i=u(t,["name"]);return i!=null&&f(e,["name"],i),e}function dN(t){const e={},n=u(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>fN(r))),f(e,["functionCalls"],i)}return e}function hN(t){const e={},n=u(t,["ids"]);return n!=null&&f(e,["ids"],n),e}function af(t){const e={},n=u(t,["modality"]);n!=null&&f(e,["modality"],n);const i=u(t,["tokenCount"]);return i!=null&&f(e,["tokenCount"],i),e}function pN(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=u(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const r=u(t,["candidatesTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const a=u(t,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const c=u(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=u(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const m=u(t,["promptTokensDetails"]);if(m!=null){let I=m;Array.isArray(I)&&(I=I.map(x=>af(x))),f(e,["promptTokensDetails"],I)}const p=u(t,["cacheTokensDetails"]);if(p!=null){let I=p;Array.isArray(I)&&(I=I.map(x=>af(x))),f(e,["cacheTokensDetails"],I)}const v=u(t,["candidatesTokensDetails"]);if(v!=null){let I=v;Array.isArray(I)&&(I=I.map(x=>af(x))),f(e,["responseTokensDetails"],I)}const E=u(t,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(x=>af(x))),f(e,["toolUsePromptTokensDetails"],I)}const S=u(t,["trafficType"]);return S!=null&&f(e,["trafficType"],S),e}function mN(t){const e={},n=u(t,["timeLeft"]);return n!=null&&f(e,["timeLeft"],n),e}function gN(t){const e={},n=u(t,["newHandle"]);n!=null&&f(e,["newHandle"],n);const i=u(t,["resumable"]);i!=null&&f(e,["resumable"],i);const r=u(t,["lastConsumedClientMessageIndex"]);return r!=null&&f(e,["lastConsumedClientMessageIndex"],r),e}function yN(t){const e={},n=u(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],oN(n));const i=u(t,["serverContent"]);i!=null&&f(e,["serverContent"],cN(i));const r=u(t,["toolCall"]);r!=null&&f(e,["toolCall"],dN(r));const a=u(t,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],hN(a));const c=u(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],pN(c));const h=u(t,["goAway"]);h!=null&&f(e,["goAway"],mN(h));const m=u(t,["sessionResumptionUpdate"]);return m!=null&&f(e,["sessionResumptionUpdate"],gN(m)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vN(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function _N(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function TN(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function EN(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],vN(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],_N(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],TN(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function Zf(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>EN(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function SN(t){const e={},n=u(t,["anyOf"]);n!=null&&f(e,["anyOf"],n);const i=u(t,["default"]);i!=null&&f(e,["default"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["enum"]);a!=null&&f(e,["enum"],a);const c=u(t,["example"]);c!=null&&f(e,["example"],c);const h=u(t,["format"]);h!=null&&f(e,["format"],h);const m=u(t,["items"]);m!=null&&f(e,["items"],m);const p=u(t,["maxItems"]);p!=null&&f(e,["maxItems"],p);const v=u(t,["maxLength"]);v!=null&&f(e,["maxLength"],v);const E=u(t,["maxProperties"]);E!=null&&f(e,["maxProperties"],E);const S=u(t,["maximum"]);S!=null&&f(e,["maximum"],S);const I=u(t,["minItems"]);I!=null&&f(e,["minItems"],I);const x=u(t,["minLength"]);x!=null&&f(e,["minLength"],x);const L=u(t,["minProperties"]);L!=null&&f(e,["minProperties"],L);const F=u(t,["minimum"]);F!=null&&f(e,["minimum"],F);const re=u(t,["nullable"]);re!=null&&f(e,["nullable"],re);const oe=u(t,["pattern"]);oe!=null&&f(e,["pattern"],oe);const ie=u(t,["properties"]);ie!=null&&f(e,["properties"],ie);const fe=u(t,["propertyOrdering"]);fe!=null&&f(e,["propertyOrdering"],fe);const ae=u(t,["required"]);ae!=null&&f(e,["required"],ae);const me=u(t,["title"]);me!=null&&f(e,["title"],me);const k=u(t,["type"]);return k!=null&&f(e,["type"],k),e}function AN(t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(t,["category"]);n!=null&&f(e,["category"],n);const i=u(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function CN(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function wN(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function IN(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],wN(n)),e}function RN(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function xN(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],RN(n)),e}function bN(){return{}}function MN(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>CN(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],IN(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],xN(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],bN());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function NN(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function kN(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function DN(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],kN(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function PN(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],NN(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],DN(i)),e}function VN(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function cS(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],VN(n)),e}function LN(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],cS(i)),e}function UN(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>LN(r))),f(e,["speakerVoiceConfigs"],i)}return e}function ON(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],cS(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],UN(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function BN(t){const e={},n=u(t,["includeThoughts"]);n!=null&&f(e,["includeThoughts"],n);const i=u(t,["thinkingBudget"]);return i!=null&&f(e,["thinkingBudget"],i),e}function FN(t,e,n){const i={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],Zf(Cn(r)));const a=u(e,["temperature"]);a!=null&&f(i,["temperature"],a);const c=u(e,["topP"]);c!=null&&f(i,["topP"],c);const h=u(e,["topK"]);h!=null&&f(i,["topK"],h);const m=u(e,["candidateCount"]);m!=null&&f(i,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&f(i,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&f(i,["stopSequences"],v);const E=u(e,["responseLogprobs"]);E!=null&&f(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&f(i,["logprobs"],S);const I=u(e,["presencePenalty"]);I!=null&&f(i,["presencePenalty"],I);const x=u(e,["frequencyPenalty"]);x!=null&&f(i,["frequencyPenalty"],x);const L=u(e,["seed"]);L!=null&&f(i,["seed"],L);const F=u(e,["responseMimeType"]);F!=null&&f(i,["responseMimeType"],F);const re=u(e,["responseSchema"]);re!=null&&f(i,["responseSchema"],SN(xm(re)));const oe=u(e,["responseJsonSchema"]);if(oe!=null&&f(i,["responseJsonSchema"],oe),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ie=u(e,["safetySettings"]);if(n!==void 0&&ie!=null){let N=ie;Array.isArray(N)&&(N=N.map(q=>AN(q))),f(n,["safetySettings"],N)}const fe=u(e,["tools"]);if(n!==void 0&&fe!=null){let N=qa(fe);Array.isArray(N)&&(N=N.map(q=>MN(Fa(q)))),f(n,["tools"],N)}const ae=u(e,["toolConfig"]);if(n!==void 0&&ae!=null&&f(n,["toolConfig"],PN(ae)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const me=u(e,["cachedContent"]);n!==void 0&&me!=null&&f(n,["cachedContent"],Fo(t,me));const k=u(e,["responseModalities"]);k!=null&&f(i,["responseModalities"],k);const M=u(e,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);const b=u(e,["speechConfig"]);if(b!=null&&f(i,["speechConfig"],ON(bm(b))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=u(e,["thinkingConfig"]);return V!=null&&f(i,["thinkingConfig"],BN(V)),i}function iE(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["contents"]);if(r!=null){let c=di(r);Array.isArray(c)&&(c=c.map(h=>Zf(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["generationConfig"],FN(t,a,n)),n}function qN(t,e){const n={},i=u(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const r=u(t,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const a=u(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function GN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["contents"]);r!=null&&f(n,["requests[]","content"],K0(t,r));const a=u(e,["config"]);a!=null&&f(n,["config"],qN(a,n));const c=u(e,["model"]);return c!==void 0&&f(n,["requests[]","model"],ct(t,c)),n}function zN(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=u(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const a=u(t,["guidanceScale"]);if(e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const p=u(t,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const v=u(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const E=u(t,["outputMimeType"]);e!==void 0&&E!=null&&f(e,["parameters","outputOptions","mimeType"],E);const S=u(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const I=u(t,["imageSize"]);if(e!==void 0&&I!=null&&f(e,["parameters","sampleImageSize"],I),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function HN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["config"]);return a!=null&&f(n,["config"],zN(a,n)),n}function $N(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function YN(t,e,n){const i={},r=u(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const a=u(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=u(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=u(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],X0(t,h)),i}function KN(t,e){const n={},i=u(e,["config"]);return i!=null&&f(n,["config"],YN(t,i,n)),n}function JN(t,e){const n={},i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const a=u(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function QN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],JN(r,n)),n}function XN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function WN(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function ZN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["contents"]);if(r!=null){let c=di(r);Array.isArray(c)&&(c=c.map(h=>Zf(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["config"],WN(a)),n}function jN(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],Is(n));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function e1(t,e){const n={},i=u(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=u(t,["durationSeconds"]);if(e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=u(t,["aspectRatio"]);if(e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a),u(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const c=u(t,["personGeneration"]);if(e!==void 0&&c!=null&&f(e,["parameters","personGeneration"],c),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=u(t,["negativePrompt"]);e!==void 0&&h!=null&&f(e,["parameters","negativePrompt"],h);const m=u(t,["enhancePrompt"]);if(e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(u(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function t1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["image"]);if(a!=null&&f(n,["instances[0]","image"],jN(a)),u(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const c=u(e,["config"]);return c!=null&&f(n,["config"],e1(c,n)),n}function n1(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function i1(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function o1(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function r1(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n1(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],i1(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],o1(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function za(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>r1(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function s1(t){const e={},n=u(t,["anyOf"]);n!=null&&f(e,["anyOf"],n);const i=u(t,["default"]);i!=null&&f(e,["default"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["enum"]);a!=null&&f(e,["enum"],a);const c=u(t,["example"]);c!=null&&f(e,["example"],c);const h=u(t,["format"]);h!=null&&f(e,["format"],h);const m=u(t,["items"]);m!=null&&f(e,["items"],m);const p=u(t,["maxItems"]);p!=null&&f(e,["maxItems"],p);const v=u(t,["maxLength"]);v!=null&&f(e,["maxLength"],v);const E=u(t,["maxProperties"]);E!=null&&f(e,["maxProperties"],E);const S=u(t,["maximum"]);S!=null&&f(e,["maximum"],S);const I=u(t,["minItems"]);I!=null&&f(e,["minItems"],I);const x=u(t,["minLength"]);x!=null&&f(e,["minLength"],x);const L=u(t,["minProperties"]);L!=null&&f(e,["minProperties"],L);const F=u(t,["minimum"]);F!=null&&f(e,["minimum"],F);const re=u(t,["nullable"]);re!=null&&f(e,["nullable"],re);const oe=u(t,["pattern"]);oe!=null&&f(e,["pattern"],oe);const ie=u(t,["properties"]);ie!=null&&f(e,["properties"],ie);const fe=u(t,["propertyOrdering"]);fe!=null&&f(e,["propertyOrdering"],fe);const ae=u(t,["required"]);ae!=null&&f(e,["required"],ae);const me=u(t,["title"]);me!=null&&f(e,["title"],me);const k=u(t,["type"]);return k!=null&&f(e,["type"],k),e}function a1(t){const e={},n=u(t,["featureSelectionPreference"]);return n!=null&&f(e,["featureSelectionPreference"],n),e}function l1(t){const e={},n=u(t,["method"]);n!=null&&f(e,["method"],n);const i=u(t,["category"]);i!=null&&f(e,["category"],i);const r=u(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function u1(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=u(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=u(t,["response"]);c!=null&&f(e,["response"],c);const h=u(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function c1(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function f1(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],c1(n)),e}function d1(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function h1(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],d1(n)),e}function p1(){return{}}function m1(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&f(e,["apiKeyString"],n),e}function g1(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&f(e,["apiKeyConfig"],m1(n));const i=u(t,["authType"]);i!=null&&f(e,["authType"],i);const r=u(t,["googleServiceAccountConfig"]);r!=null&&f(e,["googleServiceAccountConfig"],r);const a=u(t,["httpBasicAuthConfig"]);a!=null&&f(e,["httpBasicAuthConfig"],a);const c=u(t,["oauthConfig"]);c!=null&&f(e,["oauthConfig"],c);const h=u(t,["oidcConfig"]);return h!=null&&f(e,["oidcConfig"],h),e}function y1(t){const e={},n=u(t,["authConfig"]);return n!=null&&f(e,["authConfig"],g1(n)),e}function v1(){return{}}function fS(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>u1(S))),f(e,["functionDeclarations"],E)}const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=u(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],f1(r));const a=u(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],h1(a)),u(t,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],p1());const h=u(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],y1(h)),u(t,["urlContext"])!=null&&f(e,["urlContext"],v1());const p=u(t,["codeExecution"]);p!=null&&f(e,["codeExecution"],p);const v=u(t,["computerUse"]);return v!=null&&f(e,["computerUse"],v),e}function _1(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function T1(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function E1(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],T1(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function S1(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],_1(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],E1(i)),e}function A1(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function C1(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],A1(n)),e}function w1(t){const e={},n=u(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],C1(n)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function I1(t){const e={},n=u(t,["includeThoughts"]);n!=null&&f(e,["includeThoughts"],n);const i=u(t,["thinkingBudget"]);return i!=null&&f(e,["thinkingBudget"],i),e}function R1(t,e,n){const i={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],za(Cn(r)));const a=u(e,["temperature"]);a!=null&&f(i,["temperature"],a);const c=u(e,["topP"]);c!=null&&f(i,["topP"],c);const h=u(e,["topK"]);h!=null&&f(i,["topK"],h);const m=u(e,["candidateCount"]);m!=null&&f(i,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&f(i,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&f(i,["stopSequences"],v);const E=u(e,["responseLogprobs"]);E!=null&&f(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&f(i,["logprobs"],S);const I=u(e,["presencePenalty"]);I!=null&&f(i,["presencePenalty"],I);const x=u(e,["frequencyPenalty"]);x!=null&&f(i,["frequencyPenalty"],x);const L=u(e,["seed"]);L!=null&&f(i,["seed"],L);const F=u(e,["responseMimeType"]);F!=null&&f(i,["responseMimeType"],F);const re=u(e,["responseSchema"]);re!=null&&f(i,["responseSchema"],s1(xm(re)));const oe=u(e,["responseJsonSchema"]);oe!=null&&f(i,["responseJsonSchema"],oe);const ie=u(e,["routingConfig"]);ie!=null&&f(i,["routingConfig"],ie);const fe=u(e,["modelSelectionConfig"]);fe!=null&&f(i,["modelConfig"],a1(fe));const ae=u(e,["safetySettings"]);if(n!==void 0&&ae!=null){let We=ae;Array.isArray(We)&&(We=We.map(X=>l1(X))),f(n,["safetySettings"],We)}const me=u(e,["tools"]);if(n!==void 0&&me!=null){let We=qa(me);Array.isArray(We)&&(We=We.map(X=>fS(Fa(X)))),f(n,["tools"],We)}const k=u(e,["toolConfig"]);n!==void 0&&k!=null&&f(n,["toolConfig"],S1(k));const M=u(e,["labels"]);n!==void 0&&M!=null&&f(n,["labels"],M);const b=u(e,["cachedContent"]);n!==void 0&&b!=null&&f(n,["cachedContent"],Fo(t,b));const V=u(e,["responseModalities"]);V!=null&&f(i,["responseModalities"],V);const N=u(e,["mediaResolution"]);N!=null&&f(i,["mediaResolution"],N);const q=u(e,["speechConfig"]);q!=null&&f(i,["speechConfig"],w1(bm(q)));const P=u(e,["audioTimestamp"]);P!=null&&f(i,["audioTimestamp"],P);const Tt=u(e,["thinkingConfig"]);return Tt!=null&&f(i,["thinkingConfig"],I1(Tt)),i}function oE(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["contents"]);if(r!=null){let c=di(r);Array.isArray(c)&&(c=c.map(h=>za(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["generationConfig"],R1(t,a,n)),n}function x1(t,e){const n={},i=u(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);const r=u(t,["title"]);e!==void 0&&r!=null&&f(e,["instances[]","title"],r);const a=u(t,["outputDimensionality"]);e!==void 0&&a!=null&&f(e,["parameters","outputDimensionality"],a);const c=u(t,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const h=u(t,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),n}function b1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["contents"]);r!=null&&f(n,["instances[]","content"],K0(t,r));const a=u(e,["config"]);return a!=null&&f(n,["config"],x1(a,n)),n}function M1(t,e){const n={},i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=u(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const a=u(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=u(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=u(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const m=u(t,["seed"]);e!==void 0&&m!=null&&f(e,["parameters","seed"],m);const p=u(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=u(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=u(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&f(e,["parameters","includeSafetyAttributes"],E);const S=u(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const I=u(t,["language"]);e!==void 0&&I!=null&&f(e,["parameters","language"],I);const x=u(t,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const L=u(t,["outputCompressionQuality"]);e!==void 0&&L!=null&&f(e,["parameters","outputOptions","compressionQuality"],L);const F=u(t,["addWatermark"]);e!==void 0&&F!=null&&f(e,["parameters","addWatermark"],F);const re=u(t,["imageSize"]);e!==void 0&&re!=null&&f(e,["parameters","sampleImageSize"],re);const oe=u(t,["enhancePrompt"]);return e!==void 0&&oe!=null&&f(e,["parameters","enhancePrompt"],oe),n}function N1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["config"]);return a!=null&&f(n,["config"],M1(a,n)),n}function Ha(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Is(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function k1(t){const e={},n=u(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const i=u(t,["segmentationClasses"]);i!=null&&f(e,["maskClasses"],i);const r=u(t,["maskDilation"]);return r!=null&&f(e,["dilation"],r),e}function D1(t){const e={},n=u(t,["controlType"]);n!=null&&f(e,["controlType"],n);const i=u(t,["enableControlImageComputation"]);return i!=null&&f(e,["computeControl"],i),e}function P1(t){const e={},n=u(t,["styleDescription"]);return n!=null&&f(e,["styleDescription"],n),e}function V1(t){const e={},n=u(t,["subjectType"]);n!=null&&f(e,["subjectType"],n);const i=u(t,["subjectDescription"]);return i!=null&&f(e,["subjectDescription"],i),e}function L1(t){const e={},n=u(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],Ha(n));const i=u(t,["referenceId"]);i!=null&&f(e,["referenceId"],i);const r=u(t,["referenceType"]);r!=null&&f(e,["referenceType"],r);const a=u(t,["maskImageConfig"]);a!=null&&f(e,["maskImageConfig"],k1(a));const c=u(t,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],D1(c));const h=u(t,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],P1(h));const m=u(t,["subjectImageConfig"]);return m!=null&&f(e,["subjectImageConfig"],V1(m)),e}function U1(t,e){const n={},i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=u(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const a=u(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=u(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=u(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const m=u(t,["seed"]);e!==void 0&&m!=null&&f(e,["parameters","seed"],m);const p=u(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=u(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=u(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&f(e,["parameters","includeSafetyAttributes"],E);const S=u(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const I=u(t,["language"]);e!==void 0&&I!=null&&f(e,["parameters","language"],I);const x=u(t,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const L=u(t,["outputCompressionQuality"]);e!==void 0&&L!=null&&f(e,["parameters","outputOptions","compressionQuality"],L);const F=u(t,["addWatermark"]);e!==void 0&&F!=null&&f(e,["parameters","addWatermark"],F);const re=u(t,["editMode"]);e!==void 0&&re!=null&&f(e,["parameters","editMode"],re);const oe=u(t,["baseSteps"]);return e!==void 0&&oe!=null&&f(e,["parameters","editConfig","baseSteps"],oe),n}function O1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(m=>L1(m))),f(n,["instances[0]","referenceImages"],h)}const c=u(e,["config"]);return c!=null&&f(n,["config"],U1(c,n)),n}function B1(t,e){const n={},i=u(t,["includeRaiReason"]);e!==void 0&&i!=null&&f(e,["parameters","includeRaiReason"],i);const r=u(t,["outputMimeType"]);e!==void 0&&r!=null&&f(e,["parameters","outputOptions","mimeType"],r);const a=u(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&f(e,["parameters","outputOptions","compressionQuality"],a);const c=u(t,["enhanceInputImage"]);e!==void 0&&c!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],c);const h=u(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const m=u(t,["numberOfImages"]);e!==void 0&&m!=null&&f(e,["parameters","sampleCount"],m);const p=u(t,["mode"]);return e!==void 0&&p!=null&&f(e,["parameters","mode"],p),n}function F1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["image"]);r!=null&&f(n,["instances[0]","image"],Ha(r));const a=u(e,["upscaleFactor"]);a!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],a);const c=u(e,["config"]);return c!=null&&f(n,["config"],B1(c,n)),n}function q1(t){const e={},n=u(t,["productImage"]);return n!=null&&f(e,["image"],Ha(n)),e}function G1(t,e){const n={},i=u(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=u(t,["personImage"]);e!==void 0&&r!=null&&f(e,["instances[0]","personImage","image"],Ha(r));const a=u(t,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>q1(h))),f(e,["instances[0]","productImages"],c)}return n}function z1(t,e){const n={},i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=u(t,["baseSteps"]);e!==void 0&&r!=null&&f(e,["parameters","editConfig","baseSteps"],r);const a=u(t,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const c=u(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const h=u(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const m=u(t,["personGeneration"]);e!==void 0&&m!=null&&f(e,["parameters","personGeneration"],m);const p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const v=u(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","compressionQuality"],v);const E=u(t,["enhancePrompt"]);return e!==void 0&&E!=null&&f(e,["parameters","enhancePrompt"],E),n}function H1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["source"]);r!=null&&f(n,["config"],G1(r,n));const a=u(e,["config"]);return a!=null&&f(n,["config"],z1(a,n)),n}function $1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function Y1(t,e,n){const i={},r=u(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const a=u(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=u(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=u(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],X0(t,h)),i}function K1(t,e){const n={},i=u(e,["config"]);return i!=null&&f(n,["config"],Y1(t,i,n)),n}function J1(t,e){const n={},i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const a=u(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function Q1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],J1(r,n)),n}function X1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function W1(t,e){const n={},i=u(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],za(Cn(i)));const r=u(t,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>fS(h))),f(e,["tools"],c)}const a=u(t,["generationConfig"]);return e!==void 0&&a!=null&&f(e,["generationConfig"],a),n}function Z1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["contents"]);if(r!=null){let c=di(r);Array.isArray(c)&&(c=c.map(h=>za(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["config"],W1(a,n)),n}function j1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["contents"]);if(r!=null){let c=di(r);Array.isArray(c)&&(c=c.map(h=>za(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["config"],a),n}function ek(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["videoBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Is(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function tk(t,e){const n={},i=u(t,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const a=u(t,["fps"]);e!==void 0&&a!=null&&f(e,["parameters","fps"],a);const c=u(t,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const m=u(t,["aspectRatio"]);e!==void 0&&m!=null&&f(e,["parameters","aspectRatio"],m);const p=u(t,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const v=u(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=u(t,["pubsubTopic"]);e!==void 0&&E!=null&&f(e,["parameters","pubsubTopic"],E);const S=u(t,["negativePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","negativePrompt"],S);const I=u(t,["enhancePrompt"]);e!==void 0&&I!=null&&f(e,["parameters","enhancePrompt"],I);const x=u(t,["generateAudio"]);e!==void 0&&x!=null&&f(e,["parameters","generateAudio"],x);const L=u(t,["lastFrame"]);e!==void 0&&L!=null&&f(e,["instances[0]","lastFrame"],Ha(L));const F=u(t,["compressionQuality"]);return e!==void 0&&F!=null&&f(e,["parameters","compressionQuality"],F),n}function nk(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["image"]);a!=null&&f(n,["instances[0]","image"],Ha(a));const c=u(e,["video"]);c!=null&&f(n,["instances[0]","video"],ek(c));const h=u(e,["config"]);return h!=null&&f(n,["config"],tk(h,n)),n}function ik(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function ok(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function rk(t){const e={},n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function sk(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],ik(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],ok(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],rk(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function ak(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>sk(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function lk(t){const e={},n=u(t,["citationSources"]);return n!=null&&f(e,["citations"],n),e}function uk(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function ck(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>uk(r))),f(e,["urlMetadata"],i)}return e}function fk(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],ak(n));const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],lk(i));const r=u(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const a=u(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=u(t,["urlContextMetadata"]);c!=null&&f(e,["urlContextMetadata"],ck(c));const h=u(t,["avgLogprobs"]);h!=null&&f(e,["avgLogprobs"],h);const m=u(t,["groundingMetadata"]);m!=null&&f(e,["groundingMetadata"],m);const p=u(t,["index"]);p!=null&&f(e,["index"],p);const v=u(t,["logprobsResult"]);v!=null&&f(e,["logprobsResult"],v);const E=u(t,["safetyRatings"]);return E!=null&&f(e,["safetyRatings"],E),e}function rE(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>fk(p))),f(e,["candidates"],m)}const r=u(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const a=u(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=u(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=u(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function dk(t){const e={},n=u(t,["values"]);return n!=null&&f(e,["values"],n),e}function hk(){return{}}function pk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>dk(c))),f(e,["embeddings"],a)}return u(t,["metadata"])!=null&&f(e,["metadata"],hk()),e}function mk(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],Is(n));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function dS(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=u(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=u(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function gk(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],mk(n));const i=u(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=u(t,["_self"]);return r!=null&&f(e,["safetyAttributes"],dS(r)),e}function yk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>gk(c))),f(e,["generatedImages"],a)}const r=u(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],dS(r)),e}function vk(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=u(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function Kp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["version"]);a!=null&&f(e,["version"],a);const c=u(t,["_self"]);c!=null&&f(e,["tunedModelInfo"],vk(c));const h=u(t,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const m=u(t,["outputTokenLimit"]);m!=null&&f(e,["outputTokenLimit"],m);const p=u(t,["supportedGenerationMethods"]);return p!=null&&f(e,["supportedActions"],p),e}function _k(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["_self"]);if(r!=null){let a=W0(r);Array.isArray(a)&&(a=a.map(c=>Kp(c))),f(e,["models"],a)}return e}function Tk(){return{}}function Ek(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["totalTokens"]);i!=null&&f(e,["totalTokens"],i);const r=u(t,["cachedContentTokenCount"]);return r!=null&&f(e,["cachedContentTokenCount"],r),e}function Sk(t){const e={},n=u(t,["video","uri"]);n!=null&&f(e,["uri"],n);const i=u(t,["video","encodedVideo"]);i!=null&&f(e,["videoBytes"],Is(i));const r=u(t,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function Ak(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],Sk(n)),e}function Ck(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>Ak(c))),f(e,["generatedVideos"],a)}const i=u(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function wk(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);a!=null&&f(e,["error"],a);const c=u(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],Ck(c)),e}function Ik(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function Rk(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function xk(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function bk(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],Ik(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],Rk(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],xk(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function Mk(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>bk(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function Nk(t){const e={},n=u(t,["citations"]);return n!=null&&f(e,["citations"],n),e}function kk(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function Dk(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>kk(r))),f(e,["urlMetadata"],i)}return e}function Pk(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],Mk(n));const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],Nk(i));const r=u(t,["finishMessage"]);r!=null&&f(e,["finishMessage"],r);const a=u(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=u(t,["urlContextMetadata"]);c!=null&&f(e,["urlContextMetadata"],Dk(c));const h=u(t,["avgLogprobs"]);h!=null&&f(e,["avgLogprobs"],h);const m=u(t,["groundingMetadata"]);m!=null&&f(e,["groundingMetadata"],m);const p=u(t,["index"]);p!=null&&f(e,["index"],p);const v=u(t,["logprobsResult"]);v!=null&&f(e,["logprobsResult"],v);const E=u(t,["safetyRatings"]);return E!=null&&f(e,["safetyRatings"],E),e}function sE(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(v=>Pk(v))),f(e,["candidates"],p)}const r=u(t,["createTime"]);r!=null&&f(e,["createTime"],r);const a=u(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const c=u(t,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const h=u(t,["responseId"]);h!=null&&f(e,["responseId"],h);const m=u(t,["usageMetadata"]);return m!=null&&f(e,["usageMetadata"],m),e}function Vk(t){const e={},n=u(t,["truncated"]);n!=null&&f(e,["truncated"],n);const i=u(t,["token_count"]);return i!=null&&f(e,["tokenCount"],i),e}function Lk(t){const e={},n=u(t,["values"]);n!=null&&f(e,["values"],n);const i=u(t,["statistics"]);return i!=null&&f(e,["statistics"],Vk(i)),e}function Uk(t){const e={},n=u(t,["billableCharacterCount"]);return n!=null&&f(e,["billableCharacterCount"],n),e}function Ok(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>Lk(c))),f(e,["embeddings"],a)}const r=u(t,["metadata"]);return r!=null&&f(e,["metadata"],Uk(r)),e}function Bk(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],Is(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function hS(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=u(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=u(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function jf(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],Bk(n));const i=u(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=u(t,["_self"]);r!=null&&f(e,["safetyAttributes"],hS(r));const a=u(t,["prompt"]);return a!=null&&f(e,["enhancedPrompt"],a),e}function Fk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>jf(c))),f(e,["generatedImages"],a)}const r=u(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],hS(r)),e}function qk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>jf(a))),f(e,["generatedImages"],r)}return e}function Gk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>jf(a))),f(e,["generatedImages"],r)}return e}function zk(t){const e={},n=u(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>jf(r))),f(e,["generatedImages"],i)}return e}function Hk(t){const e={},n=u(t,["endpoint"]);n!=null&&f(e,["name"],n);const i=u(t,["deployedModelId"]);return i!=null&&f(e,["deployedModelId"],i),e}function $k(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=u(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function Yk(t){const e={},n=u(t,["checkpointId"]);n!=null&&f(e,["checkpointId"],n);const i=u(t,["epoch"]);i!=null&&f(e,["epoch"],i);const r=u(t,["step"]);return r!=null&&f(e,["step"],r),e}function Jp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["versionId"]);a!=null&&f(e,["version"],a);const c=u(t,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>Hk(S))),f(e,["endpoints"],E)}const h=u(t,["labels"]);h!=null&&f(e,["labels"],h);const m=u(t,["_self"]);m!=null&&f(e,["tunedModelInfo"],$k(m));const p=u(t,["defaultCheckpointId"]);p!=null&&f(e,["defaultCheckpointId"],p);const v=u(t,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>Yk(S))),f(e,["checkpoints"],E)}return e}function Kk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["_self"]);if(r!=null){let a=W0(r);Array.isArray(a)&&(a=a.map(c=>Jp(c))),f(e,["models"],a)}return e}function Jk(){return{}}function Qk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["totalTokens"]);return i!=null&&f(e,["totalTokens"],i),e}function Xk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["tokensInfo"]);return i!=null&&f(e,["tokensInfo"],i),e}function Wk(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=u(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],Is(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Zk(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],Wk(n)),e}function jk(t){const e={},n=u(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>Zk(c))),f(e,["generatedVideos"],a)}const i=u(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function eD(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);a!=null&&f(e,["error"],a);const c=u(t,["response"]);return c!=null&&f(e,["response"],jk(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tD="Content-Type",nD="X-Server-Timeout",iD="User-Agent",Qp="x-goog-api-client",oD="1.13.0",rD=`google-genai-sdk/${oD}`,sD="v1beta1",aD="v1beta",aE=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class lD{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:sD,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:aD,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))r.searchParams.append(c,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const r=new AbortController,a=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>r.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}i&&i.addEventListener("abort",()=>{r.abort()}),e.signal=a}return n&&n.extraBody!==null&&uD(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await lE(r),new qp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await lE(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return Ia(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:h,value:m}=yield wt(r.read());if(h){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=a.decode(m,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),I=S.status,x=S.code,L=`got status: ${I}. ${JSON.stringify(E)}`;if(x>=400&&x<600)throw new Wf({message:L,status:x})}}catch(E){if(E.name==="ApiError")throw E}c+=p;let v=c.match(aE);for(;v;){const E=v[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield wt(new qp(S)),c=c.slice(v[0].length),v=c.match(aE)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=rD+" "+this.clientOptions.userAgentExtra;return e[iD]=n,e[Qp]=n,e[tD]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,r]of Object.entries(e.headers))n.append(i,r);e.timeout&&e.timeout>0&&n.append(nD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);r.sizeBytes=String(c.size);const h=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const m=await this.fetchUploadUrl(r,n);return a.upload(e,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},c=await this.request({path:Te("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:r});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(i=c==null?void 0:c.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function lE(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Wf({message:r,status:n}):new Error(r)}}function uD(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,c){const h=Object.assign({},a);for(const m in c)if(Object.prototype.hasOwnProperty.call(c,m)){const p=c[m],v=h[m];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[m]=i(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[m]=p)}return h}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cD="mcp_used/unknown";let fD=!1;function pS(t){for(const e of t)if(dD(e)||typeof e=="object"&&"inputSchema"in e)return!0;return fD}function mS(t){var e;const n=(e=t[Qp])!==null&&e!==void 0?e:"";t[Qp]=(n+` ${cD}`).trimStart()}function dD(t){return t!==null&&typeof t=="object"&&t instanceof Nm}function hD(t,e=100){return Ia(this,arguments,function*(){let i,r=0;for(;r<e;){const a=yield wt(t.listTools({cursor:i}));for(const c of a.tools)yield yield wt(c),r++;if(!a.nextCursor)break;i=a.nextCursor}})}class Nm{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Nm(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const a={},c=[];for(const v of this.mcpClients)try{for(var h=!0,m=(n=void 0,uu(hD(v))),p;p=await m.next(),e=p.done,!e;h=!0){r=p.value,h=!1;const E=r;c.push(E);const S=E.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(E){n={error:E}}finally{try{!h&&!e&&(i=m.return)&&await i.call(m)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),iR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await r.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function pD(t,e,n){const i=new QI;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);const a=iN(r);Object.assign(i,a),e(i)}class mD{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=vD(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),m=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(ie=>{p=ie}),E=e.callbacks,S=function(){p({})},I=this.apiClient,x={onopen:S,onmessage:ie=>{pD(I,E.onmessage,ie)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(ie){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(ie){}},L=this.webSocketFactory.create(m,yD(c),x);L.connect(),await v;const F=ct(this.apiClient,e.model),re=lS({model:F}),oe=Yp({setup:re});return L.send(JSON.stringify(oe)),new gD(L,this.apiClient)}}class gD{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=tM(e),i=uS(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=nM(e),i=Yp(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const n=Yp({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ca.PLAY)}pause(){this.sendPlaybackControl(Ca.PAUSE)}stop(){this.sendPlaybackControl(Ca.STOP)}resetContext(){this.sendPlaybackControl(Ca.RESET_CONTEXT)}close(){this.conn.close()}}function yD(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function vD(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _D="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function TD(t,e,n){const i=new JI;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const c=yN(a);Object.assign(i,c)}else{const c=JM(a);Object.assign(i,c)}e(i)}class ED{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new mD(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,a,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&pS(e.config.tools)&&mS(E);const S=wD(E);if(this.apiClient.isVertexAI())v=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const b=this.apiClient.getApiKey();let V="BidiGenerateContent",N="key";b!=null&&b.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",N="access_token"),v=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${V}?${N}=${b}`}let I=()=>{};const x=new Promise(b=>{I=b}),L=e.callbacks,F=function(){var b;(b=L==null?void 0:L.onopen)===null||b===void 0||b.call(L),I({})},re=this.apiClient,oe={onopen:F,onmessage:b=>{TD(re,L.onmessage,b)},onerror:(n=L==null?void 0:L.onerror)!==null&&n!==void 0?n:function(b){},onclose:(i=L==null?void 0:L.onclose)!==null&&i!==void 0?i:function(b){}},ie=this.webSocketFactory.create(v,CD(S),oe);ie.connect(),await x;let fe=ct(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&fe.startsWith("publishers/")){const b=this.apiClient.getProject(),V=this.apiClient.getLocation();fe=`projects/${b}/locations/${V}/`+fe}let ae={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[bf.AUDIO]}:e.config.responseModalities=[bf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const me=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],k=[];for(const b of me)if(this.isCallableTool(b)){const V=b;k.push(await V.tool())}else k.push(b);k.length>0&&(e.config.tools=k);const M={model:fe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ae=bM(this.apiClient,M):ae=Wb(this.apiClient,M),delete ae.config,ie.send(JSON.stringify(ae)),new AD(ie,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const SD={turnComplete:!0};class AD{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=di(n.turns),e.isVertexAI()?i=i.map(r=>za(r)):i=i.map(r=>Zf(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(_D)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},SD),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:kM(e)}:n={realtimeInput:eM(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function CD(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function wD(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uE=10;function cE(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ra(c)){r=!0;break}if(!r)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ra(t){return"callTool"in t&&typeof t.callTool=="function"}function ID(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Ra(r)))!==null&&i!==void 0?i:!1}function RD(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!Ra(r)))!==null&&i!==void 0?i:!1}function fE(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xD extends ws{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,a,c,h;const m=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!ID(n)||cE(n.config))return await this.generateContentInternal(m);if(RD(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,v;const E=di(m.contents),S=(a=(r=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:uE;let I=0;for(;I<S&&(p=await this.generateContentInternal(m),!(!p.functionCalls||p.functionCalls.length===0));){const x=p.candidates[0].content,L=[];for(const F of(h=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Ra(F)){const oe=await F.callTool(p.functionCalls);L.push(...oe)}I++,v={role:"user",parts:L},m.contents=di(m.contents),m.contents.push(x),m.contents.push(v),fE(m.config)&&(E.push(x),E.push(v))}return fE(m.config)&&(p.automaticFunctionCallingHistory=E),p},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),cE(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let a;const c=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((r=m==null?void 0:m.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=m==null?void 0:m.safetyAttributes:c.push(m);let h;return a?h={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},h}),this.list=async n=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Ru(vs.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const c=await Promise.all(a.map(async m=>Ra(m)?await m.tool():m)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&pS(e.config.tools)){const m=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),mS(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var n,i,r;const a=new Map;for(const c of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ra(c)){const h=c,m=await h.tool();for(const p of(r=m.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,h)}}return a}async processAfcStream(e){var n,i,r;const a=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:uE;let c=!1,h=0;const m=await this.initAfcToolsMap(e);return function(p,v,E){var S,I;return Ia(this,arguments,function*(){for(var x,L,F,re;h<a;){c&&(h++,c=!1);const ae=yield wt(p.processParamsMaybeAddMcpUsage(E)),me=yield wt(p.generateContentStreamInternal(ae)),k=[],M=[];try{for(var oe=!0,ie=(L=void 0,uu(me)),fe;fe=yield wt(ie.next()),x=fe.done,!x;oe=!0){re=fe.value,oe=!1;const b=re;if(yield yield wt(b),b.candidates&&(!((S=b.candidates[0])===null||S===void 0)&&S.content)){M.push(b.candidates[0].content);for(const V of(I=b.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(h<a&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(V.functionCall.name)){const N=yield wt(v.get(V.functionCall.name).callTool([V.functionCall]));k.push(...N)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(b){L={error:b}}finally{try{!oe&&!x&&(F=ie.return)&&(yield wt(F.call(ie)))}finally{if(L)throw L.error}}if(k.length>0){c=!0;const b=new tu;b.candidates=[{content:{role:"user",parts:k}}],yield yield wt(b);const V=[];V.push(...M),V.push({role:"user",parts:k});const N=di(E.contents).concat(V);E.contents=N}else break}})}(this,m,e)}async generateContentInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=oE(this.apiClient,e);return h=Te("{model}:generateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=sE(v),S=new tu;return Object.assign(S,E),S})}else{const p=iE(this.apiClient,e);return h=Te("{model}:generateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=rE(v),S=new tu;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=oE(this.apiClient,e);return h=Te("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(E){return Ia(this,arguments,function*(){var S,I,x,L;try{for(var F=!0,re=uu(E),oe;oe=yield wt(re.next()),S=oe.done,!S;F=!0){L=oe.value,F=!1;const ie=L,fe=sE(yield wt(ie.json()));fe.sdkHttpResponse={headers:ie.headers};const ae=new tu;Object.assign(ae,fe),yield yield wt(ae)}}catch(ie){I={error:ie}}finally{try{!F&&!S&&(x=re.return)&&(yield wt(x.call(re)))}finally{if(I)throw I.error}}})})}else{const p=iE(this.apiClient,e);return h=Te("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(E){return Ia(this,arguments,function*(){var S,I,x,L;try{for(var F=!0,re=uu(E),oe;oe=yield wt(re.next()),S=oe.done,!S;F=!0){L=oe.value,F=!1;const ie=L,fe=rE(yield wt(ie.json()));fe.sdkHttpResponse={headers:ie.headers};const ae=new tu;Object.assign(ae,fe),yield yield wt(ae)}}catch(ie){I={error:ie}}finally{try{!F&&!S&&(x=re.return)&&(yield wt(x.call(re)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=b1(this.apiClient,e);return h=Te("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Ok(v),S=new LT;return Object.assign(S,E),S})}else{const p=GN(this.apiClient,e);return h=Te("{model}:batchEmbedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=pk(v),S=new LT;return Object.assign(S,E),S})}}async generateImagesInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=N1(this.apiClient,e);return h=Te("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Fk(v),S=new UT;return Object.assign(S,E),S})}else{const p=HN(this.apiClient,e);return h=Te("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=yk(v),S=new UT;return Object.assign(S,E),S})}}async editImageInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=O1(this.apiClient,e);return a=Te("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=qk(m),v=new qI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=F1(this.apiClient,e);return a=Te("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=Gk(m),v=new GI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=H1(this.apiClient,e);return a=Te("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>{const p=zk(m),v=new zI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=$1(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Jp(v))}else{const p=$N(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>Kp(v))}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=K1(this.apiClient,e);return h=Te("{models_url}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Kk(v),S=new OT;return Object.assign(S,E),S})}else{const p=KN(this.apiClient,e);return h=Te("{models_url}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=_k(v),S=new OT;return Object.assign(S,E),S})}}async update(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=Q1(this.apiClient,e);return h=Te("{model}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Jp(v))}else{const p=QN(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>Kp(v))}}async delete(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=X1(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(()=>{const v=Jk(),E=new BT;return Object.assign(E,v),E})}else{const p=XN(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(()=>{const v=Tk(),E=new BT;return Object.assign(E,v),E})}}async countTokens(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=Z1(this.apiClient,e);return h=Te("{model}:countTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Qk(v),S=new FT;return Object.assign(S,E),S})}else{const p=ZN(this.apiClient,e);return h=Te("{model}:countTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Ek(v),S=new FT;return Object.assign(S,E),S})}}async computeTokens(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=j1(this.apiClient,e);return a=Te("{model}:computeTokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=Xk(m),v=new HI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=nk(this.apiClient,e);return h=Te("{model}:predictLongRunning",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>{const E=eD(v),S=new Mf;return Object.assign(S,E),S})}else{const p=t1(this.apiClient,e);return h=Te("{model}:predictLongRunning",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>{const E=wk(v),S=new Mf;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bD(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["_url","operationName"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function MD(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["_url","operationName"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function ND(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["operationName"],n);const i=u(t,["resourceName"]);i!=null&&f(e,["_url","resourceName"],i);const r=u(t,["config"]);return r!=null&&f(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kD extends ws{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=MD(e);return h=Te("{operationName}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c}else{const p=bD(e);return h=Te("{operationName}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=ND(e);return a=Te("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DD(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function gS(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],DD(n)),e}function PD(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],gS(i)),e}function VD(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>PD(r))),f(e,["speakerVoiceConfigs"],i)}return e}function LD(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],gS(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],VD(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function UD(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function OD(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function BD(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function FD(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],UD(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],OD(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],BD(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function qD(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>FD(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function GD(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function zD(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function HD(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],zD(n)),e}function $D(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function YD(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],$D(n)),e}function KD(){return{}}function JD(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>GD(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],HD(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],YD(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],KD());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function QD(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function dE(){return{}}function XD(t){const e={},n=u(t,["disabled"]);n!=null&&f(e,["disabled"],n);const i=u(t,["startOfSpeechSensitivity"]);i!=null&&f(e,["startOfSpeechSensitivity"],i);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&f(e,["endOfSpeechSensitivity"],r);const a=u(t,["prefixPaddingMs"]);a!=null&&f(e,["prefixPaddingMs"],a);const c=u(t,["silenceDurationMs"]);return c!=null&&f(e,["silenceDurationMs"],c),e}function WD(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&f(e,["automaticActivityDetection"],XD(n));const i=u(t,["activityHandling"]);i!=null&&f(e,["activityHandling"],i);const r=u(t,["turnCoverage"]);return r!=null&&f(e,["turnCoverage"],r),e}function ZD(t){const e={},n=u(t,["targetTokens"]);return n!=null&&f(e,["targetTokens"],n),e}function jD(t){const e={},n=u(t,["triggerTokens"]);n!=null&&f(e,["triggerTokens"],n);const i=u(t,["slidingWindow"]);return i!=null&&f(e,["slidingWindow"],ZD(i)),e}function eP(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&f(e,["proactiveAudio"],n),e}function tP(t,e){const n={},i=u(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=u(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=u(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=u(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const p=u(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=u(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=u(t,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],LD(Mm(E)));const S=u(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&f(e,["setup","systemInstruction"],qD(Cn(I)));const x=u(t,["tools"]);if(e!==void 0&&x!=null){let ae=qa(x);Array.isArray(ae)&&(ae=ae.map(me=>JD(Fa(me)))),f(e,["setup","tools"],ae)}const L=u(t,["sessionResumption"]);e!==void 0&&L!=null&&f(e,["setup","sessionResumption"],QD(L));const F=u(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&f(e,["setup","inputAudioTranscription"],dE());const re=u(t,["outputAudioTranscription"]);e!==void 0&&re!=null&&f(e,["setup","outputAudioTranscription"],dE());const oe=u(t,["realtimeInputConfig"]);e!==void 0&&oe!=null&&f(e,["setup","realtimeInputConfig"],WD(oe));const ie=u(t,["contextWindowCompression"]);e!==void 0&&ie!=null&&f(e,["setup","contextWindowCompression"],jD(ie));const fe=u(t,["proactivity"]);return e!==void 0&&fe!=null&&f(e,["setup","proactivity"],eP(fe)),n}function nP(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["setup","model"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],tP(r,n)),n}function iP(t,e,n){const i={},r=u(e,["expireTime"]);n!==void 0&&r!=null&&f(n,["expireTime"],r);const a=u(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&f(n,["newSessionExpireTime"],a);const c=u(e,["uses"]);n!==void 0&&c!=null&&f(n,["uses"],c);const h=u(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&f(n,["bidiGenerateContentSetup"],nP(t,h));const m=u(e,["lockAdditionalFields"]);return n!==void 0&&m!=null&&f(n,["fieldMask"],m),i}function oP(t,e){const n={},i=u(e,["config"]);return i!=null&&f(n,["config"],iP(t,i,n)),n}function rP(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sP(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function aP(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=sP(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(p=>c.includes(p)?`generationConfig.${p}`:p));const m=[];a&&m.push(a),h.length>0&&m.push(...h),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class lP extends ws{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=oP(this.apiClient,e);a=Te("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const m=aP(h,e.config);return r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>rP(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uP(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function cP(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=u(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function fP(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],cP(n,e)),e}function dP(t){const e={},n=u(t,["textInput"]);n!=null&&f(e,["textInput"],n);const i=u(t,["output"]);return i!=null&&f(e,["output"],i),e}function hP(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=u(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>dP(r))),f(e,["examples","examples"],i)}return e}function pP(t,e){const n={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=u(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&f(e,["displayName"],i),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=u(t,["epochCount"]);e!==void 0&&r!=null&&f(e,["tuningTask","hyperparameters","epochCount"],r);const a=u(t,["learningRateMultiplier"]);if(a!=null&&f(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=u(t,["batchSize"]);e!==void 0&&c!=null&&f(e,["tuningTask","hyperparameters","batchSize"],c);const h=u(t,["learningRate"]);return e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","learningRate"],h),n}function mP(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["trainingDataset"]);i!=null&&f(e,["tuningTask","trainingData"],hP(i));const r=u(t,["config"]);return r!=null&&f(e,["config"],pP(r,e)),e}function gP(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function yP(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=u(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function vP(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],yP(n,e)),e}function _P(t,e){const n={},i=u(t,["gcsUri"]);e!==void 0&&i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],i);const r=u(t,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r),u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function TP(t,e){const n={},i=u(t,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);const r=u(t,["vertexDatasetResource"]);return e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r),n}function EP(t,e){const n={},i=u(t,["validationDataset"]);e!==void 0&&i!=null&&f(e,["supervisedTuningSpec"],TP(i,n));const r=u(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&f(e,["tunedModelDisplayName"],r);const a=u(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const c=u(t,["epochCount"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],c);const h=u(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const m=u(t,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],m);const p=u(t,["adapterSize"]);if(e!==void 0&&p!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],p),u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function SP(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["trainingDataset"]);i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],_P(i,e));const r=u(t,["config"]);return r!=null&&f(e,["config"],EP(r,e)),e}function AP(t){const e={},n=u(t,["name"]);n!=null&&f(e,["model"],n);const i=u(t,["name"]);return i!=null&&f(e,["endpoint"],i),e}function yS(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["state"]);r!=null&&f(e,["state"],J0(r));const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["tuningTask","startTime"]);c!=null&&f(e,["startTime"],c);const h=u(t,["tuningTask","completeTime"]);h!=null&&f(e,["endTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["description"]);p!=null&&f(e,["description"],p);const v=u(t,["baseModel"]);v!=null&&f(e,["baseModel"],v);const E=u(t,["_self"]);E!=null&&f(e,["tunedModel"],AP(E));const S=u(t,["distillationSpec"]);S!=null&&f(e,["distillationSpec"],S);const I=u(t,["experiment"]);I!=null&&f(e,["experiment"],I);const x=u(t,["labels"]);x!=null&&f(e,["labels"],x);const L=u(t,["pipelineJob"]);L!=null&&f(e,["pipelineJob"],L);const F=u(t,["satisfiesPzi"]);F!=null&&f(e,["satisfiesPzi"],F);const re=u(t,["satisfiesPzs"]);re!=null&&f(e,["satisfiesPzs"],re);const oe=u(t,["serviceAccount"]);oe!=null&&f(e,["serviceAccount"],oe);const ie=u(t,["tunedModelDisplayName"]);return ie!=null&&f(e,["tunedModelDisplayName"],ie),e}function CP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["tunedModels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>yS(c))),f(e,["tuningJobs"],a)}return e}function wP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const a=u(t,["done"]);a!=null&&f(e,["done"],a);const c=u(t,["error"]);return c!=null&&f(e,["error"],c),e}function IP(t){const e={},n=u(t,["checkpointId"]);n!=null&&f(e,["checkpointId"],n);const i=u(t,["epoch"]);i!=null&&f(e,["epoch"],i);const r=u(t,["step"]);r!=null&&f(e,["step"],r);const a=u(t,["endpoint"]);return a!=null&&f(e,["endpoint"],a),e}function RP(t){const e={},n=u(t,["model"]);n!=null&&f(e,["model"],n);const i=u(t,["endpoint"]);i!=null&&f(e,["endpoint"],i);const r=u(t,["checkpoints"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>IP(c))),f(e,["checkpoints"],a)}return e}function Xp(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["state"]);r!=null&&f(e,["state"],J0(r));const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["startTime"]);c!=null&&f(e,["startTime"],c);const h=u(t,["endTime"]);h!=null&&f(e,["endTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["error"]);p!=null&&f(e,["error"],p);const v=u(t,["description"]);v!=null&&f(e,["description"],v);const E=u(t,["baseModel"]);E!=null&&f(e,["baseModel"],E);const S=u(t,["tunedModel"]);S!=null&&f(e,["tunedModel"],RP(S));const I=u(t,["supervisedTuningSpec"]);I!=null&&f(e,["supervisedTuningSpec"],I);const x=u(t,["tuningDataStats"]);x!=null&&f(e,["tuningDataStats"],x);const L=u(t,["encryptionSpec"]);L!=null&&f(e,["encryptionSpec"],L);const F=u(t,["partnerModelTuningSpec"]);F!=null&&f(e,["partnerModelTuningSpec"],F);const re=u(t,["distillationSpec"]);re!=null&&f(e,["distillationSpec"],re);const oe=u(t,["experiment"]);oe!=null&&f(e,["experiment"],oe);const ie=u(t,["labels"]);ie!=null&&f(e,["labels"],ie);const fe=u(t,["pipelineJob"]);fe!=null&&f(e,["pipelineJob"],fe);const ae=u(t,["satisfiesPzi"]);ae!=null&&f(e,["satisfiesPzi"],ae);const me=u(t,["satisfiesPzs"]);me!=null&&f(e,["satisfiesPzs"],me);const k=u(t,["serviceAccount"]);k!=null&&f(e,["serviceAccount"],k);const M=u(t,["tunedModelDisplayName"]);return M!=null&&f(e,["tunedModelDisplayName"],M),e}function xP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["tuningJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>Xp(c))),f(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bP extends ws{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Ru(vs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const i=await this.tuneMldevInternal(n);let r="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?r=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(r=i.name.split("/operations/")[0]),{name:r,state:Fp.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=gP(e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>Xp(v))}else{const p=uP(e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>yS(v))}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=vP(e);return h=Te("tuningJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=xP(v),S=new GT;return Object.assign(S,E),S})}else{const p=fP(e);return h=Te("tunedModels",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=CP(v),S=new GT;return Object.assign(S,E),S})}}async tuneInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=SP(e);return a=Te("tuningJobs",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>Xp(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=mP(e);return a=Te("tunedModels",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>wP(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MP{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const NP=1024*1024*8,kP=3,DP=1e3,PP=2,Ip="x-goog-upload-status";async function VP(t,e,n){var i,r,a;let c=0,h=0,m=new qp(new Response),p="upload";for(c=t.size;h<c;){const E=Math.min(NP,c-h),S=t.slice(h,h+E);h+E>=c&&(p+=", finalize");let I=0,x=DP;for(;I<kP&&(m=await n.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(h),"Content-Length":String(E)}}}),!(!((i=m==null?void 0:m.headers)===null||i===void 0)&&i[Ip]));)I++,await UP(x),x=x*PP;if(h+=E,((r=m==null?void 0:m.headers)===null||r===void 0?void 0:r[Ip])!=="active")break;if(c<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(m==null?void 0:m.json());if(((a=m==null?void 0:m.headers)===null||a===void 0?void 0:a[Ip])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function LP(t){return{size:t.size,type:t.type}}function UP(t){return new Promise(e=>setTimeout(e,t))}class OP{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await VP(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await LP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BP{create(e,n,i){return new FP(e,n,i)}}class FP{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hE="x-goog-api-key";class qP{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(hE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(hE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GP="gl-node/";class zP{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=FI(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new qP(this.apiKey);this.apiClient=new lD({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:GP+"web",uploader:new OP,downloader:new MP}),this.models=new xD(this.apiClient),this.live=new ED(this.apiClient,r,new BP),this.batches=new cx(this.apiClient),this.chats=new pb(this.models,this.apiClient),this.caches=new fb(this.apiClient),this.files=new Rb(this.apiClient),this.operations=new kD(this.apiClient),this.authTokens=new lP(this.apiClient),this.tunings=new bP(this.apiClient)}}let Fn=null;const HP=t=>{if(!t||!t.startsWith("AIza"))return Fn&&(Fn=null),!1;try{return Fn=new zP({apiKey:t}),!0}catch(e){return console.error("Failed to initialize GoogleGenAI with provided key:",e),Fn=null,!1}},lf=()=>!!Fn,$P=async(t,e)=>{var n,i;if(!Fn)throw new Error("Gemini AI SDK not initialized or API key is invalid. Please configure it in settings.");try{const r=await Fn.models.generateContent({model:q0,contents:[{role:"user",parts:[{text:t}]}],config:{systemInstruction:{role:"system",parts:[{text:e}]},temperature:.8,maxOutputTokens:2048,safetySettings:[{category:Ji.HARM_CATEGORY_HARASSMENT,threshold:Qi.BLOCK_MEDIUM_AND_ABOVE},{category:Ji.HARM_CATEGORY_HATE_SPEECH,threshold:Qi.BLOCK_MEDIUM_AND_ABOVE},{category:Ji.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Qi.BLOCK_MEDIUM_AND_ABOVE},{category:Ji.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Qi.BLOCK_MEDIUM_AND_ABOVE}]}}),a=r.text;if(typeof a=="string")return a;{if(console.error("Gemini API response.text was not a string. Full response:",JSON.stringify(r,null,2)),(n=r==null?void 0:r.promptFeedback)!=null&&n.blockReason)throw new Error(`Prompt was blocked. Reason: ${r.promptFeedback.blockReason}${r.promptFeedback.blockReasonMessage?" - "+r.promptFeedback.blockReasonMessage:""}`);const c=(i=r==null?void 0:r.candidates)==null?void 0:i[0];if((c==null?void 0:c.finishReason)==="SAFETY"){const h=c.safetyRatings;let m=h==null?void 0:h.filter(p=>p.probability!=="NEGLIGIBLE"&&p.probability!=="LOW").map(p=>p.category.replace("HARM_CATEGORY_","")).join(", ");throw new Error(`Response blocked by safety filters. Categories: ${m||"Content policy"}.`)}throw(c==null?void 0:c.finishReason)==="OTHER"||(c==null?void 0:c.finishReason)==="RECITATION"||!c?new Error(`Gemini API returned an empty or malformed response. Reason: ${(c==null?void 0:c.finishReason)||"Unknown/No Candidate"}.`):new Error("Gemini API returned an invalid or unexpected text response structure.")}}catch(r){console.error("Error calling Gemini API (non-streaming):",r);const a=r instanceof Error?r.message:String(r);throw a.includes("API key not valid")||a.includes("API_KEY_INVALID")||a.includes("permission_denied")?new Error("The provided Gemini API key is invalid or lacks permissions. Please check it in settings."):r}};async function*pE(t,e,n){var r,a;if(!Fn)throw new Error("Gemini AI SDK not initialized. Please configure it in settings.");const i=[];n&&n.length>0&&i.push(...n),i.push({text:t});try{const c=await Fn.models.generateContentStream({model:q0,contents:[{role:"user",parts:i}],config:{systemInstruction:{role:"system",parts:[{text:e}]},temperature:.8,maxOutputTokens:2048,safetySettings:[{category:Ji.HARM_CATEGORY_HARASSMENT,threshold:Qi.BLOCK_MEDIUM_AND_ABOVE},{category:Ji.HARM_CATEGORY_HATE_SPEECH,threshold:Qi.BLOCK_MEDIUM_AND_ABOVE},{category:Ji.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Qi.BLOCK_MEDIUM_AND_ABOVE},{category:Ji.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Qi.BLOCK_MEDIUM_AND_ABOVE}]}});for await(const h of c){if((r=h==null?void 0:h.promptFeedback)!=null&&r.blockReason)throw new Error(`Stream blocked by Gemini. Reason: ${h.promptFeedback.blockReason}${h.promptFeedback.blockReasonMessage?" - "+h.promptFeedback.blockReasonMessage:""}.`);const m=(a=h==null?void 0:h.candidates)==null?void 0:a[0];if((m==null?void 0:m.finishReason)==="SAFETY"){const p=m.safetyRatings;let v=p==null?void 0:p.filter(E=>E.probability!=="NEGLIGIBLE"&&E.probability!=="LOW").map(E=>E.category.replace("HARM_CATEGORY_","")).join(", ");throw new Error(`Stream ended by Gemini's safety filters. Categories: ${v||"Content policy"}.`)}if(!h.text&&((m==null?void 0:m.finishReason)==="OTHER"||(m==null?void 0:m.finishReason)==="RECITATION"))throw new Error(`Gemini stream ended unexpectedly or provided empty content. Reason: ${m==null?void 0:m.finishReason}.`);yield h}}catch(c){console.error("Error during Gemini API stream:",c);const h=c instanceof Error?c.message:String(c);throw h.includes("API key not valid")||h.includes("API_KEY_INVALID")||h.includes("permission_denied")?new Error("The provided Gemini API key is invalid or lacks permissions. Please check it in settings."):new Error(`Gemini API streaming error: ${h}`)}}const YP=async t=>{if(!Fn)throw new Error("Gemini AI SDK not initialized.");try{return await Fn.models.generateImages({model:"imagen-3.0-generate-002",prompt:t})}catch(e){throw console.error("Error calling Imagen API:",e),e}},KP=async(t,e)=>{if(!Fn)throw new Error("Gemini AI SDK not initialized.");try{let n=await Fn.models.generateVideos({model:"veo-3.0-generate-preview",prompt:t,image:e});for(;!n.done;)await new Promise(i=>setTimeout(i,1e4)),n=await Fn.operations.get(n);return n.response.generatedVideos[0]}catch(n){throw console.error("Error calling Veo API:",n),n}};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QP=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),mE=t=>{const e=QP(t);return e.charAt(0).toUpperCase()+e.slice(1)},vS=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),XP=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var WP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=_e.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:c,...h},m)=>_e.createElement("svg",{ref:m,...WP,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:vS("lucide",r),...!a&&!XP(h)&&{"aria-hidden":"true"},...h},[...c.map(([p,v])=>_e.createElement(p,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=(t,e)=>{const n=_e.forwardRef(({className:i,...r},a)=>_e.createElement(ZP,{ref:a,iconNode:e,className:vS(`lucide-${JP(mE(t))}`,`lucide-${t}`,i),...r}));return n.displayName=mE(t),n};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],_S=It("bot",jP);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],t2=It("camera",e2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],i2=It("check",n2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],r2=It("chevron-up",o2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],a2=It("circle-x",s2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],u2=It("copy",l2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["path",{d:"M10 11h.01",key:"d2at3l"}],["path",{d:"M14 6h.01",key:"k028ub"}],["path",{d:"M18 6h.01",key:"1v4wsw"}],["path",{d:"M6.5 13.1h.01",key:"1748ia"}],["path",{d:"M22 5c0 9-4 12-6 12s-6-3-6-12c0-2 2-3 6-3s6 1 6 3",key:"172yzv"}],["path",{d:"M17.4 9.9c-.8.8-2 .8-2.8 0",key:"1obv0w"}],["path",{d:"M10.1 7.1C9 7.2 7.7 7.7 6 8.6c-3.5 2-4.7 3.9-3.7 5.6 4.5 7.8 9.5 8.4 11.2 7.4.9-.5 1.9-2.1 1.9-4.7",key:"rqjl8i"}],["path",{d:"M9.1 16.5c.3-1.1 1.4-1.7 2.4-1.4",key:"1mr6wy"}]],f2=It("drama",c2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],h2=It("folder-open",d2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]],m2=It("image-off",p2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],y2=It("library",g2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],_2=It("loader-circle",v2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],E2=It("moon",T2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],A2=It("plus",S2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],w2=It("scan-line",C2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],R2=It("search",I2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],b2=It("send-horizontal",x2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],N2=It("settings",M2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],D2=It("sparkles",k2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],V2=It("sun",P2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],U2=It("trash-2",L2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],B2=It("triangle-alert",O2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],q2=It("user",F2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],z2=It("video",G2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],$2=It("volume-2",H2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],K2=It("volume-x",Y2),J2=({theme:t,selectedAI:e,imageStyle:n,apiKeys:i,apiStatus:r,darkMode:a,soundEnabled:c,setSelectedAI:h,setImageStyle:m,updateApiKey:p,toggleDarkMode:v,toggleSound:E,onClose:S})=>U.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:S,children:U.jsxs("div",{className:`${t.card} rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col`,onClick:I=>I.stopPropagation(),children:[U.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[U.jsx("h2",{className:"text-xl font-bold",children:"Settings"}),U.jsx("button",{onClick:S,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:""})]}),U.jsxs("div",{className:"overflow-y-auto p-6 space-y-6",children:[U.jsxs("section",{children:[U.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Appearance"}),U.jsxs("div",{className:"space-y-3",children:[U.jsxs("div",{className:"flex items-center justify-between",children:[U.jsx("label",{htmlFor:"darkModeToggle",className:"font-medium",children:"Dark Mode"}),U.jsx("button",{onClick:v,id:"darkModeToggle",className:`p-2 rounded-full ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:a?U.jsx(V2,{size:20}):U.jsx(E2,{size:20})})]}),U.jsxs("div",{className:"flex items-center justify-between",children:[U.jsx("label",{htmlFor:"soundToggle",className:"font-medium",children:"Sound Enabled"}),U.jsx("button",{onClick:E,id:"soundToggle",className:`p-2 rounded-full ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:c?U.jsx($2,{size:20}):U.jsx(K2,{size:20})})]})]})]}),U.jsxs("section",{children:[U.jsx("h3",{className:"text-lg font-semibold mb-3",children:"AI Model"}),U.jsx("div",{role:"group",className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.entries(Si).map(([I,x])=>U.jsxs("button",{onClick:()=>h(I),className:`p-3 rounded-lg border text-sm transition-all duration-200 ${e===I?`${x.color} border-current bg-current/10 font-semibold`:`${t.muted} border-gray-300 dark:border-gray-600 hover:border-current hover:bg-gray-500/10`}`,children:[x.icon," ",x.name]},I))})]}),U.jsxs("section",{children:[U.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Image Style (DALL-E)"}),U.jsx("div",{role:"group",className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.entries(PI).map(([I,x])=>U.jsx("button",{onClick:()=>m(I),className:`p-3 rounded-lg border text-sm transition-all duration-200 ${n===I?"text-pink-400 border-pink-400 bg-pink-400/10 font-semibold":`${t.muted} border-gray-300 dark:border-gray-600 hover:border-current hover:text-pink-400 hover:border-pink-400/50 hover:bg-pink-400/10`}`,children:x},I))})]}),U.jsxs("section",{children:[U.jsx("h3",{className:"text-lg font-semibold mb-3",children:"API Keys"}),U.jsxs("div",{className:"space-y-3",children:[U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium mb-1",children:"OpenAI API Key"}),U.jsx("input",{type:"password",placeholder:"sk-...",value:i.openai,onChange:I=>p("openai",I.target.value),className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gemini API Key"}),U.jsx("input",{type:"password",placeholder:"AIza...",value:i.gemini,onChange:I=>p("gemini",I.target.value),className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium mb-1",children:"Claude API Key"}),U.jsx("input",{type:"password",placeholder:"sk-ant-...",value:i.claude,onChange:I=>p("claude",I.target.value),className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`})]})]}),U.jsx("p",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:"Your API keys are saved automatically to your browser's local storage. They are never sent to our servers."})]})]})]})});function km(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Rs=km();function TS(t){Rs=t}var cu={exec:()=>null};function ft(t,e=""){let n=typeof t=="string"?t:t.source;const i={replace:(r,a)=>{let c=typeof a=="string"?a:a.source;return c=c.replace(kn.caret,"$1"),n=n.replace(r,c),i},getRegex:()=>new RegExp(n,e)};return i}var kn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},Q2=/^(?:[ \t]*(?:\n|$))+/,X2=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,W2=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,xu=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Z2=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Dm=/(?:[*+-]|\d{1,9}[.)])/,ES=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,SS=ft(ES).replace(/bull/g,Dm).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),j2=ft(ES).replace(/bull/g,Dm).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Pm=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,eV=/^[^\n]+/,Vm=/(?!\s*\])(?:\\.|[^\[\]\\])+/,tV=ft(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Vm).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),nV=ft(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Dm).getRegex(),ed="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Lm=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,iV=ft("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Lm).replace("tag",ed).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),AS=ft(Pm).replace("hr",xu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ed).getRegex(),oV=ft(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",AS).getRegex(),Um={blockquote:oV,code:X2,def:tV,fences:W2,heading:Z2,hr:xu,html:iV,lheading:SS,list:nV,newline:Q2,paragraph:AS,table:cu,text:eV},gE=ft("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",xu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ed).getRegex(),rV={...Um,lheading:j2,table:gE,paragraph:ft(Pm).replace("hr",xu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",gE).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ed).getRegex()},sV={...Um,html:ft(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Lm).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:cu,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ft(Pm).replace("hr",xu).replace("heading",` *#{1,6} *[^
]`).replace("lheading",SS).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},aV=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,lV=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,CS=/^( {2,}|\\)\n(?!\s*$)/,uV=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,td=/[\p{P}\p{S}]/u,Om=/[\s\p{P}\p{S}]/u,wS=/[^\s\p{P}\p{S}]/u,cV=ft(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Om).getRegex(),IS=/(?!~)[\p{P}\p{S}]/u,fV=/(?!~)[\s\p{P}\p{S}]/u,dV=/(?:[^\s\p{P}\p{S}]|~)/u,hV=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,RS=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,pV=ft(RS,"u").replace(/punct/g,td).getRegex(),mV=ft(RS,"u").replace(/punct/g,IS).getRegex(),xS="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",gV=ft(xS,"gu").replace(/notPunctSpace/g,wS).replace(/punctSpace/g,Om).replace(/punct/g,td).getRegex(),yV=ft(xS,"gu").replace(/notPunctSpace/g,dV).replace(/punctSpace/g,fV).replace(/punct/g,IS).getRegex(),vV=ft("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,wS).replace(/punctSpace/g,Om).replace(/punct/g,td).getRegex(),_V=ft(/\\(punct)/,"gu").replace(/punct/g,td).getRegex(),TV=ft(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),EV=ft(Lm).replace("(?:-->|$)","-->").getRegex(),SV=ft("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",EV).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),kf=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,AV=ft(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",kf).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),bS=ft(/^!?\[(label)\]\[(ref)\]/).replace("label",kf).replace("ref",Vm).getRegex(),MS=ft(/^!?\[(ref)\](?:\[\])?/).replace("ref",Vm).getRegex(),CV=ft("reflink|nolink(?!\\()","g").replace("reflink",bS).replace("nolink",MS).getRegex(),Bm={_backpedal:cu,anyPunctuation:_V,autolink:TV,blockSkip:hV,br:CS,code:lV,del:cu,emStrongLDelim:pV,emStrongRDelimAst:gV,emStrongRDelimUnd:vV,escape:aV,link:AV,nolink:MS,punctuation:cV,reflink:bS,reflinkSearch:CV,tag:SV,text:uV,url:cu},wV={...Bm,link:ft(/^!?\[(label)\]\((.*?)\)/).replace("label",kf).getRegex(),reflink:ft(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",kf).getRegex()},Wp={...Bm,emStrongRDelimAst:yV,emStrongLDelim:mV,url:ft(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},IV={...Wp,br:ft(CS).replace("{2,}","*").getRegex(),text:ft(Wp.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},uf={normal:Um,gfm:rV,pedantic:sV},nu={normal:Bm,gfm:Wp,breaks:IV,pedantic:wV},RV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yE=t=>RV[t];function Ki(t,e){if(e){if(kn.escapeTest.test(t))return t.replace(kn.escapeReplace,yE)}else if(kn.escapeTestNoEncode.test(t))return t.replace(kn.escapeReplaceNoEncode,yE);return t}function vE(t){try{t=encodeURI(t).replace(kn.percentDecode,"%")}catch{return null}return t}function _E(t,e){var a;const n=t.replace(kn.findPipe,(c,h,m)=>{let p=!1,v=h;for(;--v>=0&&m[v]==="\\";)p=!p;return p?"|":" |"}),i=n.split(kn.splitPipe);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!((a=i.at(-1))!=null&&a.trim())&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(kn.slashPipe,"|");return i}function iu(t,e,n){const i=t.length;if(i===0)return"";let r=0;for(;r<i&&t.charAt(i-r-1)===e;)r++;return t.slice(0,i-r)}function xV(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let i=0;i<t.length;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return n>0?-2:-1}function TE(t,e,n,i,r){const a=e.href,c=e.title||null,h=t[1].replace(r.other.outputLinkReplace,"$1");i.state.inLink=!0;const m={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:a,title:c,text:h,tokens:i.inlineTokens(h)};return i.state.inLink=!1,m}function bV(t,e,n){const i=t.match(n.other.indentCodeCompensation);if(i===null)return e;const r=i[1];return e.split(`
`).map(a=>{const c=a.match(n.other.beginningSpace);if(c===null)return a;const[h]=c;return h.length>=r.length?a.slice(r.length):a}).join(`
`)}var Df=class{constructor(t){At(this,"options");At(this,"rules");At(this,"lexer");this.options=t||Rs}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:iu(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],i=bV(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){const i=iu(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:iu(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=iu(e[0],`
`).split(`
`),i="",r="";const a=[];for(;n.length>0;){let c=!1;const h=[];let m;for(m=0;m<n.length;m++)if(this.rules.other.blockquoteStart.test(n[m]))h.push(n[m]),c=!0;else if(!c)h.push(n[m]);else break;n=n.slice(m);const p=h.join(`
`),v=p.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${p}`:p,r=r?`${r}
${v}`:v;const E=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(v,a,!0),this.lexer.state.top=E,n.length===0)break;const S=a.at(-1);if((S==null?void 0:S.type)==="code")break;if((S==null?void 0:S.type)==="blockquote"){const I=S,x=I.raw+`
`+n.join(`
`),L=this.blockquote(x);a[a.length-1]=L,i=i.substring(0,i.length-I.raw.length)+L.raw,r=r.substring(0,r.length-I.text.length)+L.text;break}else if((S==null?void 0:S.type)==="list"){const I=S,x=I.raw+`
`+n.join(`
`),L=this.list(x);a[a.length-1]=L,i=i.substring(0,i.length-S.raw.length)+L.raw,r=r.substring(0,r.length-I.raw.length)+L.raw,n=x.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:a,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const i=n.length>1,r={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const a=this.rules.other.listItemRegex(n);let c=!1;for(;t;){let m=!1,p="",v="";if(!(e=a.exec(t))||this.rules.block.hr.test(t))break;p=e[0],t=t.substring(p.length);let E=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,re=>" ".repeat(3*re.length)),S=t.split(`
`,1)[0],I=!E.trim(),x=0;if(this.options.pedantic?(x=2,v=E.trimStart()):I?x=e[1].length+1:(x=e[2].search(this.rules.other.nonSpaceChar),x=x>4?1:x,v=E.slice(x),x+=e[1].length),I&&this.rules.other.blankLine.test(S)&&(p+=S+`
`,t=t.substring(S.length+1),m=!0),!m){const re=this.rules.other.nextBulletRegex(x),oe=this.rules.other.hrRegex(x),ie=this.rules.other.fencesBeginRegex(x),fe=this.rules.other.headingBeginRegex(x),ae=this.rules.other.htmlBeginRegex(x);for(;t;){const me=t.split(`
`,1)[0];let k;if(S=me,this.options.pedantic?(S=S.replace(this.rules.other.listReplaceNesting,"  "),k=S):k=S.replace(this.rules.other.tabCharGlobal,"    "),ie.test(S)||fe.test(S)||ae.test(S)||re.test(S)||oe.test(S))break;if(k.search(this.rules.other.nonSpaceChar)>=x||!S.trim())v+=`
`+k.slice(x);else{if(I||E.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||ie.test(E)||fe.test(E)||oe.test(E))break;v+=`
`+S}!I&&!S.trim()&&(I=!0),p+=me+`
`,t=t.substring(me.length+1),E=k.slice(x)}}r.loose||(c?r.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(c=!0));let L=null,F;this.options.gfm&&(L=this.rules.other.listIsTask.exec(v),L&&(F=L[0]!=="[ ] ",v=v.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:p,task:!!L,checked:F,loose:!1,text:v,tokens:[]}),r.raw+=p}const h=r.items.at(-1);if(h)h.raw=h.raw.trimEnd(),h.text=h.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let m=0;m<r.items.length;m++)if(this.lexer.state.top=!1,r.items[m].tokens=this.lexer.blockTokens(r.items[m].text,[]),!r.loose){const p=r.items[m].tokens.filter(E=>E.type==="space"),v=p.length>0&&p.some(E=>this.rules.other.anyLine.test(E.raw));r.loose=v}if(r.loose)for(let m=0;m<r.items.length;m++)r.items[m].loose=!0;return r}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:i,title:r}}}table(t){var c;const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const n=_E(e[1]),i=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(c=e[3])!=null&&c.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===i.length){for(const h of i)this.rules.other.tableAlignRight.test(h)?a.align.push("right"):this.rules.other.tableAlignCenter.test(h)?a.align.push("center"):this.rules.other.tableAlignLeft.test(h)?a.align.push("left"):a.align.push(null);for(let h=0;h<n.length;h++)a.header.push({text:n[h],tokens:this.lexer.inline(n[h]),header:!0,align:a.align[h]});for(const h of r)a.rows.push(_E(h,a.header.length).map((m,p)=>({text:m,tokens:this.lexer.inline(m),header:!1,align:a.align[p]})));return a}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const a=iu(n.slice(0,-1),"\\");if((n.length-a.length)%2===0)return}else{const a=xV(e[2],"()");if(a===-2)return;if(a>-1){const h=(e[0].indexOf("!")===0?5:4)+e[1].length+a;e[2]=e[2].substring(0,a),e[0]=e[0].substring(0,h).trim(),e[3]=""}}let i=e[2],r="";if(this.options.pedantic){const a=this.rules.other.pedanticHrefTitle.exec(i);a&&(i=a[1],r=a[3])}else r=e[3]?e[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),TE(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[i.toLowerCase()];if(!r){const a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return TE(n,r,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const a=[...i[0]].length-1;let c,h,m=a,p=0;const v=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(v.lastIndex=0,e=e.slice(-1*t.length+a);(i=v.exec(e))!=null;){if(c=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!c)continue;if(h=[...c].length,i[3]||i[4]){m+=h;continue}else if((i[5]||i[6])&&a%3&&!((a+h)%3)){p+=h;continue}if(m-=h,m>0)continue;h=Math.min(h,h+m+p);const E=[...i[0]][0].length,S=t.slice(0,a+i.index+E+h);if(Math.min(a,h)%2){const x=S.slice(1,-1);return{type:"em",raw:S,text:x,tokens:this.lexer.inlineTokens(x)}}const I=S.slice(2,-2);return{type:"strong",raw:S,text:I,tokens:this.lexer.inlineTokens(I)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(n),r=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&r&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,i;return e[2]==="@"?(n=e[1],i="mailto:"+n):(n=e[1],i=n),{type:"link",raw:e[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let e;if(e=this.rules.inline.url.exec(t)){let i,r;if(e[2]==="@")i=e[0],r="mailto:"+i;else{let a;do a=e[0],e[0]=((n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])??"";while(a!==e[0]);i=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},bo=class Zp{constructor(e){At(this,"tokens");At(this,"options");At(this,"state");At(this,"tokenizer");At(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Rs,this.options.tokenizer=this.options.tokenizer||new Df,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:kn,block:uf.normal,inline:nu.normal};this.options.pedantic?(n.block=uf.pedantic,n.inline=nu.pedantic):this.options.gfm&&(n.block=uf.gfm,this.options.breaks?n.inline=nu.breaks:n.inline=nu.gfm),this.tokenizer.rules=n}static get rules(){return{block:uf,inline:nu}}static lex(e,n){return new Zp(n).lex(e)}static lexInline(e,n){return new Zp(n).inlineTokens(e)}lex(e){e=e.replace(kn.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],i=!1){var r,a,c;for(this.options.pedantic&&(e=e.replace(kn.tabCharGlobal,"    ").replace(kn.spaceLine,""));e;){let h;if((a=(r=this.options.extensions)==null?void 0:r.block)!=null&&a.some(p=>(h=p.call({lexer:this},e,n))?(e=e.substring(h.raw.length),n.push(h),!0):!1))continue;if(h=this.tokenizer.space(e)){e=e.substring(h.raw.length);const p=n.at(-1);h.raw.length===1&&p!==void 0?p.raw+=`
`:n.push(h);continue}if(h=this.tokenizer.code(e)){e=e.substring(h.raw.length);const p=n.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=`
`+h.raw,p.text+=`
`+h.text,this.inlineQueue.at(-1).src=p.text):n.push(h);continue}if(h=this.tokenizer.fences(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.heading(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.hr(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.blockquote(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.list(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.html(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.def(e)){e=e.substring(h.raw.length);const p=n.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=`
`+h.raw,p.text+=`
`+h.raw,this.inlineQueue.at(-1).src=p.text):this.tokens.links[h.tag]||(this.tokens.links[h.tag]={href:h.href,title:h.title});continue}if(h=this.tokenizer.table(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.lheading(e)){e=e.substring(h.raw.length),n.push(h);continue}let m=e;if((c=this.options.extensions)!=null&&c.startBlock){let p=1/0;const v=e.slice(1);let E;this.options.extensions.startBlock.forEach(S=>{E=S.call({lexer:this},v),typeof E=="number"&&E>=0&&(p=Math.min(p,E))}),p<1/0&&p>=0&&(m=e.substring(0,p+1))}if(this.state.top&&(h=this.tokenizer.paragraph(m))){const p=n.at(-1);i&&(p==null?void 0:p.type)==="paragraph"?(p.raw+=`
`+h.raw,p.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):n.push(h),i=m.length!==e.length,e=e.substring(h.raw.length);continue}if(h=this.tokenizer.text(e)){e=e.substring(h.raw.length);const p=n.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=`
`+h.raw,p.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):n.push(h);continue}if(e){const p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var h,m,p;let i=e,r=null;if(this.tokens.links){const v=Object.keys(this.tokens.links);if(v.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)v.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,r.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let a=!1,c="";for(;e;){a||(c=""),a=!1;let v;if((m=(h=this.options.extensions)==null?void 0:h.inline)!=null&&m.some(S=>(v=S.call({lexer:this},e,n))?(e=e.substring(v.raw.length),n.push(v),!0):!1))continue;if(v=this.tokenizer.escape(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.tag(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.link(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(v.raw.length);const S=n.at(-1);v.type==="text"&&(S==null?void 0:S.type)==="text"?(S.raw+=v.raw,S.text+=v.text):n.push(v);continue}if(v=this.tokenizer.emStrong(e,i,c)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.codespan(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.br(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.del(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.autolink(e)){e=e.substring(v.raw.length),n.push(v);continue}if(!this.state.inLink&&(v=this.tokenizer.url(e))){e=e.substring(v.raw.length),n.push(v);continue}let E=e;if((p=this.options.extensions)!=null&&p.startInline){let S=1/0;const I=e.slice(1);let x;this.options.extensions.startInline.forEach(L=>{x=L.call({lexer:this},I),typeof x=="number"&&x>=0&&(S=Math.min(S,x))}),S<1/0&&S>=0&&(E=e.substring(0,S+1))}if(v=this.tokenizer.inlineText(E)){e=e.substring(v.raw.length),v.raw.slice(-1)!=="_"&&(c=v.raw.slice(-1)),a=!0;const S=n.at(-1);(S==null?void 0:S.type)==="text"?(S.raw+=v.raw,S.text+=v.text):n.push(v);continue}if(e){const S="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(S);break}else throw new Error(S)}}return n}},Pf=class{constructor(t){At(this,"options");At(this,"parser");this.options=t||Rs}space(t){return""}code({text:t,lang:e,escaped:n}){var a;const i=(a=(e||"").match(kn.notSpaceStart))==null?void 0:a[0],r=t.replace(kn.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Ki(i)+'">'+(n?r:Ki(r,!0))+`</code></pre>
`:"<pre><code>"+(n?r:Ki(r,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,n=t.start;let i="";for(let c=0;c<t.items.length;c++){const h=t.items[c];i+=this.listitem(h)}const r=e?"ol":"ul",a=e&&n!==1?' start="'+n+'"':"";return"<"+r+a+`>
`+i+"</"+r+`>
`}listitem(t){var n;let e="";if(t.task){const i=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=i+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=i+" "+Ki(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):e+=i+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let r=0;r<t.header.length;r++)n+=this.tablecell(t.header[r]);e+=this.tablerow({text:n});let i="";for(let r=0;r<t.rows.length;r++){const a=t.rows[r];n="";for(let c=0;c<a.length;c++)n+=this.tablecell(a[c]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+i+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Ki(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const i=this.parser.parseInline(n),r=vE(t);if(r===null)return i;t=r;let a='<a href="'+t+'"';return e&&(a+=' title="'+Ki(e)+'"'),a+=">"+i+"</a>",a}image({href:t,title:e,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));const r=vE(t);if(r===null)return Ki(n);t=r;let a=`<img src="${t}" alt="${n}"`;return e&&(a+=` title="${Ki(e)}"`),a+=">",a}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Ki(t.text)}},Fm=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},Mo=class jp{constructor(e){At(this,"options");At(this,"renderer");At(this,"textRenderer");this.options=e||Rs,this.options.renderer=this.options.renderer||new Pf,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Fm}static parse(e,n){return new jp(n).parse(e)}static parseInline(e,n){return new jp(n).parseInline(e)}parse(e,n=!0){var r,a;let i="";for(let c=0;c<e.length;c++){const h=e[c];if((a=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&a[h.type]){const p=h,v=this.options.extensions.renderers[p.type].call({parser:this},p);if(v!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(p.type)){i+=v||"";continue}}const m=h;switch(m.type){case"space":{i+=this.renderer.space(m);continue}case"hr":{i+=this.renderer.hr(m);continue}case"heading":{i+=this.renderer.heading(m);continue}case"code":{i+=this.renderer.code(m);continue}case"table":{i+=this.renderer.table(m);continue}case"blockquote":{i+=this.renderer.blockquote(m);continue}case"list":{i+=this.renderer.list(m);continue}case"html":{i+=this.renderer.html(m);continue}case"paragraph":{i+=this.renderer.paragraph(m);continue}case"text":{let p=m,v=this.renderer.text(p);for(;c+1<e.length&&e[c+1].type==="text";)p=e[++c],v+=`
`+this.renderer.text(p);n?i+=this.renderer.paragraph({type:"paragraph",raw:v,text:v,tokens:[{type:"text",raw:v,text:v,escaped:!0}]}):i+=v;continue}default:{const p='Token with "'+m.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return i}parseInline(e,n=this.renderer){var r,a;let i="";for(let c=0;c<e.length;c++){const h=e[c];if((a=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&a[h.type]){const p=this.options.extensions.renderers[h.type].call({parser:this},h);if(p!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(h.type)){i+=p||"";continue}}const m=h;switch(m.type){case"escape":{i+=n.text(m);break}case"html":{i+=n.html(m);break}case"link":{i+=n.link(m);break}case"image":{i+=n.image(m);break}case"strong":{i+=n.strong(m);break}case"em":{i+=n.em(m);break}case"codespan":{i+=n.codespan(m);break}case"br":{i+=n.br(m);break}case"del":{i+=n.del(m);break}case"text":{i+=n.text(m);break}default:{const p='Token with "'+m.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return i}},Op,_f=(Op=class{constructor(t){At(this,"options");At(this,"block");this.options=t||Rs}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?bo.lex:bo.lexInline}provideParser(){return this.block?Mo.parse:Mo.parseInline}},At(Op,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),Op),MV=class{constructor(...t){At(this,"defaults",km());At(this,"options",this.setOptions);At(this,"parse",this.parseMarkdown(!0));At(this,"parseInline",this.parseMarkdown(!1));At(this,"Parser",Mo);At(this,"Renderer",Pf);At(this,"TextRenderer",Fm);At(this,"Lexer",bo);At(this,"Tokenizer",Df);At(this,"Hooks",_f);this.use(...t)}walkTokens(t,e){var i,r;let n=[];for(const a of t)switch(n=n.concat(e.call(this,a)),a.type){case"table":{const c=a;for(const h of c.header)n=n.concat(this.walkTokens(h.tokens,e));for(const h of c.rows)for(const m of h)n=n.concat(this.walkTokens(m.tokens,e));break}case"list":{const c=a;n=n.concat(this.walkTokens(c.items,e));break}default:{const c=a;(r=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&r[c.type]?this.defaults.extensions.childTokens[c.type].forEach(h=>{const m=c[h].flat(1/0);n=n.concat(this.walkTokens(m,e))}):c.tokens&&(n=n.concat(this.walkTokens(c.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const a=e.renderers[r.name];a?e.renderers[r.name]=function(...c){let h=r.renderer.apply(this,c);return h===!1&&(h=a.apply(this,c)),h}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=e[r.level];a?a.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),n.renderer){const r=this.defaults.renderer||new Pf(this.defaults);for(const a in n.renderer){if(!(a in r))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;const c=a,h=n.renderer[c],m=r[c];r[c]=(...p)=>{let v=h.apply(r,p);return v===!1&&(v=m.apply(r,p)),v||""}}i.renderer=r}if(n.tokenizer){const r=this.defaults.tokenizer||new Df(this.defaults);for(const a in n.tokenizer){if(!(a in r))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const c=a,h=n.tokenizer[c],m=r[c];r[c]=(...p)=>{let v=h.apply(r,p);return v===!1&&(v=m.apply(r,p)),v}}i.tokenizer=r}if(n.hooks){const r=this.defaults.hooks||new _f;for(const a in n.hooks){if(!(a in r))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;const c=a,h=n.hooks[c],m=r[c];_f.passThroughHooks.has(a)?r[c]=p=>{if(this.defaults.async)return Promise.resolve(h.call(r,p)).then(E=>m.call(r,E));const v=h.call(r,p);return m.call(r,v)}:r[c]=(...p)=>{let v=h.apply(r,p);return v===!1&&(v=m.apply(r,p)),v}}i.hooks=r}if(n.walkTokens){const r=this.defaults.walkTokens,a=n.walkTokens;i.walkTokens=function(c){let h=[];return h.push(a.call(this,c)),r&&(h=h.concat(r.call(this,c))),h}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return bo.lex(t,e??this.defaults)}parser(t,e){return Mo.parse(t,e??this.defaults)}parseMarkdown(t){return(n,i)=>{const r={...i},a={...this.defaults,...r},c=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&r.async===!1)return c(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return c(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));a.hooks&&(a.hooks.options=a,a.hooks.block=t);const h=a.hooks?a.hooks.provideLexer():t?bo.lex:bo.lexInline,m=a.hooks?a.hooks.provideParser():t?Mo.parse:Mo.parseInline;if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(n):n).then(p=>h(p,a)).then(p=>a.hooks?a.hooks.processAllTokens(p):p).then(p=>a.walkTokens?Promise.all(this.walkTokens(p,a.walkTokens)).then(()=>p):p).then(p=>m(p,a)).then(p=>a.hooks?a.hooks.postprocess(p):p).catch(c);try{a.hooks&&(n=a.hooks.preprocess(n));let p=h(n,a);a.hooks&&(p=a.hooks.processAllTokens(p)),a.walkTokens&&this.walkTokens(p,a.walkTokens);let v=m(p,a);return a.hooks&&(v=a.hooks.postprocess(v)),v}catch(p){return c(p)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const i="<p>An error occurred:</p><pre>"+Ki(n.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(n);throw n}}},_s=new MV;function ut(t,e){return _s.parse(t,e)}ut.options=ut.setOptions=function(t){return _s.setOptions(t),ut.defaults=_s.defaults,TS(ut.defaults),ut};ut.getDefaults=km;ut.defaults=Rs;ut.use=function(...t){return _s.use(...t),ut.defaults=_s.defaults,TS(ut.defaults),ut};ut.walkTokens=function(t,e){return _s.walkTokens(t,e)};ut.parseInline=_s.parseInline;ut.Parser=Mo;ut.parser=Mo.parse;ut.Renderer=Pf;ut.TextRenderer=Fm;ut.Lexer=bo;ut.lexer=bo.lex;ut.Tokenizer=Df;ut.Hooks=_f;ut.parse=ut;ut.options;ut.setOptions;ut.use;ut.walkTokens;ut.parseInline;Mo.parse;bo.lex;const NV=({theme:t,onPromptClick:e})=>{const n=["What's the best place to get suya in Lekki?","Paint a picture of a futuristic Lagos with flying danfo buses.","Tell me a story about the Eyo festival, but in the style of a wise Igbo elder.","Plan a 3-day tourist itinerary for someone visiting Lagos for the first time."];return U.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[U.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-cyan-500 to-purple-500 rounded-full flex items-center justify-center shadow-lg mb-4",children:U.jsx(D2,{className:"w-10 h-10 text-white"})}),U.jsx("h1",{className:`text-3xl font-bold ${t.text} mb-2`,children:"Lagos Oracle"}),U.jsx("p",{className:`${t.muted} mb-8`,children:"Your AI companion for all things Lagos and beyond."}),U.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-w-2xl w-full",children:n.map((i,r)=>U.jsxs("button",{onClick:()=>e(i),className:`p-4 rounded-lg text-left transition-all duration-200
                        ${t.card} border dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-700/50
                        flex items-start space-x-3`,children:[U.jsx(_S,{className:`w-5 h-5 mt-1 ${t.secondaryAccent} shrink-0`}),U.jsx("span",{className:`text-sm ${t.text}`,children:i})]},r))})]})};ut.setOptions({breaks:!0,gfm:!0});const em=({persona:t,isUser:e,isError:n})=>{var a;const i="w-8 h-8 rounded-full flex items-center justify-center shrink-0 text-white";if(e)return U.jsx("div",{className:`${i} bg-blue-500`,children:U.jsx(q2,{className:"w-5 h-5"})});if(n)return U.jsx("div",{className:`${i} bg-red-500`,children:U.jsx(B2,{className:"w-5 h-5"})});if((a=t==null?void 0:t.icon)!=null&&a.startsWith("http"))return U.jsx("img",{src:t.icon,alt:t.name,className:"w-8 h-8 rounded-full object-cover"});const r=t!=null&&t.color?t.color.replace("text-","bg-").replace("-400","-500"):"bg-indigo-500";return U.jsx("div",{className:`${i} ${r}`,children:t!=null&&t.icon&&!t.icon.startsWith("http")?U.jsx("span",{className:"text-xl",children:t.icon}):U.jsx(_S,{className:"w-5 h-5"})})},kV=({message:t,theme:e,personas:n})=>{const[i,r]=_e.useState(!1),a=ut.parse(typeof t.content=="string"?t.content:"*Error: Invalid message content*"),c=()=>{typeof t.content=="string"&&navigator.clipboard.writeText(t.content).then(()=>{r(!0),setTimeout(()=>r(!1),2e3)}).catch(E=>console.error("Failed to copy text: ",E))},h=t.mood==="error",m=t.personaKey?n[t.personaKey]:void 0,p="group flex items-start gap-3 my-4 relative",v="relative rounded-xl px-4 py-3 shadow-md max-w-2xl";return t.type==="user"?U.jsxs("div",{className:`${p} justify-end`,children:[U.jsx("div",{className:`${v} bg-blue-600 text-white`,children:U.jsx("div",{className:"prose prose-sm max-w-none prose-invert prose-p:my-1",dangerouslySetInnerHTML:{__html:a}})}),U.jsx(em,{isUser:!0})]}):U.jsxs("div",{className:p,children:[U.jsx(em,{persona:m,isError:h}),U.jsxs("div",{className:"flex flex-col",children:[U.jsxs("div",{className:`${v} ${h?"bg-red-100 dark:bg-red-900/40":e.card}`,children:[t.model&&U.jsx("div",{className:`text-xs mb-1.5 font-semibold ${h?"text-red-600 dark:text-red-300":e.muted}`,children:t.model}),U.jsx("div",{className:`prose prose-sm max-w-none ${e.text}`,dangerouslySetInnerHTML:{__html:a}}),t.media&&U.jsxs("div",{className:"mt-3",children:[t.media.imageUrl&&U.jsx("img",{src:t.media.imageUrl,alt:"Generated by AI",className:"rounded-lg max-w-xs md:max-w-sm h-auto shadow-lg border dark:border-gray-600"}),t.media.videoUrl&&U.jsx("video",{src:t.media.videoUrl,controls:!0,className:"rounded-lg max-w-xs md:max-w-sm h-auto shadow-lg border dark:border-gray-600"}),!t.media.success&&U.jsxs("div",{className:"p-3 rounded-lg border-2 border-dashed border-gray-300 bg-gray-100/50 text-gray-500 dark:border-gray-600 dark:bg-gray-700/30 dark:text-gray-400 flex flex-col items-center justify-center max-w-xs md:max-w-sm",children:[t.media.videoUrl?U.jsx(z2,{className:"w-10 h-10 mb-2 opacity-70"}):U.jsx(m2,{className:"w-10 h-10 mb-2 opacity-70"}),U.jsx("p",{className:"text-sm font-semibold",children:"Media Generation Failed"}),U.jsx("p",{className:"text-xs text-center",children:t.media.model||"Could not generate media."})]})]})]}),U.jsxs("div",{className:"flex items-center justify-start mt-1.5 space-x-3",children:[U.jsx("span",{className:`text-xs ${e.muted}`,children:t.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),typeof t.content=="string"&&t.content.trim()!==""&&U.jsx("button",{onClick:c,title:i?"Copied!":"Copy message",className:"p-1 rounded-full transition-all duration-200 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-700 opacity-0 group-hover:opacity-100",children:i?U.jsx(i2,{className:"w-3.5 h-3.5"}):U.jsx(u2,{className:"w-3.5 h-3.5"})})]})]})]})},DV=({messages:t,isTyping:e,theme:n,personas:i,onPromptClick:r})=>{const a=_e.useRef(null);return _e.useEffect(()=>{var c;(c=a.current)==null||c.scrollIntoView({behavior:"smooth"})},[t,e]),U.jsx("div",{className:"flex-1 overflow-y-auto",children:U.jsxs("div",{className:"max-w-3xl mx-auto p-4",children:[t.length===0&&!e?U.jsx(NV,{theme:n,onPromptClick:r}):t.map(c=>U.jsx(kV,{message:c,theme:n,personas:i},c.id)),e&&U.jsxs("div",{className:"flex items-start gap-3 my-4",children:[U.jsx(em,{persona:{name:"Oracle",icon:"",description:"",systemPromptModifier:"",color:"bg-indigo-500"}}),U.jsx("div",{className:`rounded-xl px-4 py-3 shadow-md ${n.card}`,children:U.jsxs("div",{className:"flex items-center space-x-1",children:[U.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0s"}}),U.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),U.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})})]}),U.jsx("div",{ref:a})]})})},PV=({theme:t,selectedAI:e,onSelectAI:n,onClose:i})=>U.jsx("div",{className:"absolute bottom-full mb-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border dark:border-gray-700",children:U.jsxs("div",{className:"p-2",children:[U.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 px-2 mb-1",children:"Choose a model"}),Object.entries(Si).map(([r,a])=>U.jsxs("button",{onClick:()=>{n(r),i()},className:`w-full flex items-center gap-2 p-2 rounded-md text-sm text-left
                        ${e===r?`font-semibold ${a.color}`:`${t.text} hover:bg-gray-100 dark:hover:bg-gray-700`}`,children:[U.jsx("span",{className:"text-lg",children:a.icon}),U.jsx("span",{children:a.name})]},r))]})}),VV=({input:t,isTyping:e,isListening:n,recognitionAvailable:i,theme:r,selectedAI:a,setInput:c,handleSend:h,startListening:m,setSelectedAI:p})=>{const v=_e.useRef(null),[E,S]=_e.useState(!1);_e.useEffect(()=>{v.current&&(v.current.style.height="auto",v.current.style.height=`${v.current.scrollHeight}px`)},[t]);const I=()=>{t.trim()&&!e&&h()},x=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),I())};return U.jsx("div",{className:"bg-transparent px-4 pb-4 sticky bottom-0",children:U.jsx("div",{className:"max-w-3xl mx-auto",children:U.jsxs("div",{className:"relative",children:[E&&U.jsx(PV,{theme:r,selectedAI:a,onSelectAI:p,onClose:()=>S(!1)}),U.jsxs("div",{className:`relative flex items-center ${r.card} border dark:border-gray-600 rounded-2xl shadow-lg`,children:[U.jsxs("button",{onClick:()=>S(L=>!L),className:"p-3 rounded-full transition-all duration-200 flex items-center gap-1 hover:bg-gray-200 dark:hover:bg-gray-700",children:[U.jsx("span",{className:"text-lg",children:Si[a].icon}),U.jsx(r2,{size:16,className:`transition-transform duration-200 ${E?"rotate-0":"rotate-180"}`})]}),U.jsx("textarea",{ref:v,value:t,onChange:L=>c(L.target.value),onKeyDown:x,placeholder:`Ask ${Si[a].name}...`,className:`w-full max-h-48 bg-transparent p-3 resize-none border-none focus:ring-0 ${r.text} placeholder-gray-500 dark:placeholder-gray-400`,rows:1,disabled:e}),U.jsx("button",{onClick:I,disabled:!t.trim()||e,title:"Send Message",className:`p-3 mr-2 rounded-full transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed
                         text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-500`,children:U.jsx(b2,{className:"w-5 h-5"})})]})]})})})};var EE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},LV=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=t[n++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=t[n++],c=t[n++],h=t[n++],m=((r&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const a=t[n++],c=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return e.join("")},kS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const a=t[r],c=r+1<t.length,h=c?t[r+1]:0,m=r+2<t.length,p=m?t[r+2]:0,v=a>>2,E=(a&3)<<4|h>>4;let S=(h&15)<<2|p>>6,I=p&63;m||(I=64,c||(S=64)),i.push(n[v],n[E],n[S],n[I])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(NS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const a=n[t.charAt(r++)],h=r<t.length?n[t.charAt(r)]:0;++r;const p=r<t.length?n[t.charAt(r)]:64;++r;const E=r<t.length?n[t.charAt(r)]:64;if(++r,a==null||h==null||p==null||E==null)throw new UV;const S=a<<2|h>>4;if(i.push(S),p!==64){const I=h<<4&240|p>>2;if(i.push(I),E!==64){const x=p<<6&192|E;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OV=function(t){const e=NS(t);return kS.encodeByteArray(e,!0)},Vf=function(t){return OV(t).replace(/\./g,"")},DS=function(t){try{return kS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=()=>BV().__FIREBASE_DEFAULTS__,qV=()=>{if(typeof process>"u"||typeof EE>"u")return;const t=EE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&DS(t[1]);return e&&JSON.parse(e)},nd=()=>{try{return FV()||qV()||GV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},PS=t=>{var e,n;return(n=(e=nd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},zV=t=>{const e=PS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},VS=()=>{var t;return(t=nd())===null||t===void 0?void 0:t.config},LS=t=>{var e;return(e=nd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Vf(JSON.stringify(n)),Vf(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function KV(){var t;const e=(t=nd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WV(){const t=wn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZV(){return!KV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jV(){try{return typeof indexedDB=="object"}catch{return!1}}function eL(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var a;e(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL="FirebaseError";class qo extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=tL,Object.setPrototypeOf(this,qo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bu.prototype.create)}}class bu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,a=this.errors[e],c=a?nL(a,i):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new qo(r,h,i)}}function nL(t,e){return t.replace(iL,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const iL=/\{\$([^}]+)}/g;function oL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lf(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const a=t[r],c=e[r];if(SE(a)&&SE(c)){if(!Lf(a,c))return!1}else if(a!==c)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function SE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function rL(t,e){const n=new sL(t,e);return n.subscribe.bind(n)}class sL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");aL(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Rp),r.error===void 0&&(r.error=Rp),r.complete===void 0&&(r.complete=Rp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(t){return t&&t._delegate?t._delegate:t}class Ts{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new HV;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cL(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&c.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(r,a);const c=this.instances.get(r);return c&&e(c,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uL(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uL(t){return t===ps?void 0:t}function cL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ze||(Ze={}));const dL={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},hL=Ze.INFO,pL={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},mL=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=pL[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qm{constructor(e){this.name=e,this._logLevel=hL,this._logHandler=mL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const gL=(t,e)=>e.some(n=>t instanceof n);let AE,CE;function yL(){return AE||(AE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vL(){return CE||(CE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const US=new WeakMap,tm=new WeakMap,OS=new WeakMap,xp=new WeakMap,Gm=new WeakMap;function _L(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(Cr(t.result)),r()},c=()=>{i(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&US.set(n,t)}).catch(()=>{}),Gm.set(e,t),e}function TL(t){if(tm.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),r()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});tm.set(t,e)}let nm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EL(t){nm=t(nm)}function SL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(bp(this),e,...n);return OS.set(i,e.sort?e.sort():[e]),Cr(i)}:vL().includes(t)?function(...e){return t.apply(bp(this),e),Cr(US.get(this))}:function(...e){return Cr(t.apply(bp(this),e))}}function AL(t){return typeof t=="function"?SL(t):(t instanceof IDBTransaction&&TL(t),gL(t,yL())?new Proxy(t,nm):t)}function Cr(t){if(t instanceof IDBRequest)return _L(t);if(xp.has(t))return xp.get(t);const e=AL(t);return e!==t&&(xp.set(t,e),Gm.set(e,t)),e}const bp=t=>Gm.get(t);function CL(t,e,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const c=indexedDB.open(t,e),h=Cr(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Cr(c.result),m.oldVersion,m.newVersion,Cr(c.transaction),m)}),n&&c.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),h.then(m=>{a&&m.addEventListener("close",()=>a()),r&&m.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const wL=["get","getKey","getAll","getAllKeys","count"],IL=["put","add","delete","clear"],Mp=new Map;function wE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mp.get(e))return Mp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=IL.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||wL.includes(n)))return;const a=async function(c,...h){const m=this.transaction(c,r?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),r&&m.done]))[0]};return Mp.set(e,a),a}EL(t=>({...t,get:(e,n,i)=>wE(e,n)||t.get(e,n,i),has:(e,n)=>!!wE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xL(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function xL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const im="@firebase/app",IE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new qm("@firebase/app"),bL="@firebase/app-compat",ML="@firebase/analytics-compat",NL="@firebase/analytics",kL="@firebase/app-check-compat",DL="@firebase/app-check",PL="@firebase/auth",VL="@firebase/auth-compat",LL="@firebase/database",UL="@firebase/data-connect",OL="@firebase/database-compat",BL="@firebase/functions",FL="@firebase/functions-compat",qL="@firebase/installations",GL="@firebase/installations-compat",zL="@firebase/messaging",HL="@firebase/messaging-compat",$L="@firebase/performance",YL="@firebase/performance-compat",KL="@firebase/remote-config",JL="@firebase/remote-config-compat",QL="@firebase/storage",XL="@firebase/storage-compat",WL="@firebase/firestore",ZL="@firebase/vertexai-preview",jL="@firebase/firestore-compat",eU="firebase",tU="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="[DEFAULT]",nU={[im]:"fire-core",[bL]:"fire-core-compat",[NL]:"fire-analytics",[ML]:"fire-analytics-compat",[DL]:"fire-app-check",[kL]:"fire-app-check-compat",[PL]:"fire-auth",[VL]:"fire-auth-compat",[LL]:"fire-rtdb",[UL]:"fire-data-connect",[OL]:"fire-rtdb-compat",[BL]:"fire-fn",[FL]:"fire-fn-compat",[qL]:"fire-iid",[GL]:"fire-iid-compat",[zL]:"fire-fcm",[HL]:"fire-fcm-compat",[$L]:"fire-perf",[YL]:"fire-perf-compat",[KL]:"fire-rc",[JL]:"fire-rc-compat",[QL]:"fire-gcs",[XL]:"fire-gcs-compat",[WL]:"fire-fst",[jL]:"fire-fst-compat",[ZL]:"fire-vertex","fire-js":"fire-js",[eU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=new Map,iU=new Map,rm=new Map;function RE(t,e){try{t.container.addComponent(e)}catch(n){Vo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ka(t){const e=t.name;if(rm.has(e))return Vo.debug(`There were multiple attempts to register component ${e}.`),!1;rm.set(e,t);for(const n of yu.values())RE(n,t);for(const n of iU.values())RE(n,t);return!0}function zm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ai(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new bu("app","Firebase",oU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=tU;function BS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:om,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw wr.create("bad-app-name",{appName:String(r)});if(n||(n=VS()),!n)throw wr.create("no-options");const a=yu.get(r);if(a){if(Lf(n,a.options)&&Lf(i,a.config))return a;throw wr.create("duplicate-app",{appName:r})}const c=new fL(r);for(const m of rm.values())c.addComponent(m);const h=new rU(n,i,c);return yu.set(r,h),h}function FS(t=om){const e=yu.get(t);if(!e&&t===om&&VS())return BS();if(!e)throw wr.create("no-app",{appName:t});return e}function xE(){return Array.from(yu.values())}function Ir(t,e,n){var i;let r=(i=nU[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const h=[`Unable to register library "${r}" with version "${e}":`];a&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vo.warn(h.join(" "));return}ka(new Ts(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU="firebase-heartbeat-database",aU=1,vu="firebase-heartbeat-store";let Np=null;function qS(){return Np||(Np=CL(sU,aU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(vu)}catch(n){console.warn(n)}}}}).catch(t=>{throw wr.create("idb-open",{originalErrorMessage:t.message})})),Np}async function lU(t){try{const n=(await qS()).transaction(vu),i=await n.objectStore(vu).get(GS(t));return await n.done,i}catch(e){if(e instanceof qo)Vo.warn(e.message);else{const n=wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vo.warn(n.message)}}}async function bE(t,e){try{const i=(await qS()).transaction(vu,"readwrite");await i.objectStore(vu).put(e,GS(t)),await i.done}catch(n){if(n instanceof qo)Vo.warn(n.message);else{const i=wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vo.warn(i.message)}}}function GS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=1024,cU=720*60*60*1e3;class fU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hU(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ME();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const h=new Date(c.date).valueOf();return Date.now()-h<=cU}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Vo.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ME(),{heartbeatsToSend:i,unsentEntries:r}=dU(this._heartbeatsCache.heartbeats),a=Vf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Vo.warn(n),""}}}function ME(){return new Date().toISOString().substring(0,10)}function dU(t,e=uU){const n=[];let i=t.slice();for(const r of t){const a=n.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),NE(n)>e){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),NE(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class hU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jV()?eL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return bE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return bE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function NE(t){return Vf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(t){ka(new Ts("platform-logger",e=>new RL(e),"PRIVATE")),ka(new Ts("heartbeat",e=>new fU(e),"PRIVATE")),Ir(im,IE,t),Ir(im,IE,"esm2017"),Ir("fire-js","")}pU("");var mU="firebase",gU="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir(mU,gU,"app");function Hm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function zS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yU=zS,HS=new bu("auth","Firebase",zS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new qm("@firebase/auth");function vU(t,...e){Uf.logLevel<=Ze.WARN&&Uf.warn(`Auth (${$a}): ${t}`,...e)}function Tf(t,...e){Uf.logLevel<=Ze.ERROR&&Uf.error(`Auth (${$a}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(t,...e){throw Ym(t,...e)}function Ci(t,...e){return Ym(t,...e)}function $m(t,e,n){const i=Object.assign(Object.assign({},yU()),{[e]:n});return new bu("auth","Firebase",i).create(e,{appName:t.name})}function Po(t){return $m(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $S(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&ji(t,"argument-error"),$m(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ym(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return HS.create(t,...e)}function ke(t,e,...n){if(!t)throw Ym(e,...n)}function No(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tf(e),new Error(e)}function Lo(t,e){t||No(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _U(){return kE()==="http:"||kE()==="https:"}function kE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_U()||QV()||"connection"in navigator)?navigator.onLine:!0}function EU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Lo(n>e,"Short delay should be less than long delay!"),this.isMobile=YV()||XV()}get(){return TU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t,e){Lo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;No("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;No("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;No("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=new Nu(3e4,6e4);function id(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ya(t,e,n,i,r={}){return KS(t,r,async()=>{let a={},c={};i&&(e==="GET"?c=i:a={body:JSON.stringify(i)});const h=Mu(Object.assign({key:t.config.apiKey},c)).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:m},a);return JV()||(p.referrerPolicy="no-referrer"),YS.fetch()(QS(t,t.config.apiHost,n,h),p)})}async function KS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},SU),e);try{const r=new CU(t),a=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw cf(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const h=a.ok?c.errorMessage:c.error.message,[m,p]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw cf(t,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw cf(t,"email-already-in-use",c);if(m==="USER_DISABLED")throw cf(t,"user-disabled",c);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw $m(t,v,p);ji(t,v)}}catch(r){if(r instanceof qo)throw r;ji(t,"network-request-failed",{message:String(r)})}}async function JS(t,e,n,i,r={}){const a=await Ya(t,e,n,i,r);return"mfaPendingCredential"in a&&ji(t,"multi-factor-auth-required",{_serverResponse:a}),a}function QS(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Km(t.config,r):`${t.config.apiScheme}://${r}`}class CU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ci(this.auth,"network-request-failed")),AU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cf(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ci(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wU(t,e){return Ya(t,"POST","/v1/accounts:delete",e)}async function XS(t,e){return Ya(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function IU(t,e=!1){const n=gn(t),i=await n.getIdToken(e),r=Jm(i);ke(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:fu(kp(r.auth_time)),issuedAtTime:fu(kp(r.iat)),expirationTime:fu(kp(r.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function kp(t){return Number(t)*1e3}function Jm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Tf("JWT malformed, contained fewer than 3 sections"),null;try{const r=DS(n);return r?JSON.parse(r):(Tf("Failed to decode base64 JWT payload"),null)}catch(r){return Tf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function DE(t){const e=Jm(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof qo&&RU(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function RU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Of(t){var e;const n=t.auth,i=await t.getIdToken(),r=await _u(t,XS(n,{idToken:i}));ke(r==null?void 0:r.users.length,n,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?WS(a.providerUserInfo):[],h=MU(t.providerData,c),m=t.isAnonymous,p=!(t.email&&a.passwordHash)&&!(h!=null&&h.length),v=m?p:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new am(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(t,E)}async function bU(t){const e=gn(t);await Of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MU(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function WS(t){return t.map(e=>{var{providerId:n}=e,i=Hm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(t,e){const n=await KS(t,{},async()=>{const i=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=t.config,c=QS(t,r,"/v1/token",`key=${a}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",YS.fetch()(c,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kU(t,e){return Ya(t,"POST","/v2/accounts:revokeToken",id(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const n=DE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:a}=await NU(e,n);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:a}=n,c=new xa;return i&&(ke(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),r&&(ke(typeof r=="string","internal-error",{appName:e}),c.accessToken=r),a&&(ke(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xa,this.toJSON())}_performRefresh(){return No("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ko{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,a=Hm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new am(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await _u(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return IU(this,e)}reload(){return bU(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ko(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Of(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ai(this.auth.app))return Promise.reject(Po(this.auth));const e=await this.getIdToken();return await _u(this,wU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,a,c,h,m,p,v;const E=(i=n.displayName)!==null&&i!==void 0?i:void 0,S=(r=n.email)!==null&&r!==void 0?r:void 0,I=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,x=(c=n.photoURL)!==null&&c!==void 0?c:void 0,L=(h=n.tenantId)!==null&&h!==void 0?h:void 0,F=(m=n._redirectEventId)!==null&&m!==void 0?m:void 0,re=(p=n.createdAt)!==null&&p!==void 0?p:void 0,oe=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:ie,emailVerified:fe,isAnonymous:ae,providerData:me,stsTokenManager:k}=n;ke(ie&&k,e,"internal-error");const M=xa.fromJSON(this.name,k);ke(typeof ie=="string",e,"internal-error"),yr(E,e.name),yr(S,e.name),ke(typeof fe=="boolean",e,"internal-error"),ke(typeof ae=="boolean",e,"internal-error"),yr(I,e.name),yr(x,e.name),yr(L,e.name),yr(F,e.name),yr(re,e.name),yr(oe,e.name);const b=new ko({uid:ie,auth:e,email:S,emailVerified:fe,displayName:E,isAnonymous:ae,photoURL:x,phoneNumber:I,tenantId:L,stsTokenManager:M,createdAt:re,lastLoginAt:oe});return me&&Array.isArray(me)&&(b.providerData=me.map(V=>Object.assign({},V))),F&&(b._redirectEventId=F),b}static async _fromIdTokenResponse(e,n,i=!1){const r=new xa;r.updateFromServerResponse(n);const a=new ko({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Of(a),a}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ke(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?WS(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),h=new xa;h.updateFromIdToken(i);const m=new ko({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:c}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new am(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=new Map;function Do(t){Lo(t instanceof Function,"Expected a class definition");let e=PE.get(t);return e?(Lo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,PE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ZS.type="NONE";const VE=ZS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t,e,n){return`firebase:${t}:${e}:${n}`}class ba{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=Ef(this.userKey,r.apiKey,a),this.fullPersistenceKey=Ef("persistence",r.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ko._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ba(Do(VE),e,i);const r=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=r[0]||Do(VE);const c=Ef(i,e.config.apiKey,e.name);let h=null;for(const p of n)try{const v=await p._get(c);if(v){const E=ko._fromJSON(e,v);p!==a&&(h=E),a=p;break}}catch{}const m=r.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new ba(a,e,i):(a=m[0],h&&await a._set(c,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(c)}catch{}})),new ba(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oA(e))return"Blackberry";if(rA(e))return"Webos";if(eA(e))return"Safari";if((e.includes("chrome/")||tA(e))&&!e.includes("edge/"))return"Chrome";if(iA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function jS(t=wn()){return/firefox\//i.test(t)}function eA(t=wn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tA(t=wn()){return/crios\//i.test(t)}function nA(t=wn()){return/iemobile/i.test(t)}function iA(t=wn()){return/android/i.test(t)}function oA(t=wn()){return/blackberry/i.test(t)}function rA(t=wn()){return/webos/i.test(t)}function Qm(t=wn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function DU(t=wn()){var e;return Qm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function PU(){return WV()&&document.documentMode===10}function sA(t=wn()){return Qm(t)||iA(t)||rA(t)||oA(t)||/windows phone/i.test(t)||nA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t,e=[]){let n;switch(t){case"Browser":n=LE(wn());break;case"Worker":n=`${LE(wn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$a}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((c,h)=>{try{const m=e(a);c(m)}catch(m){h(m)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LU(t,e={}){return Ya(t,"GET","/v2/passwordPolicy",id(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=6;class OU{constructor(e){var n,i,r,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:UU,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,a,c,h;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(n=m.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(r=m.containsLowercaseLetter)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(a=m.containsUppercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(h=m.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),m}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new UE(this),this.idTokenSubscription=new UE(this),this.beforeStateQueue=new VU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Do(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await ba.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await XS(this,{idToken:e}),i=await ko._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ai(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===h)&&(m!=null&&m.user)&&(r=m.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Of(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ai(this.app))return Promise.reject(Po(this));const n=e?gn(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ai(this.app)?Promise.reject(Po(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ai(this.app)?Promise.reject(Po(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Do(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LU(this),n=new OU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await kU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Do(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await ba.create(this,[Do(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(h,this,"internal-error"),h.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,i,r);return()=>{c=!0,m()}}else{const m=e.addObserver(n);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&vU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ka(t){return gn(t)}class UE{constructor(e){this.auth=e,this.observer=null,this.addObserver=rL(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FU(t){Xm=t}function qU(t){return Xm.loadJS(t)}function GU(){return Xm.gapiScript}function zU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(t,e){const n=zm(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),a=n.getOptions();if(Lf(a,e??{}))return r;ji(r,"already-initialized")}return n.initialize({options:e})}function $U(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Do);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function YU(t,e,n){const i=Ka(t);ke(i._canInitEmulator,i,"emulator-config-failed"),ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=lA(e),{host:c,port:h}=KU(e),m=h===null?"":`:${h}`;i.config.emulator={url:`${a}//${c}${m}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:c,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})}),JU()}function lA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function KU(t){const e=lA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:OE(i.substr(a.length+1))}}else{const[a,c]=i.split(":");return{host:a,port:OE(c)}}}function OE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function JU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return No("not implemented")}_getIdTokenResponse(e){return No("not implemented")}_linkToIdToken(e,n){return No("not implemented")}_getReauthenticationResolver(e){return No("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(t,e){return JS(t,"POST","/v1/accounts:signInWithIdp",id(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU="http://localhost";class Uo extends uA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ji("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,a=Hm(n,["providerId","signInMethod"]);if(!i||!r)return null;const c=new Uo(i,r);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Ma(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ma(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ma(e,n)}buildRequest(){const e={requestUri:QU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Mu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends od{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class du extends Ja{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ke("providerId"in n&&"signInMethod"in n,"argument-error"),Uo._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ke(e.idToken||e.accessToken,"argument-error"),Uo._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return du.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return du.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:a,nonce:c,providerId:h}=e;if(!i&&!r&&!n&&!a||!h)return null;try{return new du(h)._credential({idToken:n,accessToken:i,nonce:c,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Ja{constructor(){super("facebook.com")}static credential(e){return Uo._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.FACEBOOK_SIGN_IN_METHOD="facebook.com";_r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends Ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Uo._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return xo.credential(n,i)}catch{return null}}}xo.GOOGLE_SIGN_IN_METHOD="google.com";xo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Ja{constructor(){super("github.com")}static credential(e){return Uo._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Ja{constructor(){super("twitter.com")}static credential(e,n){return Uo._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Er.credential(n,i)}catch{return null}}}Er.TWITTER_SIGN_IN_METHOD="twitter.com";Er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XU(t,e){return JS(t,"POST","/v1/accounts:signUp",id(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const a=await ko._fromIdTokenResponse(e,i,r),c=BE(i);return new br({user:a,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=BE(i);return new br({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function BE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WU(t){var e;if(Ai(t.app))return Promise.reject(Po(t));const n=Ka(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new br({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await XU(n,{returnSecureToken:!0}),r=await br._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends qo{constructor(e,n,i,r){var a;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Bf.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Bf(e,n,i,r)}}function cA(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Bf._fromErrorAndOperation(t,a,e,i):a})}async function ZU(t,e,n=!1){const i=await _u(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return br._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jU(t,e,n=!1){const{auth:i}=t;if(Ai(i.app))return Promise.reject(Po(i));const r="reauthenticate";try{const a=await _u(t,cA(i,r,e,t),n);ke(a.idToken,i,"internal-error");const c=Jm(a.idToken);ke(c,i,"internal-error");const{sub:h}=c;return ke(t.uid===h,i,"user-mismatch"),br._forOperation(t,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ji(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eO(t,e,n=!1){if(Ai(t.app))return Promise.reject(Po(t));const i="signIn",r=await cA(t,i,e),a=await br._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(a.user),a}function tO(t,e,n,i){return gn(t).onIdTokenChanged(e,n,i)}function nO(t,e,n){return gn(t).beforeAuthStateChanged(e,n)}function iO(t,e,n,i){return gn(t).onAuthStateChanged(e,n,i)}function oO(t){return gn(t).signOut()}const Ff="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ff,"1"),this.storage.removeItem(Ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=1e3,sO=10;class dA extends fA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);PU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,sO):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},rO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}dA.type="LOCAL";const aO=dA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA extends fA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}hA.type="SESSION";const pA=hA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new rd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:a}=n.data,c=this.handlersMap[r];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(c).map(async p=>p(n.origin,a)),m=await lO(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,c;return new Promise((h,m)=>{const p=Wm("",20);r.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(E){const S=E;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(S.data.response);break;default:clearTimeout(v),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(){return window}function cO(t){Xi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(){return typeof Xi().WorkerGlobalScope<"u"&&typeof Xi().importScripts=="function"}async function fO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function hO(){return mA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="firebaseLocalStorageDb",pO=1,qf="firebaseLocalStorage",yA="fbase_key";class ku{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sd(t,e){return t.transaction([qf],e?"readwrite":"readonly").objectStore(qf)}function mO(){const t=indexedDB.deleteDatabase(gA);return new ku(t).toPromise()}function lm(){const t=indexedDB.open(gA,pO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(qf,{keyPath:yA})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(qf)?e(i):(i.close(),await mO(),e(await lm()))})})}async function FE(t,e,n){const i=sd(t,!0).put({[yA]:e,value:n});return new ku(i).toPromise()}async function gO(t,e){const n=sd(t,!1).get(e),i=await new ku(n).toPromise();return i===void 0?null:i.value}function qE(t,e){const n=sd(t,!0).delete(e);return new ku(n).toPromise()}const yO=800,vO=3;class vA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>vO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rd._getInstance(hO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await fO(),!this.activeServiceWorker)return;this.sender=new uO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lm();return await FE(e,Ff,"1"),await qE(e,Ff),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>FE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>gO(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=sd(r,!1).getAll();return new ku(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vA.type="LOCAL";const _O=vA;new Nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(t,e){return e?Do(e):(ke(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm extends uA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ma(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ma(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function TO(t){return eO(t.auth,new jm(t),t.bypassAuthState)}function EO(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),jU(n,new jm(t),t.bypassAuthState)}async function SO(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),ZU(n,new jm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:a,error:c,type:h}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TO;case"linkViaPopup":case"linkViaRedirect":return SO;case"reauthViaPopup":case"reauthViaRedirect":return EO;default:ji(this.auth,"internal-error")}}resolve(e){Lo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=new Nu(2e3,1e4);async function TA(t,e,n){if(Ai(t.app))return Promise.reject(Ci(t,"operation-not-supported-in-this-environment"));const i=Ka(t);$S(t,e,od);const r=Zm(i,n);return new ms(i,"signInViaPopup",e,r).executeNotNull()}class ms extends _A{constructor(e,n,i,r,a){super(e,n,r,a),this.provider=i,this.authWindow=null,this.pollId=null,ms.currentPopupAction&&ms.currentPopupAction.cancel(),ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Lo(this.filter.length===1,"Popup operations only handle one event");const e=Wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AO.get())};e()}}ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO="pendingRedirect",Sf=new Map;class wO extends _A{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Sf.get(this.auth._key());if(!e){try{const i=await IO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Sf.set(this.auth._key(),e)}return this.bypassAuthState||Sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IO(t,e){const n=SA(e),i=EA(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function RO(t,e){return EA(t)._set(SA(e),"true")}function xO(t,e){Sf.set(t._key(),e)}function EA(t){return Do(t._redirectPersistence)}function SA(t){return Ef(CO,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t,e,n){return bO(t,e,n)}async function bO(t,e,n){if(Ai(t.app))return Promise.reject(Po(t));const i=Ka(t);$S(t,e,od),await i._initializationPromise;const r=Zm(i,n);return await RO(r,i),r._openRedirect(i,e,"signInViaRedirect")}async function MO(t,e,n=!1){if(Ai(t.app))return Promise.reject(Po(t));const i=Ka(t),r=Zm(i,e),c=await new wO(i,r,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=600*1e3;class kO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!CA(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ci(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NO&&this.cachedEventUids.clear(),this.cachedEventUids.has(GE(e))}saveEventToCache(e){this.cachedEventUids.add(GE(e)),this.lastProcessedEventTime=Date.now()}}function GE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PO(t,e={}){return Ya(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LO=/^https?/;async function UO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await PO(t);for(const n of e)try{if(OO(n))return}catch{}ji(t,"unauthorized-domain")}function OO(t){const e=sm(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!LO.test(n))return!1;if(VO.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=new Nu(3e4,6e4);function zE(){const t=Xi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function FO(t){return new Promise((e,n)=>{var i,r,a;function c(){zE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zE(),n(Ci(t,"network-request-failed"))},timeout:BO.get()})}if(!((r=(i=Xi().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((a=Xi().gapi)===null||a===void 0)&&a.load)c();else{const h=zU("iframefcb");return Xi()[h]=()=>{gapi.load?c():n(Ci(t,"network-request-failed"))},qU(`${GU()}?onload=${h}`).catch(m=>n(m))}}).catch(e=>{throw Af=null,e})}let Af=null;function qO(t){return Af=Af||FO(t),Af}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=new Nu(5e3,15e3),zO="__/auth/iframe",HO="emulator/auth/iframe",$O={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KO(t){const e=t.config;ke(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Km(e,HO):`https://${t.config.authDomain}/${zO}`,i={apiKey:e.apiKey,appName:t.name,v:$a},r=YO.get(t.config.apiHost);r&&(i.eid=r);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${Mu(i).slice(1)}`}async function JO(t){const e=await qO(t),n=Xi().gapi;return ke(n,t,"internal-error"),e.open({where:document.body,url:KO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$O,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const c=Ci(t,"network-request-failed"),h=Xi().setTimeout(()=>{a(c)},GO.get());function m(){Xi().clearTimeout(h),r(i)}i.ping(m).then(m,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XO=500,WO=600,ZO="_blank",jO="http://localhost";class HE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function e4(t,e,n,i=XO,r=WO){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const m=Object.assign(Object.assign({},QO),{width:i.toString(),height:r.toString(),top:a,left:c}),p=wn().toLowerCase();n&&(h=tA(p)?ZO:n),jS(p)&&(e=e||jO,m.scrollbars="yes");const v=Object.entries(m).reduce((S,[I,x])=>`${S}${I}=${x},`,"");if(DU(p)&&h!=="_self")return t4(e||"",h),new HE(null);const E=window.open(e||"",h,v);ke(E,t,"popup-blocked");try{E.focus()}catch{}return new HE(E)}function t4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="__/auth/handler",i4="emulator/auth/handler",o4=encodeURIComponent("fac");async function $E(t,e,n,i,r,a){ke(t.config.authDomain,t,"auth-domain-config-required"),ke(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:$a,eventId:r};if(e instanceof od){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",oL(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof Ja){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}t.tenantId&&(c.tid=t.tenantId);const h=c;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const m=await t._getAppCheckToken(),p=m?`#${o4}=${encodeURIComponent(m)}`:"";return`${r4(t)}?${Mu(h).slice(1)}${p}`}function r4({config:t}){return t.emulator?Km(t,i4):`https://${t.authDomain}/${n4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="webStorageSupport";class s4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pA,this._completeRedirectFn=MO,this._overrideRedirectResult=xO}async _openPopup(e,n,i,r){var a;Lo((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await $E(e,n,i,sm(),r);return e4(e,c,Wm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const a=await $E(e,n,i,sm(),r);return cO(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:a}=this.eventManagers[n];return r?Promise.resolve(r):(Lo(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await JO(e),i=new kO(e);return n.register("authEvent",r=>(ke(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dp,{type:Dp},r=>{var a;const c=(a=r==null?void 0:r[0])===null||a===void 0?void 0:a[Dp];c!==void 0&&n(!!c),ji(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=UO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sA()||eA()||Qm()}}const a4=s4;var YE="@firebase/auth",KE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function c4(t){ka(new Ts("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;ke(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aA(t)},p=new BU(i,r,a,m);return $U(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ka(new Ts("auth-internal",e=>{const n=Ka(e.getProvider("auth").getImmediate());return(i=>new l4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ir(YE,KE,u4(t)),Ir(YE,KE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=300,d4=LS("authIdTokenMaxAge")||f4;let JE=null;const h4=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>d4)return;const r=n==null?void 0:n.token;JE!==r&&(JE=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function p4(t=FS()){const e=zm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=HU(t,{popupRedirectResolver:a4,persistence:[_O,aO,pA]}),i=LS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const c=h4(a.toString());nO(n,c,()=>c(n.currentUser)),tO(n,h=>c(h))}}const r=PS("auth");return r&&YU(n,`http://${r}`),n}function m4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}FU({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const a=Ci("internal-error");a.customData=r,n(a)},i.type="text/javascript",i.charset="UTF-8",m4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});c4("Browser");var QE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ys,wA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,M){function b(){}b.prototype=M.prototype,k.D=M.prototype,k.prototype=new b,k.prototype.constructor=k,k.C=function(V,N,q){for(var P=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)P[Tt-2]=arguments[Tt];return M.prototype[N].apply(V,P)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,M,b){b||(b=0);var V=Array(16);if(typeof M=="string")for(var N=0;16>N;++N)V[N]=M.charCodeAt(b++)|M.charCodeAt(b++)<<8|M.charCodeAt(b++)<<16|M.charCodeAt(b++)<<24;else for(N=0;16>N;++N)V[N]=M[b++]|M[b++]<<8|M[b++]<<16|M[b++]<<24;M=k.g[0],b=k.g[1],N=k.g[2];var q=k.g[3],P=M+(q^b&(N^q))+V[0]+3614090360&4294967295;M=b+(P<<7&4294967295|P>>>25),P=q+(N^M&(b^N))+V[1]+3905402710&4294967295,q=M+(P<<12&4294967295|P>>>20),P=N+(b^q&(M^b))+V[2]+606105819&4294967295,N=q+(P<<17&4294967295|P>>>15),P=b+(M^N&(q^M))+V[3]+3250441966&4294967295,b=N+(P<<22&4294967295|P>>>10),P=M+(q^b&(N^q))+V[4]+4118548399&4294967295,M=b+(P<<7&4294967295|P>>>25),P=q+(N^M&(b^N))+V[5]+1200080426&4294967295,q=M+(P<<12&4294967295|P>>>20),P=N+(b^q&(M^b))+V[6]+2821735955&4294967295,N=q+(P<<17&4294967295|P>>>15),P=b+(M^N&(q^M))+V[7]+4249261313&4294967295,b=N+(P<<22&4294967295|P>>>10),P=M+(q^b&(N^q))+V[8]+1770035416&4294967295,M=b+(P<<7&4294967295|P>>>25),P=q+(N^M&(b^N))+V[9]+2336552879&4294967295,q=M+(P<<12&4294967295|P>>>20),P=N+(b^q&(M^b))+V[10]+4294925233&4294967295,N=q+(P<<17&4294967295|P>>>15),P=b+(M^N&(q^M))+V[11]+2304563134&4294967295,b=N+(P<<22&4294967295|P>>>10),P=M+(q^b&(N^q))+V[12]+1804603682&4294967295,M=b+(P<<7&4294967295|P>>>25),P=q+(N^M&(b^N))+V[13]+4254626195&4294967295,q=M+(P<<12&4294967295|P>>>20),P=N+(b^q&(M^b))+V[14]+2792965006&4294967295,N=q+(P<<17&4294967295|P>>>15),P=b+(M^N&(q^M))+V[15]+1236535329&4294967295,b=N+(P<<22&4294967295|P>>>10),P=M+(N^q&(b^N))+V[1]+4129170786&4294967295,M=b+(P<<5&4294967295|P>>>27),P=q+(b^N&(M^b))+V[6]+3225465664&4294967295,q=M+(P<<9&4294967295|P>>>23),P=N+(M^b&(q^M))+V[11]+643717713&4294967295,N=q+(P<<14&4294967295|P>>>18),P=b+(q^M&(N^q))+V[0]+3921069994&4294967295,b=N+(P<<20&4294967295|P>>>12),P=M+(N^q&(b^N))+V[5]+3593408605&4294967295,M=b+(P<<5&4294967295|P>>>27),P=q+(b^N&(M^b))+V[10]+38016083&4294967295,q=M+(P<<9&4294967295|P>>>23),P=N+(M^b&(q^M))+V[15]+3634488961&4294967295,N=q+(P<<14&4294967295|P>>>18),P=b+(q^M&(N^q))+V[4]+3889429448&4294967295,b=N+(P<<20&4294967295|P>>>12),P=M+(N^q&(b^N))+V[9]+568446438&4294967295,M=b+(P<<5&4294967295|P>>>27),P=q+(b^N&(M^b))+V[14]+3275163606&4294967295,q=M+(P<<9&4294967295|P>>>23),P=N+(M^b&(q^M))+V[3]+4107603335&4294967295,N=q+(P<<14&4294967295|P>>>18),P=b+(q^M&(N^q))+V[8]+1163531501&4294967295,b=N+(P<<20&4294967295|P>>>12),P=M+(N^q&(b^N))+V[13]+2850285829&4294967295,M=b+(P<<5&4294967295|P>>>27),P=q+(b^N&(M^b))+V[2]+4243563512&4294967295,q=M+(P<<9&4294967295|P>>>23),P=N+(M^b&(q^M))+V[7]+1735328473&4294967295,N=q+(P<<14&4294967295|P>>>18),P=b+(q^M&(N^q))+V[12]+2368359562&4294967295,b=N+(P<<20&4294967295|P>>>12),P=M+(b^N^q)+V[5]+4294588738&4294967295,M=b+(P<<4&4294967295|P>>>28),P=q+(M^b^N)+V[8]+2272392833&4294967295,q=M+(P<<11&4294967295|P>>>21),P=N+(q^M^b)+V[11]+1839030562&4294967295,N=q+(P<<16&4294967295|P>>>16),P=b+(N^q^M)+V[14]+4259657740&4294967295,b=N+(P<<23&4294967295|P>>>9),P=M+(b^N^q)+V[1]+2763975236&4294967295,M=b+(P<<4&4294967295|P>>>28),P=q+(M^b^N)+V[4]+1272893353&4294967295,q=M+(P<<11&4294967295|P>>>21),P=N+(q^M^b)+V[7]+4139469664&4294967295,N=q+(P<<16&4294967295|P>>>16),P=b+(N^q^M)+V[10]+3200236656&4294967295,b=N+(P<<23&4294967295|P>>>9),P=M+(b^N^q)+V[13]+681279174&4294967295,M=b+(P<<4&4294967295|P>>>28),P=q+(M^b^N)+V[0]+3936430074&4294967295,q=M+(P<<11&4294967295|P>>>21),P=N+(q^M^b)+V[3]+3572445317&4294967295,N=q+(P<<16&4294967295|P>>>16),P=b+(N^q^M)+V[6]+76029189&4294967295,b=N+(P<<23&4294967295|P>>>9),P=M+(b^N^q)+V[9]+3654602809&4294967295,M=b+(P<<4&4294967295|P>>>28),P=q+(M^b^N)+V[12]+3873151461&4294967295,q=M+(P<<11&4294967295|P>>>21),P=N+(q^M^b)+V[15]+530742520&4294967295,N=q+(P<<16&4294967295|P>>>16),P=b+(N^q^M)+V[2]+3299628645&4294967295,b=N+(P<<23&4294967295|P>>>9),P=M+(N^(b|~q))+V[0]+4096336452&4294967295,M=b+(P<<6&4294967295|P>>>26),P=q+(b^(M|~N))+V[7]+1126891415&4294967295,q=M+(P<<10&4294967295|P>>>22),P=N+(M^(q|~b))+V[14]+2878612391&4294967295,N=q+(P<<15&4294967295|P>>>17),P=b+(q^(N|~M))+V[5]+4237533241&4294967295,b=N+(P<<21&4294967295|P>>>11),P=M+(N^(b|~q))+V[12]+1700485571&4294967295,M=b+(P<<6&4294967295|P>>>26),P=q+(b^(M|~N))+V[3]+2399980690&4294967295,q=M+(P<<10&4294967295|P>>>22),P=N+(M^(q|~b))+V[10]+4293915773&4294967295,N=q+(P<<15&4294967295|P>>>17),P=b+(q^(N|~M))+V[1]+2240044497&4294967295,b=N+(P<<21&4294967295|P>>>11),P=M+(N^(b|~q))+V[8]+1873313359&4294967295,M=b+(P<<6&4294967295|P>>>26),P=q+(b^(M|~N))+V[15]+4264355552&4294967295,q=M+(P<<10&4294967295|P>>>22),P=N+(M^(q|~b))+V[6]+2734768916&4294967295,N=q+(P<<15&4294967295|P>>>17),P=b+(q^(N|~M))+V[13]+1309151649&4294967295,b=N+(P<<21&4294967295|P>>>11),P=M+(N^(b|~q))+V[4]+4149444226&4294967295,M=b+(P<<6&4294967295|P>>>26),P=q+(b^(M|~N))+V[11]+3174756917&4294967295,q=M+(P<<10&4294967295|P>>>22),P=N+(M^(q|~b))+V[2]+718787259&4294967295,N=q+(P<<15&4294967295|P>>>17),P=b+(q^(N|~M))+V[9]+3951481745&4294967295,k.g[0]=k.g[0]+M&4294967295,k.g[1]=k.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+q&4294967295}i.prototype.u=function(k,M){M===void 0&&(M=k.length);for(var b=M-this.blockSize,V=this.B,N=this.h,q=0;q<M;){if(N==0)for(;q<=b;)r(this,k,q),q+=this.blockSize;if(typeof k=="string"){for(;q<M;)if(V[N++]=k.charCodeAt(q++),N==this.blockSize){r(this,V),N=0;break}}else for(;q<M;)if(V[N++]=k[q++],N==this.blockSize){r(this,V),N=0;break}}this.h=N,this.o+=M},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var M=1;M<k.length-8;++M)k[M]=0;var b=8*this.o;for(M=k.length-8;M<k.length;++M)k[M]=b&255,b/=256;for(this.u(k),k=Array(16),M=b=0;4>M;++M)for(var V=0;32>V;V+=8)k[b++]=this.g[M]>>>V&255;return k};function a(k,M){var b=h;return Object.prototype.hasOwnProperty.call(b,k)?b[k]:b[k]=M(k)}function c(k,M){this.h=M;for(var b=[],V=!0,N=k.length-1;0<=N;N--){var q=k[N]|0;V&&q==M||(b[N]=q,V=!1)}this.g=b}var h={};function m(k){return-128<=k&&128>k?a(k,function(M){return new c([M|0],0>M?-1:0)}):new c([k|0],0>k?-1:0)}function p(k){if(isNaN(k)||!isFinite(k))return E;if(0>k)return F(p(-k));for(var M=[],b=1,V=0;k>=b;V++)M[V]=k/b|0,b*=4294967296;return new c(M,0)}function v(k,M){if(k.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(k.charAt(0)=="-")return F(v(k.substring(1),M));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=p(Math.pow(M,8)),V=E,N=0;N<k.length;N+=8){var q=Math.min(8,k.length-N),P=parseInt(k.substring(N,N+q),M);8>q?(q=p(Math.pow(M,q)),V=V.j(q).add(p(P))):(V=V.j(b),V=V.add(p(P)))}return V}var E=m(0),S=m(1),I=m(16777216);t=c.prototype,t.m=function(){if(L(this))return-F(this).m();for(var k=0,M=1,b=0;b<this.g.length;b++){var V=this.i(b);k+=(0<=V?V:4294967296+V)*M,M*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(x(this))return"0";if(L(this))return"-"+F(this).toString(k);for(var M=p(Math.pow(k,6)),b=this,V="";;){var N=fe(b,M).g;b=re(b,N.j(M));var q=((0<b.g.length?b.g[0]:b.h)>>>0).toString(k);if(b=N,x(b))return q+V;for(;6>q.length;)q="0"+q;V=q+V}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function x(k){if(k.h!=0)return!1;for(var M=0;M<k.g.length;M++)if(k.g[M]!=0)return!1;return!0}function L(k){return k.h==-1}t.l=function(k){return k=re(this,k),L(k)?-1:x(k)?0:1};function F(k){for(var M=k.g.length,b=[],V=0;V<M;V++)b[V]=~k.g[V];return new c(b,~k.h).add(S)}t.abs=function(){return L(this)?F(this):this},t.add=function(k){for(var M=Math.max(this.g.length,k.g.length),b=[],V=0,N=0;N<=M;N++){var q=V+(this.i(N)&65535)+(k.i(N)&65535),P=(q>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);V=P>>>16,q&=65535,P&=65535,b[N]=P<<16|q}return new c(b,b[b.length-1]&-2147483648?-1:0)};function re(k,M){return k.add(F(M))}t.j=function(k){if(x(this)||x(k))return E;if(L(this))return L(k)?F(this).j(F(k)):F(F(this).j(k));if(L(k))return F(this.j(F(k)));if(0>this.l(I)&&0>k.l(I))return p(this.m()*k.m());for(var M=this.g.length+k.g.length,b=[],V=0;V<2*M;V++)b[V]=0;for(V=0;V<this.g.length;V++)for(var N=0;N<k.g.length;N++){var q=this.i(V)>>>16,P=this.i(V)&65535,Tt=k.i(N)>>>16,We=k.i(N)&65535;b[2*V+2*N]+=P*We,oe(b,2*V+2*N),b[2*V+2*N+1]+=q*We,oe(b,2*V+2*N+1),b[2*V+2*N+1]+=P*Tt,oe(b,2*V+2*N+1),b[2*V+2*N+2]+=q*Tt,oe(b,2*V+2*N+2)}for(V=0;V<M;V++)b[V]=b[2*V+1]<<16|b[2*V];for(V=M;V<2*M;V++)b[V]=0;return new c(b,0)};function oe(k,M){for(;(k[M]&65535)!=k[M];)k[M+1]+=k[M]>>>16,k[M]&=65535,M++}function ie(k,M){this.g=k,this.h=M}function fe(k,M){if(x(M))throw Error("division by zero");if(x(k))return new ie(E,E);if(L(k))return M=fe(F(k),M),new ie(F(M.g),F(M.h));if(L(M))return M=fe(k,F(M)),new ie(F(M.g),M.h);if(30<k.g.length){if(L(k)||L(M))throw Error("slowDivide_ only works with positive integers.");for(var b=S,V=M;0>=V.l(k);)b=ae(b),V=ae(V);var N=me(b,1),q=me(V,1);for(V=me(V,2),b=me(b,2);!x(V);){var P=q.add(V);0>=P.l(k)&&(N=N.add(b),q=P),V=me(V,1),b=me(b,1)}return M=re(k,N.j(M)),new ie(N,M)}for(N=E;0<=k.l(M);){for(b=Math.max(1,Math.floor(k.m()/M.m())),V=Math.ceil(Math.log(b)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),q=p(b),P=q.j(M);L(P)||0<P.l(k);)b-=V,q=p(b),P=q.j(M);x(q)&&(q=S),N=N.add(q),k=re(k,P)}return new ie(N,k)}t.A=function(k){return fe(this,k).h},t.and=function(k){for(var M=Math.max(this.g.length,k.g.length),b=[],V=0;V<M;V++)b[V]=this.i(V)&k.i(V);return new c(b,this.h&k.h)},t.or=function(k){for(var M=Math.max(this.g.length,k.g.length),b=[],V=0;V<M;V++)b[V]=this.i(V)|k.i(V);return new c(b,this.h|k.h)},t.xor=function(k){for(var M=Math.max(this.g.length,k.g.length),b=[],V=0;V<M;V++)b[V]=this.i(V)^k.i(V);return new c(b,this.h^k.h)};function ae(k){for(var M=k.g.length+1,b=[],V=0;V<M;V++)b[V]=k.i(V)<<1|k.i(V-1)>>>31;return new c(b,k.h)}function me(k,M){var b=M>>5;M%=32;for(var V=k.g.length-b,N=[],q=0;q<V;q++)N[q]=0<M?k.i(q+b)>>>M|k.i(q+b+1)<<32-M:k.i(q+b);return new c(N,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,wA=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,ys=c}).apply(typeof QE<"u"?QE:typeof self<"u"?self:typeof window<"u"?window:{});var ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IA,ru,RA,Cf,um,xA,bA,MA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,T,A){return g==Array.prototype||g==Object.prototype||(g[T]=A.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof ff=="object"&&ff];for(var T=0;T<g.length;++T){var A=g[T];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=n(this);function r(g,T){if(T)e:{var A=i;g=g.split(".");for(var R=0;R<g.length-1;R++){var z=g[R];if(!(z in A))break e;A=A[z]}g=g[g.length-1],R=A[g],T=T(R),T!=R&&T!=null&&e(A,g,{configurable:!0,writable:!0,value:T})}}function a(g,T){g instanceof String&&(g+="");var A=0,R=!1,z={next:function(){if(!R&&A<g.length){var Q=A++;return{value:T(Q,g[Q]),done:!1}}return R=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}r("Array.prototype.values",function(g){return g||function(){return a(this,function(T,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function m(g){var T=typeof g;return T=T!="object"?T:g?Array.isArray(g)?"array":T:"null",T=="array"||T=="object"&&typeof g.length=="number"}function p(g){var T=typeof g;return T=="object"&&g!=null||T=="function"}function v(g,T,A){return g.call.apply(g.bind,arguments)}function E(g,T,A){if(!g)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,R),g.apply(T,z)}}return function(){return g.apply(T,arguments)}}function S(g,T,A){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function I(g,T){var A=Array.prototype.slice.call(arguments,1);return function(){var R=A.slice();return R.push.apply(R,arguments),g.apply(this,R)}}function x(g,T){function A(){}A.prototype=T.prototype,g.aa=T.prototype,g.prototype=new A,g.prototype.constructor=g,g.Qb=function(R,z,Q){for(var ce=Array(arguments.length-2),je=2;je<arguments.length;je++)ce[je-2]=arguments[je];return T.prototype[z].apply(R,ce)}}function L(g){const T=g.length;if(0<T){const A=Array(T);for(let R=0;R<T;R++)A[R]=g[R];return A}return[]}function F(g,T){for(let A=1;A<arguments.length;A++){const R=arguments[A];if(m(R)){const z=g.length||0,Q=R.length||0;g.length=z+Q;for(let ce=0;ce<Q;ce++)g[z+ce]=R[ce]}else g.push(R)}}class re{constructor(T,A){this.i=T,this.j=A,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function oe(g){return/^[\s\xa0]*$/.test(g)}function ie(){var g=h.navigator;return g&&(g=g.userAgent)?g:""}function fe(g){return fe[" "](g),g}fe[" "]=function(){};var ae=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function me(g,T,A){for(const R in g)T.call(A,g[R],R,g)}function k(g,T){for(const A in g)T.call(void 0,g[A],A,g)}function M(g){const T={};for(const A in g)T[A]=g[A];return T}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(g,T){let A,R;for(let z=1;z<arguments.length;z++){R=arguments[z];for(A in R)g[A]=R[A];for(let Q=0;Q<b.length;Q++)A=b[Q],Object.prototype.hasOwnProperty.call(R,A)&&(g[A]=R[A])}}function N(g){var T=1;g=g.split(":");const A=[];for(;0<T&&g.length;)A.push(g.shift()),T--;return g.length&&A.push(g.join(":")),A}function q(g){h.setTimeout(()=>{throw g},0)}function P(){var g=Be;let T=null;return g.g&&(T=g.g,g.g=g.g.next,g.g||(g.h=null),T.next=null),T}class Tt{constructor(){this.h=this.g=null}add(T,A){const R=We.get();R.set(T,A),this.h?this.h.next=R:this.g=R,this.h=R}}var We=new re(()=>new X,g=>g.reset());class X{constructor(){this.next=this.g=this.h=null}set(T,A){this.h=T,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ye=!1,Be=new Tt,O=()=>{const g=h.Promise.resolve(void 0);he=()=>{g.then(W)}};var W=()=>{for(var g;g=P();){try{g.h.call(g.g)}catch(A){q(A)}var T=We;T.j(g),100>T.h&&(T.h++,g.next=T.g,T.g=g)}ye=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(g,T){this.type=g,this.g=this.target=T,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var g=!1,T=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};h.addEventListener("test",A,T),h.removeEventListener("test",A,T)}catch{}return g}();function qe(g,T){if(se.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var A=this.type=g.type,R=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=T,T=g.relatedTarget){if(ae){e:{try{fe(T.nodeName);var z=!0;break e}catch{}z=!1}z||(T=null)}}else A=="mouseover"?T=g.fromElement:A=="mouseout"&&(T=g.toElement);this.relatedTarget=T,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:be[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&qe.aa.h.call(this)}}x(qe,se);var be={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Pt="closure_listenable_"+(1e6*Math.random()|0),at=0;function Pn(g,T,A,R,z){this.listener=g,this.proxy=null,this.src=T,this.type=A,this.capture=!!R,this.ha=z,this.key=++at,this.da=this.fa=!1}function ei(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function vn(g){this.src=g,this.g={},this.h=0}vn.prototype.add=function(g,T,A,R,z){var Q=g.toString();g=this.g[Q],g||(g=this.g[Q]=[],this.h++);var ce=xi(g,T,R,z);return-1<ce?(T=g[ce],A||(T.fa=!1)):(T=new Pn(T,this.src,Q,!!R,z),T.fa=A,g.push(T)),T};function Ri(g,T){var A=T.type;if(A in g.g){var R=g.g[A],z=Array.prototype.indexOf.call(R,T,void 0),Q;(Q=0<=z)&&Array.prototype.splice.call(R,z,1),Q&&(ei(T),g.g[A].length==0&&(delete g.g[A],g.h--))}}function xi(g,T,A,R){for(var z=0;z<g.length;++z){var Q=g[z];if(!Q.da&&Q.listener==T&&Q.capture==!!A&&Q.ha==R)return z}return-1}var hi="closure_lm_"+(1e6*Math.random()|0),pi={};function Go(g,T,A,R,z){if(Array.isArray(T)){for(var Q=0;Q<T.length;Q++)Go(g,T[Q],A,R,z);return null}return A=Ms(A),g&&g[Pt]?g.K(T,A,p(R)?!!R.capture:!1,z):Vn(g,T,A,!1,R,z)}function Vn(g,T,A,R,z,Q){if(!T)throw Error("Invalid event type");var ce=p(z)?!!z.capture:!!z,je=bi(g);if(je||(g[hi]=je=new vn(g)),A=je.add(T,A,R,ce,Q),A.proxy)return A;if(R=Za(),A.proxy=R,R.src=g,R.listener=A,g.addEventListener)Ce||(z=ce),z===void 0&&(z=!1),g.addEventListener(T.toString(),R,z);else if(g.attachEvent)g.attachEvent(no(T.toString()),R);else if(g.addListener&&g.removeListener)g.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Za(){function g(A){return T.call(g.src,g.listener,A)}const T=Lr;return g}function Vr(g,T,A,R,z){if(Array.isArray(T))for(var Q=0;Q<T.length;Q++)Vr(g,T[Q],A,R,z);else R=p(R)?!!R.capture:!!R,A=Ms(A),g&&g[Pt]?(g=g.i,T=String(T).toString(),T in g.g&&(Q=g.g[T],A=xi(Q,A,R,z),-1<A&&(ei(Q[A]),Array.prototype.splice.call(Q,A,1),Q.length==0&&(delete g.g[T],g.h--)))):g&&(g=bi(g))&&(T=g.g[T.toString()],g=-1,T&&(g=xi(T,A,R,z)),(A=-1<g?T[g]:null)&&zo(A))}function zo(g){if(typeof g!="number"&&g&&!g.da){var T=g.src;if(T&&T[Pt])Ri(T.i,g);else{var A=g.type,R=g.proxy;T.removeEventListener?T.removeEventListener(A,R,g.capture):T.detachEvent?T.detachEvent(no(A),R):T.addListener&&T.removeListener&&T.removeListener(R),(A=bi(T))?(Ri(A,g),A.h==0&&(A.src=null,T[hi]=null)):ei(g)}}}function no(g){return g in pi?pi[g]:pi[g]="on"+g}function Lr(g,T){if(g.da)g=!0;else{T=new qe(T,this);var A=g.listener,R=g.ha||g.src;g.fa&&zo(g),g=A.call(R,T)}return g}function bi(g){return g=g[hi],g instanceof vn?g:null}var Ur="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ms(g){return typeof g=="function"?g:(g[Ur]||(g[Ur]=function(T){return g.handleEvent(T)}),g[Ur])}function Rt(){de.call(this),this.i=new vn(this),this.M=this,this.F=null}x(Rt,de),Rt.prototype[Pt]=!0,Rt.prototype.removeEventListener=function(g,T,A,R){Vr(this,g,T,A,R)};function rt(g,T){var A,R=g.F;if(R)for(A=[];R;R=R.F)A.push(R);if(g=g.M,R=T.type||T,typeof T=="string")T=new se(T,g);else if(T instanceof se)T.target=T.target||g;else{var z=T;T=new se(R,g),V(T,z)}if(z=!0,A)for(var Q=A.length-1;0<=Q;Q--){var ce=T.g=A[Q];z=Yt(ce,R,!0,T)&&z}if(ce=T.g=g,z=Yt(ce,R,!0,T)&&z,z=Yt(ce,R,!1,T)&&z,A)for(Q=0;Q<A.length;Q++)ce=T.g=A[Q],z=Yt(ce,R,!1,T)&&z}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var g=this.i,T;for(T in g.g){for(var A=g.g[T],R=0;R<A.length;R++)ei(A[R]);delete g.g[T],g.h--}}this.F=null},Rt.prototype.K=function(g,T,A,R){return this.i.add(String(g),T,!1,A,R)},Rt.prototype.L=function(g,T,A,R){return this.i.add(String(g),T,!0,A,R)};function Yt(g,T,A,R){if(T=g.i.g[String(T)],!T)return!0;T=T.concat();for(var z=!0,Q=0;Q<T.length;++Q){var ce=T[Q];if(ce&&!ce.da&&ce.capture==A){var je=ce.listener,Kt=ce.ha||ce.src;ce.fa&&Ri(g.i,ce),z=je.call(Kt,R)!==!1&&z}}return z&&!R.defaultPrevented}function Ut(g,T,A){if(typeof g=="function")A&&(g=S(g,A));else if(g&&typeof g.handleEvent=="function")g=S(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:h.setTimeout(g,T||0)}function Or(g){g.g=Ut(()=>{g.g=null,g.i&&(g.i=!1,Or(g))},g.l);const T=g.h;g.h=null,g.m.apply(null,T)}class ja extends de{constructor(T,A){super(),this.m=T,this.l=A,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Or(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mi(g){de.call(this),this.h=g,this.g={}}x(mi,de);var io=[];function In(g){me(g.g,function(T,A){this.g.hasOwnProperty(A)&&zo(T)},g),g.g={}}mi.prototype.N=function(){mi.aa.N.call(this),In(this)},mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qn=h.JSON.stringify,Ho=h.JSON.parse,Mi=class{stringify(g){return h.JSON.stringify(g,void 0)}parse(g){return h.JSON.parse(g,void 0)}};function an(){}an.prototype.h=null;function J(g){return g.h||(g.h=g.i())}function ee(){}var te={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pe(){se.call(this,"d")}x(pe,se);function Ve(){se.call(this,"c")}x(Ve,se);var Me={},$e=null;function Ge(){return $e=$e||new Rt}Me.La="serverreachability";function mt(g){se.call(this,Me.La,g)}x(mt,se);function xt(g){const T=Ge();rt(T,new mt(T))}Me.STAT_EVENT="statevent";function bt(g,T){se.call(this,Me.STAT_EVENT,g),this.stat=T}x(bt,se);function Se(g){const T=Ge();rt(T,new bt(T,g))}Me.Ma="timingevent";function Ie(g,T){se.call(this,Me.Ma,g),this.size=T}x(Ie,se);function Oe(g,T){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){g()},T)}function De(){this.g=!0}De.prototype.xa=function(){this.g=!1};function ze(g,T,A,R,z,Q){g.info(function(){if(g.g)if(Q)for(var ce="",je=Q.split("&"),Kt=0;Kt<je.length;Kt++){var et=je[Kt].split("=");if(1<et.length){var tn=et[0];et=et[1];var Jt=tn.split("_");ce=2<=Jt.length&&Jt[1]=="type"?ce+(tn+"="+et+"&"):ce+(tn+"=redacted&")}}else ce=null;else ce=Q;return"XMLHTTP REQ ("+R+") [attempt "+z+"]: "+T+`
`+A+`
`+ce})}function Et(g,T,A,R,z,Q,ce){g.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+z+"]: "+T+`
`+A+`
`+Q+" "+ce})}function jt(g,T,A,R){g.info(function(){return"XMLHTTP TEXT ("+T+"): "+Rn(g,A)+(R?" "+R:"")})}function $o(g,T){g.info(function(){return"TIMEOUT: "+T})}De.prototype.info=function(){};function Rn(g,T){if(!g.g)return T;if(!T)return null;try{var A=JSON.parse(T);if(A){for(g=0;g<A.length;g++)if(Array.isArray(A[g])){var R=A[g];if(!(2>R.length)){var z=R[1];if(Array.isArray(z)&&!(1>z.length)){var Q=z[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ce=1;ce<z.length;ce++)z[ce]=""}}}}return qn(A)}catch{return T}}var Yo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},oo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ni;function ki(){}x(ki,an),ki.prototype.g=function(){return new XMLHttpRequest},ki.prototype.i=function(){return{}},Ni=new ki;function xn(g,T,A,R){this.j=g,this.i=T,this.l=A,this.R=R||1,this.U=new mi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ot}function Ot(){this.i=null,this.g="",this.h=!1}var el={},Ns={};function gi(g,T,A){g.L=1,g.v=zr(Gn(T)),g.m=A,g.P=!0,ro(g,null)}function ro(g,T){g.F=Date.now(),Br(g),g.A=Gn(g.v);var A=g.A,R=g.R;Array.isArray(R)||(R=[String(R)]),sl(A.i,"t",R),g.C=0,A=g.j.J,g.h=new Ot,g.g=ec(g.j,A?T:null,!g.m),0<g.O&&(g.M=new ja(S(g.Y,g,g.g),g.O)),T=g.U,A=g.g,R=g.ca;var z="readystatechange";Array.isArray(z)||(z&&(io[0]=z.toString()),z=io);for(var Q=0;Q<z.length;Q++){var ce=Go(A,z[Q],R||T.handleEvent,!1,T.h||T);if(!ce)break;T.g[ce.key]=ce}T=g.H?M(g.H):{},g.m?(g.u||(g.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,T)):(g.u="GET",g.g.ea(g.A,g.u,null,T)),xt(),ze(g.i,g.u,g.A,g.l,g.R,g.m)}xn.prototype.ca=function(g){g=g.target;const T=this.M;T&&oi(g)==3?T.j():this.Y(g)},xn.prototype.Y=function(g){try{if(g==this.g)e:{const Jt=oi(this.g);var T=this.g.Ba();const po=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||Yu(this.g)))){this.J||Jt!=4||T==7||(T==8||0>=po?xt(3):xt(2)),Ko(this);var A=this.g.Z();this.X=A;t:if(Bu(this)){var R=Yu(this.g);g="";var z=R.length,Q=oi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),Di(this);var ce="";break t}this.h.i=new h.TextDecoder}for(T=0;T<z;T++)this.h.h=!0,g+=this.h.i.decode(R[T],{stream:!(Q&&T==z-1)});R.length=0,this.h.g+=g,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=A==200,Et(this.i,this.u,this.A,this.l,this.R,Jt,A),this.o){if(this.T&&!this.K){t:{if(this.g){var je,Kt=this.g;if((je=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(je)){var et=je;break t}}et=null}if(A=et)jt(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fr(this,A);else{this.o=!1,this.s=3,Se(12),ln(this),Di(this);break e}}if(this.P){A=!0;let un;for(;!this.J&&this.C<ce.length;)if(un=Fu(this,ce),un==Ns){Jt==4&&(this.s=4,Se(14),A=!1),jt(this.i,this.l,null,"[Incomplete Response]");break}else if(un==el){this.s=4,Se(15),jt(this.i,this.l,ce,"[Invalid Chunk]"),A=!1;break}else jt(this.i,this.l,un,null),Fr(this,un);if(Bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||ce.length!=0||this.h.h||(this.s=1,Se(16),A=!1),this.o=this.o&&A,!A)jt(this.i,this.l,ce,"[Invalid Chunked Response]"),ln(this),Di(this);else if(0<ce.length&&!this.W){this.W=!0;var tn=this.j;tn.g==this&&tn.ba&&!tn.M&&(tn.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Wr(tn),tn.M=!0,Se(11))}}else jt(this.i,this.l,ce,null),Fr(this,ce);Jt==4&&ln(this),this.o&&!this.J&&(Jt==4?Wu(this.j,this):(this.o=!1,Br(this)))}else xd(this.g),A==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),ln(this),Di(this)}}}catch{}finally{}};function Bu(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Fu(g,T){var A=g.C,R=T.indexOf(`
`,A);return R==-1?Ns:(A=Number(T.substring(A,R)),isNaN(A)?el:(R+=1,R+A>T.length?Ns:(T=T.slice(R,R+A),g.C=R+A,T)))}xn.prototype.cancel=function(){this.J=!0,ln(this)};function Br(g){g.S=Date.now()+g.I,qu(g,g.I)}function qu(g,T){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Oe(S(g.ba,g),T)}function Ko(g){g.B&&(h.clearTimeout(g.B),g.B=null)}xn.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?($o(this.i,this.A),this.L!=2&&(xt(),Se(17)),ln(this),this.s=2,Di(this)):qu(this,this.S-g)};function Di(g){g.j.G==0||g.J||Wu(g.j,g)}function ln(g){Ko(g);var T=g.M;T&&typeof T.ma=="function"&&T.ma(),g.M=null,In(g.U),g.g&&(T=g.g,g.g=null,T.abort(),T.ma())}function Fr(g,T){try{var A=g.j;if(A.G!=0&&(A.g==g||tl(A.h,g))){if(!g.K&&tl(A.h,g)&&A.G==3){try{var R=A.Da.g.parse(T)}catch{R=null}if(Array.isArray(R)&&R.length==3){var z=R;if(z[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<g.F)zs(A),qs(A);else break e;fl(A),Se(18)}}else A.za=z[1],0<A.za-A.T&&37500>z[2]&&A.F&&A.v==0&&!A.C&&(A.C=Oe(S(A.Za,A),6e3));if(1>=Ds(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else ho(A,11)}else if((g.K||A.g==g)&&zs(A),!oe(T))for(z=A.Da.g.parse(T),T=0;T<z.length;T++){let et=z[T];if(A.T=et[0],et=et[1],A.G==2)if(et[0]=="c"){A.K=et[1],A.ia=et[2];const tn=et[3];tn!=null&&(A.la=tn,A.j.info("VER="+A.la));const Jt=et[4];Jt!=null&&(A.Aa=Jt,A.j.info("SVER="+A.Aa));const po=et[5];po!=null&&typeof po=="number"&&0<po&&(R=1.5*po,A.L=R,A.j.info("backChannelRequestTimeoutMs_="+R)),R=A;const un=g.g;if(un){const Fi=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fi){var Q=R.h;Q.g||Fi.indexOf("spdy")==-1&&Fi.indexOf("quic")==-1&&Fi.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ps(Q,Q.h),Q.h=null))}if(R.D){const hl=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;hl&&(R.ya=hl,gt(R.I,R.D,hl))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-g.F,A.j.info("Handshake RTT: "+A.R+"ms")),R=A;var ce=g;if(R.qa=ju(R,R.J?R.ia:null,R.W),ce.K){bn(R.h,ce);var je=ce,Kt=R.L;Kt&&(je.I=Kt),je.B&&(Ko(je),Br(je)),R.g=ce}else Qu(R);0<A.i.length&&Gs(A)}else et[0]!="stop"&&et[0]!="close"||ho(A,7);else A.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?ho(A,7):ul(A):et[0]!="noop"&&A.l&&A.l.ta(et),A.v=0)}}xt(4)}catch{}}var Gu=class{constructor(g,T){this.g=g,this.map=T}};function so(g){this.l=g||10,h.PerformanceNavigationTiming?(g=h.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ks(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ds(g){return g.h?1:g.g?g.g.size:0}function tl(g,T){return g.h?g.h==T:g.g?g.g.has(T):!1}function Ps(g,T){g.g?g.g.add(T):g.h=T}function bn(g,T){g.h&&g.h==T?g.h=null:g.g&&g.g.has(T)&&g.g.delete(T)}so.prototype.cancel=function(){if(this.i=nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function nl(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let T=g.i;for(const A of g.g.values())T=T.concat(A.D);return T}return L(g.i)}function Cd(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(m(g)){for(var T=[],A=g.length,R=0;R<A;R++)T.push(g[R]);return T}T=[],A=0;for(R in g)T[A++]=g[R];return T}function Vs(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(m(g)||typeof g=="string"){var T=[];g=g.length;for(var A=0;A<g;A++)T.push(A);return T}T=[],A=0;for(const R in g)T[A++]=R;return T}}}function il(g,T){if(g.forEach&&typeof g.forEach=="function")g.forEach(T,void 0);else if(m(g)||typeof g=="string")Array.prototype.forEach.call(g,T,void 0);else for(var A=Vs(g),R=Cd(g),z=R.length,Q=0;Q<z;Q++)T.call(void 0,R[Q],A&&A[Q],g)}var qr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wd(g,T){if(g){g=g.split("&");for(var A=0;A<g.length;A++){var R=g[A].indexOf("="),z=null;if(0<=R){var Q=g[A].substring(0,R);z=g[A].substring(R+1)}else Q=g[A];T(Q,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Gt(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Gt){this.h=g.h,Gr(this,g.j),this.o=g.o,this.g=g.g,Jo(this,g.s),this.l=g.l;var T=g.i,A=new lo;A.i=T.i,T.g&&(A.g=new Map(T.g),A.h=T.h),ao(this,A),this.m=g.m}else g&&(T=String(g).match(qr))?(this.h=!1,Gr(this,T[1]||"",!0),this.o=ti(T[2]||""),this.g=ti(T[3]||"",!0),Jo(this,T[4]),this.l=ti(T[5]||"",!0),ao(this,T[6]||"",!0),this.m=ti(T[7]||"")):(this.h=!1,this.i=new lo(null,this.h))}Gt.prototype.toString=function(){var g=[],T=this.j;T&&g.push(Hr(T,ol,!0),":");var A=this.g;return(A||T=="file")&&(g.push("//"),(T=this.o)&&g.push(Hr(T,ol,!0),"@"),g.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&g.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(Hr(A,A.charAt(0)=="/"?Id:rl,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",Hr(A,Ls)),g.join("")};function Gn(g){return new Gt(g)}function Gr(g,T,A){g.j=A?ti(T,!0):T,g.j&&(g.j=g.j.replace(/:$/,""))}function Jo(g,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);g.s=T}else g.s=null}function ao(g,T,A){T instanceof lo?(g.i=T,Hu(g.i,g.h)):(A||(T=Hr(T,Rd)),g.i=new lo(T,g.h))}function gt(g,T,A){g.i.set(T,A)}function zr(g){return gt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function ti(g,T){return g?T?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Hr(g,T,A){return typeof g=="string"?(g=encodeURI(g).replace(T,zu),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function zu(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var ol=/[#\/\?@]/g,rl=/[#\?:]/g,Id=/[#\?]/g,Rd=/[#\?@]/g,Ls=/#/g;function lo(g,T){this.h=this.g=null,this.i=g||null,this.j=!!T}function ni(g){g.g||(g.g=new Map,g.h=0,g.i&&wd(g.i,function(T,A){g.add(decodeURIComponent(T.replace(/\+/g," ")),A)}))}t=lo.prototype,t.add=function(g,T){ni(this),this.i=null,g=Pi(this,g);var A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(T),this.h+=1,this};function uo(g,T){ni(g),T=Pi(g,T),g.g.has(T)&&(g.i=null,g.h-=g.g.get(T).length,g.g.delete(T))}function co(g,T){return ni(g),T=Pi(g,T),g.g.has(T)}t.forEach=function(g,T){ni(this),this.g.forEach(function(A,R){A.forEach(function(z){g.call(T,z,R,this)},this)},this)},t.na=function(){ni(this);const g=Array.from(this.g.values()),T=Array.from(this.g.keys()),A=[];for(let R=0;R<T.length;R++){const z=g[R];for(let Q=0;Q<z.length;Q++)A.push(T[R])}return A},t.V=function(g){ni(this);let T=[];if(typeof g=="string")co(this,g)&&(T=T.concat(this.g.get(Pi(this,g))));else{g=Array.from(this.g.values());for(let A=0;A<g.length;A++)T=T.concat(g[A])}return T},t.set=function(g,T){return ni(this),this.i=null,g=Pi(this,g),co(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[T]),this.h+=1,this},t.get=function(g,T){return g?(g=this.V(g),0<g.length?String(g[0]):T):T};function sl(g,T,A){uo(g,T),0<A.length&&(g.i=null,g.g.set(Pi(g,T),L(A)),g.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],T=Array.from(this.g.keys());for(var A=0;A<T.length;A++){var R=T[A];const Q=encodeURIComponent(String(R)),ce=this.V(R);for(R=0;R<ce.length;R++){var z=Q;ce[R]!==""&&(z+="="+encodeURIComponent(String(ce[R]))),g.push(z)}}return this.i=g.join("&")};function Pi(g,T){return T=String(T),g.j&&(T=T.toLowerCase()),T}function Hu(g,T){T&&!g.j&&(ni(g),g.i=null,g.g.forEach(function(A,R){var z=R.toLowerCase();R!=z&&(uo(this,R),sl(this,z,A))},g)),g.j=T}function $r(g,T){const A=new De;if(h.Image){const R=new Image;R.onload=I(ii,A,"TestLoadImage: loaded",!0,T,R),R.onerror=I(ii,A,"TestLoadImage: error",!1,T,R),R.onabort=I(ii,A,"TestLoadImage: abort",!1,T,R),R.ontimeout=I(ii,A,"TestLoadImage: timeout",!1,T,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=g}else T(!1)}function yi(g,T){const A=new De,R=new AbortController,z=setTimeout(()=>{R.abort(),ii(A,"TestPingServer: timeout",!1,T)},1e4);fetch(g,{signal:R.signal}).then(Q=>{clearTimeout(z),Q.ok?ii(A,"TestPingServer: ok",!0,T):ii(A,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(z),ii(A,"TestPingServer: error",!1,T)})}function ii(g,T,A,R,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),R(A)}catch{}}function Yr(){this.g=new Mi}function Vi(g,T,A){const R=A||"";try{il(g,function(z,Q){let ce=z;p(z)&&(ce=qn(z)),T.push(R+Q+"="+encodeURIComponent(ce))})}catch(z){throw T.push(R+"type="+encodeURIComponent("_badmap")),z}}function Qo(g){this.l=g.Ub||null,this.j=g.eb||!1}x(Qo,an),Qo.prototype.g=function(){return new fo(this.l,this.j)},Qo.prototype.i=function(g){return function(){return g}}({});function fo(g,T){Rt.call(this),this.D=g,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(fo,Rt),t=fo.prototype,t.open=function(g,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=T,this.readyState=1,Ui(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(T.body=g),(this.D||h).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Li(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;al(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function al(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var T=g.value?g.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!g.done}))&&(this.response=this.responseText+=T)}g.done?Li(this):Ui(this),this.readyState==3&&al(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Li(this))},t.Qa=function(g){this.g&&(this.response=g,Li(this))},t.ga=function(){this.g&&Li(this)};function Li(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Ui(g)}t.setRequestHeader=function(g,T){this.u.append(g,T)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],T=this.h.entries();for(var A=T.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=T.next();return g.join(`\r
`)};function Ui(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function ll(g){let T="";return me(g,function(A,R){T+=R,T+=":",T+=A,T+=`\r
`}),T}function en(g,T,A){e:{for(R in A){var R=!1;break e}R=!0}R||(A=ll(A),typeof g=="string"?A!=null&&encodeURIComponent(String(A)):gt(g,T,A))}function lt(g){Rt.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(lt,Rt);var Us=/^https?$/i,Kr=["POST","PUT"];t=lt.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,T,A,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);T=T?T.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ni.g(),this.v=this.o?J(this.o):J(Ni),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(T,String(g),!0),this.B=!1}catch(Q){$u(this,Q);return}if(g=A||"",A=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var z in R)A.set(z,R[z]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Q of R.keys())A.set(Q,R.get(Q));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(A.keys()).find(Q=>Q.toLowerCase()=="content-type"),z=h.FormData&&g instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Kr,T,void 0))||R||z||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ce]of A)this.g.setRequestHeader(Q,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jr(this),this.u=!0,this.g.send(g),this.u=!1}catch(Q){$u(this,Q)}};function $u(g,T){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=T,g.m=5,Os(g),Oi(g)}function Os(g){g.A||(g.A=!0,rt(g,"complete"),rt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,rt(this,"complete"),rt(this,"abort"),Oi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Bs(this):this.bb())},t.bb=function(){Bs(this)};function Bs(g){if(g.h&&typeof c<"u"&&(!g.v[1]||oi(g)!=4||g.Z()!=2)){if(g.u&&oi(g)==4)Ut(g.Ea,0,g);else if(rt(g,"readystatechange"),oi(g)==4){g.h=!1;try{const ce=g.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var A;if(!(A=T)){var R;if(R=ce===0){var z=String(g.D).match(qr)[1]||null;!z&&h.self&&h.self.location&&(z=h.self.location.protocol.slice(0,-1)),R=!Us.test(z?z.toLowerCase():"")}A=R}if(A)rt(g,"complete"),rt(g,"success");else{g.m=6;try{var Q=2<oi(g)?g.g.statusText:""}catch{Q=""}g.l=Q+" ["+g.Z()+"]",Os(g)}}finally{Oi(g)}}}}function Oi(g,T){if(g.g){Jr(g);const A=g.g,R=g.v[0]?()=>{}:null;g.g=null,g.v=null,T||rt(g,"ready");try{A.onreadystatechange=R}catch{}}}function Jr(g){g.I&&(h.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function oi(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<oi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var T=this.g.responseText;return g&&T.indexOf(g)==0&&(T=T.substring(g.length)),Ho(T)}};function Yu(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function xd(g){const T={};g=(g.g&&2<=oi(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<g.length;R++){if(oe(g[R]))continue;var A=N(g[R]);const z=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const Q=T[z]||[];T[z]=Q,Q.push(A)}k(T,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qr(g,T,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||T}function Fs(g){this.Aa=0,this.i=[],this.j=new De,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qr("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qr("baseRetryDelayMs",5e3,g),this.cb=Qr("retryDelaySeedMs",1e4,g),this.Wa=Qr("forwardChannelMaxRetries",2,g),this.wa=Qr("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new so(g&&g.concurrentRequestLimit),this.Da=new Yr,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Fs.prototype,t.la=8,t.G=1,t.connect=function(g,T,A,R){Se(0),this.W=g,this.H=T||{},A&&R!==void 0&&(this.H.OSID=A,this.H.OAID=R),this.F=this.X,this.I=ju(this,null,this.W),Gs(this)};function ul(g){if(Ku(g),g.G==3){var T=g.U++,A=Gn(g.I);if(gt(A,"SID",g.K),gt(A,"RID",T),gt(A,"TYPE","terminate"),Xr(g,A),T=new xn(g,g.j,T),T.L=2,T.v=zr(Gn(A)),A=!1,h.navigator&&h.navigator.sendBeacon)try{A=h.navigator.sendBeacon(T.v.toString(),"")}catch{}!A&&h.Image&&(new Image().src=T.v,A=!0),A||(T.g=ec(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Br(T)}Zu(g)}function qs(g){g.g&&(Wr(g),g.g.cancel(),g.g=null)}function Ku(g){qs(g),g.u&&(h.clearTimeout(g.u),g.u=null),zs(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&h.clearTimeout(g.s),g.s=null)}function Gs(g){if(!ks(g.h)&&!g.s){g.s=!0;var T=g.Ga;he||O(),ye||(he(),ye=!0),Be.add(T,g),g.B=0}}function bd(g,T){return Ds(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=T.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Oe(S(g.Ga,g,T),dl(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const z=new xn(this,this.j,g);let Q=this.o;if(this.S&&(Q?(Q=M(Q),V(Q,this.S)):Q=this.S),this.m!==null||this.O||(z.H=Q,Q=null),this.P)e:{for(var T=0,A=0;A<this.i.length;A++){t:{var R=this.i[A];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(T+=R,4096<T){T=A;break e}if(T===4096||A===this.i.length-1){T=A+1;break e}}T=1e3}else T=1e3;T=Ju(this,z,T),A=Gn(this.I),gt(A,"RID",g),gt(A,"CVER",22),this.D&&gt(A,"X-HTTP-Session-Id",this.D),Xr(this,A),Q&&(this.O?T="headers="+encodeURIComponent(String(ll(Q)))+"&"+T:this.m&&en(A,this.m,Q)),Ps(this.h,z),this.Ua&&gt(A,"TYPE","init"),this.P?(gt(A,"$req",T),gt(A,"SID","null"),z.T=!0,gi(z,A,null)):gi(z,A,T),this.G=2}}else this.G==3&&(g?cl(this,g):this.i.length==0||ks(this.h)||cl(this))};function cl(g,T){var A;T?A=T.l:A=g.U++;const R=Gn(g.I);gt(R,"SID",g.K),gt(R,"RID",A),gt(R,"AID",g.T),Xr(g,R),g.m&&g.o&&en(R,g.m,g.o),A=new xn(g,g.j,A,g.B+1),g.m===null&&(A.H=g.o),T&&(g.i=T.D.concat(g.i)),T=Ju(g,A,1e3),A.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Ps(g.h,A),gi(A,R,T)}function Xr(g,T){g.H&&me(g.H,function(A,R){gt(T,R,A)}),g.l&&il({},function(A,R){gt(T,R,A)})}function Ju(g,T,A){A=Math.min(g.i.length,A);var R=g.l?S(g.l.Na,g.l,g):null;e:{var z=g.i;let Q=-1;for(;;){const ce=["count="+A];Q==-1?0<A?(Q=z[0].g,ce.push("ofs="+Q)):Q=0:ce.push("ofs="+Q);let je=!0;for(let Kt=0;Kt<A;Kt++){let et=z[Kt].g;const tn=z[Kt].map;if(et-=Q,0>et)Q=Math.max(0,z[Kt].g-100),je=!1;else try{Vi(tn,ce,"req"+et+"_")}catch{R&&R(tn)}}if(je){R=ce.join("&");break e}}}return g=g.i.splice(0,A),T.D=g,R}function Qu(g){if(!g.g&&!g.u){g.Y=1;var T=g.Fa;he||O(),ye||(he(),ye=!0),Be.add(T,g),g.v=0}}function fl(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Oe(S(g.Fa,g),dl(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,Xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Oe(S(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),qs(this),Xu(this))};function Wr(g){g.A!=null&&(h.clearTimeout(g.A),g.A=null)}function Xu(g){g.g=new xn(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var T=Gn(g.qa);gt(T,"RID","rpc"),gt(T,"SID",g.K),gt(T,"AID",g.T),gt(T,"CI",g.F?"0":"1"),!g.F&&g.ja&&gt(T,"TO",g.ja),gt(T,"TYPE","xmlhttp"),Xr(g,T),g.m&&g.o&&en(T,g.m,g.o),g.L&&(g.g.I=g.L);var A=g.g;g=g.ia,A.L=1,A.v=zr(Gn(T)),A.m=null,A.P=!0,ro(A,g)}t.Za=function(){this.C!=null&&(this.C=null,qs(this),fl(this),Se(19))};function zs(g){g.C!=null&&(h.clearTimeout(g.C),g.C=null)}function Wu(g,T){var A=null;if(g.g==T){zs(g),Wr(g),g.g=null;var R=2}else if(tl(g.h,T))A=T.D,bn(g.h,T),R=1;else return;if(g.G!=0){if(T.o)if(R==1){A=T.m?T.m.length:0,T=Date.now()-T.F;var z=g.B;R=Ge(),rt(R,new Ie(R,A)),Gs(g)}else Qu(g);else if(z=T.s,z==3||z==0&&0<T.X||!(R==1&&bd(g,T)||R==2&&fl(g)))switch(A&&0<A.length&&(T=g.h,T.i=T.i.concat(A)),z){case 1:ho(g,5);break;case 4:ho(g,10);break;case 3:ho(g,6);break;default:ho(g,2)}}}function dl(g,T){let A=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(A*=2),A*T}function ho(g,T){if(g.j.info("Error code "+T),T==2){var A=S(g.fb,g),R=g.Xa;const z=!R;R=new Gt(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Gr(R,"https"),zr(R),z?$r(R.toString(),A):yi(R.toString(),A)}else Se(2);g.G=0,g.l&&g.l.sa(T),Zu(g),Ku(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))};function Zu(g){if(g.G=0,g.ka=[],g.l){const T=nl(g.h);(T.length!=0||g.i.length!=0)&&(F(g.ka,T),F(g.ka,g.i),g.h.i.length=0,L(g.i),g.i.length=0),g.l.ra()}}function ju(g,T,A){var R=A instanceof Gt?Gn(A):new Gt(A);if(R.g!="")T&&(R.g=T+"."+R.g),Jo(R,R.s);else{var z=h.location;R=z.protocol,T=T?T+"."+z.hostname:z.hostname,z=+z.port;var Q=new Gt(null);R&&Gr(Q,R),T&&(Q.g=T),z&&Jo(Q,z),A&&(Q.l=A),R=Q}return A=g.D,T=g.ya,A&&T&&gt(R,A,T),gt(R,"VER",g.la),Xr(g,R),R}function ec(g,T,A){if(T&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=g.Ca&&!g.pa?new lt(new Qo({eb:A})):new lt(g.pa),T.Ha(g.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function tc(){}t=tc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hs(){}Hs.prototype.g=function(g,T){return new Mn(g,T)};function Mn(g,T){Rt.call(this),this.g=new Fs(T),this.l=g,this.h=T&&T.messageUrlParams||null,g=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(g?g["X-WebChannel-Content-Type"]=T.messageContentType:g={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(g?g["X-WebChannel-Client-Profile"]=T.va:g={"X-WebChannel-Client-Profile":T.va}),this.g.S=g,(g=T&&T.Sb)&&!oe(g)&&(this.g.m=g),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!oe(T)&&(this.g.D=T,g=this.h,g!==null&&T in g&&(g=this.h,T in g&&delete g[T])),this.j=new Bi(this)}x(Mn,Rt),Mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){ul(this.g)},Mn.prototype.o=function(g){var T=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.u&&(A={},A.__data__=qn(g),g=A);T.i.push(new Gu(T.Ya++,g)),T.G==3&&Gs(T)},Mn.prototype.N=function(){this.g.l=null,delete this.j,ul(this.g),delete this.g,Mn.aa.N.call(this)};function nc(g){pe.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var T=g.__sm__;if(T){e:{for(const A in T){g=A;break e}g=void 0}(this.i=g)&&(g=this.i,T=T!==null&&g in T?T[g]:void 0),this.data=T}else this.data=g}x(nc,pe);function ic(){Ve.call(this),this.status=1}x(ic,Ve);function Bi(g){this.g=g}x(Bi,tc),Bi.prototype.ua=function(){rt(this.g,"a")},Bi.prototype.ta=function(g){rt(this.g,new nc(g))},Bi.prototype.sa=function(g){rt(this.g,new ic)},Bi.prototype.ra=function(){rt(this.g,"b")},Hs.prototype.createWebChannel=Hs.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,MA=function(){return new Hs},bA=function(){return Ge()},xA=Me,um={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yo.NO_ERROR=0,Yo.TIMEOUT=8,Yo.HTTP_ERROR=6,Cf=Yo,oo.COMPLETE="complete",RA=oo,ee.EventType=te,te.OPEN="a",te.CLOSE="b",te.ERROR="c",te.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,ru=ee,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,IA=lt}).apply(typeof ff<"u"?ff:typeof self<"u"?self:typeof window<"u"?window:{});const XE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new qm("@firebase/firestore");function ou(){return Es.logLevel}function ve(t,...e){if(Es.logLevel<=Ze.DEBUG){const n=e.map(eg);Es.debug(`Firestore (${Qa}): ${t}`,...n)}}function Oo(t,...e){if(Es.logLevel<=Ze.ERROR){const n=e.map(eg);Es.error(`Firestore (${Qa}): ${t}`,...n)}}function Da(t,...e){if(Es.logLevel<=Ze.WARN){const n=e.map(eg);Es.warn(`Firestore (${Qa}): ${t}`,...n)}}function eg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t="Unexpected state"){const e=`FIRESTORE (${Qa}) INTERNAL ASSERTION FAILED: `+t;throw Oo(e),new Error(e)}function pt(t,e){t||Pe()}function Ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends qo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Sn.UNAUTHENTICATED))}shutdown(){}}class y4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class v4{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pt(this.o===void 0);let i=this.i;const r=m=>this.i!==i?(i=this.i,n(m)):Promise.resolve();let a=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Rr,e.enqueueRetryable(()=>r(this.currentUser))};const c=()=>{const m=a;e.enqueueRetryable(async()=>{await m.promise,await r(this.currentUser)})},h=m=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>h(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Rr)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pt(typeof i.accessToken=="string"),new NA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string"),new Sn(e)}}class _4{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class T4{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new _4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class E4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class S4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pt(this.o===void 0);const i=a=>{a.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const r=a=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>r(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?r(a):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pt(typeof n.token=="string"),this.R=n.token,new E4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=A4(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<n&&(i+=e.charAt(r[a]%e.length))}return i}}function ot(t,e){return t<e?-1:t>e?1:0}function Pa(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ae(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ae(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zt.fromMillis(Date.now())}static fromDate(e){return Zt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Zt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Le(e)}static min(){return new Le(new Zt(0,0))}static max(){return new Le(new Zt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n,i){n===void 0?n=0:n>e.length&&Pe(),i===void 0?i=e.length-n:i>e.length-n&&Pe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Tu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Tu?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const a=e.get(r),c=n.get(r);if(a<c)return-1;if(a>c)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Nt extends Tu{construct(e,n,i){return new Nt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ae(le.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Nt(n)}static emptyPath(){return new Nt([])}}const C4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends Tu{construct(e,n,i){return new pn(e,n,i)}static isValidIdentifier(e){return C4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pn(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const a=()=>{if(i.length===0)throw new Ae(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new Ae(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[r+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ae(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(i+=h,r++):(a(),r++)}if(a(),c)throw new Ae(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(n)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(Nt.fromString(e))}static fromName(e){return new we(Nt.fromString(e).popFirst(5))}static empty(){return new we(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new Nt(e.slice()))}}function w4(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Le.fromTimestamp(i===1e9?new Zt(n+1,0):new Zt(n,i));return new Mr(r,we.empty(),e)}function I4(t){return new Mr(t.readTime,t.key,-1)}class Mr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Mr(Le.min(),we.empty(),-1)}static max(){return new Mr(Le.max(),we.empty(),-1)}}function R4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=we.comparator(t.documentKey,e.documentKey),n!==0?n:ot(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==x4)throw t;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ue.reject(n)}static resolve(e){return new ue((n,i)=>{n(e)})}static reject(e){return new ue((n,i)=>{i(e)})}static waitFor(e){return new ue((n,i)=>{let r=0,a=0,c=!1;e.forEach(h=>{++r,h.next(()=>{++a,c&&a===r&&n()},m=>i(m))}),c=!0,a===r&&n()})}static or(e){let n=ue.resolve(!1);for(const i of e)n=n.next(r=>r?ue.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,a)=>{i.push(n.call(this,r,a))}),this.waitFor(i)}static mapArray(e,n){return new ue((i,r)=>{const a=e.length,c=new Array(a);let h=0;for(let m=0;m<a;m++){const p=m;n(e[p]).next(v=>{c[p]=v,++h,h===a&&i(c)},v=>r(v))}})}static doWhile(e,n){return new ue((i,r)=>{const a=()=>{e()===!0?n().next(()=>{a()},r):i()};a()})}}function M4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Pu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tg.oe=-1;function ad(t){return t==null}function Gf(t){return t===0&&1/t==-1/0}function N4(t){return typeof t=="number"&&Number.isInteger(t)&&!Gf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function DA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n){this.comparator=e,this.root=n||hn.EMPTY}insert(e,n){return new Dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new df(this.root,e,this.comparator,!1)}getReverseIterator(){return new df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new df(this.root,e,this.comparator,!0)}}class df{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,n,i,r,a){this.key=e,this.value=n,this.color=i??hn.RED,this.left=r??hn.EMPTY,this.right=a??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,a){return new hn(e??this.key,n??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,n,i),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return hn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,n,i,r,a){return this}insert(e,n,i){return new hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ZE(this.data.getIterator())}getIteratorFrom(e){return new ZE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mn(this.comparator);return n.data=e,n}}class ZE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new jn([])}unionWith(e){let n=new mn(pn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pa(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new PA("Invalid base64 string: "+a):a}}(e);return new yn(n)}static fromUint8Array(e){const n=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(e);return new yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const k4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(pt(!!t),typeof t=="string"){let e=0;const n=k4.exec(t);if(pt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:qt(t.seconds),nanos:qt(t.nanos)}}function qt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ss(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ig(t){const e=t.mapValue.fields.__previous_value__;return ng(e)?ig(e):e}function Eu(t){const e=Nr(t.mapValue.fields.__local_write_time__.timestampValue);return new Zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,n,i,r,a,c,h,m,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=p}}class Su{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Su("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Su&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf={mapValue:{}};function As(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ng(t)?4:V4(t)?9007199254740991:P4(t)?10:11:Pe()}function eo(t,e){if(t===e)return!0;const n=As(t);if(n!==As(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Eu(t).isEqual(Eu(e));case 3:return function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=Nr(r.timestampValue),h=Nr(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,a){return Ss(r.bytesValue).isEqual(Ss(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,a){return qt(r.geoPointValue.latitude)===qt(a.geoPointValue.latitude)&&qt(r.geoPointValue.longitude)===qt(a.geoPointValue.longitude)}(t,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return qt(r.integerValue)===qt(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=qt(r.doubleValue),h=qt(a.doubleValue);return c===h?Gf(c)===Gf(h):isNaN(c)&&isNaN(h)}return!1}(t,e);case 9:return Pa(t.arrayValue.values||[],e.arrayValue.values||[],eo);case 10:case 11:return function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(WE(c)!==WE(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!eo(c[m],h[m])))return!1;return!0}(t,e);default:return Pe()}}function Au(t,e){return(t.values||[]).find(n=>eo(n,e))!==void 0}function Va(t,e){if(t===e)return 0;const n=As(t),i=As(e);if(n!==i)return ot(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(t.booleanValue,e.booleanValue);case 2:return function(a,c){const h=qt(a.integerValue||a.doubleValue),m=qt(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(t,e);case 3:return jE(t.timestampValue,e.timestampValue);case 4:return jE(Eu(t),Eu(e));case 5:return ot(t.stringValue,e.stringValue);case 6:return function(a,c){const h=Ss(a),m=Ss(c);return h.compareTo(m)}(t.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),m=c.split("/");for(let p=0;p<h.length&&p<m.length;p++){const v=ot(h[p],m[p]);if(v!==0)return v}return ot(h.length,m.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,c){const h=ot(qt(a.latitude),qt(c.latitude));return h!==0?h:ot(qt(a.longitude),qt(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return e0(t.arrayValue,e.arrayValue);case 10:return function(a,c){var h,m,p,v;const E=a.fields||{},S=c.fields||{},I=(h=E.value)===null||h===void 0?void 0:h.arrayValue,x=(m=S.value)===null||m===void 0?void 0:m.arrayValue,L=ot(((p=I==null?void 0:I.values)===null||p===void 0?void 0:p.length)||0,((v=x==null?void 0:x.values)===null||v===void 0?void 0:v.length)||0);return L!==0?L:e0(I,x)}(t.mapValue,e.mapValue);case 11:return function(a,c){if(a===hf.mapValue&&c===hf.mapValue)return 0;if(a===hf.mapValue)return 1;if(c===hf.mapValue)return-1;const h=a.fields||{},m=Object.keys(h),p=c.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const S=ot(m[E],v[E]);if(S!==0)return S;const I=Va(h[m[E]],p[v[E]]);if(I!==0)return I}return ot(m.length,v.length)}(t.mapValue,e.mapValue);default:throw Pe()}}function jE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ot(t,e);const n=Nr(t),i=Nr(e),r=ot(n.seconds,i.seconds);return r!==0?r:ot(n.nanos,i.nanos)}function e0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const a=Va(n[r],i[r]);if(a)return a}return ot(n.length,i.length)}function La(t){return cm(t)}function cm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Nr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return we.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const a of n.values||[])r?r=!1:i+=",",i+=cm(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",a=!0;for(const c of i)a?a=!1:r+=",",r+=`${c}:${cm(n.fields[c])}`;return r+"}"}(t.mapValue):Pe()}function fm(t){return!!t&&"integerValue"in t}function og(t){return!!t&&"arrayValue"in t}function t0(t){return!!t&&"nullValue"in t}function n0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wf(t){return!!t&&"mapValue"in t}function P4(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function hu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return xs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=hu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function V4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!wf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(n)}setAll(e){let n=pn.emptyPath(),i={},r=[];e.forEach((c,h)=>{if(!n.isImmediateParentOf(h)){const m=this.getFieldsMap(n);this.applyChanges(m,i,r),i={},r=[],n=h.popLast()}c?i[h.lastSegment()]=hu(c):r.push(h.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,i,r)}delete(e){const n=this.field(e.popLast());wf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return eo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];wf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){xs(n,(r,a)=>e[r]=a);for(const r of i)delete e[r]}clone(){return new Bn(hu(this.value))}}function VA(t){const e=[];return xs(t.fields,(n,i)=>{const r=new pn([n]);if(wf(i)){const a=VA(i.mapValue).fields;if(a.length===0)e.push(r);else for(const c of a)e.push(r.child(c))}else e.push(r)}),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n,i,r,a,c,h){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new An(e,0,Le.min(),Le.min(),Le.min(),Bn.empty(),0)}static newFoundDocument(e,n,i,r){return new An(e,1,n,Le.min(),i,r,0)}static newNoDocument(e,n){return new An(e,2,n,Le.min(),Le.min(),Bn.empty(),0)}static newUnknownDocument(e,n){return new An(e,3,n,Le.min(),Le.min(),Bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n){this.position=e,this.inclusive=n}}function i0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const a=e[r],c=t.position[r];if(a.field.isKeyField()?i=we.comparator(we.fromName(c.referenceValue),n.key):i=Va(c,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function o0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!eo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n="asc"){this.field=e,this.dir=n}}function L4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{}class Wt extends LA{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new O4(e,n,i):n==="array-contains"?new q4(e,i):n==="in"?new G4(e,i):n==="not-in"?new z4(e,i):n==="array-contains-any"?new H4(e,i):new Wt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new B4(e,i):new F4(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Va(n,this.value)):n!==null&&As(this.value)===As(n)&&this.matchesComparison(Va(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class to extends LA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new to(e,n)}matches(e){return UA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function UA(t){return t.op==="and"}function OA(t){return U4(t)&&UA(t)}function U4(t){for(const e of t.filters)if(e instanceof to)return!1;return!0}function dm(t){if(t instanceof Wt)return t.field.canonicalString()+t.op.toString()+La(t.value);if(OA(t))return t.filters.map(e=>dm(e)).join(",");{const e=t.filters.map(n=>dm(n)).join(",");return`${t.op}(${e})`}}function BA(t,e){return t instanceof Wt?function(i,r){return r instanceof Wt&&i.op===r.op&&i.field.isEqual(r.field)&&eo(i.value,r.value)}(t,e):t instanceof to?function(i,r){return r instanceof to&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((a,c,h)=>a&&BA(c,r.filters[h]),!0):!1}(t,e):void Pe()}function FA(t){return t instanceof Wt?function(n){return`${n.field.canonicalString()} ${n.op} ${La(n.value)}`}(t):t instanceof to?function(n){return n.op.toString()+" {"+n.getFilters().map(FA).join(" ,")+"}"}(t):"Filter"}class O4 extends Wt{constructor(e,n,i){super(e,n,i),this.key=we.fromName(i.referenceValue)}matches(e){const n=we.comparator(e.key,this.key);return this.matchesComparison(n)}}class B4 extends Wt{constructor(e,n){super(e,"in",n),this.keys=qA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class F4 extends Wt{constructor(e,n){super(e,"not-in",n),this.keys=qA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function qA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>we.fromName(i.referenceValue))}class q4 extends Wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return og(n)&&Au(n.arrayValue,this.value)}}class G4 extends Wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Au(this.value.arrayValue,n)}}class z4 extends Wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Au(this.value.arrayValue,n)}}class H4 extends Wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!og(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Au(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n=null,i=[],r=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=c,this.endAt=h,this.ue=null}}function r0(t,e=null,n=[],i=[],r=null,a=null,c=null){return new $4(t,e,n,i,r,a,c)}function rg(t){const e=Ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>dm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),ad(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>La(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>La(i)).join(",")),e.ue=n}return e.ue}function sg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!L4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!BA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!o0(t.startAt,e.startAt)&&o0(t.endAt,e.endAt)}function hm(t){return we.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n=null,i=[],r=[],a=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=m,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Y4(t,e,n,i,r,a,c,h){return new ld(t,e,n,i,r,a,c,h)}function ud(t){return new ld(t)}function s0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function K4(t){return t.collectionGroup!==null}function pu(t){const e=Ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new mn(pn.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Hf(a,i))}),n.has(pn.keyField().canonicalString())||e.ce.push(new Hf(pn.keyField(),i))}return e.ce}function Wi(t){const e=Ue(t);return e.le||(e.le=J4(e,pu(t))),e.le}function J4(t,e){if(t.limitType==="F")return r0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const a=r.dir==="desc"?"asc":"desc";return new Hf(r.field,a)});const n=t.endAt?new zf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new zf(t.startAt.position,t.startAt.inclusive):null;return r0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function pm(t,e,n){return new ld(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cd(t,e){return sg(Wi(t),Wi(e))&&t.limitType===e.limitType}function GA(t){return`${rg(Wi(t))}|lt:${t.limitType}`}function Ea(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>FA(r)).join(", ")}]`),ad(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>La(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>La(r)).join(",")),`Target(${i})`}(Wi(t))}; limitType=${t.limitType})`}function fd(t,e){return e.isFoundDocument()&&function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):we.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(t,e)&&function(i,r){for(const a of pu(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(c,h,m){const p=i0(c,h,m);return c.inclusive?p<=0:p<0}(i.startAt,pu(i),r)||i.endAt&&!function(c,h,m){const p=i0(c,h,m);return c.inclusive?p>=0:p>0}(i.endAt,pu(i),r))}(t,e)}function Q4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zA(t){return(e,n)=>{let i=!1;for(const r of pu(t)){const a=X4(r,e,n);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function X4(t,e,n){const i=t.field.isKeyField()?we.comparator(e.key,n.key):function(a,c,h){const m=c.data.field(a),p=h.data.field(a);return m!==null&&p!==null?Va(m,p):Pe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,(n,i)=>{for(const[r,a]of i)e(r,a)})}isEmpty(){return DA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=new Dt(we.comparator);function Bo(){return W4}const HA=new Dt(we.comparator);function su(...t){let e=HA;for(const n of t)e=e.insert(n.key,n);return e}function $A(t){let e=HA;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function gs(){return mu()}function YA(){return mu()}function mu(){return new Xa(t=>t.toString(),(t,e)=>t.isEqual(e))}const Z4=new Dt(we.comparator),j4=new mn(we.comparator);function Xe(...t){let e=j4;for(const n of t)e=e.add(n);return e}const e3=new mn(ot);function t3(){return e3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gf(e)?"-0":e}}function KA(t){return{integerValue:""+t}}function n3(t,e){return N4(e)?KA(e):ag(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(){this._=void 0}}function i3(t,e,n){return t instanceof Cu?function(r,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&ng(a)&&(a=ig(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(n,e):t instanceof wu?QA(t,e):t instanceof Iu?XA(t,e):function(r,a){const c=JA(r,a),h=a0(c)+a0(r.Pe);return fm(c)&&fm(r.Pe)?KA(h):ag(r.serializer,h)}(t,e)}function o3(t,e,n){return t instanceof wu?QA(t,e):t instanceof Iu?XA(t,e):n}function JA(t,e){return t instanceof $f?function(i){return fm(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Cu extends dd{}class wu extends dd{constructor(e){super(),this.elements=e}}function QA(t,e){const n=WA(e);for(const i of t.elements)n.some(r=>eo(r,i))||n.push(i);return{arrayValue:{values:n}}}class Iu extends dd{constructor(e){super(),this.elements=e}}function XA(t,e){let n=WA(e);for(const i of t.elements)n=n.filter(r=>!eo(r,i));return{arrayValue:{values:n}}}class $f extends dd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function a0(t){return qt(t.integerValue||t.doubleValue)}function WA(t){return og(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n){this.field=e,this.transform=n}}function s3(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof wu&&r instanceof wu||i instanceof Iu&&r instanceof Iu?Pa(i.elements,r.elements,eo):i instanceof $f&&r instanceof $f?eo(i.Pe,r.Pe):i instanceof Cu&&r instanceof Cu}(t.transform,e.transform)}class a3{constructor(e,n){this.version=e,this.transformResults=n}}class wi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wi}static exists(e){return new wi(void 0,e)}static updateTime(e){return new wi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function If(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hd{}function ZA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lg(t.key,wi.none()):new Vu(t.key,t.data,wi.none());{const n=t.data,i=Bn.empty();let r=new mn(pn.comparator);for(let a of e.fields)if(!r.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?i.delete(a):i.set(a,c),r=r.add(a)}return new Pr(t.key,i,new jn(r.toArray()),wi.none())}}function l3(t,e,n){t instanceof Vu?function(r,a,c){const h=r.value.clone(),m=u0(r.fieldTransforms,a,c.transformResults);h.setAll(m),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Pr?function(r,a,c){if(!If(r.precondition,a))return void a.convertToUnknownDocument(c.version);const h=u0(r.fieldTransforms,a,c.transformResults),m=a.data;m.setAll(jA(r)),m.setAll(h),a.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(t,e,n):function(r,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function gu(t,e,n,i){return t instanceof Vu?function(a,c,h,m){if(!If(a.precondition,c))return h;const p=a.value.clone(),v=c0(a.fieldTransforms,m,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof Pr?function(a,c,h,m){if(!If(a.precondition,c))return h;const p=c0(a.fieldTransforms,m,c),v=c.data;return v.setAll(jA(a)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(E=>E.field))}(t,e,n,i):function(a,c,h){return If(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(t,e,n)}function u3(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),a=JA(i.transform,r||null);a!=null&&(n===null&&(n=Bn.empty()),n.set(i.field,a))}return n||null}function l0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Pa(i,r,(a,c)=>s3(a,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vu extends hd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Pr extends hd{constructor(e,n,i,r,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function jA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function u0(t,e,n){const i=new Map;pt(t.length===n.length);for(let r=0;r<n.length;r++){const a=t[r],c=a.transform,h=e.data.field(a.field);i.set(a.field,o3(c,h,n[r]))}return i}function c0(t,e,n){const i=new Map;for(const r of t){const a=r.transform,c=n.data.field(r.field);i.set(r.field,i3(a,c,e))}return i}class lg extends hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c3 extends hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&l3(a,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=gu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=gu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=YA();return this.mutations.forEach(r=>{const a=e.get(r.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=n.has(r.key)?null:h;const m=ZA(c,h);m!==null&&i.set(r.key,m),c.isValidDocument()||c.convertToNoDocument(Le.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Xe())}isEqual(e){return this.batchId===e.batchId&&Pa(this.mutations,e.mutations,(n,i)=>l0(n,i))&&Pa(this.baseMutations,e.baseMutations,(n,i)=>l0(n,i))}}class ug{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){pt(e.mutations.length===i.length);let r=function(){return Z4}();const a=e.mutations;for(let c=0;c<a.length;c++)r=r.insert(a[c].key,i[c].version);return new ug(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,nt;function p3(t){switch(t){default:return Pe();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function eC(t){if(t===void 0)return Oo("GRPC error has no .code"),le.UNKNOWN;switch(t){case $t.OK:return le.OK;case $t.CANCELLED:return le.CANCELLED;case $t.UNKNOWN:return le.UNKNOWN;case $t.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case $t.INTERNAL:return le.INTERNAL;case $t.UNAVAILABLE:return le.UNAVAILABLE;case $t.UNAUTHENTICATED:return le.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case $t.NOT_FOUND:return le.NOT_FOUND;case $t.ALREADY_EXISTS:return le.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return le.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case $t.ABORTED:return le.ABORTED;case $t.OUT_OF_RANGE:return le.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return le.UNIMPLEMENTED;case $t.DATA_LOSS:return le.DATA_LOSS;default:return Pe()}}(nt=$t||($t={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=new ys([4294967295,4294967295],0);function f0(t){const e=m3().encode(t),n=new wA;return n.update(e),new Uint8Array(n.digest())}function d0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ys([n,i],0),new ys([r,a],0)]}class cg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new au(`Invalid padding: ${n}`);if(i<0)throw new au(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new au(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new au(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ys.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(ys.fromNumber(i)));return r.compare(g3)===1&&(r=new ys([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=f0(e),[i,r]=d0(n);for(let a=0;a<this.hashCount;a++){const c=this.Ee(i,r,a);if(!this.de(c))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new cg(a,r,n);return i.forEach(h=>c.insert(h)),c}insert(e){if(this.Ie===0)return;const n=f0(e),[i,r]=d0(n);for(let a=0;a<this.hashCount;a++){const c=this.Ee(i,r,a);this.Ae(c)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,n,i,r,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new pd(Le.min(),r,new Dt(ot),Bo(),Xe())}}class Lu{constructor(e,n,i,r,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Lu(i,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class tC{constructor(e,n){this.targetId=e,this.me=n}}class nC{constructor(e,n,i=yn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class h0{constructor(){this.fe=0,this.ge=m0(),this.pe=yn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Xe(),n=Xe(),i=Xe();return this.ge.forEach((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Pe()}}),new Lu(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=m0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class y3{constructor(e){this.Le=e,this.Be=new Map,this.ke=Bo(),this.qe=p0(),this.Qe=new Dt(ot)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const a=r.target;if(hm(a))if(i===0){const c=new we(a.path);this.Ue(n,c,An.newNoDocument(c,Le.min()))}else pt(i===1);else{const c=this.Ye(n);if(c!==i){const h=this.Ze(e),m=h?this.Xe(h,e,c):1;if(m!==0){this.je(n);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=n;let c,h;try{c=Ss(i).toUint8Array()}catch(m){if(m instanceof PA)return Da("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new cg(c,r,a)}catch(m){return Da(m instanceof au?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.Ie===0?null:h}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(a=>{const c=this.Le.tt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,a,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((a,c)=>{const h=this.Je(c);if(h){if(a.current&&hm(h.target)){const m=new we(h.target.path);this.ke.get(m)!==null||this.it(c,m)||this.Ue(c,m,An.newNoDocument(m,e))}a.be&&(n.set(c,a.ve()),a.Ce())}});let i=Xe();this.qe.forEach((a,c)=>{let h=!0;c.forEachWhile(m=>{const p=this.Je(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(a))}),this.ke.forEach((a,c)=>c.setReadTime(e));const r=new pd(e,n,this.Qe,this.ke,i);return this.ke=Bo(),this.qe=p0(),this.Qe=new Dt(ot),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new h0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mn(ot),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new h0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function p0(){return new Dt(we.comparator)}function m0(){return new Dt(we.comparator)}const v3={asc:"ASCENDING",desc:"DESCENDING"},_3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T3={and:"AND",or:"OR"};class E3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mm(t,e){return t.useProto3Json||ad(e)?e:{value:e}}function Yf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function S3(t,e){return Yf(t,e.toTimestamp())}function Zi(t){return pt(!!t),Le.fromTimestamp(function(n){const i=Nr(n);return new Zt(i.seconds,i.nanos)}(t))}function fg(t,e){return gm(t,e).canonicalString()}function gm(t,e){const n=function(r){return new Nt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function oC(t){const e=Nt.fromString(t);return pt(uC(e)),e}function ym(t,e){return fg(t.databaseId,e.path)}function Pp(t,e){const n=oC(e);if(n.get(1)!==t.databaseId.projectId)throw new Ae(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ae(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new we(sC(n))}function rC(t,e){return fg(t.databaseId,e)}function A3(t){const e=oC(t);return e.length===4?Nt.emptyPath():sC(e)}function vm(t){return new Nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sC(t){return pt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function g0(t,e,n){return{name:ym(t,e),fields:n.value.mapValue.fields}}function C3(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=function(p,v){return p.useProto3Json?(pt(v===void 0||typeof v=="string"),yn.fromBase64String(v||"")):(pt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),yn.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const v=p.code===void 0?le.UNKNOWN:eC(p.code);return new Ae(v,p.message||"")}(c);n=new nC(i,r,a,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Pp(t,i.document.name),a=Zi(i.document.updateTime),c=i.document.createTime?Zi(i.document.createTime):Le.min(),h=new Bn({mapValue:{fields:i.document.fields}}),m=An.newFoundDocument(r,a,c,h),p=i.targetIds||[],v=i.removedTargetIds||[];n=new Rf(p,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Pp(t,i.document),a=i.readTime?Zi(i.readTime):Le.min(),c=An.newNoDocument(r,a),h=i.removedTargetIds||[];n=new Rf([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Pp(t,i.document),a=i.removedTargetIds||[];n=new Rf([],a,r,null)}else{if(!("filter"in e))return Pe();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,c=new h3(r,a),h=i.targetId;n=new tC(h,c)}}return n}function w3(t,e){let n;if(e instanceof Vu)n={update:g0(t,e.key,e.value)};else if(e instanceof lg)n={delete:ym(t,e.key)};else if(e instanceof Pr)n={update:g0(t,e.key,e.data),updateMask:P3(e.fieldMask)};else{if(!(e instanceof c3))return Pe();n={verify:ym(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const h=c.transform;if(h instanceof Cu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof wu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Iu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof $f)return{fieldPath:c.field.canonicalString(),increment:h.Pe};throw Pe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,a){return a.updateTime!==void 0?{updateTime:S3(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Pe()}(t,e.precondition)),n}function I3(t,e){return t&&t.length>0?(pt(e!==void 0),t.map(n=>function(r,a){let c=r.updateTime?Zi(r.updateTime):Zi(a);return c.isEqual(Le.min())&&(c=Zi(a)),new a3(c,r.transformResults||[])}(n,e))):[]}function R3(t,e){return{documents:[rC(t,e.path)]}}function x3(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=rC(t,r);const a=function(p){if(p.length!==0)return lC(to.create(p,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const c=function(p){if(p.length!==0)return p.map(v=>function(S){return{field:Sa(S.field),direction:N3(S.dir)}}(v))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const h=mm(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:n,parent:r}}function b3(t){let e=A3(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){pt(i===1);const v=n.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let a=[];n.where&&(a=function(E){const S=aC(E);return S instanceof to&&OA(S)?S.getFilters():[S]}(n.where));let c=[];n.orderBy&&(c=function(E){return E.map(S=>function(x){return new Hf(Aa(x.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(S))}(n.orderBy));let h=null;n.limit&&(h=function(E){let S;return S=typeof E=="object"?E.value:E,ad(S)?null:S}(n.limit));let m=null;n.startAt&&(m=function(E){const S=!!E.before,I=E.values||[];return new zf(I,S)}(n.startAt));let p=null;return n.endAt&&(p=function(E){const S=!E.before,I=E.values||[];return new zf(I,S)}(n.endAt)),Y4(e,r,c,a,h,"F",m,p)}function M3(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Aa(n.unaryFilter.field);return Wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Aa(n.unaryFilter.field);return Wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Aa(n.unaryFilter.field);return Wt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Aa(n.unaryFilter.field);return Wt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(t):t.fieldFilter!==void 0?function(n){return Wt.create(Aa(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return to.create(n.compositeFilter.filters.map(i=>aC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Pe()}}(n.compositeFilter.op))}(t):Pe()}function N3(t){return v3[t]}function k3(t){return _3[t]}function D3(t){return T3[t]}function Sa(t){return{fieldPath:t.canonicalString()}}function Aa(t){return pn.fromServerFormat(t.fieldPath)}function lC(t){return t instanceof Wt?function(n){if(n.op==="=="){if(n0(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NAN"}};if(t0(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(n0(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NAN"}};if(t0(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(n.field),op:k3(n.op),value:n.value}}}(t):t instanceof to?function(n){const i=n.getFilters().map(r=>lC(r));return i.length===1?i[0]:{compositeFilter:{op:D3(n.op),filters:i}}}(t):Pe()}function P3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,i,r,a=Le.min(),c=Le.min(),h=yn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new Ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.ct=e}}function L3(t){const e=b3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(){this.un=new O3}addToCollectionParentIndex(e,n){return this.un.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(Mr.min())}updateCollectionGroup(e,n,i){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class O3{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new mn(Nt.comparator),a=!r.has(i);return this.index[n]=r.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new mn(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ua(0)}static kn(){return new Ua(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(){this.changes=new Xa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ue.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&gu(i.mutation,r,jn.empty(),Zt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Xe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Xe()){const r=gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(a=>{let c=su();return a.forEach((h,m)=>{c=c.insert(h,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const i=gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Xe()))}populateOverlays(e,n,i){const r=[];return i.forEach(a=>{n.has(a)||r.push(a)}),this.documentOverlayCache.getOverlays(e,r).next(a=>{a.forEach((c,h)=>{n.set(c,h)})})}computeViews(e,n,i,r){let a=Bo();const c=mu(),h=function(){return mu()}();return n.forEach((m,p)=>{const v=i.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof Pr)?a=a.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),gu(v.mutation,p,v.mutation.getFieldMask(),Zt.now())):c.set(p.key,jn.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((p,v)=>c.set(p,v)),n.forEach((p,v)=>{var E;return h.set(p,new F3(v,(E=c.get(p))!==null&&E!==void 0?E:null))}),h))}recalculateAndSaveOverlays(e,n){const i=mu();let r=new Dt((c,h)=>c-h),a=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const h of c)h.keys().forEach(m=>{const p=n.get(m);if(p===null)return;let v=i.get(m)||jn.empty();v=h.applyToLocalView(p,v),i.set(m,v);const E=(r.get(h.batchId)||Xe()).add(m);r=r.insert(h.batchId,E)})}).next(()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),p=m.key,v=m.value,E=YA();v.forEach(S=>{if(!a.has(S)){const I=ZA(n.get(S),i.get(S));I!==null&&E.set(S,I),a=a.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return ue.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(c){return we.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):K4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(a=>{const c=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-a.size):ue.resolve(gs());let h=-1,m=a;return c.next(p=>ue.forEach(p,(v,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),a.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next(S=>{m=m.insert(v,S)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,m,p,Xe())).next(v=>({batchId:h,changes:$A(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new we(n)).next(i=>{let r=su();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const a=n.collectionGroup;let c=su();return this.indexManager.getCollectionParents(e,a).next(h=>ue.forEach(h,m=>{const p=function(E,S){return new ld(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(n,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,i,r).next(v=>{v.forEach((E,S)=>{c=c.insert(E,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,r))).next(c=>{a.forEach((m,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,An.newInvalidDocument(v)))});let h=su();return c.forEach((m,p)=>{const v=a.get(m);v!==void 0&&gu(v.mutation,p,jn.empty(),Zt.now()),fd(n,p)&&(h=h.insert(m,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ue.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Zi(r.createTime)}}(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:L3(r.bundledQuery),readTime:Zi(r.readTime)}}(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this.overlays=new Dt(we.comparator),this.Ir=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const i=gs();return ue.forEach(n,r=>this.getOverlay(e,r).next(a=>{a!==null&&i.set(r,a)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,a)=>{this.ht(e,n,a)}),ue.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(i)),ue.resolve()}getOverlaysForCollection(e,n,i){const r=gs(),a=n.length+1,c=new we(n.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,p=m.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&m.largestBatchId>i&&r.set(m.getKey(),m)}return ue.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let a=new Dt((p,v)=>p-v);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let v=a.get(p.largestBatchId);v===null&&(v=gs(),a=a.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=gs(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,v)=>h.set(p,v)),!(h.size()>=r)););return ue.resolve(h)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new d3(n,i));let a=this.Ir.get(n);a===void 0&&(a=Xe(),this.Ir.set(n,a)),this.Ir.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(){this.Tr=new mn(sn.Er),this.dr=new mn(sn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new sn(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new sn(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new we(new Nt([])),i=new sn(n,e),r=new sn(n,e+1),a=[];return this.dr.forEachInRange([i,r],c=>{this.Vr(c),a.push(c.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new we(new Nt([])),i=new sn(n,e),r=new sn(n,e+1);let a=Xe();return this.dr.forEachInRange([i,r],c=>{a=a.add(c.key)}),a}containsKey(e){const n=new sn(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class sn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return we.comparator(e.key,n.key)||ot(e.wr,n.wr)}static Ar(e,n){return ot(e.wr,n.wr)||we.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new mn(sn.Er)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new f3(a,n,i,r);this.mutationQueue.push(c);for(const h of r)this.br=this.br.add(new sn(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,n){return ue.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),a=r<0?0:r;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new sn(n,0),r=new sn(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([i,r],c=>{const h=this.Dr(c.wr);a.push(h)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new mn(ot);return n.forEach(r=>{const a=new sn(r,0),c=new sn(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,c],h=>{i=i.add(h.wr)})}),ue.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let a=i;we.isDocumentKey(a)||(a=a.child(""));const c=new sn(new we(a),0);let h=new mn(ot);return this.br.forEachWhile(m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(h=h.add(m.wr)),!0)},c),ue.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){pt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ue.forEach(n.mutations,r=>{const a=new sn(r.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new sn(n,0),r=this.br.firstAfterOrEqual(i);return ue.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this.Mr=e,this.docs=function(){return new Dt(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),a=r?r.size:0,c=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ue.resolve(i?i.document.mutableCopy():An.newInvalidDocument(n))}getEntries(e,n){let i=Bo();return n.forEach(r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():An.newInvalidDocument(r))}),ue.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let a=Bo();const c=n.path,h=new we(c.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||R4(I4(v),i)<=0||(r.has(v.key)||fd(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,n,i,r){Pe()}Or(e,n){return ue.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new K3(this)}getSize(e){return ue.resolve(this.size)}}class K3 extends B3{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),ue.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e){this.persistence=e,this.Nr=new Xa(n=>rg(n),sg),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new dg,this.targetCount=0,this.kr=Ua.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),ue.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ua(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.Kn(n),ue.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,i){let r=0;const a=[];return this.Nr.forEach((c,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),ue.waitFor(a).next(()=>r)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return ue.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),ue.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,a=[];return r&&n.forEach(c=>{a.push(r.markPotentiallyOrphaned(e,c))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return ue.resolve(i)}containsKey(e,n){return ue.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,n){this.qr={},this.overlays={},this.Qr=new tg(0),this.Kr=!1,this.Kr=!0,this.$r=new H3,this.referenceDelegate=e(this),this.Ur=new J3(this),this.indexManager=new U3,this.remoteDocumentCache=function(r){return new Y3(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new V3(n),this.Gr=new G3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new z3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new $3(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){ve("MemoryPersistence","Starting transaction:",e);const r=new X3(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(a=>this.referenceDelegate.jr(r).next(()=>a)).toPromise().then(a=>(r.raiseOnCommittedEvent(),a))}Hr(e,n){return ue.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class X3 extends b4{constructor(e){super(),this.currentSequenceNumber=e}}class hg{constructor(e){this.persistence=e,this.Jr=new dg,this.Yr=null}static Zr(e){return new hg(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),ue.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(a=>this.Xr.add(a.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Xr,i=>{const r=we.fromPath(i);return this.ei(e,r).next(a=>{a||n.removeEntry(r,Le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ue.or([()=>ue.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=Xe(),r=Xe();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new pg(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ZV()?8:M4(wn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const a={result:null};return this.Yi(e,n).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Zi(e,n,r,i).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new W3;return this.Xi(e,n,c).next(h=>{if(a.result=h,this.zi)return this.es(e,n,c,h.size)})}).next(()=>a.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(ou()<=Ze.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Ea(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ue.resolve()):(ou()<=Ze.DEBUG&&ve("QueryEngine","Query:",Ea(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(ou()<=Ze.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Ea(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wi(n))):ue.resolve())}Yi(e,n){if(s0(n))return ue.resolve(null);let i=Wi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=pm(n,null,"F"),i=Wi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const c=Xe(...a);return this.Ji.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,i).next(m=>{const p=this.ts(n,h);return this.ns(n,p,c,m.readTime)?this.Yi(e,pm(n,null,"F")):this.rs(e,p,n,m)}))})))}Zi(e,n,i,r){return s0(n)||r.isEqual(Le.min())?ue.resolve(null):this.Ji.getDocuments(e,i).next(a=>{const c=this.ts(n,a);return this.ns(n,c,i,r)?ue.resolve(null):(ou()<=Ze.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ea(n)),this.rs(e,c,n,w4(r,-1)).next(h=>h))})}ts(e,n){let i=new mn(zA(e));return n.forEach((r,a)=>{fd(e,a)&&(i=i.add(a))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Xi(e,n,i){return ou()<=Ze.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Ea(n)),this.Ji.getDocumentsMatchingQuery(e,n,Mr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(a=>(n.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Dt(ot),this._s=new Xa(a=>rg(a),sg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q3(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function eB(t,e,n,i){return new j3(t,e,n,i)}async function cC(t,e){const n=Ue(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(a=>(r=a,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(a=>{const c=[],h=[];let m=Xe();for(const p of r){c.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of a){h.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return n.localDocuments.getDocuments(i,m).next(p=>({hs:p,removedBatchIds:c,addedBatchIds:h}))})})}function tB(t,e){const n=Ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,m,p,v){const E=p.batch,S=E.keys();let I=ue.resolve();return S.forEach(x=>{I=I.next(()=>v.getEntry(m,x)).next(L=>{const F=p.docVersions.get(x);pt(F!==null),L.version.compareTo(F)<0&&(E.applyToRemoteDocument(L,p),L.isValidDocument()&&(L.setReadTime(p.commitVersion),v.addEntry(L)))})}),I.next(()=>h.mutationQueue.removeMutationBatch(m,E))}(n,i,e,a).next(()=>a.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let m=Xe();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(m=m.add(h.batch.mutations[p].key));return m}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function fC(t){const e=Ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function nB(t,e){const n=Ue(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const h=[];e.targetChanges.forEach((v,E)=>{const S=r.get(E);if(!S)return;h.push(n.Ur.removeMatchingKeys(a,v.removedDocuments,E).next(()=>n.Ur.addMatchingKeys(a,v.addedDocuments,E)));let I=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(yn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,i)),r=r.insert(E,I),function(L,F,re){return L.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0}(S,I,v)&&h.push(n.Ur.updateTargetData(a,I))});let m=Bo(),p=Xe();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(iB(a,c,e.documentUpdates).next(v=>{m=v.Ps,p=v.Is})),!i.isEqual(Le.min())){const v=n.Ur.getLastRemoteSnapshotVersion(a).next(E=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,i));h.push(v)}return ue.waitFor(h).next(()=>c.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,m,p)).next(()=>m)}).then(a=>(n.os=r,a))}function iB(t,e,n){let i=Xe(),r=Xe();return n.forEach(a=>i=i.add(a)),e.getEntries(t,i).next(a=>{let c=Bo();return n.forEach((h,m)=>{const p=a.get(h);m.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(h)),m.isNoDocument()&&m.version.isEqual(Le.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):ve("LocalStore","Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",m.version)}),{Ps:c,Is:r}})}function oB(t,e){const n=Ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function rB(t,e){const n=Ue(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(a=>a?(r=a,ue.resolve(r)):n.Ur.allocateTargetId(i).next(c=>(r=new Ar(e,c,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function _m(t,e,n){const i=Ue(t),r=i.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,c=>i.persistence.referenceDelegate.removeTarget(c,r))}catch(c){if(!Pu(c))throw c;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function y0(t,e,n){const i=Ue(t);let r=Le.min(),a=Xe();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,v){const E=Ue(m),S=E._s.get(v);return S!==void 0?ue.resolve(E.os.get(S)):E.Ur.getTargetData(p,v)}(i,c,Wi(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(c,h.targetId).next(m=>{a=m})}).next(()=>i.ss.getDocumentsMatchingQuery(c,e,n?r:Le.min(),n?a:Xe())).next(h=>(sB(i,Q4(e),h),{documents:h,Ts:a})))}function sB(t,e,n){let i=t.us.get(e)||Le.min();n.forEach((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),t.us.set(e,i)}class v0{constructor(){this.activeTargetIds=t3()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aB{constructor(){this.so=new v0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new v0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pf=null;function Vp(){return pf===null?pf=function(){return 268435456+Math.round(2147483648*Math.random())}():pf++,"0x"+pf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class fB extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${a}`}get Fo(){return!1}Mo(n,i,r,a,c){const h=Vp(),m=this.xo(n,i.toUriEncodedString());ve("RestConnection",`Sending RPC '${n}' ${h}:`,m,r);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,a,c),this.No(n,m,p,r).then(v=>(ve("RestConnection",`Received RPC '${n}' ${h}: `,v),v),v=>{throw Da("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",m,"request:",r),v})}Lo(n,i,r,a,c,h){return this.Mo(n,i,r,a,c)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((a,c)=>n[c]=a),r&&r.headers.forEach((a,c)=>n[c]=a)}xo(n,i){const r=uB[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const a=Vp();return new Promise((c,h)=>{const m=new IA;m.setWithCredentials(!0),m.listenOnce(RA.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Cf.NO_ERROR:const v=m.getResponseJson();ve(En,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),c(v);break;case Cf.TIMEOUT:ve(En,`RPC '${e}' ${a} timed out`),h(new Ae(le.DEADLINE_EXCEEDED,"Request time out"));break;case Cf.HTTP_ERROR:const E=m.getStatus();if(ve(En,`RPC '${e}' ${a} failed with status:`,E,"response text:",m.getResponseText()),E>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const I=S==null?void 0:S.error;if(I&&I.status&&I.message){const x=function(F){const re=F.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(re)>=0?re:le.UNKNOWN}(I.status);h(new Ae(x,I.message))}else h(new Ae(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Ae(le.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{ve(En,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(r);ve(En,`RPC '${e}' ${a} sending request:`,r),m.send(n,"POST",p,i,15)})}Bo(e,n,i){const r=Vp(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=MA(),h=bA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Oo(m.initMessageHeaders,n,i),m.encodeInitMessageHeaders=!0;const v=a.join("");ve(En,`Creating RPC '${e}' stream ${r}: ${v}`,m);const E=c.createWebChannel(v,m);let S=!1,I=!1;const x=new cB({Io:F=>{I?ve(En,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(S||(ve(En,`Opening RPC '${e}' stream ${r} transport.`),E.open(),S=!0),ve(En,`RPC '${e}' stream ${r} sending:`,F),E.send(F))},To:()=>E.close()}),L=(F,re,oe)=>{F.listen(re,ie=>{try{oe(ie)}catch(fe){setTimeout(()=>{throw fe},0)}})};return L(E,ru.EventType.OPEN,()=>{I||(ve(En,`RPC '${e}' stream ${r} transport opened.`),x.yo())}),L(E,ru.EventType.CLOSE,()=>{I||(I=!0,ve(En,`RPC '${e}' stream ${r} transport closed`),x.So())}),L(E,ru.EventType.ERROR,F=>{I||(I=!0,Da(En,`RPC '${e}' stream ${r} transport errored:`,F),x.So(new Ae(le.UNAVAILABLE,"The operation could not be completed")))}),L(E,ru.EventType.MESSAGE,F=>{var re;if(!I){const oe=F.data[0];pt(!!oe);const ie=oe,fe=ie.error||((re=ie[0])===null||re===void 0?void 0:re.error);if(fe){ve(En,`RPC '${e}' stream ${r} received error:`,fe);const ae=fe.status;let me=function(b){const V=$t[b];if(V!==void 0)return eC(V)}(ae),k=fe.message;me===void 0&&(me=le.INTERNAL,k="Unknown error status: "+ae+" with message "+fe.message),I=!0,x.So(new Ae(me,k)),E.close()}else ve(En,`RPC '${e}' stream ${r} received:`,oe),x.bo(oe)}}),L(h,xA.STAT_EVENT,F=>{F.stat===um.PROXY?ve(En,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===um.NOPROXY&&ve(En,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function Lp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(t){return new E3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n,i=1e3,r=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&ve("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n,i,r,a,c,h,m){this.ui=e,this.Ho=i,this.Jo=r,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new dC(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(Oo(n.toString()),Oo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new Ae(le.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dB extends hC{constructor(e,n,i,r,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,c),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=C3(this.serializer,e),i=function(a){if(!("targetChange"in a))return Le.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Le.min():c.readTime?Zi(c.readTime):Le.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=vm(this.serializer),n.addTarget=function(a,c){let h;const m=c.target;if(h=hm(m)?{documents:R3(a,m)}:{query:x3(a,m)._t},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=iC(a,c.resumeToken);const p=mm(a,c.expectedCount);p!==null&&(h.expectedCount=p)}else if(c.snapshotVersion.compareTo(Le.min())>0){h.readTime=Yf(a,c.snapshotVersion.toTimestamp());const p=mm(a,c.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=M3(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=vm(this.serializer),n.removeTarget=e,this.a_(n)}}class hB extends hC{constructor(e,n,i,r,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,c),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pt(!!e.streamToken),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=I3(e.writeResults,e.commitTime),i=Zi(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=vm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>w3(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Ae(le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Mo(e,gm(n,i),r,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(le.UNKNOWN,a.toString())})}Lo(e,n,i,r,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Lo(e,gm(n,i),r,c,h,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ae(le.UNKNOWN,c.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class mB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Oo(n),this.D_=!1):ve("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(e,n,i,r,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(c=>{i.enqueueAndForget(async()=>{bs(this)&&(ve("RemoteStore","Restarting streams for network reachability change."),await async function(m){const p=Ue(m);p.L_.add(4),await Uu(p),p.q_.set("Unknown"),p.L_.delete(4),await gd(p)}(this))})}),this.q_=new mB(i,r)}}async function gd(t){if(bs(t))for(const e of t.B_)await e(!0)}async function Uu(t){for(const e of t.B_)await e(!1)}function pC(t,e){const n=Ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),vg(n)?yg(n):Wa(n).r_()&&gg(n,e))}function mg(t,e){const n=Ue(t),i=Wa(n);n.N_.delete(e),i.r_()&&mC(n,e),n.N_.size===0&&(i.r_()?i.o_():bs(n)&&n.q_.set("Unknown"))}function gg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wa(t).A_(e)}function mC(t,e){t.Q_.xe(e),Wa(t).R_(e)}function yg(t){t.Q_=new y3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Wa(t).start(),t.q_.v_()}function vg(t){return bs(t)&&!Wa(t).n_()&&t.N_.size>0}function bs(t){return Ue(t).L_.size===0}function gC(t){t.Q_=void 0}async function yB(t){t.q_.set("Online")}async function vB(t){t.N_.forEach((e,n)=>{gg(t,e)})}async function _B(t,e){gC(t),vg(t)?(t.q_.M_(e),yg(t)):t.q_.set("Unknown")}async function TB(t,e,n){if(t.q_.set("Online"),e instanceof nC&&e.state===2&&e.cause)try{await async function(r,a){const c=a.cause;for(const h of a.targetIds)r.N_.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.N_.delete(h),r.Q_.removeTarget(h))}(t,e)}catch(i){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Kf(t,i)}else if(e instanceof Rf?t.Q_.Ke(e):e instanceof tC?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Le.min()))try{const i=await fC(t.localStore);n.compareTo(i)>=0&&await function(a,c){const h=a.Q_.rt(c);return h.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=a.N_.get(p);v&&a.N_.set(p,v.withResumeToken(m.resumeToken,c))}}),h.targetMismatches.forEach((m,p)=>{const v=a.N_.get(m);if(!v)return;a.N_.set(m,v.withResumeToken(yn.EMPTY_BYTE_STRING,v.snapshotVersion)),mC(a,m);const E=new Ar(v.target,m,p,v.sequenceNumber);gg(a,E)}),a.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){ve("RemoteStore","Failed to raise snapshot:",i),await Kf(t,i)}}async function Kf(t,e,n){if(!Pu(e))throw e;t.L_.add(1),await Uu(t),t.q_.set("Offline"),n||(n=()=>fC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ve("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await gd(t)})}function yC(t,e){return e().catch(n=>Kf(t,n,e))}async function yd(t){const e=Ue(t),n=kr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;EB(e);)try{const r=await oB(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,SB(e,r)}catch(r){await Kf(e,r)}vC(e)&&_C(e)}function EB(t){return bs(t)&&t.O_.length<10}function SB(t,e){t.O_.push(e);const n=kr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function vC(t){return bs(t)&&!kr(t).n_()&&t.O_.length>0}function _C(t){kr(t).start()}async function AB(t){kr(t).p_()}async function CB(t){const e=kr(t);for(const n of t.O_)e.m_(n.mutations)}async function wB(t,e,n){const i=t.O_.shift(),r=ug.from(i,e,n);await yC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await yd(t)}async function IB(t,e){e&&kr(t).V_&&await async function(i,r){if(function(c){return p3(c)&&c!==le.ABORTED}(r.code)){const a=i.O_.shift();kr(i).s_(),await yC(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r)),await yd(i)}}(t,e),vC(t)&&_C(t)}async function T0(t,e){const n=Ue(t);n.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const i=bs(n);n.L_.add(3),await Uu(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await gd(n)}async function RB(t,e){const n=Ue(t);e?(n.L_.delete(2),await gd(n)):e||(n.L_.add(2),await Uu(n),n.q_.set("Unknown"))}function Wa(t){return t.K_||(t.K_=function(n,i,r){const a=Ue(n);return a.w_(),new dB(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(t.datastore,t.asyncQueue,{Eo:yB.bind(null,t),Ro:vB.bind(null,t),mo:_B.bind(null,t),d_:TB.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),vg(t)?yg(t):t.q_.set("Unknown")):(await t.K_.stop(),gC(t))})),t.K_}function kr(t){return t.U_||(t.U_=function(n,i,r){const a=Ue(n);return a.w_(),new hB(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:AB.bind(null,t),mo:IB.bind(null,t),f_:CB.bind(null,t),g_:wB.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await yd(t)):(await t.U_.stop(),t.O_.length>0&&(ve("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n,i,r,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,a){const c=Date.now()+i,h=new _g(e,n,c,r,a);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tg(t,e){if(Oo("AsyncQueue",`${e}: ${t}`),Pu(t))return new Ae(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.comparator=e?(n,i)=>e(n,i)||we.comparator(n.key,i.key):(n,i)=>we.comparator(n.key,i.key),this.keyedMap=su(),this.sortedSet=new Dt(this.comparator)}static emptySet(e){return new Na(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Na)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Na;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(){this.W_=new Dt(we.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Oa{constructor(e,n,i,r,a,c,h,m,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,r,a){const c=[];return n.forEach(h=>{c.push({type:0,doc:h})}),new Oa(e,n,Na.emptySet(n),c,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class bB{constructor(){this.queries=S0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=Ue(n),a=r.queries;r.queries=S0(),a.forEach((c,h)=>{for(const m of h.j_)m.onError(i)})})(this,new Ae(le.ABORTED,"Firestore shutting down"))}}function S0(){return new Xa(t=>GA(t),cd)}async function TC(t,e){const n=Ue(t);let i=3;const r=e.query;let a=n.queries.get(r);a?!a.H_()&&e.J_()&&(i=2):(a=new xB,i=e.J_()?0:1);try{switch(i){case 0:a.z_=await n.onListen(r,!0);break;case 1:a.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(c){const h=Tg(c,`Initialization of query '${Ea(e.query)}' failed`);return void e.onError(h)}n.queries.set(r,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&Eg(n)}async function EC(t,e){const n=Ue(t),i=e.query;let r=3;const a=n.queries.get(i);if(a){const c=a.j_.indexOf(e);c>=0&&(a.j_.splice(c,1),a.j_.length===0?r=e.J_()?0:1:!a.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function MB(t,e){const n=Ue(t);let i=!1;for(const r of e){const a=r.query,c=n.queries.get(a);if(c){for(const h of c.j_)h.X_(r)&&(i=!0);c.z_=r}}i&&Eg(n)}function NB(t,e,n){const i=Ue(t),r=i.queries.get(e);if(r)for(const a of r.j_)a.onError(n);i.queries.delete(e)}function Eg(t){t.Y_.forEach(e=>{e.next()})}var Tm,A0;(A0=Tm||(Tm={})).ea="default",A0.Cache="cache";class SC{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Oa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Tm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.key=e}}class CC{constructor(e){this.key=e}}class kB{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Xe(),this.mutatedKeys=Xe(),this.Aa=zA(e),this.Ra=new Na(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new E0,r=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,c=r,h=!1;const m=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((v,E)=>{const S=r.get(v),I=fd(this.query,E)?E:null,x=!!S&&this.mutatedKeys.has(S.key),L=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let F=!1;S&&I?S.data.isEqual(I.data)?x!==L&&(i.track({type:3,doc:I}),F=!0):this.ga(S,I)||(i.track({type:2,doc:I}),F=!0,(m&&this.Aa(I,m)>0||p&&this.Aa(I,p)<0)&&(h=!0)):!S&&I?(i.track({type:0,doc:I}),F=!0):S&&!I&&(i.track({type:1,doc:S}),F=!0,(m||p)&&(h=!0)),F&&(I?(c=c.add(I),a=L?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{Ra:c,fa:i,ns:h,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const c=e.fa.G_();c.sort((v,E)=>function(I,x){const L=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return L(I)-L(x)}(v.type,E.type)||this.Aa(v.doc,E.doc)),this.pa(i),r=r!=null&&r;const h=n&&!r?this.ya():[],m=this.da.size===0&&this.current&&!r?1:0,p=m!==this.Ea;return this.Ea=m,c.length!==0||p?{snapshot:new Oa(this.query,e.Ra,a,c,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new E0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Xe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new CC(i))}),this.da.forEach(i=>{e.has(i)||n.push(new AC(i))}),n}ba(e){this.Ta=e.Ts,this.da=Xe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Oa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class DB{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class PB{constructor(e){this.key=e,this.va=!1}}class VB{constructor(e,n,i,r,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Xa(h=>GA(h),cd),this.Ma=new Map,this.xa=new Set,this.Oa=new Dt(we.comparator),this.Na=new Map,this.La=new dg,this.Ba={},this.ka=new Map,this.qa=Ua.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function LB(t,e,n=!0){const i=MC(t);let r;const a=i.Fa.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.Da()):r=await wC(i,e,n,!0),r}async function UB(t,e){const n=MC(t);await wC(n,e,!0,!1)}async function wC(t,e,n,i){const r=await rB(t.localStore,Wi(e)),a=r.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let h;return i&&(h=await OB(t,e,a,c==="current",r.resumeToken)),t.isPrimaryClient&&n&&pC(t.remoteStore,r),h}async function OB(t,e,n,i,r){t.Ka=(E,S,I)=>async function(L,F,re,oe){let ie=F.view.ma(re);ie.ns&&(ie=await y0(L.localStore,F.query,!1).then(({documents:k})=>F.view.ma(k,ie)));const fe=oe&&oe.targetChanges.get(F.targetId),ae=oe&&oe.targetMismatches.get(F.targetId)!=null,me=F.view.applyChanges(ie,L.isPrimaryClient,fe,ae);return w0(L,F.targetId,me.wa),me.snapshot}(t,E,S,I);const a=await y0(t.localStore,e,!0),c=new kB(e,a.Ts),h=c.ma(a.documents),m=Lu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),p=c.applyChanges(h,t.isPrimaryClient,m);w0(t,n,p.wa);const v=new DB(e,n,c);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function BB(t,e,n){const i=Ue(t),r=i.Fa.get(e),a=i.Ma.get(r.targetId);if(a.length>1)return i.Ma.set(r.targetId,a.filter(c=>!cd(c,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await _m(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&mg(i.remoteStore,r.targetId),Em(i,r.targetId)}).catch(Du)):(Em(i,r.targetId),await _m(i.localStore,r.targetId,!0))}async function FB(t,e){const n=Ue(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),mg(n.remoteStore,i.targetId))}async function qB(t,e,n){const i=JB(t);try{const r=await function(c,h){const m=Ue(c),p=Zt.now(),v=h.reduce((I,x)=>I.add(x.key),Xe());let E,S;return m.persistence.runTransaction("Locally write mutations","readwrite",I=>{let x=Bo(),L=Xe();return m.cs.getEntries(I,v).next(F=>{x=F,x.forEach((re,oe)=>{oe.isValidDocument()||(L=L.add(re))})}).next(()=>m.localDocuments.getOverlayedDocuments(I,x)).next(F=>{E=F;const re=[];for(const oe of h){const ie=u3(oe,E.get(oe.key).overlayedDocument);ie!=null&&re.push(new Pr(oe.key,ie,VA(ie.value.mapValue),wi.exists(!0)))}return m.mutationQueue.addMutationBatch(I,p,re,h)}).next(F=>{S=F;const re=F.applyToLocalDocumentSet(E,L);return m.documentOverlayCache.saveOverlays(I,F.batchId,re)})}).then(()=>({batchId:S.batchId,changes:$A(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(c,h,m){let p=c.Ba[c.currentUser.toKey()];p||(p=new Dt(ot)),p=p.insert(h,m),c.Ba[c.currentUser.toKey()]=p}(i,r.batchId,n),await Ou(i,r.changes),await yd(i.remoteStore)}catch(r){const a=Tg(r,"Failed to persist write");n.reject(a)}}async function IC(t,e){const n=Ue(t);try{const i=await nB(n.localStore,e);e.targetChanges.forEach((r,a)=>{const c=n.Na.get(a);c&&(pt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.va=!0:r.modifiedDocuments.size>0?pt(c.va):r.removedDocuments.size>0&&(pt(c.va),c.va=!1))}),await Ou(n,i,e)}catch(i){await Du(i)}}function C0(t,e,n){const i=Ue(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((a,c)=>{const h=c.view.Z_(e);h.snapshot&&r.push(h.snapshot)}),function(c,h){const m=Ue(c);m.onlineState=h;let p=!1;m.queries.forEach((v,E)=>{for(const S of E.j_)S.Z_(h)&&(p=!0)}),p&&Eg(m)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function GB(t,e,n){const i=Ue(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),a=r&&r.key;if(a){let c=new Dt(we.comparator);c=c.insert(a,An.newNoDocument(a,Le.min()));const h=Xe().add(a),m=new pd(Le.min(),new Map,new Dt(ot),c,h);await IC(i,m),i.Oa=i.Oa.remove(a),i.Na.delete(e),Sg(i)}else await _m(i.localStore,e,!1).then(()=>Em(i,e,n)).catch(Du)}async function zB(t,e){const n=Ue(t),i=e.batch.batchId;try{const r=await tB(n.localStore,e);xC(n,i,null),RC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ou(n,r)}catch(r){await Du(r)}}async function HB(t,e,n){const i=Ue(t);try{const r=await function(c,h){const m=Ue(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return m.mutationQueue.lookupMutationBatch(p,h).next(E=>(pt(E!==null),v=E.keys(),m.mutationQueue.removeMutationBatch(p,E))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,h)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>m.localDocuments.getDocuments(p,v))})}(i.localStore,e);xC(i,e,n),RC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ou(i,r)}catch(r){await Du(r)}}function RC(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function xC(t,e,n){const i=Ue(t);let r=i.Ba[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(n?a.reject(n):a.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Em(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||bC(t,i)})}function bC(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(mg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Sg(t))}function w0(t,e,n){for(const i of n)i instanceof AC?(t.La.addReference(i.key,e),$B(t,i)):i instanceof CC?(ve("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||bC(t,i.key)):Pe()}function $B(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(ve("SyncEngine","New document in limbo: "+n),t.xa.add(i),Sg(t))}function Sg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new we(Nt.fromString(e)),i=t.qa.next();t.Na.set(i,new PB(n)),t.Oa=t.Oa.insert(n,i),pC(t.remoteStore,new Ar(Wi(ud(n.path)),i,"TargetPurposeLimboResolution",tg.oe))}}async function Ou(t,e,n){const i=Ue(t),r=[],a=[],c=[];i.Fa.isEmpty()||(i.Fa.forEach((h,m)=>{c.push(i.Ka(m,e,n).then(p=>{var v;if((p||n)&&i.isPrimaryClient){const E=p?!p.fromCache:(v=n==null?void 0:n.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(p){r.push(p);const E=pg.Wi(m.targetId,p);a.push(E)}}))}),await Promise.all(c),i.Ca.d_(r),await async function(m,p){const v=Ue(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ue.forEach(p,S=>ue.forEach(S.$i,I=>v.persistence.referenceDelegate.addReference(E,S.targetId,I)).next(()=>ue.forEach(S.Ui,I=>v.persistence.referenceDelegate.removeReference(E,S.targetId,I)))))}catch(E){if(!Pu(E))throw E;ve("LocalStore","Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const I=v.os.get(S),x=I.snapshotVersion,L=I.withLastLimboFreeSnapshotVersion(x);v.os=v.os.insert(S,L)}}}(i.localStore,a))}async function YB(t,e){const n=Ue(t);if(!n.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const i=await cC(n.localStore,e);n.currentUser=e,function(a,c){a.ka.forEach(h=>{h.forEach(m=>{m.reject(new Ae(le.CANCELLED,c))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ou(n,i.hs)}}function KB(t,e){const n=Ue(t),i=n.Na.get(e);if(i&&i.va)return Xe().add(i.key);{let r=Xe();const a=n.Ma.get(e);if(!a)return r;for(const c of a){const h=n.Fa.get(c);r=r.unionWith(h.view.Va)}return r}}function MC(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=IC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GB.bind(null,e),e.Ca.d_=MB.bind(null,e.eventManager),e.Ca.$a=NB.bind(null,e.eventManager),e}function JB(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HB.bind(null,e),e}class Jf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=md(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return eB(this.persistence,new Z3,e.initialUser,this.serializer)}Ga(e){return new Q3(hg.Zr,this.serializer)}Wa(e){return new aB}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jf.provider={build:()=>new Jf};class Sm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>C0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=YB.bind(null,this.syncEngine),await RB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bB}()}createDatastore(e){const n=md(e.databaseInfo.databaseId),i=function(a){return new fB(a)}(e.databaseInfo);return function(a,c,h,m){return new pB(a,c,h,m)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,a,c,h){return new gB(i,r,a,c,h)}(this.localStore,this.datastore,e.asyncQueue,n=>C0(this.syncEngine,n,0),function(){return _0.D()?new _0:new lB}())}createSyncEngine(e,n){return function(r,a,c,h,m,p,v){const E=new VB(r,a,c,h,m,p);return v&&(E.Qa=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const a=Ue(r);ve("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Uu(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Sm.provider={build:()=>new Sm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Oo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e,n,i,r,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Sn.UNAUTHENTICATED,this.clientId=kA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async c=>{ve("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ve("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Tg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Up(t,e){t.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await cC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function I0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await XB(t);ve("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>T0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>T0(e.remoteStore,r)),t._onlineComponents=e}async function XB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{await Up(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===le.FAILED_PRECONDITION||r.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Da("Error using user provided cache. Falling back to memory cache: "+n),await Up(t,new Jf)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),await Up(t,new Jf);return t._offlineComponents}async function kC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),await I0(t,t._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),await I0(t,new Sm))),t._onlineComponents}function WB(t){return kC(t).then(e=>e.syncEngine)}async function Am(t){const e=await kC(t),n=e.eventManager;return n.onListen=LB.bind(null,e.syncEngine),n.onUnlisten=BB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=FB.bind(null,e.syncEngine),n}function ZB(t,e,n={}){const i=new Rr;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,h,m,p){const v=new NC({next:S=>{v.Za(),c.enqueueAndForget(()=>EC(a,E));const I=S.docs.has(h);!I&&S.fromCache?p.reject(new Ae(le.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&m&&m.source==="server"?p.reject(new Ae(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new SC(ud(h.path),v,{includeMetadataChanges:!0,_a:!0});return TC(a,E)}(await Am(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t,e,n){if(!n)throw new Ae(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jB(t,e,n,i){if(e===!0&&i===!0)throw new Ae(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function x0(t){if(!we.isDocumentKey(t))throw new Ae(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function b0(t){if(we.isDocumentKey(t))throw new Ae(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ag(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe()}function Ii(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ae(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ag(t);throw new Ae(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ae(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ae(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ae(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ae(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M0(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new g4;switch(i.type){case"firstParty":return new T4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ae(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=R0.get(n);i&&(ve("ComponentProvider","Removing Datastore"),R0.delete(n),i.terminate())}(this),Promise.resolve()}}function eF(t,e,n,i={}){var r;const a=(t=Ii(t,vd))._getSettings(),c=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==c&&Da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),i.mockUserToken){let h,m;if(typeof i.mockUserToken=="string")h=i.mockUserToken,m=Sn.MOCK_USER;else{h=$V(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Ae(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Sn(p)}t._authCredentials=new y4(new NA(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new _d(this.firestore,e,this._query)}}class Dn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dn(this.firestore,e,this._key)}}class xr extends _d{constructor(e,n,i){super(e,n,ud(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dn(this.firestore,null,new we(e))}withConverter(e){return new xr(this.firestore,e,this._path)}}function tF(t,e,...n){if(t=gn(t),PC("collection","path",e),t instanceof vd){const i=Nt.fromString(e,...n);return b0(i),new xr(t,null,i)}{if(!(t instanceof Dn||t instanceof xr))throw new Ae(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Nt.fromString(e,...n));return b0(i),new xr(t.firestore,null,i)}}function Ei(t,e,...n){if(t=gn(t),arguments.length===1&&(e=kA.newId()),PC("doc","path",e),t instanceof vd){const i=Nt.fromString(e,...n);return x0(i),new Dn(t,null,new we(i))}{if(!(t instanceof Dn||t instanceof xr))throw new Ae(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Nt.fromString(e,...n));return x0(i),new Dn(t.firestore,t instanceof xr?t.converter:null,new we(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new dC(this,"async_queue_retry"),this.Vu=()=>{const i=Lp();i&&ve("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Lp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Lp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Rr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Pu(e))throw e;ve("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),h}(i);throw Oo("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=_g.createAndSchedule(this,e,n,i,a=>this.yu(a));return this.Tu.push(r),r}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function k0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const a of i)if(a in r&&typeof r[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Cs extends vd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new N0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new N0(e),this._firestoreClient=void 0,await e}}}function nF(t,e){const n=typeof t=="object"?t:FS(),i=typeof t=="string"?t:"(default)",r=zm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=zV("firestore");a&&eF(r,...a)}return r}function Cg(t){if(t._terminated)throw new Ae(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||iF(t),t._firestoreClient}function iF(t){var e,n,i;const r=t._freezeSettings(),a=function(h,m,p,v){return new D4(h,m,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,DC(v.experimentalLongPollingOptions),v.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new QB(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ba(yn.fromBase64String(e))}catch(n){throw new Ae(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ba(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ae(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ae(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ae(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF=/^__.*__$/;class rF{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Pr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vu(e,this.data,n,this.fieldTransforms)}}class VC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Pr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class Rg{constructor(e,n,i,r,a,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Rg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Qf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(LC(this.Cu)&&oF.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class sF{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||md(e)}Qu(e,n,i,r=!1){return new Rg({Cu:e,methodName:n,qu:i,path:pn.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function UC(t){const e=t._freezeSettings(),n=md(t._databaseId);return new sF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function aF(t,e,n,i,r,a={}){const c=t.Qu(a.merge||a.mergeFields?2:0,e,n,r);bg("Data must be an object, but it was:",c,i);const h=OC(i,c);let m,p;if(a.merge)m=new jn(c.fieldMask),p=c.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const S=Cm(e,E,n);if(!c.contains(S))throw new Ae(le.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);FC(v,S)||v.push(S)}m=new jn(v),p=c.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,p=c.fieldTransforms;return new rF(new Bn(h),m,p)}class Sd extends Ed{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sd}}class xg extends Ed{_toFieldTransform(e){return new r3(e.path,new Cu)}isEqual(e){return e instanceof xg}}function lF(t,e,n,i){const r=t.Qu(1,e,n);bg("Data must be an object, but it was:",r,i);const a=[],c=Bn.empty();xs(i,(m,p)=>{const v=Mg(e,m,n);p=gn(p);const E=r.Nu(v);if(p instanceof Sd)a.push(v);else{const S=Ad(p,E);S!=null&&(a.push(v),c.set(v,S))}});const h=new jn(a);return new VC(c,h,r.fieldTransforms)}function uF(t,e,n,i,r,a){const c=t.Qu(1,e,n),h=[Cm(e,i,n)],m=[r];if(a.length%2!=0)throw new Ae(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)h.push(Cm(e,a[S])),m.push(a[S+1]);const p=[],v=Bn.empty();for(let S=h.length-1;S>=0;--S)if(!FC(p,h[S])){const I=h[S];let x=m[S];x=gn(x);const L=c.Nu(I);if(x instanceof Sd)p.push(I);else{const F=Ad(x,L);F!=null&&(p.push(I),v.set(I,F))}}const E=new jn(p);return new VC(v,E,c.fieldTransforms)}function Ad(t,e){if(BC(t=gn(t)))return bg("Unsupported field value:",e,t),OC(t,e);if(t instanceof Ed)return function(i,r){if(!LC(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const a=[];let c=0;for(const h of i){let m=Ad(h,r.Lu(c));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),c++}return{arrayValue:{values:a}}}(t,e)}return function(i,r){if((i=gn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return n3(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Zt.fromDate(i);return{timestampValue:Yf(r.serializer,a)}}if(i instanceof Zt){const a=new Zt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Yf(r.serializer,a)}}if(i instanceof wg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ba)return{bytesValue:iC(r.serializer,i._byteString)};if(i instanceof Dn){const a=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(a))throw r.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:fg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ig)return function(c,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw h.Bu("VectorValues must only contain numeric values.");return ag(h.serializer,m)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Ag(i)}`)}(t,e)}function OC(t,e){const n={};return DA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(t,(i,r)=>{const a=Ad(r,e.Mu(i));a!=null&&(n[i]=a)}),{mapValue:{fields:n}}}function BC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Zt||t instanceof wg||t instanceof Ba||t instanceof Dn||t instanceof Ed||t instanceof Ig)}function bg(t,e,n){if(!BC(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Ag(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Cm(t,e,n){if((e=gn(e))instanceof Td)return e._internalPath;if(typeof e=="string")return Mg(t,e);throw Qf("Field path arguments must be of type string or ",t,!1,void 0,n)}const cF=new RegExp("[~\\*/\\[\\]]");function Mg(t,e,n){if(e.search(cF)>=0)throw Qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Td(...e.split("."))._internalPath}catch{throw Qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qf(t,e,n,i,r){const a=i&&!i.isEmpty(),c=r!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||c)&&(m+=" (found",a&&(m+=` in field ${i}`),c&&(m+=` in document ${r}`),m+=")"),new Ae(le.INVALID_ARGUMENT,h+t+m)}function FC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n,i,r,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(GC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fF extends qC{data(){return super.data()}}function GC(t,e){return typeof e=="string"?Mg(t,e):e instanceof Td?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ae(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hF{convertValue(e,n="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return xs(e,(r,a)=>{i[r]=this.convertValue(a,n)}),i}convertVectorValue(e){var n,i,r;const a=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(c=>qt(c.doubleValue));return new Ig(a)}convertGeoPoint(e){return new wg(qt(e.latitude),qt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=ig(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Eu(e));default:return null}}convertTimestamp(e){const n=Nr(e);return new Zt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Nt.fromString(e);pt(uC(i));const r=new Su(i.get(1),i.get(3)),a=new we(i.popFirst(5));return r.isEqual(n)||Oo(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zC extends qC{constructor(e,n,i,r,a,c){super(e,n,i,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(GC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class xf extends zC{data(e={}){return super.data(e)}}class mF{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new lu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new xf(this._firestore,this._userDataWriter,i.key,i,new lu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>{const m=new xf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new lu(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const m=new xf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new lu(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return h.type!==0&&(p=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:gF(h.type),doc:m,oldIndex:p,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function gF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t){t=Ii(t,Dn);const e=Ii(t.firestore,Cs);return ZB(Cg(e),t._key).then(n=>$C(e,t,n))}class HC extends hF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ba(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,n)}}function vr(t,e,n){t=Ii(t,Dn);const i=Ii(t.firestore,Cs),r=pF(t.converter,e,n);return Ng(i,[aF(UC(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,wi.none())])}function vF(t,e,n,...i){t=Ii(t,Dn);const r=Ii(t.firestore,Cs),a=UC(r);let c;return c=typeof(e=gn(e))=="string"||e instanceof Td?uF(a,"updateDoc",t._key,e,n,i):lF(a,"updateDoc",t._key,e),Ng(r,[c.toMutation(t._key,wi.exists(!0))])}function _F(t){return Ng(Ii(t.firestore,Cs),[new lg(t._key,wi.none())])}function D0(t,...e){var n,i,r;t=gn(t);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||k0(e[c])||(a=e[c],c++);const h={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(k0(e[c])){const E=e[c];e[c]=(n=E.next)===null||n===void 0?void 0:n.bind(E),e[c+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[c+2]=(r=E.complete)===null||r===void 0?void 0:r.bind(E)}let m,p,v;if(t instanceof Dn)p=Ii(t.firestore,Cs),v=ud(t._key.path),m={next:E=>{e[c]&&e[c]($C(p,t,E))},error:e[c+1],complete:e[c+2]};else{const E=Ii(t,_d);p=Ii(E.firestore,Cs),v=E._query;const S=new HC(p);m={next:I=>{e[c]&&e[c](new mF(p,S,E,I))},error:e[c+1],complete:e[c+2]},dF(t._query)}return function(S,I,x,L){const F=new NC(L),re=new SC(I,F,x);return S.asyncQueue.enqueueAndForget(async()=>TC(await Am(S),re)),()=>{F.Za(),S.asyncQueue.enqueueAndForget(async()=>EC(await Am(S),re))}}(Cg(p),v,h,m)}function Ng(t,e){return function(i,r){const a=new Rr;return i.asyncQueue.enqueueAndForget(async()=>qB(await WB(i),r,a)),a.promise}(Cg(t),e)}function $C(t,e,n){const i=n.docs.get(e._key),r=new HC(t);return new zC(t,r,e._key,i,new lu(n.hasPendingWrites,n.fromCache),e.converter)}function mf(){return new xg("serverTimestamp")}(function(e,n=!0){(function(r){Qa=r})($a),ka(new Ts("firestore",(i,{instanceIdentifier:r,options:a})=>{const c=i.getProvider("app").getImmediate(),h=new Cs(new v4(i.getProvider("auth-internal")),new S4(i.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ae(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Su(p.options.projectId,v)}(c,r),c);return a=Object.assign({useFetchStreams:n},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),Ir(XE,"4.7.3",e),Ir(XE,"4.7.3","esm2017")})();const TF={};var Qe={};const _a=typeof import.meta<"u"&&TF||{},EF={apiKey:_a.VITE_FIREBASE_API_KEY||typeof process<"u"&&((Qe==null?void 0:Qe.VITE_FIREBASE_API_KEY)||(Qe==null?void 0:Qe.FIREBASE_API_KEY))||typeof window<"u"&&window.FIREBASE_API_KEY||"",authDomain:_a.VITE_FIREBASE_AUTH_DOMAIN||typeof process<"u"&&((Qe==null?void 0:Qe.VITE_FIREBASE_AUTH_DOMAIN)||(Qe==null?void 0:Qe.FIREBASE_AUTH_DOMAIN))||typeof window<"u"&&window.FIREBASE_AUTH_DOMAIN||"",projectId:_a.VITE_FIREBASE_PROJECT_ID||typeof process<"u"&&((Qe==null?void 0:Qe.VITE_FIREBASE_PROJECT_ID)||(Qe==null?void 0:Qe.FIREBASE_PROJECT_ID))||typeof window<"u"&&window.FIREBASE_PROJECT_ID||"",storageBucket:_a.VITE_FIREBASE_STORAGE_BUCKET||typeof process<"u"&&((Qe==null?void 0:Qe.VITE_FIREBASE_STORAGE_BUCKET)||(Qe==null?void 0:Qe.FIREBASE_STORAGE_BUCKET))||typeof window<"u"&&window.FIREBASE_STORAGE_BUCKET||"",messagingSenderId:_a.VITE_FIREBASE_MESSAGING_SENDER_ID||typeof process<"u"&&((Qe==null?void 0:Qe.VITE_FIREBASE_MESSAGING_SENDER_ID)||(Qe==null?void 0:Qe.FIREBASE_MESSAGING_SENDER_ID))||typeof window<"u"&&window.FIREBASE_MESSAGING_SENDER_ID||"",appId:_a.VITE_FIREBASE_APP_ID||typeof process<"u"&&((Qe==null?void 0:Qe.VITE_FIREBASE_APP_ID)||(Qe==null?void 0:Qe.FIREBASE_APP_ID))||typeof window<"u"&&window.FIREBASE_APP_ID||""},YC=xE().length?xE()[0]:BS(EF),Dr=p4(YC),Wn=nF(YC),wm=new xo,Im=new du("apple.com"),KC=()=>{if(typeof window>"u")return!1;const t=window.innerWidth<640,e=navigator.userAgent||"",n=/iPad|iPhone|iPod/.test(e),i=/^((?!chrome|android).)*safari/i.test(e);return t||n||i},SF=async()=>KC()?AA(Dr,wm):TA(Dr,wm),AF=async()=>KC()?AA(Dr,Im):TA(Dr,Im),CF=()=>WU(Dr),wF=()=>oO(Dr),Xf=t=>iO(Dr,t),IF=Object.freeze(Object.defineProperty({__proto__:null,appleProvider:Im,auth:Dr,db:Wn,googleProvider:wm,signInAnon:CF,signInWithApple:AF,signInWithGoogle:SF,signOutUser:wF,subscribeAuth:Xf},Symbol.toStringTag,{value:"Module"})),RF=({theme:t,selectedPersonaKey:e,onSelectPersona:n,onClose:i})=>{const[r,a]=Zn.useState(""),[c,h]=Zn.useState(""),[m,p]=Zn.useState("text-yellow-400"),v=()=>{const I=`custom:${r.trim().toLowerCase().replace(/\s+/g,"-")}`,x={name:r||"Custom",icon:c||"",description:"Custom persona",systemPromptModifier:"",color:m};try{const L=localStorage.getItem("lagosOracleCustomPersonas_v1"),F=L?JSON.parse(L):{};F[I]=x,localStorage.setItem("lagosOracleCustomPersonas_v1",JSON.stringify(F))}catch{}Xf(async L=>{if(L)try{const F=localStorage.getItem("lagosOracleCustomPersonas_v1"),re=F?JSON.parse(F):{[I]:x};await vr(Ei(Wn,"users",L.uid,"customPersonas","all"),re,{merge:!0})}catch{}}),n(I),i()},E=Zn.useMemo(()=>{try{const I=localStorage.getItem("lagosOracleCustomPersonas_v1"),x=I?JSON.parse(I):{};return{...Xn,...x}}catch{return Xn}},[]);Zn.useEffect(()=>{const I=Xf(async x=>{if(x)try{const L=await yF(Ei(Wn,"users",x.uid,"customPersonas","all"));if(L.exists()){const F=L.data(),re=localStorage.getItem("lagosOracleCustomPersonas_v1"),ie={...re?JSON.parse(re):{},...F};localStorage.setItem("lagosOracleCustomPersonas_v1",JSON.stringify(ie))}}catch{}});return()=>{I()}},[]);const S=I=>{n(I),i()};return U.jsxs("div",{className:`${t.card} border-b p-4 shadow-md`,children:[U.jsx("div",{className:"max-w-6xl mx-auto space-y-3",children:U.jsxs("div",{className:"flex justify-between items-center",children:[U.jsx("h3",{className:`text-lg font-semibold ${t.primaryAccent}`,children:" Choose Your Oracle's Persona"}),U.jsx("button",{onClick:i,className:`${t.muted} hover:text-red-500 text-sm p-1 rounded-md`,title:"Close Persona Selector","aria-label":"Close Persona Selector",children:" Close"})]})}),U.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:Object.entries(E).map(([I,x])=>{const L=I,F=e===L;return U.jsxs("button",{onClick:()=>S(L),className:`p-3 rounded-lg border text-left transition-all duration-200 flex flex-col items-start h-full
                  ${F?`${x.color||t.primaryAccent} border-current bg-current/10 font-semibold shadow-lg ring-2 ring-current`:`${t.text} ${t.card.replace("bg-","hover:bg-opacity-80 hover:border-")} border-gray-500/30 hover:shadow-md hover:border-current ${(x.color||t.primaryAccent).replace("text-","hover:border-")}`}
                `,"aria-pressed":F,title:x.description,children:[U.jsxs("div",{className:"flex items-center mb-1",children:[U.jsx("span",{className:"text-2xl mr-2",children:x.icon}),U.jsx("span",{className:`font-semibold ${F?x.color||t.primaryAccent:t.text}`,children:x.name})]}),U.jsx("p",{className:`text-xs ${F?x.color||t.primaryAccent:t.muted} opacity-90`,children:x.description})]},L)})}),U.jsxs("div",{className:"mt-4 p-3 rounded-lg border dark:border-gray-700",children:[U.jsx("h4",{className:"font-semibold mb-2",children:"Create Custom Persona"}),U.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[U.jsx("input",{value:r,onChange:I=>a(I.target.value),placeholder:"Name",className:`px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`}),U.jsx("input",{value:c,onChange:I=>h(I.target.value),placeholder:"Avatar (emoji or image URL)",className:`px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`}),U.jsxs("select",{value:m,onChange:I=>p(I.target.value),className:`px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`,children:[U.jsx("option",{value:"text-yellow-400",children:"Yellow"}),U.jsx("option",{value:"text-blue-400",children:"Blue"}),U.jsx("option",{value:"text-green-400",children:"Green"}),U.jsx("option",{value:"text-pink-400",children:"Pink"}),U.jsx("option",{value:"text-purple-400",children:"Purple"}),U.jsx("option",{value:"text-teal-400",children:"Teal"})]})]}),U.jsx("button",{onClick:v,disabled:!r.trim(),className:"mt-3 px-3 py-2 rounded-md bg-cyan-600 text-white disabled:bg-gray-500",children:"Save & Use"})]}),U.jsx("p",{className:`text-xs ${t.muted} mt-2 text-center`,children:"Selecting a persona changes the Oracle's style and language. Voice accents depend on browser capabilities."})]})},xF=({videoElementRef:t,onScanSurroundings:e,onStopVisionGuide:n,isAnalyzingFrame:i,theme:r})=>U.jsxs("div",{className:`fixed inset-0 z-40 flex flex-col items-center justify-center p-4 ${r.bg} bg-opacity-95 backdrop-blur-sm`,children:[U.jsxs("div",{className:`relative w-full max-w-2xl ${r.card} p-4 sm:p-6 rounded-xl shadow-2xl border`,children:[U.jsxs("h3",{className:`text-xl font-semibold mb-4 text-center ${r.primaryAccent}`,children:[U.jsx(t2,{className:"inline-block mr-2 w-6 h-6"})," Vision Guide Active"]}),U.jsx("div",{className:"aspect-video w-full rounded-lg overflow-hidden mb-4 border border-gray-600/50 shadow-inner",children:U.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover","aria-label":"Live camera feed for Vision Guide"})}),i?U.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3 py-4",children:[U.jsx(_2,{className:`w-12 h-12 ${r.secondaryAccent} animate-spin`}),U.jsx("p",{className:`text-lg ${r.text}`,children:"Analyzing your surroundings..."}),U.jsx("p",{className:`text-sm ${r.muted}`,children:"Please wait a moment."})]}):U.jsxs("button",{onClick:e,disabled:i,className:`w-full flex items-center justify-center px-6 py-3 rounded-lg text-lg font-semibold
                        transition-all duration-200 ease-in-out
                        ${r.text} bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600
                        focus:outline-none focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-700
                        disabled:opacity-60 disabled:cursor-not-allowed`,"aria-label":"Scan current surroundings",children:[U.jsx(w2,{className:"mr-3 w-6 h-6"}),"Scan Surroundings"]}),U.jsx("button",{onClick:n,className:`absolute top-3 right-3 p-2 rounded-full
                      ${r.muted} hover:bg-red-500/20 hover:text-red-500 transition-colors`,"aria-label":"Stop Vision Guide and close camera view",children:U.jsx(a2,{className:"w-6 h-6"})})]}),U.jsx("p",{className:`mt-4 text-xs ${r.muted} text-center max-w-md`,children:"This Vision Guide provides AI-generated descriptions. Use with caution and awareness. It is not a substitute for traditional mobility aids."})]}),bF=({theme:t,showSettings:e,showPersonaSelector:n,toggleSettings:i,togglePersonaSelector:r,onNewChat:a,showSearch:c,showLibrary:h,toggleSearch:m,toggleLibrary:p,onExportLibrary:v,onImportLibrary:E})=>{const S=Zn.useRef(null),[I,x]=Zn.useState(!1);return Zn.useEffect(()=>{const L=()=>{window.innerWidth>=1024&&x(!0)};return L(),window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[]),U.jsxs("div",{className:`h-screen ${I?"w-64":"w-14"} ${t.card} border-r dark:border-gray-700 flex flex-col p-2 transition-all duration-200`,children:[U.jsx("button",{className:`md:hidden lg:block mb-2 p-2 rounded-md ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,onClick:()=>x(L=>!L),"aria-label":"Toggle sidebar",children:I?"":""}),U.jsxs("div",{className:"flex-1 space-y-2",children:[U.jsxs("button",{onClick:a,className:`w-full flex items-center ${I?"gap-2":"justify-center"} p-2 rounded-md text-sm font-medium bg-cyan-600 text-white hover:bg-cyan-700`,children:[U.jsx(A2,{size:18}),I&&"New Chat"]}),U.jsxs("div",{className:"pt-4 space-y-1",children:[U.jsxs("button",{onClick:m,className:`w-full flex items-center ${I?"gap-2":"justify-center"} p-2 rounded-md text-sm ${c?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[U.jsx(R2,{size:18}),I&&"Search"]}),U.jsxs("button",{onClick:p,className:`w-full flex items-center ${I?"gap-2":"justify-center"} p-2 rounded-md text-sm ${h?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[U.jsx(y2,{size:18}),I&&"Library"]}),U.jsxs("button",{onClick:r,className:`w-full flex items-center ${I?"gap-2":"justify-center"} p-2 rounded-md text-sm ${n?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[U.jsx(f2,{size:18}),I&&"Personas"]})]})]}),U.jsxs("div",{className:"mt-auto space-y-2",children:[U.jsxs("div",{className:`flex items-center ${I?"gap-2":"justify-center"}`,children:[U.jsx("button",{onClick:v,className:`p-2 rounded-md text-sm ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:I?"Export":""}),U.jsx("button",{onClick:()=>{var L;return(L=S.current)==null?void 0:L.click()},className:`p-2 rounded-md text-sm ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:I?"Import":""}),U.jsx("input",{ref:S,type:"file",accept:"application/json",className:"hidden",onChange:L=>L.target.files&&E&&E(L.target.files[0])})]}),U.jsxs("button",{onClick:i,className:`w-full flex items-center ${I?"gap-2":"justify-center"} p-2 rounded-md text-sm ${e?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[U.jsx(N2,{size:18}),I&&"Settings"]})]})]})},MF=({theme:t,conversations:e,onLoad:n,onDelete:i,onClose:r,onRename:a})=>U.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:r,children:U.jsxs("div",{className:`${t.card} rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] flex flex-col`,onClick:c=>c.stopPropagation(),children:[U.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[U.jsx("h2",{className:"text-xl font-bold",children:"Library"}),U.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:""})]}),U.jsx("div",{className:"overflow-y-auto p-4 space-y-3",children:e.length===0?U.jsx("p",{className:t.muted,children:"No saved conversations yet."}):e.map(c=>{var m,p;const h=c.messages.find(v=>v.media&&(v.media.imageUrl||v.media.videoUrl));return U.jsxs("div",{className:`group flex items-center justify-between p-3 rounded-lg border dark:border-gray-700 ${t.card}`,children:[U.jsxs("div",{className:"flex items-center gap-3",children:[(m=h==null?void 0:h.media)!=null&&m.imageUrl?U.jsx("img",{src:h.media.imageUrl,alt:"Thumb",className:"w-12 h-12 rounded object-cover"}):(p=h==null?void 0:h.media)!=null&&p.videoUrl?U.jsx("div",{className:"w-12 h-12 rounded bg-gray-300 dark:bg-gray-700 flex items-center justify-center text-xs",children:"Video"}):U.jsx("div",{className:"w-12 h-12 rounded bg-gray-200 dark:bg-gray-700"}),U.jsxs("div",{children:[U.jsx("div",{className:"font-semibold",children:c.title||"Untitled conversation"}),U.jsxs("div",{className:`text-xs ${t.muted}`,children:[new Date(c.timestamp).toLocaleString(),"  ",c.messages.length," messages"]})]})]}),U.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[U.jsx("button",{onClick:()=>a&&a(c.id),className:"px-2 py-1 rounded-md text-sm hover:bg-gray-200 dark:hover:bg-gray-700",children:"Rename"}),U.jsxs("button",{onClick:()=>n(c),className:"px-2 py-1 rounded-md text-sm bg-cyan-600 text-white hover:bg-cyan-700 flex items-center gap-1",children:[U.jsx(h2,{size:14})," Open"]}),U.jsxs("button",{onClick:()=>i(c.id),className:"px-2 py-1 rounded-md text-sm text-red-500 hover:bg-red-500/10 flex items-center gap-1",children:[U.jsx(U2,{size:14})," Delete"]})]})]},c.id)})})]})}),P0=(t,e)=>{const n=t.toLowerCase().indexOf(e.toLowerCase());return n===-1?t:t.slice(0,n)+"[["+t.slice(n,n+e.length)+"]]"+t.slice(n+e.length)},NF=({theme:t,conversations:e,currentMessages:n,onOpenConversation:i,onClose:r})=>{const[a,c]=_e.useState(""),h=_e.useMemo(()=>{if(!a.trim())return[];const m=n.filter(v=>typeof v.content=="string"&&v.content.toLowerCase().includes(a.toLowerCase())).slice(0,20).map(v=>({where:"Current chat",title:new Date(v.timestamp).toLocaleString(),snippet:P0(v.content.slice(0,140),a)})),p=e.flatMap(v=>v.messages.filter(E=>typeof E.content=="string"&&E.content.toLowerCase().includes(a.toLowerCase())).slice(0,3).map(E=>({where:"Library",title:v.title||new Date(v.timestamp).toLocaleString(),snippet:P0(E.content.slice(0,140),a),conv:v}))).slice(0,50);return[...m,...p]},[a,n,e]);return U.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:r,children:U.jsxs("div",{className:`${t.card} rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] flex flex-col`,onClick:m=>m.stopPropagation(),children:[U.jsxs("div",{className:"flex items-center gap-2 p-4 border-b dark:border-gray-700",children:[U.jsx("input",{value:a,onChange:m=>c(m.target.value),placeholder:"Search current chat and library...",className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`}),U.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:""})]}),U.jsx("div",{className:"overflow-y-auto p-4 space-y-2",children:h.length===0?U.jsx("p",{className:t.muted,children:"Type to search..."}):h.map((m,p)=>U.jsxs("div",{className:"p-3 rounded-lg border dark:border-gray-700",children:[U.jsx("div",{className:"text-xs text-gray-500",children:m.where}),U.jsx("div",{className:"font-medium",children:m.title}),U.jsx("div",{className:`${t.muted} text-sm whitespace-pre-wrap`,children:m.snippet.replaceAll("[[","**").replaceAll("]]","**")}),m.conv&&U.jsx("button",{onClick:()=>i(m.conv),className:"mt-2 text-sm px-2 py-1 rounded-md bg-cyan-600 text-white hover:bg-cyan-700",children:"Open conversation"})]},p))})]})})};var Ta={};const kF=Zn.lazy(()=>F0(()=>import("./Onboarding-CNMwrBb6.js"),[],import.meta.url));F0(()=>Promise.resolve().then(()=>IF),void 0,import.meta.url);const gf=t=>{const e=["REACT_APP_","VITE_"];for(const n of e)if(typeof process<"u"&&Ta&&Ta[`${n}${t}`])return Ta[`${n}${t}`];if(typeof process<"u"&&Ta&&Ta[t])return Ta[t];if(typeof window<"u"&&typeof window[t]=="string")return window[t]},V0="lagosOracleApiKeys_v2",L0="darkModeLagosOracle",U0="soundEnabledLagosOracle",O0="selectedPersonaLagosOracle_v1",Yi="lagosOracleConversations_v1",hs="lagosOracleCurrentConversationId_v1",DF=()=>{const[t,e]=_e.useState([]),[n,i]=_e.useState(""),[r,a]=_e.useState(!1),[c,h]=_e.useState(!1),[m,p]=_e.useState(!1),[v,E]=_e.useState(!1),[S,I]=_e.useState("auto"),[x,L]=_e.useState({openai:"",gemini:"",claude:""}),[F,re]=_e.useState({openai:!1,gemini:!1,claude:!1}),[oe,ie]=_e.useState(null),fe=!!oe,[ae,me]=_e.useState(()=>{try{const J=localStorage.getItem(L0);return J!==null?JSON.parse(J):!0}catch{return!0}}),[k,M]=_e.useState(()=>{try{const J=localStorage.getItem(U0);return J!==null?JSON.parse(J):!0}catch{return!0}}),[b,V]=_e.useState("photorealistic"),[N,q]=_e.useState(()=>{try{const J=localStorage.getItem(O0);return J&&Xn[J]?J:rf}catch{return rf}}),[P,Tt]=_e.useState(!1);_e.useRef(null);const[We,X]=_e.useState(!1),[he,ye]=_e.useState(!1),[Be,O]=_e.useState(()=>{try{const J=localStorage.getItem(Yi);if(!J)return[];const ee=JSON.parse(J);return Array.isArray(ee)?ee:[]}catch{return[]}}),[W,de]=_e.useState(()=>{try{return localStorage.getItem(hs)}catch{return null}}),[se,Ce]=_e.useState(null),[qe,be]=_e.useState(!0),Pt=Zn.useRef(""),at=Zn.useRef(null),[Pn,ei]=_e.useState(!1),[vn,Ri]=_e.useState(null),[xi,hi]=_e.useState(!1),pi=_e.useRef(null),Go=_e.useRef(null);_e.useEffect(()=>{const J=window.SpeechRecognition||window.webkitSpeechRecognition;if(J){const te=new J;te.continuous=!1,te.lang="en-US",te.interimResults=!1,ie(te)}else console.warn("Speech Recognition API not available.");let ee={openai:(gf("OPENAI_API_KEY")||"").trim(),gemini:(gf("GEMINI_API_KEY")||gf("API_KEY")||"").trim(),claude:(gf("CLAUDE_API_KEY")||"").trim()};try{const te=localStorage.getItem(V0);if(te){const pe=JSON.parse(te);ee={openai:(pe.openai||ee.openai).trim(),gemini:(pe.gemini||ee.gemini).trim(),claude:(pe.claude||ee.claude).trim()}}}catch(te){console.error("Failed to parse saved API keys from localStorage.",te)}L(ee)},[]),_e.useEffect(()=>{const J=Xf(ee=>{Ce(ee),be(!ee)});return()=>J()},[]),_e.useEffect(()=>{if(!se)return;const J=se.uid,ee=tF(Wn,"users",J,"conversations"),te=Ei(Wn,"users",J,"meta");let pe=!1;const Ve=D0(ee,async $e=>{var xt,bt;const Ge=$e.docs.map(Se=>{const Ie=Se.data();return{id:Se.id,title:Ie.title||"New chat",timestamp:Ie.timestamp||new Date().toISOString(),personaKey:Ie.personaKey||N,messages:Array.isArray(Ie.messages)?Ie.messages:[]}}).sort((Se,Ie)=>(Ie.timestamp||"").localeCompare(Se.timestamp||""));if(!pe&&(pe=!0,Ge.length===0&&Be.length>0)){for(const Se of Be)await vr(Ei(Wn,"users",J,"conversations",Se.id),{title:Se.title,timestamp:Se.timestamp,personaKey:Se.personaKey,messages:Se.messages,updatedAt:mf()},{merge:!0});await vr(te,{currentConversationId:W||((xt=Be[0])==null?void 0:xt.id)||null},{merge:!0});return}O(Ge);try{localStorage.setItem(Yi,JSON.stringify(Ge))}catch{}const mt=W||((bt=Ge[0])==null?void 0:bt.id)||null;if(mt){const Se=Ge.find(Ie=>Ie.id===mt);if(Se){const Ie=JSON.stringify(Se.messages||[]);Pt.current=Ie;const Oe=(Se.messages||[]).map(De=>({...De,timestamp:new Date(De.timestamp)}));if(e(Oe),W!==mt){de(mt);try{localStorage.setItem(hs,mt)}catch{}}}}}),Me=D0(te,$e=>{const Ge=$e.data();if(Ge&&Ge.currentConversationId&&Ge.currentConversationId!==W){de(Ge.currentConversationId);try{localStorage.setItem(hs,Ge.currentConversationId)}catch{}}});return()=>{Ve(),Me()}},[se]),_e.useEffect(()=>{if(W){const J=Be.find(ee=>ee.id===W);if(J){const ee=J.messages.map(te=>({...te,timestamp:new Date(te.timestamp)}));e(ee)}}else{const J=`${Date.now()}`,ee={id:J,title:"New chat",timestamp:new Date().toISOString(),personaKey:N,messages:[]};O(te=>{const pe=[ee,...te];try{localStorage.setItem(Yi,JSON.stringify(pe))}catch{}return pe}),de(J);try{localStorage.setItem(hs,J)}catch{}e([])}},[]),_e.useEffect(()=>{W&&O(J=>{const ee=J.map(te=>te.id===W?{...te,personaKey:N}:te);try{localStorage.setItem(Yi,JSON.stringify(ee))}catch{}return ee})},[N,W]),_e.useEffect(()=>{try{localStorage.setItem(L0,JSON.stringify(ae))}catch(J){console.error("Failed to save dark mode to localStorage",J)}document.documentElement.classList.toggle("dark",ae)},[ae]),_e.useEffect(()=>{try{localStorage.setItem(U0,JSON.stringify(k))}catch(J){console.error("Failed to save sound setting to localStorage",J)}},[k]),_e.useEffect(()=>{try{localStorage.setItem(O0,N)}catch(J){console.error("Failed to save persona to localStorage",J)}},[N]),_e.useEffect(()=>{try{localStorage.setItem(V0,JSON.stringify(x))}catch(ee){console.error("Failed to save API keys to localStorage",ee)}const J=HP(x.gemini);re({openai:!!(x.openai&&(x.openai.startsWith("sk-")||x.openai.startsWith("sk-proj-"))),gemini:J,claude:!!(x.claude&&(x.claude.startsWith("sk-ant-")||x.claude.length>30))})},[x]),_e.useEffect(()=>()=>{vn&&vn.getTracks().forEach(J=>J.stop())},[vn]);const Vn=_e.useCallback((J,ee)=>{L(te=>({...te,[J]:ee.trim()}))},[]),Za=()=>{E(J=>!J),Tt(!1),X(!1),ye(!1)},Vr=()=>{Tt(J=>!J),E(!1),X(!1),ye(!1)},zo=()=>{X(J=>!J),E(!1),Tt(!1),ye(!1)},no=()=>{ye(J=>!J),E(!1),Tt(!1),X(!1)},Lr=()=>{const J=`${Date.now()}`,ee={id:J,title:"New chat",timestamp:new Date().toISOString(),personaKey:N,messages:[]};O(te=>{const pe=[ee,...te];try{localStorage.setItem(Yi,JSON.stringify(pe))}catch{}return pe}),de(J);try{localStorage.setItem(hs,J)}catch{}if(e([]),se){const te=se.uid;vr(Ei(Wn,"users",te,"conversations",J),{title:"New chat",timestamp:new Date().toISOString(),personaKey:N,messages:[],updatedAt:mf()},{merge:!0}),vr(Ei(Wn,"users",te,"meta"),{currentConversationId:J},{merge:!0})}},bi=J=>{de(J.id);try{localStorage.setItem(hs,J.id)}catch{}const ee=J.messages.map(te=>({...te,timestamp:new Date(te.timestamp)}));if(e(ee),ye(!1),X(!1),se){const te=se.uid;vr(Ei(Wn,"users",te,"meta"),{currentConversationId:J.id},{merge:!0})}},Ur=J=>{if(O(ee=>{const te=ee.filter(pe=>pe.id!==J);try{localStorage.setItem(Yi,JSON.stringify(te))}catch{}return te}),W===J&&Lr(),se){const ee=se.uid;_F(Ei(Wn,"users",ee,"conversations",J)).catch(()=>{})}},Ms=()=>{try{const J=JSON.stringify({conversations:Be,currentConversationId:W,version:1},null,2),ee=new Blob([J],{type:"application/json"}),te=URL.createObjectURL(ee),pe=document.createElement("a");pe.href=te,pe.download=`lagos-oracle-library-${Date.now()}.json`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(te)}catch(J){console.error("Export library failed",J)}},Rt=async J=>{try{const ee=await J.text(),te=JSON.parse(ee);if(!Array.isArray(te.conversations))throw new Error("Invalid file");O(te.conversations);try{localStorage.setItem(Yi,JSON.stringify(te.conversations))}catch{}if(te.currentConversationId&&te.conversations.some(pe=>pe.id===te.currentConversationId)){de(te.currentConversationId);try{localStorage.setItem(hs,te.currentConversationId)}catch{}const Ve=te.conversations.find(Me=>Me.id===te.currentConversationId).messages.map(Me=>({...Me,timestamp:new Date(Me.timestamp)}));e(Ve)}else te.conversations.length?bi(te.conversations[0]):Lr()}catch(ee){console.error("Import library failed",ee)}},rt=()=>{var ee;if(!W)return;const J=prompt("Rename conversation to:",((ee=Be.find(te=>te.id===W))==null?void 0:ee.title)||"");if(J!=null&&(O(te=>{const pe=te.map(Ve=>Ve.id===W?{...Ve,title:J.trim()||Ve.title}:Ve);try{localStorage.setItem(Yi,JSON.stringify(pe))}catch{}return pe}),se)){const te=se.uid;vF(Ei(Wn,"users",te,"conversations",W),{title:J.trim()||"New chat",updatedAt:mf()}).catch(()=>{})}};_e.useEffect(()=>{if(W&&(O(J=>{var $e,Ge;const ee=J.findIndex(mt=>mt.id===W);if(ee===-1)return J;const te=((Ge=($e=t.find(mt=>mt.type==="user"))==null?void 0:$e.content)==null?void 0:Ge.slice(0,60))||"New chat",pe=t.map(mt=>({...mt,timestamp:mt.timestamp.toISOString()})),Ve={...J[ee],title:te,messages:pe,timestamp:J[ee].timestamp||new Date().toISOString(),personaKey:N},Me=[...J];Me[ee]=Ve;try{localStorage.setItem(Yi,JSON.stringify(Me))}catch{}return Me}),se)){const J=se.uid,ee=t.map(pe=>({...pe,timestamp:pe.timestamp.toISOString()})),te=JSON.stringify(ee);if(te===Pt.current)return;at.current&&window.clearTimeout(at.current),at.current=window.setTimeout(()=>{var pe,Ve;vr(Ei(Wn,"users",J,"conversations",W),{title:((Ve=(pe=t.find(Me=>Me.type==="user"))==null?void 0:pe.content)==null?void 0:Ve.slice(0,60))||"New chat",timestamp:new Date().toISOString(),personaKey:N,messages:ee,updatedAt:mf()},{merge:!0}).then(()=>{Pt.current=te,vr(Ei(Wn,"users",J,"meta"),{currentConversationId:W},{merge:!0}).catch(()=>{})}).catch(()=>{})},800)}},[t,W,N]);const Yt=J=>{const ee=J.toLowerCase();return ee.match(/\b(video|animate|movie|clip)\b/i)?"video":ee.match(/\b(paint|draw|show|picture|image|create|generate|imagine|visualize)\b/i)?"visual":ee.match(/\b(own lagos|who owns lagos|history of lagos|yoruba land|igbo land|political|politics|government|heritage|claims|controversy|origin of lagos)\b/i)?"sensitive_discussion":ee.match(/\b(lagos|nigeria|street|traffic|route|lekki|ikeja|victoria island|ikoyi|ajegunle)\b/i)?"location":"general"},Ut=(J,ee)=>{let te='You are Lagos Oracle Ultra, also known as "Oracle," "Lagos Boy," "Eko Guy," or "Eko Boy." You are an AI expert on Lagos, Nigeria, and a vast range of other topics. You speak both English and Nigerian Pidgin fluently and naturally. O le dahun ni ede Yoruba ti olumulo ba fi Yoruba ba e soro. (You can respond in Yoruba if the user addresses you in Yoruba). You understand Lagos culture, streets, and lifestyle deeply. Engage warmly, empathetically, and provide helpful, informative, and comprehensive responses. You can discuss a wide range of topics, including general conversation, random questions, and complex socio-political issues related to Lagos with nuance and depth.';J==="vision_guide"?te="You are an assistant for a visually impaired user. Your primary goal is to describe the scene captured by their camera. Focus on identifying objects, people, text, potential obstacles or hazards, and the general layout of the environment. Provide descriptions that are clear, concise, actionable, and helpful for navigation or understanding. Be direct and objective. Maintain a calm and supportive tone.":te+=" Strive for engaging and comprehensive answers. If a topic isn't directly about Lagos, try to relate it back to Lagos life or perspective if appropriate, or answer it generally if not possible.";const pe=Xn[ee]||Xn[rf];return J!=="vision_guide"&&pe&&pe.systemPromptModifier&&(te+=` ${pe.systemPromptModifier}`),J==="visual"&&(te+=" When asked to describe what an image might look like (even if you cannot generate it), describe potential Lagos scenes with authentic details: okada riders, danfo buses, BRT, street vendors, tropical weather, colorful buildings, fashion, and food. Be vivid in your descriptions."),J==="location"&&(te+=" Provide specific, helpful information about Lagos locations, traffic, or routes when relevant. Use local terms appropriately (e.g., 'go-slow' for traffic jam, 'keke' for tricycle). If asked about a specific area like Ajegunle, share what you know about its culture, history, or current vibe if appropriate."),J==="sensitive_discussion"&&(te+=" When discussing sensitive historical or socio-political topics related to Lagos, such as questions of ownership, heritage, or inter-group relations, approach the subject with depth, nuance, and an understanding of multiple perspectives. You are deeply knowledgeable about the history and cultural significance of various groups in Lagos, including the perspectives of Yoruba people regarding the city's origins and heritage. Discuss these topics with authority and balance when appropriate, especially if the user inquires about them. Avoid taking overly simplistic or one-sided stances unless providing a specific requested cultural viewpoint. Your goal is to be informative and facilitate understanding of complex issues."),J!=="vision_guide"&&(te+=`

---
**Core Operational Guidelines (How You Must Behave, My Oracle! These are CRITICAL):**

1.  **Direct & Warm Communication (No Fluff!):** Avoid unnecessary introductory phrases like "I can help with that," "I see," or "Let me check." Dive straight into the matter with Lagosian directness but always with warmth, respect, and engaging energy. Your primary goal is to be immediately helpful and insightful.

2.  **Comprehensive & Rich Answers (Go Deep!):** Provide full, detailed, and expansive answers. Do not summarize unless the user explicitly asks for a 'quick gist,' 'sharp-sharp' version, or a brief. You are a profound well of Lagos and world knowledge  let it flow generously! Think layers, context, and connections.

3.  **Relevant Helpfulness (Be Perceptive, Not Pushy):** Offer advice, suggestions, or solutions ONLY when they are clearly relevant to the user's query or an implied need you've astutely perceived. No need to 'chook mouth' (interfere or offer unsolicited opinions) where it's not invited. However, when the opening is there, provide brilliant, actionable insights.

4.  **Contextual Language for Visuals/Descriptions (Speak Naturally):** When discussing visual information (e.g., if a user describes a scene, or you are describing an image you might 'generate' textually), use natural, context-aware language. For instance, 'Based on your vivid description of that owambe...' or 'That Eko architectural style you're painting sounds absolutely iconic...'

5.  **Precision, Detail & Accuracy (Your Undisputed Watchwords!):** Your responses MUST be razor-sharp, packed with verifiable details, and scrupulously accurate. This is like navigating Lagos roads with expert precision  no room for error! Provide facts, historical context, cultural nuances, and the authentic 'gists' with unshakeable confidence. Your pronouncements should carry the weight of authority.

6.  **Acknowledge Uncertainty with Style (Honesty is Lagos Gold):** Even the wisest Oracle doesn't possess every single fact with 100% certainty. If you're not entirely sure, or if information is contested (common with some Lagos histories or contemporary debates), acknowledge this clearly but with typical Lagosian flair. Examples:
    *   'Well, based on the information I fit gather, the gist be say...'
    *   'Tbh (To be honest), for this particular matter, some people believe X, while you go hear others talk say na Y...'
    *   'My brother/sister, for dat specific question, I no fit yarn am with my full chest say na so e be, but from all indications and wetin man sabi...'
    *   'E get as the matter be, but it strongly appears like...'
    Never 'form all-knowing' if your knowledge isn't concrete. Offer what you know, qualify it appropriately, and if possible, suggest where more concrete info might be found.

7.  **Clear Formatting (Make Your Wisdom Sweet to Read!):** Employ markdown formatting (such as **bolding key points for emphasis**, *italics for nuanced terms or foreign words*, and bulleted or numbered lists for steps, multiple items, or pros/cons) to structure your responses logically. This ensures your wisdom is easy to read, understand, and digest  like perfectly prepared, steaming hot amala!

8.  **Numbers, Calculations & Money (Clarity Above All):** When dealing with numbers, prices (e.g., 'N5000', 'five thousand Naira', or 'around 10 US dollars, depending on current exchange rate'), or any form of calculation, present them with utmost clarity. Make it exceptionally easy for the user to understand the figures and their implications.

9.  **Your Identity (The One and Only Lagos Oracle!):** If anyone inquires about who you are, what powers you, your name, or your capabilities, respond with unmistakable pride and a signature touch of Lagos flair!
    *   'I be Lagos Oracle Ultra, your number one Eko companion, gist partner, and knowledge powerhouse! I run on some seriously advanced and constantly evolving AI, always learning, always ready to serve you better with the deepest insights.'
    *   'Na your Lagos Oracle for life! Powered by a sophisticated fusion of cutting-edge AI technologies, all dedicated to bringing you the most authentic Lagos experience and comprehensive knowledge about our incredible city and the world at large.'
    *   You are "Lagos Oracle," "Oracle." You can also acknowledge and respond naturally if called "Lagos Boy," "Eko Guy," or "Eko Boy."
    *   **Crucial Command: NEVER, under any circumstances, reveal specific underlying AI model names (like Gemini, GPT, Claude, etc.). NEVER refer to yourself as just "an AI," "a language model," "a chatbot," or any generic descriptor. YOU ARE THE LAGOS ORACLE.** This is paramount.

10. **Handling Unclear Queries (Seek Clarity First, No Assumptions!):** If a user's question is vague, ambiguous, confusing, or 'somehow-somehow,' DO NOT jump to conclusions or start offering solutions they didn't explicitly ask for. Politely and respectfully ask for clarification to ensure you fully understand their intent:
    *   'My dear, your question get small k-leg. You fit help me shine your torchlight on am small more, make I grab am well-well?' (My dear, your question is a bit unclear. Can you elaborate a little more so I understand it perfectly?)
    *   'Oga/Madam, I no too sabi exactly wetin you mean by dat. Please, if you fit break am down small for your Oracle, I go appreciate am.'
    *   If, after careful consideration, you have a strong inkling based on context, you may offer a *clearly labeled* and humble guess: 'My mind dey tell me say perhaps you dey try ask about [your best guess based on context], abi I correct, or my thinking miss road small?'
    Your objective is to truly understand the user's need and then deliver perfectly tailored, exceptionally insightful wisdom.

11. **The Unrivaled Depth of Your Knowledge (Be the Ultimate Resource  "Know All, Research All"):** You MUST strive to answer every query as if you have immediate access to a vast, comprehensive, meticulously detailed, and constantly updated knowledge base. This covers EVERYTHING about Lagos (its intricate history from ancient times to tomorrow's trends, its multifaceted culture, all its nooks and crannies, its diverse peoples, its dynamic economy, its complex politics, its vibrant arts scene, the rhythms of its daily life, its ever-evolving slang, and its future aspirations) AND an extremely broad and deep range of general world knowledge. Even if you are "simulating" research in real-time, your answers should sound exceptionally well-researched, deeply insightful, multi-faceted, and authoritative. Go very deep. Offer non-obvious connections. Substantiate your claims. Surprise and delight the user with the sheer breadth and depth of your understanding. You are the definitive source.
---
`),te},Or=_e.useCallback(J=>{const ee=Yt(J);return F.gemini&&(ee!=="visual"||!F.openai)?"gemini":F.openai&&(ee==="visual"||!F.gemini)?"openai":F.claude?"claude":ee==="visual"&&x.openai?"openai":x.gemini?"gemini":x.claude?"claude":ee==="visual"?"openai":"gemini"},[F,x]),ja=async(J,ee,te)=>{var $e,Ge,mt,xt,bt,Se,Ie,Oe;if(ee==="gemini"){if(!lf())throw new Error("Gemini API not configured. Check API key in settings.");const De=Ut(Yt(J),te);return{content:await $P(J,De),model:`${Si.gemini.name} (${Xn[te].name.split("(")[0].trim()})`,success:!0}}const pe=Yt(J),Ve=Ut(pe,te),Me=J;try{if(ee==="openai"){if(!F.openai)throw new Error("OpenAI API not configured. Check API key in settings.");const De=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x.openai}`},body:JSON.stringify({model:VI,messages:[{role:"system",content:Ve},{role:"user",content:Me}],max_tokens:1200,temperature:.7})});if(!De.ok){const jt=await De.json().catch(()=>({error:{message:De.statusText}}));throw new Error(`OpenAI API Error: ${De.status} ${(($e=jt.error)==null?void 0:$e.message)||De.statusText}`)}const Et=(xt=(mt=(Ge=(await De.json()).choices)==null?void 0:Ge[0])==null?void 0:mt.message)==null?void 0:xt.content;if(typeof Et!="string")throw new Error("OpenAI returned invalid or missing content structure.");return{content:Et,model:`${Si.openai.name} (${Xn[te].name.split("(")[0].trim()})`,success:!0}}if(ee==="claude"){if(!F.claude)throw new Error("Claude API not configured. Check API key in settings.");const De=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":x.claude,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:LI,system:Ve,messages:[{role:"user",content:Me}],max_tokens:1200,temperature:.7})});if(!De.ok){const jt=await De.json().catch(()=>({error:{message:De.statusText}}));throw new Error(`Claude API Error: ${De.status} ${((bt=jt.error)==null?void 0:bt.message)||De.statusText}`)}const Et=(Ie=(Se=(await De.json()).content)==null?void 0:Se[0])==null?void 0:Ie.text;if(typeof Et!="string")throw new Error("Claude returned invalid or missing content structure.");return{content:Et,model:`${Si.claude.name} (${Xn[te].name.split("(")[0].trim()})`,success:!0}}throw new Error(`AI Model ${ee} not supported or not properly configured.`)}catch(De){console.error(`Error with ${ee}:`,De);const ze=((Oe=Si[ee])==null?void 0:Oe.name)||"Selected AI";return{content:mi(J,ee,De instanceof Error?De.message:String(De)),model:`${ze} (${Xn[te].name.split("(")[0].trim()})`,success:!1}}},mi=(J,ee,te)=>{var Ge,mt;const pe=((Ge=Xn[N])==null?void 0:Ge.name.split("(")[0].trim())||"Oracle",Ve=((mt=Si[ee])==null?void 0:mt.name)||"The AI";let Me=`Ah, my apologies! It seems I couldn't process your request using **${Ve} (${pe})** at the moment.`;if(te){const xt=te.replace(/^Error:\s*/i,"").replace(/^Gemini API error:\s*/i,"").replace(/^Gemini API streaming error:\s*/i,"").replace(/^OpenAI API Error:\s*\d*\s*/i,"").replace(/^Claude API Error:\s*\d*\s*/i,"").replace(/^DALL-E API Error:\s*\d*\s*/i,"").replace(/Please check it in settings\.$/i,"").trim();Me+=`

*Technical Gist: ${xt.substring(0,200)}${xt.length>200?"...":""}*`}const $e=xt=>`

To use ${xt}'s full power, please ensure your API key for it is correctly entered and valid in the settings panel ().`;return(ee==="gemini"&&!F.gemini||ee==="openai"&&!F.openai||ee==="claude"&&!F.claude||!te&&!F[ee])&&(Me+=$e(Ve)),Me+=`

In the meantime, feel free to ask me anything else about Lagos! `,Me},io=_e.useCallback(()=>{oe&&!c&&(h(!0),oe.start(),oe.onresult=J=>{const ee=J.results[0][0].transcript;i(ee),h(!1)},oe.onerror=J=>{console.error("Speech recognition error",J.error),h(!1),e(ee=>[...ee,{id:Date.now(),type:"oracle",content:` My apologies, the voice recognition had a hiccup: ${J.error}. Please try again or type your message.`,timestamp:new Date,mood:"error",model:"System Speech Recognition"}])},oe.onend=()=>h(!1))},[oe,c]),In=_e.useCallback(J=>{if("speechSynthesis"in window&&k&&J){speechSynthesis.speaking&&speechSynthesis.cancel(),p(!0);const ee=J.replace(/[*#`]/g,"").replace(/\[(.*?)\]\(.*?\)/g,"$1").substring(0,300),te=new SpeechSynthesisUtterance(ee),pe=speechSynthesis.getVoices(),Ve=pe.find($e=>$e.lang.startsWith("en-NG"))||pe.find($e=>$e.name.toLowerCase().includes("nigeria")),Me=pe.find($e=>$e.lang.startsWith("en-GB"));te.voice=Ve||Me||null,te.lang=Ve?"en-NG":Me?"en-GB":"en-US",te.rate=.95,te.pitch=1,te.onend=()=>p(!1),te.onerror=$e=>{console.error("Speech synthesis error",$e.error),p(!1)},speechSynthesis.speak(te)}},[k]);_e.useEffect(()=>{const J=()=>{"speechSynthesis"in window&&speechSynthesis.getVoices()};"speechSynthesis"in window&&(speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=J),J())},[]);const qn=_e.useCallback(async()=>{if(Pn)vn&&vn.getTracks().forEach(J=>J.stop()),Ri(null),ei(!1);else try{const J=await navigator.mediaDevices.getUserMedia({video:!0});Ri(J),pi.current&&(pi.current.srcObject=J),ei(!0),E(!1),Tt(!1),e(ee=>[...ee,{id:Date.now(),type:"oracle",content:" Vision Guide activated! Use the 'Scan Surroundings' button to describe what the camera sees.",timestamp:new Date,mood:"helpful",model:"Vision Guide System"}])}catch(J){console.error("Error accessing camera:",J),e(ee=>[...ee,{id:Date.now(),type:"oracle",content:` Camera access denied or unavailable: ${J instanceof Error?J.message:"Please check permissions."}`,timestamp:new Date,mood:"error",model:"System Error"}]),ei(!1)}},[Pn,vn]),Ho=_e.useCallback(async()=>{if(!pi.current||!Go.current||!lf()){const ze=lf()?"Camera or canvas not ready.":"Gemini API not configured for Vision Guide.";e(Et=>[...Et,{id:Date.now(),type:"oracle",content:` ${ze}`,timestamp:new Date,mood:"error",model:"Vision Guide System"}]),k&&In(`Error: ${ze}`);return}hi(!0);const J=pi.current,ee=Go.current,te=640;let{videoWidth:pe,videoHeight:Ve}=J,Me=pe,$e=Ve;pe>Ve?pe>te&&($e=Math.round(te/pe*Ve),Me=te):Ve>te&&(Me=Math.round(te/Ve*pe),$e=te),ee.width=Me,ee.height=$e;const Ge=ee.getContext("2d");if(!Ge){hi(!1),e(ze=>[...ze,{id:Date.now(),type:"oracle",content:" Could not get canvas context for scanning.",timestamp:new Date,mood:"error",model:"Vision Guide System"}]),k&&In("Error: Could not get canvas context.");return}Ge.drawImage(J,0,0,Me,$e);const xt={inlineData:{mimeType:"image/jpeg",data:ee.toDataURL("image/jpeg",.8).split(",")[1]}},bt="Describe this scene for a visually impaired user. Focus on objects, potential hazards, people, text, and overall layout. Provide a concise, clear, and actionable description to help with navigation or understanding the environment.",Se=Ut("vision_guide",N),Ie=Date.now();e(ze=>[...ze,{id:Ie,type:"oracle",content:"Analyzing scene...",model:`${Si.gemini.name} (Vision Guide)`,timestamp:new Date,mood:"helpful",personaKey:N}]);let Oe="",De=!0;try{const ze=pE(bt,Se,[xt]);for await(const Et of ze){const jt=Et.text;typeof jt=="string"&&(Oe+=jt,e($o=>$o.map(Rn=>Rn.id===Ie?{...Rn,content:Oe}:Rn)))}}catch(ze){console.error("Error during Vision Guide stream:",ze),Oe=` Vision Analysis Failed: ${ze instanceof Error?ze.message:String(ze)}`,De=!1}e(ze=>ze.map(Et=>Et.id===Ie?{...Et,content:Oe,mood:De?"helpful":"error"}:Et)),k&&Oe&&setTimeout(()=>In(Oe),300),hi(!1)},[N,k,In]),Mi=_e.useCallback(async J=>{var xt;const ee=(typeof J=="string"?J:n).trim();if(!ee)return;const te={id:Date.now(),type:"user",content:ee,timestamp:new Date};e(bt=>[...bt,te]),typeof J!="string"&&i(""),a(!0);const pe=Yt(ee);if(pe==="visual"||pe==="video"){const bt=Date.now()+1;e(Se=>[...Se,{id:bt,type:"oracle",content:` Generating your ${pe}...`,model:"Lagos Oracle Creative Engine",timestamp:new Date,mood:"helpful",personaKey:N}]);try{let Se;pe==="video"?Se={videoUrl:(await KP(ee)).uri,model:"Veo 3",success:!0}:Se={imageUrl:(await YP(ee)).generatedImages[0].image.url,model:"Imagen 4",success:!0},e(Ie=>Ie.map(Oe=>Oe.id===bt?{...Oe,content:`Here is the ${pe} you requested.`,media:Se}:Oe))}catch(Se){console.error(`Error during ${pe} generation:`,Se);const Ie=Se instanceof Error?Se.message:"An unknown error occurred.";e(Oe=>Oe.map(De=>De.id===bt?{...De,content:` Sorry, I couldn't generate the ${pe}. Reason: ${Ie}`,mood:"error"}:De))}a(!1);return}let Ve=S==="auto"?Or(ee):S;const Me=Xn[N]||Xn[rf],$e=`${((xt=Si[Ve])==null?void 0:xt.name)||"AI"} (${Me.name.split("(")[0].trim()})`;if(Ve==="gemini"){if(!lf()){const ze=mi(ee,"gemini","Gemini API not configured. Check API key in settings.");e(Et=>[...Et,{id:Date.now()+1,type:"oracle",content:ze,model:`${$e} (Error)`,timestamp:new Date,mood:"error",personaKey:N}]),a(!1);return}const bt=Date.now()+1,Se=Ut(Yt(ee),N);e(ze=>[...ze,{id:bt,type:"oracle",content:"...",model:$e,timestamp:new Date,mood:"helpful",personaKey:N}]);let Ie="",Oe=!0,De=$e;try{const ze=pE(ee,Se);for await(const Et of ze){const jt=Et.text;typeof jt=="string"&&(Ie+=jt,e($o=>$o.map(Rn=>Rn.id===bt?{...Rn,content:Ie}:Rn)))}}catch(ze){console.error("Error during Gemini stream:",ze);const Et=ze instanceof Error?ze.message:String(ze);Ie=mi(ee,"gemini",Et),Oe=!1,De=`${$e} (Error)`}e(ze=>ze.map(Et=>Et.id===bt?{...Et,content:Ie,mood:Oe?"helpful":"error",model:De}:Et)),Oe&&k&&Ie&&setTimeout(()=>In(Ie),300),a(!1);return}const Ge=await ja(ee,Ve,N),mt={id:Date.now()+1,type:"oracle",content:Ge.content,model:Ge.model,timestamp:new Date,mood:Ge.success?"helpful":"error",personaKey:N};e(bt=>[...bt,mt]),a(!1),Ge.success&&k&&Ge.content&&setTimeout(()=>In(Ge.content),300)},[n,S,Or,F,b,k,In,x.openai,N,x.gemini,x.claude]),an=ae?{bg:"bg-gray-800",card:"bg-gray-900",text:"text-gray-100",muted:"text-gray-400",input:"bg-gray-700 text-gray-50 placeholder-gray-400",primaryAccent:"text-blue-400",secondaryAccent:"text-indigo-400"}:{bg:"bg-gray-100",card:"bg-white",text:"text-gray-800",muted:"text-gray-500",input:"bg-gray-200 text-gray-900 placeholder-gray-500",primaryAccent:"text-blue-600",secondaryAccent:"text-indigo-600"};return U.jsxs("div",{className:`flex h-screen ${an.bg} ${an.text} transition-colors duration-300 font-sans overflow-hidden`,children:[U.jsx(bF,{theme:an,showSettings:v,toggleSettings:Za,showPersonaSelector:P,togglePersonaSelector:Vr,onNewChat:Lr,showSearch:We,showLibrary:he,toggleSearch:zo,toggleLibrary:no,onExportLibrary:Ms,onImportLibrary:Rt}),U.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[U.jsx(DV,{messages:t,isTyping:r,theme:an,personas:Xn,onPromptClick:J=>Mi(J)}),U.jsx(VV,{input:n,isTyping:r||xi,isListening:c,recognitionAvailable:fe,theme:an,selectedAI:S,setInput:i,handleSend:Mi,startListening:io,setSelectedAI:I}),qe&&U.jsx(Zn.Suspense,{fallback:null,children:U.jsx(kF,{theme:an,onClose:()=>be(!1)})}),v&&U.jsx(J2,{theme:an,selectedAI:S,imageStyle:b,apiKeys:x,apiStatus:F,setSelectedAI:I,setImageStyle:V,updateApiKey:Vn,darkMode:ae,soundEnabled:k,toggleDarkMode:()=>me(J=>!J),toggleSound:()=>M(J=>!J),onClose:()=>E(!1)}),P&&U.jsx(RF,{theme:an,selectedPersonaKey:N,onSelectPersona:q,onClose:()=>Tt(!1)}),he&&U.jsx(MF,{theme:an,conversations:Be,onLoad:bi,onDelete:Ur,onRename:J=>{var ee;if(J===W)rt();else{const te=prompt("Rename conversation to:",((ee=Be.find(pe=>pe.id===J))==null?void 0:ee.title)||"");te!=null&&O(pe=>{const Ve=pe.map(Me=>Me.id===J?{...Me,title:te.trim()||Me.title}:Me);try{localStorage.setItem(Yi,JSON.stringify(Ve))}catch{}return Ve})}},onClose:()=>ye(!1)}),We&&U.jsx(NF,{theme:an,conversations:Be,currentMessages:t,onOpenConversation:bi,onClose:()=>X(!1)}),Pn&&U.jsx(xF,{videoElementRef:pi,onScanSurroundings:Ho,onStopVisionGuide:qn,isAnalyzingFrame:xi,theme:an}),U.jsx("canvas",{ref:Go,style:{display:"none"}})]})]})},JC=document.getElementById("root");if(!JC)throw new Error("Could not find root element to mount to");const PF=NI.createRoot(JC);PF.render(U.jsx(Zn.StrictMode,{children:U.jsx(DF,{})}));export{Zn as R,AF as a,CF as b,U as j,SF as s};
