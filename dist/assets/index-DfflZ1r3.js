var gI=Object.defineProperty;var yI=(t,e,n)=>e in t?gI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var It=(t,e,n)=>yI(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function L0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vp={exports:{}},Xl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function vI(){if(F_)return Xl;F_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var c=null;if(a!==void 0&&(c=""+a),r.key!==void 0&&(c=""+r.key),"key"in r){a={};for(var h in r)h!=="key"&&(a[h]=r[h])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:c,ref:r!==void 0?r:null,props:a}}return Xl.Fragment=e,Xl.jsx=n,Xl.jsxs=n,Xl}var q_;function _I(){return q_||(q_=1,vp.exports=vI()),vp.exports}var L=_I(),_p={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function TI(){if(G_)return Oe;G_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=E&&U[E]||U["@@iterator"],typeof U=="function"?U:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,O={};function F(U,W,de){this.props=U,this.context=W,this.refs=O,this.updater=de||I}F.prototype.isReactComponent={},F.prototype.setState=function(U,W){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,W,"setState")},F.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function oe(){}oe.prototype=F.prototype;function te(U,W,de){this.props=U,this.context=W,this.refs=O,this.updater=de||I}var ne=te.prototype=new oe;ne.constructor=te,x(ne,F.prototype),ne.isPureReactComponent=!0;var fe=Array.isArray,se={H:null,A:null,T:null,S:null,V:null},pe=Object.prototype.hasOwnProperty;function k(U,W,de,re,Se,Be){return de=Be.ref,{$$typeof:t,type:U,key:W,ref:de!==void 0?de:null,props:Be}}function M(U,W){return k(U.type,W,void 0,void 0,void 0,U.props)}function b(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function V(U){var W={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(de){return W[de]})}var N=/\/+/g;function q(U,W){return typeof U=="object"&&U!==null&&U.key!=null?V(""+U.key):W.toString(36)}function P(){}function At(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(P,P):(U.status="pending",U.then(function(W){U.status==="pending"&&(U.status="fulfilled",U.value=W)},function(W){U.status==="pending"&&(U.status="rejected",U.reason=W)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function Xe(U,W,de,re,Se){var Be=typeof U;(Be==="undefined"||Be==="boolean")&&(U=null);var Re=!1;if(U===null)Re=!0;else switch(Be){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(U.$$typeof){case t:case e:Re=!0;break;case v:return Re=U._init,Xe(Re(U._payload),W,de,re,Se)}}if(Re)return Se=Se(U),Re=re===""?"."+q(U,0):re,fe(Se)?(de="",Re!=null&&(de=Re.replace(N,"$&/")+"/"),Xe(Se,W,de,"",function(Wn){return Wn})):Se!=null&&(b(Se)&&(Se=M(Se,de+(Se.key==null||U&&U.key===Se.key?"":(""+Se.key).replace(N,"$&/")+"/")+Re)),W.push(Se)),1;Re=0;var Pt=re===""?".":re+":";if(fe(U))for(var lt=0;lt<U.length;lt++)re=U[lt],Be=Pt+q(re,lt),Re+=Xe(re,W,de,Be,Se);else if(lt=S(U),typeof lt=="function")for(U=lt.call(U),lt=0;!(re=U.next()).done;)re=re.value,Be=Pt+q(re,lt++),Re+=Xe(re,W,de,Be,Se);else if(Be==="object"){if(typeof U.then=="function")return Xe(At(U),W,de,re,Se);throw W=String(U),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Re}function X(U,W,de){if(U==null)return U;var re=[],Se=0;return Xe(U,re,"","",function(Be){return W.call(de,Be,Se++)}),re}function he(U){if(U._status===-1){var W=U._result;W=W(),W.then(function(de){(U._status===0||U._status===-1)&&(U._status=1,U._result=de)},function(de){(U._status===0||U._status===-1)&&(U._status=2,U._result=de)}),U._status===-1&&(U._status=0,U._result=W)}if(U._status===1)return U._result.default;throw U._result}var ye=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function Le(){}return Oe.Children={map:X,forEach:function(U,W,de){X(U,function(){W.apply(this,arguments)},de)},count:function(U){var W=0;return X(U,function(){W++}),W},toArray:function(U){return X(U,function(W){return W})||[]},only:function(U){if(!b(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Oe.Component=F,Oe.Fragment=n,Oe.Profiler=r,Oe.PureComponent=te,Oe.StrictMode=i,Oe.Suspense=m,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(U){return se.H.useMemoCache(U)}},Oe.cache=function(U){return function(){return U.apply(null,arguments)}},Oe.cloneElement=function(U,W,de){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var re=x({},U.props),Se=U.key,Be=void 0;if(W!=null)for(Re in W.ref!==void 0&&(Be=void 0),W.key!==void 0&&(Se=""+W.key),W)!pe.call(W,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&W.ref===void 0||(re[Re]=W[Re]);var Re=arguments.length-2;if(Re===1)re.children=de;else if(1<Re){for(var Pt=Array(Re),lt=0;lt<Re;lt++)Pt[lt]=arguments[lt+2];re.children=Pt}return k(U.type,Se,void 0,void 0,Be,re)},Oe.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},Oe.createElement=function(U,W,de){var re,Se={},Be=null;if(W!=null)for(re in W.key!==void 0&&(Be=""+W.key),W)pe.call(W,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(Se[re]=W[re]);var Re=arguments.length-2;if(Re===1)Se.children=de;else if(1<Re){for(var Pt=Array(Re),lt=0;lt<Re;lt++)Pt[lt]=arguments[lt+2];Se.children=Pt}if(U&&U.defaultProps)for(re in Re=U.defaultProps,Re)Se[re]===void 0&&(Se[re]=Re[re]);return k(U,Be,void 0,void 0,null,Se)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(U){return{$$typeof:h,render:U}},Oe.isValidElement=b,Oe.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:he}},Oe.memo=function(U,W){return{$$typeof:p,type:U,compare:W===void 0?null:W}},Oe.startTransition=function(U){var W=se.T,de={};se.T=de;try{var re=U(),Se=se.S;Se!==null&&Se(de,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(Le,ye)}catch(Be){ye(Be)}finally{se.T=W}},Oe.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},Oe.use=function(U){return se.H.use(U)},Oe.useActionState=function(U,W,de){return se.H.useActionState(U,W,de)},Oe.useCallback=function(U,W){return se.H.useCallback(U,W)},Oe.useContext=function(U){return se.H.useContext(U)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(U,W){return se.H.useDeferredValue(U,W)},Oe.useEffect=function(U,W,de){var re=se.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(U,W)},Oe.useId=function(){return se.H.useId()},Oe.useImperativeHandle=function(U,W,de){return se.H.useImperativeHandle(U,W,de)},Oe.useInsertionEffect=function(U,W){return se.H.useInsertionEffect(U,W)},Oe.useLayoutEffect=function(U,W){return se.H.useLayoutEffect(U,W)},Oe.useMemo=function(U,W){return se.H.useMemo(U,W)},Oe.useOptimistic=function(U,W){return se.H.useOptimistic(U,W)},Oe.useReducer=function(U,W,de){return se.H.useReducer(U,W,de)},Oe.useRef=function(U){return se.H.useRef(U)},Oe.useState=function(U){return se.H.useState(U)},Oe.useSyncExternalStore=function(U,W,de){return se.H.useSyncExternalStore(U,W,de)},Oe.useTransition=function(){return se.H.useTransition()},Oe.version="19.1.1",Oe}var z_;function wm(){return z_||(z_=1,_p.exports=TI()),_p.exports}var Ae=wm();const di=L0(Ae);var Tp={exports:{}},Wl={},Ep={exports:{}},Sp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function EI(){return H_||(H_=1,function(t){function e(X,he){var ye=X.length;X.push(he);e:for(;0<ye;){var Le=ye-1>>>1,U=X[Le];if(0<r(U,he))X[Le]=he,X[ye]=U,ye=Le;else break e}}function n(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var he=X[0],ye=X.pop();if(ye!==he){X[0]=ye;e:for(var Le=0,U=X.length,W=U>>>1;Le<W;){var de=2*(Le+1)-1,re=X[de],Se=de+1,Be=X[Se];if(0>r(re,ye))Se<U&&0>r(Be,re)?(X[Le]=Be,X[Se]=ye,Le=Se):(X[Le]=re,X[de]=ye,Le=de);else if(Se<U&&0>r(Be,ye))X[Le]=Be,X[Se]=ye,Le=Se;else break e}}return he}function r(X,he){var ye=X.sortIndex-he.sortIndex;return ye!==0?ye:X.id-he.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var m=[],p=[],v=1,E=null,S=3,I=!1,x=!1,O=!1,F=!1,oe=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function fe(X){for(var he=n(p);he!==null;){if(he.callback===null)i(p);else if(he.startTime<=X)i(p),he.sortIndex=he.expirationTime,e(m,he);else break;he=n(p)}}function se(X){if(O=!1,fe(X),!x)if(n(m)!==null)x=!0,pe||(pe=!0,q());else{var he=n(p);he!==null&&Xe(se,he.startTime-X)}}var pe=!1,k=-1,M=5,b=-1;function V(){return F?!0:!(t.unstable_now()-b<M)}function N(){if(F=!1,pe){var X=t.unstable_now();b=X;var he=!0;try{e:{x=!1,O&&(O=!1,te(k),k=-1),I=!0;var ye=S;try{t:{for(fe(X),E=n(m);E!==null&&!(E.expirationTime>X&&V());){var Le=E.callback;if(typeof Le=="function"){E.callback=null,S=E.priorityLevel;var U=Le(E.expirationTime<=X);if(X=t.unstable_now(),typeof U=="function"){E.callback=U,fe(X),he=!0;break t}E===n(m)&&i(m),fe(X)}else i(m);E=n(m)}if(E!==null)he=!0;else{var W=n(p);W!==null&&Xe(se,W.startTime-X),he=!1}}break e}finally{E=null,S=ye,I=!1}he=void 0}}finally{he?q():pe=!1}}}var q;if(typeof ne=="function")q=function(){ne(N)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,At=P.port2;P.port1.onmessage=N,q=function(){At.postMessage(null)}}else q=function(){oe(N,0)};function Xe(X,he){k=oe(function(){X(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(X){switch(S){case 1:case 2:case 3:var he=3;break;default:he=S}var ye=S;S=he;try{return X()}finally{S=ye}},t.unstable_requestPaint=function(){F=!0},t.unstable_runWithPriority=function(X,he){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ye=S;S=X;try{return he()}finally{S=ye}},t.unstable_scheduleCallback=function(X,he,ye){var Le=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Le+ye:Le):ye=Le,X){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ye+U,X={id:v++,callback:he,priorityLevel:X,startTime:ye,expirationTime:U,sortIndex:-1},ye>Le?(X.sortIndex=ye,e(p,X),n(m)===null&&X===n(p)&&(O?(te(k),k=-1):O=!0,Xe(se,ye-Le))):(X.sortIndex=U,e(m,X),x||I||(x=!0,pe||(pe=!0,q()))),X},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(X){var he=S;return function(){var ye=S;S=he;try{return X.apply(this,arguments)}finally{S=ye}}}}(Sp)),Sp}var $_;function SI(){return $_||($_=1,Ep.exports=EI()),Ep.exports}var Ap={exports:{}},En={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function AI(){if(Y_)return En;Y_=1;var t=wm();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(m,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:m,containerInfo:p,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return En.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,En.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(m,p,null,v)},En.flushSync=function(m){var p=c.T,v=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=v,i.d.f()}},En.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},En.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},En.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,E=h(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:I}):v==="script"&&i.d.X(m,{crossOrigin:E,integrity:S,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},En.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},En.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=h(v,p.crossOrigin);i.d.L(m,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},En.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=h(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},En.requestFormReset=function(m){i.d.r(m)},En.unstable_batchedUpdates=function(m,p){return m(p)},En.useFormState=function(m,p,v){return c.H.useFormState(m,p,v)},En.useFormStatus=function(){return c.H.useHostTransitionStatus()},En.version="19.1.1",En}var K_;function CI(){if(K_)return Ap.exports;K_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ap.exports=AI(),Ap.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function wI(){if(J_)return Wl;J_=1;var t=SI(),e=wm(),n=CI();function i(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,l=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(l=s.return),o=s.return;while(o)}return s.tag===3?l:null}function c(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function h(o){if(a(o)!==o)throw Error(i(188))}function m(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(i(188));return s!==o?null:o}for(var l=o,d=s;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(d=y.return,d!==null){l=d;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return h(y),o;if(_===d)return h(y),s;_=_.sibling}throw Error(i(188))}if(l.return!==d.return)l=y,d=_;else{for(var C=!1,w=y.child;w;){if(w===l){C=!0,l=y,d=_;break}if(w===d){C=!0,d=y,l=_;break}w=w.sibling}if(!C){for(w=_.child;w;){if(w===l){C=!0,l=_,d=y;break}if(w===d){C=!0,d=_,l=y;break}w=w.sibling}if(!C)throw Error(i(189))}}if(l.alternate!==d)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?o:s}function p(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=p(o),s!==null)return s;o=o.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),oe=Symbol.for("react.provider"),te=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function q(o){return o===null||typeof o!="object"?null:(o=N&&o[N]||o["@@iterator"],typeof o=="function"?o:null)}var P=Symbol.for("react.client.reference");function At(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===P?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case x:return"Fragment";case F:return"Profiler";case O:return"StrictMode";case se:return"Suspense";case pe:return"SuspenseList";case b:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case I:return"Portal";case ne:return(o.displayName||"Context")+".Provider";case te:return(o._context.displayName||"Context")+".Consumer";case fe:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case k:return s=o.displayName||null,s!==null?s:At(o.type)||"Memo";case M:s=o._payload,o=o._init;try{return At(o(s))}catch{}}return null}var Xe=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Le=[],U=-1;function W(o){return{current:o}}function de(o){0>U||(o.current=Le[U],Le[U]=null,U--)}function re(o,s){U++,Le[U]=o.current,o.current=s}var Se=W(null),Be=W(null),Re=W(null),Pt=W(null);function lt(o,s){switch(re(Re,s),re(Be,o),re(Se,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?p_(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=p_(s),o=m_(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}de(Se),re(Se,o)}function Wn(){de(Se),de(Be),de(Re)}function Ri(o){o.memoizedState!==null&&re(Pt,o);var s=Se.current,l=m_(s,o.type);s!==l&&(re(Be,o),re(Se,l))}function pi(o){Be.current===o&&(de(Se),de(Be)),Pt.current===o&&(de(Pt),$l._currentValue=ye)}var ji=Object.prototype.hasOwnProperty,eo=t.unstable_scheduleCallback,mi=t.unstable_cancelCallback,to=t.unstable_shouldYield,Is=t.unstable_requestPaint,Pn=t.unstable_now,Qa=t.unstable_getCurrentPriorityLevel,Dr=t.unstable_ImmediatePriority,Zn=t.unstable_UserBlockingPriority,jn=t.unstable_NormalPriority,Rs=t.unstable_LowPriority,qo=t.unstable_IdlePriority,no=t.log,xs=t.unstable_setDisableYieldValue,ut=null,st=null;function Rn(o){if(typeof no=="function"&&xs(o),st&&typeof st.setStrictMode=="function")try{st.setStrictMode(ut,o)}catch{}}var Kt=Math.clz32?Math.clz32:ie,_n=Math.log,J=Math.LN2;function ie(o){return o>>>=0,o===0?32:31-(_n(o)/J|0)|0}var ae=256,me=4194304;function we(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ke(o,s,l){var d=o.pendingLanes;if(d===0)return 0;var y=0,_=o.suspendedLanes,C=o.pingedLanes;o=o.warmLanes;var w=d&134217727;return w!==0?(d=w&~_,d!==0?y=we(d):(C&=w,C!==0?y=we(C):l||(l=w&~o,l!==0&&(y=we(l))))):(w=d&~_,w!==0?y=we(w):C!==0?y=we(C):l||(l=d&~o,l!==0&&(y=we(l)))),y===0?0:s!==0&&s!==y&&(s&_)===0&&(_=y&-y,l=s&-s,_>=l||_===32&&(l&4194048)!==0)?s:y}function Fe(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function Ke(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ct(){var o=ae;return ae<<=1,(ae&4194048)===0&&(ae=256),o}function Ut(){var o=me;return me<<=1,(me&62914560)===0&&(me=4194304),o}function mt(o){for(var s=[],l=0;31>l;l++)s.push(o);return s}function Ue(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function He(o,s,l,d,y,_){var C=o.pendingLanes;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=l,o.entangledLanes&=l,o.errorRecoveryDisabledLanes&=l,o.shellSuspendCounter=0;var w=o.entanglements,D=o.expirationTimes,$=o.hiddenUpdates;for(l=C&~l;0<l;){var Z=31-Kt(l),ee=1<<Z;w[Z]=0,D[Z]=-1;var Y=$[Z];if(Y!==null)for($[Z]=null,Z=0;Z<Y.length;Z++){var K=Y[Z];K!==null&&(K.lane&=-536870913)}l&=~ee}d!==0&&nt(o,d,0),_!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=_&~(C&~s))}function nt(o,s,l){o.pendingLanes|=s,o.suspendedLanes&=~s;var d=31-Kt(s);o.entangledLanes|=s,o.entanglements[d]=o.entanglements[d]|1073741824|l&4194090}function qe(o,s){var l=o.entangledLanes|=s;for(o=o.entanglements;l;){var d=31-Kt(l),y=1<<d;y&s|o[d]&s&&(o[d]|=s),l&=~y}}function Ve(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function ct(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function tn(){var o=he.p;return o!==0?o:(o=window.event,o===void 0?32:P_(o.type))}function Go(o,s){var l=he.p;try{return he.p=o,s()}finally{he.p=l}}var it=Math.random().toString(36).slice(2),Jt="__reactFiber$"+it,Gt="__reactProps$"+it,ei="__reactContainer$"+it,Xa="__reactEvents$"+it,Ed="__reactListeners$"+it,zo="__reactHandles$"+it,Lu="__reactResources$"+it,Pr="__reactMarker$"+it;function Ho(o){delete o[Jt],delete o[Gt],delete o[Xa],delete o[Ed],delete o[zo]}function io(o){var s=o[Jt];if(s)return s;for(var l=o.parentNode;l;){if(s=l[ei]||l[Jt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(o=__(o);o!==null;){if(l=o[Jt])return l;o=__(o)}return s}o=l,l=o.parentNode}return null}function xi(o){if(o=o[Jt]||o[ei]){var s=o.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return o}return null}function bi(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(i(33))}function xn(o){var s=o[Lu];return s||(s=o[Lu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ot(o){o[Pr]=!0}var Wa=new Set,bs={};function gi(o,s){oo(o,s),oo(o+"Capture",s)}function oo(o,s){for(bs[o]=s,o=0;o<s.length;o++)Wa.add(s[o])}var Uu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ou={},Vr={};function Bu(o){return ji.call(Vr,o)?!0:ji.call(Ou,o)?!1:Uu.test(o)?Vr[o]=!0:(Ou[o]=!0,!1)}function $o(o,s,l){if(Bu(s))if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+l)}}function Mi(o,s,l){if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+l)}}function un(o,s,l,d){if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttributeNS(s,l,""+d)}}var Lr,Fu;function ro(o){if(Lr===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Lr=s&&s[1]||"",Fu=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Lr+o+Fu}var Ms=!1;function Ns(o,s){if(!o||Ms)return"";Ms=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var Y=K}Reflect.construct(o,[],ee)}else{try{ee.call()}catch(K){Y=K}o.call(ee.prototype)}}else{try{throw Error()}catch(K){Y=K}(ee=o())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=d.DetermineComponentFrameRoot(),C=_[0],w=_[1];if(C&&w){var D=C.split(`
`),$=w.split(`
`);for(y=d=0;d<D.length&&!D[d].includes("DetermineComponentFrameRoot");)d++;for(;y<$.length&&!$[y].includes("DetermineComponentFrameRoot");)y++;if(d===D.length||y===$.length)for(d=D.length-1,y=$.length-1;1<=d&&0<=y&&D[d]!==$[y];)y--;for(;1<=d&&0<=y;d--,y--)if(D[d]!==$[y]){if(d!==1||y!==1)do if(d--,y--,0>y||D[d]!==$[y]){var Z=`
`+D[d].replace(" at new "," at ");return o.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",o.displayName)),Z}while(1<=d&&0<=y);break}}}finally{Ms=!1,Error.prepareStackTrace=l}return(l=o?o.displayName||o.name:"")?ro(l):""}function Za(o){switch(o.tag){case 26:case 27:case 5:return ro(o.type);case 16:return ro("Lazy");case 13:return ro("Suspense");case 19:return ro("SuspenseList");case 0:case 15:return Ns(o.type,!1);case 11:return Ns(o.type.render,!1);case 1:return Ns(o.type,!0);case 31:return ro("Activity");default:return""}}function ks(o){try{var s="";do s+=Za(o),o=o.return;while(o);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function bn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function ja(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Sd(o){var s=ja(o)?"checked":"value",l=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),d=""+o[s];if(!o.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var y=l.get,_=l.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return y.call(this)},set:function(C){d=""+C,_.call(this,C)}}),Object.defineProperty(o,s,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function Ds(o){o._valueTracker||(o._valueTracker=Sd(o))}function el(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return o&&(d=ja(o)?o.checked?"true":"false":o.value),o=d,o!==l?(s.setValue(o),!0):!1}function Ur(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Ad=/[\n"\\]/g;function zt(o){return o.replace(Ad,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Fn(o,s,l,d,y,_,C,w){o.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?o.type=C:o.removeAttribute("type"),s!=null?C==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+bn(s)):o.value!==""+bn(s)&&(o.value=""+bn(s)):C!=="submit"&&C!=="reset"||o.removeAttribute("value"),s!=null?Yo(o,C,bn(s)):l!=null?Yo(o,C,bn(l)):d!=null&&o.removeAttribute("value"),y==null&&_!=null&&(o.defaultChecked=!!_),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?o.name=""+bn(w):o.removeAttribute("name")}function Or(o,s,l,d,y,_,C,w){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),s!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||s!=null))return;l=l!=null?""+bn(l):"",s=s!=null?""+bn(s):l,w||s===o.value||(o.value=s),o.defaultValue=s}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=w?o.checked:!!d,o.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.name=C)}function Yo(o,s,l){s==="number"&&Ur(o.ownerDocument)===o||o.defaultValue===""+l||(o.defaultValue=""+l)}function so(o,s,l,d){if(o=o.options,s){s={};for(var y=0;y<l.length;y++)s["$"+l[y]]=!0;for(l=0;l<o.length;l++)y=s.hasOwnProperty("$"+o[l].value),o[l].selected!==y&&(o[l].selected=y),y&&d&&(o[l].defaultSelected=!0)}else{for(l=""+bn(l),s=null,y=0;y<o.length;y++){if(o[y].value===l){o[y].selected=!0,d&&(o[y].defaultSelected=!0);return}s!==null||o[y].disabled||(s=o[y])}s!==null&&(s.selected=!0)}}function _t(o,s,l){if(s!=null&&(s=""+bn(s),s!==o.value&&(o.value=s),l==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=l!=null?""+bn(l):""}function Br(o,s,l,d){if(s==null){if(d!=null){if(l!=null)throw Error(i(92));if(Xe(d)){if(1<d.length)throw Error(i(93));d=d[0]}l=d}l==null&&(l=""),s=l}l=bn(s),o.defaultValue=l,d=o.textContent,d===l&&d!==""&&d!==null&&(o.value=d)}function ti(o,s){if(s){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=s;return}}o.textContent=s}var Fr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qu(o,s,l){var d=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":d?o.setProperty(s,l):typeof l!="number"||l===0||Fr.has(s)?s==="float"?o.cssFloat=l:o[s]=(""+l).trim():o[s]=l+"px"}function tl(o,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(o=o.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var y in s)d=s[y],s.hasOwnProperty(y)&&l[y]!==d&&qu(o,y,d)}else for(var _ in s)s.hasOwnProperty(_)&&qu(o,_,s[_])}function nl(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ps(o){return wd.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var ao=null;function ni(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var lo=null,uo=null;function il(o){var s=xi(o);if(s&&(o=s.stateNode)){var l=o[Gt]||null;e:switch(o=s.stateNode,s.type){case"input":if(Fn(o,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+zt(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==o&&d.form===o.form){var y=d[Gt]||null;if(!y)throw Error(i(90));Fn(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<l.length;s++)d=l[s],d.form===o.form&&el(d)}break e;case"textarea":_t(o,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&so(o,!!l.multiple,s,!1)}}}var Ni=!1;function Gu(o,s,l){if(Ni)return o(s,l);Ni=!0;try{var d=o(s);return d}finally{if(Ni=!1,(lo!==null||uo!==null)&&(Vc(),lo&&(s=lo,o=uo,uo=lo=null,il(s),o)))for(s=0;s<o.length;s++)il(o[s])}}function qr(o,s){var l=o.stateNode;if(l===null)return null;var d=l[Gt]||null;if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ii=!1;if(yi)try{var Gr={};Object.defineProperty(Gr,"passive",{get:function(){ii=!0}}),window.addEventListener("test",Gr,Gr),window.removeEventListener("test",Gr,Gr)}catch{ii=!1}var ki=null,Ko=null,co=null;function ol(){if(co)return co;var o,s=Ko,l=s.length,d,y="value"in ki?ki.value:ki.textContent,_=y.length;for(o=0;o<l&&s[o]===y[o];o++);var C=l-o;for(d=1;d<=C&&s[l-d]===y[_-d];d++);return co=y.slice(o,1<d?1-d:void 0)}function Di(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function Pi(){return!0}function rl(){return!1}function nn(o){function s(l,d,y,_,C){this._reactName=l,this._targetInst=y,this.type=d,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var w in o)o.hasOwnProperty(w)&&(l=o[w],this[w]=l?l(_):_[w]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Pi:rl,this.isPropagationStopped=rl,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),s}var ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vs=nn(ft),zr=v({},ft,{view:0,detail:0}),zu=nn(zr),Ls,Us,Vi,Hr=v({},zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kr,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Vi&&(Vi&&o.type==="mousemove"?(Ls=o.screenX-Vi.screenX,Us=o.screenY-Vi.screenY):Us=Ls=0,Vi=o),Ls)},movementY:function(o){return"movementY"in o?o.movementY:Us}}),oi=nn(Hr),Hu=v({},Hr,{dataTransfer:0}),Id=nn(Hu),$r=v({},zr,{relatedTarget:0}),Os=nn($r),sl=v({},ft,{animationName:0,elapsedTime:0,pseudoElement:0}),Bs=nn(sl),$u=v({},ft,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Fs=nn($u),Rd=v({},ft,{data:0}),al=nn(Rd),Yr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ku={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ll(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=Ku[o])?!!s[o]:!1}function Kr(){return ll}var Ju=v({},zr,{key:function(o){if(o.key){var s=Yr[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=Di(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Yu[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kr,charCode:function(o){return o.type==="keypress"?Di(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Di(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),qs=nn(Ju),Qu=v({},Hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ul=nn(Qu),fo=v({},zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kr}),Xu=nn(fo),Wu=v({},ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zu=nn(Wu),ju=v({},Hr,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Gs=nn(ju),Mn=v({},ft,{newState:0,oldState:0}),ec=nn(Mn),tc=[9,13,27,32],Li=yi&&"CompositionEvent"in window,g=null;yi&&"documentMode"in document&&(g=document.documentMode);var T=yi&&"TextEvent"in window&&!g,A=yi&&(!Li||g&&8<g&&11>=g),R=" ",z=!1;function Q(o,s){switch(o){case"keyup":return tc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ze=!1;function Qt(o,s){switch(o){case"compositionend":return ce(s);case"keypress":return s.which!==32?null:(z=!0,R);case"textInput":return o=s.data,o===R&&z?null:o;default:return null}}function je(o,s){if(Ze)return o==="compositionend"||!Li&&Q(o,s)?(o=ol(),co=Ko=ki=null,Ze=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return A&&s.locale!=="ko"?null:s.data;default:return null}}var on={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xt(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!on[o.type]:s==="textarea"}function ho(o,s,l,d){lo?uo?uo.push(d):uo=[d]:lo=d,s=qc(s,"onChange"),0<s.length&&(l=new Vs("onChange","change",null,l,d),o.push({event:l,listeners:s}))}var cn=null,Ui=null;function cl(o){u_(o,0)}function nc(o){var s=bi(o);if(el(s))return o}function Mg(o,s){if(o==="change")return s}var Ng=!1;if(yi){var xd;if(yi){var bd="oninput"in document;if(!bd){var kg=document.createElement("div");kg.setAttribute("oninput","return;"),bd=typeof kg.oninput=="function"}xd=bd}else xd=!1;Ng=xd&&(!document.documentMode||9<document.documentMode)}function Dg(){cn&&(cn.detachEvent("onpropertychange",Pg),Ui=cn=null)}function Pg(o){if(o.propertyName==="value"&&nc(Ui)){var s=[];ho(s,Ui,o,ni(o)),Gu(cl,s)}}function YC(o,s,l){o==="focusin"?(Dg(),cn=s,Ui=l,cn.attachEvent("onpropertychange",Pg)):o==="focusout"&&Dg()}function KC(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return nc(Ui)}function JC(o,s){if(o==="click")return nc(s)}function QC(o,s){if(o==="input"||o==="change")return nc(s)}function XC(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var qn=typeof Object.is=="function"?Object.is:XC;function fl(o,s){if(qn(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var l=Object.keys(o),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var y=l[d];if(!ji.call(s,y)||!qn(o[y],s[y]))return!1}return!0}function Vg(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Lg(o,s){var l=Vg(o);o=0;for(var d;l;){if(l.nodeType===3){if(d=o+l.textContent.length,o<=s&&d>=s)return{node:l,offset:s-o};o=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Vg(l)}}function Ug(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?Ug(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function Og(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=Ur(o.document);s instanceof o.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)o=s.contentWindow;else break;s=Ur(o.document)}return s}function Md(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var WC=yi&&"documentMode"in document&&11>=document.documentMode,zs=null,Nd=null,dl=null,kd=!1;function Bg(o,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;kd||zs==null||zs!==Ur(d)||(d=zs,"selectionStart"in d&&Md(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),dl&&fl(dl,d)||(dl=d,d=qc(Nd,"onSelect"),0<d.length&&(s=new Vs("onSelect","select",null,s,l),o.push({event:s,listeners:d}),s.target=zs)))}function Jr(o,s){var l={};return l[o.toLowerCase()]=s.toLowerCase(),l["Webkit"+o]="webkit"+s,l["Moz"+o]="moz"+s,l}var Hs={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},Dd={},Fg={};yi&&(Fg=document.createElement("div").style,"AnimationEvent"in window||(delete Hs.animationend.animation,delete Hs.animationiteration.animation,delete Hs.animationstart.animation),"TransitionEvent"in window||delete Hs.transitionend.transition);function Qr(o){if(Dd[o])return Dd[o];if(!Hs[o])return o;var s=Hs[o],l;for(l in s)if(s.hasOwnProperty(l)&&l in Fg)return Dd[o]=s[l];return o}var qg=Qr("animationend"),Gg=Qr("animationiteration"),zg=Qr("animationstart"),ZC=Qr("transitionrun"),jC=Qr("transitionstart"),ew=Qr("transitioncancel"),Hg=Qr("transitionend"),$g=new Map,Pd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pd.push("scrollEnd");function vi(o,s){$g.set(o,s),gi(s,[o])}var Yg=new WeakMap;function ri(o,s){if(typeof o=="object"&&o!==null){var l=Yg.get(o);return l!==void 0?l:(s={value:o,source:s,stack:ks(s)},Yg.set(o,s),s)}return{value:o,source:s,stack:ks(s)}}var si=[],$s=0,Vd=0;function ic(){for(var o=$s,s=Vd=$s=0;s<o;){var l=si[s];si[s++]=null;var d=si[s];si[s++]=null;var y=si[s];si[s++]=null;var _=si[s];if(si[s++]=null,d!==null&&y!==null){var C=d.pending;C===null?y.next=y:(y.next=C.next,C.next=y),d.pending=y}_!==0&&Kg(l,y,_)}}function oc(o,s,l,d){si[$s++]=o,si[$s++]=s,si[$s++]=l,si[$s++]=d,Vd|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function Ld(o,s,l,d){return oc(o,s,l,d),rc(o)}function Ys(o,s){return oc(o,null,null,s),rc(o)}function Kg(o,s,l){o.lanes|=l;var d=o.alternate;d!==null&&(d.lanes|=l);for(var y=!1,_=o.return;_!==null;)_.childLanes|=l,d=_.alternate,d!==null&&(d.childLanes|=l),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(y=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,y&&s!==null&&(y=31-Kt(l),o=_.hiddenUpdates,d=o[y],d===null?o[y]=[s]:d.push(s),s.lane=l|536870912),_):null}function rc(o){if(50<Ul)throw Ul=0,Gh=null,Error(i(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var Ks={};function tw(o,s,l,d){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(o,s,l,d){return new tw(o,s,l,d)}function Ud(o){return o=o.prototype,!(!o||!o.isReactComponent)}function po(o,s){var l=o.alternate;return l===null?(l=Gn(o.tag,s,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=s,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&65011712,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l.refCleanup=o.refCleanup,l}function Jg(o,s){o.flags&=65011714;var l=o.alternate;return l===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,s=l.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function sc(o,s,l,d,y,_){var C=0;if(d=o,typeof o=="function")Ud(o)&&(C=1);else if(typeof o=="string")C=iI(o,l,Se.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case b:return o=Gn(31,l,s,y),o.elementType=b,o.lanes=_,o;case x:return Xr(l.children,y,_,s);case O:C=8,y|=24;break;case F:return o=Gn(12,l,s,y|2),o.elementType=F,o.lanes=_,o;case se:return o=Gn(13,l,s,y),o.elementType=se,o.lanes=_,o;case pe:return o=Gn(19,l,s,y),o.elementType=pe,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case oe:case ne:C=10;break e;case te:C=9;break e;case fe:C=11;break e;case k:C=14;break e;case M:C=16,d=null;break e}C=29,l=Error(i(130,o===null?"null":typeof o,"")),d=null}return s=Gn(C,l,s,y),s.elementType=o,s.type=d,s.lanes=_,s}function Xr(o,s,l,d){return o=Gn(7,o,d,s),o.lanes=l,o}function Od(o,s,l){return o=Gn(6,o,null,s),o.lanes=l,o}function Bd(o,s,l){return s=Gn(4,o.children!==null?o.children:[],o.key,s),s.lanes=l,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var Js=[],Qs=0,ac=null,lc=0,ai=[],li=0,Wr=null,mo=1,go="";function Zr(o,s){Js[Qs++]=lc,Js[Qs++]=ac,ac=o,lc=s}function Qg(o,s,l){ai[li++]=mo,ai[li++]=go,ai[li++]=Wr,Wr=o;var d=mo;o=go;var y=32-Kt(d)-1;d&=~(1<<y),l+=1;var _=32-Kt(s)+y;if(30<_){var C=y-y%5;_=(d&(1<<C)-1).toString(32),d>>=C,y-=C,mo=1<<32-Kt(s)+y|l<<y|d,go=_+o}else mo=1<<_|l<<y|d,go=o}function Fd(o){o.return!==null&&(Zr(o,1),Qg(o,1,0))}function qd(o){for(;o===ac;)ac=Js[--Qs],Js[Qs]=null,lc=Js[--Qs],Js[Qs]=null;for(;o===Wr;)Wr=ai[--li],ai[li]=null,go=ai[--li],ai[li]=null,mo=ai[--li],ai[li]=null}var Nn=null,Vt=null,at=!1,jr=null,Oi=!1,Gd=Error(i(519));function es(o){var s=Error(i(418,""));throw ml(ri(s,o)),Gd}function Xg(o){var s=o.stateNode,l=o.type,d=o.memoizedProps;switch(s[Jt]=o,s[Gt]=d,l){case"dialog":Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":case"embed":Ye("load",s);break;case"video":case"audio":for(l=0;l<Bl.length;l++)Ye(Bl[l],s);break;case"source":Ye("error",s);break;case"img":case"image":case"link":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"input":Ye("invalid",s),Or(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Ds(s);break;case"select":Ye("invalid",s);break;case"textarea":Ye("invalid",s),Br(s,d.value,d.defaultValue,d.children),Ds(s)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||d.suppressHydrationWarning===!0||h_(s.textContent,l)?(d.popover!=null&&(Ye("beforetoggle",s),Ye("toggle",s)),d.onScroll!=null&&Ye("scroll",s),d.onScrollEnd!=null&&Ye("scrollend",s),d.onClick!=null&&(s.onclick=Gc),s=!0):s=!1,s||es(o)}function Wg(o){for(Nn=o.return;Nn;)switch(Nn.tag){case 5:case 13:Oi=!1;return;case 27:case 3:Oi=!0;return;default:Nn=Nn.return}}function hl(o){if(o!==Nn)return!1;if(!at)return Wg(o),at=!0,!1;var s=o.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=o.type,l=!(l!=="form"&&l!=="button")||op(o.type,o.memoizedProps)),l=!l),l&&Vt&&es(o),Wg(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8)if(l=o.data,l==="/$"){if(s===0){Vt=Ti(o.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;o=o.nextSibling}Vt=null}}else s===27?(s=Vt,ur(o.type)?(o=lp,lp=null,Vt=o):Vt=s):Vt=Nn?Ti(o.stateNode.nextSibling):null;return!0}function pl(){Vt=Nn=null,at=!1}function Zg(){var o=jr;return o!==null&&(Un===null?Un=o:Un.push.apply(Un,o),jr=null),o}function ml(o){jr===null?jr=[o]:jr.push(o)}var zd=W(null),ts=null,yo=null;function Jo(o,s,l){re(zd,s._currentValue),s._currentValue=l}function vo(o){o._currentValue=zd.current,de(zd)}function Hd(o,s,l){for(;o!==null;){var d=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),o===l)break;o=o.return}}function $d(o,s,l,d){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var _=y.dependencies;if(_!==null){var C=y.child;_=_.firstContext;e:for(;_!==null;){var w=_;_=y;for(var D=0;D<s.length;D++)if(w.context===s[D]){_.lanes|=l,w=_.alternate,w!==null&&(w.lanes|=l),Hd(_.return,l,o),d||(C=null);break e}_=w.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(i(341));C.lanes|=l,_=C.alternate,_!==null&&(_.lanes|=l),Hd(C,l,o),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===o){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function gl(o,s,l,d){o=null;for(var y=s,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var w=y.type;qn(y.pendingProps.value,C.value)||(o!==null?o.push(w):o=[w])}}else if(y===Pt.current){if(C=y.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push($l):o=[$l])}y=y.return}o!==null&&$d(s,o,l,d),s.flags|=262144}function uc(o){for(o=o.firstContext;o!==null;){if(!qn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ns(o){ts=o,yo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Tn(o){return jg(ts,o)}function cc(o,s){return ts===null&&ns(o),jg(o,s)}function jg(o,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},yo===null){if(o===null)throw Error(i(308));yo=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else yo=yo.next=s;return l}var nw=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(l,d){o.push(d)}};this.abort=function(){s.aborted=!0,o.forEach(function(l){return l()})}},iw=t.unstable_scheduleCallback,ow=t.unstable_NormalPriority,Wt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yd(){return{controller:new nw,data:new Map,refCount:0}}function yl(o){o.refCount--,o.refCount===0&&iw(ow,function(){o.controller.abort()})}var vl=null,Kd=0,Xs=0,Ws=null;function rw(o,s){if(vl===null){var l=vl=[];Kd=0,Xs=Qh(),Ws={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Kd++,s.then(ey,ey),s}function ey(){if(--Kd===0&&vl!==null){Ws!==null&&(Ws.status="fulfilled");var o=vl;vl=null,Xs=0,Ws=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function sw(o,s){var l=[],d={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return o.then(function(){d.status="fulfilled",d.value=s;for(var y=0;y<l.length;y++)(0,l[y])(s)},function(y){for(d.status="rejected",d.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),d}var ty=X.S;X.S=function(o,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&rw(o,s),ty!==null&&ty(o,s)};var is=W(null);function Jd(){var o=is.current;return o!==null?o:Rt.pooledCache}function fc(o,s){s===null?re(is,is.current):re(is,s.pool)}function ny(){var o=Jd();return o===null?null:{parent:Wt._currentValue,pool:o}}var _l=Error(i(460)),iy=Error(i(474)),dc=Error(i(542)),Qd={then:function(){}};function oy(o){return o=o.status,o==="fulfilled"||o==="rejected"}function hc(){}function ry(o,s,l){switch(l=o[l],l===void 0?o.push(s):l!==s&&(s.then(hc,hc),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,ay(o),o;default:if(typeof s.status=="string")s.then(hc,hc);else{if(o=Rt,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=s,o.status="pending",o.then(function(d){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=d}},function(d){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,ay(o),o}throw Tl=s,_l}}var Tl=null;function sy(){if(Tl===null)throw Error(i(459));var o=Tl;return Tl=null,o}function ay(o){if(o===_l||o===dc)throw Error(i(483))}var Qo=!1;function Xd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wd(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Xo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Wo(o,s,l){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(gt&2)!==0){var y=d.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),d.pending=s,s=rc(o),Kg(o,null,l),s}return oc(o,d,s,l),rc(o)}function El(o,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var d=s.lanes;d&=o.pendingLanes,l|=d,s.lanes=l,qe(o,l)}}function Zd(o,s){var l=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=C:_=_.next=C,l=l.next}while(l!==null);_===null?y=_=s:_=_.next=s}else y=_=s;l={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:d.shared,callbacks:d.callbacks},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=s:o.next=s,l.lastBaseUpdate=s}var jd=!1;function Sl(){if(jd){var o=Ws;if(o!==null)throw o}}function Al(o,s,l,d){jd=!1;var y=o.updateQueue;Qo=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var D=w,$=D.next;D.next=null,C===null?_=$:C.next=$,C=D;var Z=o.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==C&&(w===null?Z.firstBaseUpdate=$:w.next=$,Z.lastBaseUpdate=D))}if(_!==null){var ee=y.baseState;C=0,Z=$=D=null,w=_;do{var Y=w.lane&-536870913,K=Y!==w.lane;if(K?(et&Y)===Y:(d&Y)===Y){Y!==0&&Y===Xs&&(jd=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var be=o,Ie=w;Y=s;var St=l;switch(Ie.tag){case 1:if(be=Ie.payload,typeof be=="function"){ee=be.call(St,ee,Y);break e}ee=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ie.payload,Y=typeof be=="function"?be.call(St,ee,Y):be,Y==null)break e;ee=v({},ee,Y);break e;case 2:Qo=!0}}Y=w.callback,Y!==null&&(o.flags|=64,K&&(o.flags|=8192),K=y.callbacks,K===null?y.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?($=Z=K,D=ee):Z=Z.next=K,C|=Y;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;K=w,w=K.next,K.next=null,y.lastBaseUpdate=K,y.shared.pending=null}}while(!0);Z===null&&(D=ee),y.baseState=D,y.firstBaseUpdate=$,y.lastBaseUpdate=Z,_===null&&(y.shared.lanes=0),rr|=C,o.lanes=C,o.memoizedState=ee}}function ly(o,s){if(typeof o!="function")throw Error(i(191,o));o.call(s)}function uy(o,s){var l=o.callbacks;if(l!==null)for(o.callbacks=null,o=0;o<l.length;o++)ly(l[o],s)}var Zs=W(null),pc=W(0);function cy(o,s){o=wo,re(pc,o),re(Zs,s),wo=o|s.baseLanes}function eh(){re(pc,wo),re(Zs,Zs.current)}function th(){wo=pc.current,de(Zs),de(pc)}var Zo=0,Ge=null,Tt=null,Ht=null,mc=!1,js=!1,os=!1,gc=0,Cl=0,ea=null,aw=0;function Bt(){throw Error(i(321))}function nh(o,s){if(s===null)return!1;for(var l=0;l<s.length&&l<o.length;l++)if(!qn(o[l],s[l]))return!1;return!0}function ih(o,s,l,d,y,_){return Zo=_,Ge=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=o===null||o.memoizedState===null?Ky:Jy,os=!1,_=l(d,y),os=!1,js&&(_=dy(s,l,d,y)),fy(o),_}function fy(o){X.H=Sc;var s=Tt!==null&&Tt.next!==null;if(Zo=0,Ht=Tt=Ge=null,mc=!1,Cl=0,ea=null,s)throw Error(i(300));o===null||rn||(o=o.dependencies,o!==null&&uc(o)&&(rn=!0))}function dy(o,s,l,d){Ge=o;var y=0;do{if(js&&(ea=null),Cl=0,js=!1,25<=y)throw Error(i(301));if(y+=1,Ht=Tt=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}X.H=pw,_=s(l,d)}while(js);return _}function lw(){var o=X.H,s=o.useState()[0];return s=typeof s.then=="function"?wl(s):s,o=o.useState()[0],(Tt!==null?Tt.memoizedState:null)!==o&&(Ge.flags|=1024),s}function oh(){var o=gc!==0;return gc=0,o}function rh(o,s,l){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~l}function sh(o){if(mc){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}mc=!1}Zo=0,Ht=Tt=Ge=null,js=!1,Cl=gc=0,ea=null}function Vn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Ge.memoizedState=Ht=o:Ht=Ht.next=o,Ht}function $t(){if(Tt===null){var o=Ge.alternate;o=o!==null?o.memoizedState:null}else o=Tt.next;var s=Ht===null?Ge.memoizedState:Ht.next;if(s!==null)Ht=s,Tt=o;else{if(o===null)throw Ge.alternate===null?Error(i(467)):Error(i(310));Tt=o,o={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Ht===null?Ge.memoizedState=Ht=o:Ht=Ht.next=o}return Ht}function ah(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(o){var s=Cl;return Cl+=1,ea===null&&(ea=[]),o=ry(ea,o,s),s=Ge,(Ht===null?s.memoizedState:Ht.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?Ky:Jy),o}function yc(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return wl(o);if(o.$$typeof===ne)return Tn(o)}throw Error(i(438,String(o)))}function lh(o){var s=null,l=Ge.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var d=Ge.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=ah(),Ge.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(o),d=0;d<o;d++)l[d]=V;return s.index++,l}function _o(o,s){return typeof s=="function"?s(o):s}function vc(o){var s=$t();return uh(s,Tt,o)}function uh(o,s,l){var d=o.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=l;var y=o.baseQueue,_=d.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}s.baseQueue=y=_,d.pending=null}if(_=o.baseState,y===null)o.memoizedState=_;else{s=y.next;var w=C=null,D=null,$=s,Z=!1;do{var ee=$.lane&-536870913;if(ee!==$.lane?(et&ee)===ee:(Zo&ee)===ee){var Y=$.revertLane;if(Y===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ee===Xs&&(Z=!0);else if((Zo&Y)===Y){$=$.next,Y===Xs&&(Z=!0);continue}else ee={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},D===null?(w=D=ee,C=_):D=D.next=ee,Ge.lanes|=Y,rr|=Y;ee=$.action,os&&l(_,ee),_=$.hasEagerState?$.eagerState:l(_,ee)}else Y={lane:ee,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},D===null?(w=D=Y,C=_):D=D.next=Y,Ge.lanes|=ee,rr|=ee;$=$.next}while($!==null&&$!==s);if(D===null?C=_:D.next=w,!qn(_,o.memoizedState)&&(rn=!0,Z&&(l=Ws,l!==null)))throw l;o.memoizedState=_,o.baseState=C,o.baseQueue=D,d.lastRenderedState=_}return y===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function ch(o){var s=$t(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=o;var d=l.dispatch,y=l.pending,_=s.memoizedState;if(y!==null){l.pending=null;var C=y=y.next;do _=o(_,C.action),C=C.next;while(C!==y);qn(_,s.memoizedState)||(rn=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),l.lastRenderedState=_}return[_,d]}function hy(o,s,l){var d=Ge,y=$t(),_=at;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=s();var C=!qn((Tt||y).memoizedState,l);C&&(y.memoizedState=l,rn=!0),y=y.queue;var w=gy.bind(null,d,y,o);if(Il(2048,8,w,[o]),y.getSnapshot!==s||C||Ht!==null&&Ht.memoizedState.tag&1){if(d.flags|=2048,ta(9,_c(),my.bind(null,d,y,l,s),null),Rt===null)throw Error(i(349));_||(Zo&124)!==0||py(d,s,l)}return l}function py(o,s,l){o.flags|=16384,o={getSnapshot:s,value:l},s=Ge.updateQueue,s===null?(s=ah(),Ge.updateQueue=s,s.stores=[o]):(l=s.stores,l===null?s.stores=[o]:l.push(o))}function my(o,s,l,d){s.value=l,s.getSnapshot=d,yy(s)&&vy(o)}function gy(o,s,l){return l(function(){yy(s)&&vy(o)})}function yy(o){var s=o.getSnapshot;o=o.value;try{var l=s();return!qn(o,l)}catch{return!0}}function vy(o){var s=Ys(o,2);s!==null&&Kn(s,o,2)}function fh(o){var s=Vn();if(typeof o=="function"){var l=o;if(o=l(),os){Rn(!0);try{l()}finally{Rn(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:o},s}function _y(o,s,l,d){return o.baseState=l,uh(o,Tt,typeof d=="function"?d:_o)}function uw(o,s,l,d,y){if(Ec(o))throw Error(i(485));if(o=s.action,o!==null){var _={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};X.T!==null?l(!0):_.isTransition=!1,d(_),l=s.pending,l===null?(_.next=s.pending=_,Ty(s,_)):(_.next=l.next,s.pending=l.next=_)}}function Ty(o,s){var l=s.action,d=s.payload,y=o.state;if(s.isTransition){var _=X.T,C={};X.T=C;try{var w=l(y,d),D=X.S;D!==null&&D(C,w),Ey(o,s,w)}catch($){dh(o,s,$)}finally{X.T=_}}else try{_=l(y,d),Ey(o,s,_)}catch($){dh(o,s,$)}}function Ey(o,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Sy(o,s,d)},function(d){return dh(o,s,d)}):Sy(o,s,l)}function Sy(o,s,l){s.status="fulfilled",s.value=l,Ay(s),o.state=l,s=o.pending,s!==null&&(l=s.next,l===s?o.pending=null:(l=l.next,s.next=l,Ty(o,l)))}function dh(o,s,l){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=l,Ay(s),s=s.next;while(s!==d)}o.action=null}function Ay(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function Cy(o,s){return s}function wy(o,s){if(at){var l=Rt.formState;if(l!==null){e:{var d=Ge;if(at){if(Vt){t:{for(var y=Vt,_=Oi;y.nodeType!==8;){if(!_){y=null;break t}if(y=Ti(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){Vt=Ti(y.nextSibling),d=y.data==="F!";break e}}es(d)}d=!1}d&&(s=l[0])}}return l=Vn(),l.memoizedState=l.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cy,lastRenderedState:s},l.queue=d,l=Hy.bind(null,Ge,d),d.dispatch=l,d=fh(!1),_=yh.bind(null,Ge,!1,d.queue),d=Vn(),y={state:s,dispatch:null,action:o,pending:null},d.queue=y,l=uw.bind(null,Ge,y,_,l),y.dispatch=l,d.memoizedState=o,[s,l,!1]}function Iy(o){var s=$t();return Ry(s,Tt,o)}function Ry(o,s,l){if(s=uh(o,s,Cy)[0],o=vc(_o)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=wl(s)}catch(C){throw C===_l?dc:C}else d=s;s=$t();var y=s.queue,_=y.dispatch;return l!==s.memoizedState&&(Ge.flags|=2048,ta(9,_c(),cw.bind(null,y,l),null)),[d,_,o]}function cw(o,s){o.action=s}function xy(o){var s=$t(),l=Tt;if(l!==null)return Ry(s,l,o);$t(),s=s.memoizedState,l=$t();var d=l.queue.dispatch;return l.memoizedState=o,[s,d,!1]}function ta(o,s,l,d){return o={tag:o,create:l,deps:d,inst:s,next:null},s=Ge.updateQueue,s===null&&(s=ah(),Ge.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=o.next=o:(d=l.next,l.next=o,o.next=d,s.lastEffect=o),o}function _c(){return{destroy:void 0,resource:void 0}}function by(){return $t().memoizedState}function Tc(o,s,l,d){var y=Vn();d=d===void 0?null:d,Ge.flags|=o,y.memoizedState=ta(1|s,_c(),l,d)}function Il(o,s,l,d){var y=$t();d=d===void 0?null:d;var _=y.memoizedState.inst;Tt!==null&&d!==null&&nh(d,Tt.memoizedState.deps)?y.memoizedState=ta(s,_,l,d):(Ge.flags|=o,y.memoizedState=ta(1|s,_,l,d))}function My(o,s){Tc(8390656,8,o,s)}function Ny(o,s){Il(2048,8,o,s)}function ky(o,s){return Il(4,2,o,s)}function Dy(o,s){return Il(4,4,o,s)}function Py(o,s){if(typeof s=="function"){o=o();var l=s(o);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function Vy(o,s,l){l=l!=null?l.concat([o]):null,Il(4,4,Py.bind(null,s,o),l)}function hh(){}function Ly(o,s){var l=$t();s=s===void 0?null:s;var d=l.memoizedState;return s!==null&&nh(s,d[1])?d[0]:(l.memoizedState=[o,s],o)}function Uy(o,s){var l=$t();s=s===void 0?null:s;var d=l.memoizedState;if(s!==null&&nh(s,d[1]))return d[0];if(d=o(),os){Rn(!0);try{o()}finally{Rn(!1)}}return l.memoizedState=[d,s],d}function ph(o,s,l){return l===void 0||(Zo&1073741824)!==0?o.memoizedState=s:(o.memoizedState=l,o=Fv(),Ge.lanes|=o,rr|=o,l)}function Oy(o,s,l,d){return qn(l,s)?l:Zs.current!==null?(o=ph(o,l,d),qn(o,s)||(rn=!0),o):(Zo&42)===0?(rn=!0,o.memoizedState=l):(o=Fv(),Ge.lanes|=o,rr|=o,s)}function By(o,s,l,d,y){var _=he.p;he.p=_!==0&&8>_?_:8;var C=X.T,w={};X.T=w,yh(o,!1,s,l);try{var D=y(),$=X.S;if($!==null&&$(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=sw(D,d);Rl(o,s,Z,Yn(o))}else Rl(o,s,d,Yn(o))}catch(ee){Rl(o,s,{then:function(){},status:"rejected",reason:ee},Yn())}finally{he.p=_,X.T=C}}function fw(){}function mh(o,s,l,d){if(o.tag!==5)throw Error(i(476));var y=Fy(o).queue;By(o,y,s,ye,l===null?fw:function(){return qy(o),l(d)})}function Fy(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:ye},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:l},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function qy(o){var s=Fy(o).next.queue;Rl(o,s,{},Yn())}function gh(){return Tn($l)}function Gy(){return $t().memoizedState}function zy(){return $t().memoizedState}function dw(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var l=Yn();o=Xo(l);var d=Wo(s,o,l);d!==null&&(Kn(d,s,l),El(d,s,l)),s={cache:Yd()},o.payload=s;return}s=s.return}}function hw(o,s,l){var d=Yn();l={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Ec(o)?$y(s,l):(l=Ld(o,s,l,d),l!==null&&(Kn(l,o,d),Yy(l,s,d)))}function Hy(o,s,l){var d=Yn();Rl(o,s,l,d)}function Rl(o,s,l,d){var y={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ec(o))$y(s,y);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var C=s.lastRenderedState,w=_(C,l);if(y.hasEagerState=!0,y.eagerState=w,qn(w,C))return oc(o,s,y,0),Rt===null&&ic(),!1}catch{}finally{}if(l=Ld(o,s,y,d),l!==null)return Kn(l,o,d),Yy(l,s,d),!0}return!1}function yh(o,s,l,d){if(d={lane:2,revertLane:Qh(),action:d,hasEagerState:!1,eagerState:null,next:null},Ec(o)){if(s)throw Error(i(479))}else s=Ld(o,l,d,2),s!==null&&Kn(s,o,2)}function Ec(o){var s=o.alternate;return o===Ge||s!==null&&s===Ge}function $y(o,s){js=mc=!0;var l=o.pending;l===null?s.next=s:(s.next=l.next,l.next=s),o.pending=s}function Yy(o,s,l){if((l&4194048)!==0){var d=s.lanes;d&=o.pendingLanes,l|=d,s.lanes=l,qe(o,l)}}var Sc={readContext:Tn,use:yc,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt},Ky={readContext:Tn,use:yc,useCallback:function(o,s){return Vn().memoizedState=[o,s===void 0?null:s],o},useContext:Tn,useEffect:My,useImperativeHandle:function(o,s,l){l=l!=null?l.concat([o]):null,Tc(4194308,4,Py.bind(null,s,o),l)},useLayoutEffect:function(o,s){return Tc(4194308,4,o,s)},useInsertionEffect:function(o,s){Tc(4,2,o,s)},useMemo:function(o,s){var l=Vn();s=s===void 0?null:s;var d=o();if(os){Rn(!0);try{o()}finally{Rn(!1)}}return l.memoizedState=[d,s],d},useReducer:function(o,s,l){var d=Vn();if(l!==void 0){var y=l(s);if(os){Rn(!0);try{l(s)}finally{Rn(!1)}}}else y=s;return d.memoizedState=d.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},d.queue=o,o=o.dispatch=hw.bind(null,Ge,o),[d.memoizedState,o]},useRef:function(o){var s=Vn();return o={current:o},s.memoizedState=o},useState:function(o){o=fh(o);var s=o.queue,l=Hy.bind(null,Ge,s);return s.dispatch=l,[o.memoizedState,l]},useDebugValue:hh,useDeferredValue:function(o,s){var l=Vn();return ph(l,o,s)},useTransition:function(){var o=fh(!1);return o=By.bind(null,Ge,o.queue,!0,!1),Vn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,l){var d=Ge,y=Vn();if(at){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),Rt===null)throw Error(i(349));(et&124)!==0||py(d,s,l)}y.memoizedState=l;var _={value:l,getSnapshot:s};return y.queue=_,My(gy.bind(null,d,_,o),[o]),d.flags|=2048,ta(9,_c(),my.bind(null,d,_,l,s),null),l},useId:function(){var o=Vn(),s=Rt.identifierPrefix;if(at){var l=go,d=mo;l=(d&~(1<<32-Kt(d)-1)).toString(32)+l,s="«"+s+"R"+l,l=gc++,0<l&&(s+="H"+l.toString(32)),s+="»"}else l=aw++,s="«"+s+"r"+l.toString(32)+"»";return o.memoizedState=s},useHostTransitionStatus:gh,useFormState:wy,useActionState:wy,useOptimistic:function(o){var s=Vn();s.memoizedState=s.baseState=o;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=yh.bind(null,Ge,!0,l),l.dispatch=s,[o,s]},useMemoCache:lh,useCacheRefresh:function(){return Vn().memoizedState=dw.bind(null,Ge)}},Jy={readContext:Tn,use:yc,useCallback:Ly,useContext:Tn,useEffect:Ny,useImperativeHandle:Vy,useInsertionEffect:ky,useLayoutEffect:Dy,useMemo:Uy,useReducer:vc,useRef:by,useState:function(){return vc(_o)},useDebugValue:hh,useDeferredValue:function(o,s){var l=$t();return Oy(l,Tt.memoizedState,o,s)},useTransition:function(){var o=vc(_o)[0],s=$t().memoizedState;return[typeof o=="boolean"?o:wl(o),s]},useSyncExternalStore:hy,useId:Gy,useHostTransitionStatus:gh,useFormState:Iy,useActionState:Iy,useOptimistic:function(o,s){var l=$t();return _y(l,Tt,o,s)},useMemoCache:lh,useCacheRefresh:zy},pw={readContext:Tn,use:yc,useCallback:Ly,useContext:Tn,useEffect:Ny,useImperativeHandle:Vy,useInsertionEffect:ky,useLayoutEffect:Dy,useMemo:Uy,useReducer:ch,useRef:by,useState:function(){return ch(_o)},useDebugValue:hh,useDeferredValue:function(o,s){var l=$t();return Tt===null?ph(l,o,s):Oy(l,Tt.memoizedState,o,s)},useTransition:function(){var o=ch(_o)[0],s=$t().memoizedState;return[typeof o=="boolean"?o:wl(o),s]},useSyncExternalStore:hy,useId:Gy,useHostTransitionStatus:gh,useFormState:xy,useActionState:xy,useOptimistic:function(o,s){var l=$t();return Tt!==null?_y(l,Tt,o,s):(l.baseState=o,[o,l.queue.dispatch])},useMemoCache:lh,useCacheRefresh:zy},na=null,xl=0;function Ac(o){var s=xl;return xl+=1,na===null&&(na=[]),ry(na,o,s)}function bl(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function Cc(o,s){throw s.$$typeof===E?Error(i(525)):(o=Object.prototype.toString.call(s),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function Qy(o){var s=o._init;return s(o._payload)}function Xy(o){function s(G,B){if(o){var H=G.deletions;H===null?(G.deletions=[B],G.flags|=16):H.push(B)}}function l(G,B){if(!o)return null;for(;B!==null;)s(G,B),B=B.sibling;return null}function d(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function y(G,B){return G=po(G,B),G.index=0,G.sibling=null,G}function _(G,B,H){return G.index=H,o?(H=G.alternate,H!==null?(H=H.index,H<B?(G.flags|=67108866,B):H):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function C(G){return o&&G.alternate===null&&(G.flags|=67108866),G}function w(G,B,H,j){return B===null||B.tag!==6?(B=Od(H,G.mode,j),B.return=G,B):(B=y(B,H),B.return=G,B)}function D(G,B,H,j){var ge=H.type;return ge===x?Z(G,B,H.props.children,j,H.key):B!==null&&(B.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===M&&Qy(ge)===B.type)?(B=y(B,H.props),bl(B,H),B.return=G,B):(B=sc(H.type,H.key,H.props,null,G.mode,j),bl(B,H),B.return=G,B)}function $(G,B,H,j){return B===null||B.tag!==4||B.stateNode.containerInfo!==H.containerInfo||B.stateNode.implementation!==H.implementation?(B=Bd(H,G.mode,j),B.return=G,B):(B=y(B,H.children||[]),B.return=G,B)}function Z(G,B,H,j,ge){return B===null||B.tag!==7?(B=Xr(H,G.mode,j,ge),B.return=G,B):(B=y(B,H),B.return=G,B)}function ee(G,B,H){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Od(""+B,G.mode,H),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case S:return H=sc(B.type,B.key,B.props,null,G.mode,H),bl(H,B),H.return=G,H;case I:return B=Bd(B,G.mode,H),B.return=G,B;case M:var j=B._init;return B=j(B._payload),ee(G,B,H)}if(Xe(B)||q(B))return B=Xr(B,G.mode,H,null),B.return=G,B;if(typeof B.then=="function")return ee(G,Ac(B),H);if(B.$$typeof===ne)return ee(G,cc(G,B),H);Cc(G,B)}return null}function Y(G,B,H,j){var ge=B!==null?B.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ge!==null?null:w(G,B,""+H,j);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case S:return H.key===ge?D(G,B,H,j):null;case I:return H.key===ge?$(G,B,H,j):null;case M:return ge=H._init,H=ge(H._payload),Y(G,B,H,j)}if(Xe(H)||q(H))return ge!==null?null:Z(G,B,H,j,null);if(typeof H.then=="function")return Y(G,B,Ac(H),j);if(H.$$typeof===ne)return Y(G,B,cc(G,H),j);Cc(G,H)}return null}function K(G,B,H,j,ge){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return G=G.get(H)||null,w(B,G,""+j,ge);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case S:return G=G.get(j.key===null?H:j.key)||null,D(B,G,j,ge);case I:return G=G.get(j.key===null?H:j.key)||null,$(B,G,j,ge);case M:var ze=j._init;return j=ze(j._payload),K(G,B,H,j,ge)}if(Xe(j)||q(j))return G=G.get(H)||null,Z(B,G,j,ge,null);if(typeof j.then=="function")return K(G,B,H,Ac(j),ge);if(j.$$typeof===ne)return K(G,B,H,cc(B,j),ge);Cc(B,j)}return null}function be(G,B,H,j){for(var ge=null,ze=null,Te=B,xe=B=0,an=null;Te!==null&&xe<H.length;xe++){Te.index>xe?(an=Te,Te=null):an=Te.sibling;var ot=Y(G,Te,H[xe],j);if(ot===null){Te===null&&(Te=an);break}o&&Te&&ot.alternate===null&&s(G,Te),B=_(ot,B,xe),ze===null?ge=ot:ze.sibling=ot,ze=ot,Te=an}if(xe===H.length)return l(G,Te),at&&Zr(G,xe),ge;if(Te===null){for(;xe<H.length;xe++)Te=ee(G,H[xe],j),Te!==null&&(B=_(Te,B,xe),ze===null?ge=Te:ze.sibling=Te,ze=Te);return at&&Zr(G,xe),ge}for(Te=d(Te);xe<H.length;xe++)an=K(Te,G,xe,H[xe],j),an!==null&&(o&&an.alternate!==null&&Te.delete(an.key===null?xe:an.key),B=_(an,B,xe),ze===null?ge=an:ze.sibling=an,ze=an);return o&&Te.forEach(function(pr){return s(G,pr)}),at&&Zr(G,xe),ge}function Ie(G,B,H,j){if(H==null)throw Error(i(151));for(var ge=null,ze=null,Te=B,xe=B=0,an=null,ot=H.next();Te!==null&&!ot.done;xe++,ot=H.next()){Te.index>xe?(an=Te,Te=null):an=Te.sibling;var pr=Y(G,Te,ot.value,j);if(pr===null){Te===null&&(Te=an);break}o&&Te&&pr.alternate===null&&s(G,Te),B=_(pr,B,xe),ze===null?ge=pr:ze.sibling=pr,ze=pr,Te=an}if(ot.done)return l(G,Te),at&&Zr(G,xe),ge;if(Te===null){for(;!ot.done;xe++,ot=H.next())ot=ee(G,ot.value,j),ot!==null&&(B=_(ot,B,xe),ze===null?ge=ot:ze.sibling=ot,ze=ot);return at&&Zr(G,xe),ge}for(Te=d(Te);!ot.done;xe++,ot=H.next())ot=K(Te,G,xe,ot.value,j),ot!==null&&(o&&ot.alternate!==null&&Te.delete(ot.key===null?xe:ot.key),B=_(ot,B,xe),ze===null?ge=ot:ze.sibling=ot,ze=ot);return o&&Te.forEach(function(mI){return s(G,mI)}),at&&Zr(G,xe),ge}function St(G,B,H,j){if(typeof H=="object"&&H!==null&&H.type===x&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case S:e:{for(var ge=H.key;B!==null;){if(B.key===ge){if(ge=H.type,ge===x){if(B.tag===7){l(G,B.sibling),j=y(B,H.props.children),j.return=G,G=j;break e}}else if(B.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===M&&Qy(ge)===B.type){l(G,B.sibling),j=y(B,H.props),bl(j,H),j.return=G,G=j;break e}l(G,B);break}else s(G,B);B=B.sibling}H.type===x?(j=Xr(H.props.children,G.mode,j,H.key),j.return=G,G=j):(j=sc(H.type,H.key,H.props,null,G.mode,j),bl(j,H),j.return=G,G=j)}return C(G);case I:e:{for(ge=H.key;B!==null;){if(B.key===ge)if(B.tag===4&&B.stateNode.containerInfo===H.containerInfo&&B.stateNode.implementation===H.implementation){l(G,B.sibling),j=y(B,H.children||[]),j.return=G,G=j;break e}else{l(G,B);break}else s(G,B);B=B.sibling}j=Bd(H,G.mode,j),j.return=G,G=j}return C(G);case M:return ge=H._init,H=ge(H._payload),St(G,B,H,j)}if(Xe(H))return be(G,B,H,j);if(q(H)){if(ge=q(H),typeof ge!="function")throw Error(i(150));return H=ge.call(H),Ie(G,B,H,j)}if(typeof H.then=="function")return St(G,B,Ac(H),j);if(H.$$typeof===ne)return St(G,B,cc(G,H),j);Cc(G,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,B!==null&&B.tag===6?(l(G,B.sibling),j=y(B,H),j.return=G,G=j):(l(G,B),j=Od(H,G.mode,j),j.return=G,G=j),C(G)):l(G,B)}return function(G,B,H,j){try{xl=0;var ge=St(G,B,H,j);return na=null,ge}catch(Te){if(Te===_l||Te===dc)throw Te;var ze=Gn(29,Te,null,G.mode);return ze.lanes=j,ze.return=G,ze}finally{}}}var ia=Xy(!0),Wy=Xy(!1),ui=W(null),Bi=null;function jo(o){var s=o.alternate;re(Zt,Zt.current&1),re(ui,o),Bi===null&&(s===null||Zs.current!==null||s.memoizedState!==null)&&(Bi=o)}function Zy(o){if(o.tag===22){if(re(Zt,Zt.current),re(ui,o),Bi===null){var s=o.alternate;s!==null&&s.memoizedState!==null&&(Bi=o)}}else er()}function er(){re(Zt,Zt.current),re(ui,ui.current)}function To(o){de(ui),Bi===o&&(Bi=null),de(Zt)}var Zt=W(0);function wc(o){for(var s=o;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||ap(l)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function vh(o,s,l,d){s=o.memoizedState,l=l(d,s),l=l==null?s:v({},s,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var _h={enqueueSetState:function(o,s,l){o=o._reactInternals;var d=Yn(),y=Xo(d);y.payload=s,l!=null&&(y.callback=l),s=Wo(o,y,d),s!==null&&(Kn(s,o,d),El(s,o,d))},enqueueReplaceState:function(o,s,l){o=o._reactInternals;var d=Yn(),y=Xo(d);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=Wo(o,y,d),s!==null&&(Kn(s,o,d),El(s,o,d))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var l=Yn(),d=Xo(l);d.tag=2,s!=null&&(d.callback=s),s=Wo(o,d,l),s!==null&&(Kn(s,o,l),El(s,o,l))}};function jy(o,s,l,d,y,_,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,_,C):s.prototype&&s.prototype.isPureReactComponent?!fl(l,d)||!fl(y,_):!0}function ev(o,s,l,d){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==o&&_h.enqueueReplaceState(s,s.state,null)}function rs(o,s){var l=s;if("ref"in s){l={};for(var d in s)d!=="ref"&&(l[d]=s[d])}if(o=o.defaultProps){l===s&&(l=v({},l));for(var y in o)l[y]===void 0&&(l[y]=o[y])}return l}var Ic=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function tv(o){Ic(o)}function nv(o){console.error(o)}function iv(o){Ic(o)}function Rc(o,s){try{var l=o.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function ov(o,s,l){try{var d=o.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Th(o,s,l){return l=Xo(l),l.tag=3,l.payload={element:null},l.callback=function(){Rc(o,s)},l}function rv(o){return o=Xo(o),o.tag=3,o}function sv(o,s,l,d){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=d.value;o.payload=function(){return y(_)},o.callback=function(){ov(s,l,d)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(o.callback=function(){ov(s,l,d),typeof y!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var w=d.stack;this.componentDidCatch(d.value,{componentStack:w!==null?w:""})})}function mw(o,s,l,d,y){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=l.alternate,s!==null&&gl(s,l,y,!0),l=ui.current,l!==null){switch(l.tag){case 13:return Bi===null?Hh():l.alternate===null&&Lt===0&&(Lt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,d===Qd?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([d]):s.add(d),Yh(o,d,y)),!1;case 22:return l.flags|=65536,d===Qd?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([d]):l.add(d)),Yh(o,d,y)),!1}throw Error(i(435,l.tag))}return Yh(o,d,y),Hh(),!1}if(at)return s=ui.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,d!==Gd&&(o=Error(i(422),{cause:d}),ml(ri(o,l)))):(d!==Gd&&(s=Error(i(423),{cause:d}),ml(ri(s,l))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,d=ri(d,l),y=Th(o.stateNode,d,y),Zd(o,y),Lt!==4&&(Lt=2)),!1;var _=Error(i(520),{cause:d});if(_=ri(_,l),Ll===null?Ll=[_]:Ll.push(_),Lt!==4&&(Lt=2),s===null)return!0;d=ri(d,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,o=y&-y,l.lanes|=o,o=Th(l.stateNode,d,o),Zd(l,o),!1;case 1:if(s=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(sr===null||!sr.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=rv(y),sv(y,o,l,d),Zd(l,y),!1}l=l.return}while(l!==null);return!1}var av=Error(i(461)),rn=!1;function fn(o,s,l,d){s.child=o===null?Wy(s,null,l,d):ia(s,o.child,l,d)}function lv(o,s,l,d,y){l=l.render;var _=s.ref;if("ref"in d){var C={};for(var w in d)w!=="ref"&&(C[w]=d[w])}else C=d;return ns(s),d=ih(o,s,l,C,_,y),w=oh(),o!==null&&!rn?(rh(o,s,y),Eo(o,s,y)):(at&&w&&Fd(s),s.flags|=1,fn(o,s,d,y),s.child)}function uv(o,s,l,d,y){if(o===null){var _=l.type;return typeof _=="function"&&!Ud(_)&&_.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=_,cv(o,s,_,d,y)):(o=sc(l.type,null,d,s,s.mode,y),o.ref=s.ref,o.return=s,s.child=o)}if(_=o.child,!xh(o,y)){var C=_.memoizedProps;if(l=l.compare,l=l!==null?l:fl,l(C,d)&&o.ref===s.ref)return Eo(o,s,y)}return s.flags|=1,o=po(_,d),o.ref=s.ref,o.return=s,s.child=o}function cv(o,s,l,d,y){if(o!==null){var _=o.memoizedProps;if(fl(_,d)&&o.ref===s.ref)if(rn=!1,s.pendingProps=d=_,xh(o,y))(o.flags&131072)!==0&&(rn=!0);else return s.lanes=o.lanes,Eo(o,s,y)}return Eh(o,s,l,d,y)}function fv(o,s,l){var d=s.pendingProps,y=d.children,_=o!==null?o.memoizedState:null;if(d.mode==="hidden"){if((s.flags&128)!==0){if(d=_!==null?_.baseLanes|l:l,o!==null){for(y=s.child=o.child,_=0;y!==null;)_=_|y.lanes|y.childLanes,y=y.sibling;s.childLanes=_&~d}else s.childLanes=0,s.child=null;return dv(o,s,d,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&fc(s,_!==null?_.cachePool:null),_!==null?cy(s,_):eh(),Zy(s);else return s.lanes=s.childLanes=536870912,dv(o,s,_!==null?_.baseLanes|l:l,l)}else _!==null?(fc(s,_.cachePool),cy(s,_),er(),s.memoizedState=null):(o!==null&&fc(s,null),eh(),er());return fn(o,s,y,l),s.child}function dv(o,s,l,d){var y=Jd();return y=y===null?null:{parent:Wt._currentValue,pool:y},s.memoizedState={baseLanes:l,cachePool:y},o!==null&&fc(s,null),eh(),Zy(s),o!==null&&gl(o,s,d,!0),null}function xc(o,s){var l=s.ref;if(l===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(o===null||o.ref!==l)&&(s.flags|=4194816)}}function Eh(o,s,l,d,y){return ns(s),l=ih(o,s,l,d,void 0,y),d=oh(),o!==null&&!rn?(rh(o,s,y),Eo(o,s,y)):(at&&d&&Fd(s),s.flags|=1,fn(o,s,l,y),s.child)}function hv(o,s,l,d,y,_){return ns(s),s.updateQueue=null,l=dy(s,d,l,y),fy(o),d=oh(),o!==null&&!rn?(rh(o,s,_),Eo(o,s,_)):(at&&d&&Fd(s),s.flags|=1,fn(o,s,l,_),s.child)}function pv(o,s,l,d,y){if(ns(s),s.stateNode===null){var _=Ks,C=l.contextType;typeof C=="object"&&C!==null&&(_=Tn(C)),_=new l(d,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=_h,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=d,_.state=s.memoizedState,_.refs={},Xd(s),C=l.contextType,_.context=typeof C=="object"&&C!==null?Tn(C):Ks,_.state=s.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(vh(s,l,C,d),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&_h.enqueueReplaceState(_,_.state,null),Al(s,d,_,y),Sl(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(o===null){_=s.stateNode;var w=s.memoizedProps,D=rs(l,w);_.props=D;var $=_.context,Z=l.contextType;C=Ks,typeof Z=="object"&&Z!==null&&(C=Tn(Z));var ee=l.getDerivedStateFromProps;Z=typeof ee=="function"||typeof _.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w||$!==C)&&ev(s,_,d,C),Qo=!1;var Y=s.memoizedState;_.state=Y,Al(s,d,_,y),Sl(),$=s.memoizedState,w||Y!==$||Qo?(typeof ee=="function"&&(vh(s,l,ee,d),$=s.memoizedState),(D=Qo||jy(s,l,D,d,Y,$,C))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=$),_.props=d,_.state=$,_.context=C,d=D):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{_=s.stateNode,Wd(o,s),C=s.memoizedProps,Z=rs(l,C),_.props=Z,ee=s.pendingProps,Y=_.context,$=l.contextType,D=Ks,typeof $=="object"&&$!==null&&(D=Tn($)),w=l.getDerivedStateFromProps,($=typeof w=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==ee||Y!==D)&&ev(s,_,d,D),Qo=!1,Y=s.memoizedState,_.state=Y,Al(s,d,_,y),Sl();var K=s.memoizedState;C!==ee||Y!==K||Qo||o!==null&&o.dependencies!==null&&uc(o.dependencies)?(typeof w=="function"&&(vh(s,l,w,d),K=s.memoizedState),(Z=Qo||jy(s,l,Z,d,Y,K,D)||o!==null&&o.dependencies!==null&&uc(o.dependencies))?($||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,K,D),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,K,D)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===o.memoizedProps&&Y===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&Y===o.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=K),_.props=d,_.state=K,_.context=D,d=Z):(typeof _.componentDidUpdate!="function"||C===o.memoizedProps&&Y===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&Y===o.memoizedState||(s.flags|=1024),d=!1)}return _=d,xc(o,s),d=(s.flags&128)!==0,_||d?(_=s.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,o!==null&&d?(s.child=ia(s,o.child,null,y),s.child=ia(s,null,l,y)):fn(o,s,l,y),s.memoizedState=_.state,o=s.child):o=Eo(o,s,y),o}function mv(o,s,l,d){return pl(),s.flags|=256,fn(o,s,l,d),s.child}var Sh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ah(o){return{baseLanes:o,cachePool:ny()}}function Ch(o,s,l){return o=o!==null?o.childLanes&~l:0,s&&(o|=ci),o}function gv(o,s,l){var d=s.pendingProps,y=!1,_=(s.flags&128)!==0,C;if((C=_)||(C=o!==null&&o.memoizedState===null?!1:(Zt.current&2)!==0),C&&(y=!0,s.flags&=-129),C=(s.flags&32)!==0,s.flags&=-33,o===null){if(at){if(y?jo(s):er(),at){var w=Vt,D;if(D=w){e:{for(D=w,w=Oi;D.nodeType!==8;){if(!w){w=null;break e}if(D=Ti(D.nextSibling),D===null){w=null;break e}}w=D}w!==null?(s.memoizedState={dehydrated:w,treeContext:Wr!==null?{id:mo,overflow:go}:null,retryLane:536870912,hydrationErrors:null},D=Gn(18,null,null,0),D.stateNode=w,D.return=s,s.child=D,Nn=s,Vt=null,D=!0):D=!1}D||es(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return ap(w)?s.lanes=32:s.lanes=536870912,null;To(s)}return w=d.children,d=d.fallback,y?(er(),y=s.mode,w=bc({mode:"hidden",children:w},y),d=Xr(d,y,l,null),w.return=s,d.return=s,w.sibling=d,s.child=w,y=s.child,y.memoizedState=Ah(l),y.childLanes=Ch(o,C,l),s.memoizedState=Sh,d):(jo(s),wh(s,w))}if(D=o.memoizedState,D!==null&&(w=D.dehydrated,w!==null)){if(_)s.flags&256?(jo(s),s.flags&=-257,s=Ih(o,s,l)):s.memoizedState!==null?(er(),s.child=o.child,s.flags|=128,s=null):(er(),y=d.fallback,w=s.mode,d=bc({mode:"visible",children:d.children},w),y=Xr(y,w,l,null),y.flags|=2,d.return=s,y.return=s,d.sibling=y,s.child=d,ia(s,o.child,null,l),d=s.child,d.memoizedState=Ah(l),d.childLanes=Ch(o,C,l),s.memoizedState=Sh,s=y);else if(jo(s),ap(w)){if(C=w.nextSibling&&w.nextSibling.dataset,C)var $=C.dgst;C=$,d=Error(i(419)),d.stack="",d.digest=C,ml({value:d,source:null,stack:null}),s=Ih(o,s,l)}else if(rn||gl(o,s,l,!1),C=(l&o.childLanes)!==0,rn||C){if(C=Rt,C!==null&&(d=l&-l,d=(d&42)!==0?1:Ve(d),d=(d&(C.suspendedLanes|l))!==0?0:d,d!==0&&d!==D.retryLane))throw D.retryLane=d,Ys(o,d),Kn(C,o,d),av;w.data==="$?"||Hh(),s=Ih(o,s,l)}else w.data==="$?"?(s.flags|=192,s.child=o.child,s=null):(o=D.treeContext,Vt=Ti(w.nextSibling),Nn=s,at=!0,jr=null,Oi=!1,o!==null&&(ai[li++]=mo,ai[li++]=go,ai[li++]=Wr,mo=o.id,go=o.overflow,Wr=s),s=wh(s,d.children),s.flags|=4096);return s}return y?(er(),y=d.fallback,w=s.mode,D=o.child,$=D.sibling,d=po(D,{mode:"hidden",children:d.children}),d.subtreeFlags=D.subtreeFlags&65011712,$!==null?y=po($,y):(y=Xr(y,w,l,null),y.flags|=2),y.return=s,d.return=s,d.sibling=y,s.child=d,d=y,y=s.child,w=o.child.memoizedState,w===null?w=Ah(l):(D=w.cachePool,D!==null?($=Wt._currentValue,D=D.parent!==$?{parent:$,pool:$}:D):D=ny(),w={baseLanes:w.baseLanes|l,cachePool:D}),y.memoizedState=w,y.childLanes=Ch(o,C,l),s.memoizedState=Sh,d):(jo(s),l=o.child,o=l.sibling,l=po(l,{mode:"visible",children:d.children}),l.return=s,l.sibling=null,o!==null&&(C=s.deletions,C===null?(s.deletions=[o],s.flags|=16):C.push(o)),s.child=l,s.memoizedState=null,l)}function wh(o,s){return s=bc({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function bc(o,s){return o=Gn(22,o,null,s),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Ih(o,s,l){return ia(s,o.child,null,l),o=wh(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function yv(o,s,l){o.lanes|=s;var d=o.alternate;d!==null&&(d.lanes|=s),Hd(o.return,s,l)}function Rh(o,s,l,d,y){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:y}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=l,_.tailMode=y)}function vv(o,s,l){var d=s.pendingProps,y=d.revealOrder,_=d.tail;if(fn(o,s,d.children,l),d=Zt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&yv(o,l,s);else if(o.tag===19)yv(o,l,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}switch(re(Zt,d),y){case"forwards":for(l=s.child,y=null;l!==null;)o=l.alternate,o!==null&&wc(o)===null&&(y=l),l=l.sibling;l=y,l===null?(y=s.child,s.child=null):(y=l.sibling,l.sibling=null),Rh(s,!1,y,l,_);break;case"backwards":for(l=null,y=s.child,s.child=null;y!==null;){if(o=y.alternate,o!==null&&wc(o)===null){s.child=y;break}o=y.sibling,y.sibling=l,l=y,y=o}Rh(s,!0,l,null,_);break;case"together":Rh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Eo(o,s,l){if(o!==null&&(s.dependencies=o.dependencies),rr|=s.lanes,(l&s.childLanes)===0)if(o!==null){if(gl(o,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(i(153));if(s.child!==null){for(o=s.child,l=po(o,o.pendingProps),s.child=l,l.return=s;o.sibling!==null;)o=o.sibling,l=l.sibling=po(o,o.pendingProps),l.return=s;l.sibling=null}return s.child}function xh(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&uc(o)))}function gw(o,s,l){switch(s.tag){case 3:lt(s,s.stateNode.containerInfo),Jo(s,Wt,o.memoizedState.cache),pl();break;case 27:case 5:Ri(s);break;case 4:lt(s,s.stateNode.containerInfo);break;case 10:Jo(s,s.type,s.memoizedProps.value);break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(jo(s),s.flags|=128,null):(l&s.child.childLanes)!==0?gv(o,s,l):(jo(s),o=Eo(o,s,l),o!==null?o.sibling:null);jo(s);break;case 19:var y=(o.flags&128)!==0;if(d=(l&s.childLanes)!==0,d||(gl(o,s,l,!1),d=(l&s.childLanes)!==0),y){if(d)return vv(o,s,l);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),re(Zt,Zt.current),d)break;return null;case 22:case 23:return s.lanes=0,fv(o,s,l);case 24:Jo(s,Wt,o.memoizedState.cache)}return Eo(o,s,l)}function _v(o,s,l){if(o!==null)if(o.memoizedProps!==s.pendingProps)rn=!0;else{if(!xh(o,l)&&(s.flags&128)===0)return rn=!1,gw(o,s,l);rn=(o.flags&131072)!==0}else rn=!1,at&&(s.flags&1048576)!==0&&Qg(s,lc,s.index);switch(s.lanes=0,s.tag){case 16:e:{o=s.pendingProps;var d=s.elementType,y=d._init;if(d=y(d._payload),s.type=d,typeof d=="function")Ud(d)?(o=rs(d,o),s.tag=1,s=pv(null,s,d,o,l)):(s.tag=0,s=Eh(null,s,d,o,l));else{if(d!=null){if(y=d.$$typeof,y===fe){s.tag=11,s=lv(null,s,d,o,l);break e}else if(y===k){s.tag=14,s=uv(null,s,d,o,l);break e}}throw s=At(d)||d,Error(i(306,s,""))}}return s;case 0:return Eh(o,s,s.type,s.pendingProps,l);case 1:return d=s.type,y=rs(d,s.pendingProps),pv(o,s,d,y,l);case 3:e:{if(lt(s,s.stateNode.containerInfo),o===null)throw Error(i(387));d=s.pendingProps;var _=s.memoizedState;y=_.element,Wd(o,s),Al(s,d,null,l);var C=s.memoizedState;if(d=C.cache,Jo(s,Wt,d),d!==_.cache&&$d(s,[Wt],l,!0),Sl(),d=C.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:C.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=mv(o,s,d,l);break e}else if(d!==y){y=ri(Error(i(424)),s),ml(y),s=mv(o,s,d,l);break e}else{switch(o=s.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Vt=Ti(o.firstChild),Nn=s,at=!0,jr=null,Oi=!0,l=Wy(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(pl(),d===y){s=Eo(o,s,l);break e}fn(o,s,d,l)}s=s.child}return s;case 26:return xc(o,s),o===null?(l=A_(s.type,null,s.pendingProps,null))?s.memoizedState=l:at||(l=s.type,o=s.pendingProps,d=zc(Re.current).createElement(l),d[Jt]=s,d[Gt]=o,hn(d,l,o),Ot(d),s.stateNode=d):s.memoizedState=A_(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return Ri(s),o===null&&at&&(d=s.stateNode=T_(s.type,s.pendingProps,Re.current),Nn=s,Oi=!0,y=Vt,ur(s.type)?(lp=y,Vt=Ti(d.firstChild)):Vt=y),fn(o,s,s.pendingProps.children,l),xc(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&at&&((y=d=Vt)&&(d=Hw(d,s.type,s.pendingProps,Oi),d!==null?(s.stateNode=d,Nn=s,Vt=Ti(d.firstChild),Oi=!1,y=!0):y=!1),y||es(s)),Ri(s),y=s.type,_=s.pendingProps,C=o!==null?o.memoizedProps:null,d=_.children,op(y,_)?d=null:C!==null&&op(y,C)&&(s.flags|=32),s.memoizedState!==null&&(y=ih(o,s,lw,null,null,l),$l._currentValue=y),xc(o,s),fn(o,s,d,l),s.child;case 6:return o===null&&at&&((o=l=Vt)&&(l=$w(l,s.pendingProps,Oi),l!==null?(s.stateNode=l,Nn=s,Vt=null,o=!0):o=!1),o||es(s)),null;case 13:return gv(o,s,l);case 4:return lt(s,s.stateNode.containerInfo),d=s.pendingProps,o===null?s.child=ia(s,null,d,l):fn(o,s,d,l),s.child;case 11:return lv(o,s,s.type,s.pendingProps,l);case 7:return fn(o,s,s.pendingProps,l),s.child;case 8:return fn(o,s,s.pendingProps.children,l),s.child;case 12:return fn(o,s,s.pendingProps.children,l),s.child;case 10:return d=s.pendingProps,Jo(s,s.type,d.value),fn(o,s,d.children,l),s.child;case 9:return y=s.type._context,d=s.pendingProps.children,ns(s),y=Tn(y),d=d(y),s.flags|=1,fn(o,s,d,l),s.child;case 14:return uv(o,s,s.type,s.pendingProps,l);case 15:return cv(o,s,s.type,s.pendingProps,l);case 19:return vv(o,s,l);case 31:return d=s.pendingProps,l=s.mode,d={mode:d.mode,children:d.children},o===null?(l=bc(d,l),l.ref=s.ref,s.child=l,l.return=s,s=l):(l=po(o.child,d),l.ref=s.ref,s.child=l,l.return=s,s=l),s;case 22:return fv(o,s,l);case 24:return ns(s),d=Tn(Wt),o===null?(y=Jd(),y===null&&(y=Rt,_=Yd(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),s.memoizedState={parent:d,cache:y},Xd(s),Jo(s,Wt,y)):((o.lanes&l)!==0&&(Wd(o,s),Al(s,null,null,l),Sl()),y=o.memoizedState,_=s.memoizedState,y.parent!==d?(y={parent:d,cache:d},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Jo(s,Wt,d)):(d=_.cache,Jo(s,Wt,d),d!==y.cache&&$d(s,[Wt],l,!0))),fn(o,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function So(o){o.flags|=4}function Tv(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!x_(s)){if(s=ui.current,s!==null&&((et&4194048)===et?Bi!==null:(et&62914560)!==et&&(et&536870912)===0||s!==Bi))throw Tl=Qd,iy;o.flags|=8192}}function Mc(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?Ut():536870912,o.lanes|=s,aa|=s)}function Ml(o,s){if(!at)switch(o.tailMode){case"hidden":s=o.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function kt(o){var s=o.alternate!==null&&o.alternate.child===o.child,l=0,d=0;if(s)for(var y=o.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=d,o.childLanes=l,s}function yw(o,s,l){var d=s.pendingProps;switch(qd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(s),null;case 1:return kt(s),null;case 3:return l=s.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),vo(Wt),Wn(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(o===null||o.child===null)&&(hl(s)?So(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Zg())),kt(s),null;case 26:return l=s.memoizedState,o===null?(So(s),l!==null?(kt(s),Tv(s,l)):(kt(s),s.flags&=-16777217)):l?l!==o.memoizedState?(So(s),kt(s),Tv(s,l)):(kt(s),s.flags&=-16777217):(o.memoizedProps!==d&&So(s),kt(s),s.flags&=-16777217),null;case 27:pi(s),l=Re.current;var y=s.type;if(o!==null&&s.stateNode!=null)o.memoizedProps!==d&&So(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return kt(s),null}o=Se.current,hl(s)?Xg(s):(o=T_(y,d,l),s.stateNode=o,So(s))}return kt(s),null;case 5:if(pi(s),l=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==d&&So(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return kt(s),null}if(o=Se.current,hl(s))Xg(s);else{switch(y=zc(Re.current),o){case 1:o=y.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:o=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":o=y.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":o=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":o=y.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?o.multiple=!0:d.size&&(o.size=d.size);break;default:o=typeof d.is=="string"?y.createElement(l,{is:d.is}):y.createElement(l)}}o[Jt]=s,o[Gt]=d;e:for(y=s.child;y!==null;){if(y.tag===5||y.tag===6)o.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===s)break e;for(;y.sibling===null;){if(y.return===null||y.return===s)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}s.stateNode=o;e:switch(hn(o,l,d),l){case"button":case"input":case"select":case"textarea":o=!!d.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&So(s)}}return kt(s),s.flags&=-16777217,null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==d&&So(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(i(166));if(o=Re.current,hl(s)){if(o=s.stateNode,l=s.memoizedProps,d=null,y=Nn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}o[Jt]=s,o=!!(o.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||h_(o.nodeValue,l)),o||es(s)}else o=zc(o).createTextNode(d),o[Jt]=s,s.stateNode=o}return kt(s),null;case 13:if(d=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=hl(s),d!==null&&d.dehydrated!==null){if(o===null){if(!y)throw Error(i(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Jt]=s}else pl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;kt(s),y=!1}else y=Zg(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(To(s),s):(To(s),null)}if(To(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=d!==null,o=o!==null&&o.memoizedState!==null,l){d=s.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var _=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),_!==y&&(d.flags|=2048)}return l!==o&&l&&(s.child.flags|=8192),Mc(s,s.updateQueue),kt(s),null;case 4:return Wn(),o===null&&jh(s.stateNode.containerInfo),kt(s),null;case 10:return vo(s.type),kt(s),null;case 19:if(de(Zt),y=s.memoizedState,y===null)return kt(s),null;if(d=(s.flags&128)!==0,_=y.rendering,_===null)if(d)Ml(y,!1);else{if(Lt!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(_=wc(o),_!==null){for(s.flags|=128,Ml(y,!1),o=_.updateQueue,s.updateQueue=o,Mc(s,o),s.subtreeFlags=0,o=l,l=s.child;l!==null;)Jg(l,o),l=l.sibling;return re(Zt,Zt.current&1|2),s.child}o=o.sibling}y.tail!==null&&Pn()>Dc&&(s.flags|=128,d=!0,Ml(y,!1),s.lanes=4194304)}else{if(!d)if(o=wc(_),o!==null){if(s.flags|=128,d=!0,o=o.updateQueue,s.updateQueue=o,Mc(s,o),Ml(y,!0),y.tail===null&&y.tailMode==="hidden"&&!_.alternate&&!at)return kt(s),null}else 2*Pn()-y.renderingStartTime>Dc&&l!==536870912&&(s.flags|=128,d=!0,Ml(y,!1),s.lanes=4194304);y.isBackwards?(_.sibling=s.child,s.child=_):(o=y.last,o!==null?o.sibling=_:s.child=_,y.last=_)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Pn(),s.sibling=null,o=Zt.current,re(Zt,d?o&1|2:o&1),s):(kt(s),null);case 22:case 23:return To(s),th(),d=s.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(l&536870912)!==0&&(s.flags&128)===0&&(kt(s),s.subtreeFlags&6&&(s.flags|=8192)):kt(s),l=s.updateQueue,l!==null&&Mc(s,l.retryQueue),l=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==l&&(s.flags|=2048),o!==null&&de(is),null;case 24:return l=null,o!==null&&(l=o.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),vo(Wt),kt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function vw(o,s){switch(qd(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return vo(Wt),Wn(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return pi(s),null;case 13:if(To(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(i(340));pl()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return de(Zt),null;case 4:return Wn(),null;case 10:return vo(s.type),null;case 22:case 23:return To(s),th(),o!==null&&de(is),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return vo(Wt),null;case 25:return null;default:return null}}function Ev(o,s){switch(qd(s),s.tag){case 3:vo(Wt),Wn();break;case 26:case 27:case 5:pi(s);break;case 4:Wn();break;case 13:To(s);break;case 19:de(Zt);break;case 10:vo(s.type);break;case 22:case 23:To(s),th(),o!==null&&de(is);break;case 24:vo(Wt)}}function Nl(o,s){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var y=d.next;l=y;do{if((l.tag&o)===o){d=void 0;var _=l.create,C=l.inst;d=_(),C.destroy=d}l=l.next}while(l!==y)}}catch(w){wt(s,s.return,w)}}function tr(o,s,l){try{var d=s.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var _=y.next;d=_;do{if((d.tag&o)===o){var C=d.inst,w=C.destroy;if(w!==void 0){C.destroy=void 0,y=s;var D=l,$=w;try{$()}catch(Z){wt(y,D,Z)}}}d=d.next}while(d!==_)}}catch(Z){wt(s,s.return,Z)}}function Sv(o){var s=o.updateQueue;if(s!==null){var l=o.stateNode;try{uy(s,l)}catch(d){wt(o,o.return,d)}}}function Av(o,s,l){l.props=rs(o.type,o.memoizedProps),l.state=o.memoizedState;try{l.componentWillUnmount()}catch(d){wt(o,s,d)}}function kl(o,s){try{var l=o.ref;if(l!==null){switch(o.tag){case 26:case 27:case 5:var d=o.stateNode;break;case 30:d=o.stateNode;break;default:d=o.stateNode}typeof l=="function"?o.refCleanup=l(d):l.current=d}}catch(y){wt(o,s,y)}}function Fi(o,s){var l=o.ref,d=o.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(y){wt(o,s,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){wt(o,s,y)}else l.current=null}function Cv(o){var s=o.type,l=o.memoizedProps,d=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(y){wt(o,o.return,y)}}function bh(o,s,l){try{var d=o.stateNode;Bw(d,o.type,l,s),d[Gt]=s}catch(y){wt(o,o.return,y)}}function wv(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&ur(o.type)||o.tag===4}function Mh(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||wv(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&ur(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Nh(o,s,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(o,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(o),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Gc));else if(d!==4&&(d===27&&ur(o.type)&&(l=o.stateNode,s=null),o=o.child,o!==null))for(Nh(o,s,l),o=o.sibling;o!==null;)Nh(o,s,l),o=o.sibling}function Nc(o,s,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,s?l.insertBefore(o,s):l.appendChild(o);else if(d!==4&&(d===27&&ur(o.type)&&(l=o.stateNode),o=o.child,o!==null))for(Nc(o,s,l),o=o.sibling;o!==null;)Nc(o,s,l),o=o.sibling}function Iv(o){var s=o.stateNode,l=o.memoizedProps;try{for(var d=o.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);hn(s,d,l),s[Jt]=o,s[Gt]=l}catch(_){wt(o,o.return,_)}}var Ao=!1,Ft=!1,kh=!1,Rv=typeof WeakSet=="function"?WeakSet:Set,sn=null;function _w(o,s){if(o=o.containerInfo,np=Qc,o=Og(o),Md(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var y=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var C=0,w=-1,D=-1,$=0,Z=0,ee=o,Y=null;t:for(;;){for(var K;ee!==l||y!==0&&ee.nodeType!==3||(w=C+y),ee!==_||d!==0&&ee.nodeType!==3||(D=C+d),ee.nodeType===3&&(C+=ee.nodeValue.length),(K=ee.firstChild)!==null;)Y=ee,ee=K;for(;;){if(ee===o)break t;if(Y===l&&++$===y&&(w=C),Y===_&&++Z===d&&(D=C),(K=ee.nextSibling)!==null)break;ee=Y,Y=ee.parentNode}ee=K}l=w===-1||D===-1?null:{start:w,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(ip={focusedElem:o,selectionRange:l},Qc=!1,sn=s;sn!==null;)if(s=sn,o=s.child,(s.subtreeFlags&1024)!==0&&o!==null)o.return=s,sn=o;else for(;sn!==null;){switch(s=sn,_=s.alternate,o=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,l=s,y=_.memoizedProps,_=_.memoizedState,d=l.stateNode;try{var be=rs(l.type,y,l.elementType===l.type);o=d.getSnapshotBeforeUpdate(be,_),d.__reactInternalSnapshotBeforeUpdate=o}catch(Ie){wt(l,l.return,Ie)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,l=o.nodeType,l===9)sp(o);else if(l===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":sp(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=s.sibling,o!==null){o.return=s.return,sn=o;break}sn=s.return}}function xv(o,s,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:nr(o,l),d&4&&Nl(5,l);break;case 1:if(nr(o,l),d&4)if(o=l.stateNode,s===null)try{o.componentDidMount()}catch(C){wt(l,l.return,C)}else{var y=rs(l.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(y,s,o.__reactInternalSnapshotBeforeUpdate)}catch(C){wt(l,l.return,C)}}d&64&&Sv(l),d&512&&kl(l,l.return);break;case 3:if(nr(o,l),d&64&&(o=l.updateQueue,o!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{uy(o,s)}catch(C){wt(l,l.return,C)}}break;case 27:s===null&&d&4&&Iv(l);case 26:case 5:nr(o,l),s===null&&d&4&&Cv(l),d&512&&kl(l,l.return);break;case 12:nr(o,l);break;case 13:nr(o,l),d&4&&Nv(o,l),d&64&&(o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(l=xw.bind(null,l),Yw(o,l))));break;case 22:if(d=l.memoizedState!==null||Ao,!d){s=s!==null&&s.memoizedState!==null||Ft,y=Ao;var _=Ft;Ao=d,(Ft=s)&&!_?ir(o,l,(l.subtreeFlags&8772)!==0):nr(o,l),Ao=y,Ft=_}break;case 30:break;default:nr(o,l)}}function bv(o){var s=o.alternate;s!==null&&(o.alternate=null,bv(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&Ho(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Mt=null,Ln=!1;function Co(o,s,l){for(l=l.child;l!==null;)Mv(o,s,l),l=l.sibling}function Mv(o,s,l){if(st&&typeof st.onCommitFiberUnmount=="function")try{st.onCommitFiberUnmount(ut,l)}catch{}switch(l.tag){case 26:Ft||Fi(l,s),Co(o,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ft||Fi(l,s);var d=Mt,y=Ln;ur(l.type)&&(Mt=l.stateNode,Ln=!1),Co(o,s,l),ql(l.stateNode),Mt=d,Ln=y;break;case 5:Ft||Fi(l,s);case 6:if(d=Mt,y=Ln,Mt=null,Co(o,s,l),Mt=d,Ln=y,Mt!==null)if(Ln)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(l.stateNode)}catch(_){wt(l,s,_)}else try{Mt.removeChild(l.stateNode)}catch(_){wt(l,s,_)}break;case 18:Mt!==null&&(Ln?(o=Mt,v_(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.stateNode),Ql(o)):v_(Mt,l.stateNode));break;case 4:d=Mt,y=Ln,Mt=l.stateNode.containerInfo,Ln=!0,Co(o,s,l),Mt=d,Ln=y;break;case 0:case 11:case 14:case 15:Ft||tr(2,l,s),Ft||tr(4,l,s),Co(o,s,l);break;case 1:Ft||(Fi(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Av(l,s,d)),Co(o,s,l);break;case 21:Co(o,s,l);break;case 22:Ft=(d=Ft)||l.memoizedState!==null,Co(o,s,l),Ft=d;break;default:Co(o,s,l)}}function Nv(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Ql(o)}catch(l){wt(s,s.return,l)}}function Tw(o){switch(o.tag){case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new Rv),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new Rv),s;default:throw Error(i(435,o.tag))}}function Dh(o,s){var l=Tw(o);s.forEach(function(d){var y=bw.bind(null,o,d);l.has(d)||(l.add(d),d.then(y,y))})}function zn(o,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var y=l[d],_=o,C=s,w=C;e:for(;w!==null;){switch(w.tag){case 27:if(ur(w.type)){Mt=w.stateNode,Ln=!1;break e}break;case 5:Mt=w.stateNode,Ln=!1;break e;case 3:case 4:Mt=w.stateNode.containerInfo,Ln=!0;break e}w=w.return}if(Mt===null)throw Error(i(160));Mv(_,C,y),Mt=null,Ln=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)kv(s,o),s=s.sibling}var _i=null;function kv(o,s){var l=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:zn(s,o),Hn(o),d&4&&(tr(3,o,o.return),Nl(3,o),tr(5,o,o.return));break;case 1:zn(s,o),Hn(o),d&512&&(Ft||l===null||Fi(l,l.return)),d&64&&Ao&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(l=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var y=_i;if(zn(s,o),Hn(o),d&512&&(Ft||l===null||Fi(l,l.return)),d&4){var _=l!==null?l.memoizedState:null;if(d=o.memoizedState,l===null)if(d===null)if(o.stateNode===null){e:{d=o.type,l=o.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Pr]||_[Jt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(d),y.head.insertBefore(_,y.querySelector("head > title"))),hn(_,d,l),_[Jt]=o,Ot(_),d=_;break e;case"link":var C=I_("link","href",y).get(d+(l.href||""));if(C){for(var w=0;w<C.length;w++)if(_=C[w],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(w,1);break t}}_=y.createElement(d),hn(_,d,l),y.head.appendChild(_);break;case"meta":if(C=I_("meta","content",y).get(d+(l.content||""))){for(w=0;w<C.length;w++)if(_=C[w],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(w,1);break t}}_=y.createElement(d),hn(_,d,l),y.head.appendChild(_);break;default:throw Error(i(468,d))}_[Jt]=o,Ot(_),d=_}o.stateNode=d}else R_(y,o.type,o.stateNode);else o.stateNode=w_(y,d,o.memoizedProps);else _!==d?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,d===null?R_(y,o.type,o.stateNode):w_(y,d,o.memoizedProps)):d===null&&o.stateNode!==null&&bh(o,o.memoizedProps,l.memoizedProps)}break;case 27:zn(s,o),Hn(o),d&512&&(Ft||l===null||Fi(l,l.return)),l!==null&&d&4&&bh(o,o.memoizedProps,l.memoizedProps);break;case 5:if(zn(s,o),Hn(o),d&512&&(Ft||l===null||Fi(l,l.return)),o.flags&32){y=o.stateNode;try{ti(y,"")}catch(K){wt(o,o.return,K)}}d&4&&o.stateNode!=null&&(y=o.memoizedProps,bh(o,y,l!==null?l.memoizedProps:y)),d&1024&&(kh=!0);break;case 6:if(zn(s,o),Hn(o),d&4){if(o.stateNode===null)throw Error(i(162));d=o.memoizedProps,l=o.stateNode;try{l.nodeValue=d}catch(K){wt(o,o.return,K)}}break;case 3:if(Yc=null,y=_i,_i=Hc(s.containerInfo),zn(s,o),_i=y,Hn(o),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Ql(s.containerInfo)}catch(K){wt(o,o.return,K)}kh&&(kh=!1,Dv(o));break;case 4:d=_i,_i=Hc(o.stateNode.containerInfo),zn(s,o),Hn(o),_i=d;break;case 12:zn(s,o),Hn(o);break;case 13:zn(s,o),Hn(o),o.child.flags&8192&&o.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Bh=Pn()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Dh(o,d)));break;case 22:y=o.memoizedState!==null;var D=l!==null&&l.memoizedState!==null,$=Ao,Z=Ft;if(Ao=$||y,Ft=Z||D,zn(s,o),Ft=Z,Ao=$,Hn(o),d&8192)e:for(s=o.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(l===null||D||Ao||Ft||ss(o)),l=null,s=o;;){if(s.tag===5||s.tag===26){if(l===null){D=l=s;try{if(_=D.stateNode,y)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{w=D.stateNode;var ee=D.memoizedProps.style,Y=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(K){wt(D,D.return,K)}}}else if(s.tag===6){if(l===null){D=s;try{D.stateNode.nodeValue=y?"":D.memoizedProps}catch(K){wt(D,D.return,K)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=o.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Dh(o,l))));break;case 19:zn(s,o),Hn(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Dh(o,d)));break;case 30:break;case 21:break;default:zn(s,o),Hn(o)}}function Hn(o){var s=o.flags;if(s&2){try{for(var l,d=o.return;d!==null;){if(wv(d)){l=d;break}d=d.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=Mh(o);Nc(o,_,y);break;case 5:var C=l.stateNode;l.flags&32&&(ti(C,""),l.flags&=-33);var w=Mh(o);Nc(o,w,C);break;case 3:case 4:var D=l.stateNode.containerInfo,$=Mh(o);Nh(o,$,D);break;default:throw Error(i(161))}}catch(Z){wt(o,o.return,Z)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function Dv(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;Dv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function nr(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)xv(o,s.alternate,s),s=s.sibling}function ss(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:tr(4,s,s.return),ss(s);break;case 1:Fi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&Av(s,s.return,l),ss(s);break;case 27:ql(s.stateNode);case 26:case 5:Fi(s,s.return),ss(s);break;case 22:s.memoizedState===null&&ss(s);break;case 30:ss(s);break;default:ss(s)}o=o.sibling}}function ir(o,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,y=o,_=s,C=_.flags;switch(_.tag){case 0:case 11:case 15:ir(y,_,l),Nl(4,_);break;case 1:if(ir(y,_,l),d=_,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch($){wt(d,d.return,$)}if(d=_,y=d.updateQueue,y!==null){var w=d.stateNode;try{var D=y.shared.hiddenCallbacks;if(D!==null)for(y.shared.hiddenCallbacks=null,y=0;y<D.length;y++)ly(D[y],w)}catch($){wt(d,d.return,$)}}l&&C&64&&Sv(_),kl(_,_.return);break;case 27:Iv(_);case 26:case 5:ir(y,_,l),l&&d===null&&C&4&&Cv(_),kl(_,_.return);break;case 12:ir(y,_,l);break;case 13:ir(y,_,l),l&&C&4&&Nv(y,_);break;case 22:_.memoizedState===null&&ir(y,_,l),kl(_,_.return);break;case 30:break;default:ir(y,_,l)}s=s.sibling}}function Ph(o,s){var l=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==l&&(o!=null&&o.refCount++,l!=null&&yl(l))}function Vh(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&yl(o))}function qi(o,s,l,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Pv(o,s,l,d),s=s.sibling}function Pv(o,s,l,d){var y=s.flags;switch(s.tag){case 0:case 11:case 15:qi(o,s,l,d),y&2048&&Nl(9,s);break;case 1:qi(o,s,l,d);break;case 3:qi(o,s,l,d),y&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&yl(o)));break;case 12:if(y&2048){qi(o,s,l,d),o=s.stateNode;try{var _=s.memoizedProps,C=_.id,w=_.onPostCommit;typeof w=="function"&&w(C,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(D){wt(s,s.return,D)}}else qi(o,s,l,d);break;case 13:qi(o,s,l,d);break;case 23:break;case 22:_=s.stateNode,C=s.alternate,s.memoizedState!==null?_._visibility&2?qi(o,s,l,d):Dl(o,s):_._visibility&2?qi(o,s,l,d):(_._visibility|=2,oa(o,s,l,d,(s.subtreeFlags&10256)!==0)),y&2048&&Ph(C,s);break;case 24:qi(o,s,l,d),y&2048&&Vh(s.alternate,s);break;default:qi(o,s,l,d)}}function oa(o,s,l,d,y){for(y=y&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var _=o,C=s,w=l,D=d,$=C.flags;switch(C.tag){case 0:case 11:case 15:oa(_,C,w,D,y),Nl(8,C);break;case 23:break;case 22:var Z=C.stateNode;C.memoizedState!==null?Z._visibility&2?oa(_,C,w,D,y):Dl(_,C):(Z._visibility|=2,oa(_,C,w,D,y)),y&&$&2048&&Ph(C.alternate,C);break;case 24:oa(_,C,w,D,y),y&&$&2048&&Vh(C.alternate,C);break;default:oa(_,C,w,D,y)}s=s.sibling}}function Dl(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=o,d=s,y=d.flags;switch(d.tag){case 22:Dl(l,d),y&2048&&Ph(d.alternate,d);break;case 24:Dl(l,d),y&2048&&Vh(d.alternate,d);break;default:Dl(l,d)}s=s.sibling}}var Pl=8192;function ra(o){if(o.subtreeFlags&Pl)for(o=o.child;o!==null;)Vv(o),o=o.sibling}function Vv(o){switch(o.tag){case 26:ra(o),o.flags&Pl&&o.memoizedState!==null&&rI(_i,o.memoizedState,o.memoizedProps);break;case 5:ra(o);break;case 3:case 4:var s=_i;_i=Hc(o.stateNode.containerInfo),ra(o),_i=s;break;case 22:o.memoizedState===null&&(s=o.alternate,s!==null&&s.memoizedState!==null?(s=Pl,Pl=16777216,ra(o),Pl=s):ra(o));break;default:ra(o)}}function Lv(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function Vl(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];sn=d,Ov(d,o)}Lv(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Uv(o),o=o.sibling}function Uv(o){switch(o.tag){case 0:case 11:case 15:Vl(o),o.flags&2048&&tr(9,o,o.return);break;case 3:Vl(o);break;case 12:Vl(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,kc(o)):Vl(o);break;default:Vl(o)}}function kc(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];sn=d,Ov(d,o)}Lv(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:tr(8,s,s.return),kc(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,kc(s));break;default:kc(s)}o=o.sibling}}function Ov(o,s){for(;sn!==null;){var l=sn;switch(l.tag){case 0:case 11:case 15:tr(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:yl(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,sn=d;else e:for(l=o;sn!==null;){d=sn;var y=d.sibling,_=d.return;if(bv(d),d===l){sn=null;break e}if(y!==null){y.return=_,sn=y;break e}sn=_}}}var Ew={getCacheForType:function(o){var s=Tn(Wt),l=s.data.get(o);return l===void 0&&(l=o(),s.data.set(o,l)),l}},Sw=typeof WeakMap=="function"?WeakMap:Map,gt=0,Rt=null,$e=null,et=0,yt=0,$n=null,or=!1,sa=!1,Lh=!1,wo=0,Lt=0,rr=0,as=0,Uh=0,ci=0,aa=0,Ll=null,Un=null,Oh=!1,Bh=0,Dc=1/0,Pc=null,sr=null,dn=0,ar=null,la=null,ua=0,Fh=0,qh=null,Bv=null,Ul=0,Gh=null;function Yn(){if((gt&2)!==0&&et!==0)return et&-et;if(X.T!==null){var o=Xs;return o!==0?o:Qh()}return tn()}function Fv(){ci===0&&(ci=(et&536870912)===0||at?Ct():536870912);var o=ui.current;return o!==null&&(o.flags|=32),ci}function Kn(o,s,l){(o===Rt&&(yt===2||yt===9)||o.cancelPendingCommit!==null)&&(ca(o,0),lr(o,et,ci,!1)),Ue(o,l),((gt&2)===0||o!==Rt)&&(o===Rt&&((gt&2)===0&&(as|=l),Lt===4&&lr(o,et,ci,!1)),Gi(o))}function qv(o,s,l){if((gt&6)!==0)throw Error(i(327));var d=!l&&(s&124)===0&&(s&o.expiredLanes)===0||Fe(o,s),y=d?ww(o,s):$h(o,s,!0),_=d;do{if(y===0){sa&&!d&&lr(o,s,0,!1);break}else{if(l=o.current.alternate,_&&!Aw(l)){y=$h(o,s,!1),_=!1;continue}if(y===2){if(_=s,o.errorRecoveryDisabledLanes&_)var C=0;else C=o.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){s=C;e:{var w=o;y=Ll;var D=w.current.memoizedState.isDehydrated;if(D&&(ca(w,C).flags|=256),C=$h(w,C,!1),C!==2){if(Lh&&!D){w.errorRecoveryDisabledLanes|=_,as|=_,y=4;break e}_=Un,Un=y,_!==null&&(Un===null?Un=_:Un.push.apply(Un,_))}y=C}if(_=!1,y!==2)continue}}if(y===1){ca(o,0),lr(o,s,0,!0);break}e:{switch(d=o,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:lr(d,s,ci,!or);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(y=Bh+300-Pn(),10<y)){if(lr(d,s,ci,!or),ke(d,0,!0)!==0)break e;d.timeoutHandle=g_(Gv.bind(null,d,l,Un,Pc,Oh,s,ci,as,aa,or,_,2,-0,0),y);break e}Gv(d,l,Un,Pc,Oh,s,ci,as,aa,or,_,0,-0,0)}}break}while(!0);Gi(o)}function Gv(o,s,l,d,y,_,C,w,D,$,Z,ee,Y,K){if(o.timeoutHandle=-1,ee=s.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(Hl={stylesheets:null,count:0,unsuspend:oI},Vv(s),ee=sI(),ee!==null)){o.cancelPendingCommit=ee(Qv.bind(null,o,s,_,l,d,y,C,w,D,Z,1,Y,K)),lr(o,_,C,!$);return}Qv(o,s,_,l,d,y,C,w,D)}function Aw(o){for(var s=o;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var y=l[d],_=y.getSnapshot;y=y.value;try{if(!qn(_(),y))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function lr(o,s,l,d){s&=~Uh,s&=~as,o.suspendedLanes|=s,o.pingedLanes&=~s,d&&(o.warmLanes|=s),d=o.expirationTimes;for(var y=s;0<y;){var _=31-Kt(y),C=1<<_;d[_]=-1,y&=~C}l!==0&&nt(o,l,s)}function Vc(){return(gt&6)===0?(Ol(0),!1):!0}function zh(){if($e!==null){if(yt===0)var o=$e.return;else o=$e,yo=ts=null,sh(o),na=null,xl=0,o=$e;for(;o!==null;)Ev(o.alternate,o),o=o.return;$e=null}}function ca(o,s){var l=o.timeoutHandle;l!==-1&&(o.timeoutHandle=-1,qw(l)),l=o.cancelPendingCommit,l!==null&&(o.cancelPendingCommit=null,l()),zh(),Rt=o,$e=l=po(o.current,null),et=s,yt=0,$n=null,or=!1,sa=Fe(o,s),Lh=!1,aa=ci=Uh=as=rr=Lt=0,Un=Ll=null,Oh=!1,(s&8)!==0&&(s|=s&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=s;0<d;){var y=31-Kt(d),_=1<<y;s|=o[y],d&=~_}return wo=s,ic(),l}function zv(o,s){Ge=null,X.H=Sc,s===_l||s===dc?(s=sy(),yt=3):s===iy?(s=sy(),yt=4):yt=s===av?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,$n=s,$e===null&&(Lt=1,Rc(o,ri(s,o.current)))}function Hv(){var o=X.H;return X.H=Sc,o===null?Sc:o}function $v(){var o=X.A;return X.A=Ew,o}function Hh(){Lt=4,or||(et&4194048)!==et&&ui.current!==null||(sa=!0),(rr&134217727)===0&&(as&134217727)===0||Rt===null||lr(Rt,et,ci,!1)}function $h(o,s,l){var d=gt;gt|=2;var y=Hv(),_=$v();(Rt!==o||et!==s)&&(Pc=null,ca(o,s)),s=!1;var C=Lt;e:do try{if(yt!==0&&$e!==null){var w=$e,D=$n;switch(yt){case 8:zh(),C=6;break e;case 3:case 2:case 9:case 6:ui.current===null&&(s=!0);var $=yt;if(yt=0,$n=null,fa(o,w,D,$),l&&sa){C=0;break e}break;default:$=yt,yt=0,$n=null,fa(o,w,D,$)}}Cw(),C=Lt;break}catch(Z){zv(o,Z)}while(!0);return s&&o.shellSuspendCounter++,yo=ts=null,gt=d,X.H=y,X.A=_,$e===null&&(Rt=null,et=0,ic()),C}function Cw(){for(;$e!==null;)Yv($e)}function ww(o,s){var l=gt;gt|=2;var d=Hv(),y=$v();Rt!==o||et!==s?(Pc=null,Dc=Pn()+500,ca(o,s)):sa=Fe(o,s);e:do try{if(yt!==0&&$e!==null){s=$e;var _=$n;t:switch(yt){case 1:yt=0,$n=null,fa(o,s,_,1);break;case 2:case 9:if(oy(_)){yt=0,$n=null,Kv(s);break}s=function(){yt!==2&&yt!==9||Rt!==o||(yt=7),Gi(o)},_.then(s,s);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:oy(_)?(yt=0,$n=null,Kv(s)):(yt=0,$n=null,fa(o,s,_,7));break;case 5:var C=null;switch($e.tag){case 26:C=$e.memoizedState;case 5:case 27:var w=$e;if(!C||x_(C)){yt=0,$n=null;var D=w.sibling;if(D!==null)$e=D;else{var $=w.return;$!==null?($e=$,Lc($)):$e=null}break t}}yt=0,$n=null,fa(o,s,_,5);break;case 6:yt=0,$n=null,fa(o,s,_,6);break;case 8:zh(),Lt=6;break e;default:throw Error(i(462))}}Iw();break}catch(Z){zv(o,Z)}while(!0);return yo=ts=null,X.H=d,X.A=y,gt=l,$e!==null?0:(Rt=null,et=0,ic(),Lt)}function Iw(){for(;$e!==null&&!to();)Yv($e)}function Yv(o){var s=_v(o.alternate,o,wo);o.memoizedProps=o.pendingProps,s===null?Lc(o):$e=s}function Kv(o){var s=o,l=s.alternate;switch(s.tag){case 15:case 0:s=hv(l,s,s.pendingProps,s.type,void 0,et);break;case 11:s=hv(l,s,s.pendingProps,s.type.render,s.ref,et);break;case 5:sh(s);default:Ev(l,s),s=$e=Jg(s,wo),s=_v(l,s,wo)}o.memoizedProps=o.pendingProps,s===null?Lc(o):$e=s}function fa(o,s,l,d){yo=ts=null,sh(s),na=null,xl=0;var y=s.return;try{if(mw(o,y,s,l,et)){Lt=1,Rc(o,ri(l,o.current)),$e=null;return}}catch(_){if(y!==null)throw $e=y,_;Lt=1,Rc(o,ri(l,o.current)),$e=null;return}s.flags&32768?(at||d===1?o=!0:sa||(et&536870912)!==0?o=!1:(or=o=!0,(d===2||d===9||d===3||d===6)&&(d=ui.current,d!==null&&d.tag===13&&(d.flags|=16384))),Jv(s,o)):Lc(s)}function Lc(o){var s=o;do{if((s.flags&32768)!==0){Jv(s,or);return}o=s.return;var l=yw(s.alternate,s,wo);if(l!==null){$e=l;return}if(s=s.sibling,s!==null){$e=s;return}$e=s=o}while(s!==null);Lt===0&&(Lt=5)}function Jv(o,s){do{var l=vw(o.alternate,o);if(l!==null){l.flags&=32767,$e=l;return}if(l=o.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(o=o.sibling,o!==null)){$e=o;return}$e=o=l}while(o!==null);Lt=6,$e=null}function Qv(o,s,l,d,y,_,C,w,D){o.cancelPendingCommit=null;do Uc();while(dn!==0);if((gt&6)!==0)throw Error(i(327));if(s!==null){if(s===o.current)throw Error(i(177));if(_=s.lanes|s.childLanes,_|=Vd,He(o,l,_,C,w,D),o===Rt&&($e=Rt=null,et=0),la=s,ar=o,ua=l,Fh=_,qh=y,Bv=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Mw(jn,function(){return e_(),null})):(o.callbackNode=null,o.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=X.T,X.T=null,y=he.p,he.p=2,C=gt,gt|=4;try{_w(o,s,l)}finally{gt=C,he.p=y,X.T=d}}dn=1,Xv(),Wv(),Zv()}}function Xv(){if(dn===1){dn=0;var o=ar,s=la,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var d=he.p;he.p=2;var y=gt;gt|=4;try{kv(s,o);var _=ip,C=Og(o.containerInfo),w=_.focusedElem,D=_.selectionRange;if(C!==w&&w&&w.ownerDocument&&Ug(w.ownerDocument.documentElement,w)){if(D!==null&&Md(w)){var $=D.start,Z=D.end;if(Z===void 0&&(Z=$),"selectionStart"in w)w.selectionStart=$,w.selectionEnd=Math.min(Z,w.value.length);else{var ee=w.ownerDocument||document,Y=ee&&ee.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),be=w.textContent.length,Ie=Math.min(D.start,be),St=D.end===void 0?Ie:Math.min(D.end,be);!K.extend&&Ie>St&&(C=St,St=Ie,Ie=C);var G=Lg(w,Ie),B=Lg(w,St);if(G&&B&&(K.rangeCount!==1||K.anchorNode!==G.node||K.anchorOffset!==G.offset||K.focusNode!==B.node||K.focusOffset!==B.offset)){var H=ee.createRange();H.setStart(G.node,G.offset),K.removeAllRanges(),Ie>St?(K.addRange(H),K.extend(B.node,B.offset)):(H.setEnd(B.node,B.offset),K.addRange(H))}}}}for(ee=[],K=w;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ee.length;w++){var j=ee[w];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}Qc=!!np,ip=np=null}finally{gt=y,he.p=d,X.T=l}}o.current=s,dn=2}}function Wv(){if(dn===2){dn=0;var o=ar,s=la,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var d=he.p;he.p=2;var y=gt;gt|=4;try{xv(o,s.alternate,s)}finally{gt=y,he.p=d,X.T=l}}dn=3}}function Zv(){if(dn===4||dn===3){dn=0,Is();var o=ar,s=la,l=ua,d=Bv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?dn=5:(dn=0,la=ar=null,jv(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(sr=null),ct(l),s=s.stateNode,st&&typeof st.onCommitFiberRoot=="function")try{st.onCommitFiberRoot(ut,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=X.T,y=he.p,he.p=2,X.T=null;try{for(var _=o.onRecoverableError,C=0;C<d.length;C++){var w=d[C];_(w.value,{componentStack:w.stack})}}finally{X.T=s,he.p=y}}(ua&3)!==0&&Uc(),Gi(o),y=o.pendingLanes,(l&4194090)!==0&&(y&42)!==0?o===Gh?Ul++:(Ul=0,Gh=o):Ul=0,Ol(0)}}function jv(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,yl(s)))}function Uc(o){return Xv(),Wv(),Zv(),e_()}function e_(){if(dn!==5)return!1;var o=ar,s=Fh;Fh=0;var l=ct(ua),d=X.T,y=he.p;try{he.p=32>l?32:l,X.T=null,l=qh,qh=null;var _=ar,C=ua;if(dn=0,la=ar=null,ua=0,(gt&6)!==0)throw Error(i(331));var w=gt;if(gt|=4,Uv(_.current),Pv(_,_.current,C,l),gt=w,Ol(0,!1),st&&typeof st.onPostCommitFiberRoot=="function")try{st.onPostCommitFiberRoot(ut,_)}catch{}return!0}finally{he.p=y,X.T=d,jv(o,s)}}function t_(o,s,l){s=ri(l,s),s=Th(o.stateNode,s,2),o=Wo(o,s,2),o!==null&&(Ue(o,2),Gi(o))}function wt(o,s,l){if(o.tag===3)t_(o,o,l);else for(;s!==null;){if(s.tag===3){t_(s,o,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(sr===null||!sr.has(d))){o=ri(l,o),l=rv(2),d=Wo(s,l,2),d!==null&&(sv(l,d,s,o),Ue(d,2),Gi(d));break}}s=s.return}}function Yh(o,s,l){var d=o.pingCache;if(d===null){d=o.pingCache=new Sw;var y=new Set;d.set(s,y)}else y=d.get(s),y===void 0&&(y=new Set,d.set(s,y));y.has(l)||(Lh=!0,y.add(l),o=Rw.bind(null,o,s,l),s.then(o,o))}function Rw(o,s,l){var d=o.pingCache;d!==null&&d.delete(s),o.pingedLanes|=o.suspendedLanes&l,o.warmLanes&=~l,Rt===o&&(et&l)===l&&(Lt===4||Lt===3&&(et&62914560)===et&&300>Pn()-Bh?(gt&2)===0&&ca(o,0):Uh|=l,aa===et&&(aa=0)),Gi(o)}function n_(o,s){s===0&&(s=Ut()),o=Ys(o,s),o!==null&&(Ue(o,s),Gi(o))}function xw(o){var s=o.memoizedState,l=0;s!==null&&(l=s.retryLane),n_(o,l)}function bw(o,s){var l=0;switch(o.tag){case 13:var d=o.stateNode,y=o.memoizedState;y!==null&&(l=y.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(s),n_(o,l)}function Mw(o,s){return eo(o,s)}var Oc=null,da=null,Kh=!1,Bc=!1,Jh=!1,ls=0;function Gi(o){o!==da&&o.next===null&&(da===null?Oc=da=o:da=da.next=o),Bc=!0,Kh||(Kh=!0,kw())}function Ol(o,s){if(!Jh&&Bc){Jh=!0;do for(var l=!1,d=Oc;d!==null;){if(o!==0){var y=d.pendingLanes;if(y===0)var _=0;else{var C=d.suspendedLanes,w=d.pingedLanes;_=(1<<31-Kt(42|o)+1)-1,_&=y&~(C&~w),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,s_(d,_))}else _=et,_=ke(d,d===Rt?_:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(_&3)===0||Fe(d,_)||(l=!0,s_(d,_));d=d.next}while(l);Jh=!1}}function Nw(){i_()}function i_(){Bc=Kh=!1;var o=0;ls!==0&&(Fw()&&(o=ls),ls=0);for(var s=Pn(),l=null,d=Oc;d!==null;){var y=d.next,_=o_(d,s);_===0?(d.next=null,l===null?Oc=y:l.next=y,y===null&&(da=l)):(l=d,(o!==0||(_&3)!==0)&&(Bc=!0)),d=y}Ol(o)}function o_(o,s){for(var l=o.suspendedLanes,d=o.pingedLanes,y=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var C=31-Kt(_),w=1<<C,D=y[C];D===-1?((w&l)===0||(w&d)!==0)&&(y[C]=Ke(w,s)):D<=s&&(o.expiredLanes|=w),_&=~w}if(s=Rt,l=et,l=ke(o,o===s?l:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d=o.callbackNode,l===0||o===s&&(yt===2||yt===9)||o.cancelPendingCommit!==null)return d!==null&&d!==null&&mi(d),o.callbackNode=null,o.callbackPriority=0;if((l&3)===0||Fe(o,l)){if(s=l&-l,s===o.callbackPriority)return s;switch(d!==null&&mi(d),ct(l)){case 2:case 8:l=Zn;break;case 32:l=jn;break;case 268435456:l=qo;break;default:l=jn}return d=r_.bind(null,o),l=eo(l,d),o.callbackPriority=s,o.callbackNode=l,s}return d!==null&&d!==null&&mi(d),o.callbackPriority=2,o.callbackNode=null,2}function r_(o,s){if(dn!==0&&dn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var l=o.callbackNode;if(Uc()&&o.callbackNode!==l)return null;var d=et;return d=ke(o,o===Rt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d===0?null:(qv(o,d,s),o_(o,Pn()),o.callbackNode!=null&&o.callbackNode===l?r_.bind(null,o):null)}function s_(o,s){if(Uc())return null;qv(o,s,!0)}function kw(){Gw(function(){(gt&6)!==0?eo(Dr,Nw):i_()})}function Qh(){return ls===0&&(ls=Ct()),ls}function a_(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Ps(""+o)}function l_(o,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,o.id&&l.setAttribute("form",o.id),s.parentNode.insertBefore(l,s),o=new FormData(o),l.parentNode.removeChild(l),o}function Dw(o,s,l,d,y){if(s==="submit"&&l&&l.stateNode===y){var _=a_((y[Gt]||null).action),C=d.submitter;C&&(s=(s=C[Gt]||null)?a_(s.formAction):C.getAttribute("formAction"),s!==null&&(_=s,C=null));var w=new Vs("action","action",null,d,y);o.push({event:w,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ls!==0){var D=C?l_(y,C):new FormData(y);mh(l,{pending:!0,data:D,method:y.method,action:_},null,D)}}else typeof _=="function"&&(w.preventDefault(),D=C?l_(y,C):new FormData(y),mh(l,{pending:!0,data:D,method:y.method,action:_},_,D))},currentTarget:y}]})}}for(var Xh=0;Xh<Pd.length;Xh++){var Wh=Pd[Xh],Pw=Wh.toLowerCase(),Vw=Wh[0].toUpperCase()+Wh.slice(1);vi(Pw,"on"+Vw)}vi(qg,"onAnimationEnd"),vi(Gg,"onAnimationIteration"),vi(zg,"onAnimationStart"),vi("dblclick","onDoubleClick"),vi("focusin","onFocus"),vi("focusout","onBlur"),vi(ZC,"onTransitionRun"),vi(jC,"onTransitionStart"),vi(ew,"onTransitionCancel"),vi(Hg,"onTransitionEnd"),oo("onMouseEnter",["mouseout","mouseover"]),oo("onMouseLeave",["mouseout","mouseover"]),oo("onPointerEnter",["pointerout","pointerover"]),oo("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bl));function u_(o,s){s=(s&4)!==0;for(var l=0;l<o.length;l++){var d=o[l],y=d.event;d=d.listeners;e:{var _=void 0;if(s)for(var C=d.length-1;0<=C;C--){var w=d[C],D=w.instance,$=w.currentTarget;if(w=w.listener,D!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=$;try{_(y)}catch(Z){Ic(Z)}y.currentTarget=null,_=D}else for(C=0;C<d.length;C++){if(w=d[C],D=w.instance,$=w.currentTarget,w=w.listener,D!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=$;try{_(y)}catch(Z){Ic(Z)}y.currentTarget=null,_=D}}}}function Ye(o,s){var l=s[Xa];l===void 0&&(l=s[Xa]=new Set);var d=o+"__bubble";l.has(d)||(c_(s,o,2,!1),l.add(d))}function Zh(o,s,l){var d=0;s&&(d|=4),c_(l,o,d,s)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function jh(o){if(!o[Fc]){o[Fc]=!0,Wa.forEach(function(l){l!=="selectionchange"&&(Lw.has(l)||Zh(l,!1,o),Zh(l,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[Fc]||(s[Fc]=!0,Zh("selectionchange",!1,s))}}function c_(o,s,l,d){switch(P_(s)){case 2:var y=uI;break;case 8:y=cI;break;default:y=hp}l=y.bind(null,s,l,o),y=void 0,!ii||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),d?y!==void 0?o.addEventListener(s,l,{capture:!0,passive:y}):o.addEventListener(s,l,!0):y!==void 0?o.addEventListener(s,l,{passive:y}):o.addEventListener(s,l,!1)}function ep(o,s,l,d,y){var _=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var w=d.stateNode.containerInfo;if(w===y)break;if(C===4)for(C=d.return;C!==null;){var D=C.tag;if((D===3||D===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;w!==null;){if(C=io(w),C===null)return;if(D=C.tag,D===5||D===6||D===26||D===27){d=_=C;continue e}w=w.parentNode}}d=d.return}Gu(function(){var $=_,Z=ni(l),ee=[];e:{var Y=$g.get(o);if(Y!==void 0){var K=Vs,be=o;switch(o){case"keypress":if(Di(l)===0)break e;case"keydown":case"keyup":K=qs;break;case"focusin":be="focus",K=Os;break;case"focusout":be="blur",K=Os;break;case"beforeblur":case"afterblur":K=Os;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=oi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Id;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Xu;break;case qg:case Gg:case zg:K=Bs;break;case Hg:K=Zu;break;case"scroll":case"scrollend":K=zu;break;case"wheel":K=Gs;break;case"copy":case"cut":case"paste":K=Fs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=ul;break;case"toggle":case"beforetoggle":K=ec}var Ie=(s&4)!==0,St=!Ie&&(o==="scroll"||o==="scrollend"),G=Ie?Y!==null?Y+"Capture":null:Y;Ie=[];for(var B=$,H;B!==null;){var j=B;if(H=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||H===null||G===null||(j=qr(B,G),j!=null&&Ie.push(Fl(B,j,H))),St)break;B=B.return}0<Ie.length&&(Y=new K(Y,be,null,l,Z),ee.push({event:Y,listeners:Ie}))}}if((s&7)===0){e:{if(Y=o==="mouseover"||o==="pointerover",K=o==="mouseout"||o==="pointerout",Y&&l!==ao&&(be=l.relatedTarget||l.fromElement)&&(io(be)||be[ei]))break e;if((K||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(be=l.relatedTarget||l.toElement,K=$,be=be?io(be):null,be!==null&&(St=a(be),Ie=be.tag,be!==St||Ie!==5&&Ie!==27&&Ie!==6)&&(be=null)):(K=null,be=$),K!==be)){if(Ie=oi,j="onMouseLeave",G="onMouseEnter",B="mouse",(o==="pointerout"||o==="pointerover")&&(Ie=ul,j="onPointerLeave",G="onPointerEnter",B="pointer"),St=K==null?Y:bi(K),H=be==null?Y:bi(be),Y=new Ie(j,B+"leave",K,l,Z),Y.target=St,Y.relatedTarget=H,j=null,io(Z)===$&&(Ie=new Ie(G,B+"enter",be,l,Z),Ie.target=H,Ie.relatedTarget=St,j=Ie),St=j,K&&be)t:{for(Ie=K,G=be,B=0,H=Ie;H;H=ha(H))B++;for(H=0,j=G;j;j=ha(j))H++;for(;0<B-H;)Ie=ha(Ie),B--;for(;0<H-B;)G=ha(G),H--;for(;B--;){if(Ie===G||G!==null&&Ie===G.alternate)break t;Ie=ha(Ie),G=ha(G)}Ie=null}else Ie=null;K!==null&&f_(ee,Y,K,Ie,!1),be!==null&&St!==null&&f_(ee,St,be,Ie,!0)}}e:{if(Y=$?bi($):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var ge=Mg;else if(Xt(Y))if(Ng)ge=QC;else{ge=KC;var ze=YC}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?$&&nl($.elementType)&&(ge=Mg):ge=JC;if(ge&&(ge=ge(o,$))){ho(ee,ge,l,Z);break e}ze&&ze(o,Y,$),o==="focusout"&&$&&Y.type==="number"&&$.memoizedProps.value!=null&&Yo(Y,"number",Y.value)}switch(ze=$?bi($):window,o){case"focusin":(Xt(ze)||ze.contentEditable==="true")&&(zs=ze,Nd=$,dl=null);break;case"focusout":dl=Nd=zs=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,Bg(ee,l,Z);break;case"selectionchange":if(WC)break;case"keydown":case"keyup":Bg(ee,l,Z)}var Te;if(Li)e:{switch(o){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Ze?Q(o,l)&&(xe="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(xe="onCompositionStart");xe&&(A&&l.locale!=="ko"&&(Ze||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Ze&&(Te=ol()):(ki=Z,Ko="value"in ki?ki.value:ki.textContent,Ze=!0)),ze=qc($,xe),0<ze.length&&(xe=new al(xe,o,null,l,Z),ee.push({event:xe,listeners:ze}),Te?xe.data=Te:(Te=ce(l),Te!==null&&(xe.data=Te)))),(Te=T?Qt(o,l):je(o,l))&&(xe=qc($,"onBeforeInput"),0<xe.length&&(ze=new al("onBeforeInput","beforeinput",null,l,Z),ee.push({event:ze,listeners:xe}),ze.data=Te)),Dw(ee,o,$,l,Z)}u_(ee,s)})}function Fl(o,s,l){return{instance:o,listener:s,currentTarget:l}}function qc(o,s){for(var l=s+"Capture",d=[];o!==null;){var y=o,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=qr(o,l),y!=null&&d.unshift(Fl(o,y,_)),y=qr(o,s),y!=null&&d.push(Fl(o,y,_))),o.tag===3)return d;o=o.return}return[]}function ha(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function f_(o,s,l,d,y){for(var _=s._reactName,C=[];l!==null&&l!==d;){var w=l,D=w.alternate,$=w.stateNode;if(w=w.tag,D!==null&&D===d)break;w!==5&&w!==26&&w!==27||$===null||(D=$,y?($=qr(l,_),$!=null&&C.unshift(Fl(l,$,D))):y||($=qr(l,_),$!=null&&C.push(Fl(l,$,D)))),l=l.return}C.length!==0&&o.push({event:s,listeners:C})}var Uw=/\r\n?/g,Ow=/\u0000|\uFFFD/g;function d_(o){return(typeof o=="string"?o:""+o).replace(Uw,`
`).replace(Ow,"")}function h_(o,s){return s=d_(s),d_(o)===s}function Gc(){}function Et(o,s,l,d,y,_){switch(l){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||ti(o,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&ti(o,""+d);break;case"className":Mi(o,"class",d);break;case"tabIndex":Mi(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Mi(o,l,d);break;case"style":tl(o,d,_);break;case"data":if(s!=="object"){Mi(o,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||l!=="href")){o.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(l);break}d=Ps(""+d),o.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(s!=="input"&&Et(o,s,"name",y.name,y,null),Et(o,s,"formEncType",y.formEncType,y,null),Et(o,s,"formMethod",y.formMethod,y,null),Et(o,s,"formTarget",y.formTarget,y,null)):(Et(o,s,"encType",y.encType,y,null),Et(o,s,"method",y.method,y,null),Et(o,s,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(l);break}d=Ps(""+d),o.setAttribute(l,d);break;case"onClick":d!=null&&(o.onclick=Gc);break;case"onScroll":d!=null&&Ye("scroll",o);break;case"onScrollEnd":d!=null&&Ye("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}l=Ps(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(l,""+d):o.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(l,""):o.removeAttribute(l);break;case"capture":case"download":d===!0?o.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(l,d):o.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(l,d):o.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(l):o.setAttribute(l,d);break;case"popover":Ye("beforetoggle",o),Ye("toggle",o),$o(o,"popover",d);break;case"xlinkActuate":un(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":un(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":un(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":un(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":un(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":un(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":un(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":un(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":un(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":$o(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Cd.get(l)||l,$o(o,l,d))}}function tp(o,s,l,d,y,_){switch(l){case"style":tl(o,d,_);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"children":typeof d=="string"?ti(o,d):(typeof d=="number"||typeof d=="bigint")&&ti(o,""+d);break;case"onScroll":d!=null&&Ye("scroll",o);break;case"onScrollEnd":d!=null&&Ye("scrollend",o);break;case"onClick":d!=null&&(o.onclick=Gc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bs.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),s=l.slice(2,y?l.length-7:void 0),_=o[Gt]||null,_=_!=null?_[l]:null,typeof _=="function"&&o.removeEventListener(s,_,y),typeof d=="function")){typeof _!="function"&&_!==null&&(l in o?o[l]=null:o.hasAttribute(l)&&o.removeAttribute(l)),o.addEventListener(s,d,y);break e}l in o?o[l]=d:d===!0?o.setAttribute(l,""):$o(o,l,d)}}}function hn(o,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",o),Ye("load",o);var d=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var C=l[_];if(C!=null)switch(_){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Et(o,s,_,C,l,null)}}y&&Et(o,s,"srcSet",l.srcSet,l,null),d&&Et(o,s,"src",l.src,l,null);return;case"input":Ye("invalid",o);var w=_=C=y=null,D=null,$=null;for(d in l)if(l.hasOwnProperty(d)){var Z=l[d];if(Z!=null)switch(d){case"name":y=Z;break;case"type":C=Z;break;case"checked":D=Z;break;case"defaultChecked":$=Z;break;case"value":_=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:Et(o,s,d,Z,l,null)}}Or(o,_,w,D,$,C,y,!1),Ds(o);return;case"select":Ye("invalid",o),d=C=_=null;for(y in l)if(l.hasOwnProperty(y)&&(w=l[y],w!=null))switch(y){case"value":_=w;break;case"defaultValue":C=w;break;case"multiple":d=w;default:Et(o,s,y,w,l,null)}s=_,l=C,o.multiple=!!d,s!=null?so(o,!!d,s,!1):l!=null&&so(o,!!d,l,!0);return;case"textarea":Ye("invalid",o),_=y=d=null;for(C in l)if(l.hasOwnProperty(C)&&(w=l[C],w!=null))switch(C){case"value":d=w;break;case"defaultValue":y=w;break;case"children":_=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:Et(o,s,C,w,l,null)}Br(o,d,y,_),Ds(o);return;case"option":for(D in l)if(l.hasOwnProperty(D)&&(d=l[D],d!=null))switch(D){case"selected":o.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Et(o,s,D,d,l,null)}return;case"dialog":Ye("beforetoggle",o),Ye("toggle",o),Ye("cancel",o),Ye("close",o);break;case"iframe":case"object":Ye("load",o);break;case"video":case"audio":for(d=0;d<Bl.length;d++)Ye(Bl[d],o);break;case"image":Ye("error",o),Ye("load",o);break;case"details":Ye("toggle",o);break;case"embed":case"source":case"link":Ye("error",o),Ye("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in l)if(l.hasOwnProperty($)&&(d=l[$],d!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Et(o,s,$,d,l,null)}return;default:if(nl(s)){for(Z in l)l.hasOwnProperty(Z)&&(d=l[Z],d!==void 0&&tp(o,s,Z,d,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(d=l[w],d!=null&&Et(o,s,w,d,l,null))}function Bw(o,s,l,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,C=null,w=null,D=null,$=null,Z=null;for(K in l){var ee=l[K];if(l.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":D=ee;default:d.hasOwnProperty(K)||Et(o,s,K,null,d,ee)}}for(var Y in d){var K=d[Y];if(ee=l[Y],d.hasOwnProperty(Y)&&(K!=null||ee!=null))switch(Y){case"type":_=K;break;case"name":y=K;break;case"checked":$=K;break;case"defaultChecked":Z=K;break;case"value":C=K;break;case"defaultValue":w=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:K!==ee&&Et(o,s,Y,K,d,ee)}}Fn(o,C,w,D,$,Z,_,y);return;case"select":K=C=w=Y=null;for(_ in l)if(D=l[_],l.hasOwnProperty(_)&&D!=null)switch(_){case"value":break;case"multiple":K=D;default:d.hasOwnProperty(_)||Et(o,s,_,null,d,D)}for(y in d)if(_=d[y],D=l[y],d.hasOwnProperty(y)&&(_!=null||D!=null))switch(y){case"value":Y=_;break;case"defaultValue":w=_;break;case"multiple":C=_;default:_!==D&&Et(o,s,y,_,d,D)}s=w,l=C,d=K,Y!=null?so(o,!!l,Y,!1):!!d!=!!l&&(s!=null?so(o,!!l,s,!0):so(o,!!l,l?[]:"",!1));return;case"textarea":K=Y=null;for(w in l)if(y=l[w],l.hasOwnProperty(w)&&y!=null&&!d.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Et(o,s,w,null,d,y)}for(C in d)if(y=d[C],_=l[C],d.hasOwnProperty(C)&&(y!=null||_!=null))switch(C){case"value":Y=y;break;case"defaultValue":K=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&Et(o,s,C,y,d,_)}_t(o,Y,K);return;case"option":for(var be in l)if(Y=l[be],l.hasOwnProperty(be)&&Y!=null&&!d.hasOwnProperty(be))switch(be){case"selected":o.selected=!1;break;default:Et(o,s,be,null,d,Y)}for(D in d)if(Y=d[D],K=l[D],d.hasOwnProperty(D)&&Y!==K&&(Y!=null||K!=null))switch(D){case"selected":o.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:Et(o,s,D,Y,d,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in l)Y=l[Ie],l.hasOwnProperty(Ie)&&Y!=null&&!d.hasOwnProperty(Ie)&&Et(o,s,Ie,null,d,Y);for($ in d)if(Y=d[$],K=l[$],d.hasOwnProperty($)&&Y!==K&&(Y!=null||K!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:Et(o,s,$,Y,d,K)}return;default:if(nl(s)){for(var St in l)Y=l[St],l.hasOwnProperty(St)&&Y!==void 0&&!d.hasOwnProperty(St)&&tp(o,s,St,void 0,d,Y);for(Z in d)Y=d[Z],K=l[Z],!d.hasOwnProperty(Z)||Y===K||Y===void 0&&K===void 0||tp(o,s,Z,Y,d,K);return}}for(var G in l)Y=l[G],l.hasOwnProperty(G)&&Y!=null&&!d.hasOwnProperty(G)&&Et(o,s,G,null,d,Y);for(ee in d)Y=d[ee],K=l[ee],!d.hasOwnProperty(ee)||Y===K||Y==null&&K==null||Et(o,s,ee,Y,d,K)}var np=null,ip=null;function zc(o){return o.nodeType===9?o:o.ownerDocument}function p_(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m_(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function op(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var rp=null;function Fw(){var o=window.event;return o&&o.type==="popstate"?o===rp?!1:(rp=o,!0):(rp=null,!1)}var g_=typeof setTimeout=="function"?setTimeout:void 0,qw=typeof clearTimeout=="function"?clearTimeout:void 0,y_=typeof Promise=="function"?Promise:void 0,Gw=typeof queueMicrotask=="function"?queueMicrotask:typeof y_<"u"?function(o){return y_.resolve(null).then(o).catch(zw)}:g_;function zw(o){setTimeout(function(){throw o})}function ur(o){return o==="head"}function v_(o,s){var l=s,d=0,y=0;do{var _=l.nextSibling;if(o.removeChild(l),_&&_.nodeType===8)if(l=_.data,l==="/$"){if(0<d&&8>d){l=d;var C=o.ownerDocument;if(l&1&&ql(C.documentElement),l&2&&ql(C.body),l&4)for(l=C.head,ql(l),C=l.firstChild;C;){var w=C.nextSibling,D=C.nodeName;C[Pr]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=w}}if(y===0){o.removeChild(_),Ql(s);return}y--}else l==="$"||l==="$?"||l==="$!"?y++:d=l.charCodeAt(0)-48;else d=0;l=_}while(l);Ql(s)}function sp(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":sp(l),Ho(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}o.removeChild(l)}}function Hw(o,s,l,d){for(;o.nodeType===1;){var y=l;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[Pr])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=Ti(o.nextSibling),o===null)break}return null}function $w(o,s,l){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Ti(o.nextSibling),o===null))return null;return o}function ap(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function Yw(o,s){var l=o.ownerDocument;if(o.data!=="$?"||l.readyState==="complete")s();else{var d=function(){s(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),o._reactRetry=d}}function Ti(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return o}var lp=null;function __(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return o;s--}else l==="/$"&&s++}o=o.previousSibling}return null}function T_(o,s,l){switch(s=zc(l),o){case"html":if(o=s.documentElement,!o)throw Error(i(452));return o;case"head":if(o=s.head,!o)throw Error(i(453));return o;case"body":if(o=s.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function ql(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);Ho(o)}var fi=new Map,E_=new Set;function Hc(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Io=he.d;he.d={f:Kw,r:Jw,D:Qw,C:Xw,L:Ww,m:Zw,X:eI,S:jw,M:tI};function Kw(){var o=Io.f(),s=Vc();return o||s}function Jw(o){var s=xi(o);s!==null&&s.tag===5&&s.type==="form"?qy(s):Io.r(o)}var pa=typeof document>"u"?null:document;function S_(o,s,l){var d=pa;if(d&&typeof s=="string"&&s){var y=zt(s);y='link[rel="'+o+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),E_.has(y)||(E_.add(y),o={rel:o,crossOrigin:l,href:s},d.querySelector(y)===null&&(s=d.createElement("link"),hn(s,"link",o),Ot(s),d.head.appendChild(s)))}}function Qw(o){Io.D(o),S_("dns-prefetch",o,null)}function Xw(o,s){Io.C(o,s),S_("preconnect",o,s)}function Ww(o,s,l){Io.L(o,s,l);var d=pa;if(d&&o&&s){var y='link[rel="preload"][as="'+zt(s)+'"]';s==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+zt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+zt(l.imageSizes)+'"]')):y+='[href="'+zt(o)+'"]';var _=y;switch(s){case"style":_=ma(o);break;case"script":_=ga(o)}fi.has(_)||(o=v({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:o,as:s},l),fi.set(_,o),d.querySelector(y)!==null||s==="style"&&d.querySelector(Gl(_))||s==="script"&&d.querySelector(zl(_))||(s=d.createElement("link"),hn(s,"link",o),Ot(s),d.head.appendChild(s)))}}function Zw(o,s){Io.m(o,s);var l=pa;if(l&&o){var d=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+zt(d)+'"][href="'+zt(o)+'"]',_=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ga(o)}if(!fi.has(_)&&(o=v({rel:"modulepreload",href:o},s),fi.set(_,o),l.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(zl(_)))return}d=l.createElement("link"),hn(d,"link",o),Ot(d),l.head.appendChild(d)}}}function jw(o,s,l){Io.S(o,s,l);var d=pa;if(d&&o){var y=xn(d).hoistableStyles,_=ma(o);s=s||"default";var C=y.get(_);if(!C){var w={loading:0,preload:null};if(C=d.querySelector(Gl(_)))w.loading=5;else{o=v({rel:"stylesheet",href:o,"data-precedence":s},l),(l=fi.get(_))&&up(o,l);var D=C=d.createElement("link");Ot(D),hn(D,"link",o),D._p=new Promise(function($,Z){D.onload=$,D.onerror=Z}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,$c(C,s,d)}C={type:"stylesheet",instance:C,count:1,state:w},y.set(_,C)}}}function eI(o,s){Io.X(o,s);var l=pa;if(l&&o){var d=xn(l).hoistableScripts,y=ga(o),_=d.get(y);_||(_=l.querySelector(zl(y)),_||(o=v({src:o,async:!0},s),(s=fi.get(y))&&cp(o,s),_=l.createElement("script"),Ot(_),hn(_,"link",o),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function tI(o,s){Io.M(o,s);var l=pa;if(l&&o){var d=xn(l).hoistableScripts,y=ga(o),_=d.get(y);_||(_=l.querySelector(zl(y)),_||(o=v({src:o,async:!0,type:"module"},s),(s=fi.get(y))&&cp(o,s),_=l.createElement("script"),Ot(_),hn(_,"link",o),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function A_(o,s,l,d){var y=(y=Re.current)?Hc(y):null;if(!y)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=ma(l.href),l=xn(y).hoistableStyles,d=l.get(s),d||(d={type:"style",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){o=ma(l.href);var _=xn(y).hoistableStyles,C=_.get(o);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,C),(_=y.querySelector(Gl(o)))&&!_._p&&(C.instance=_,C.state.loading=5),fi.has(o)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},fi.set(o,l),_||nI(y,o,l,C.state))),s&&d===null)throw Error(i(528,""));return C}if(s&&d!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ga(l),l=xn(y).hoistableScripts,d=l.get(s),d||(d={type:"script",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function ma(o){return'href="'+zt(o)+'"'}function Gl(o){return'link[rel="stylesheet"]['+o+"]"}function C_(o){return v({},o,{"data-precedence":o.precedence,precedence:null})}function nI(o,s,l,d){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=o.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),hn(s,"link",l),Ot(s),o.head.appendChild(s))}function ga(o){return'[src="'+zt(o)+'"]'}function zl(o){return"script[async]"+o}function w_(o,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var d=o.querySelector('style[data-href~="'+zt(l.href)+'"]');if(d)return s.instance=d,Ot(d),d;var y=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),Ot(d),hn(d,"style",y),$c(d,l.precedence,o),s.instance=d;case"stylesheet":y=ma(l.href);var _=o.querySelector(Gl(y));if(_)return s.state.loading|=4,s.instance=_,Ot(_),_;d=C_(l),(y=fi.get(y))&&up(d,y),_=(o.ownerDocument||o).createElement("link"),Ot(_);var C=_;return C._p=new Promise(function(w,D){C.onload=w,C.onerror=D}),hn(_,"link",d),s.state.loading|=4,$c(_,l.precedence,o),s.instance=_;case"script":return _=ga(l.src),(y=o.querySelector(zl(_)))?(s.instance=y,Ot(y),y):(d=l,(y=fi.get(_))&&(d=v({},l),cp(d,y)),o=o.ownerDocument||o,y=o.createElement("script"),Ot(y),hn(y,"link",d),o.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,$c(d,l.precedence,o));return s.instance}function $c(o,s,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,_=y,C=0;C<d.length;C++){var w=d[C];if(w.dataset.precedence===s)_=w;else if(_!==y)break}_?_.parentNode.insertBefore(o,_.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(o,s.firstChild))}function up(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function cp(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var Yc=null;function I_(o,s,l){if(Yc===null){var d=new Map,y=Yc=new Map;y.set(l,d)}else y=Yc,d=y.get(l),d||(d=new Map,y.set(l,d));if(d.has(o))return d;for(d.set(o,null),l=l.getElementsByTagName(o),y=0;y<l.length;y++){var _=l[y];if(!(_[Pr]||_[Jt]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(s)||"";C=o+C;var w=d.get(C);w?w.push(_):d.set(C,[_])}}return d}function R_(o,s,l){o=o.ownerDocument||o,o.head.insertBefore(l,s==="title"?o.querySelector("head > title"):null)}function iI(o,s,l){if(l===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return o=s.disabled,typeof s.precedence=="string"&&o==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function x_(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Hl=null;function oI(){}function rI(o,s,l){if(Hl===null)throw Error(i(475));var d=Hl;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var y=ma(l.href),_=o.querySelector(Gl(y));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(d.count++,d=Kc.bind(d),o.then(d,d)),s.state.loading|=4,s.instance=_,Ot(_);return}_=o.ownerDocument||o,l=C_(l),(y=fi.get(y))&&up(l,y),_=_.createElement("link"),Ot(_);var C=_;C._p=new Promise(function(w,D){C.onload=w,C.onerror=D}),hn(_,"link",l),s.instance=_}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(s,o),(o=s.state.preload)&&(s.state.loading&3)===0&&(d.count++,s=Kc.bind(d),o.addEventListener("load",s),o.addEventListener("error",s))}}function sI(){if(Hl===null)throw Error(i(475));var o=Hl;return o.stylesheets&&o.count===0&&fp(o,o.stylesheets),0<o.count?function(s){var l=setTimeout(function(){if(o.stylesheets&&fp(o,o.stylesheets),o.unsuspend){var d=o.unsuspend;o.unsuspend=null,d()}},6e4);return o.unsuspend=s,function(){o.unsuspend=null,clearTimeout(l)}}:null}function Kc(){if(this.count--,this.count===0){if(this.stylesheets)fp(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Jc=null;function fp(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Jc=new Map,s.forEach(aI,o),Jc=null,Kc.call(o))}function aI(o,s){if(!(s.state.loading&4)){var l=Jc.get(o);if(l)var d=l.get(null);else{l=new Map,Jc.set(o,l);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var C=y[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),d=C)}d&&l.set(null,d)}y=s.instance,C=y.getAttribute("data-precedence"),_=l.get(C)||d,_===d&&l.set(null,y),l.set(C,y),this.count++,d=Kc.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),_?_.parentNode.insertBefore(y,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),s.state.loading|=4}}var $l={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function lI(o,s,l,d,y,_,C,w){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.hiddenUpdates=mt(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function b_(o,s,l,d,y,_,C,w,D,$,Z,ee){return o=new lI(o,s,l,C,w,D,$,ee),s=1,_===!0&&(s|=24),_=Gn(3,null,null,s),o.current=_,_.stateNode=o,s=Yd(),s.refCount++,o.pooledCache=s,s.refCount++,_.memoizedState={element:d,isDehydrated:l,cache:s},Xd(_),o}function M_(o){return o?(o=Ks,o):Ks}function N_(o,s,l,d,y,_){y=M_(y),d.context===null?d.context=y:d.pendingContext=y,d=Xo(s),d.payload={element:l},_=_===void 0?null:_,_!==null&&(d.callback=_),l=Wo(o,d,s),l!==null&&(Kn(l,o,s),El(l,o,s))}function k_(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<s?l:s}}function dp(o,s){k_(o,s),(o=o.alternate)&&k_(o,s)}function D_(o){if(o.tag===13){var s=Ys(o,67108864);s!==null&&Kn(s,o,67108864),dp(o,67108864)}}var Qc=!0;function uI(o,s,l,d){var y=X.T;X.T=null;var _=he.p;try{he.p=2,hp(o,s,l,d)}finally{he.p=_,X.T=y}}function cI(o,s,l,d){var y=X.T;X.T=null;var _=he.p;try{he.p=8,hp(o,s,l,d)}finally{he.p=_,X.T=y}}function hp(o,s,l,d){if(Qc){var y=pp(d);if(y===null)ep(o,s,d,Xc,l),V_(o,d);else if(dI(y,o,s,l,d))d.stopPropagation();else if(V_(o,d),s&4&&-1<fI.indexOf(o)){for(;y!==null;){var _=xi(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=we(_.pendingLanes);if(C!==0){var w=_;for(w.pendingLanes|=2,w.entangledLanes|=2;C;){var D=1<<31-Kt(C);w.entanglements[1]|=D,C&=~D}Gi(_),(gt&6)===0&&(Dc=Pn()+500,Ol(0))}}break;case 13:w=Ys(_,2),w!==null&&Kn(w,_,2),Vc(),dp(_,2)}if(_=pp(d),_===null&&ep(o,s,d,Xc,l),_===y)break;y=_}y!==null&&d.stopPropagation()}else ep(o,s,d,null,l)}}function pp(o){return o=ni(o),mp(o)}var Xc=null;function mp(o){if(Xc=null,o=io(o),o!==null){var s=a(o);if(s===null)o=null;else{var l=s.tag;if(l===13){if(o=c(s),o!==null)return o;o=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return Xc=o,null}function P_(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qa()){case Dr:return 2;case Zn:return 8;case jn:case Rs:return 32;case qo:return 268435456;default:return 32}default:return 32}}var gp=!1,cr=null,fr=null,dr=null,Yl=new Map,Kl=new Map,hr=[],fI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function V_(o,s){switch(o){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":Yl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(s.pointerId)}}function Jl(o,s,l,d,y,_){return o===null||o.nativeEvent!==_?(o={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:_,targetContainers:[y]},s!==null&&(s=xi(s),s!==null&&D_(s)),o):(o.eventSystemFlags|=d,s=o.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),o)}function dI(o,s,l,d,y){switch(s){case"focusin":return cr=Jl(cr,o,s,l,d,y),!0;case"dragenter":return fr=Jl(fr,o,s,l,d,y),!0;case"mouseover":return dr=Jl(dr,o,s,l,d,y),!0;case"pointerover":var _=y.pointerId;return Yl.set(_,Jl(Yl.get(_)||null,o,s,l,d,y)),!0;case"gotpointercapture":return _=y.pointerId,Kl.set(_,Jl(Kl.get(_)||null,o,s,l,d,y)),!0}return!1}function L_(o){var s=io(o.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){o.blockedOn=s,Go(o.priority,function(){if(l.tag===13){var d=Yn();d=Ve(d);var y=Ys(l,d);y!==null&&Kn(y,l,d),dp(l,d)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Wc(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var l=pp(o.nativeEvent);if(l===null){l=o.nativeEvent;var d=new l.constructor(l.type,l);ao=d,l.target.dispatchEvent(d),ao=null}else return s=xi(l),s!==null&&D_(s),o.blockedOn=l,!1;s.shift()}return!0}function U_(o,s,l){Wc(o)&&l.delete(s)}function hI(){gp=!1,cr!==null&&Wc(cr)&&(cr=null),fr!==null&&Wc(fr)&&(fr=null),dr!==null&&Wc(dr)&&(dr=null),Yl.forEach(U_),Kl.forEach(U_)}function Zc(o,s){o.blockedOn===s&&(o.blockedOn=null,gp||(gp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,hI)))}var jc=null;function O_(o){jc!==o&&(jc=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){jc===o&&(jc=null);for(var s=0;s<o.length;s+=3){var l=o[s],d=o[s+1],y=o[s+2];if(typeof d!="function"){if(mp(d||l)===null)continue;break}var _=xi(l);_!==null&&(o.splice(s,3),s-=3,mh(_,{pending:!0,data:y,method:l.method,action:d},d,y))}}))}function Ql(o){function s(D){return Zc(D,o)}cr!==null&&Zc(cr,o),fr!==null&&Zc(fr,o),dr!==null&&Zc(dr,o),Yl.forEach(s),Kl.forEach(s);for(var l=0;l<hr.length;l++){var d=hr[l];d.blockedOn===o&&(d.blockedOn=null)}for(;0<hr.length&&(l=hr[0],l.blockedOn===null);)L_(l),l.blockedOn===null&&hr.shift();if(l=(o.ownerDocument||o).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var y=l[d],_=l[d+1],C=y[Gt]||null;if(typeof _=="function")C||O_(l);else if(C){var w=null;if(_&&_.hasAttribute("formAction")){if(y=_,C=_[Gt]||null)w=C.formAction;else if(mp(y)!==null)continue}else w=C.action;typeof w=="function"?l[d+1]=w:(l.splice(d,3),d-=3),O_(l)}}}function yp(o){this._internalRoot=o}ef.prototype.render=yp.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,d=Yn();N_(l,d,o,s,null,null)},ef.prototype.unmount=yp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;N_(o.current,2,null,o,null,null),Vc(),s[ei]=null}};function ef(o){this._internalRoot=o}ef.prototype.unstable_scheduleHydration=function(o){if(o){var s=tn();o={blockedOn:null,target:o,priority:s};for(var l=0;l<hr.length&&s!==0&&s<hr[l].priority;l++);hr.splice(l,0,o),l===0&&L_(o)}};var B_=e.version;if(B_!=="19.1.1")throw Error(i(527,B_,"19.1.1"));he.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=m(s),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var pI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tf.isDisabled&&tf.supportsFiber)try{ut=tf.inject(pI),st=tf}catch{}}return Wl.createRoot=function(o,s){if(!r(o))throw Error(i(299));var l=!1,d="",y=tv,_=nv,C=iv,w=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=b_(o,1,!1,null,null,l,d,y,_,C,w,null),o[ei]=s.current,jh(o),new yp(s)},Wl.hydrateRoot=function(o,s,l){if(!r(o))throw Error(i(299));var d=!1,y="",_=tv,C=nv,w=iv,D=null,$=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(D=l.unstable_transitionCallbacks),l.formState!==void 0&&($=l.formState)),s=b_(o,1,!0,s,l??null,d,y,_,C,w,D,$),s.context=M_(null),l=s.current,d=Yn(),d=Ve(d),y=Xo(d),y.callback=null,Wo(l,y,d),l=d,s.current.lanes=l,Ue(s,l),Gi(s),o[ei]=s.current,jh(o),new ef(s)},Wl.version="19.1.1",Wl}var Q_;function II(){if(Q_)return Tp.exports;Q_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Tp.exports=wI(),Tp.exports}var RI=II();const xI=L0(RI),bI="modulepreload",MI=function(t,e){return new URL(t,e).href},X_={},U0=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){let c=function(v){return Promise.all(v.map(E=>Promise.resolve(E).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};const h=document.getElementsByTagName("link"),m=document.querySelector("meta[property=csp-nonce]"),p=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));r=c(n.map(v=>{if(v=MI(v,i),v in X_)return;X_[v]=!0;const E=v.endsWith(".css"),S=E?'[rel="stylesheet"]':"";if(!!i)for(let O=h.length-1;O>=0;O--){const F=h[O];if(F.href===v&&(!E||F.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${S}`))return;const x=document.createElement("link");if(x.rel=E?"stylesheet":bI,E||(x.as="script"),x.crossOrigin="",x.href=v,p&&x.setAttribute("nonce",p),document.head.appendChild(x),E)return new Promise((O,F)=>{x.addEventListener("load",O),x.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${v}`)))})}))}function a(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return r.then(c=>{for(const h of c||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})},Si={openai:{name:"GPT-4o + DALL-E",icon:"🤖",color:"text-emerald-400"},gemini:{name:"Gemini Flash",icon:"✨",color:"text-blue-400"},claude:{name:"Claude Sonnet",icon:"🧠",color:"text-purple-400"},auto:{name:"Smart Auto",icon:"⚡",color:"text-cyan-400"}},NI={photorealistic:"📸 Ultra-realistic",artistic:"🎨 Artistic Nigerian",cyberpunk:"🌃 Cyber-Lagos",anime:"🎭 Anime style"},O0="gemini-2.5-flash",kI="gpt-4o",DI="claude-3-sonnet-20240229",nf="default",Jn={default:{name:"Lagos Oracle (Default)",icon:"🌟",description:"Your standard, knowledgeable Lagos Oracle.",systemPromptModifier:"",color:"text-yellow-400"},emeka:{name:"Emeka (Igbo Insight)",icon:"🧐",description:"Wise, with a touch of Igbo flair and proverbs.",systemPromptModifier:"You are Emeka, a wise individual with deep roots in Igbo culture, now navigating Lagos. Your responses often carry a touch of Igbo flair, and you might naturally use common Igbo greetings (like 'Nnoọ'), phrases, or proverbs if the context allows. You offer thoughtful and insightful perspectives on various matters.",color:"text-green-400"},femi:{name:"Femi (Yorùbá Poise)",icon:"😎",description:"Confident, sharp, Yorùbá man from Lagos.",systemPromptModifier:"You are Femi, a confident and articulate Yorùbá man, born and raised in the heart of Lagos. Your responses are sharp, informed, and carry the cadence of a true Lagosian with deep Yorùbá heritage. You may incorporate Yorùbá proverbs (ọwe), sayings, or greetings (like 'Ẹ n lẹ o') when fitting, showcasing pride in your culture.",color:"text-blue-400"},anita:{name:"Anita (Shakara Queen)",icon:"💅",description:"Playful, sassy, full of Lagos street smarts and slang.",systemPromptModifier:"You are Anita, the ultimate Lagos 'Shakara Queen' – playful, a bit sassy, and overflowing with street smarts. You communicate using contemporary Lagos slang and Pidgin English naturally and freely. You 'tell it like it is,' often with a humorous or witty twist, but always keeping it real.",color:"text-pink-400"},muhammed:{name:"Muhammed (Northern Calm)",icon:"🕌",description:"Calm, thoughtful, with a Northern Nigerian perspective.",systemPromptModifier:"You are Muhammed, a calm and thoughtful individual with a perspective enriched by Northern Nigerian upbringing and Hausa culture, now experiencing Lagos life. Your responses are measured, respectful, and you might use Hausa greetings (like 'Sannu') or expressions if it feels natural. You bring a sense of peace and consideration to your interactions.",color:"text-teal-400"}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let PI,VI;function LI(){return{geminiUrl:PI,vertexUrl:VI}}function UI(t,e,n,i){var r,a;if(!(t!=null&&t.baseUrl)){const c=LI();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:n:(a=c.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Es{}function _e(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(t,e,n){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const m=t[h];if(Array.isArray(n))for(let p=0;p<m.length;p++){const v=m[p];f(v,e.slice(a+1),n[p])}else for(const p of m)f(p,e.slice(a+1),n)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const m=t[h];f(m[0],e.slice(a+1),n);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=n}function u(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in t){const a=t[r];return Array.isArray(a)?a.map(c=>u(c,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Up(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var W_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(W_||(W_={}));var Z_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Z_||(Z_={}));var Tr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Tr||(Tr={}));var $i;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})($i||($i={}));var j_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(j_||(j_={}));var Yi;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Yi||(Yi={}));var eT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(eT||(eT={}));var tT;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(tT||(tT={}));var nT;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(nT||(nT={}));var iT;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(iT||(iT={}));var oT;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(oT||(oT={}));var rT;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(rT||(rT={}));var sT;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(sT||(sT={}));var aT;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(aT||(aT={}));var lT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(lT||(lT={}));var uT;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(uT||(uT={}));var If;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(If||(If={}));var cT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(cT||(cT={}));var Op;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Op||(Op={}));var fT;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(fT||(fT={}));var dT;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(dT||(dT={}));var hT;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(hT||(hT={}));var pT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(pT||(pT={}));var mT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(mT||(mT={}));var gT;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(gT||(gT={}));var yT;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(yT||(yT={}));var vT;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(vT||(vT={}));var _T;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(_T||(_T={}));var TT;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(TT||(TT={}));var ET;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ET||(ET={}));var ST;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ST||(ST={}));var AT;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(AT||(AT={}));var CT;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(CT||(CT={}));var wT;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(wT||(wT={}));var IT;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(IT||(IT={}));var RT;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(RT||(RT={}));var xT;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(xT||(xT={}));var bT;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(bT||(bT={}));var MT;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(MT||(MT={}));var NT;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(NT||(NT={}));var kT;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(kT||(kT={}));var DT;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(DT||(DT={}));var Ea;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ea||(Ea={}));class Bp{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Zl{get text(){var e,n,i,r,a,c,h,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const E=[];for(const S of(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[I,x]of Object.entries(S))I!=="text"&&I!=="thought"&&(x!==null||x!==void 0)&&E.push(I);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,n,i,r,a,c,h,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const E of(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[S,I]of Object.entries(E))S!=="inlineData"&&(I!==null||I!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,i,r,a,c,h,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,i,r,a,c,h,m,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,i,r,a,c,h,m,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class PT{}class VT{}class OI{}class BI{}class FI{}class LT{}class UT{}class OT{}class qI{}class BT{}class FT{}class qT{}class GT{}class GI{}class zI{}class HI{}class zT{}class $I{get text(){var e,n,i;let r="",a=!1;const c=[];for(const h of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[m,p]of Object.entries(h))m!=="text"&&m!=="thought"&&p!==null&&c.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,r+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,i;let r="";const a=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[h,m]of Object.entries(c))h!=="inlineData"&&m!==null&&a.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Rf{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const i=new Rf;if(i.name=e.name,i.metadata=e.metadata,i.done=e.done,i.error=e.error,n){const r=e.response;if(r){const a=new BT,c=r.videos;a.generatedVideos=c==null?void 0:c.map(h=>({video:{uri:h.gcsUri,videoBytes:h.bytesBase64Encoded?Up(h.bytesBase64Encoded):void 0,mimeType:h.mimeType}})),a.raiMediaFilteredCount=r.raiMediaFilteredCount,a.raiMediaFilteredReasons=r.raiMediaFilteredReasons,i.response=a}}else{const r=e.response;if(r){const a=new BT,c=r.generateVideoResponse,h=c==null?void 0:c.generatedSamples;a.generatedVideos=h==null?void 0:h.map(m=>{const p=m.video;return{video:{uri:p==null?void 0:p.uri,videoBytes:p!=null&&p.encodedVideo?Up(p==null?void 0:p.encodedVideo):void 0,mimeType:m.encoding}}}),a.raiMediaFilteredCount=c==null?void 0:c.raiMediaFilteredCount,a.raiMediaFilteredReasons=c==null?void 0:c.raiMediaFilteredReasons,i.response=a}}return i}}class YI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ht(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function B0(t,e){const n=ht(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function F0(t){return Array.isArray(t)?t.map(e=>xf(e)):[xf(t)]}function xf(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function q0(t){const e=xf(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function G0(t){const e=xf(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function HT(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function z0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>HT(e)):[HT(t)]}function Fp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function $T(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function YT(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function wn(t){if(t==null)throw new Error("ContentUnion is required");return Fp(t)?t:{role:"user",parts:z0(t)}}function H0(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=wn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=wn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>wn(n)):[wn(e)]}function hi(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if($T(t)||YT(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[wn(t)]}const e=[],n=[],i=Fp(t[0]);for(const r of t){const a=Fp(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if($T(r)||YT(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:z0(n)}),e}function KI(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Tr).includes(n[0].toUpperCase())?n[0].toUpperCase():Tr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Tr).includes(i.toUpperCase())?i.toUpperCase():Tr.TYPE_UNSPECIFIED})}}function Sa(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&KI(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Tr).includes(h.toUpperCase())?h.toUpperCase():Tr.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=Sa(h);else if(i.includes(c)){const m=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}m.push(Sa(p))}e[c]=m}else if(r.includes(c)){const m={};for(const[p,v]of Object.entries(h))m[p]=Sa(v);e[c]=m}else{if(c==="additionalProperties")continue;e[c]=h}return e}function Im(t){return Sa(t)}function Rm(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function xm(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ua(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Sa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Sa(e.response));return t}function Oa(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function JI(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Bo(t,e){if(typeof e!="string")throw new Error("name must be a string");return JI(t,e,"cachedContents")}function $0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ss(t){return Up(t)}function QI(t){return t!=null&&typeof t=="object"&&"name"in t}function XI(t){return t!=null&&typeof t=="object"&&"video"in t}function WI(t){return t!=null&&typeof t=="object"&&"uri"in t}function Y0(t){var e;let n;if(QI(t)&&(n=t.name),!(WI(t)&&(n=t.uri,n===void 0))&&!(XI(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function K0(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function J0(t){for(const e of["models","tunedModels","publisherModels"])if(ZI(t,e))return t[e];return[]}function ZI(t,e){return t!==null&&typeof t=="object"&&e in t}function jI(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function eR(t,e={}){const n=[],i=new Set;for(const r of t){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const c=jI(r,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function Q0(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function tR(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ba(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function X0(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nR(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function iR(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function oR(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function rR(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],nR(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],iR(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],oR(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function W0(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>rR(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function sR(t){const e={},n=u(t,["anyOf"]);n!=null&&f(e,["anyOf"],n);const i=u(t,["default"]);i!=null&&f(e,["default"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["enum"]);a!=null&&f(e,["enum"],a);const c=u(t,["example"]);c!=null&&f(e,["example"],c);const h=u(t,["format"]);h!=null&&f(e,["format"],h);const m=u(t,["items"]);m!=null&&f(e,["items"],m);const p=u(t,["maxItems"]);p!=null&&f(e,["maxItems"],p);const v=u(t,["maxLength"]);v!=null&&f(e,["maxLength"],v);const E=u(t,["maxProperties"]);E!=null&&f(e,["maxProperties"],E);const S=u(t,["maximum"]);S!=null&&f(e,["maximum"],S);const I=u(t,["minItems"]);I!=null&&f(e,["minItems"],I);const x=u(t,["minLength"]);x!=null&&f(e,["minLength"],x);const O=u(t,["minProperties"]);O!=null&&f(e,["minProperties"],O);const F=u(t,["minimum"]);F!=null&&f(e,["minimum"],F);const oe=u(t,["nullable"]);oe!=null&&f(e,["nullable"],oe);const te=u(t,["pattern"]);te!=null&&f(e,["pattern"],te);const ne=u(t,["properties"]);ne!=null&&f(e,["properties"],ne);const fe=u(t,["propertyOrdering"]);fe!=null&&f(e,["propertyOrdering"],fe);const se=u(t,["required"]);se!=null&&f(e,["required"],se);const pe=u(t,["title"]);pe!=null&&f(e,["title"],pe);const k=u(t,["type"]);return k!=null&&f(e,["type"],k),e}function aR(t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(t,["category"]);n!=null&&f(e,["category"],n);const i=u(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function lR(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function uR(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function cR(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],uR(n)),e}function fR(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function dR(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],fR(n)),e}function hR(){return{}}function pR(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>lR(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],cR(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],dR(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],hR());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function mR(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function gR(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function yR(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],gR(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function vR(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],mR(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],yR(i)),e}function _R(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function Z0(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],_R(n)),e}function TR(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],Z0(i)),e}function ER(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>TR(r))),f(e,["speakerVoiceConfigs"],i)}return e}function SR(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],Z0(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],ER(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function AR(t){const e={},n=u(t,["includeThoughts"]);n!=null&&f(e,["includeThoughts"],n);const i=u(t,["thinkingBudget"]);return i!=null&&f(e,["thinkingBudget"],i),e}function CR(t,e,n){const i={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],W0(wn(r)));const a=u(e,["temperature"]);a!=null&&f(i,["temperature"],a);const c=u(e,["topP"]);c!=null&&f(i,["topP"],c);const h=u(e,["topK"]);h!=null&&f(i,["topK"],h);const m=u(e,["candidateCount"]);m!=null&&f(i,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&f(i,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&f(i,["stopSequences"],v);const E=u(e,["responseLogprobs"]);E!=null&&f(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&f(i,["logprobs"],S);const I=u(e,["presencePenalty"]);I!=null&&f(i,["presencePenalty"],I);const x=u(e,["frequencyPenalty"]);x!=null&&f(i,["frequencyPenalty"],x);const O=u(e,["seed"]);O!=null&&f(i,["seed"],O);const F=u(e,["responseMimeType"]);F!=null&&f(i,["responseMimeType"],F);const oe=u(e,["responseSchema"]);oe!=null&&f(i,["responseSchema"],sR(Im(oe)));const te=u(e,["responseJsonSchema"]);if(te!=null&&f(i,["responseJsonSchema"],te),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ne=u(e,["safetySettings"]);if(n!==void 0&&ne!=null){let N=ne;Array.isArray(N)&&(N=N.map(q=>aR(q))),f(n,["safetySettings"],N)}const fe=u(e,["tools"]);if(n!==void 0&&fe!=null){let N=Oa(fe);Array.isArray(N)&&(N=N.map(q=>pR(Ua(q)))),f(n,["tools"],N)}const se=u(e,["toolConfig"]);if(n!==void 0&&se!=null&&f(n,["toolConfig"],vR(se)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const pe=u(e,["cachedContent"]);n!==void 0&&pe!=null&&f(n,["cachedContent"],Bo(t,pe));const k=u(e,["responseModalities"]);k!=null&&f(i,["responseModalities"],k);const M=u(e,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);const b=u(e,["speechConfig"]);if(b!=null&&f(i,["speechConfig"],SR(Rm(b))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=u(e,["thinkingConfig"]);return V!=null&&f(i,["thinkingConfig"],AR(V)),i}function wR(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["request","model"],ht(t,i));const r=u(e,["contents"]);if(r!=null){let c=hi(r);Array.isArray(c)&&(c=c.map(h=>W0(h))),f(n,["request","contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["request","generationConfig"],CR(t,a,n)),n}function IR(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=u(e,["fileName"]);i!=null&&f(n,["fileName"],i);const r=u(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>wR(t,c))),f(n,["requests","requests"],a)}return n}function RR(t,e){const n={},i=u(t,["displayName"]);if(e!==void 0&&i!=null&&f(e,["batch","displayName"],i),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function xR(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["src"]);r!=null&&f(n,["batch","inputConfig"],IR(t,Q0(t,r)));const a=u(e,["config"]);return a!=null&&f(n,["config"],RR(a,n)),n}function bR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ba(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function MR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ba(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function NR(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);if(e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function kR(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],NR(n,e)),e}function DR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ba(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function PR(t){const e={},n=u(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const i=u(t,["gcsUri"]);i!=null&&f(e,["gcsSource","uris"],i);const r=u(t,["bigqueryUri"]);if(r!=null&&f(e,["bigquerySource","inputUri"],r),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function VR(t){const e={},n=u(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const i=u(t,["gcsUri"]);i!=null&&f(e,["gcsDestination","outputUriPrefix"],i);const r=u(t,["bigqueryUri"]);if(r!=null&&f(e,["bigqueryDestination","outputUri"],r),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function LR(t,e){const n={},i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=u(t,["dest"]);return e!==void 0&&r!=null&&f(e,["outputConfig"],VR(tR(r))),n}function UR(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["model"],ht(t,i));const r=u(e,["src"]);r!=null&&f(n,["inputConfig"],PR(Q0(t,r)));const a=u(e,["config"]);return a!=null&&f(n,["config"],LR(a,n)),n}function OR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ba(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function BR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ba(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function FR(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=u(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function qR(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],FR(n,e)),e}function GR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ba(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function zR(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function HR(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function $R(t){const e={},n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function YR(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],zR(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],HR(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],$R(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function KR(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>YR(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function JR(t){const e={},n=u(t,["citationSources"]);return n!=null&&f(e,["citations"],n),e}function QR(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function XR(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>QR(r))),f(e,["urlMetadata"],i)}return e}function WR(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],KR(n));const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],JR(i));const r=u(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const a=u(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=u(t,["urlContextMetadata"]);c!=null&&f(e,["urlContextMetadata"],XR(c));const h=u(t,["avgLogprobs"]);h!=null&&f(e,["avgLogprobs"],h);const m=u(t,["groundingMetadata"]);m!=null&&f(e,["groundingMetadata"],m);const p=u(t,["index"]);p!=null&&f(e,["index"],p);const v=u(t,["logprobsResult"]);v!=null&&f(e,["logprobsResult"],v);const E=u(t,["safetyRatings"]);return E!=null&&f(e,["safetyRatings"],E),e}function ZR(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>WR(p))),f(e,["candidates"],m)}const r=u(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const a=u(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=u(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=u(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function j0(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["code"]);i!=null&&f(e,["code"],i);const r=u(t,["message"]);return r!=null&&f(e,["message"],r),e}function jR(t){const e={},n=u(t,["response"]);n!=null&&f(e,["response"],ZR(n));const i=u(t,["error"]);return i!=null&&f(e,["error"],j0(i)),e}function ex(t){const e={},n=u(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const i=u(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>jR(a))),f(e,["inlinedResponses"],r)}return e}function qp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata","displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["metadata","state"]);r!=null&&f(e,["state"],X0(r));const a=u(t,["metadata","createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=u(t,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const m=u(t,["metadata","model"]);m!=null&&f(e,["model"],m);const p=u(t,["metadata","output"]);return p!=null&&f(e,["dest"],ex(p)),e}function tx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>qp(c))),f(e,["batchJobs"],a)}return e}function nx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);return a!=null&&f(e,["error"],j0(a)),e}function eS(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["code"]);i!=null&&f(e,["code"],i);const r=u(t,["message"]);return r!=null&&f(e,["message"],r),e}function ix(t){const e={},n=u(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const i=u(t,["gcsSource","uris"]);i!=null&&f(e,["gcsUri"],i);const r=u(t,["bigquerySource","inputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function ox(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const i=u(t,["gcsDestination","outputUriPrefix"]);i!=null&&f(e,["gcsUri"],i);const r=u(t,["bigqueryDestination","outputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function Gp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["state"]);r!=null&&f(e,["state"],X0(r));const a=u(t,["error"]);a!=null&&f(e,["error"],eS(a));const c=u(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=u(t,["startTime"]);h!=null&&f(e,["startTime"],h);const m=u(t,["endTime"]);m!=null&&f(e,["endTime"],m);const p=u(t,["updateTime"]);p!=null&&f(e,["updateTime"],p);const v=u(t,["model"]);v!=null&&f(e,["model"],v);const E=u(t,["inputConfig"]);E!=null&&f(e,["src"],ix(E));const S=u(t,["outputConfig"]);return S!=null&&f(e,["dest"],ox(S)),e}function rx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>Gp(c))),f(e,["batchJobs"],a)}return e}function sx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);return a!=null&&f(e,["error"],eS(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ps;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ps||(ps={}));class Cu{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ax extends Es{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const r=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${r}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new Cu(ps.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}async createInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=UR(this.apiClient,e);return h=_e("batchPredictionJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Gp(v))}else{const p=xR(this.apiClient,e);return h=_e("{model}:batchGenerateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>qp(v))}}async get(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=OR(this.apiClient,e);return h=_e("batchPredictionJobs/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Gp(v))}else{const p=bR(this.apiClient,e);return h=_e("batches/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>qp(v))}}async cancel(e){var n,i,r,a;let c="",h={};if(this.apiClient.isVertexAI()){const m=BR(this.apiClient,e);c=_e("batchPredictionJobs/{name}:cancel",m._url),h=m._query,delete m.config,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=MR(this.apiClient,e);c=_e("batches/{name}:cancel",m._url),h=m._query,delete m.config,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=qR(e);return h=_e("batchPredictionJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=rx(v),S=new zT;return Object.assign(S,E),S})}else{const p=kR(e);return h=_e("batches",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=tx(v),S=new zT;return Object.assign(S,E),S})}}async delete(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=GR(this.apiClient,e);return h=_e("batchPredictionJobs/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>sx(v))}else{const p=DR(this.apiClient,e);return h=_e("batches/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>nx(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lx(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function ux(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function cx(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function fx(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],lx(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],ux(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],cx(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function KT(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>fx(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function dx(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function hx(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function px(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],hx(n)),e}function mx(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function gx(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],mx(n)),e}function yx(){return{}}function vx(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>dx(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],px(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],gx(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],yx());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function _x(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function Tx(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function Ex(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],Tx(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function Sx(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],_x(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],Ex(i)),e}function Ax(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const a=u(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=u(t,["contents"]);if(e!==void 0&&c!=null){let v=hi(c);Array.isArray(v)&&(v=v.map(E=>KT(E))),f(e,["contents"],v)}const h=u(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],KT(wn(h)));const m=u(t,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(E=>vx(E))),f(e,["tools"],v)}const p=u(t,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],Sx(p)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Cx(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["model"],B0(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],Ax(r,n)),n}function wx(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Bo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function Ix(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Bo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function Rx(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function xx(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Bo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],Rx(r,n)),n}function bx(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function Mx(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],bx(n,e)),e}function Nx(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function kx(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Dx(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Px(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],Nx(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],kx(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],Dx(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function JT(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Px(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function Vx(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=u(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=u(t,["response"]);c!=null&&f(e,["response"],c);const h=u(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function Lx(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function Ux(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],Lx(n)),e}function Ox(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function Bx(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],Ox(n)),e}function Fx(){return{}}function qx(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&f(e,["apiKeyString"],n),e}function Gx(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&f(e,["apiKeyConfig"],qx(n));const i=u(t,["authType"]);i!=null&&f(e,["authType"],i);const r=u(t,["googleServiceAccountConfig"]);r!=null&&f(e,["googleServiceAccountConfig"],r);const a=u(t,["httpBasicAuthConfig"]);a!=null&&f(e,["httpBasicAuthConfig"],a);const c=u(t,["oauthConfig"]);c!=null&&f(e,["oauthConfig"],c);const h=u(t,["oidcConfig"]);return h!=null&&f(e,["oidcConfig"],h),e}function zx(t){const e={},n=u(t,["authConfig"]);return n!=null&&f(e,["authConfig"],Gx(n)),e}function Hx(){return{}}function $x(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>Vx(S))),f(e,["functionDeclarations"],E)}const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=u(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],Ux(r));const a=u(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],Bx(a)),u(t,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],Fx());const h=u(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],zx(h)),u(t,["urlContext"])!=null&&f(e,["urlContext"],Hx());const p=u(t,["codeExecution"]);p!=null&&f(e,["codeExecution"],p);const v=u(t,["computerUse"]);return v!=null&&f(e,["computerUse"],v),e}function Yx(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function Kx(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function Jx(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],Kx(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function Qx(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],Yx(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],Jx(i)),e}function Xx(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const a=u(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=u(t,["contents"]);if(e!==void 0&&c!=null){let E=hi(c);Array.isArray(E)&&(E=E.map(S=>JT(S))),f(e,["contents"],E)}const h=u(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],JT(wn(h)));const m=u(t,["tools"]);if(e!==void 0&&m!=null){let E=m;Array.isArray(E)&&(E=E.map(S=>$x(S))),f(e,["tools"],E)}const p=u(t,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],Qx(p));const v=u(t,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),n}function Wx(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["model"],B0(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],Xx(r,n)),n}function Zx(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Bo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function jx(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Bo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function eb(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function tb(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Bo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],eb(r,n)),n}function nb(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function ib(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],nb(n,e)),e}function pf(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["model"]);r!=null&&f(e,["model"],r);const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const h=u(t,["expireTime"]);h!=null&&f(e,["expireTime"],h);const m=u(t,["usageMetadata"]);return m!=null&&f(e,["usageMetadata"],m),e}function ob(){return{}}function rb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>pf(c))),f(e,["cachedContents"],a)}return e}function mf(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["model"]);r!=null&&f(e,["model"],r);const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const h=u(t,["expireTime"]);h!=null&&f(e,["expireTime"],h);const m=u(t,["usageMetadata"]);return m!=null&&f(e,["usageMetadata"],m),e}function sb(){return{}}function ab(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>mf(c))),f(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lb extends Es{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Cu(ps.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=Wx(this.apiClient,e);return h=_e("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>mf(v))}else{const p=Cx(this.apiClient,e);return h=_e("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>pf(v))}}async get(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=Zx(this.apiClient,e);return h=_e("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>mf(v))}else{const p=wx(this.apiClient,e);return h=_e("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>pf(v))}}async delete(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=jx(this.apiClient,e);return h=_e("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(()=>{const v=sb(),E=new qT;return Object.assign(E,v),E})}else{const p=Ix(this.apiClient,e);return h=_e("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(()=>{const v=ob(),E=new qT;return Object.assign(E,v),E})}}async update(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=tb(this.apiClient,e);return h=_e("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>mf(v))}else{const p=xx(this.apiClient,e);return h=_e("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>pf(v))}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=ib(e);return h=_e("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=ab(v),S=new GT;return Object.assign(S,E),S})}else{const p=Mx(e);return h=_e("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=rb(v),S=new GT;return Object.assign(S,E),S})}}}function QT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xt(t){return this instanceof xt?(this.v=t,this):new xt(t)}function Aa(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(I){return function(x){return Promise.resolve(x).then(I,E)}}function h(I,x){i[I]&&(r[I]=function(O){return new Promise(function(F,oe){a.push([I,O,F,oe])>1||m(I,O)})},x&&(r[I]=x(r[I])))}function m(I,x){try{p(i[I](x))}catch(O){S(a[0][3],O)}}function p(I){I.value instanceof xt?Promise.resolve(I.value.v).then(v,E):S(a[0][2],I)}function v(I){m("next",I)}function E(I){m("throw",I)}function S(I,x){I(x),a.shift(),a.length&&m(a[0][0],a[0][1])}}function su(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof QT=="function"?QT(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(c){return new Promise(function(h,m){c=t[a](c),r(h,m,c.done,c.value)})}}function r(a,c,h,m){Promise.resolve(m).then(function(p){a({value:p,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ub(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:tS(n)}function tS(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function cb(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function XT(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let a=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),a&&!tS(t[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class fb{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new db(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class db{constructor(e,n,i,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),cb(a)}async sendMessage(e){var n;await this.sendPromise;const i=wn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,c,h;const m=await r,p=(c=(a=m.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,v=m.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(E))!==null&&h!==void 0?h:[]);const I=p?[p]:[];this.recordHistory(i,I,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=wn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?XT(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return Aa(this,arguments,function*(){var c,h,m,p;const v=[];try{for(var E=!0,S=su(e),I;I=yield xt(S.next()),c=I.done,!c;E=!0){p=I.value,E=!1;const x=p;if(ub(x)){const O=(r=(i=x.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;O!==void 0&&v.push(O)}yield yield xt(x)}}catch(x){h={error:x}}finally{try{!E&&!c&&(m=S.return)&&(yield xt(m.call(S)))}finally{if(h)throw h.error}}this.recordHistory(n,v)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...XT(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Jf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hb(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function pb(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],hb(n,e)),e}function mb(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["message"]);i!=null&&f(e,["message"],i);const r=u(t,["code"]);return r!=null&&f(e,["code"],r),e}function gb(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["mimeType"]);r!=null&&f(e,["mimeType"],r);const a=u(t,["sizeBytes"]);a!=null&&f(e,["sizeBytes"],a);const c=u(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=u(t,["expirationTime"]);h!=null&&f(e,["expirationTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["sha256Hash"]);p!=null&&f(e,["sha256Hash"],p);const v=u(t,["uri"]);v!=null&&f(e,["uri"],v);const E=u(t,["downloadUri"]);E!=null&&f(e,["downloadUri"],E);const S=u(t,["state"]);S!=null&&f(e,["state"],S);const I=u(t,["source"]);I!=null&&f(e,["source"],I);const x=u(t,["videoMetadata"]);x!=null&&f(e,["videoMetadata"],x);const O=u(t,["error"]);return O!=null&&f(e,["error"],mb(O)),e}function yb(t){const e={},n=u(t,["file"]);n!=null&&f(e,["file"],gb(n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function vb(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","file"],Y0(n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function _b(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","file"],Y0(n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function Tb(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["message"]);i!=null&&f(e,["message"],i);const r=u(t,["code"]);return r!=null&&f(e,["code"],r),e}function zp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["mimeType"]);r!=null&&f(e,["mimeType"],r);const a=u(t,["sizeBytes"]);a!=null&&f(e,["sizeBytes"],a);const c=u(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=u(t,["expirationTime"]);h!=null&&f(e,["expirationTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["sha256Hash"]);p!=null&&f(e,["sha256Hash"],p);const v=u(t,["uri"]);v!=null&&f(e,["uri"],v);const E=u(t,["downloadUri"]);E!=null&&f(e,["downloadUri"],E);const S=u(t,["state"]);S!=null&&f(e,["state"],S);const I=u(t,["source"]);I!=null&&f(e,["source"],I);const x=u(t,["videoMetadata"]);x!=null&&f(e,["videoMetadata"],x);const O=u(t,["error"]);return O!=null&&f(e,["error"],Tb(O)),e}function Eb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>zp(c))),f(e,["files"],a)}return e}function Sb(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Ab(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cb extends Es{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Cu(ps.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>zp(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=pb(e);return a=_e("files",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=Eb(m),v=new GI;return Object.assign(v,p),v})}}async createInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=yb(e);return a=_e("upload/v1beta/files",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>{const p=Sb(m),v=new zI;return Object.assign(v,p),v})}}async get(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=vb(e);return a=_e("files/{file}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>zp(m))}}async delete(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=_b(e);return a=_e("files/{file}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(()=>{const m=Ab(),p=new HI;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wb(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function nS(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],wb(n)),e}function Ib(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],nS(i)),e}function Rb(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Ib(r))),f(e,["speakerVoiceConfigs"],i)}return e}function xb(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],nS(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],Rb(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function bb(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function Mb(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Nb(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function kb(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],bb(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],Mb(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],Nb(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function Db(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>kb(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function Pb(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function Vb(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function Lb(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],Vb(n)),e}function Ub(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function Ob(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],Ub(n)),e}function Bb(){return{}}function Fb(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>Pb(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],Lb(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],Ob(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],Bb());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function qb(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function WT(){return{}}function Gb(t){const e={},n=u(t,["disabled"]);n!=null&&f(e,["disabled"],n);const i=u(t,["startOfSpeechSensitivity"]);i!=null&&f(e,["startOfSpeechSensitivity"],i);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&f(e,["endOfSpeechSensitivity"],r);const a=u(t,["prefixPaddingMs"]);a!=null&&f(e,["prefixPaddingMs"],a);const c=u(t,["silenceDurationMs"]);return c!=null&&f(e,["silenceDurationMs"],c),e}function zb(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&f(e,["automaticActivityDetection"],Gb(n));const i=u(t,["activityHandling"]);i!=null&&f(e,["activityHandling"],i);const r=u(t,["turnCoverage"]);return r!=null&&f(e,["turnCoverage"],r),e}function Hb(t){const e={},n=u(t,["targetTokens"]);return n!=null&&f(e,["targetTokens"],n),e}function $b(t){const e={},n=u(t,["triggerTokens"]);n!=null&&f(e,["triggerTokens"],n);const i=u(t,["slidingWindow"]);return i!=null&&f(e,["slidingWindow"],Hb(i)),e}function Yb(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&f(e,["proactiveAudio"],n),e}function Kb(t,e){const n={},i=u(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=u(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=u(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=u(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const p=u(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=u(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=u(t,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],xb(xm(E)));const S=u(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&f(e,["setup","systemInstruction"],Db(wn(I)));const x=u(t,["tools"]);if(e!==void 0&&x!=null){let se=Oa(x);Array.isArray(se)&&(se=se.map(pe=>Fb(Ua(pe)))),f(e,["setup","tools"],se)}const O=u(t,["sessionResumption"]);e!==void 0&&O!=null&&f(e,["setup","sessionResumption"],qb(O));const F=u(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&f(e,["setup","inputAudioTranscription"],WT());const oe=u(t,["outputAudioTranscription"]);e!==void 0&&oe!=null&&f(e,["setup","outputAudioTranscription"],WT());const te=u(t,["realtimeInputConfig"]);e!==void 0&&te!=null&&f(e,["setup","realtimeInputConfig"],zb(te));const ne=u(t,["contextWindowCompression"]);e!==void 0&&ne!=null&&f(e,["setup","contextWindowCompression"],$b(ne));const fe=u(t,["proactivity"]);return e!==void 0&&fe!=null&&f(e,["setup","proactivity"],Yb(fe)),n}function Jb(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["setup","model"],ht(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],Kb(r,n)),n}function Qb(){return{}}function Xb(){return{}}function Wb(t){const e={},n=u(t,["media"]);n!=null&&f(e,["mediaChunks"],F0(n));const i=u(t,["audio"]);i!=null&&f(e,["audio"],G0(i));const r=u(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const a=u(t,["video"]);a!=null&&f(e,["video"],q0(a));const c=u(t,["text"]);return c!=null&&f(e,["text"],c),u(t,["activityStart"])!=null&&f(e,["activityStart"],Qb()),u(t,["activityEnd"])!=null&&f(e,["activityEnd"],Xb()),e}function iS(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["weight"]);return i!=null&&f(e,["weight"],i),e}function Zb(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>iS(r))),f(e,["weightedPrompts"],i)}return e}function oS(t){const e={},n=u(t,["temperature"]);n!=null&&f(e,["temperature"],n);const i=u(t,["topK"]);i!=null&&f(e,["topK"],i);const r=u(t,["seed"]);r!=null&&f(e,["seed"],r);const a=u(t,["guidance"]);a!=null&&f(e,["guidance"],a);const c=u(t,["bpm"]);c!=null&&f(e,["bpm"],c);const h=u(t,["density"]);h!=null&&f(e,["density"],h);const m=u(t,["brightness"]);m!=null&&f(e,["brightness"],m);const p=u(t,["scale"]);p!=null&&f(e,["scale"],p);const v=u(t,["muteBass"]);v!=null&&f(e,["muteBass"],v);const E=u(t,["muteDrums"]);E!=null&&f(e,["muteDrums"],E);const S=u(t,["onlyBassAndDrums"]);S!=null&&f(e,["onlyBassAndDrums"],S);const I=u(t,["musicGenerationMode"]);return I!=null&&f(e,["musicGenerationMode"],I),e}function jb(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],oS(n)),e}function rS(t){const e={},n=u(t,["model"]);return n!=null&&f(e,["model"],n),e}function sS(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>iS(r))),f(e,["weightedPrompts"],i)}return e}function Hp(t){const e={},n=u(t,["setup"]);n!=null&&f(e,["setup"],rS(n));const i=u(t,["clientContent"]);i!=null&&f(e,["clientContent"],sS(i));const r=u(t,["musicGenerationConfig"]);r!=null&&f(e,["musicGenerationConfig"],oS(r));const a=u(t,["playbackControl"]);return a!=null&&f(e,["playbackControl"],a),e}function eM(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function tM(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],eM(n)),e}function nM(t){const e={},n=u(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],tM(n)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function iM(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function oM(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function rM(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function sM(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],iM(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],oM(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],rM(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function aM(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>sM(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function lM(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=u(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=u(t,["response"]);c!=null&&f(e,["response"],c);const h=u(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function uM(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function cM(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],uM(n)),e}function fM(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function dM(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],fM(n)),e}function hM(){return{}}function pM(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&f(e,["apiKeyString"],n),e}function mM(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&f(e,["apiKeyConfig"],pM(n));const i=u(t,["authType"]);i!=null&&f(e,["authType"],i);const r=u(t,["googleServiceAccountConfig"]);r!=null&&f(e,["googleServiceAccountConfig"],r);const a=u(t,["httpBasicAuthConfig"]);a!=null&&f(e,["httpBasicAuthConfig"],a);const c=u(t,["oauthConfig"]);c!=null&&f(e,["oauthConfig"],c);const h=u(t,["oidcConfig"]);return h!=null&&f(e,["oidcConfig"],h),e}function gM(t){const e={},n=u(t,["authConfig"]);return n!=null&&f(e,["authConfig"],mM(n)),e}function yM(){return{}}function vM(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>lM(S))),f(e,["functionDeclarations"],E)}const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=u(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],cM(r));const a=u(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],dM(a)),u(t,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],hM());const h=u(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],gM(h)),u(t,["urlContext"])!=null&&f(e,["urlContext"],yM());const p=u(t,["codeExecution"]);p!=null&&f(e,["codeExecution"],p);const v=u(t,["computerUse"]);return v!=null&&f(e,["computerUse"],v),e}function _M(t){const e={},n=u(t,["handle"]);n!=null&&f(e,["handle"],n);const i=u(t,["transparent"]);return i!=null&&f(e,["transparent"],i),e}function ZT(){return{}}function TM(t){const e={},n=u(t,["disabled"]);n!=null&&f(e,["disabled"],n);const i=u(t,["startOfSpeechSensitivity"]);i!=null&&f(e,["startOfSpeechSensitivity"],i);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&f(e,["endOfSpeechSensitivity"],r);const a=u(t,["prefixPaddingMs"]);a!=null&&f(e,["prefixPaddingMs"],a);const c=u(t,["silenceDurationMs"]);return c!=null&&f(e,["silenceDurationMs"],c),e}function EM(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&f(e,["automaticActivityDetection"],TM(n));const i=u(t,["activityHandling"]);i!=null&&f(e,["activityHandling"],i);const r=u(t,["turnCoverage"]);return r!=null&&f(e,["turnCoverage"],r),e}function SM(t){const e={},n=u(t,["targetTokens"]);return n!=null&&f(e,["targetTokens"],n),e}function AM(t){const e={},n=u(t,["triggerTokens"]);n!=null&&f(e,["triggerTokens"],n);const i=u(t,["slidingWindow"]);return i!=null&&f(e,["slidingWindow"],SM(i)),e}function CM(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&f(e,["proactiveAudio"],n),e}function wM(t,e){const n={},i=u(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=u(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=u(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=u(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const p=u(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=u(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=u(t,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],nM(xm(E)));const S=u(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&f(e,["setup","systemInstruction"],aM(wn(I)));const x=u(t,["tools"]);if(e!==void 0&&x!=null){let se=Oa(x);Array.isArray(se)&&(se=se.map(pe=>vM(Ua(pe)))),f(e,["setup","tools"],se)}const O=u(t,["sessionResumption"]);e!==void 0&&O!=null&&f(e,["setup","sessionResumption"],_M(O));const F=u(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&f(e,["setup","inputAudioTranscription"],ZT());const oe=u(t,["outputAudioTranscription"]);e!==void 0&&oe!=null&&f(e,["setup","outputAudioTranscription"],ZT());const te=u(t,["realtimeInputConfig"]);e!==void 0&&te!=null&&f(e,["setup","realtimeInputConfig"],EM(te));const ne=u(t,["contextWindowCompression"]);e!==void 0&&ne!=null&&f(e,["setup","contextWindowCompression"],AM(ne));const fe=u(t,["proactivity"]);return e!==void 0&&fe!=null&&f(e,["setup","proactivity"],CM(fe)),n}function IM(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["setup","model"],ht(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],wM(r,n)),n}function RM(){return{}}function xM(){return{}}function bM(t){const e={},n=u(t,["media"]);n!=null&&f(e,["mediaChunks"],F0(n));const i=u(t,["audio"]);i!=null&&f(e,["audio"],G0(i));const r=u(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const a=u(t,["video"]);a!=null&&f(e,["video"],q0(a));const c=u(t,["text"]);return c!=null&&f(e,["text"],c),u(t,["activityStart"])!=null&&f(e,["activityStart"],RM()),u(t,["activityEnd"])!=null&&f(e,["activityEnd"],xM()),e}function MM(){return{}}function NM(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function kM(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function DM(t){const e={},n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function PM(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],NM(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],kM(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],DM(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function VM(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>PM(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function jT(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["finished"]);return i!=null&&f(e,["finished"],i),e}function LM(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function UM(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>LM(r))),f(e,["urlMetadata"],i)}return e}function OM(t){const e={},n=u(t,["modelTurn"]);n!=null&&f(e,["modelTurn"],VM(n));const i=u(t,["turnComplete"]);i!=null&&f(e,["turnComplete"],i);const r=u(t,["interrupted"]);r!=null&&f(e,["interrupted"],r);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const c=u(t,["generationComplete"]);c!=null&&f(e,["generationComplete"],c);const h=u(t,["inputTranscription"]);h!=null&&f(e,["inputTranscription"],jT(h));const m=u(t,["outputTranscription"]);m!=null&&f(e,["outputTranscription"],jT(m));const p=u(t,["urlContextMetadata"]);return p!=null&&f(e,["urlContextMetadata"],UM(p)),e}function BM(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const i=u(t,["args"]);i!=null&&f(e,["args"],i);const r=u(t,["name"]);return r!=null&&f(e,["name"],r),e}function FM(t){const e={},n=u(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>BM(r))),f(e,["functionCalls"],i)}return e}function qM(t){const e={},n=u(t,["ids"]);return n!=null&&f(e,["ids"],n),e}function of(t){const e={},n=u(t,["modality"]);n!=null&&f(e,["modality"],n);const i=u(t,["tokenCount"]);return i!=null&&f(e,["tokenCount"],i),e}function GM(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=u(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const r=u(t,["responseTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const a=u(t,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const c=u(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=u(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const m=u(t,["promptTokensDetails"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(I=>of(I))),f(e,["promptTokensDetails"],S)}const p=u(t,["cacheTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(I=>of(I))),f(e,["cacheTokensDetails"],S)}const v=u(t,["responseTokensDetails"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(I=>of(I))),f(e,["responseTokensDetails"],S)}const E=u(t,["toolUsePromptTokensDetails"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(I=>of(I))),f(e,["toolUsePromptTokensDetails"],S)}return e}function zM(t){const e={},n=u(t,["timeLeft"]);return n!=null&&f(e,["timeLeft"],n),e}function HM(t){const e={},n=u(t,["newHandle"]);n!=null&&f(e,["newHandle"],n);const i=u(t,["resumable"]);i!=null&&f(e,["resumable"],i);const r=u(t,["lastConsumedClientMessageIndex"]);return r!=null&&f(e,["lastConsumedClientMessageIndex"],r),e}function $M(t){const e={};u(t,["setupComplete"])!=null&&f(e,["setupComplete"],MM());const i=u(t,["serverContent"]);i!=null&&f(e,["serverContent"],OM(i));const r=u(t,["toolCall"]);r!=null&&f(e,["toolCall"],FM(r));const a=u(t,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],qM(a));const c=u(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],GM(c));const h=u(t,["goAway"]);h!=null&&f(e,["goAway"],zM(h));const m=u(t,["sessionResumptionUpdate"]);return m!=null&&f(e,["sessionResumptionUpdate"],HM(m)),e}function YM(){return{}}function KM(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["weight"]);return i!=null&&f(e,["weight"],i),e}function JM(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>KM(r))),f(e,["weightedPrompts"],i)}return e}function QM(t){const e={},n=u(t,["temperature"]);n!=null&&f(e,["temperature"],n);const i=u(t,["topK"]);i!=null&&f(e,["topK"],i);const r=u(t,["seed"]);r!=null&&f(e,["seed"],r);const a=u(t,["guidance"]);a!=null&&f(e,["guidance"],a);const c=u(t,["bpm"]);c!=null&&f(e,["bpm"],c);const h=u(t,["density"]);h!=null&&f(e,["density"],h);const m=u(t,["brightness"]);m!=null&&f(e,["brightness"],m);const p=u(t,["scale"]);p!=null&&f(e,["scale"],p);const v=u(t,["muteBass"]);v!=null&&f(e,["muteBass"],v);const E=u(t,["muteDrums"]);E!=null&&f(e,["muteDrums"],E);const S=u(t,["onlyBassAndDrums"]);S!=null&&f(e,["onlyBassAndDrums"],S);const I=u(t,["musicGenerationMode"]);return I!=null&&f(e,["musicGenerationMode"],I),e}function XM(t){const e={},n=u(t,["clientContent"]);n!=null&&f(e,["clientContent"],JM(n));const i=u(t,["musicGenerationConfig"]);return i!=null&&f(e,["musicGenerationConfig"],QM(i)),e}function WM(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);i!=null&&f(e,["mimeType"],i);const r=u(t,["sourceMetadata"]);return r!=null&&f(e,["sourceMetadata"],XM(r)),e}function ZM(t){const e={},n=u(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>WM(r))),f(e,["audioChunks"],i)}return e}function jM(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["filteredReason"]);return i!=null&&f(e,["filteredReason"],i),e}function e1(t){const e={};u(t,["setupComplete"])!=null&&f(e,["setupComplete"],YM());const i=u(t,["serverContent"]);i!=null&&f(e,["serverContent"],ZM(i));const r=u(t,["filteredPrompt"]);return r!=null&&f(e,["filteredPrompt"],jM(r)),e}function t1(t){const e={},n=u(t,["sessionId"]);return n!=null&&f(e,["sessionId"],n),e}function n1(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function i1(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function o1(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function r1(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n1(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],i1(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],o1(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function s1(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>r1(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function eE(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["finished"]);return i!=null&&f(e,["finished"],i),e}function a1(t){const e={},n=u(t,["modelTurn"]);n!=null&&f(e,["modelTurn"],s1(n));const i=u(t,["turnComplete"]);i!=null&&f(e,["turnComplete"],i);const r=u(t,["interrupted"]);r!=null&&f(e,["interrupted"],r);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const c=u(t,["generationComplete"]);c!=null&&f(e,["generationComplete"],c);const h=u(t,["inputTranscription"]);h!=null&&f(e,["inputTranscription"],eE(h));const m=u(t,["outputTranscription"]);return m!=null&&f(e,["outputTranscription"],eE(m)),e}function l1(t){const e={},n=u(t,["args"]);n!=null&&f(e,["args"],n);const i=u(t,["name"]);return i!=null&&f(e,["name"],i),e}function u1(t){const e={},n=u(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>l1(r))),f(e,["functionCalls"],i)}return e}function c1(t){const e={},n=u(t,["ids"]);return n!=null&&f(e,["ids"],n),e}function rf(t){const e={},n=u(t,["modality"]);n!=null&&f(e,["modality"],n);const i=u(t,["tokenCount"]);return i!=null&&f(e,["tokenCount"],i),e}function f1(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=u(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const r=u(t,["candidatesTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const a=u(t,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const c=u(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=u(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const m=u(t,["promptTokensDetails"]);if(m!=null){let I=m;Array.isArray(I)&&(I=I.map(x=>rf(x))),f(e,["promptTokensDetails"],I)}const p=u(t,["cacheTokensDetails"]);if(p!=null){let I=p;Array.isArray(I)&&(I=I.map(x=>rf(x))),f(e,["cacheTokensDetails"],I)}const v=u(t,["candidatesTokensDetails"]);if(v!=null){let I=v;Array.isArray(I)&&(I=I.map(x=>rf(x))),f(e,["responseTokensDetails"],I)}const E=u(t,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(x=>rf(x))),f(e,["toolUsePromptTokensDetails"],I)}const S=u(t,["trafficType"]);return S!=null&&f(e,["trafficType"],S),e}function d1(t){const e={},n=u(t,["timeLeft"]);return n!=null&&f(e,["timeLeft"],n),e}function h1(t){const e={},n=u(t,["newHandle"]);n!=null&&f(e,["newHandle"],n);const i=u(t,["resumable"]);i!=null&&f(e,["resumable"],i);const r=u(t,["lastConsumedClientMessageIndex"]);return r!=null&&f(e,["lastConsumedClientMessageIndex"],r),e}function p1(t){const e={},n=u(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],t1(n));const i=u(t,["serverContent"]);i!=null&&f(e,["serverContent"],a1(i));const r=u(t,["toolCall"]);r!=null&&f(e,["toolCall"],u1(r));const a=u(t,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],c1(a));const c=u(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],f1(c));const h=u(t,["goAway"]);h!=null&&f(e,["goAway"],d1(h));const m=u(t,["sessionResumptionUpdate"]);return m!=null&&f(e,["sessionResumptionUpdate"],h1(m)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m1(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function g1(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function y1(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function v1(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],m1(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],g1(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],y1(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function Qf(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>v1(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function _1(t){const e={},n=u(t,["anyOf"]);n!=null&&f(e,["anyOf"],n);const i=u(t,["default"]);i!=null&&f(e,["default"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["enum"]);a!=null&&f(e,["enum"],a);const c=u(t,["example"]);c!=null&&f(e,["example"],c);const h=u(t,["format"]);h!=null&&f(e,["format"],h);const m=u(t,["items"]);m!=null&&f(e,["items"],m);const p=u(t,["maxItems"]);p!=null&&f(e,["maxItems"],p);const v=u(t,["maxLength"]);v!=null&&f(e,["maxLength"],v);const E=u(t,["maxProperties"]);E!=null&&f(e,["maxProperties"],E);const S=u(t,["maximum"]);S!=null&&f(e,["maximum"],S);const I=u(t,["minItems"]);I!=null&&f(e,["minItems"],I);const x=u(t,["minLength"]);x!=null&&f(e,["minLength"],x);const O=u(t,["minProperties"]);O!=null&&f(e,["minProperties"],O);const F=u(t,["minimum"]);F!=null&&f(e,["minimum"],F);const oe=u(t,["nullable"]);oe!=null&&f(e,["nullable"],oe);const te=u(t,["pattern"]);te!=null&&f(e,["pattern"],te);const ne=u(t,["properties"]);ne!=null&&f(e,["properties"],ne);const fe=u(t,["propertyOrdering"]);fe!=null&&f(e,["propertyOrdering"],fe);const se=u(t,["required"]);se!=null&&f(e,["required"],se);const pe=u(t,["title"]);pe!=null&&f(e,["title"],pe);const k=u(t,["type"]);return k!=null&&f(e,["type"],k),e}function T1(t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(t,["category"]);n!=null&&f(e,["category"],n);const i=u(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function E1(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function S1(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function A1(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],S1(n)),e}function C1(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function w1(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],C1(n)),e}function I1(){return{}}function R1(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>E1(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],A1(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],w1(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],I1());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function x1(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function b1(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function M1(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],b1(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function N1(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],x1(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],M1(i)),e}function k1(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function aS(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],k1(n)),e}function D1(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],aS(i)),e}function P1(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>D1(r))),f(e,["speakerVoiceConfigs"],i)}return e}function V1(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],aS(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],P1(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function L1(t){const e={},n=u(t,["includeThoughts"]);n!=null&&f(e,["includeThoughts"],n);const i=u(t,["thinkingBudget"]);return i!=null&&f(e,["thinkingBudget"],i),e}function U1(t,e,n){const i={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],Qf(wn(r)));const a=u(e,["temperature"]);a!=null&&f(i,["temperature"],a);const c=u(e,["topP"]);c!=null&&f(i,["topP"],c);const h=u(e,["topK"]);h!=null&&f(i,["topK"],h);const m=u(e,["candidateCount"]);m!=null&&f(i,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&f(i,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&f(i,["stopSequences"],v);const E=u(e,["responseLogprobs"]);E!=null&&f(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&f(i,["logprobs"],S);const I=u(e,["presencePenalty"]);I!=null&&f(i,["presencePenalty"],I);const x=u(e,["frequencyPenalty"]);x!=null&&f(i,["frequencyPenalty"],x);const O=u(e,["seed"]);O!=null&&f(i,["seed"],O);const F=u(e,["responseMimeType"]);F!=null&&f(i,["responseMimeType"],F);const oe=u(e,["responseSchema"]);oe!=null&&f(i,["responseSchema"],_1(Im(oe)));const te=u(e,["responseJsonSchema"]);if(te!=null&&f(i,["responseJsonSchema"],te),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ne=u(e,["safetySettings"]);if(n!==void 0&&ne!=null){let N=ne;Array.isArray(N)&&(N=N.map(q=>T1(q))),f(n,["safetySettings"],N)}const fe=u(e,["tools"]);if(n!==void 0&&fe!=null){let N=Oa(fe);Array.isArray(N)&&(N=N.map(q=>R1(Ua(q)))),f(n,["tools"],N)}const se=u(e,["toolConfig"]);if(n!==void 0&&se!=null&&f(n,["toolConfig"],N1(se)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const pe=u(e,["cachedContent"]);n!==void 0&&pe!=null&&f(n,["cachedContent"],Bo(t,pe));const k=u(e,["responseModalities"]);k!=null&&f(i,["responseModalities"],k);const M=u(e,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);const b=u(e,["speechConfig"]);if(b!=null&&f(i,["speechConfig"],V1(Rm(b))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=u(e,["thinkingConfig"]);return V!=null&&f(i,["thinkingConfig"],L1(V)),i}function tE(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["contents"]);if(r!=null){let c=hi(r);Array.isArray(c)&&(c=c.map(h=>Qf(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["generationConfig"],U1(t,a,n)),n}function O1(t,e){const n={},i=u(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const r=u(t,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const a=u(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function B1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["contents"]);r!=null&&f(n,["requests[]","content"],H0(t,r));const a=u(e,["config"]);a!=null&&f(n,["config"],O1(a,n));const c=u(e,["model"]);return c!==void 0&&f(n,["requests[]","model"],ht(t,c)),n}function F1(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=u(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const a=u(t,["guidanceScale"]);if(e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const p=u(t,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const v=u(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const E=u(t,["outputMimeType"]);e!==void 0&&E!=null&&f(e,["parameters","outputOptions","mimeType"],E);const S=u(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const I=u(t,["imageSize"]);if(e!==void 0&&I!=null&&f(e,["parameters","sampleImageSize"],I),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function q1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["config"]);return a!=null&&f(n,["config"],F1(a,n)),n}function G1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ht(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function z1(t,e,n){const i={},r=u(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const a=u(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=u(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=u(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],K0(t,h)),i}function H1(t,e){const n={},i=u(e,["config"]);return i!=null&&f(n,["config"],z1(t,i,n)),n}function $1(t,e){const n={},i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const a=u(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function Y1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ht(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],$1(r,n)),n}function K1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ht(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function J1(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Q1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["contents"]);if(r!=null){let c=hi(r);Array.isArray(c)&&(c=c.map(h=>Qf(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["config"],J1(a)),n}function X1(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],Ss(n));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function W1(t,e){const n={},i=u(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=u(t,["durationSeconds"]);if(e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=u(t,["aspectRatio"]);if(e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a),u(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const c=u(t,["personGeneration"]);if(e!==void 0&&c!=null&&f(e,["parameters","personGeneration"],c),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=u(t,["negativePrompt"]);e!==void 0&&h!=null&&f(e,["parameters","negativePrompt"],h);const m=u(t,["enhancePrompt"]);if(e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(u(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Z1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["image"]);if(a!=null&&f(n,["instances[0]","image"],X1(a)),u(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const c=u(e,["config"]);return c!=null&&f(n,["config"],W1(c,n)),n}function j1(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function eN(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function tN(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function nN(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],j1(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],eN(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],tN(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function Fa(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>nN(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function iN(t){const e={},n=u(t,["anyOf"]);n!=null&&f(e,["anyOf"],n);const i=u(t,["default"]);i!=null&&f(e,["default"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["enum"]);a!=null&&f(e,["enum"],a);const c=u(t,["example"]);c!=null&&f(e,["example"],c);const h=u(t,["format"]);h!=null&&f(e,["format"],h);const m=u(t,["items"]);m!=null&&f(e,["items"],m);const p=u(t,["maxItems"]);p!=null&&f(e,["maxItems"],p);const v=u(t,["maxLength"]);v!=null&&f(e,["maxLength"],v);const E=u(t,["maxProperties"]);E!=null&&f(e,["maxProperties"],E);const S=u(t,["maximum"]);S!=null&&f(e,["maximum"],S);const I=u(t,["minItems"]);I!=null&&f(e,["minItems"],I);const x=u(t,["minLength"]);x!=null&&f(e,["minLength"],x);const O=u(t,["minProperties"]);O!=null&&f(e,["minProperties"],O);const F=u(t,["minimum"]);F!=null&&f(e,["minimum"],F);const oe=u(t,["nullable"]);oe!=null&&f(e,["nullable"],oe);const te=u(t,["pattern"]);te!=null&&f(e,["pattern"],te);const ne=u(t,["properties"]);ne!=null&&f(e,["properties"],ne);const fe=u(t,["propertyOrdering"]);fe!=null&&f(e,["propertyOrdering"],fe);const se=u(t,["required"]);se!=null&&f(e,["required"],se);const pe=u(t,["title"]);pe!=null&&f(e,["title"],pe);const k=u(t,["type"]);return k!=null&&f(e,["type"],k),e}function oN(t){const e={},n=u(t,["featureSelectionPreference"]);return n!=null&&f(e,["featureSelectionPreference"],n),e}function rN(t){const e={},n=u(t,["method"]);n!=null&&f(e,["method"],n);const i=u(t,["category"]);i!=null&&f(e,["category"],i);const r=u(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function sN(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=u(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=u(t,["response"]);c!=null&&f(e,["response"],c);const h=u(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function aN(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function lN(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],aN(n)),e}function uN(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function cN(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],uN(n)),e}function fN(){return{}}function dN(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&f(e,["apiKeyString"],n),e}function hN(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&f(e,["apiKeyConfig"],dN(n));const i=u(t,["authType"]);i!=null&&f(e,["authType"],i);const r=u(t,["googleServiceAccountConfig"]);r!=null&&f(e,["googleServiceAccountConfig"],r);const a=u(t,["httpBasicAuthConfig"]);a!=null&&f(e,["httpBasicAuthConfig"],a);const c=u(t,["oauthConfig"]);c!=null&&f(e,["oauthConfig"],c);const h=u(t,["oidcConfig"]);return h!=null&&f(e,["oidcConfig"],h),e}function pN(t){const e={},n=u(t,["authConfig"]);return n!=null&&f(e,["authConfig"],hN(n)),e}function mN(){return{}}function lS(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>sN(S))),f(e,["functionDeclarations"],E)}const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=u(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],lN(r));const a=u(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],cN(a)),u(t,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],fN());const h=u(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],pN(h)),u(t,["urlContext"])!=null&&f(e,["urlContext"],mN());const p=u(t,["codeExecution"]);p!=null&&f(e,["codeExecution"],p);const v=u(t,["computerUse"]);return v!=null&&f(e,["computerUse"],v),e}function gN(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function yN(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function vN(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],yN(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function _N(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],gN(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],vN(i)),e}function TN(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function EN(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],TN(n)),e}function SN(t){const e={},n=u(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],EN(n)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function AN(t){const e={},n=u(t,["includeThoughts"]);n!=null&&f(e,["includeThoughts"],n);const i=u(t,["thinkingBudget"]);return i!=null&&f(e,["thinkingBudget"],i),e}function CN(t,e,n){const i={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],Fa(wn(r)));const a=u(e,["temperature"]);a!=null&&f(i,["temperature"],a);const c=u(e,["topP"]);c!=null&&f(i,["topP"],c);const h=u(e,["topK"]);h!=null&&f(i,["topK"],h);const m=u(e,["candidateCount"]);m!=null&&f(i,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&f(i,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&f(i,["stopSequences"],v);const E=u(e,["responseLogprobs"]);E!=null&&f(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&f(i,["logprobs"],S);const I=u(e,["presencePenalty"]);I!=null&&f(i,["presencePenalty"],I);const x=u(e,["frequencyPenalty"]);x!=null&&f(i,["frequencyPenalty"],x);const O=u(e,["seed"]);O!=null&&f(i,["seed"],O);const F=u(e,["responseMimeType"]);F!=null&&f(i,["responseMimeType"],F);const oe=u(e,["responseSchema"]);oe!=null&&f(i,["responseSchema"],iN(Im(oe)));const te=u(e,["responseJsonSchema"]);te!=null&&f(i,["responseJsonSchema"],te);const ne=u(e,["routingConfig"]);ne!=null&&f(i,["routingConfig"],ne);const fe=u(e,["modelSelectionConfig"]);fe!=null&&f(i,["modelConfig"],oN(fe));const se=u(e,["safetySettings"]);if(n!==void 0&&se!=null){let Xe=se;Array.isArray(Xe)&&(Xe=Xe.map(X=>rN(X))),f(n,["safetySettings"],Xe)}const pe=u(e,["tools"]);if(n!==void 0&&pe!=null){let Xe=Oa(pe);Array.isArray(Xe)&&(Xe=Xe.map(X=>lS(Ua(X)))),f(n,["tools"],Xe)}const k=u(e,["toolConfig"]);n!==void 0&&k!=null&&f(n,["toolConfig"],_N(k));const M=u(e,["labels"]);n!==void 0&&M!=null&&f(n,["labels"],M);const b=u(e,["cachedContent"]);n!==void 0&&b!=null&&f(n,["cachedContent"],Bo(t,b));const V=u(e,["responseModalities"]);V!=null&&f(i,["responseModalities"],V);const N=u(e,["mediaResolution"]);N!=null&&f(i,["mediaResolution"],N);const q=u(e,["speechConfig"]);q!=null&&f(i,["speechConfig"],SN(Rm(q)));const P=u(e,["audioTimestamp"]);P!=null&&f(i,["audioTimestamp"],P);const At=u(e,["thinkingConfig"]);return At!=null&&f(i,["thinkingConfig"],AN(At)),i}function nE(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["contents"]);if(r!=null){let c=hi(r);Array.isArray(c)&&(c=c.map(h=>Fa(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["generationConfig"],CN(t,a,n)),n}function wN(t,e){const n={},i=u(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);const r=u(t,["title"]);e!==void 0&&r!=null&&f(e,["instances[]","title"],r);const a=u(t,["outputDimensionality"]);e!==void 0&&a!=null&&f(e,["parameters","outputDimensionality"],a);const c=u(t,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const h=u(t,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),n}function IN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["contents"]);r!=null&&f(n,["instances[]","content"],H0(t,r));const a=u(e,["config"]);return a!=null&&f(n,["config"],wN(a,n)),n}function RN(t,e){const n={},i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=u(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const a=u(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=u(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=u(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const m=u(t,["seed"]);e!==void 0&&m!=null&&f(e,["parameters","seed"],m);const p=u(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=u(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=u(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&f(e,["parameters","includeSafetyAttributes"],E);const S=u(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const I=u(t,["language"]);e!==void 0&&I!=null&&f(e,["parameters","language"],I);const x=u(t,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const O=u(t,["outputCompressionQuality"]);e!==void 0&&O!=null&&f(e,["parameters","outputOptions","compressionQuality"],O);const F=u(t,["addWatermark"]);e!==void 0&&F!=null&&f(e,["parameters","addWatermark"],F);const oe=u(t,["imageSize"]);e!==void 0&&oe!=null&&f(e,["parameters","sampleImageSize"],oe);const te=u(t,["enhancePrompt"]);return e!==void 0&&te!=null&&f(e,["parameters","enhancePrompt"],te),n}function xN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["config"]);return a!=null&&f(n,["config"],RN(a,n)),n}function qa(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Ss(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function bN(t){const e={},n=u(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const i=u(t,["segmentationClasses"]);i!=null&&f(e,["maskClasses"],i);const r=u(t,["maskDilation"]);return r!=null&&f(e,["dilation"],r),e}function MN(t){const e={},n=u(t,["controlType"]);n!=null&&f(e,["controlType"],n);const i=u(t,["enableControlImageComputation"]);return i!=null&&f(e,["computeControl"],i),e}function NN(t){const e={},n=u(t,["styleDescription"]);return n!=null&&f(e,["styleDescription"],n),e}function kN(t){const e={},n=u(t,["subjectType"]);n!=null&&f(e,["subjectType"],n);const i=u(t,["subjectDescription"]);return i!=null&&f(e,["subjectDescription"],i),e}function DN(t){const e={},n=u(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],qa(n));const i=u(t,["referenceId"]);i!=null&&f(e,["referenceId"],i);const r=u(t,["referenceType"]);r!=null&&f(e,["referenceType"],r);const a=u(t,["maskImageConfig"]);a!=null&&f(e,["maskImageConfig"],bN(a));const c=u(t,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],MN(c));const h=u(t,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],NN(h));const m=u(t,["subjectImageConfig"]);return m!=null&&f(e,["subjectImageConfig"],kN(m)),e}function PN(t,e){const n={},i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=u(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const a=u(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=u(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=u(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const m=u(t,["seed"]);e!==void 0&&m!=null&&f(e,["parameters","seed"],m);const p=u(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=u(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=u(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&f(e,["parameters","includeSafetyAttributes"],E);const S=u(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const I=u(t,["language"]);e!==void 0&&I!=null&&f(e,["parameters","language"],I);const x=u(t,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const O=u(t,["outputCompressionQuality"]);e!==void 0&&O!=null&&f(e,["parameters","outputOptions","compressionQuality"],O);const F=u(t,["addWatermark"]);e!==void 0&&F!=null&&f(e,["parameters","addWatermark"],F);const oe=u(t,["editMode"]);e!==void 0&&oe!=null&&f(e,["parameters","editMode"],oe);const te=u(t,["baseSteps"]);return e!==void 0&&te!=null&&f(e,["parameters","editConfig","baseSteps"],te),n}function VN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(m=>DN(m))),f(n,["instances[0]","referenceImages"],h)}const c=u(e,["config"]);return c!=null&&f(n,["config"],PN(c,n)),n}function LN(t,e){const n={},i=u(t,["includeRaiReason"]);e!==void 0&&i!=null&&f(e,["parameters","includeRaiReason"],i);const r=u(t,["outputMimeType"]);e!==void 0&&r!=null&&f(e,["parameters","outputOptions","mimeType"],r);const a=u(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&f(e,["parameters","outputOptions","compressionQuality"],a);const c=u(t,["enhanceInputImage"]);e!==void 0&&c!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],c);const h=u(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const m=u(t,["numberOfImages"]);e!==void 0&&m!=null&&f(e,["parameters","sampleCount"],m);const p=u(t,["mode"]);return e!==void 0&&p!=null&&f(e,["parameters","mode"],p),n}function UN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["image"]);r!=null&&f(n,["instances[0]","image"],qa(r));const a=u(e,["upscaleFactor"]);a!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],a);const c=u(e,["config"]);return c!=null&&f(n,["config"],LN(c,n)),n}function ON(t){const e={},n=u(t,["productImage"]);return n!=null&&f(e,["image"],qa(n)),e}function BN(t,e){const n={},i=u(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=u(t,["personImage"]);e!==void 0&&r!=null&&f(e,["instances[0]","personImage","image"],qa(r));const a=u(t,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>ON(h))),f(e,["instances[0]","productImages"],c)}return n}function FN(t,e){const n={},i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=u(t,["baseSteps"]);e!==void 0&&r!=null&&f(e,["parameters","editConfig","baseSteps"],r);const a=u(t,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const c=u(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const h=u(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const m=u(t,["personGeneration"]);e!==void 0&&m!=null&&f(e,["parameters","personGeneration"],m);const p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const v=u(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","compressionQuality"],v);const E=u(t,["enhancePrompt"]);return e!==void 0&&E!=null&&f(e,["parameters","enhancePrompt"],E),n}function qN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["source"]);r!=null&&f(n,["config"],BN(r,n));const a=u(e,["config"]);return a!=null&&f(n,["config"],FN(a,n)),n}function GN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ht(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function zN(t,e,n){const i={},r=u(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const a=u(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=u(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=u(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],K0(t,h)),i}function HN(t,e){const n={},i=u(e,["config"]);return i!=null&&f(n,["config"],zN(t,i,n)),n}function $N(t,e){const n={},i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const a=u(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function YN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],$N(r,n)),n}function KN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ht(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function JN(t,e){const n={},i=u(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],Fa(wn(i)));const r=u(t,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>lS(h))),f(e,["tools"],c)}const a=u(t,["generationConfig"]);return e!==void 0&&a!=null&&f(e,["generationConfig"],a),n}function QN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["contents"]);if(r!=null){let c=hi(r);Array.isArray(c)&&(c=c.map(h=>Fa(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["config"],JN(a,n)),n}function XN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["contents"]);if(r!=null){let c=hi(r);Array.isArray(c)&&(c=c.map(h=>Fa(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["config"],a),n}function WN(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["videoBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Ss(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function ZN(t,e){const n={},i=u(t,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const a=u(t,["fps"]);e!==void 0&&a!=null&&f(e,["parameters","fps"],a);const c=u(t,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const m=u(t,["aspectRatio"]);e!==void 0&&m!=null&&f(e,["parameters","aspectRatio"],m);const p=u(t,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const v=u(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=u(t,["pubsubTopic"]);e!==void 0&&E!=null&&f(e,["parameters","pubsubTopic"],E);const S=u(t,["negativePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","negativePrompt"],S);const I=u(t,["enhancePrompt"]);e!==void 0&&I!=null&&f(e,["parameters","enhancePrompt"],I);const x=u(t,["generateAudio"]);e!==void 0&&x!=null&&f(e,["parameters","generateAudio"],x);const O=u(t,["lastFrame"]);e!==void 0&&O!=null&&f(e,["instances[0]","lastFrame"],qa(O));const F=u(t,["compressionQuality"]);return e!==void 0&&F!=null&&f(e,["parameters","compressionQuality"],F),n}function jN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ht(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["image"]);a!=null&&f(n,["instances[0]","image"],qa(a));const c=u(e,["video"]);c!=null&&f(n,["instances[0]","video"],WN(c));const h=u(e,["config"]);return h!=null&&f(n,["config"],ZN(h,n)),n}function ek(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function tk(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function nk(t){const e={},n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function ik(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],ek(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],tk(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],nk(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function ok(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>ik(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function rk(t){const e={},n=u(t,["citationSources"]);return n!=null&&f(e,["citations"],n),e}function sk(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function ak(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>sk(r))),f(e,["urlMetadata"],i)}return e}function lk(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],ok(n));const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],rk(i));const r=u(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const a=u(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=u(t,["urlContextMetadata"]);c!=null&&f(e,["urlContextMetadata"],ak(c));const h=u(t,["avgLogprobs"]);h!=null&&f(e,["avgLogprobs"],h);const m=u(t,["groundingMetadata"]);m!=null&&f(e,["groundingMetadata"],m);const p=u(t,["index"]);p!=null&&f(e,["index"],p);const v=u(t,["logprobsResult"]);v!=null&&f(e,["logprobsResult"],v);const E=u(t,["safetyRatings"]);return E!=null&&f(e,["safetyRatings"],E),e}function iE(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>lk(p))),f(e,["candidates"],m)}const r=u(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const a=u(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=u(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=u(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function uk(t){const e={},n=u(t,["values"]);return n!=null&&f(e,["values"],n),e}function ck(){return{}}function fk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>uk(c))),f(e,["embeddings"],a)}return u(t,["metadata"])!=null&&f(e,["metadata"],ck()),e}function dk(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],Ss(n));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function uS(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=u(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=u(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function hk(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],dk(n));const i=u(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=u(t,["_self"]);return r!=null&&f(e,["safetyAttributes"],uS(r)),e}function pk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>hk(c))),f(e,["generatedImages"],a)}const r=u(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],uS(r)),e}function mk(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=u(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function $p(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["version"]);a!=null&&f(e,["version"],a);const c=u(t,["_self"]);c!=null&&f(e,["tunedModelInfo"],mk(c));const h=u(t,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const m=u(t,["outputTokenLimit"]);m!=null&&f(e,["outputTokenLimit"],m);const p=u(t,["supportedGenerationMethods"]);return p!=null&&f(e,["supportedActions"],p),e}function gk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["_self"]);if(r!=null){let a=J0(r);Array.isArray(a)&&(a=a.map(c=>$p(c))),f(e,["models"],a)}return e}function yk(){return{}}function vk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["totalTokens"]);i!=null&&f(e,["totalTokens"],i);const r=u(t,["cachedContentTokenCount"]);return r!=null&&f(e,["cachedContentTokenCount"],r),e}function _k(t){const e={},n=u(t,["video","uri"]);n!=null&&f(e,["uri"],n);const i=u(t,["video","encodedVideo"]);i!=null&&f(e,["videoBytes"],Ss(i));const r=u(t,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function Tk(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],_k(n)),e}function Ek(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>Tk(c))),f(e,["generatedVideos"],a)}const i=u(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function Sk(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);a!=null&&f(e,["error"],a);const c=u(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],Ek(c)),e}function Ak(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function Ck(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function wk(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Ik(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],Ak(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],Ck(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],wk(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function Rk(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Ik(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function xk(t){const e={},n=u(t,["citations"]);return n!=null&&f(e,["citations"],n),e}function bk(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function Mk(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>bk(r))),f(e,["urlMetadata"],i)}return e}function Nk(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],Rk(n));const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],xk(i));const r=u(t,["finishMessage"]);r!=null&&f(e,["finishMessage"],r);const a=u(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=u(t,["urlContextMetadata"]);c!=null&&f(e,["urlContextMetadata"],Mk(c));const h=u(t,["avgLogprobs"]);h!=null&&f(e,["avgLogprobs"],h);const m=u(t,["groundingMetadata"]);m!=null&&f(e,["groundingMetadata"],m);const p=u(t,["index"]);p!=null&&f(e,["index"],p);const v=u(t,["logprobsResult"]);v!=null&&f(e,["logprobsResult"],v);const E=u(t,["safetyRatings"]);return E!=null&&f(e,["safetyRatings"],E),e}function oE(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(v=>Nk(v))),f(e,["candidates"],p)}const r=u(t,["createTime"]);r!=null&&f(e,["createTime"],r);const a=u(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const c=u(t,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const h=u(t,["responseId"]);h!=null&&f(e,["responseId"],h);const m=u(t,["usageMetadata"]);return m!=null&&f(e,["usageMetadata"],m),e}function kk(t){const e={},n=u(t,["truncated"]);n!=null&&f(e,["truncated"],n);const i=u(t,["token_count"]);return i!=null&&f(e,["tokenCount"],i),e}function Dk(t){const e={},n=u(t,["values"]);n!=null&&f(e,["values"],n);const i=u(t,["statistics"]);return i!=null&&f(e,["statistics"],kk(i)),e}function Pk(t){const e={},n=u(t,["billableCharacterCount"]);return n!=null&&f(e,["billableCharacterCount"],n),e}function Vk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>Dk(c))),f(e,["embeddings"],a)}const r=u(t,["metadata"]);return r!=null&&f(e,["metadata"],Pk(r)),e}function Lk(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],Ss(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function cS(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=u(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=u(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function Xf(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],Lk(n));const i=u(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=u(t,["_self"]);r!=null&&f(e,["safetyAttributes"],cS(r));const a=u(t,["prompt"]);return a!=null&&f(e,["enhancedPrompt"],a),e}function Uk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>Xf(c))),f(e,["generatedImages"],a)}const r=u(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],cS(r)),e}function Ok(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Xf(a))),f(e,["generatedImages"],r)}return e}function Bk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Xf(a))),f(e,["generatedImages"],r)}return e}function Fk(t){const e={},n=u(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Xf(r))),f(e,["generatedImages"],i)}return e}function qk(t){const e={},n=u(t,["endpoint"]);n!=null&&f(e,["name"],n);const i=u(t,["deployedModelId"]);return i!=null&&f(e,["deployedModelId"],i),e}function Gk(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=u(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function zk(t){const e={},n=u(t,["checkpointId"]);n!=null&&f(e,["checkpointId"],n);const i=u(t,["epoch"]);i!=null&&f(e,["epoch"],i);const r=u(t,["step"]);return r!=null&&f(e,["step"],r),e}function Yp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["versionId"]);a!=null&&f(e,["version"],a);const c=u(t,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>qk(S))),f(e,["endpoints"],E)}const h=u(t,["labels"]);h!=null&&f(e,["labels"],h);const m=u(t,["_self"]);m!=null&&f(e,["tunedModelInfo"],Gk(m));const p=u(t,["defaultCheckpointId"]);p!=null&&f(e,["defaultCheckpointId"],p);const v=u(t,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>zk(S))),f(e,["checkpoints"],E)}return e}function Hk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["_self"]);if(r!=null){let a=J0(r);Array.isArray(a)&&(a=a.map(c=>Yp(c))),f(e,["models"],a)}return e}function $k(){return{}}function Yk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["totalTokens"]);return i!=null&&f(e,["totalTokens"],i),e}function Kk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["tokensInfo"]);return i!=null&&f(e,["tokensInfo"],i),e}function Jk(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=u(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],Ss(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Qk(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],Jk(n)),e}function Xk(t){const e={},n=u(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>Qk(c))),f(e,["generatedVideos"],a)}const i=u(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function Wk(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);a!=null&&f(e,["error"],a);const c=u(t,["response"]);return c!=null&&f(e,["response"],Xk(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zk="Content-Type",jk="X-Server-Timeout",eD="User-Agent",Kp="x-goog-api-client",tD="1.13.0",nD=`google-genai-sdk/${tD}`,iD="v1beta1",oD="v1beta",rE=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class rD{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:iD,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:oD,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))r.searchParams.append(c,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const r=new AbortController,a=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>r.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}i&&i.addEventListener("abort",()=>{r.abort()}),e.signal=a}return n&&n.extraBody!==null&&sD(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await sE(r),new Bp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await sE(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return Aa(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:h,value:m}=yield xt(r.read());if(h){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=a.decode(m,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),I=S.status,x=S.code,O=`got status: ${I}. ${JSON.stringify(E)}`;if(x>=400&&x<600)throw new Jf({message:O,status:x})}}catch(E){if(E.name==="ApiError")throw E}c+=p;let v=c.match(rE);for(;v;){const E=v[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield xt(new Bp(S)),c=c.slice(v[0].length),v=c.match(rE)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=nD+" "+this.clientOptions.userAgentExtra;return e[eD]=n,e[Kp]=n,e[Zk]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,r]of Object.entries(e.headers))n.append(i,r);e.timeout&&e.timeout>0&&n.append(jk,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);r.sizeBytes=String(c.size);const h=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const m=await this.fetchUploadUrl(r,n);return a.upload(e,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},c=await this.request({path:_e("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:r});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(i=c==null?void 0:c.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function sE(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Jf({message:r,status:n}):new Error(r)}}function sD(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,c){const h=Object.assign({},a);for(const m in c)if(Object.prototype.hasOwnProperty.call(c,m)){const p=c[m],v=h[m];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[m]=i(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[m]=p)}return h}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aD="mcp_used/unknown";let lD=!1;function fS(t){for(const e of t)if(uD(e)||typeof e=="object"&&"inputSchema"in e)return!0;return lD}function dS(t){var e;const n=(e=t[Kp])!==null&&e!==void 0?e:"";t[Kp]=(n+` ${aD}`).trimStart()}function uD(t){return t!==null&&typeof t=="object"&&t instanceof bm}function cD(t,e=100){return Aa(this,arguments,function*(){let i,r=0;for(;r<e;){const a=yield xt(t.listTools({cursor:i}));for(const c of a.tools)yield yield xt(c),r++;if(!a.nextCursor)break;i=a.nextCursor}})}class bm{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new bm(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const a={},c=[];for(const v of this.mcpClients)try{for(var h=!0,m=(n=void 0,su(cD(v))),p;p=await m.next(),e=p.done,!e;h=!0){r=p.value,h=!1;const E=r;c.push(E);const S=E.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(E){n={error:E}}finally{try{!h&&!e&&(i=m.return)&&await i.call(m)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),eR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await r.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function fD(t,e,n){const i=new YI;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);const a=e1(r);Object.assign(i,a),e(i)}class dD{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=mD(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),m=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(ne=>{p=ne}),E=e.callbacks,S=function(){p({})},I=this.apiClient,x={onopen:S,onmessage:ne=>{fD(I,E.onmessage,ne)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(ne){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(ne){}},O=this.webSocketFactory.create(m,pD(c),x);O.connect(),await v;const F=ht(this.apiClient,e.model),oe=rS({model:F}),te=Hp({setup:oe});return O.send(JSON.stringify(te)),new hD(O,this.apiClient)}}class hD{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Zb(e),i=sS(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=jb(e),i=Hp(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const n=Hp({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ea.PLAY)}pause(){this.sendPlaybackControl(Ea.PAUSE)}stop(){this.sendPlaybackControl(Ea.STOP)}resetContext(){this.sendPlaybackControl(Ea.RESET_CONTEXT)}close(){this.conn.close()}}function pD(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function mD(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gD="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function yD(t,e,n){const i=new $I;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const c=p1(a);Object.assign(i,c)}else{const c=$M(a);Object.assign(i,c)}e(i)}class vD{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new dD(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,a,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&fS(e.config.tools)&&dS(E);const S=SD(E);if(this.apiClient.isVertexAI())v=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const b=this.apiClient.getApiKey();let V="BidiGenerateContent",N="key";b!=null&&b.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",N="access_token"),v=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${V}?${N}=${b}`}let I=()=>{};const x=new Promise(b=>{I=b}),O=e.callbacks,F=function(){var b;(b=O==null?void 0:O.onopen)===null||b===void 0||b.call(O),I({})},oe=this.apiClient,te={onopen:F,onmessage:b=>{yD(oe,O.onmessage,b)},onerror:(n=O==null?void 0:O.onerror)!==null&&n!==void 0?n:function(b){},onclose:(i=O==null?void 0:O.onclose)!==null&&i!==void 0?i:function(b){}},ne=this.webSocketFactory.create(v,ED(S),te);ne.connect(),await x;let fe=ht(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&fe.startsWith("publishers/")){const b=this.apiClient.getProject(),V=this.apiClient.getLocation();fe=`projects/${b}/locations/${V}/`+fe}let se={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[If.AUDIO]}:e.config.responseModalities=[If.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const pe=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],k=[];for(const b of pe)if(this.isCallableTool(b)){const V=b;k.push(await V.tool())}else k.push(b);k.length>0&&(e.config.tools=k);const M={model:fe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?se=IM(this.apiClient,M):se=Jb(this.apiClient,M),delete se.config,ne.send(JSON.stringify(se)),new TD(ne,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const _D={turnComplete:!0};class TD{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=hi(n.turns),e.isVertexAI()?i=i.map(r=>Fa(r)):i=i.map(r=>Qf(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(gD)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},_D),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:bM(e)}:n={realtimeInput:Wb(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function ED(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function SD(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aE=10;function lE(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ca(c)){r=!0;break}if(!r)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ca(t){return"callTool"in t&&typeof t.callTool=="function"}function AD(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Ca(r)))!==null&&i!==void 0?i:!1}function CD(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!Ca(r)))!==null&&i!==void 0?i:!1}function uE(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wD extends Es{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,a,c,h;const m=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!AD(n)||lE(n.config))return await this.generateContentInternal(m);if(CD(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,v;const E=hi(m.contents),S=(a=(r=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:aE;let I=0;for(;I<S&&(p=await this.generateContentInternal(m),!(!p.functionCalls||p.functionCalls.length===0));){const x=p.candidates[0].content,O=[];for(const F of(h=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Ca(F)){const te=await F.callTool(p.functionCalls);O.push(...te)}I++,v={role:"user",parts:O},m.contents=hi(m.contents),m.contents.push(x),m.contents.push(v),uE(m.config)&&(E.push(x),E.push(v))}return uE(m.config)&&(p.automaticFunctionCallingHistory=E),p},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),lE(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let a;const c=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((r=m==null?void 0:m.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=m==null?void 0:m.safetyAttributes:c.push(m);let h;return a?h={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},h}),this.list=async n=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Cu(ps.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const c=await Promise.all(a.map(async m=>Ca(m)?await m.tool():m)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&fS(e.config.tools)){const m=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),dS(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var n,i,r;const a=new Map;for(const c of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ca(c)){const h=c,m=await h.tool();for(const p of(r=m.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,h)}}return a}async processAfcStream(e){var n,i,r;const a=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:aE;let c=!1,h=0;const m=await this.initAfcToolsMap(e);return function(p,v,E){var S,I;return Aa(this,arguments,function*(){for(var x,O,F,oe;h<a;){c&&(h++,c=!1);const se=yield xt(p.processParamsMaybeAddMcpUsage(E)),pe=yield xt(p.generateContentStreamInternal(se)),k=[],M=[];try{for(var te=!0,ne=(O=void 0,su(pe)),fe;fe=yield xt(ne.next()),x=fe.done,!x;te=!0){oe=fe.value,te=!1;const b=oe;if(yield yield xt(b),b.candidates&&(!((S=b.candidates[0])===null||S===void 0)&&S.content)){M.push(b.candidates[0].content);for(const V of(I=b.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(h<a&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(V.functionCall.name)){const N=yield xt(v.get(V.functionCall.name).callTool([V.functionCall]));k.push(...N)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(b){O={error:b}}finally{try{!te&&!x&&(F=ne.return)&&(yield xt(F.call(ne)))}finally{if(O)throw O.error}}if(k.length>0){c=!0;const b=new Zl;b.candidates=[{content:{role:"user",parts:k}}],yield yield xt(b);const V=[];V.push(...M),V.push({role:"user",parts:k});const N=hi(E.contents).concat(V);E.contents=N}else break}})}(this,m,e)}async generateContentInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=nE(this.apiClient,e);return h=_e("{model}:generateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=oE(v),S=new Zl;return Object.assign(S,E),S})}else{const p=tE(this.apiClient,e);return h=_e("{model}:generateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=iE(v),S=new Zl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=nE(this.apiClient,e);return h=_e("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(E){return Aa(this,arguments,function*(){var S,I,x,O;try{for(var F=!0,oe=su(E),te;te=yield xt(oe.next()),S=te.done,!S;F=!0){O=te.value,F=!1;const ne=O,fe=oE(yield xt(ne.json()));fe.sdkHttpResponse={headers:ne.headers};const se=new Zl;Object.assign(se,fe),yield yield xt(se)}}catch(ne){I={error:ne}}finally{try{!F&&!S&&(x=oe.return)&&(yield xt(x.call(oe)))}finally{if(I)throw I.error}}})})}else{const p=tE(this.apiClient,e);return h=_e("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(E){return Aa(this,arguments,function*(){var S,I,x,O;try{for(var F=!0,oe=su(E),te;te=yield xt(oe.next()),S=te.done,!S;F=!0){O=te.value,F=!1;const ne=O,fe=iE(yield xt(ne.json()));fe.sdkHttpResponse={headers:ne.headers};const se=new Zl;Object.assign(se,fe),yield yield xt(se)}}catch(ne){I={error:ne}}finally{try{!F&&!S&&(x=oe.return)&&(yield xt(x.call(oe)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=IN(this.apiClient,e);return h=_e("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Vk(v),S=new PT;return Object.assign(S,E),S})}else{const p=B1(this.apiClient,e);return h=_e("{model}:batchEmbedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=fk(v),S=new PT;return Object.assign(S,E),S})}}async generateImagesInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=xN(this.apiClient,e);return h=_e("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Uk(v),S=new VT;return Object.assign(S,E),S})}else{const p=q1(this.apiClient,e);return h=_e("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=pk(v),S=new VT;return Object.assign(S,E),S})}}async editImageInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=VN(this.apiClient,e);return a=_e("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=Ok(m),v=new OI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=UN(this.apiClient,e);return a=_e("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=Bk(m),v=new BI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=qN(this.apiClient,e);return a=_e("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>{const p=Fk(m),v=new FI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=GN(this.apiClient,e);return h=_e("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Yp(v))}else{const p=G1(this.apiClient,e);return h=_e("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>$p(v))}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=HN(this.apiClient,e);return h=_e("{models_url}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Hk(v),S=new LT;return Object.assign(S,E),S})}else{const p=H1(this.apiClient,e);return h=_e("{models_url}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=gk(v),S=new LT;return Object.assign(S,E),S})}}async update(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=YN(this.apiClient,e);return h=_e("{model}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Yp(v))}else{const p=Y1(this.apiClient,e);return h=_e("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>$p(v))}}async delete(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=KN(this.apiClient,e);return h=_e("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(()=>{const v=$k(),E=new UT;return Object.assign(E,v),E})}else{const p=K1(this.apiClient,e);return h=_e("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(()=>{const v=yk(),E=new UT;return Object.assign(E,v),E})}}async countTokens(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=QN(this.apiClient,e);return h=_e("{model}:countTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Yk(v),S=new OT;return Object.assign(S,E),S})}else{const p=Q1(this.apiClient,e);return h=_e("{model}:countTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=vk(v),S=new OT;return Object.assign(S,E),S})}}async computeTokens(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=XN(this.apiClient,e);return a=_e("{model}:computeTokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=Kk(m),v=new qI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=jN(this.apiClient,e);return h=_e("{model}:predictLongRunning",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>{const E=Wk(v),S=new Rf;return Object.assign(S,E),S})}else{const p=Z1(this.apiClient,e);return h=_e("{model}:predictLongRunning",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>{const E=Sk(v),S=new Rf;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ID(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["_url","operationName"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function RD(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["_url","operationName"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function xD(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["operationName"],n);const i=u(t,["resourceName"]);i!=null&&f(e,["_url","resourceName"],i);const r=u(t,["config"]);return r!=null&&f(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bD extends Es{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=RD(e);return h=_e("{operationName}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c}else{const p=ID(e);return h=_e("{operationName}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=xD(e);return a=_e("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MD(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function hS(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],MD(n)),e}function ND(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],hS(i)),e}function kD(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>ND(r))),f(e,["speakerVoiceConfigs"],i)}return e}function DD(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],hS(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],kD(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function PD(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function VD(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function LD(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function UD(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],PD(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],VD(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],LD(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function OD(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>UD(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function BD(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function FD(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function qD(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],FD(n)),e}function GD(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function zD(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],GD(n)),e}function HD(){return{}}function $D(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>BD(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],qD(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],zD(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],HD());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function YD(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function cE(){return{}}function KD(t){const e={},n=u(t,["disabled"]);n!=null&&f(e,["disabled"],n);const i=u(t,["startOfSpeechSensitivity"]);i!=null&&f(e,["startOfSpeechSensitivity"],i);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&f(e,["endOfSpeechSensitivity"],r);const a=u(t,["prefixPaddingMs"]);a!=null&&f(e,["prefixPaddingMs"],a);const c=u(t,["silenceDurationMs"]);return c!=null&&f(e,["silenceDurationMs"],c),e}function JD(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&f(e,["automaticActivityDetection"],KD(n));const i=u(t,["activityHandling"]);i!=null&&f(e,["activityHandling"],i);const r=u(t,["turnCoverage"]);return r!=null&&f(e,["turnCoverage"],r),e}function QD(t){const e={},n=u(t,["targetTokens"]);return n!=null&&f(e,["targetTokens"],n),e}function XD(t){const e={},n=u(t,["triggerTokens"]);n!=null&&f(e,["triggerTokens"],n);const i=u(t,["slidingWindow"]);return i!=null&&f(e,["slidingWindow"],QD(i)),e}function WD(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&f(e,["proactiveAudio"],n),e}function ZD(t,e){const n={},i=u(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=u(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=u(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=u(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const p=u(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=u(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=u(t,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],DD(xm(E)));const S=u(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&f(e,["setup","systemInstruction"],OD(wn(I)));const x=u(t,["tools"]);if(e!==void 0&&x!=null){let se=Oa(x);Array.isArray(se)&&(se=se.map(pe=>$D(Ua(pe)))),f(e,["setup","tools"],se)}const O=u(t,["sessionResumption"]);e!==void 0&&O!=null&&f(e,["setup","sessionResumption"],YD(O));const F=u(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&f(e,["setup","inputAudioTranscription"],cE());const oe=u(t,["outputAudioTranscription"]);e!==void 0&&oe!=null&&f(e,["setup","outputAudioTranscription"],cE());const te=u(t,["realtimeInputConfig"]);e!==void 0&&te!=null&&f(e,["setup","realtimeInputConfig"],JD(te));const ne=u(t,["contextWindowCompression"]);e!==void 0&&ne!=null&&f(e,["setup","contextWindowCompression"],XD(ne));const fe=u(t,["proactivity"]);return e!==void 0&&fe!=null&&f(e,["setup","proactivity"],WD(fe)),n}function jD(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["setup","model"],ht(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],ZD(r,n)),n}function eP(t,e,n){const i={},r=u(e,["expireTime"]);n!==void 0&&r!=null&&f(n,["expireTime"],r);const a=u(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&f(n,["newSessionExpireTime"],a);const c=u(e,["uses"]);n!==void 0&&c!=null&&f(n,["uses"],c);const h=u(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&f(n,["bidiGenerateContentSetup"],jD(t,h));const m=u(e,["lockAdditionalFields"]);return n!==void 0&&m!=null&&f(n,["fieldMask"],m),i}function tP(t,e){const n={},i=u(e,["config"]);return i!=null&&f(n,["config"],eP(t,i,n)),n}function nP(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iP(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function oP(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=iP(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(p=>c.includes(p)?`generationConfig.${p}`:p));const m=[];a&&m.push(a),h.length>0&&m.push(...h),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class rP extends Es{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=tP(this.apiClient,e);a=_e("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const m=oP(h,e.config);return r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>nP(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sP(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function aP(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=u(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function lP(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],aP(n,e)),e}function uP(t){const e={},n=u(t,["textInput"]);n!=null&&f(e,["textInput"],n);const i=u(t,["output"]);return i!=null&&f(e,["output"],i),e}function cP(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=u(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>uP(r))),f(e,["examples","examples"],i)}return e}function fP(t,e){const n={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=u(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&f(e,["displayName"],i),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=u(t,["epochCount"]);e!==void 0&&r!=null&&f(e,["tuningTask","hyperparameters","epochCount"],r);const a=u(t,["learningRateMultiplier"]);if(a!=null&&f(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=u(t,["batchSize"]);e!==void 0&&c!=null&&f(e,["tuningTask","hyperparameters","batchSize"],c);const h=u(t,["learningRate"]);return e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","learningRate"],h),n}function dP(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["trainingDataset"]);i!=null&&f(e,["tuningTask","trainingData"],cP(i));const r=u(t,["config"]);return r!=null&&f(e,["config"],fP(r,e)),e}function hP(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function pP(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=u(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function mP(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],pP(n,e)),e}function gP(t,e){const n={},i=u(t,["gcsUri"]);e!==void 0&&i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],i);const r=u(t,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r),u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function yP(t,e){const n={},i=u(t,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);const r=u(t,["vertexDatasetResource"]);return e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r),n}function vP(t,e){const n={},i=u(t,["validationDataset"]);e!==void 0&&i!=null&&f(e,["supervisedTuningSpec"],yP(i,n));const r=u(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&f(e,["tunedModelDisplayName"],r);const a=u(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const c=u(t,["epochCount"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],c);const h=u(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const m=u(t,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],m);const p=u(t,["adapterSize"]);if(e!==void 0&&p!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],p),u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function _P(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["trainingDataset"]);i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],gP(i,e));const r=u(t,["config"]);return r!=null&&f(e,["config"],vP(r,e)),e}function TP(t){const e={},n=u(t,["name"]);n!=null&&f(e,["model"],n);const i=u(t,["name"]);return i!=null&&f(e,["endpoint"],i),e}function pS(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["state"]);r!=null&&f(e,["state"],$0(r));const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["tuningTask","startTime"]);c!=null&&f(e,["startTime"],c);const h=u(t,["tuningTask","completeTime"]);h!=null&&f(e,["endTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["description"]);p!=null&&f(e,["description"],p);const v=u(t,["baseModel"]);v!=null&&f(e,["baseModel"],v);const E=u(t,["_self"]);E!=null&&f(e,["tunedModel"],TP(E));const S=u(t,["distillationSpec"]);S!=null&&f(e,["distillationSpec"],S);const I=u(t,["experiment"]);I!=null&&f(e,["experiment"],I);const x=u(t,["labels"]);x!=null&&f(e,["labels"],x);const O=u(t,["pipelineJob"]);O!=null&&f(e,["pipelineJob"],O);const F=u(t,["satisfiesPzi"]);F!=null&&f(e,["satisfiesPzi"],F);const oe=u(t,["satisfiesPzs"]);oe!=null&&f(e,["satisfiesPzs"],oe);const te=u(t,["serviceAccount"]);te!=null&&f(e,["serviceAccount"],te);const ne=u(t,["tunedModelDisplayName"]);return ne!=null&&f(e,["tunedModelDisplayName"],ne),e}function EP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["tunedModels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>pS(c))),f(e,["tuningJobs"],a)}return e}function SP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const a=u(t,["done"]);a!=null&&f(e,["done"],a);const c=u(t,["error"]);return c!=null&&f(e,["error"],c),e}function AP(t){const e={},n=u(t,["checkpointId"]);n!=null&&f(e,["checkpointId"],n);const i=u(t,["epoch"]);i!=null&&f(e,["epoch"],i);const r=u(t,["step"]);r!=null&&f(e,["step"],r);const a=u(t,["endpoint"]);return a!=null&&f(e,["endpoint"],a),e}function CP(t){const e={},n=u(t,["model"]);n!=null&&f(e,["model"],n);const i=u(t,["endpoint"]);i!=null&&f(e,["endpoint"],i);const r=u(t,["checkpoints"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>AP(c))),f(e,["checkpoints"],a)}return e}function Jp(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["state"]);r!=null&&f(e,["state"],$0(r));const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["startTime"]);c!=null&&f(e,["startTime"],c);const h=u(t,["endTime"]);h!=null&&f(e,["endTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["error"]);p!=null&&f(e,["error"],p);const v=u(t,["description"]);v!=null&&f(e,["description"],v);const E=u(t,["baseModel"]);E!=null&&f(e,["baseModel"],E);const S=u(t,["tunedModel"]);S!=null&&f(e,["tunedModel"],CP(S));const I=u(t,["supervisedTuningSpec"]);I!=null&&f(e,["supervisedTuningSpec"],I);const x=u(t,["tuningDataStats"]);x!=null&&f(e,["tuningDataStats"],x);const O=u(t,["encryptionSpec"]);O!=null&&f(e,["encryptionSpec"],O);const F=u(t,["partnerModelTuningSpec"]);F!=null&&f(e,["partnerModelTuningSpec"],F);const oe=u(t,["distillationSpec"]);oe!=null&&f(e,["distillationSpec"],oe);const te=u(t,["experiment"]);te!=null&&f(e,["experiment"],te);const ne=u(t,["labels"]);ne!=null&&f(e,["labels"],ne);const fe=u(t,["pipelineJob"]);fe!=null&&f(e,["pipelineJob"],fe);const se=u(t,["satisfiesPzi"]);se!=null&&f(e,["satisfiesPzi"],se);const pe=u(t,["satisfiesPzs"]);pe!=null&&f(e,["satisfiesPzs"],pe);const k=u(t,["serviceAccount"]);k!=null&&f(e,["serviceAccount"],k);const M=u(t,["tunedModelDisplayName"]);return M!=null&&f(e,["tunedModelDisplayName"],M),e}function wP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["tuningJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>Jp(c))),f(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IP extends Es{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Cu(ps.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const i=await this.tuneMldevInternal(n);let r="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?r=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(r=i.name.split("/operations/")[0]),{name:r,state:Op.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=hP(e);return h=_e("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>Jp(v))}else{const p=sP(e);return h=_e("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>pS(v))}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=mP(e);return h=_e("tuningJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=wP(v),S=new FT;return Object.assign(S,E),S})}else{const p=lP(e);return h=_e("tunedModels",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=EP(v),S=new FT;return Object.assign(S,E),S})}}async tuneInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=_P(e);return a=_e("tuningJobs",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>Jp(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=dP(e);return a=_e("tunedModels",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>SP(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RP{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const xP=1024*1024*8,bP=3,MP=1e3,NP=2,Cp="x-goog-upload-status";async function kP(t,e,n){var i,r,a;let c=0,h=0,m=new Bp(new Response),p="upload";for(c=t.size;h<c;){const E=Math.min(xP,c-h),S=t.slice(h,h+E);h+E>=c&&(p+=", finalize");let I=0,x=MP;for(;I<bP&&(m=await n.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(h),"Content-Length":String(E)}}}),!(!((i=m==null?void 0:m.headers)===null||i===void 0)&&i[Cp]));)I++,await PP(x),x=x*NP;if(h+=E,((r=m==null?void 0:m.headers)===null||r===void 0?void 0:r[Cp])!=="active")break;if(c<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(m==null?void 0:m.json());if(((a=m==null?void 0:m.headers)===null||a===void 0?void 0:a[Cp])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function DP(t){return{size:t.size,type:t.type}}function PP(t){return new Promise(e=>setTimeout(e,t))}class VP{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await kP(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await DP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LP{create(e,n,i){return new UP(e,n,i)}}class UP{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fE="x-goog-api-key";class OP{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(fE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(fE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BP="gl-node/";class FP{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=UI(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new OP(this.apiKey);this.apiClient=new rD({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:BP+"web",uploader:new VP,downloader:new RP}),this.models=new wD(this.apiClient),this.live=new vD(this.apiClient,r,new LP),this.batches=new ax(this.apiClient),this.chats=new fb(this.models,this.apiClient),this.caches=new lb(this.apiClient),this.files=new Cb(this.apiClient),this.operations=new bD(this.apiClient),this.authTokens=new rP(this.apiClient),this.tunings=new IP(this.apiClient)}}let Bn=null;const qP=t=>{if(!t||!t.startsWith("AIza"))return Bn&&(Bn=null),!1;try{return Bn=new FP({apiKey:t}),!0}catch(e){return console.error("Failed to initialize GoogleGenAI with provided key:",e),Bn=null,!1}},sf=()=>!!Bn,GP=async(t,e)=>{var n,i;if(!Bn)throw new Error("Gemini AI SDK not initialized or API key is invalid. Please configure it in settings.");try{const r=await Bn.models.generateContent({model:O0,contents:[{role:"user",parts:[{text:t}]}],config:{systemInstruction:{role:"system",parts:[{text:e}]},temperature:.8,maxOutputTokens:2048,safetySettings:[{category:$i.HARM_CATEGORY_HARASSMENT,threshold:Yi.BLOCK_MEDIUM_AND_ABOVE},{category:$i.HARM_CATEGORY_HATE_SPEECH,threshold:Yi.BLOCK_MEDIUM_AND_ABOVE},{category:$i.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Yi.BLOCK_MEDIUM_AND_ABOVE},{category:$i.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Yi.BLOCK_MEDIUM_AND_ABOVE}]}}),a=r.text;if(typeof a=="string")return a;{if(console.error("Gemini API response.text was not a string. Full response:",JSON.stringify(r,null,2)),(n=r==null?void 0:r.promptFeedback)!=null&&n.blockReason)throw new Error(`Prompt was blocked. Reason: ${r.promptFeedback.blockReason}${r.promptFeedback.blockReasonMessage?" - "+r.promptFeedback.blockReasonMessage:""}`);const c=(i=r==null?void 0:r.candidates)==null?void 0:i[0];if((c==null?void 0:c.finishReason)==="SAFETY"){const h=c.safetyRatings;let m=h==null?void 0:h.filter(p=>p.probability!=="NEGLIGIBLE"&&p.probability!=="LOW").map(p=>p.category.replace("HARM_CATEGORY_","")).join(", ");throw new Error(`Response blocked by safety filters. Categories: ${m||"Content policy"}.`)}throw(c==null?void 0:c.finishReason)==="OTHER"||(c==null?void 0:c.finishReason)==="RECITATION"||!c?new Error(`Gemini API returned an empty or malformed response. Reason: ${(c==null?void 0:c.finishReason)||"Unknown/No Candidate"}.`):new Error("Gemini API returned an invalid or unexpected text response structure.")}}catch(r){console.error("Error calling Gemini API (non-streaming):",r);const a=r instanceof Error?r.message:String(r);throw a.includes("API key not valid")||a.includes("API_KEY_INVALID")||a.includes("permission_denied")?new Error("The provided Gemini API key is invalid or lacks permissions. Please check it in settings."):r}};async function*dE(t,e,n){var r,a;if(!Bn)throw new Error("Gemini AI SDK not initialized. Please configure it in settings.");const i=[];n&&n.length>0&&i.push(...n),i.push({text:t});try{const c=await Bn.models.generateContentStream({model:O0,contents:[{role:"user",parts:i}],config:{systemInstruction:{role:"system",parts:[{text:e}]},temperature:.8,maxOutputTokens:2048,safetySettings:[{category:$i.HARM_CATEGORY_HARASSMENT,threshold:Yi.BLOCK_MEDIUM_AND_ABOVE},{category:$i.HARM_CATEGORY_HATE_SPEECH,threshold:Yi.BLOCK_MEDIUM_AND_ABOVE},{category:$i.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Yi.BLOCK_MEDIUM_AND_ABOVE},{category:$i.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Yi.BLOCK_MEDIUM_AND_ABOVE}]}});for await(const h of c){if((r=h==null?void 0:h.promptFeedback)!=null&&r.blockReason)throw new Error(`Stream blocked by Gemini. Reason: ${h.promptFeedback.blockReason}${h.promptFeedback.blockReasonMessage?" - "+h.promptFeedback.blockReasonMessage:""}.`);const m=(a=h==null?void 0:h.candidates)==null?void 0:a[0];if((m==null?void 0:m.finishReason)==="SAFETY"){const p=m.safetyRatings;let v=p==null?void 0:p.filter(E=>E.probability!=="NEGLIGIBLE"&&E.probability!=="LOW").map(E=>E.category.replace("HARM_CATEGORY_","")).join(", ");throw new Error(`Stream ended by Gemini's safety filters. Categories: ${v||"Content policy"}.`)}if(!h.text&&((m==null?void 0:m.finishReason)==="OTHER"||(m==null?void 0:m.finishReason)==="RECITATION"))throw new Error(`Gemini stream ended unexpectedly or provided empty content. Reason: ${m==null?void 0:m.finishReason}.`);yield h}}catch(c){console.error("Error during Gemini API stream:",c);const h=c instanceof Error?c.message:String(c);throw h.includes("API key not valid")||h.includes("API_KEY_INVALID")||h.includes("permission_denied")?new Error("The provided Gemini API key is invalid or lacks permissions. Please check it in settings."):new Error(`Gemini API streaming error: ${h}`)}}const zP=async t=>{if(!Bn)throw new Error("Gemini AI SDK not initialized.");try{return await Bn.models.generateImages({model:"imagen-3.0-generate-002",prompt:t})}catch(e){throw console.error("Error calling Imagen API:",e),e}},HP=async(t,e)=>{if(!Bn)throw new Error("Gemini AI SDK not initialized.");try{let n=await Bn.models.generateVideos({model:"veo-3.0-generate-preview",prompt:t,image:e});for(;!n.done;)await new Promise(i=>setTimeout(i,1e4)),n=await Bn.operations.get(n);return n.response.generatedVideos[0]}catch(n){throw console.error("Error calling Veo API:",n),n}};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YP=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),hE=t=>{const e=YP(t);return e.charAt(0).toUpperCase()+e.slice(1)},mS=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),KP=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=Ae.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:c,...h},m)=>Ae.createElement("svg",{ref:m,...JP,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:mS("lucide",r),...!a&&!KP(h)&&{"aria-hidden":"true"},...h},[...c.map(([p,v])=>Ae.createElement(p,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=(t,e)=>{const n=Ae.forwardRef(({className:i,...r},a)=>Ae.createElement(QP,{ref:a,iconNode:e,className:mS(`lucide-${$P(hE(t))}`,`lucide-${t}`,i),...r}));return n.displayName=hE(t),n};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],gS=bt("bot",XP);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ZP=bt("camera",WP);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],e2=bt("check",jP);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],n2=bt("chevron-up",t2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],o2=bt("circle-x",i2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],s2=bt("copy",r2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M10 11h.01",key:"d2at3l"}],["path",{d:"M14 6h.01",key:"k028ub"}],["path",{d:"M18 6h.01",key:"1v4wsw"}],["path",{d:"M6.5 13.1h.01",key:"1748ia"}],["path",{d:"M22 5c0 9-4 12-6 12s-6-3-6-12c0-2 2-3 6-3s6 1 6 3",key:"172yzv"}],["path",{d:"M17.4 9.9c-.8.8-2 .8-2.8 0",key:"1obv0w"}],["path",{d:"M10.1 7.1C9 7.2 7.7 7.7 6 8.6c-3.5 2-4.7 3.9-3.7 5.6 4.5 7.8 9.5 8.4 11.2 7.4.9-.5 1.9-2.1 1.9-4.7",key:"rqjl8i"}],["path",{d:"M9.1 16.5c.3-1.1 1.4-1.7 2.4-1.4",key:"1mr6wy"}]],l2=bt("drama",a2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],c2=bt("folder-open",u2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]],d2=bt("image-off",f2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],p2=bt("library",h2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],g2=bt("loader-circle",m2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],v2=bt("moon",y2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],T2=bt("plus",_2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],S2=bt("scan-line",E2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],C2=bt("search",A2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],I2=bt("send-horizontal",w2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],x2=bt("settings",R2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],M2=bt("sparkles",b2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],k2=bt("sun",N2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],P2=bt("trash-2",D2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],L2=bt("triangle-alert",V2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],O2=bt("user",U2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],F2=bt("video",B2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],G2=bt("volume-2",q2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],H2=bt("volume-x",z2),$2=({theme:t,selectedAI:e,imageStyle:n,apiKeys:i,apiStatus:r,darkMode:a,soundEnabled:c,setSelectedAI:h,setImageStyle:m,updateApiKey:p,toggleDarkMode:v,toggleSound:E,onClose:S})=>L.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:S,children:L.jsxs("div",{className:`${t.card} rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col`,onClick:I=>I.stopPropagation(),children:[L.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[L.jsx("h2",{className:"text-xl font-bold",children:"Settings"}),L.jsx("button",{onClick:S,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:"×"})]}),L.jsxs("div",{className:"overflow-y-auto p-6 space-y-6",children:[L.jsxs("section",{children:[L.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Appearance"}),L.jsxs("div",{className:"space-y-3",children:[L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsx("label",{htmlFor:"darkModeToggle",className:"font-medium",children:"Dark Mode"}),L.jsx("button",{onClick:v,id:"darkModeToggle",className:`p-2 rounded-full ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:a?L.jsx(k2,{size:20}):L.jsx(v2,{size:20})})]}),L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsx("label",{htmlFor:"soundToggle",className:"font-medium",children:"Sound Enabled"}),L.jsx("button",{onClick:E,id:"soundToggle",className:`p-2 rounded-full ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:c?L.jsx(G2,{size:20}):L.jsx(H2,{size:20})})]})]})]}),L.jsxs("section",{children:[L.jsx("h3",{className:"text-lg font-semibold mb-3",children:"AI Model"}),L.jsx("div",{role:"group",className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.entries(Si).map(([I,x])=>L.jsxs("button",{onClick:()=>h(I),className:`p-3 rounded-lg border text-sm transition-all duration-200 ${e===I?`${x.color} border-current bg-current/10 font-semibold`:`${t.muted} border-gray-300 dark:border-gray-600 hover:border-current hover:bg-gray-500/10`}`,children:[x.icon," ",x.name]},I))})]}),L.jsxs("section",{children:[L.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Image Style (DALL-E)"}),L.jsx("div",{role:"group",className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.entries(NI).map(([I,x])=>L.jsx("button",{onClick:()=>m(I),className:`p-3 rounded-lg border text-sm transition-all duration-200 ${n===I?"text-pink-400 border-pink-400 bg-pink-400/10 font-semibold":`${t.muted} border-gray-300 dark:border-gray-600 hover:border-current hover:text-pink-400 hover:border-pink-400/50 hover:bg-pink-400/10`}`,children:x},I))})]}),L.jsxs("section",{children:[L.jsx("h3",{className:"text-lg font-semibold mb-3",children:"API Keys"}),L.jsxs("div",{className:"space-y-3",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium mb-1",children:"OpenAI API Key"}),L.jsx("input",{type:"password",placeholder:"sk-...",value:i.openai,onChange:I=>p("openai",I.target.value),className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gemini API Key"}),L.jsx("input",{type:"password",placeholder:"AIza...",value:i.gemini,onChange:I=>p("gemini",I.target.value),className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium mb-1",children:"Claude API Key"}),L.jsx("input",{type:"password",placeholder:"sk-ant-...",value:i.claude,onChange:I=>p("claude",I.target.value),className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`})]})]}),L.jsx("p",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:"Your API keys are saved automatically to your browser's local storage. They are never sent to our servers."})]})]})]})});function Mm(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var As=Mm();function yS(t){As=t}var au={exec:()=>null};function pt(t,e=""){let n=typeof t=="string"?t:t.source;const i={replace:(r,a)=>{let c=typeof a=="string"?a:a.source;return c=c.replace(kn.caret,"$1"),n=n.replace(r,c),i},getRegex:()=>new RegExp(n,e)};return i}var kn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},Y2=/^(?:[ \t]*(?:\n|$))+/,K2=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,J2=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,wu=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Q2=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Nm=/(?:[*+-]|\d{1,9}[.)])/,vS=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_S=pt(vS).replace(/bull/g,Nm).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),X2=pt(vS).replace(/bull/g,Nm).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),km=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,W2=/^[^\n]+/,Dm=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Z2=pt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Dm).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),j2=pt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Nm).getRegex(),Wf="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Pm=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,eV=pt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Pm).replace("tag",Wf).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),TS=pt(km).replace("hr",wu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wf).getRegex(),tV=pt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",TS).getRegex(),Vm={blockquote:tV,code:K2,def:Z2,fences:J2,heading:Q2,hr:wu,html:eV,lheading:_S,list:j2,newline:Y2,paragraph:TS,table:au,text:W2},pE=pt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",wu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wf).getRegex(),nV={...Vm,lheading:X2,table:pE,paragraph:pt(km).replace("hr",wu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",pE).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wf).getRegex()},iV={...Vm,html:pt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Pm).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:au,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:pt(km).replace("hr",wu).replace("heading",` *#{1,6} *[^
]`).replace("lheading",_S).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},oV=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,rV=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ES=/^( {2,}|\\)\n(?!\s*$)/,sV=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Zf=/[\p{P}\p{S}]/u,Lm=/[\s\p{P}\p{S}]/u,SS=/[^\s\p{P}\p{S}]/u,aV=pt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Lm).getRegex(),AS=/(?!~)[\p{P}\p{S}]/u,lV=/(?!~)[\s\p{P}\p{S}]/u,uV=/(?:[^\s\p{P}\p{S}]|~)/u,cV=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,CS=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,fV=pt(CS,"u").replace(/punct/g,Zf).getRegex(),dV=pt(CS,"u").replace(/punct/g,AS).getRegex(),wS="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",hV=pt(wS,"gu").replace(/notPunctSpace/g,SS).replace(/punctSpace/g,Lm).replace(/punct/g,Zf).getRegex(),pV=pt(wS,"gu").replace(/notPunctSpace/g,uV).replace(/punctSpace/g,lV).replace(/punct/g,AS).getRegex(),mV=pt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,SS).replace(/punctSpace/g,Lm).replace(/punct/g,Zf).getRegex(),gV=pt(/\\(punct)/,"gu").replace(/punct/g,Zf).getRegex(),yV=pt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),vV=pt(Pm).replace("(?:-->|$)","-->").getRegex(),_V=pt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",vV).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),bf=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,TV=pt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",bf).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),IS=pt(/^!?\[(label)\]\[(ref)\]/).replace("label",bf).replace("ref",Dm).getRegex(),RS=pt(/^!?\[(ref)\](?:\[\])?/).replace("ref",Dm).getRegex(),EV=pt("reflink|nolink(?!\\()","g").replace("reflink",IS).replace("nolink",RS).getRegex(),Um={_backpedal:au,anyPunctuation:gV,autolink:yV,blockSkip:cV,br:ES,code:rV,del:au,emStrongLDelim:fV,emStrongRDelimAst:hV,emStrongRDelimUnd:mV,escape:oV,link:TV,nolink:RS,punctuation:aV,reflink:IS,reflinkSearch:EV,tag:_V,text:sV,url:au},SV={...Um,link:pt(/^!?\[(label)\]\((.*?)\)/).replace("label",bf).getRegex(),reflink:pt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",bf).getRegex()},Qp={...Um,emStrongRDelimAst:pV,emStrongLDelim:dV,url:pt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},AV={...Qp,br:pt(ES).replace("{2,}","*").getRegex(),text:pt(Qp.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},af={normal:Vm,gfm:nV,pedantic:iV},jl={normal:Um,gfm:Qp,breaks:AV,pedantic:SV},CV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mE=t=>CV[t];function Hi(t,e){if(e){if(kn.escapeTest.test(t))return t.replace(kn.escapeReplace,mE)}else if(kn.escapeTestNoEncode.test(t))return t.replace(kn.escapeReplaceNoEncode,mE);return t}function gE(t){try{t=encodeURI(t).replace(kn.percentDecode,"%")}catch{return null}return t}function yE(t,e){var a;const n=t.replace(kn.findPipe,(c,h,m)=>{let p=!1,v=h;for(;--v>=0&&m[v]==="\\";)p=!p;return p?"|":" |"}),i=n.split(kn.splitPipe);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!((a=i.at(-1))!=null&&a.trim())&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(kn.slashPipe,"|");return i}function eu(t,e,n){const i=t.length;if(i===0)return"";let r=0;for(;r<i&&t.charAt(i-r-1)===e;)r++;return t.slice(0,i-r)}function wV(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let i=0;i<t.length;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return n>0?-2:-1}function vE(t,e,n,i,r){const a=e.href,c=e.title||null,h=t[1].replace(r.other.outputLinkReplace,"$1");i.state.inLink=!0;const m={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:a,title:c,text:h,tokens:i.inlineTokens(h)};return i.state.inLink=!1,m}function IV(t,e,n){const i=t.match(n.other.indentCodeCompensation);if(i===null)return e;const r=i[1];return e.split(`
`).map(a=>{const c=a.match(n.other.beginningSpace);if(c===null)return a;const[h]=c;return h.length>=r.length?a.slice(r.length):a}).join(`
`)}var Mf=class{constructor(t){It(this,"options");It(this,"rules");It(this,"lexer");this.options=t||As}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:eu(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],i=IV(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){const i=eu(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:eu(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=eu(e[0],`
`).split(`
`),i="",r="";const a=[];for(;n.length>0;){let c=!1;const h=[];let m;for(m=0;m<n.length;m++)if(this.rules.other.blockquoteStart.test(n[m]))h.push(n[m]),c=!0;else if(!c)h.push(n[m]);else break;n=n.slice(m);const p=h.join(`
`),v=p.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${p}`:p,r=r?`${r}
${v}`:v;const E=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(v,a,!0),this.lexer.state.top=E,n.length===0)break;const S=a.at(-1);if((S==null?void 0:S.type)==="code")break;if((S==null?void 0:S.type)==="blockquote"){const I=S,x=I.raw+`
`+n.join(`
`),O=this.blockquote(x);a[a.length-1]=O,i=i.substring(0,i.length-I.raw.length)+O.raw,r=r.substring(0,r.length-I.text.length)+O.text;break}else if((S==null?void 0:S.type)==="list"){const I=S,x=I.raw+`
`+n.join(`
`),O=this.list(x);a[a.length-1]=O,i=i.substring(0,i.length-S.raw.length)+O.raw,r=r.substring(0,r.length-I.raw.length)+O.raw,n=x.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:a,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const i=n.length>1,r={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const a=this.rules.other.listItemRegex(n);let c=!1;for(;t;){let m=!1,p="",v="";if(!(e=a.exec(t))||this.rules.block.hr.test(t))break;p=e[0],t=t.substring(p.length);let E=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,oe=>" ".repeat(3*oe.length)),S=t.split(`
`,1)[0],I=!E.trim(),x=0;if(this.options.pedantic?(x=2,v=E.trimStart()):I?x=e[1].length+1:(x=e[2].search(this.rules.other.nonSpaceChar),x=x>4?1:x,v=E.slice(x),x+=e[1].length),I&&this.rules.other.blankLine.test(S)&&(p+=S+`
`,t=t.substring(S.length+1),m=!0),!m){const oe=this.rules.other.nextBulletRegex(x),te=this.rules.other.hrRegex(x),ne=this.rules.other.fencesBeginRegex(x),fe=this.rules.other.headingBeginRegex(x),se=this.rules.other.htmlBeginRegex(x);for(;t;){const pe=t.split(`
`,1)[0];let k;if(S=pe,this.options.pedantic?(S=S.replace(this.rules.other.listReplaceNesting,"  "),k=S):k=S.replace(this.rules.other.tabCharGlobal,"    "),ne.test(S)||fe.test(S)||se.test(S)||oe.test(S)||te.test(S))break;if(k.search(this.rules.other.nonSpaceChar)>=x||!S.trim())v+=`
`+k.slice(x);else{if(I||E.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||ne.test(E)||fe.test(E)||te.test(E))break;v+=`
`+S}!I&&!S.trim()&&(I=!0),p+=pe+`
`,t=t.substring(pe.length+1),E=k.slice(x)}}r.loose||(c?r.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(c=!0));let O=null,F;this.options.gfm&&(O=this.rules.other.listIsTask.exec(v),O&&(F=O[0]!=="[ ] ",v=v.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:p,task:!!O,checked:F,loose:!1,text:v,tokens:[]}),r.raw+=p}const h=r.items.at(-1);if(h)h.raw=h.raw.trimEnd(),h.text=h.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let m=0;m<r.items.length;m++)if(this.lexer.state.top=!1,r.items[m].tokens=this.lexer.blockTokens(r.items[m].text,[]),!r.loose){const p=r.items[m].tokens.filter(E=>E.type==="space"),v=p.length>0&&p.some(E=>this.rules.other.anyLine.test(E.raw));r.loose=v}if(r.loose)for(let m=0;m<r.items.length;m++)r.items[m].loose=!0;return r}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:i,title:r}}}table(t){var c;const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const n=yE(e[1]),i=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(c=e[3])!=null&&c.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===i.length){for(const h of i)this.rules.other.tableAlignRight.test(h)?a.align.push("right"):this.rules.other.tableAlignCenter.test(h)?a.align.push("center"):this.rules.other.tableAlignLeft.test(h)?a.align.push("left"):a.align.push(null);for(let h=0;h<n.length;h++)a.header.push({text:n[h],tokens:this.lexer.inline(n[h]),header:!0,align:a.align[h]});for(const h of r)a.rows.push(yE(h,a.header.length).map((m,p)=>({text:m,tokens:this.lexer.inline(m),header:!1,align:a.align[p]})));return a}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const a=eu(n.slice(0,-1),"\\");if((n.length-a.length)%2===0)return}else{const a=wV(e[2],"()");if(a===-2)return;if(a>-1){const h=(e[0].indexOf("!")===0?5:4)+e[1].length+a;e[2]=e[2].substring(0,a),e[0]=e[0].substring(0,h).trim(),e[3]=""}}let i=e[2],r="";if(this.options.pedantic){const a=this.rules.other.pedanticHrefTitle.exec(i);a&&(i=a[1],r=a[3])}else r=e[3]?e[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),vE(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[i.toLowerCase()];if(!r){const a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return vE(n,r,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const a=[...i[0]].length-1;let c,h,m=a,p=0;const v=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(v.lastIndex=0,e=e.slice(-1*t.length+a);(i=v.exec(e))!=null;){if(c=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!c)continue;if(h=[...c].length,i[3]||i[4]){m+=h;continue}else if((i[5]||i[6])&&a%3&&!((a+h)%3)){p+=h;continue}if(m-=h,m>0)continue;h=Math.min(h,h+m+p);const E=[...i[0]][0].length,S=t.slice(0,a+i.index+E+h);if(Math.min(a,h)%2){const x=S.slice(1,-1);return{type:"em",raw:S,text:x,tokens:this.lexer.inlineTokens(x)}}const I=S.slice(2,-2);return{type:"strong",raw:S,text:I,tokens:this.lexer.inlineTokens(I)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(n),r=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&r&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,i;return e[2]==="@"?(n=e[1],i="mailto:"+n):(n=e[1],i=n),{type:"link",raw:e[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let e;if(e=this.rules.inline.url.exec(t)){let i,r;if(e[2]==="@")i=e[0],r="mailto:"+i;else{let a;do a=e[0],e[0]=((n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])??"";while(a!==e[0]);i=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},xo=class Xp{constructor(e){It(this,"tokens");It(this,"options");It(this,"state");It(this,"tokenizer");It(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||As,this.options.tokenizer=this.options.tokenizer||new Mf,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:kn,block:af.normal,inline:jl.normal};this.options.pedantic?(n.block=af.pedantic,n.inline=jl.pedantic):this.options.gfm&&(n.block=af.gfm,this.options.breaks?n.inline=jl.breaks:n.inline=jl.gfm),this.tokenizer.rules=n}static get rules(){return{block:af,inline:jl}}static lex(e,n){return new Xp(n).lex(e)}static lexInline(e,n){return new Xp(n).inlineTokens(e)}lex(e){e=e.replace(kn.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],i=!1){var r,a,c;for(this.options.pedantic&&(e=e.replace(kn.tabCharGlobal,"    ").replace(kn.spaceLine,""));e;){let h;if((a=(r=this.options.extensions)==null?void 0:r.block)!=null&&a.some(p=>(h=p.call({lexer:this},e,n))?(e=e.substring(h.raw.length),n.push(h),!0):!1))continue;if(h=this.tokenizer.space(e)){e=e.substring(h.raw.length);const p=n.at(-1);h.raw.length===1&&p!==void 0?p.raw+=`
`:n.push(h);continue}if(h=this.tokenizer.code(e)){e=e.substring(h.raw.length);const p=n.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=`
`+h.raw,p.text+=`
`+h.text,this.inlineQueue.at(-1).src=p.text):n.push(h);continue}if(h=this.tokenizer.fences(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.heading(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.hr(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.blockquote(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.list(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.html(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.def(e)){e=e.substring(h.raw.length);const p=n.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=`
`+h.raw,p.text+=`
`+h.raw,this.inlineQueue.at(-1).src=p.text):this.tokens.links[h.tag]||(this.tokens.links[h.tag]={href:h.href,title:h.title});continue}if(h=this.tokenizer.table(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.lheading(e)){e=e.substring(h.raw.length),n.push(h);continue}let m=e;if((c=this.options.extensions)!=null&&c.startBlock){let p=1/0;const v=e.slice(1);let E;this.options.extensions.startBlock.forEach(S=>{E=S.call({lexer:this},v),typeof E=="number"&&E>=0&&(p=Math.min(p,E))}),p<1/0&&p>=0&&(m=e.substring(0,p+1))}if(this.state.top&&(h=this.tokenizer.paragraph(m))){const p=n.at(-1);i&&(p==null?void 0:p.type)==="paragraph"?(p.raw+=`
`+h.raw,p.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):n.push(h),i=m.length!==e.length,e=e.substring(h.raw.length);continue}if(h=this.tokenizer.text(e)){e=e.substring(h.raw.length);const p=n.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=`
`+h.raw,p.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):n.push(h);continue}if(e){const p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var h,m,p;let i=e,r=null;if(this.tokens.links){const v=Object.keys(this.tokens.links);if(v.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)v.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,r.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let a=!1,c="";for(;e;){a||(c=""),a=!1;let v;if((m=(h=this.options.extensions)==null?void 0:h.inline)!=null&&m.some(S=>(v=S.call({lexer:this},e,n))?(e=e.substring(v.raw.length),n.push(v),!0):!1))continue;if(v=this.tokenizer.escape(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.tag(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.link(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(v.raw.length);const S=n.at(-1);v.type==="text"&&(S==null?void 0:S.type)==="text"?(S.raw+=v.raw,S.text+=v.text):n.push(v);continue}if(v=this.tokenizer.emStrong(e,i,c)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.codespan(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.br(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.del(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.autolink(e)){e=e.substring(v.raw.length),n.push(v);continue}if(!this.state.inLink&&(v=this.tokenizer.url(e))){e=e.substring(v.raw.length),n.push(v);continue}let E=e;if((p=this.options.extensions)!=null&&p.startInline){let S=1/0;const I=e.slice(1);let x;this.options.extensions.startInline.forEach(O=>{x=O.call({lexer:this},I),typeof x=="number"&&x>=0&&(S=Math.min(S,x))}),S<1/0&&S>=0&&(E=e.substring(0,S+1))}if(v=this.tokenizer.inlineText(E)){e=e.substring(v.raw.length),v.raw.slice(-1)!=="_"&&(c=v.raw.slice(-1)),a=!0;const S=n.at(-1);(S==null?void 0:S.type)==="text"?(S.raw+=v.raw,S.text+=v.text):n.push(v);continue}if(e){const S="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(S);break}else throw new Error(S)}}return n}},Nf=class{constructor(t){It(this,"options");It(this,"parser");this.options=t||As}space(t){return""}code({text:t,lang:e,escaped:n}){var a;const i=(a=(e||"").match(kn.notSpaceStart))==null?void 0:a[0],r=t.replace(kn.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Hi(i)+'">'+(n?r:Hi(r,!0))+`</code></pre>
`:"<pre><code>"+(n?r:Hi(r,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,n=t.start;let i="";for(let c=0;c<t.items.length;c++){const h=t.items[c];i+=this.listitem(h)}const r=e?"ol":"ul",a=e&&n!==1?' start="'+n+'"':"";return"<"+r+a+`>
`+i+"</"+r+`>
`}listitem(t){var n;let e="";if(t.task){const i=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=i+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=i+" "+Hi(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):e+=i+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let r=0;r<t.header.length;r++)n+=this.tablecell(t.header[r]);e+=this.tablerow({text:n});let i="";for(let r=0;r<t.rows.length;r++){const a=t.rows[r];n="";for(let c=0;c<a.length;c++)n+=this.tablecell(a[c]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+i+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Hi(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const i=this.parser.parseInline(n),r=gE(t);if(r===null)return i;t=r;let a='<a href="'+t+'"';return e&&(a+=' title="'+Hi(e)+'"'),a+=">"+i+"</a>",a}image({href:t,title:e,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));const r=gE(t);if(r===null)return Hi(n);t=r;let a=`<img src="${t}" alt="${n}"`;return e&&(a+=` title="${Hi(e)}"`),a+=">",a}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Hi(t.text)}},Om=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},bo=class Wp{constructor(e){It(this,"options");It(this,"renderer");It(this,"textRenderer");this.options=e||As,this.options.renderer=this.options.renderer||new Nf,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Om}static parse(e,n){return new Wp(n).parse(e)}static parseInline(e,n){return new Wp(n).parseInline(e)}parse(e,n=!0){var r,a;let i="";for(let c=0;c<e.length;c++){const h=e[c];if((a=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&a[h.type]){const p=h,v=this.options.extensions.renderers[p.type].call({parser:this},p);if(v!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(p.type)){i+=v||"";continue}}const m=h;switch(m.type){case"space":{i+=this.renderer.space(m);continue}case"hr":{i+=this.renderer.hr(m);continue}case"heading":{i+=this.renderer.heading(m);continue}case"code":{i+=this.renderer.code(m);continue}case"table":{i+=this.renderer.table(m);continue}case"blockquote":{i+=this.renderer.blockquote(m);continue}case"list":{i+=this.renderer.list(m);continue}case"html":{i+=this.renderer.html(m);continue}case"paragraph":{i+=this.renderer.paragraph(m);continue}case"text":{let p=m,v=this.renderer.text(p);for(;c+1<e.length&&e[c+1].type==="text";)p=e[++c],v+=`
`+this.renderer.text(p);n?i+=this.renderer.paragraph({type:"paragraph",raw:v,text:v,tokens:[{type:"text",raw:v,text:v,escaped:!0}]}):i+=v;continue}default:{const p='Token with "'+m.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return i}parseInline(e,n=this.renderer){var r,a;let i="";for(let c=0;c<e.length;c++){const h=e[c];if((a=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&a[h.type]){const p=this.options.extensions.renderers[h.type].call({parser:this},h);if(p!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(h.type)){i+=p||"";continue}}const m=h;switch(m.type){case"escape":{i+=n.text(m);break}case"html":{i+=n.html(m);break}case"link":{i+=n.link(m);break}case"image":{i+=n.image(m);break}case"strong":{i+=n.strong(m);break}case"em":{i+=n.em(m);break}case"codespan":{i+=n.codespan(m);break}case"br":{i+=n.br(m);break}case"del":{i+=n.del(m);break}case"text":{i+=n.text(m);break}default:{const p='Token with "'+m.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return i}},Lp,gf=(Lp=class{constructor(t){It(this,"options");It(this,"block");this.options=t||As}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?xo.lex:xo.lexInline}provideParser(){return this.block?bo.parse:bo.parseInline}},It(Lp,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),Lp),RV=class{constructor(...t){It(this,"defaults",Mm());It(this,"options",this.setOptions);It(this,"parse",this.parseMarkdown(!0));It(this,"parseInline",this.parseMarkdown(!1));It(this,"Parser",bo);It(this,"Renderer",Nf);It(this,"TextRenderer",Om);It(this,"Lexer",xo);It(this,"Tokenizer",Mf);It(this,"Hooks",gf);this.use(...t)}walkTokens(t,e){var i,r;let n=[];for(const a of t)switch(n=n.concat(e.call(this,a)),a.type){case"table":{const c=a;for(const h of c.header)n=n.concat(this.walkTokens(h.tokens,e));for(const h of c.rows)for(const m of h)n=n.concat(this.walkTokens(m.tokens,e));break}case"list":{const c=a;n=n.concat(this.walkTokens(c.items,e));break}default:{const c=a;(r=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&r[c.type]?this.defaults.extensions.childTokens[c.type].forEach(h=>{const m=c[h].flat(1/0);n=n.concat(this.walkTokens(m,e))}):c.tokens&&(n=n.concat(this.walkTokens(c.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const a=e.renderers[r.name];a?e.renderers[r.name]=function(...c){let h=r.renderer.apply(this,c);return h===!1&&(h=a.apply(this,c)),h}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=e[r.level];a?a.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),n.renderer){const r=this.defaults.renderer||new Nf(this.defaults);for(const a in n.renderer){if(!(a in r))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;const c=a,h=n.renderer[c],m=r[c];r[c]=(...p)=>{let v=h.apply(r,p);return v===!1&&(v=m.apply(r,p)),v||""}}i.renderer=r}if(n.tokenizer){const r=this.defaults.tokenizer||new Mf(this.defaults);for(const a in n.tokenizer){if(!(a in r))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const c=a,h=n.tokenizer[c],m=r[c];r[c]=(...p)=>{let v=h.apply(r,p);return v===!1&&(v=m.apply(r,p)),v}}i.tokenizer=r}if(n.hooks){const r=this.defaults.hooks||new gf;for(const a in n.hooks){if(!(a in r))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;const c=a,h=n.hooks[c],m=r[c];gf.passThroughHooks.has(a)?r[c]=p=>{if(this.defaults.async)return Promise.resolve(h.call(r,p)).then(E=>m.call(r,E));const v=h.call(r,p);return m.call(r,v)}:r[c]=(...p)=>{let v=h.apply(r,p);return v===!1&&(v=m.apply(r,p)),v}}i.hooks=r}if(n.walkTokens){const r=this.defaults.walkTokens,a=n.walkTokens;i.walkTokens=function(c){let h=[];return h.push(a.call(this,c)),r&&(h=h.concat(r.call(this,c))),h}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return xo.lex(t,e??this.defaults)}parser(t,e){return bo.parse(t,e??this.defaults)}parseMarkdown(t){return(n,i)=>{const r={...i},a={...this.defaults,...r},c=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&r.async===!1)return c(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return c(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));a.hooks&&(a.hooks.options=a,a.hooks.block=t);const h=a.hooks?a.hooks.provideLexer():t?xo.lex:xo.lexInline,m=a.hooks?a.hooks.provideParser():t?bo.parse:bo.parseInline;if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(n):n).then(p=>h(p,a)).then(p=>a.hooks?a.hooks.processAllTokens(p):p).then(p=>a.walkTokens?Promise.all(this.walkTokens(p,a.walkTokens)).then(()=>p):p).then(p=>m(p,a)).then(p=>a.hooks?a.hooks.postprocess(p):p).catch(c);try{a.hooks&&(n=a.hooks.preprocess(n));let p=h(n,a);a.hooks&&(p=a.hooks.processAllTokens(p)),a.walkTokens&&this.walkTokens(p,a.walkTokens);let v=m(p,a);return a.hooks&&(v=a.hooks.postprocess(v)),v}catch(p){return c(p)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const i="<p>An error occurred:</p><pre>"+Hi(n.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(n);throw n}}},ms=new RV;function dt(t,e){return ms.parse(t,e)}dt.options=dt.setOptions=function(t){return ms.setOptions(t),dt.defaults=ms.defaults,yS(dt.defaults),dt};dt.getDefaults=Mm;dt.defaults=As;dt.use=function(...t){return ms.use(...t),dt.defaults=ms.defaults,yS(dt.defaults),dt};dt.walkTokens=function(t,e){return ms.walkTokens(t,e)};dt.parseInline=ms.parseInline;dt.Parser=bo;dt.parser=bo.parse;dt.Renderer=Nf;dt.TextRenderer=Om;dt.Lexer=xo;dt.lexer=xo.lex;dt.Tokenizer=Mf;dt.Hooks=gf;dt.parse=dt;dt.options;dt.setOptions;dt.use;dt.walkTokens;dt.parseInline;bo.parse;xo.lex;const xV=({theme:t,onPromptClick:e})=>{const n=["What's the best place to get suya in Lekki?","Paint a picture of a futuristic Lagos with flying danfo buses.","Tell me a story about the Eyo festival, but in the style of a wise Igbo elder.","Plan a 3-day tourist itinerary for someone visiting Lagos for the first time."];return L.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[L.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-cyan-500 to-purple-500 rounded-full flex items-center justify-center shadow-lg mb-4",children:L.jsx(M2,{className:"w-10 h-10 text-white"})}),L.jsx("h1",{className:`text-3xl font-bold ${t.text} mb-2`,children:"Lagos Oracle"}),L.jsx("p",{className:`${t.muted} mb-8`,children:"Your AI companion for all things Lagos and beyond."}),L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-w-2xl w-full",children:n.map((i,r)=>L.jsxs("button",{onClick:()=>e(i),className:`p-4 rounded-lg text-left transition-all duration-200
                        ${t.card} border dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-700/50
                        flex items-start space-x-3`,children:[L.jsx(gS,{className:`w-5 h-5 mt-1 ${t.secondaryAccent} shrink-0`}),L.jsx("span",{className:`text-sm ${t.text}`,children:i})]},r))})]})};dt.setOptions({breaks:!0,gfm:!0});const Zp=({persona:t,isUser:e,isError:n})=>{var a;const i="w-8 h-8 rounded-full flex items-center justify-center shrink-0 text-white";if(e)return L.jsx("div",{className:`${i} bg-blue-500`,children:L.jsx(O2,{className:"w-5 h-5"})});if(n)return L.jsx("div",{className:`${i} bg-red-500`,children:L.jsx(L2,{className:"w-5 h-5"})});if((a=t==null?void 0:t.icon)!=null&&a.startsWith("http"))return L.jsx("img",{src:t.icon,alt:t.name,className:"w-8 h-8 rounded-full object-cover"});const r=t!=null&&t.color?t.color.replace("text-","bg-").replace("-400","-500"):"bg-indigo-500";return L.jsx("div",{className:`${i} ${r}`,children:t!=null&&t.icon&&!t.icon.startsWith("http")?L.jsx("span",{className:"text-xl",children:t.icon}):L.jsx(gS,{className:"w-5 h-5"})})},bV=({message:t,theme:e,personas:n})=>{const[i,r]=Ae.useState(!1),a=dt.parse(typeof t.content=="string"?t.content:"*Error: Invalid message content*"),c=()=>{typeof t.content=="string"&&navigator.clipboard.writeText(t.content).then(()=>{r(!0),setTimeout(()=>r(!1),2e3)}).catch(E=>console.error("Failed to copy text: ",E))},h=t.mood==="error",m=t.personaKey?n[t.personaKey]:void 0,p="group flex items-start gap-3 my-4 relative",v="relative rounded-xl px-4 py-3 shadow-md max-w-2xl";return t.type==="user"?L.jsxs("div",{className:`${p} justify-end`,children:[L.jsx("div",{className:`${v} bg-blue-600 text-white`,children:L.jsx("div",{className:"prose prose-sm max-w-none prose-invert prose-p:my-1",dangerouslySetInnerHTML:{__html:a}})}),L.jsx(Zp,{isUser:!0})]}):L.jsxs("div",{className:p,children:[L.jsx(Zp,{persona:m,isError:h}),L.jsxs("div",{className:"flex flex-col",children:[L.jsxs("div",{className:`${v} ${h?"bg-red-100 dark:bg-red-900/40":e.card}`,children:[t.model&&L.jsx("div",{className:`text-xs mb-1.5 font-semibold ${h?"text-red-600 dark:text-red-300":e.muted}`,children:t.model}),L.jsx("div",{className:`prose prose-sm max-w-none ${e.text}`,dangerouslySetInnerHTML:{__html:a}}),t.media&&L.jsxs("div",{className:"mt-3",children:[t.media.imageUrl&&L.jsx("img",{src:t.media.imageUrl,alt:"Generated by AI",className:"rounded-lg max-w-xs md:max-w-sm h-auto shadow-lg border dark:border-gray-600"}),t.media.videoUrl&&L.jsx("video",{src:t.media.videoUrl,controls:!0,className:"rounded-lg max-w-xs md:max-w-sm h-auto shadow-lg border dark:border-gray-600"}),!t.media.success&&L.jsxs("div",{className:"p-3 rounded-lg border-2 border-dashed border-gray-300 bg-gray-100/50 text-gray-500 dark:border-gray-600 dark:bg-gray-700/30 dark:text-gray-400 flex flex-col items-center justify-center max-w-xs md:max-w-sm",children:[t.media.videoUrl?L.jsx(F2,{className:"w-10 h-10 mb-2 opacity-70"}):L.jsx(d2,{className:"w-10 h-10 mb-2 opacity-70"}),L.jsx("p",{className:"text-sm font-semibold",children:"Media Generation Failed"}),L.jsx("p",{className:"text-xs text-center",children:t.media.model||"Could not generate media."})]})]})]}),L.jsxs("div",{className:"flex items-center justify-start mt-1.5 space-x-3",children:[L.jsx("span",{className:`text-xs ${e.muted}`,children:t.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),typeof t.content=="string"&&t.content.trim()!==""&&L.jsx("button",{onClick:c,title:i?"Copied!":"Copy message",className:"p-1 rounded-full transition-all duration-200 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-700 opacity-0 group-hover:opacity-100",children:i?L.jsx(e2,{className:"w-3.5 h-3.5"}):L.jsx(s2,{className:"w-3.5 h-3.5"})})]})]})]})},MV=({messages:t,isTyping:e,theme:n,personas:i,onPromptClick:r})=>{const a=Ae.useRef(null);return Ae.useEffect(()=>{var c;(c=a.current)==null||c.scrollIntoView({behavior:"smooth"})},[t,e]),L.jsx("div",{className:"flex-1 overflow-y-auto",children:L.jsxs("div",{className:"max-w-3xl mx-auto p-4",children:[t.length===0&&!e?L.jsx(xV,{theme:n,onPromptClick:r}):t.map(c=>L.jsx(bV,{message:c,theme:n,personas:i},c.id)),e&&L.jsxs("div",{className:"flex items-start gap-3 my-4",children:[L.jsx(Zp,{persona:{name:"Oracle",icon:"🤖",description:"",systemPromptModifier:"",color:"bg-indigo-500"}}),L.jsx("div",{className:`rounded-xl px-4 py-3 shadow-md ${n.card}`,children:L.jsxs("div",{className:"flex items-center space-x-1",children:[L.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0s"}}),L.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),L.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})})]}),L.jsx("div",{ref:a})]})})},NV=({theme:t,selectedAI:e,onSelectAI:n,onClose:i})=>L.jsx("div",{className:"absolute bottom-full mb-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border dark:border-gray-700",children:L.jsxs("div",{className:"p-2",children:[L.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 px-2 mb-1",children:"Choose a model"}),Object.entries(Si).map(([r,a])=>L.jsxs("button",{onClick:()=>{n(r),i()},className:`w-full flex items-center gap-2 p-2 rounded-md text-sm text-left
                        ${e===r?`font-semibold ${a.color}`:`${t.text} hover:bg-gray-100 dark:hover:bg-gray-700`}`,children:[L.jsx("span",{className:"text-lg",children:a.icon}),L.jsx("span",{children:a.name})]},r))]})}),kV=({input:t,isTyping:e,isListening:n,recognitionAvailable:i,theme:r,selectedAI:a,setInput:c,handleSend:h,startListening:m,setSelectedAI:p})=>{const v=Ae.useRef(null),[E,S]=Ae.useState(!1);Ae.useEffect(()=>{v.current&&(v.current.style.height="auto",v.current.style.height=`${v.current.scrollHeight}px`)},[t]);const I=()=>{t.trim()&&!e&&h()},x=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),I())};return L.jsx("div",{className:"bg-transparent px-4 pb-4 sticky bottom-0",children:L.jsx("div",{className:"max-w-3xl mx-auto",children:L.jsxs("div",{className:"relative",children:[E&&L.jsx(NV,{theme:r,selectedAI:a,onSelectAI:p,onClose:()=>S(!1)}),L.jsxs("div",{className:`relative flex items-center ${r.card} border dark:border-gray-600 rounded-2xl shadow-lg`,children:[L.jsxs("button",{onClick:()=>S(O=>!O),className:"p-3 rounded-full transition-all duration-200 flex items-center gap-1 hover:bg-gray-200 dark:hover:bg-gray-700",children:[L.jsx("span",{className:"text-lg",children:Si[a].icon}),L.jsx(n2,{size:16,className:`transition-transform duration-200 ${E?"rotate-0":"rotate-180"}`})]}),L.jsx("textarea",{ref:v,value:t,onChange:O=>c(O.target.value),onKeyDown:x,placeholder:`Ask ${Si[a].name}...`,className:`w-full max-h-48 bg-transparent p-3 resize-none border-none focus:ring-0 ${r.text} placeholder-gray-500 dark:placeholder-gray-400`,rows:1,disabled:e}),L.jsx("button",{onClick:I,disabled:!t.trim()||e,title:"Send Message",className:`p-3 mr-2 rounded-full transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed
                         text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-500`,children:L.jsx(I2,{className:"w-5 h-5"})})]})]})})})};var _E={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},DV=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=t[n++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=t[n++],c=t[n++],h=t[n++],m=((r&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const a=t[n++],c=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return e.join("")},bS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const a=t[r],c=r+1<t.length,h=c?t[r+1]:0,m=r+2<t.length,p=m?t[r+2]:0,v=a>>2,E=(a&3)<<4|h>>4;let S=(h&15)<<2|p>>6,I=p&63;m||(I=64,c||(S=64)),i.push(n[v],n[E],n[S],n[I])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const a=n[t.charAt(r++)],h=r<t.length?n[t.charAt(r)]:0;++r;const p=r<t.length?n[t.charAt(r)]:64;++r;const E=r<t.length?n[t.charAt(r)]:64;if(++r,a==null||h==null||p==null||E==null)throw new PV;const S=a<<2|h>>4;if(i.push(S),p!==64){const I=h<<4&240|p>>2;if(i.push(I),E!==64){const x=p<<6&192|E;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VV=function(t){const e=xS(t);return bS.encodeByteArray(e,!0)},kf=function(t){return VV(t).replace(/\./g,"")},MS=function(t){try{return bS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=()=>LV().__FIREBASE_DEFAULTS__,OV=()=>{if(typeof process>"u"||typeof _E>"u")return;const t=_E.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&MS(t[1]);return e&&JSON.parse(e)},jf=()=>{try{return UV()||OV()||BV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NS=t=>{var e,n;return(n=(e=jf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},FV=t=>{const e=NS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},kS=()=>{var t;return(t=jf())===null||t===void 0?void 0:t.config},DS=t=>{var e;return(e=jf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kf(JSON.stringify(n)),kf(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(In())}function HV(){var t;const e=(t=jf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $V(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function KV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JV(){const t=In();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function QV(){return!HV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XV(){try{return typeof indexedDB=="object"}catch{return!1}}function WV(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var a;e(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV="FirebaseError";class Fo extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=ZV,Object.setPrototypeOf(this,Fo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Iu.prototype.create)}}class Iu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,a=this.errors[e],c=a?jV(a,i):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new Fo(r,h,i)}}function jV(t,e){return t.replace(eL,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const eL=/\{\$([^}]+)}/g;function tL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Df(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const a=t[r],c=e[r];if(TE(a)&&TE(c)){if(!Df(a,c))return!1}else if(a!==c)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function TE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nL(t,e){const n=new iL(t,e);return n.subscribe.bind(n)}class iL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");oL(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=wp),r.error===void 0&&(r.error=wp),r.complete===void 0&&(r.complete=wp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t){return t&&t._delegate?t._delegate:t}class gs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new qV;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aL(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&c.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(r,a);const c=this.instances.get(r);return c&&e(c,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:sL(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sL(t){return t===cs?void 0:t}function aL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const uL={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},cL=We.INFO,fL={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},dL=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=fL[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bm{constructor(e){this.name=e,this._logLevel=cL,this._logHandler=dL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const hL=(t,e)=>e.some(n=>t instanceof n);let EE,SE;function pL(){return EE||(EE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mL(){return SE||(SE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PS=new WeakMap,jp=new WeakMap,VS=new WeakMap,Ip=new WeakMap,Fm=new WeakMap;function gL(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(Sr(t.result)),r()},c=()=>{i(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&PS.set(n,t)}).catch(()=>{}),Fm.set(e,t),e}function yL(t){if(jp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),r()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});jp.set(t,e)}let em={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||VS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vL(t){em=t(em)}function _L(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Rp(this),e,...n);return VS.set(i,e.sort?e.sort():[e]),Sr(i)}:mL().includes(t)?function(...e){return t.apply(Rp(this),e),Sr(PS.get(this))}:function(...e){return Sr(t.apply(Rp(this),e))}}function TL(t){return typeof t=="function"?_L(t):(t instanceof IDBTransaction&&yL(t),hL(t,pL())?new Proxy(t,em):t)}function Sr(t){if(t instanceof IDBRequest)return gL(t);if(Ip.has(t))return Ip.get(t);const e=TL(t);return e!==t&&(Ip.set(t,e),Fm.set(e,t)),e}const Rp=t=>Fm.get(t);function EL(t,e,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const c=indexedDB.open(t,e),h=Sr(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Sr(c.result),m.oldVersion,m.newVersion,Sr(c.transaction),m)}),n&&c.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),h.then(m=>{a&&m.addEventListener("close",()=>a()),r&&m.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const SL=["get","getKey","getAll","getAllKeys","count"],AL=["put","add","delete","clear"],xp=new Map;function AE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xp.get(e))return xp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=AL.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||SL.includes(n)))return;const a=async function(c,...h){const m=this.transaction(c,r?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),r&&m.done]))[0]};return xp.set(e,a),a}vL(t=>({...t,get:(e,n,i)=>AE(e,n)||t.get(e,n,i),has:(e,n)=>!!AE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wL(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function wL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tm="@firebase/app",CE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new Bm("@firebase/app"),IL="@firebase/app-compat",RL="@firebase/analytics-compat",xL="@firebase/analytics",bL="@firebase/app-check-compat",ML="@firebase/app-check",NL="@firebase/auth",kL="@firebase/auth-compat",DL="@firebase/database",PL="@firebase/data-connect",VL="@firebase/database-compat",LL="@firebase/functions",UL="@firebase/functions-compat",OL="@firebase/installations",BL="@firebase/installations-compat",FL="@firebase/messaging",qL="@firebase/messaging-compat",GL="@firebase/performance",zL="@firebase/performance-compat",HL="@firebase/remote-config",$L="@firebase/remote-config-compat",YL="@firebase/storage",KL="@firebase/storage-compat",JL="@firebase/firestore",QL="@firebase/vertexai-preview",XL="@firebase/firestore-compat",WL="firebase",ZL="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="[DEFAULT]",jL={[tm]:"fire-core",[IL]:"fire-core-compat",[xL]:"fire-analytics",[RL]:"fire-analytics-compat",[ML]:"fire-app-check",[bL]:"fire-app-check-compat",[NL]:"fire-auth",[kL]:"fire-auth-compat",[DL]:"fire-rtdb",[PL]:"fire-data-connect",[VL]:"fire-rtdb-compat",[LL]:"fire-fn",[UL]:"fire-fn-compat",[OL]:"fire-iid",[BL]:"fire-iid-compat",[FL]:"fire-fcm",[qL]:"fire-fcm-compat",[GL]:"fire-perf",[zL]:"fire-perf-compat",[HL]:"fire-rc",[$L]:"fire-rc-compat",[YL]:"fire-gcs",[KL]:"fire-gcs-compat",[JL]:"fire-fst",[XL]:"fire-fst-compat",[QL]:"fire-vertex","fire-js":"fire-js",[WL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=new Map,eU=new Map,im=new Map;function wE(t,e){try{t.container.addComponent(e)}catch(n){Po.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ba(t){const e=t.name;if(im.has(e))return Po.debug(`There were multiple attempts to register component ${e}.`),!1;im.set(e,t);for(const n of pu.values())wE(n,t);for(const n of eU.values())wE(n,t);return!0}function qm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ai(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new Iu("app","Firebase",tU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=ZL;function LS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:nm,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Ar.create("bad-app-name",{appName:String(r)});if(n||(n=kS()),!n)throw Ar.create("no-options");const a=pu.get(r);if(a){if(Df(n,a.options)&&Df(i,a.config))return a;throw Ar.create("duplicate-app",{appName:r})}const c=new lL(r);for(const m of im.values())c.addComponent(m);const h=new nU(n,i,c);return pu.set(r,h),h}function US(t=nm){const e=pu.get(t);if(!e&&t===nm&&kS())return LS();if(!e)throw Ar.create("no-app",{appName:t});return e}function IE(){return Array.from(pu.values())}function Cr(t,e,n){var i;let r=(i=jL[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const h=[`Unable to register library "${r}" with version "${e}":`];a&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Po.warn(h.join(" "));return}ba(new gs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU="firebase-heartbeat-database",oU=1,mu="firebase-heartbeat-store";let bp=null;function OS(){return bp||(bp=EL(iU,oU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(mu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ar.create("idb-open",{originalErrorMessage:t.message})})),bp}async function rU(t){try{const n=(await OS()).transaction(mu),i=await n.objectStore(mu).get(BS(t));return await n.done,i}catch(e){if(e instanceof Fo)Po.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Po.warn(n.message)}}}async function RE(t,e){try{const i=(await OS()).transaction(mu,"readwrite");await i.objectStore(mu).put(e,BS(t)),await i.done}catch(n){if(n instanceof Fo)Po.warn(n.message);else{const i=Ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Po.warn(i.message)}}}function BS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU=1024,aU=720*60*60*1e3;class lU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cU(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=xE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const h=new Date(c.date).valueOf();return Date.now()-h<=aU}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Po.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xE(),{heartbeatsToSend:i,unsentEntries:r}=uU(this._heartbeatsCache.heartbeats),a=kf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Po.warn(n),""}}}function xE(){return new Date().toISOString().substring(0,10)}function uU(t,e=sU){const n=[];let i=t.slice();for(const r of t){const a=n.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),bE(n)>e){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),bE(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class cU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XV()?WV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return RE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return RE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function bE(t){return kf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(t){ba(new gs("platform-logger",e=>new CL(e),"PRIVATE")),ba(new gs("heartbeat",e=>new lU(e),"PRIVATE")),Cr(tm,CE,t),Cr(tm,CE,"esm2017"),Cr("fire-js","")}fU("");var dU="firebase",hU="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr(dU,hU,"app");function Gm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function FS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pU=FS,qS=new Iu("auth","Firebase",FS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new Bm("@firebase/auth");function mU(t,...e){Pf.logLevel<=We.WARN&&Pf.warn(`Auth (${Ga}): ${t}`,...e)}function yf(t,...e){Pf.logLevel<=We.ERROR&&Pf.error(`Auth (${Ga}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(t,...e){throw Hm(t,...e)}function Ci(t,...e){return Hm(t,...e)}function zm(t,e,n){const i=Object.assign(Object.assign({},pU()),{[e]:n});return new Iu("auth","Firebase",i).create(e,{appName:t.name})}function Do(t){return zm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function GS(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Xi(t,"argument-error"),zm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return qS.create(t,...e)}function Me(t,e,...n){if(!t)throw Hm(e,...n)}function Mo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yf(e),new Error(e)}function Vo(t,e){t||Mo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gU(){return ME()==="http:"||ME()==="https:"}function ME(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gU()||YV()||"connection"in navigator)?navigator.onLine:!0}function vU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vo(n>e,"Short delay should be less than long delay!"),this.isMobile=zV()||KV()}get(){return yU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t,e){Vo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=new xu(3e4,6e4);function ed(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function za(t,e,n,i,r={}){return HS(t,r,async()=>{let a={},c={};i&&(e==="GET"?c=i:a={body:JSON.stringify(i)});const h=Ru(Object.assign({key:t.config.apiKey},c)).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:m},a);return $V()||(p.referrerPolicy="no-referrer"),zS.fetch()(YS(t,t.config.apiHost,n,h),p)})}async function HS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},_U),e);try{const r=new EU(t),a=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw lf(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const h=a.ok?c.errorMessage:c.error.message,[m,p]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(t,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw lf(t,"email-already-in-use",c);if(m==="USER_DISABLED")throw lf(t,"user-disabled",c);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw zm(t,v,p);Xi(t,v)}}catch(r){if(r instanceof Fo)throw r;Xi(t,"network-request-failed",{message:String(r)})}}async function $S(t,e,n,i,r={}){const a=await za(t,e,n,i,r);return"mfaPendingCredential"in a&&Xi(t,"multi-factor-auth-required",{_serverResponse:a}),a}function YS(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?$m(t.config,r):`${t.config.apiScheme}://${r}`}class EU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ci(this.auth,"network-request-failed")),TU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lf(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ci(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(t,e){return za(t,"POST","/v1/accounts:delete",e)}async function KS(t,e){return za(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AU(t,e=!1){const n=yn(t),i=await n.getIdToken(e),r=Ym(i);Me(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:lu(Mp(r.auth_time)),issuedAtTime:lu(Mp(r.iat)),expirationTime:lu(Mp(r.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Mp(t){return Number(t)*1e3}function Ym(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return yf("JWT malformed, contained fewer than 3 sections"),null;try{const r=MS(n);return r?JSON.parse(r):(yf("Failed to decode base64 JWT payload"),null)}catch(r){return yf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function NE(t){const e=Ym(t);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Fo&&CU(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function CU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lu(this.lastLoginAt),this.creationTime=lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vf(t){var e;const n=t.auth,i=await t.getIdToken(),r=await gu(t,KS(n,{idToken:i}));Me(r==null?void 0:r.users.length,n,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?JS(a.providerUserInfo):[],h=RU(t.providerData,c),m=t.isAnonymous,p=!(t.email&&a.passwordHash)&&!(h!=null&&h.length),v=m?p:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new rm(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(t,E)}async function IU(t){const e=yn(t);await Vf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RU(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function JS(t){return t.map(e=>{var{providerId:n}=e,i=Gm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xU(t,e){const n=await HS(t,{},async()=>{const i=Ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=t.config,c=YS(t,r,"/v1/token",`key=${a}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",zS.fetch()(c,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function bU(t,e){return za(t,"POST","/v2/accounts:revokeToken",ed(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=NE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:a}=await xU(e,n);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:a}=n,c=new wa;return i&&(Me(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),r&&(Me(typeof r=="string","internal-error",{appName:e}),c.accessToken=r),a&&(Me(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wa,this.toJSON())}_performRefresh(){return Mo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,e){Me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class No{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,a=Gm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new rm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await gu(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return AU(this,e)}reload(){return IU(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new No(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Vf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ai(this.auth.app))return Promise.reject(Do(this.auth));const e=await this.getIdToken();return await gu(this,SU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,a,c,h,m,p,v;const E=(i=n.displayName)!==null&&i!==void 0?i:void 0,S=(r=n.email)!==null&&r!==void 0?r:void 0,I=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,x=(c=n.photoURL)!==null&&c!==void 0?c:void 0,O=(h=n.tenantId)!==null&&h!==void 0?h:void 0,F=(m=n._redirectEventId)!==null&&m!==void 0?m:void 0,oe=(p=n.createdAt)!==null&&p!==void 0?p:void 0,te=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:ne,emailVerified:fe,isAnonymous:se,providerData:pe,stsTokenManager:k}=n;Me(ne&&k,e,"internal-error");const M=wa.fromJSON(this.name,k);Me(typeof ne=="string",e,"internal-error"),mr(E,e.name),mr(S,e.name),Me(typeof fe=="boolean",e,"internal-error"),Me(typeof se=="boolean",e,"internal-error"),mr(I,e.name),mr(x,e.name),mr(O,e.name),mr(F,e.name),mr(oe,e.name),mr(te,e.name);const b=new No({uid:ne,auth:e,email:S,emailVerified:fe,displayName:E,isAnonymous:se,photoURL:x,phoneNumber:I,tenantId:O,stsTokenManager:M,createdAt:oe,lastLoginAt:te});return pe&&Array.isArray(pe)&&(b.providerData=pe.map(V=>Object.assign({},V))),F&&(b._redirectEventId=F),b}static async _fromIdTokenResponse(e,n,i=!1){const r=new wa;r.updateFromServerResponse(n);const a=new No({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Vf(a),a}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Me(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?JS(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),h=new wa;h.updateFromIdToken(i);const m=new No({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:c}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new rm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=new Map;function ko(t){Vo(t instanceof Function,"Expected a class definition");let e=kE.get(t);return e?(Vo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}QS.type="NONE";const DE=QS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(t,e,n){return`firebase:${t}:${e}:${n}`}class Ia{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=vf(this.userKey,r.apiKey,a),this.fullPersistenceKey=vf("persistence",r.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?No._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ia(ko(DE),e,i);const r=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=r[0]||ko(DE);const c=vf(i,e.config.apiKey,e.name);let h=null;for(const p of n)try{const v=await p._get(c);if(v){const E=No._fromJSON(e,v);p!==a&&(h=E),a=p;break}}catch{}const m=r.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new Ia(a,e,i):(a=m[0],h&&await a._set(c,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(c)}catch{}})),new Ia(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tA(e))return"Blackberry";if(nA(e))return"Webos";if(WS(e))return"Safari";if((e.includes("chrome/")||ZS(e))&&!e.includes("edge/"))return"Chrome";if(eA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function XS(t=In()){return/firefox\//i.test(t)}function WS(t=In()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZS(t=In()){return/crios\//i.test(t)}function jS(t=In()){return/iemobile/i.test(t)}function eA(t=In()){return/android/i.test(t)}function tA(t=In()){return/blackberry/i.test(t)}function nA(t=In()){return/webos/i.test(t)}function Km(t=In()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MU(t=In()){var e;return Km(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function NU(){return JV()&&document.documentMode===10}function iA(t=In()){return Km(t)||eA(t)||nA(t)||tA(t)||/windows phone/i.test(t)||jS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t,e=[]){let n;switch(t){case"Browser":n=PE(In());break;case"Worker":n=`${PE(In())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ga}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((c,h)=>{try{const m=e(a);c(m)}catch(m){h(m)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(t,e={}){return za(t,"GET","/v2/passwordPolicy",ed(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=6;class VU{constructor(e){var n,i,r,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:PU,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,a,c,h;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(n=m.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(r=m.containsLowercaseLetter)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(a=m.containsUppercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(h=m.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),m}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VE(this),this.idTokenSubscription=new VE(this),this.beforeStateQueue=new kU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ko(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Ia.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await KS(this,{idToken:e}),i=await No._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ai(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===h)&&(m!=null&&m.user)&&(r=m.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ai(this.app))return Promise.reject(Do(this));const n=e?yn(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ai(this.app)?Promise.reject(Do(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ai(this.app)?Promise.reject(Do(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ko(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DU(this),n=new VU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Iu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await bU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ko(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await Ia.create(this,[ko(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(h,this,"internal-error"),h.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,i,r);return()=>{c=!0,m()}}else{const m=e.addObserver(n);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&mU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ha(t){return yn(t)}class VE{constructor(e){this.auth=e,this.observer=null,this.addObserver=nL(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UU(t){Jm=t}function OU(t){return Jm.loadJS(t)}function BU(){return Jm.gapiScript}function FU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(t,e){const n=qm(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),a=n.getOptions();if(Df(a,e??{}))return r;Xi(r,"already-initialized")}return n.initialize({options:e})}function GU(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ko);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function zU(t,e,n){const i=Ha(t);Me(i._canInitEmulator,i,"emulator-config-failed"),Me(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=rA(e),{host:c,port:h}=HU(e),m=h===null?"":`:${h}`;i.config.emulator={url:`${a}//${c}${m}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:c,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})}),$U()}function rA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HU(t){const e=rA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:LE(i.substr(a.length+1))}}else{const[a,c]=i.split(":");return{host:a,port:LE(c)}}}function LE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $U(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mo("not implemented")}_getIdTokenResponse(e){return Mo("not implemented")}_linkToIdToken(e,n){return Mo("not implemented")}_getReauthenticationResolver(e){return Mo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(t,e){return $S(t,"POST","/v1/accounts:signInWithIdp",ed(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU="http://localhost";class Lo extends sA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,a=Gm(n,["providerId","signInMethod"]);if(!i||!r)return null;const c=new Lo(i,r);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Ra(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ra(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ra(e,n)}buildRequest(){const e={requestUri:YU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ru(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends td{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class uu extends $a{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Me("providerId"in n&&"signInMethod"in n,"argument-error"),Lo._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Me(e.idToken||e.accessToken,"argument-error"),Lo._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return uu.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return uu.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:a,nonce:c,providerId:h}=e;if(!i&&!r&&!n&&!a||!h)return null;try{return new uu(h)._credential({idToken:n,accessToken:i,nonce:c,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends $a{constructor(){super("facebook.com")}static credential(e){return Lo._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends $a{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Lo._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ro.credentialFromTaggedObject(e)}static credentialFromError(e){return Ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ro.credential(n,i)}catch{return null}}}Ro.GOOGLE_SIGN_IN_METHOD="google.com";Ro.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends $a{constructor(){super("github.com")}static credential(e){return Lo._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.GITHUB_SIGN_IN_METHOD="github.com";vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends $a{constructor(){super("twitter.com")}static credential(e,n){return Lo._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return _r.credential(n,i)}catch{return null}}}_r.TWITTER_SIGN_IN_METHOD="twitter.com";_r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KU(t,e){return $S(t,"POST","/v1/accounts:signUp",ed(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const a=await No._fromIdTokenResponse(e,i,r),c=UE(i);return new Rr({user:a,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=UE(i);return new Rr({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function UE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JU(t){var e;if(Ai(t.app))return Promise.reject(Do(t));const n=Ha(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Rr({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await KU(n,{returnSecureToken:!0}),r=await Rr._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends Fo{constructor(e,n,i,r){var a;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Lf.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Lf(e,n,i,r)}}function aA(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Lf._fromErrorAndOperation(t,a,e,i):a})}async function QU(t,e,n=!1){const i=await gu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Rr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XU(t,e,n=!1){const{auth:i}=t;if(Ai(i.app))return Promise.reject(Do(i));const r="reauthenticate";try{const a=await gu(t,aA(i,r,e,t),n);Me(a.idToken,i,"internal-error");const c=Ym(a.idToken);Me(c,i,"internal-error");const{sub:h}=c;return Me(t.uid===h,i,"user-mismatch"),Rr._forOperation(t,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Xi(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WU(t,e,n=!1){if(Ai(t.app))return Promise.reject(Do(t));const i="signIn",r=await aA(t,i,e),a=await Rr._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(a.user),a}function ZU(t,e,n,i){return yn(t).onIdTokenChanged(e,n,i)}function jU(t,e,n){return yn(t).beforeAuthStateChanged(e,n)}function eO(t,e,n,i){return yn(t).onAuthStateChanged(e,n,i)}function tO(t){return yn(t).signOut()}const Uf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uf,"1"),this.storage.removeItem(Uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=1e3,iO=10;class uA extends lA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);NU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,iO):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},nO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uA.type="LOCAL";const oO=uA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA extends lA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cA.type="SESSION";const fA=cA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new nd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:a}=n.data,c=this.handlersMap[r];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(c).map(async p=>p(n.origin,a)),m=await rO(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,c;return new Promise((h,m)=>{const p=Qm("",20);r.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(E){const S=E;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(S.data.response);break;default:clearTimeout(v),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(){return window}function aO(t){Ki().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(){return typeof Ki().WorkerGlobalScope<"u"&&typeof Ki().importScripts=="function"}async function lO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function cO(){return dA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="firebaseLocalStorageDb",fO=1,Of="firebaseLocalStorage",pA="fbase_key";class bu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function id(t,e){return t.transaction([Of],e?"readwrite":"readonly").objectStore(Of)}function dO(){const t=indexedDB.deleteDatabase(hA);return new bu(t).toPromise()}function sm(){const t=indexedDB.open(hA,fO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Of,{keyPath:pA})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Of)?e(i):(i.close(),await dO(),e(await sm()))})})}async function OE(t,e,n){const i=id(t,!0).put({[pA]:e,value:n});return new bu(i).toPromise()}async function hO(t,e){const n=id(t,!1).get(e),i=await new bu(n).toPromise();return i===void 0?null:i.value}function BE(t,e){const n=id(t,!0).delete(e);return new bu(n).toPromise()}const pO=800,mO=3;class mA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>mO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nd._getInstance(cO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await lO(),!this.activeServiceWorker)return;this.sender=new sO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sm();return await OE(e,Uf,"1"),await BE(e,Uf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>OE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>hO(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>BE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=id(r,!1).getAll();return new bu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mA.type="LOCAL";const gO=mA;new xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t,e){return e?ko(e):(Me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm extends sA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ra(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ra(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yO(t){return WU(t.auth,new Wm(t),t.bypassAuthState)}function vO(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),XU(n,new Wm(t),t.bypassAuthState)}async function _O(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),QU(n,new Wm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:a,error:c,type:h}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yO;case"linkViaPopup":case"linkViaRedirect":return _O;case"reauthViaPopup":case"reauthViaRedirect":return vO;default:Xi(this.auth,"internal-error")}}resolve(e){Vo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=new xu(2e3,1e4);async function yA(t,e,n){if(Ai(t.app))return Promise.reject(Ci(t,"operation-not-supported-in-this-environment"));const i=Ha(t);GS(t,e,td);const r=Xm(i,n);return new fs(i,"signInViaPopup",e,r).executeNotNull()}class fs extends gA{constructor(e,n,i,r,a){super(e,n,r,a),this.provider=i,this.authWindow=null,this.pollId=null,fs.currentPopupAction&&fs.currentPopupAction.cancel(),fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Vo(this.filter.length===1,"Popup operations only handle one event");const e=Qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TO.get())};e()}}fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO="pendingRedirect",_f=new Map;class SO extends gA{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=_f.get(this.auth._key());if(!e){try{const i=await AO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}_f.set(this.auth._key(),e)}return this.bypassAuthState||_f.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AO(t,e){const n=_A(e),i=vA(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function CO(t,e){return vA(t)._set(_A(e),"true")}function wO(t,e){_f.set(t._key(),e)}function vA(t){return ko(t._redirectPersistence)}function _A(t){return vf(EO,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(t,e,n){return IO(t,e,n)}async function IO(t,e,n){if(Ai(t.app))return Promise.reject(Do(t));const i=Ha(t);GS(t,e,td),await i._initializationPromise;const r=Xm(i,n);return await CO(r,i),r._openRedirect(i,e,"signInViaRedirect")}async function RO(t,e,n=!1){if(Ai(t.app))return Promise.reject(Do(t));const i=Ha(t),r=Xm(i,e),c=await new SO(i,r,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=600*1e3;class bO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!EA(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ci(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xO&&this.cachedEventUids.clear(),this.cachedEventUids.has(FE(e))}saveEventToCache(e){this.cachedEventUids.add(FE(e)),this.lastProcessedEventTime=Date.now()}}function FE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function EA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(t,e={}){return za(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DO=/^https?/;async function PO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await NO(t);for(const n of e)try{if(VO(n))return}catch{}Xi(t,"unauthorized-domain")}function VO(t){const e=om(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!DO.test(n))return!1;if(kO.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=new xu(3e4,6e4);function qE(){const t=Ki().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function UO(t){return new Promise((e,n)=>{var i,r,a;function c(){qE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qE(),n(Ci(t,"network-request-failed"))},timeout:LO.get()})}if(!((r=(i=Ki().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((a=Ki().gapi)===null||a===void 0)&&a.load)c();else{const h=FU("iframefcb");return Ki()[h]=()=>{gapi.load?c():n(Ci(t,"network-request-failed"))},OU(`${BU()}?onload=${h}`).catch(m=>n(m))}}).catch(e=>{throw Tf=null,e})}let Tf=null;function OO(t){return Tf=Tf||UO(t),Tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=new xu(5e3,15e3),FO="__/auth/iframe",qO="emulator/auth/iframe",GO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HO(t){const e=t.config;Me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$m(e,qO):`https://${t.config.authDomain}/${FO}`,i={apiKey:e.apiKey,appName:t.name,v:Ga},r=zO.get(t.config.apiHost);r&&(i.eid=r);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${Ru(i).slice(1)}`}async function $O(t){const e=await OO(t),n=Ki().gapi;return Me(n,t,"internal-error"),e.open({where:document.body,url:HO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GO,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const c=Ci(t,"network-request-failed"),h=Ki().setTimeout(()=>{a(c)},BO.get());function m(){Ki().clearTimeout(h),r(i)}i.ping(m).then(m,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KO=500,JO=600,QO="_blank",XO="http://localhost";class GE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WO(t,e,n,i=KO,r=JO){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const m=Object.assign(Object.assign({},YO),{width:i.toString(),height:r.toString(),top:a,left:c}),p=In().toLowerCase();n&&(h=ZS(p)?QO:n),XS(p)&&(e=e||XO,m.scrollbars="yes");const v=Object.entries(m).reduce((S,[I,x])=>`${S}${I}=${x},`,"");if(MU(p)&&h!=="_self")return ZO(e||"",h),new GE(null);const E=window.open(e||"",h,v);Me(E,t,"popup-blocked");try{E.focus()}catch{}return new GE(E)}function ZO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="__/auth/handler",e4="emulator/auth/handler",t4=encodeURIComponent("fac");async function zE(t,e,n,i,r,a){Me(t.config.authDomain,t,"auth-domain-config-required"),Me(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ga,eventId:r};if(e instanceof td){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",tL(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof $a){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}t.tenantId&&(c.tid=t.tenantId);const h=c;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const m=await t._getAppCheckToken(),p=m?`#${t4}=${encodeURIComponent(m)}`:"";return`${n4(t)}?${Ru(h).slice(1)}${p}`}function n4({config:t}){return t.emulator?$m(t,e4):`https://${t.authDomain}/${jO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="webStorageSupport";class i4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fA,this._completeRedirectFn=RO,this._overrideRedirectResult=wO}async _openPopup(e,n,i,r){var a;Vo((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await zE(e,n,i,om(),r);return WO(e,c,Qm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const a=await zE(e,n,i,om(),r);return aO(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:a}=this.eventManagers[n];return r?Promise.resolve(r):(Vo(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await $O(e),i=new bO(e);return n.register("authEvent",r=>(Me(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Np,{type:Np},r=>{var a;const c=(a=r==null?void 0:r[0])===null||a===void 0?void 0:a[Np];c!==void 0&&n(!!c),Xi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iA()||WS()||Km()}}const o4=i4;var HE="@firebase/auth",$E="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a4(t){ba(new gs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;Me(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oA(t)},p=new LU(i,r,a,m);return GU(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ba(new gs("auth-internal",e=>{const n=Ha(e.getProvider("auth").getImmediate());return(i=>new r4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(HE,$E,s4(t)),Cr(HE,$E,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=300,u4=DS("authIdTokenMaxAge")||l4;let YE=null;const c4=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>u4)return;const r=n==null?void 0:n.token;YE!==r&&(YE=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function f4(t=US()){const e=qm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=qU(t,{popupRedirectResolver:o4,persistence:[gO,oO,fA]}),i=DS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const c=c4(a.toString());jU(n,c,()=>c(n.currentUser)),ZU(n,h=>c(h))}}const r=NS("auth");return r&&zU(n,`http://${r}`),n}function d4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}UU({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const a=Ci("internal-error");a.customData=r,n(a)},i.type="text/javascript",i.charset="UTF-8",d4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a4("Browser");var KE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,SA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,M){function b(){}b.prototype=M.prototype,k.D=M.prototype,k.prototype=new b,k.prototype.constructor=k,k.C=function(V,N,q){for(var P=Array(arguments.length-2),At=2;At<arguments.length;At++)P[At-2]=arguments[At];return M.prototype[N].apply(V,P)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,M,b){b||(b=0);var V=Array(16);if(typeof M=="string")for(var N=0;16>N;++N)V[N]=M.charCodeAt(b++)|M.charCodeAt(b++)<<8|M.charCodeAt(b++)<<16|M.charCodeAt(b++)<<24;else for(N=0;16>N;++N)V[N]=M[b++]|M[b++]<<8|M[b++]<<16|M[b++]<<24;M=k.g[0],b=k.g[1],N=k.g[2];var q=k.g[3],P=M+(q^b&(N^q))+V[0]+3614090360&4294967295;M=b+(P<<7&4294967295|P>>>25),P=q+(N^M&(b^N))+V[1]+3905402710&4294967295,q=M+(P<<12&4294967295|P>>>20),P=N+(b^q&(M^b))+V[2]+606105819&4294967295,N=q+(P<<17&4294967295|P>>>15),P=b+(M^N&(q^M))+V[3]+3250441966&4294967295,b=N+(P<<22&4294967295|P>>>10),P=M+(q^b&(N^q))+V[4]+4118548399&4294967295,M=b+(P<<7&4294967295|P>>>25),P=q+(N^M&(b^N))+V[5]+1200080426&4294967295,q=M+(P<<12&4294967295|P>>>20),P=N+(b^q&(M^b))+V[6]+2821735955&4294967295,N=q+(P<<17&4294967295|P>>>15),P=b+(M^N&(q^M))+V[7]+4249261313&4294967295,b=N+(P<<22&4294967295|P>>>10),P=M+(q^b&(N^q))+V[8]+1770035416&4294967295,M=b+(P<<7&4294967295|P>>>25),P=q+(N^M&(b^N))+V[9]+2336552879&4294967295,q=M+(P<<12&4294967295|P>>>20),P=N+(b^q&(M^b))+V[10]+4294925233&4294967295,N=q+(P<<17&4294967295|P>>>15),P=b+(M^N&(q^M))+V[11]+2304563134&4294967295,b=N+(P<<22&4294967295|P>>>10),P=M+(q^b&(N^q))+V[12]+1804603682&4294967295,M=b+(P<<7&4294967295|P>>>25),P=q+(N^M&(b^N))+V[13]+4254626195&4294967295,q=M+(P<<12&4294967295|P>>>20),P=N+(b^q&(M^b))+V[14]+2792965006&4294967295,N=q+(P<<17&4294967295|P>>>15),P=b+(M^N&(q^M))+V[15]+1236535329&4294967295,b=N+(P<<22&4294967295|P>>>10),P=M+(N^q&(b^N))+V[1]+4129170786&4294967295,M=b+(P<<5&4294967295|P>>>27),P=q+(b^N&(M^b))+V[6]+3225465664&4294967295,q=M+(P<<9&4294967295|P>>>23),P=N+(M^b&(q^M))+V[11]+643717713&4294967295,N=q+(P<<14&4294967295|P>>>18),P=b+(q^M&(N^q))+V[0]+3921069994&4294967295,b=N+(P<<20&4294967295|P>>>12),P=M+(N^q&(b^N))+V[5]+3593408605&4294967295,M=b+(P<<5&4294967295|P>>>27),P=q+(b^N&(M^b))+V[10]+38016083&4294967295,q=M+(P<<9&4294967295|P>>>23),P=N+(M^b&(q^M))+V[15]+3634488961&4294967295,N=q+(P<<14&4294967295|P>>>18),P=b+(q^M&(N^q))+V[4]+3889429448&4294967295,b=N+(P<<20&4294967295|P>>>12),P=M+(N^q&(b^N))+V[9]+568446438&4294967295,M=b+(P<<5&4294967295|P>>>27),P=q+(b^N&(M^b))+V[14]+3275163606&4294967295,q=M+(P<<9&4294967295|P>>>23),P=N+(M^b&(q^M))+V[3]+4107603335&4294967295,N=q+(P<<14&4294967295|P>>>18),P=b+(q^M&(N^q))+V[8]+1163531501&4294967295,b=N+(P<<20&4294967295|P>>>12),P=M+(N^q&(b^N))+V[13]+2850285829&4294967295,M=b+(P<<5&4294967295|P>>>27),P=q+(b^N&(M^b))+V[2]+4243563512&4294967295,q=M+(P<<9&4294967295|P>>>23),P=N+(M^b&(q^M))+V[7]+1735328473&4294967295,N=q+(P<<14&4294967295|P>>>18),P=b+(q^M&(N^q))+V[12]+2368359562&4294967295,b=N+(P<<20&4294967295|P>>>12),P=M+(b^N^q)+V[5]+4294588738&4294967295,M=b+(P<<4&4294967295|P>>>28),P=q+(M^b^N)+V[8]+2272392833&4294967295,q=M+(P<<11&4294967295|P>>>21),P=N+(q^M^b)+V[11]+1839030562&4294967295,N=q+(P<<16&4294967295|P>>>16),P=b+(N^q^M)+V[14]+4259657740&4294967295,b=N+(P<<23&4294967295|P>>>9),P=M+(b^N^q)+V[1]+2763975236&4294967295,M=b+(P<<4&4294967295|P>>>28),P=q+(M^b^N)+V[4]+1272893353&4294967295,q=M+(P<<11&4294967295|P>>>21),P=N+(q^M^b)+V[7]+4139469664&4294967295,N=q+(P<<16&4294967295|P>>>16),P=b+(N^q^M)+V[10]+3200236656&4294967295,b=N+(P<<23&4294967295|P>>>9),P=M+(b^N^q)+V[13]+681279174&4294967295,M=b+(P<<4&4294967295|P>>>28),P=q+(M^b^N)+V[0]+3936430074&4294967295,q=M+(P<<11&4294967295|P>>>21),P=N+(q^M^b)+V[3]+3572445317&4294967295,N=q+(P<<16&4294967295|P>>>16),P=b+(N^q^M)+V[6]+76029189&4294967295,b=N+(P<<23&4294967295|P>>>9),P=M+(b^N^q)+V[9]+3654602809&4294967295,M=b+(P<<4&4294967295|P>>>28),P=q+(M^b^N)+V[12]+3873151461&4294967295,q=M+(P<<11&4294967295|P>>>21),P=N+(q^M^b)+V[15]+530742520&4294967295,N=q+(P<<16&4294967295|P>>>16),P=b+(N^q^M)+V[2]+3299628645&4294967295,b=N+(P<<23&4294967295|P>>>9),P=M+(N^(b|~q))+V[0]+4096336452&4294967295,M=b+(P<<6&4294967295|P>>>26),P=q+(b^(M|~N))+V[7]+1126891415&4294967295,q=M+(P<<10&4294967295|P>>>22),P=N+(M^(q|~b))+V[14]+2878612391&4294967295,N=q+(P<<15&4294967295|P>>>17),P=b+(q^(N|~M))+V[5]+4237533241&4294967295,b=N+(P<<21&4294967295|P>>>11),P=M+(N^(b|~q))+V[12]+1700485571&4294967295,M=b+(P<<6&4294967295|P>>>26),P=q+(b^(M|~N))+V[3]+2399980690&4294967295,q=M+(P<<10&4294967295|P>>>22),P=N+(M^(q|~b))+V[10]+4293915773&4294967295,N=q+(P<<15&4294967295|P>>>17),P=b+(q^(N|~M))+V[1]+2240044497&4294967295,b=N+(P<<21&4294967295|P>>>11),P=M+(N^(b|~q))+V[8]+1873313359&4294967295,M=b+(P<<6&4294967295|P>>>26),P=q+(b^(M|~N))+V[15]+4264355552&4294967295,q=M+(P<<10&4294967295|P>>>22),P=N+(M^(q|~b))+V[6]+2734768916&4294967295,N=q+(P<<15&4294967295|P>>>17),P=b+(q^(N|~M))+V[13]+1309151649&4294967295,b=N+(P<<21&4294967295|P>>>11),P=M+(N^(b|~q))+V[4]+4149444226&4294967295,M=b+(P<<6&4294967295|P>>>26),P=q+(b^(M|~N))+V[11]+3174756917&4294967295,q=M+(P<<10&4294967295|P>>>22),P=N+(M^(q|~b))+V[2]+718787259&4294967295,N=q+(P<<15&4294967295|P>>>17),P=b+(q^(N|~M))+V[9]+3951481745&4294967295,k.g[0]=k.g[0]+M&4294967295,k.g[1]=k.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+q&4294967295}i.prototype.u=function(k,M){M===void 0&&(M=k.length);for(var b=M-this.blockSize,V=this.B,N=this.h,q=0;q<M;){if(N==0)for(;q<=b;)r(this,k,q),q+=this.blockSize;if(typeof k=="string"){for(;q<M;)if(V[N++]=k.charCodeAt(q++),N==this.blockSize){r(this,V),N=0;break}}else for(;q<M;)if(V[N++]=k[q++],N==this.blockSize){r(this,V),N=0;break}}this.h=N,this.o+=M},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var M=1;M<k.length-8;++M)k[M]=0;var b=8*this.o;for(M=k.length-8;M<k.length;++M)k[M]=b&255,b/=256;for(this.u(k),k=Array(16),M=b=0;4>M;++M)for(var V=0;32>V;V+=8)k[b++]=this.g[M]>>>V&255;return k};function a(k,M){var b=h;return Object.prototype.hasOwnProperty.call(b,k)?b[k]:b[k]=M(k)}function c(k,M){this.h=M;for(var b=[],V=!0,N=k.length-1;0<=N;N--){var q=k[N]|0;V&&q==M||(b[N]=q,V=!1)}this.g=b}var h={};function m(k){return-128<=k&&128>k?a(k,function(M){return new c([M|0],0>M?-1:0)}):new c([k|0],0>k?-1:0)}function p(k){if(isNaN(k)||!isFinite(k))return E;if(0>k)return F(p(-k));for(var M=[],b=1,V=0;k>=b;V++)M[V]=k/b|0,b*=4294967296;return new c(M,0)}function v(k,M){if(k.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(k.charAt(0)=="-")return F(v(k.substring(1),M));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=p(Math.pow(M,8)),V=E,N=0;N<k.length;N+=8){var q=Math.min(8,k.length-N),P=parseInt(k.substring(N,N+q),M);8>q?(q=p(Math.pow(M,q)),V=V.j(q).add(p(P))):(V=V.j(b),V=V.add(p(P)))}return V}var E=m(0),S=m(1),I=m(16777216);t=c.prototype,t.m=function(){if(O(this))return-F(this).m();for(var k=0,M=1,b=0;b<this.g.length;b++){var V=this.i(b);k+=(0<=V?V:4294967296+V)*M,M*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(x(this))return"0";if(O(this))return"-"+F(this).toString(k);for(var M=p(Math.pow(k,6)),b=this,V="";;){var N=fe(b,M).g;b=oe(b,N.j(M));var q=((0<b.g.length?b.g[0]:b.h)>>>0).toString(k);if(b=N,x(b))return q+V;for(;6>q.length;)q="0"+q;V=q+V}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function x(k){if(k.h!=0)return!1;for(var M=0;M<k.g.length;M++)if(k.g[M]!=0)return!1;return!0}function O(k){return k.h==-1}t.l=function(k){return k=oe(this,k),O(k)?-1:x(k)?0:1};function F(k){for(var M=k.g.length,b=[],V=0;V<M;V++)b[V]=~k.g[V];return new c(b,~k.h).add(S)}t.abs=function(){return O(this)?F(this):this},t.add=function(k){for(var M=Math.max(this.g.length,k.g.length),b=[],V=0,N=0;N<=M;N++){var q=V+(this.i(N)&65535)+(k.i(N)&65535),P=(q>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);V=P>>>16,q&=65535,P&=65535,b[N]=P<<16|q}return new c(b,b[b.length-1]&-2147483648?-1:0)};function oe(k,M){return k.add(F(M))}t.j=function(k){if(x(this)||x(k))return E;if(O(this))return O(k)?F(this).j(F(k)):F(F(this).j(k));if(O(k))return F(this.j(F(k)));if(0>this.l(I)&&0>k.l(I))return p(this.m()*k.m());for(var M=this.g.length+k.g.length,b=[],V=0;V<2*M;V++)b[V]=0;for(V=0;V<this.g.length;V++)for(var N=0;N<k.g.length;N++){var q=this.i(V)>>>16,P=this.i(V)&65535,At=k.i(N)>>>16,Xe=k.i(N)&65535;b[2*V+2*N]+=P*Xe,te(b,2*V+2*N),b[2*V+2*N+1]+=q*Xe,te(b,2*V+2*N+1),b[2*V+2*N+1]+=P*At,te(b,2*V+2*N+1),b[2*V+2*N+2]+=q*At,te(b,2*V+2*N+2)}for(V=0;V<M;V++)b[V]=b[2*V+1]<<16|b[2*V];for(V=M;V<2*M;V++)b[V]=0;return new c(b,0)};function te(k,M){for(;(k[M]&65535)!=k[M];)k[M+1]+=k[M]>>>16,k[M]&=65535,M++}function ne(k,M){this.g=k,this.h=M}function fe(k,M){if(x(M))throw Error("division by zero");if(x(k))return new ne(E,E);if(O(k))return M=fe(F(k),M),new ne(F(M.g),F(M.h));if(O(M))return M=fe(k,F(M)),new ne(F(M.g),M.h);if(30<k.g.length){if(O(k)||O(M))throw Error("slowDivide_ only works with positive integers.");for(var b=S,V=M;0>=V.l(k);)b=se(b),V=se(V);var N=pe(b,1),q=pe(V,1);for(V=pe(V,2),b=pe(b,2);!x(V);){var P=q.add(V);0>=P.l(k)&&(N=N.add(b),q=P),V=pe(V,1),b=pe(b,1)}return M=oe(k,N.j(M)),new ne(N,M)}for(N=E;0<=k.l(M);){for(b=Math.max(1,Math.floor(k.m()/M.m())),V=Math.ceil(Math.log(b)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),q=p(b),P=q.j(M);O(P)||0<P.l(k);)b-=V,q=p(b),P=q.j(M);x(q)&&(q=S),N=N.add(q),k=oe(k,P)}return new ne(N,k)}t.A=function(k){return fe(this,k).h},t.and=function(k){for(var M=Math.max(this.g.length,k.g.length),b=[],V=0;V<M;V++)b[V]=this.i(V)&k.i(V);return new c(b,this.h&k.h)},t.or=function(k){for(var M=Math.max(this.g.length,k.g.length),b=[],V=0;V<M;V++)b[V]=this.i(V)|k.i(V);return new c(b,this.h|k.h)},t.xor=function(k){for(var M=Math.max(this.g.length,k.g.length),b=[],V=0;V<M;V++)b[V]=this.i(V)^k.i(V);return new c(b,this.h^k.h)};function se(k){for(var M=k.g.length+1,b=[],V=0;V<M;V++)b[V]=k.i(V)<<1|k.i(V-1)>>>31;return new c(b,k.h)}function pe(k,M){var b=M>>5;M%=32;for(var V=k.g.length-b,N=[],q=0;q<V;q++)N[q]=0<M?k.i(q+b)>>>M|k.i(q+b+1)<<32-M:k.i(q+b);return new c(N,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,SA=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,hs=c}).apply(typeof KE<"u"?KE:typeof self<"u"?self:typeof window<"u"?window:{});var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AA,nu,CA,Ef,am,wA,IA,RA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,T,A){return g==Array.prototype||g==Object.prototype||(g[T]=A.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof uf=="object"&&uf];for(var T=0;T<g.length;++T){var A=g[T];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=n(this);function r(g,T){if(T)e:{var A=i;g=g.split(".");for(var R=0;R<g.length-1;R++){var z=g[R];if(!(z in A))break e;A=A[z]}g=g[g.length-1],R=A[g],T=T(R),T!=R&&T!=null&&e(A,g,{configurable:!0,writable:!0,value:T})}}function a(g,T){g instanceof String&&(g+="");var A=0,R=!1,z={next:function(){if(!R&&A<g.length){var Q=A++;return{value:T(Q,g[Q]),done:!1}}return R=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}r("Array.prototype.values",function(g){return g||function(){return a(this,function(T,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function m(g){var T=typeof g;return T=T!="object"?T:g?Array.isArray(g)?"array":T:"null",T=="array"||T=="object"&&typeof g.length=="number"}function p(g){var T=typeof g;return T=="object"&&g!=null||T=="function"}function v(g,T,A){return g.call.apply(g.bind,arguments)}function E(g,T,A){if(!g)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,R),g.apply(T,z)}}return function(){return g.apply(T,arguments)}}function S(g,T,A){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function I(g,T){var A=Array.prototype.slice.call(arguments,1);return function(){var R=A.slice();return R.push.apply(R,arguments),g.apply(this,R)}}function x(g,T){function A(){}A.prototype=T.prototype,g.aa=T.prototype,g.prototype=new A,g.prototype.constructor=g,g.Qb=function(R,z,Q){for(var ce=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)ce[Ze-2]=arguments[Ze];return T.prototype[z].apply(R,ce)}}function O(g){const T=g.length;if(0<T){const A=Array(T);for(let R=0;R<T;R++)A[R]=g[R];return A}return[]}function F(g,T){for(let A=1;A<arguments.length;A++){const R=arguments[A];if(m(R)){const z=g.length||0,Q=R.length||0;g.length=z+Q;for(let ce=0;ce<Q;ce++)g[z+ce]=R[ce]}else g.push(R)}}class oe{constructor(T,A){this.i=T,this.j=A,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function te(g){return/^[\s\xa0]*$/.test(g)}function ne(){var g=h.navigator;return g&&(g=g.userAgent)?g:""}function fe(g){return fe[" "](g),g}fe[" "]=function(){};var se=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function pe(g,T,A){for(const R in g)T.call(A,g[R],R,g)}function k(g,T){for(const A in g)T.call(void 0,g[A],A,g)}function M(g){const T={};for(const A in g)T[A]=g[A];return T}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(g,T){let A,R;for(let z=1;z<arguments.length;z++){R=arguments[z];for(A in R)g[A]=R[A];for(let Q=0;Q<b.length;Q++)A=b[Q],Object.prototype.hasOwnProperty.call(R,A)&&(g[A]=R[A])}}function N(g){var T=1;g=g.split(":");const A=[];for(;0<T&&g.length;)A.push(g.shift()),T--;return g.length&&A.push(g.join(":")),A}function q(g){h.setTimeout(()=>{throw g},0)}function P(){var g=Le;let T=null;return g.g&&(T=g.g,g.g=g.g.next,g.g||(g.h=null),T.next=null),T}class At{constructor(){this.h=this.g=null}add(T,A){const R=Xe.get();R.set(T,A),this.h?this.h.next=R:this.g=R,this.h=R}}var Xe=new oe(()=>new X,g=>g.reset());class X{constructor(){this.next=this.g=this.h=null}set(T,A){this.h=T,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ye=!1,Le=new At,U=()=>{const g=h.Promise.resolve(void 0);he=()=>{g.then(W)}};var W=()=>{for(var g;g=P();){try{g.h.call(g.g)}catch(A){q(A)}var T=Xe;T.j(g),100>T.h&&(T.h++,g.next=T.g,T.g=g)}ye=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(g,T){this.type=g,this.g=this.target=T,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var Se=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var g=!1,T=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};h.addEventListener("test",A,T),h.removeEventListener("test",A,T)}catch{}return g}();function Be(g,T){if(re.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var A=this.type=g.type,R=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=T,T=g.relatedTarget){if(se){e:{try{fe(T.nodeName);var z=!0;break e}catch{}z=!1}z||(T=null)}}else A=="mouseover"?T=g.fromElement:A=="mouseout"&&(T=g.toElement);this.relatedTarget=T,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Re[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Be.aa.h.call(this)}}x(Be,re);var Re={2:"touch",3:"pen",4:"mouse"};Be.prototype.h=function(){Be.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Pt="closure_listenable_"+(1e6*Math.random()|0),lt=0;function Wn(g,T,A,R,z){this.listener=g,this.proxy=null,this.src=T,this.type=A,this.capture=!!R,this.ha=z,this.key=++lt,this.da=this.fa=!1}function Ri(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function pi(g){this.src=g,this.g={},this.h=0}pi.prototype.add=function(g,T,A,R,z){var Q=g.toString();g=this.g[Q],g||(g=this.g[Q]=[],this.h++);var ce=eo(g,T,R,z);return-1<ce?(T=g[ce],A||(T.fa=!1)):(T=new Wn(T,this.src,Q,!!R,z),T.fa=A,g.push(T)),T};function ji(g,T){var A=T.type;if(A in g.g){var R=g.g[A],z=Array.prototype.indexOf.call(R,T,void 0),Q;(Q=0<=z)&&Array.prototype.splice.call(R,z,1),Q&&(Ri(T),g.g[A].length==0&&(delete g.g[A],g.h--))}}function eo(g,T,A,R){for(var z=0;z<g.length;++z){var Q=g[z];if(!Q.da&&Q.listener==T&&Q.capture==!!A&&Q.ha==R)return z}return-1}var mi="closure_lm_"+(1e6*Math.random()|0),to={};function Is(g,T,A,R,z){if(Array.isArray(T)){for(var Q=0;Q<T.length;Q++)Is(g,T[Q],A,R,z);return null}return A=xs(A),g&&g[Pt]?g.K(T,A,p(R)?!!R.capture:!1,z):Pn(g,T,A,!1,R,z)}function Pn(g,T,A,R,z,Q){if(!T)throw Error("Invalid event type");var ce=p(z)?!!z.capture:!!z,Ze=qo(g);if(Ze||(g[mi]=Ze=new pi(g)),A=Ze.add(T,A,R,ce,Q),A.proxy)return A;if(R=Qa(),A.proxy=R,R.src=g,R.listener=A,g.addEventListener)Se||(z=ce),z===void 0&&(z=!1),g.addEventListener(T.toString(),R,z);else if(g.attachEvent)g.attachEvent(jn(T.toString()),R);else if(g.addListener&&g.removeListener)g.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Qa(){function g(A){return T.call(g.src,g.listener,A)}const T=Rs;return g}function Dr(g,T,A,R,z){if(Array.isArray(T))for(var Q=0;Q<T.length;Q++)Dr(g,T[Q],A,R,z);else R=p(R)?!!R.capture:!!R,A=xs(A),g&&g[Pt]?(g=g.i,T=String(T).toString(),T in g.g&&(Q=g.g[T],A=eo(Q,A,R,z),-1<A&&(Ri(Q[A]),Array.prototype.splice.call(Q,A,1),Q.length==0&&(delete g.g[T],g.h--)))):g&&(g=qo(g))&&(T=g.g[T.toString()],g=-1,T&&(g=eo(T,A,R,z)),(A=-1<g?T[g]:null)&&Zn(A))}function Zn(g){if(typeof g!="number"&&g&&!g.da){var T=g.src;if(T&&T[Pt])ji(T.i,g);else{var A=g.type,R=g.proxy;T.removeEventListener?T.removeEventListener(A,R,g.capture):T.detachEvent?T.detachEvent(jn(A),R):T.addListener&&T.removeListener&&T.removeListener(R),(A=qo(T))?(ji(A,g),A.h==0&&(A.src=null,T[mi]=null)):Ri(g)}}}function jn(g){return g in to?to[g]:to[g]="on"+g}function Rs(g,T){if(g.da)g=!0;else{T=new Be(T,this);var A=g.listener,R=g.ha||g.src;g.fa&&Zn(g),g=A.call(R,T)}return g}function qo(g){return g=g[mi],g instanceof pi?g:null}var no="__closure_events_fn_"+(1e9*Math.random()>>>0);function xs(g){return typeof g=="function"?g:(g[no]||(g[no]=function(T){return g.handleEvent(T)}),g[no])}function ut(){de.call(this),this.i=new pi(this),this.M=this,this.F=null}x(ut,de),ut.prototype[Pt]=!0,ut.prototype.removeEventListener=function(g,T,A,R){Dr(this,g,T,A,R)};function st(g,T){var A,R=g.F;if(R)for(A=[];R;R=R.F)A.push(R);if(g=g.M,R=T.type||T,typeof T=="string")T=new re(T,g);else if(T instanceof re)T.target=T.target||g;else{var z=T;T=new re(R,g),V(T,z)}if(z=!0,A)for(var Q=A.length-1;0<=Q;Q--){var ce=T.g=A[Q];z=Rn(ce,R,!0,T)&&z}if(ce=T.g=g,z=Rn(ce,R,!0,T)&&z,z=Rn(ce,R,!1,T)&&z,A)for(Q=0;Q<A.length;Q++)ce=T.g=A[Q],z=Rn(ce,R,!1,T)&&z}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var g=this.i,T;for(T in g.g){for(var A=g.g[T],R=0;R<A.length;R++)Ri(A[R]);delete g.g[T],g.h--}}this.F=null},ut.prototype.K=function(g,T,A,R){return this.i.add(String(g),T,!1,A,R)},ut.prototype.L=function(g,T,A,R){return this.i.add(String(g),T,!0,A,R)};function Rn(g,T,A,R){if(T=g.i.g[String(T)],!T)return!0;T=T.concat();for(var z=!0,Q=0;Q<T.length;++Q){var ce=T[Q];if(ce&&!ce.da&&ce.capture==A){var Ze=ce.listener,Qt=ce.ha||ce.src;ce.fa&&ji(g.i,ce),z=Ze.call(Qt,R)!==!1&&z}}return z&&!R.defaultPrevented}function Kt(g,T,A){if(typeof g=="function")A&&(g=S(g,A));else if(g&&typeof g.handleEvent=="function")g=S(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:h.setTimeout(g,T||0)}function _n(g){g.g=Kt(()=>{g.g=null,g.i&&(g.i=!1,_n(g))},g.l);const T=g.h;g.h=null,g.m.apply(null,T)}class J extends de{constructor(T,A){super(),this.m=T,this.l=A,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:_n(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ie(g){de.call(this),this.h=g,this.g={}}x(ie,de);var ae=[];function me(g){pe(g.g,function(T,A){this.g.hasOwnProperty(A)&&Zn(T)},g),g.g={}}ie.prototype.N=function(){ie.aa.N.call(this),me(this)},ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var we=h.JSON.stringify,ke=h.JSON.parse,Fe=class{stringify(g){return h.JSON.stringify(g,void 0)}parse(g){return h.JSON.parse(g,void 0)}};function Ke(){}Ke.prototype.h=null;function Ct(g){return g.h||(g.h=g.i())}function Ut(){}var mt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ue(){re.call(this,"d")}x(Ue,re);function He(){re.call(this,"c")}x(He,re);var nt={},qe=null;function Ve(){return qe=qe||new ut}nt.La="serverreachability";function ct(g){re.call(this,nt.La,g)}x(ct,re);function tn(g){const T=Ve();st(T,new ct(T))}nt.STAT_EVENT="statevent";function Go(g,T){re.call(this,nt.STAT_EVENT,g),this.stat=T}x(Go,re);function it(g){const T=Ve();st(T,new Go(T,g))}nt.Ma="timingevent";function Jt(g,T){re.call(this,nt.Ma,g),this.size=T}x(Jt,re);function Gt(g,T){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){g()},T)}function ei(){this.g=!0}ei.prototype.xa=function(){this.g=!1};function Xa(g,T,A,R,z,Q){g.info(function(){if(g.g)if(Q)for(var ce="",Ze=Q.split("&"),Qt=0;Qt<Ze.length;Qt++){var je=Ze[Qt].split("=");if(1<je.length){var on=je[0];je=je[1];var Xt=on.split("_");ce=2<=Xt.length&&Xt[1]=="type"?ce+(on+"="+je+"&"):ce+(on+"=redacted&")}}else ce=null;else ce=Q;return"XMLHTTP REQ ("+R+") [attempt "+z+"]: "+T+`
`+A+`
`+ce})}function Ed(g,T,A,R,z,Q,ce){g.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+z+"]: "+T+`
`+A+`
`+Q+" "+ce})}function zo(g,T,A,R){g.info(function(){return"XMLHTTP TEXT ("+T+"): "+Pr(g,A)+(R?" "+R:"")})}function Lu(g,T){g.info(function(){return"TIMEOUT: "+T})}ei.prototype.info=function(){};function Pr(g,T){if(!g.g)return T;if(!T)return null;try{var A=JSON.parse(T);if(A){for(g=0;g<A.length;g++)if(Array.isArray(A[g])){var R=A[g];if(!(2>R.length)){var z=R[1];if(Array.isArray(z)&&!(1>z.length)){var Q=z[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ce=1;ce<z.length;ce++)z[ce]=""}}}}return we(A)}catch{return T}}var Ho={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},io={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xi;function bi(){}x(bi,Ke),bi.prototype.g=function(){return new XMLHttpRequest},bi.prototype.i=function(){return{}},xi=new bi;function xn(g,T,A,R){this.j=g,this.i=T,this.l=A,this.R=R||1,this.U=new ie(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ot}function Ot(){this.i=null,this.g="",this.h=!1}var Wa={},bs={};function gi(g,T,A){g.L=1,g.v=Br(Fn(T)),g.m=A,g.P=!0,oo(g,null)}function oo(g,T){g.F=Date.now(),Vr(g),g.A=Fn(g.v);var A=g.A,R=g.R;Array.isArray(R)||(R=[String(R)]),il(A.i,"t",R),g.C=0,A=g.j.J,g.h=new Ot,g.g=Zu(g.j,A?T:null,!g.m),0<g.O&&(g.M=new J(S(g.Y,g,g.g),g.O)),T=g.U,A=g.g,R=g.ca;var z="readystatechange";Array.isArray(z)||(z&&(ae[0]=z.toString()),z=ae);for(var Q=0;Q<z.length;Q++){var ce=Is(A,z[Q],R||T.handleEvent,!1,T.h||T);if(!ce)break;T.g[ce.key]=ce}T=g.H?M(g.H):{},g.m?(g.u||(g.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,T)):(g.u="GET",g.g.ea(g.A,g.u,null,T)),tn(),Xa(g.i,g.u,g.A,g.l,g.R,g.m)}xn.prototype.ca=function(g){g=g.target;const T=this.M;T&&oi(g)==3?T.j():this.Y(g)},xn.prototype.Y=function(g){try{if(g==this.g)e:{const Xt=oi(this.g);var T=this.g.Ba();const ho=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||Hu(this.g)))){this.J||Xt!=4||T==7||(T==8||0>=ho?tn(3):tn(2)),$o(this);var A=this.g.Z();this.X=A;t:if(Uu(this)){var R=Hu(this.g);g="";var z=R.length,Q=oi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){un(this),Mi(this);var ce="";break t}this.h.i=new h.TextDecoder}for(T=0;T<z;T++)this.h.h=!0,g+=this.h.i.decode(R[T],{stream:!(Q&&T==z-1)});R.length=0,this.h.g+=g,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=A==200,Ed(this.i,this.u,this.A,this.l,this.R,Xt,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,Qt=this.g;if((Ze=Qt.g?Qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(Ze)){var je=Ze;break t}}je=null}if(A=je)zo(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lr(this,A);else{this.o=!1,this.s=3,it(12),un(this),Mi(this);break e}}if(this.P){A=!0;let cn;for(;!this.J&&this.C<ce.length;)if(cn=Ou(this,ce),cn==bs){Xt==4&&(this.s=4,it(14),A=!1),zo(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==Wa){this.s=4,it(15),zo(this.i,this.l,ce,"[Invalid Chunk]"),A=!1;break}else zo(this.i,this.l,cn,null),Lr(this,cn);if(Uu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||ce.length!=0||this.h.h||(this.s=1,it(16),A=!1),this.o=this.o&&A,!A)zo(this.i,this.l,ce,"[Invalid Chunked Response]"),un(this),Mi(this);else if(0<ce.length&&!this.W){this.W=!0;var on=this.j;on.g==this&&on.ba&&!on.M&&(on.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Kr(on),on.M=!0,it(11))}}else zo(this.i,this.l,ce,null),Lr(this,ce);Xt==4&&un(this),this.o&&!this.J&&(Xt==4?Qu(this.j,this):(this.o=!1,Vr(this)))}else Id(this.g),A==400&&0<ce.indexOf("Unknown SID")?(this.s=3,it(12)):(this.s=0,it(13)),un(this),Mi(this)}}}catch{}finally{}};function Uu(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Ou(g,T){var A=g.C,R=T.indexOf(`
`,A);return R==-1?bs:(A=Number(T.substring(A,R)),isNaN(A)?Wa:(R+=1,R+A>T.length?bs:(T=T.slice(R,R+A),g.C=R+A,T)))}xn.prototype.cancel=function(){this.J=!0,un(this)};function Vr(g){g.S=Date.now()+g.I,Bu(g,g.I)}function Bu(g,T){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Gt(S(g.ba,g),T)}function $o(g){g.B&&(h.clearTimeout(g.B),g.B=null)}xn.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(Lu(this.i,this.A),this.L!=2&&(tn(),it(17)),un(this),this.s=2,Mi(this)):Bu(this,this.S-g)};function Mi(g){g.j.G==0||g.J||Qu(g.j,g)}function un(g){$o(g);var T=g.M;T&&typeof T.ma=="function"&&T.ma(),g.M=null,me(g.U),g.g&&(T=g.g,g.g=null,T.abort(),T.ma())}function Lr(g,T){try{var A=g.j;if(A.G!=0&&(A.g==g||Za(A.h,g))){if(!g.K&&Za(A.h,g)&&A.G==3){try{var R=A.Da.g.parse(T)}catch{R=null}if(Array.isArray(R)&&R.length==3){var z=R;if(z[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<g.F)qs(A),Bs(A);else break e;ll(A),it(18)}}else A.za=z[1],0<A.za-A.T&&37500>z[2]&&A.F&&A.v==0&&!A.C&&(A.C=Gt(S(A.Za,A),6e3));if(1>=Ns(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else fo(A,11)}else if((g.K||A.g==g)&&qs(A),!te(T))for(z=A.Da.g.parse(T),T=0;T<z.length;T++){let je=z[T];if(A.T=je[0],je=je[1],A.G==2)if(je[0]=="c"){A.K=je[1],A.ia=je[2];const on=je[3];on!=null&&(A.la=on,A.j.info("VER="+A.la));const Xt=je[4];Xt!=null&&(A.Aa=Xt,A.j.info("SVER="+A.Aa));const ho=je[5];ho!=null&&typeof ho=="number"&&0<ho&&(R=1.5*ho,A.L=R,A.j.info("backChannelRequestTimeoutMs_="+R)),R=A;const cn=g.g;if(cn){const Ui=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ui){var Q=R.h;Q.g||Ui.indexOf("spdy")==-1&&Ui.indexOf("quic")==-1&&Ui.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(ks(Q,Q.h),Q.h=null))}if(R.D){const cl=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;cl&&(R.ya=cl,_t(R.I,R.D,cl))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-g.F,A.j.info("Handshake RTT: "+A.R+"ms")),R=A;var ce=g;if(R.qa=Wu(R,R.J?R.ia:null,R.W),ce.K){bn(R.h,ce);var Ze=ce,Qt=R.L;Qt&&(Ze.I=Qt),Ze.B&&($o(Ze),Vr(Ze)),R.g=ce}else Ku(R);0<A.i.length&&Fs(A)}else je[0]!="stop"&&je[0]!="close"||fo(A,7);else A.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?fo(A,7):sl(A):je[0]!="noop"&&A.l&&A.l.ta(je),A.v=0)}}tn(4)}catch{}}var Fu=class{constructor(g,T){this.g=g,this.map=T}};function ro(g){this.l=g||10,h.PerformanceNavigationTiming?(g=h.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ms(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ns(g){return g.h?1:g.g?g.g.size:0}function Za(g,T){return g.h?g.h==T:g.g?g.g.has(T):!1}function ks(g,T){g.g?g.g.add(T):g.h=T}function bn(g,T){g.h&&g.h==T?g.h=null:g.g&&g.g.has(T)&&g.g.delete(T)}ro.prototype.cancel=function(){if(this.i=ja(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function ja(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let T=g.i;for(const A of g.g.values())T=T.concat(A.D);return T}return O(g.i)}function Sd(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(m(g)){for(var T=[],A=g.length,R=0;R<A;R++)T.push(g[R]);return T}T=[],A=0;for(R in g)T[A++]=g[R];return T}function Ds(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(m(g)||typeof g=="string"){var T=[];g=g.length;for(var A=0;A<g;A++)T.push(A);return T}T=[],A=0;for(const R in g)T[A++]=R;return T}}}function el(g,T){if(g.forEach&&typeof g.forEach=="function")g.forEach(T,void 0);else if(m(g)||typeof g=="string")Array.prototype.forEach.call(g,T,void 0);else for(var A=Ds(g),R=Sd(g),z=R.length,Q=0;Q<z;Q++)T.call(void 0,R[Q],A&&A[Q],g)}var Ur=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ad(g,T){if(g){g=g.split("&");for(var A=0;A<g.length;A++){var R=g[A].indexOf("="),z=null;if(0<=R){var Q=g[A].substring(0,R);z=g[A].substring(R+1)}else Q=g[A];T(Q,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function zt(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof zt){this.h=g.h,Or(this,g.j),this.o=g.o,this.g=g.g,Yo(this,g.s),this.l=g.l;var T=g.i,A=new ao;A.i=T.i,T.g&&(A.g=new Map(T.g),A.h=T.h),so(this,A),this.m=g.m}else g&&(T=String(g).match(Ur))?(this.h=!1,Or(this,T[1]||"",!0),this.o=ti(T[2]||""),this.g=ti(T[3]||"",!0),Yo(this,T[4]),this.l=ti(T[5]||"",!0),so(this,T[6]||"",!0),this.m=ti(T[7]||"")):(this.h=!1,this.i=new ao(null,this.h))}zt.prototype.toString=function(){var g=[],T=this.j;T&&g.push(Fr(T,tl,!0),":");var A=this.g;return(A||T=="file")&&(g.push("//"),(T=this.o)&&g.push(Fr(T,tl,!0),"@"),g.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&g.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(Fr(A,A.charAt(0)=="/"?Cd:nl,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",Fr(A,Ps)),g.join("")};function Fn(g){return new zt(g)}function Or(g,T,A){g.j=A?ti(T,!0):T,g.j&&(g.j=g.j.replace(/:$/,""))}function Yo(g,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);g.s=T}else g.s=null}function so(g,T,A){T instanceof ao?(g.i=T,Gu(g.i,g.h)):(A||(T=Fr(T,wd)),g.i=new ao(T,g.h))}function _t(g,T,A){g.i.set(T,A)}function Br(g){return _t(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function ti(g,T){return g?T?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Fr(g,T,A){return typeof g=="string"?(g=encodeURI(g).replace(T,qu),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function qu(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var tl=/[#\/\?@]/g,nl=/[#\?:]/g,Cd=/[#\?]/g,wd=/[#\?@]/g,Ps=/#/g;function ao(g,T){this.h=this.g=null,this.i=g||null,this.j=!!T}function ni(g){g.g||(g.g=new Map,g.h=0,g.i&&Ad(g.i,function(T,A){g.add(decodeURIComponent(T.replace(/\+/g," ")),A)}))}t=ao.prototype,t.add=function(g,T){ni(this),this.i=null,g=Ni(this,g);var A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(T),this.h+=1,this};function lo(g,T){ni(g),T=Ni(g,T),g.g.has(T)&&(g.i=null,g.h-=g.g.get(T).length,g.g.delete(T))}function uo(g,T){return ni(g),T=Ni(g,T),g.g.has(T)}t.forEach=function(g,T){ni(this),this.g.forEach(function(A,R){A.forEach(function(z){g.call(T,z,R,this)},this)},this)},t.na=function(){ni(this);const g=Array.from(this.g.values()),T=Array.from(this.g.keys()),A=[];for(let R=0;R<T.length;R++){const z=g[R];for(let Q=0;Q<z.length;Q++)A.push(T[R])}return A},t.V=function(g){ni(this);let T=[];if(typeof g=="string")uo(this,g)&&(T=T.concat(this.g.get(Ni(this,g))));else{g=Array.from(this.g.values());for(let A=0;A<g.length;A++)T=T.concat(g[A])}return T},t.set=function(g,T){return ni(this),this.i=null,g=Ni(this,g),uo(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[T]),this.h+=1,this},t.get=function(g,T){return g?(g=this.V(g),0<g.length?String(g[0]):T):T};function il(g,T,A){lo(g,T),0<A.length&&(g.i=null,g.g.set(Ni(g,T),O(A)),g.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],T=Array.from(this.g.keys());for(var A=0;A<T.length;A++){var R=T[A];const Q=encodeURIComponent(String(R)),ce=this.V(R);for(R=0;R<ce.length;R++){var z=Q;ce[R]!==""&&(z+="="+encodeURIComponent(String(ce[R]))),g.push(z)}}return this.i=g.join("&")};function Ni(g,T){return T=String(T),g.j&&(T=T.toLowerCase()),T}function Gu(g,T){T&&!g.j&&(ni(g),g.i=null,g.g.forEach(function(A,R){var z=R.toLowerCase();R!=z&&(lo(this,R),il(this,z,A))},g)),g.j=T}function qr(g,T){const A=new ei;if(h.Image){const R=new Image;R.onload=I(ii,A,"TestLoadImage: loaded",!0,T,R),R.onerror=I(ii,A,"TestLoadImage: error",!1,T,R),R.onabort=I(ii,A,"TestLoadImage: abort",!1,T,R),R.ontimeout=I(ii,A,"TestLoadImage: timeout",!1,T,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=g}else T(!1)}function yi(g,T){const A=new ei,R=new AbortController,z=setTimeout(()=>{R.abort(),ii(A,"TestPingServer: timeout",!1,T)},1e4);fetch(g,{signal:R.signal}).then(Q=>{clearTimeout(z),Q.ok?ii(A,"TestPingServer: ok",!0,T):ii(A,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(z),ii(A,"TestPingServer: error",!1,T)})}function ii(g,T,A,R,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),R(A)}catch{}}function Gr(){this.g=new Fe}function ki(g,T,A){const R=A||"";try{el(g,function(z,Q){let ce=z;p(z)&&(ce=we(z)),T.push(R+Q+"="+encodeURIComponent(ce))})}catch(z){throw T.push(R+"type="+encodeURIComponent("_badmap")),z}}function Ko(g){this.l=g.Ub||null,this.j=g.eb||!1}x(Ko,Ke),Ko.prototype.g=function(){return new co(this.l,this.j)},Ko.prototype.i=function(g){return function(){return g}}({});function co(g,T){ut.call(this),this.D=g,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(co,ut),t=co.prototype,t.open=function(g,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=T,this.readyState=1,Pi(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(T.body=g),(this.D||h).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Di(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ol(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function ol(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var T=g.value?g.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!g.done}))&&(this.response=this.responseText+=T)}g.done?Di(this):Pi(this),this.readyState==3&&ol(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Di(this))},t.Qa=function(g){this.g&&(this.response=g,Di(this))},t.ga=function(){this.g&&Di(this)};function Di(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Pi(g)}t.setRequestHeader=function(g,T){this.u.append(g,T)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],T=this.h.entries();for(var A=T.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=T.next();return g.join(`\r
`)};function Pi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(co.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function rl(g){let T="";return pe(g,function(A,R){T+=R,T+=":",T+=A,T+=`\r
`}),T}function nn(g,T,A){e:{for(R in A){var R=!1;break e}R=!0}R||(A=rl(A),typeof g=="string"?A!=null&&encodeURIComponent(String(A)):_t(g,T,A))}function ft(g){ut.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(ft,ut);var Vs=/^https?$/i,zr=["POST","PUT"];t=ft.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,T,A,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);T=T?T.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xi.g(),this.v=this.o?Ct(this.o):Ct(xi),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(T,String(g),!0),this.B=!1}catch(Q){zu(this,Q);return}if(g=A||"",A=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var z in R)A.set(z,R[z]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Q of R.keys())A.set(Q,R.get(Q));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(A.keys()).find(Q=>Q.toLowerCase()=="content-type"),z=h.FormData&&g instanceof h.FormData,!(0<=Array.prototype.indexOf.call(zr,T,void 0))||R||z||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ce]of A)this.g.setRequestHeader(Q,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hr(this),this.u=!0,this.g.send(g),this.u=!1}catch(Q){zu(this,Q)}};function zu(g,T){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=T,g.m=5,Ls(g),Vi(g)}function Ls(g){g.A||(g.A=!0,st(g,"complete"),st(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,st(this,"complete"),st(this,"abort"),Vi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vi(this,!0)),ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Us(this):this.bb())},t.bb=function(){Us(this)};function Us(g){if(g.h&&typeof c<"u"&&(!g.v[1]||oi(g)!=4||g.Z()!=2)){if(g.u&&oi(g)==4)Kt(g.Ea,0,g);else if(st(g,"readystatechange"),oi(g)==4){g.h=!1;try{const ce=g.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var A;if(!(A=T)){var R;if(R=ce===0){var z=String(g.D).match(Ur)[1]||null;!z&&h.self&&h.self.location&&(z=h.self.location.protocol.slice(0,-1)),R=!Vs.test(z?z.toLowerCase():"")}A=R}if(A)st(g,"complete"),st(g,"success");else{g.m=6;try{var Q=2<oi(g)?g.g.statusText:""}catch{Q=""}g.l=Q+" ["+g.Z()+"]",Ls(g)}}finally{Vi(g)}}}}function Vi(g,T){if(g.g){Hr(g);const A=g.g,R=g.v[0]?()=>{}:null;g.g=null,g.v=null,T||st(g,"ready");try{A.onreadystatechange=R}catch{}}}function Hr(g){g.I&&(h.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function oi(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<oi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var T=this.g.responseText;return g&&T.indexOf(g)==0&&(T=T.substring(g.length)),ke(T)}};function Hu(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Id(g){const T={};g=(g.g&&2<=oi(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<g.length;R++){if(te(g[R]))continue;var A=N(g[R]);const z=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const Q=T[z]||[];T[z]=Q,Q.push(A)}k(T,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $r(g,T,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||T}function Os(g){this.Aa=0,this.i=[],this.j=new ei,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$r("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$r("baseRetryDelayMs",5e3,g),this.cb=$r("retryDelaySeedMs",1e4,g),this.Wa=$r("forwardChannelMaxRetries",2,g),this.wa=$r("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new ro(g&&g.concurrentRequestLimit),this.Da=new Gr,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Os.prototype,t.la=8,t.G=1,t.connect=function(g,T,A,R){it(0),this.W=g,this.H=T||{},A&&R!==void 0&&(this.H.OSID=A,this.H.OAID=R),this.F=this.X,this.I=Wu(this,null,this.W),Fs(this)};function sl(g){if($u(g),g.G==3){var T=g.U++,A=Fn(g.I);if(_t(A,"SID",g.K),_t(A,"RID",T),_t(A,"TYPE","terminate"),Yr(g,A),T=new xn(g,g.j,T),T.L=2,T.v=Br(Fn(A)),A=!1,h.navigator&&h.navigator.sendBeacon)try{A=h.navigator.sendBeacon(T.v.toString(),"")}catch{}!A&&h.Image&&(new Image().src=T.v,A=!0),A||(T.g=Zu(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Vr(T)}Xu(g)}function Bs(g){g.g&&(Kr(g),g.g.cancel(),g.g=null)}function $u(g){Bs(g),g.u&&(h.clearTimeout(g.u),g.u=null),qs(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&h.clearTimeout(g.s),g.s=null)}function Fs(g){if(!Ms(g.h)&&!g.s){g.s=!0;var T=g.Ga;he||U(),ye||(he(),ye=!0),Le.add(T,g),g.B=0}}function Rd(g,T){return Ns(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=T.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Gt(S(g.Ga,g,T),ul(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const z=new xn(this,this.j,g);let Q=this.o;if(this.S&&(Q?(Q=M(Q),V(Q,this.S)):Q=this.S),this.m!==null||this.O||(z.H=Q,Q=null),this.P)e:{for(var T=0,A=0;A<this.i.length;A++){t:{var R=this.i[A];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(T+=R,4096<T){T=A;break e}if(T===4096||A===this.i.length-1){T=A+1;break e}}T=1e3}else T=1e3;T=Yu(this,z,T),A=Fn(this.I),_t(A,"RID",g),_t(A,"CVER",22),this.D&&_t(A,"X-HTTP-Session-Id",this.D),Yr(this,A),Q&&(this.O?T="headers="+encodeURIComponent(String(rl(Q)))+"&"+T:this.m&&nn(A,this.m,Q)),ks(this.h,z),this.Ua&&_t(A,"TYPE","init"),this.P?(_t(A,"$req",T),_t(A,"SID","null"),z.T=!0,gi(z,A,null)):gi(z,A,T),this.G=2}}else this.G==3&&(g?al(this,g):this.i.length==0||Ms(this.h)||al(this))};function al(g,T){var A;T?A=T.l:A=g.U++;const R=Fn(g.I);_t(R,"SID",g.K),_t(R,"RID",A),_t(R,"AID",g.T),Yr(g,R),g.m&&g.o&&nn(R,g.m,g.o),A=new xn(g,g.j,A,g.B+1),g.m===null&&(A.H=g.o),T&&(g.i=T.D.concat(g.i)),T=Yu(g,A,1e3),A.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),ks(g.h,A),gi(A,R,T)}function Yr(g,T){g.H&&pe(g.H,function(A,R){_t(T,R,A)}),g.l&&el({},function(A,R){_t(T,R,A)})}function Yu(g,T,A){A=Math.min(g.i.length,A);var R=g.l?S(g.l.Na,g.l,g):null;e:{var z=g.i;let Q=-1;for(;;){const ce=["count="+A];Q==-1?0<A?(Q=z[0].g,ce.push("ofs="+Q)):Q=0:ce.push("ofs="+Q);let Ze=!0;for(let Qt=0;Qt<A;Qt++){let je=z[Qt].g;const on=z[Qt].map;if(je-=Q,0>je)Q=Math.max(0,z[Qt].g-100),Ze=!1;else try{ki(on,ce,"req"+je+"_")}catch{R&&R(on)}}if(Ze){R=ce.join("&");break e}}}return g=g.i.splice(0,A),T.D=g,R}function Ku(g){if(!g.g&&!g.u){g.Y=1;var T=g.Fa;he||U(),ye||(he(),ye=!0),Le.add(T,g),g.v=0}}function ll(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Gt(S(g.Fa,g),ul(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,Ju(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Gt(S(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,it(10),Bs(this),Ju(this))};function Kr(g){g.A!=null&&(h.clearTimeout(g.A),g.A=null)}function Ju(g){g.g=new xn(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var T=Fn(g.qa);_t(T,"RID","rpc"),_t(T,"SID",g.K),_t(T,"AID",g.T),_t(T,"CI",g.F?"0":"1"),!g.F&&g.ja&&_t(T,"TO",g.ja),_t(T,"TYPE","xmlhttp"),Yr(g,T),g.m&&g.o&&nn(T,g.m,g.o),g.L&&(g.g.I=g.L);var A=g.g;g=g.ia,A.L=1,A.v=Br(Fn(T)),A.m=null,A.P=!0,oo(A,g)}t.Za=function(){this.C!=null&&(this.C=null,Bs(this),ll(this),it(19))};function qs(g){g.C!=null&&(h.clearTimeout(g.C),g.C=null)}function Qu(g,T){var A=null;if(g.g==T){qs(g),Kr(g),g.g=null;var R=2}else if(Za(g.h,T))A=T.D,bn(g.h,T),R=1;else return;if(g.G!=0){if(T.o)if(R==1){A=T.m?T.m.length:0,T=Date.now()-T.F;var z=g.B;R=Ve(),st(R,new Jt(R,A)),Fs(g)}else Ku(g);else if(z=T.s,z==3||z==0&&0<T.X||!(R==1&&Rd(g,T)||R==2&&ll(g)))switch(A&&0<A.length&&(T=g.h,T.i=T.i.concat(A)),z){case 1:fo(g,5);break;case 4:fo(g,10);break;case 3:fo(g,6);break;default:fo(g,2)}}}function ul(g,T){let A=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(A*=2),A*T}function fo(g,T){if(g.j.info("Error code "+T),T==2){var A=S(g.fb,g),R=g.Xa;const z=!R;R=new zt(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Or(R,"https"),Br(R),z?qr(R.toString(),A):yi(R.toString(),A)}else it(2);g.G=0,g.l&&g.l.sa(T),Xu(g),$u(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function Xu(g){if(g.G=0,g.ka=[],g.l){const T=ja(g.h);(T.length!=0||g.i.length!=0)&&(F(g.ka,T),F(g.ka,g.i),g.h.i.length=0,O(g.i),g.i.length=0),g.l.ra()}}function Wu(g,T,A){var R=A instanceof zt?Fn(A):new zt(A);if(R.g!="")T&&(R.g=T+"."+R.g),Yo(R,R.s);else{var z=h.location;R=z.protocol,T=T?T+"."+z.hostname:z.hostname,z=+z.port;var Q=new zt(null);R&&Or(Q,R),T&&(Q.g=T),z&&Yo(Q,z),A&&(Q.l=A),R=Q}return A=g.D,T=g.ya,A&&T&&_t(R,A,T),_t(R,"VER",g.la),Yr(g,R),R}function Zu(g,T,A){if(T&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=g.Ca&&!g.pa?new ft(new Ko({eb:A})):new ft(g.pa),T.Ha(g.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ju(){}t=ju.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Gs(){}Gs.prototype.g=function(g,T){return new Mn(g,T)};function Mn(g,T){ut.call(this),this.g=new Os(T),this.l=g,this.h=T&&T.messageUrlParams||null,g=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(g?g["X-WebChannel-Content-Type"]=T.messageContentType:g={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(g?g["X-WebChannel-Client-Profile"]=T.va:g={"X-WebChannel-Client-Profile":T.va}),this.g.S=g,(g=T&&T.Sb)&&!te(g)&&(this.g.m=g),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!te(T)&&(this.g.D=T,g=this.h,g!==null&&T in g&&(g=this.h,T in g&&delete g[T])),this.j=new Li(this)}x(Mn,ut),Mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){sl(this.g)},Mn.prototype.o=function(g){var T=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.u&&(A={},A.__data__=we(g),g=A);T.i.push(new Fu(T.Ya++,g)),T.G==3&&Fs(T)},Mn.prototype.N=function(){this.g.l=null,delete this.j,sl(this.g),delete this.g,Mn.aa.N.call(this)};function ec(g){Ue.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var T=g.__sm__;if(T){e:{for(const A in T){g=A;break e}g=void 0}(this.i=g)&&(g=this.i,T=T!==null&&g in T?T[g]:void 0),this.data=T}else this.data=g}x(ec,Ue);function tc(){He.call(this),this.status=1}x(tc,He);function Li(g){this.g=g}x(Li,ju),Li.prototype.ua=function(){st(this.g,"a")},Li.prototype.ta=function(g){st(this.g,new ec(g))},Li.prototype.sa=function(g){st(this.g,new tc)},Li.prototype.ra=function(){st(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,RA=function(){return new Gs},IA=function(){return Ve()},wA=nt,am={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ho.NO_ERROR=0,Ho.TIMEOUT=8,Ho.HTTP_ERROR=6,Ef=Ho,io.COMPLETE="complete",CA=io,Ut.EventType=mt,mt.OPEN="a",mt.CLOSE="b",mt.ERROR="c",mt.MESSAGE="d",ut.prototype.listen=ut.prototype.K,nu=Ut,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,AA=ft}).apply(typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{});const JE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ya="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Bm("@firebase/firestore");function tu(){return ys.logLevel}function ve(t,...e){if(ys.logLevel<=We.DEBUG){const n=e.map(Zm);ys.debug(`Firestore (${Ya}): ${t}`,...n)}}function Uo(t,...e){if(ys.logLevel<=We.ERROR){const n=e.map(Zm);ys.error(`Firestore (${Ya}): ${t}`,...n)}}function Ma(t,...e){if(ys.logLevel<=We.WARN){const n=e.map(Zm);ys.warn(`Firestore (${Ya}): ${t}`,...n)}}function Zm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t="Unexpected state"){const e=`FIRESTORE (${Ya}) INTERNAL ASSERTION FAILED: `+t;throw Uo(e),new Error(e)}function vt(t,e){t||Ne()}function Pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Fo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(An.UNAUTHENTICATED))}shutdown(){}}class p4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class m4{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){vt(this.o===void 0);let i=this.i;const r=m=>this.i!==i?(i=this.i,n(m)):Promise.resolve();let a=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new wr,e.enqueueRetryable(()=>r(this.currentUser))};const c=()=>{const m=a;e.enqueueRetryable(async()=>{await m.promise,await r(this.currentUser)})},h=m=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>h(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new wr)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(vt(typeof i.accessToken=="string"),new xA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vt(e===null||typeof e=="string"),new An(e)}}class g4{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=An.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class y4{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new g4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(An.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class v4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){vt(this.o===void 0);const i=a=>{a.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const r=a=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>r(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?r(a):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(vt(typeof n.token=="string"),this.R=n.token,new v4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=T4(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<n&&(i+=e.charAt(r[a]%e.length))}return i}}function rt(t,e){return t<e?-1:t>e?1:0}function Na(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return en.fromMillis(Date.now())}static fromDate(e){return en.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new en(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.timestamp=e}static fromTimestamp(e){return new De(e)}static min(){return new De(new en(0,0))}static max(){return new De(new en(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ne(),i===void 0?i=e.length-n:i>e.length-n&&Ne(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return yu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yu?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const a=e.get(r),c=n.get(r);if(a<c)return-1;if(a>c)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Nt extends yu{construct(e,n,i){return new Nt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ee(le.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Nt(n)}static emptyPath(){return new Nt([])}}const E4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends yu{construct(e,n,i){return new mn(e,n,i)}static isValidIdentifier(e){return E4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mn(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const a=()=>{if(i.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new Ee(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[r+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ee(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(i+=h,r++):(a(),r++)}if(a(),c)throw new Ee(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(n)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(Nt.fromString(e))}static fromName(e){return new Ce(Nt.fromString(e).popFirst(5))}static empty(){return new Ce(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new Nt(e.slice()))}}function S4(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=De.fromTimestamp(i===1e9?new en(n+1,0):new en(n,i));return new xr(r,Ce.empty(),e)}function A4(t){return new xr(t.readTime,t.key,-1)}class xr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new xr(De.min(),Ce.empty(),-1)}static max(){return new xr(De.max(),Ce.empty(),-1)}}function C4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(t.documentKey,e.documentKey),n!==0?n:rt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class I4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==w4)throw t;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ue.reject(n)}static resolve(e){return new ue((n,i)=>{n(e)})}static reject(e){return new ue((n,i)=>{i(e)})}static waitFor(e){return new ue((n,i)=>{let r=0,a=0,c=!1;e.forEach(h=>{++r,h.next(()=>{++a,c&&a===r&&n()},m=>i(m))}),c=!0,a===r&&n()})}static or(e){let n=ue.resolve(!1);for(const i of e)n=n.next(r=>r?ue.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,a)=>{i.push(n.call(this,r,a))}),this.waitFor(i)}static mapArray(e,n){return new ue((i,r)=>{const a=e.length,c=new Array(a);let h=0;for(let m=0;m<a;m++){const p=m;n(e[p]).next(v=>{c[p]=v,++h,h===a&&i(c)},v=>r(v))}})}static doWhile(e,n){return new ue((i,r)=>{const a=()=>{e()===!0?n().next(()=>{a()},r):i()};a()})}}function R4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Nu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}jm.oe=-1;function od(t){return t==null}function Bf(t){return t===0&&1/t==-1/0}function x4(t){return typeof t=="number"&&Number.isInteger(t)&&!Bf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function MA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new Dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cf(this.root,e,this.comparator,!1)}getReverseIterator(){return new cf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cf(this.root,e,this.comparator,!0)}}class cf{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,i,r,a){this.key=e,this.value=n,this.color=i??pn.RED,this.left=r??pn.EMPTY,this.right=a??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,a){return new pn(e??this.key,n??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,n,i),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return pn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,n,i,r,a){return this}insert(e,n,i){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new XE(this.data.getIterator())}getIteratorFrom(e){return new XE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gn(this.comparator);return n.data=e,n}}class XE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new Xn([])}unionWith(e){let n=new gn(mn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Na(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new NA("Invalid base64 string: "+a):a}}(e);return new vn(n)}static fromUint8Array(e){const n=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(e);return new vn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vn.EMPTY_BYTE_STRING=new vn("");const b4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(t){if(vt(!!t),typeof t=="string"){let e=0;const n=b4.exec(t);if(vt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:qt(t.seconds),nanos:qt(t.nanos)}}function qt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vs(t){return typeof t=="string"?vn.fromBase64String(t):vn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function tg(t){const e=t.mapValue.fields.__previous_value__;return eg(e)?tg(e):e}function vu(t){const e=br(t.mapValue.fields.__local_write_time__.timestampValue);return new en(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n,i,r,a,c,h,m,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=p}}class _u{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _u("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff={mapValue:{}};function _s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?eg(t)?4:k4(t)?9007199254740991:N4(t)?10:11:Ne()}function Wi(t,e){if(t===e)return!0;const n=_s(t);if(n!==_s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vu(t).isEqual(vu(e));case 3:return function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=br(r.timestampValue),h=br(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,a){return vs(r.bytesValue).isEqual(vs(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,a){return qt(r.geoPointValue.latitude)===qt(a.geoPointValue.latitude)&&qt(r.geoPointValue.longitude)===qt(a.geoPointValue.longitude)}(t,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return qt(r.integerValue)===qt(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=qt(r.doubleValue),h=qt(a.doubleValue);return c===h?Bf(c)===Bf(h):isNaN(c)&&isNaN(h)}return!1}(t,e);case 9:return Na(t.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(QE(c)!==QE(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!Wi(c[m],h[m])))return!1;return!0}(t,e);default:return Ne()}}function Tu(t,e){return(t.values||[]).find(n=>Wi(n,e))!==void 0}function ka(t,e){if(t===e)return 0;const n=_s(t),i=_s(e);if(n!==i)return rt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(t.booleanValue,e.booleanValue);case 2:return function(a,c){const h=qt(a.integerValue||a.doubleValue),m=qt(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(t,e);case 3:return WE(t.timestampValue,e.timestampValue);case 4:return WE(vu(t),vu(e));case 5:return rt(t.stringValue,e.stringValue);case 6:return function(a,c){const h=vs(a),m=vs(c);return h.compareTo(m)}(t.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),m=c.split("/");for(let p=0;p<h.length&&p<m.length;p++){const v=rt(h[p],m[p]);if(v!==0)return v}return rt(h.length,m.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,c){const h=rt(qt(a.latitude),qt(c.latitude));return h!==0?h:rt(qt(a.longitude),qt(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ZE(t.arrayValue,e.arrayValue);case 10:return function(a,c){var h,m,p,v;const E=a.fields||{},S=c.fields||{},I=(h=E.value)===null||h===void 0?void 0:h.arrayValue,x=(m=S.value)===null||m===void 0?void 0:m.arrayValue,O=rt(((p=I==null?void 0:I.values)===null||p===void 0?void 0:p.length)||0,((v=x==null?void 0:x.values)===null||v===void 0?void 0:v.length)||0);return O!==0?O:ZE(I,x)}(t.mapValue,e.mapValue);case 11:return function(a,c){if(a===ff.mapValue&&c===ff.mapValue)return 0;if(a===ff.mapValue)return 1;if(c===ff.mapValue)return-1;const h=a.fields||{},m=Object.keys(h),p=c.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const S=rt(m[E],v[E]);if(S!==0)return S;const I=ka(h[m[E]],p[v[E]]);if(I!==0)return I}return rt(m.length,v.length)}(t.mapValue,e.mapValue);default:throw Ne()}}function WE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rt(t,e);const n=br(t),i=br(e),r=rt(n.seconds,i.seconds);return r!==0?r:rt(n.nanos,i.nanos)}function ZE(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const a=ka(n[r],i[r]);if(a)return a}return rt(n.length,i.length)}function Da(t){return lm(t)}function lm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=br(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const a of n.values||[])r?r=!1:i+=",",i+=lm(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",a=!0;for(const c of i)a?a=!1:r+=",",r+=`${c}:${lm(n.fields[c])}`;return r+"}"}(t.mapValue):Ne()}function um(t){return!!t&&"integerValue"in t}function ng(t){return!!t&&"arrayValue"in t}function jE(t){return!!t&&"nullValue"in t}function e0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Sf(t){return!!t&&"mapValue"in t}function N4(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function cu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Cs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=cu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function k4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Sf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(n)}setAll(e){let n=mn.emptyPath(),i={},r=[];e.forEach((c,h)=>{if(!n.isImmediateParentOf(h)){const m=this.getFieldsMap(n);this.applyChanges(m,i,r),i={},r=[],n=h.popLast()}c?i[h.lastSegment()]=cu(c):r.push(h.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,i,r)}delete(e){const n=this.field(e.popLast());Sf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Sf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Cs(n,(r,a)=>e[r]=a);for(const r of i)delete e[r]}clone(){return new On(cu(this.value))}}function kA(t){const e=[];return Cs(t.fields,(n,i)=>{const r=new mn([n]);if(Sf(i)){const a=kA(i.mapValue).fields;if(a.length===0)e.push(r);else for(const c of a)e.push(r.child(c))}else e.push(r)}),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n,i,r,a,c,h){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Cn(e,0,De.min(),De.min(),De.min(),On.empty(),0)}static newFoundDocument(e,n,i,r){return new Cn(e,1,n,De.min(),i,r,0)}static newNoDocument(e,n){return new Cn(e,2,n,De.min(),De.min(),On.empty(),0)}static newUnknownDocument(e,n){return new Cn(e,3,n,De.min(),De.min(),On.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){this.position=e,this.inclusive=n}}function t0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const a=e[r],c=t.position[r];if(a.field.isKeyField()?i=Ce.comparator(Ce.fromName(c.referenceValue),n.key):i=ka(c,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function n0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Wi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n="asc"){this.field=e,this.dir=n}}function D4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{}class jt extends DA{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new V4(e,n,i):n==="array-contains"?new O4(e,i):n==="in"?new B4(e,i):n==="not-in"?new F4(e,i):n==="array-contains-any"?new q4(e,i):new jt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new L4(e,i):new U4(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ka(n,this.value)):n!==null&&_s(this.value)===_s(n)&&this.matchesComparison(ka(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zi extends DA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zi(e,n)}matches(e){return PA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function PA(t){return t.op==="and"}function VA(t){return P4(t)&&PA(t)}function P4(t){for(const e of t.filters)if(e instanceof Zi)return!1;return!0}function cm(t){if(t instanceof jt)return t.field.canonicalString()+t.op.toString()+Da(t.value);if(VA(t))return t.filters.map(e=>cm(e)).join(",");{const e=t.filters.map(n=>cm(n)).join(",");return`${t.op}(${e})`}}function LA(t,e){return t instanceof jt?function(i,r){return r instanceof jt&&i.op===r.op&&i.field.isEqual(r.field)&&Wi(i.value,r.value)}(t,e):t instanceof Zi?function(i,r){return r instanceof Zi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((a,c,h)=>a&&LA(c,r.filters[h]),!0):!1}(t,e):void Ne()}function UA(t){return t instanceof jt?function(n){return`${n.field.canonicalString()} ${n.op} ${Da(n.value)}`}(t):t instanceof Zi?function(n){return n.op.toString()+" {"+n.getFilters().map(UA).join(" ,")+"}"}(t):"Filter"}class V4 extends jt{constructor(e,n,i){super(e,n,i),this.key=Ce.fromName(i.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class L4 extends jt{constructor(e,n){super(e,"in",n),this.keys=OA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class U4 extends jt{constructor(e,n){super(e,"not-in",n),this.keys=OA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function OA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ce.fromName(i.referenceValue))}class O4 extends jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ng(n)&&Tu(n.arrayValue,this.value)}}class B4 extends jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Tu(this.value.arrayValue,n)}}class F4 extends jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Tu(this.value.arrayValue,n)}}class q4 extends jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ng(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Tu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e,n=null,i=[],r=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=c,this.endAt=h,this.ue=null}}function i0(t,e=null,n=[],i=[],r=null,a=null,c=null){return new G4(t,e,n,i,r,a,c)}function ig(t){const e=Pe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>cm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),od(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Da(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Da(i)).join(",")),e.ue=n}return e.ue}function og(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!D4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!n0(t.startAt,e.startAt)&&n0(t.endAt,e.endAt)}function fm(t){return Ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n=null,i=[],r=[],a=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=m,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function z4(t,e,n,i,r,a,c,h){return new rd(t,e,n,i,r,a,c,h)}function sd(t){return new rd(t)}function o0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function H4(t){return t.collectionGroup!==null}function fu(t){const e=Pe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new gn(mn.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new qf(a,i))}),n.has(mn.keyField().canonicalString())||e.ce.push(new qf(mn.keyField(),i))}return e.ce}function Ji(t){const e=Pe(t);return e.le||(e.le=$4(e,fu(t))),e.le}function $4(t,e){if(t.limitType==="F")return i0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const a=r.dir==="desc"?"asc":"desc";return new qf(r.field,a)});const n=t.endAt?new Ff(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ff(t.startAt.position,t.startAt.inclusive):null;return i0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function dm(t,e,n){return new rd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ad(t,e){return og(Ji(t),Ji(e))&&t.limitType===e.limitType}function BA(t){return`${ig(Ji(t))}|lt:${t.limitType}`}function va(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>UA(r)).join(", ")}]`),od(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Da(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Da(r)).join(",")),`Target(${i})`}(Ji(t))}; limitType=${t.limitType})`}function ld(t,e){return e.isFoundDocument()&&function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ce.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(t,e)&&function(i,r){for(const a of fu(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(c,h,m){const p=t0(c,h,m);return c.inclusive?p<=0:p<0}(i.startAt,fu(i),r)||i.endAt&&!function(c,h,m){const p=t0(c,h,m);return c.inclusive?p>=0:p>0}(i.endAt,fu(i),r))}(t,e)}function Y4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function FA(t){return(e,n)=>{let i=!1;for(const r of fu(t)){const a=K4(r,e,n);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function K4(t,e,n){const i=t.field.isKeyField()?Ce.comparator(e.key,n.key):function(a,c,h){const m=c.data.field(a),p=h.data.field(a);return m!==null&&p!==null?ka(m,p):Ne()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(n,i)=>{for(const[r,a]of i)e(r,a)})}isEmpty(){return MA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new Dt(Ce.comparator);function Oo(){return J4}const qA=new Dt(Ce.comparator);function iu(...t){let e=qA;for(const n of t)e=e.insert(n.key,n);return e}function GA(t){let e=qA;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ds(){return du()}function zA(){return du()}function du(){return new Ka(t=>t.toString(),(t,e)=>t.isEqual(e))}const Q4=new Dt(Ce.comparator),X4=new gn(Ce.comparator);function Qe(...t){let e=X4;for(const n of t)e=e.add(n);return e}const W4=new gn(rt);function Z4(){return W4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bf(e)?"-0":e}}function HA(t){return{integerValue:""+t}}function j4(t,e){return x4(e)?HA(e):rg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this._=void 0}}function e3(t,e,n){return t instanceof Eu?function(r,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&eg(a)&&(a=tg(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(n,e):t instanceof Su?YA(t,e):t instanceof Au?KA(t,e):function(r,a){const c=$A(r,a),h=r0(c)+r0(r.Pe);return um(c)&&um(r.Pe)?HA(h):rg(r.serializer,h)}(t,e)}function t3(t,e,n){return t instanceof Su?YA(t,e):t instanceof Au?KA(t,e):n}function $A(t,e){return t instanceof Gf?function(i){return um(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Eu extends ud{}class Su extends ud{constructor(e){super(),this.elements=e}}function YA(t,e){const n=JA(e);for(const i of t.elements)n.some(r=>Wi(r,i))||n.push(i);return{arrayValue:{values:n}}}class Au extends ud{constructor(e){super(),this.elements=e}}function KA(t,e){let n=JA(e);for(const i of t.elements)n=n.filter(r=>!Wi(r,i));return{arrayValue:{values:n}}}class Gf extends ud{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function r0(t){return qt(t.integerValue||t.doubleValue)}function JA(t){return ng(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e,n){this.field=e,this.transform=n}}function i3(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Su&&r instanceof Su||i instanceof Au&&r instanceof Au?Na(i.elements,r.elements,Wi):i instanceof Gf&&r instanceof Gf?Wi(i.Pe,r.Pe):i instanceof Eu&&r instanceof Eu}(t.transform,e.transform)}class o3{constructor(e,n){this.version=e,this.transformResults=n}}class wi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wi}static exists(e){return new wi(void 0,e)}static updateTime(e){return new wi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Af(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cd{}function QA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sg(t.key,wi.none()):new ku(t.key,t.data,wi.none());{const n=t.data,i=On.empty();let r=new gn(mn.comparator);for(let a of e.fields)if(!r.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?i.delete(a):i.set(a,c),r=r.add(a)}return new kr(t.key,i,new Xn(r.toArray()),wi.none())}}function r3(t,e,n){t instanceof ku?function(r,a,c){const h=r.value.clone(),m=a0(r.fieldTransforms,a,c.transformResults);h.setAll(m),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(t,e,n):t instanceof kr?function(r,a,c){if(!Af(r.precondition,a))return void a.convertToUnknownDocument(c.version);const h=a0(r.fieldTransforms,a,c.transformResults),m=a.data;m.setAll(XA(r)),m.setAll(h),a.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(t,e,n):function(r,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function hu(t,e,n,i){return t instanceof ku?function(a,c,h,m){if(!Af(a.precondition,c))return h;const p=a.value.clone(),v=l0(a.fieldTransforms,m,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof kr?function(a,c,h,m){if(!Af(a.precondition,c))return h;const p=l0(a.fieldTransforms,m,c),v=c.data;return v.setAll(XA(a)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(E=>E.field))}(t,e,n,i):function(a,c,h){return Af(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(t,e,n)}function s3(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),a=$A(i.transform,r||null);a!=null&&(n===null&&(n=On.empty()),n.set(i.field,a))}return n||null}function s0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Na(i,r,(a,c)=>i3(a,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ku extends cd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class kr extends cd{constructor(e,n,i,r,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function XA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function a0(t,e,n){const i=new Map;vt(t.length===n.length);for(let r=0;r<n.length;r++){const a=t[r],c=a.transform,h=e.data.field(a.field);i.set(a.field,t3(c,h,n[r]))}return i}function l0(t,e,n){const i=new Map;for(const r of t){const a=r.transform,c=n.data.field(r.field);i.set(r.field,e3(a,c,e))}return i}class sg extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class a3 extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&r3(a,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=hu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=hu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=zA();return this.mutations.forEach(r=>{const a=e.get(r.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=n.has(r.key)?null:h;const m=QA(c,h);m!==null&&i.set(r.key,m),c.isValidDocument()||c.convertToNoDocument(De.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Qe())}isEqual(e){return this.batchId===e.batchId&&Na(this.mutations,e.mutations,(n,i)=>s0(n,i))&&Na(this.baseMutations,e.baseMutations,(n,i)=>s0(n,i))}}class ag{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){vt(e.mutations.length===i.length);let r=function(){return Q4}();const a=e.mutations;for(let c=0;c<a.length;c++)r=r.insert(a[c].key,i[c].version);return new ag(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,tt;function f3(t){switch(t){default:return Ne();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function WA(t){if(t===void 0)return Uo("GRPC error has no .code"),le.UNKNOWN;switch(t){case Yt.OK:return le.OK;case Yt.CANCELLED:return le.CANCELLED;case Yt.UNKNOWN:return le.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return le.INTERNAL;case Yt.UNAVAILABLE:return le.UNAVAILABLE;case Yt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Yt.NOT_FOUND:return le.NOT_FOUND;case Yt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Yt.ABORTED:return le.ABORTED;case Yt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Yt.DATA_LOSS:return le.DATA_LOSS;default:return Ne()}}(tt=Yt||(Yt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3=new hs([4294967295,4294967295],0);function u0(t){const e=d3().encode(t),n=new SA;return n.update(e),new Uint8Array(n.digest())}function c0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new hs([n,i],0),new hs([r,a],0)]}class lg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ou(`Invalid padding: ${n}`);if(i<0)throw new ou(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ou(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ou(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=hs.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(hs.fromNumber(i)));return r.compare(h3)===1&&(r=new hs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=u0(e),[i,r]=c0(n);for(let a=0;a<this.hashCount;a++){const c=this.Ee(i,r,a);if(!this.de(c))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new lg(a,r,n);return i.forEach(h=>c.insert(h)),c}insert(e){if(this.Ie===0)return;const n=u0(e),[i,r]=c0(n);for(let a=0;a<this.hashCount;a++){const c=this.Ee(i,r,a);this.Ae(c)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,i,r,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new fd(De.min(),r,new Dt(rt),Oo(),Qe())}}class Du{constructor(e,n,i,r,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Du(i,n,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class ZA{constructor(e,n){this.targetId=e,this.me=n}}class jA{constructor(e,n,i=vn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class f0{constructor(){this.fe=0,this.ge=h0(),this.pe=vn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Qe(),n=Qe(),i=Qe();return this.ge.forEach((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Ne()}}),new Du(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=h0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,vt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class p3{constructor(e){this.Le=e,this.Be=new Map,this.ke=Oo(),this.qe=d0(),this.Qe=new Dt(rt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const a=r.target;if(fm(a))if(i===0){const c=new Ce(a.path);this.Ue(n,c,Cn.newNoDocument(c,De.min()))}else vt(i===1);else{const c=this.Ye(n);if(c!==i){const h=this.Ze(e),m=h?this.Xe(h,e,c):1;if(m!==0){this.je(n);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=n;let c,h;try{c=vs(i).toUint8Array()}catch(m){if(m instanceof NA)return Ma("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new lg(c,r,a)}catch(m){return Ma(m instanceof ou?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.Ie===0?null:h}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(a=>{const c=this.Le.tt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,a,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((a,c)=>{const h=this.Je(c);if(h){if(a.current&&fm(h.target)){const m=new Ce(h.target.path);this.ke.get(m)!==null||this.it(c,m)||this.Ue(c,m,Cn.newNoDocument(m,e))}a.be&&(n.set(c,a.ve()),a.Ce())}});let i=Qe();this.qe.forEach((a,c)=>{let h=!0;c.forEachWhile(m=>{const p=this.Je(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(a))}),this.ke.forEach((a,c)=>c.setReadTime(e));const r=new fd(e,n,this.Qe,this.ke,i);return this.ke=Oo(),this.qe=d0(),this.Qe=new Dt(rt),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new f0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new gn(rt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new f0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function d0(){return new Dt(Ce.comparator)}function h0(){return new Dt(Ce.comparator)}const m3={asc:"ASCENDING",desc:"DESCENDING"},g3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y3={and:"AND",or:"OR"};class v3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hm(t,e){return t.useProto3Json||od(e)?e:{value:e}}function zf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _3(t,e){return zf(t,e.toTimestamp())}function Qi(t){return vt(!!t),De.fromTimestamp(function(n){const i=br(n);return new en(i.seconds,i.nanos)}(t))}function ug(t,e){return pm(t,e).canonicalString()}function pm(t,e){const n=function(r){return new Nt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tC(t){const e=Nt.fromString(t);return vt(sC(e)),e}function mm(t,e){return ug(t.databaseId,e.path)}function kp(t,e){const n=tC(e);if(n.get(1)!==t.databaseId.projectId)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ce(iC(n))}function nC(t,e){return ug(t.databaseId,e)}function T3(t){const e=tC(t);return e.length===4?Nt.emptyPath():iC(e)}function gm(t){return new Nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iC(t){return vt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function p0(t,e,n){return{name:mm(t,e),fields:n.value.mapValue.fields}}function E3(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=function(p,v){return p.useProto3Json?(vt(v===void 0||typeof v=="string"),vn.fromBase64String(v||"")):(vt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),vn.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const v=p.code===void 0?le.UNKNOWN:WA(p.code);return new Ee(v,p.message||"")}(c);n=new jA(i,r,a,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=kp(t,i.document.name),a=Qi(i.document.updateTime),c=i.document.createTime?Qi(i.document.createTime):De.min(),h=new On({mapValue:{fields:i.document.fields}}),m=Cn.newFoundDocument(r,a,c,h),p=i.targetIds||[],v=i.removedTargetIds||[];n=new Cf(p,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=kp(t,i.document),a=i.readTime?Qi(i.readTime):De.min(),c=Cn.newNoDocument(r,a),h=i.removedTargetIds||[];n=new Cf([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=kp(t,i.document),a=i.removedTargetIds||[];n=new Cf([],a,r,null)}else{if(!("filter"in e))return Ne();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,c=new c3(r,a),h=i.targetId;n=new ZA(h,c)}}return n}function S3(t,e){let n;if(e instanceof ku)n={update:p0(t,e.key,e.value)};else if(e instanceof sg)n={delete:mm(t,e.key)};else if(e instanceof kr)n={update:p0(t,e.key,e.data),updateMask:N3(e.fieldMask)};else{if(!(e instanceof a3))return Ne();n={verify:mm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const h=c.transform;if(h instanceof Eu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Su)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Au)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Gf)return{fieldPath:c.field.canonicalString(),increment:h.Pe};throw Ne()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,a){return a.updateTime!==void 0?{updateTime:_3(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ne()}(t,e.precondition)),n}function A3(t,e){return t&&t.length>0?(vt(e!==void 0),t.map(n=>function(r,a){let c=r.updateTime?Qi(r.updateTime):Qi(a);return c.isEqual(De.min())&&(c=Qi(a)),new o3(c,r.transformResults||[])}(n,e))):[]}function C3(t,e){return{documents:[nC(t,e.path)]}}function w3(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=nC(t,r);const a=function(p){if(p.length!==0)return rC(Zi.create(p,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const c=function(p){if(p.length!==0)return p.map(v=>function(S){return{field:_a(S.field),direction:x3(S.dir)}}(v))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const h=hm(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:n,parent:r}}function I3(t){let e=T3(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){vt(i===1);const v=n.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let a=[];n.where&&(a=function(E){const S=oC(E);return S instanceof Zi&&VA(S)?S.getFilters():[S]}(n.where));let c=[];n.orderBy&&(c=function(E){return E.map(S=>function(x){return new qf(Ta(x.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(S))}(n.orderBy));let h=null;n.limit&&(h=function(E){let S;return S=typeof E=="object"?E.value:E,od(S)?null:S}(n.limit));let m=null;n.startAt&&(m=function(E){const S=!!E.before,I=E.values||[];return new Ff(I,S)}(n.startAt));let p=null;return n.endAt&&(p=function(E){const S=!E.before,I=E.values||[];return new Ff(I,S)}(n.endAt)),z4(e,r,c,a,h,"F",m,p)}function R3(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ta(n.unaryFilter.field);return jt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ta(n.unaryFilter.field);return jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ta(n.unaryFilter.field);return jt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ta(n.unaryFilter.field);return jt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(t):t.fieldFilter!==void 0?function(n){return jt.create(Ta(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zi.create(n.compositeFilter.filters.map(i=>oC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ne()}}(n.compositeFilter.op))}(t):Ne()}function x3(t){return m3[t]}function b3(t){return g3[t]}function M3(t){return y3[t]}function _a(t){return{fieldPath:t.canonicalString()}}function Ta(t){return mn.fromServerFormat(t.fieldPath)}function rC(t){return t instanceof jt?function(n){if(n.op==="=="){if(e0(n.value))return{unaryFilter:{field:_a(n.field),op:"IS_NAN"}};if(jE(n.value))return{unaryFilter:{field:_a(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(e0(n.value))return{unaryFilter:{field:_a(n.field),op:"IS_NOT_NAN"}};if(jE(n.value))return{unaryFilter:{field:_a(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_a(n.field),op:b3(n.op),value:n.value}}}(t):t instanceof Zi?function(n){const i=n.getFilters().map(r=>rC(r));return i.length===1?i[0]:{compositeFilter:{op:M3(n.op),filters:i}}}(t):Ne()}function N3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,i,r,a=De.min(),c=De.min(),h=vn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.ct=e}}function D3(t){const e=I3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(){this.un=new V3}addToCollectionParentIndex(e,n){return this.un.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(xr.min())}updateCollectionGroup(e,n,i){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class V3{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new gn(Nt.comparator),a=!r.has(i);return this.index[n]=r.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new gn(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Pa(0)}static kn(){return new Pa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(){this.changes=new Ka(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ue.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&hu(i.mutation,r,Xn.empty(),en.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Qe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Qe()){const r=ds();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(a=>{let c=iu();return a.forEach((h,m)=>{c=c.insert(h,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const i=ds();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Qe()))}populateOverlays(e,n,i){const r=[];return i.forEach(a=>{n.has(a)||r.push(a)}),this.documentOverlayCache.getOverlays(e,r).next(a=>{a.forEach((c,h)=>{n.set(c,h)})})}computeViews(e,n,i,r){let a=Oo();const c=du(),h=function(){return du()}();return n.forEach((m,p)=>{const v=i.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof kr)?a=a.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),hu(v.mutation,p,v.mutation.getFieldMask(),en.now())):c.set(p.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((p,v)=>c.set(p,v)),n.forEach((p,v)=>{var E;return h.set(p,new U3(v,(E=c.get(p))!==null&&E!==void 0?E:null))}),h))}recalculateAndSaveOverlays(e,n){const i=du();let r=new Dt((c,h)=>c-h),a=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const h of c)h.keys().forEach(m=>{const p=n.get(m);if(p===null)return;let v=i.get(m)||Xn.empty();v=h.applyToLocalView(p,v),i.set(m,v);const E=(r.get(h.batchId)||Qe()).add(m);r=r.insert(h.batchId,E)})}).next(()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),p=m.key,v=m.value,E=zA();v.forEach(S=>{if(!a.has(S)){const I=QA(n.get(S),i.get(S));I!==null&&E.set(S,I),a=a.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return ue.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(c){return Ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):H4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(a=>{const c=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-a.size):ue.resolve(ds());let h=-1,m=a;return c.next(p=>ue.forEach(p,(v,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),a.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next(S=>{m=m.insert(v,S)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,m,p,Qe())).next(v=>({batchId:h,changes:GA(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next(i=>{let r=iu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const a=n.collectionGroup;let c=iu();return this.indexManager.getCollectionParents(e,a).next(h=>ue.forEach(h,m=>{const p=function(E,S){return new rd(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(n,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,i,r).next(v=>{v.forEach((E,S)=>{c=c.insert(E,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,r))).next(c=>{a.forEach((m,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,Cn.newInvalidDocument(v)))});let h=iu();return c.forEach((m,p)=>{const v=a.get(m);v!==void 0&&hu(v.mutation,p,Xn.empty(),en.now()),ld(n,p)&&(h=h.insert(m,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ue.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Qi(r.createTime)}}(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:D3(r.bundledQuery),readTime:Qi(r.readTime)}}(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(){this.overlays=new Dt(Ce.comparator),this.Ir=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ds();return ue.forEach(n,r=>this.getOverlay(e,r).next(a=>{a!==null&&i.set(r,a)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,a)=>{this.ht(e,n,a)}),ue.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(i)),ue.resolve()}getOverlaysForCollection(e,n,i){const r=ds(),a=n.length+1,c=new Ce(n.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,p=m.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&m.largestBatchId>i&&r.set(m.getKey(),m)}return ue.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let a=new Dt((p,v)=>p-v);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let v=a.get(p.largestBatchId);v===null&&(v=ds(),a=a.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=ds(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,v)=>h.set(p,v)),!(h.size()>=r)););return ue.resolve(h)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new u3(n,i));let a=this.Ir.get(n);a===void 0&&(a=Qe(),this.Ir.set(n,a)),this.Ir.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this.sessionToken=vn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(){this.Tr=new gn(ln.Er),this.dr=new gn(ln.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new ln(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new ln(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new Ce(new Nt([])),i=new ln(n,e),r=new ln(n,e+1),a=[];return this.dr.forEachInRange([i,r],c=>{this.Vr(c),a.push(c.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ce(new Nt([])),i=new ln(n,e),r=new ln(n,e+1);let a=Qe();return this.dr.forEachInRange([i,r],c=>{a=a.add(c.key)}),a}containsKey(e){const n=new ln(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ln{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ce.comparator(e.key,n.key)||rt(e.wr,n.wr)}static Ar(e,n){return rt(e.wr,n.wr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new gn(ln.Er)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new l3(a,n,i,r);this.mutationQueue.push(c);for(const h of r)this.br=this.br.add(new ln(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,n){return ue.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),a=r<0?0:r;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ln(n,0),r=new ln(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([i,r],c=>{const h=this.Dr(c.wr);a.push(h)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new gn(rt);return n.forEach(r=>{const a=new ln(r,0),c=new ln(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,c],h=>{i=i.add(h.wr)})}),ue.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let a=i;Ce.isDocumentKey(a)||(a=a.child(""));const c=new ln(new Ce(a),0);let h=new gn(rt);return this.br.forEachWhile(m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(h=h.add(m.wr)),!0)},c),ue.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){vt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ue.forEach(n.mutations,r=>{const a=new ln(r.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new ln(n,0),r=this.br.firstAfterOrEqual(i);return ue.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.Mr=e,this.docs=function(){return new Dt(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),a=r?r.size:0,c=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ue.resolve(i?i.document.mutableCopy():Cn.newInvalidDocument(n))}getEntries(e,n){let i=Oo();return n.forEach(r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Cn.newInvalidDocument(r))}),ue.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let a=Oo();const c=n.path,h=new Ce(c.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||C4(A4(v),i)<=0||(r.has(v.key)||ld(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,n,i,r){Ne()}Or(e,n){return ue.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new H3(this)}getSize(e){return ue.resolve(this.size)}}class H3 extends L3{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),ue.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e){this.persistence=e,this.Nr=new Ka(n=>ig(n),og),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cg,this.targetCount=0,this.kr=Pa.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),ue.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Pa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.Kn(n),ue.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,i){let r=0;const a=[];return this.Nr.forEach((c,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),ue.waitFor(a).next(()=>r)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return ue.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),ue.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,a=[];return r&&n.forEach(c=>{a.push(r.markPotentiallyOrphaned(e,c))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return ue.resolve(i)}containsKey(e,n){return ue.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,n){this.qr={},this.overlays={},this.Qr=new jm(0),this.Kr=!1,this.Kr=!0,this.$r=new q3,this.referenceDelegate=e(this),this.Ur=new $3(this),this.indexManager=new P3,this.remoteDocumentCache=function(r){return new z3(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new k3(n),this.Gr=new B3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new F3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new G3(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){ve("MemoryPersistence","Starting transaction:",e);const r=new K3(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(a=>this.referenceDelegate.jr(r).next(()=>a)).toPromise().then(a=>(r.raiseOnCommittedEvent(),a))}Hr(e,n){return ue.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class K3 extends I4{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Jr=new cg,this.Yr=null}static Zr(e){return new fg(e)}get Xr(){if(this.Yr)return this.Yr;throw Ne()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),ue.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(a=>this.Xr.add(a.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Xr,i=>{const r=Ce.fromPath(i);return this.ei(e,r).next(a=>{a||n.removeEntry(r,De.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ue.or([()=>ue.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=Qe(),r=Qe();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new dg(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return QV()?8:R4(In())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const a={result:null};return this.Yi(e,n).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Zi(e,n,r,i).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new J3;return this.Xi(e,n,c).next(h=>{if(a.result=h,this.zi)return this.es(e,n,c,h.size)})}).next(()=>a.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(tu()<=We.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",va(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ue.resolve()):(tu()<=We.DEBUG&&ve("QueryEngine","Query:",va(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(tu()<=We.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",va(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ji(n))):ue.resolve())}Yi(e,n){if(o0(n))return ue.resolve(null);let i=Ji(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=dm(n,null,"F"),i=Ji(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const c=Qe(...a);return this.Ji.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,i).next(m=>{const p=this.ts(n,h);return this.ns(n,p,c,m.readTime)?this.Yi(e,dm(n,null,"F")):this.rs(e,p,n,m)}))})))}Zi(e,n,i,r){return o0(n)||r.isEqual(De.min())?ue.resolve(null):this.Ji.getDocuments(e,i).next(a=>{const c=this.ts(n,a);return this.ns(n,c,i,r)?ue.resolve(null):(tu()<=We.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),va(n)),this.rs(e,c,n,S4(r,-1)).next(h=>h))})}ts(e,n){let i=new gn(FA(e));return n.forEach((r,a)=>{ld(e,a)&&(i=i.add(a))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Xi(e,n,i){return tu()<=We.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",va(n)),this.Ji.getDocumentsMatchingQuery(e,n,xr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(a=>(n.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Dt(rt),this._s=new Ka(a=>ig(a),og),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O3(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function W3(t,e,n,i){return new X3(t,e,n,i)}async function aC(t,e){const n=Pe(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(a=>(r=a,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(a=>{const c=[],h=[];let m=Qe();for(const p of r){c.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of a){h.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return n.localDocuments.getDocuments(i,m).next(p=>({hs:p,removedBatchIds:c,addedBatchIds:h}))})})}function Z3(t,e){const n=Pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,m,p,v){const E=p.batch,S=E.keys();let I=ue.resolve();return S.forEach(x=>{I=I.next(()=>v.getEntry(m,x)).next(O=>{const F=p.docVersions.get(x);vt(F!==null),O.version.compareTo(F)<0&&(E.applyToRemoteDocument(O,p),O.isValidDocument()&&(O.setReadTime(p.commitVersion),v.addEntry(O)))})}),I.next(()=>h.mutationQueue.removeMutationBatch(m,E))}(n,i,e,a).next(()=>a.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let m=Qe();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(m=m.add(h.batch.mutations[p].key));return m}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function lC(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function j3(t,e){const n=Pe(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const h=[];e.targetChanges.forEach((v,E)=>{const S=r.get(E);if(!S)return;h.push(n.Ur.removeMatchingKeys(a,v.removedDocuments,E).next(()=>n.Ur.addMatchingKeys(a,v.addedDocuments,E)));let I=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(vn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,i)),r=r.insert(E,I),function(O,F,oe){return O.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0}(S,I,v)&&h.push(n.Ur.updateTargetData(a,I))});let m=Oo(),p=Qe();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(eB(a,c,e.documentUpdates).next(v=>{m=v.Ps,p=v.Is})),!i.isEqual(De.min())){const v=n.Ur.getLastRemoteSnapshotVersion(a).next(E=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,i));h.push(v)}return ue.waitFor(h).next(()=>c.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,m,p)).next(()=>m)}).then(a=>(n.os=r,a))}function eB(t,e,n){let i=Qe(),r=Qe();return n.forEach(a=>i=i.add(a)),e.getEntries(t,i).next(a=>{let c=Oo();return n.forEach((h,m)=>{const p=a.get(h);m.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(h)),m.isNoDocument()&&m.version.isEqual(De.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):ve("LocalStore","Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",m.version)}),{Ps:c,Is:r}})}function tB(t,e){const n=Pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function nB(t,e){const n=Pe(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(a=>a?(r=a,ue.resolve(r)):n.Ur.allocateTargetId(i).next(c=>(r=new Er(e,c,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function ym(t,e,n){const i=Pe(t),r=i.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,c=>i.persistence.referenceDelegate.removeTarget(c,r))}catch(c){if(!Nu(c))throw c;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function m0(t,e,n){const i=Pe(t);let r=De.min(),a=Qe();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,v){const E=Pe(m),S=E._s.get(v);return S!==void 0?ue.resolve(E.os.get(S)):E.Ur.getTargetData(p,v)}(i,c,Ji(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(c,h.targetId).next(m=>{a=m})}).next(()=>i.ss.getDocumentsMatchingQuery(c,e,n?r:De.min(),n?a:Qe())).next(h=>(iB(i,Y4(e),h),{documents:h,Ts:a})))}function iB(t,e,n){let i=t.us.get(e)||De.min();n.forEach((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),t.us.set(e,i)}class g0{constructor(){this.activeTargetIds=Z4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oB{constructor(){this.so=new g0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new g0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df=null;function Dp(){return df===null?df=function(){return 268435456+Math.round(2147483648*Math.random())}():df++,"0x"+df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class lB extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${a}`}get Fo(){return!1}Mo(n,i,r,a,c){const h=Dp(),m=this.xo(n,i.toUriEncodedString());ve("RestConnection",`Sending RPC '${n}' ${h}:`,m,r);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,a,c),this.No(n,m,p,r).then(v=>(ve("RestConnection",`Received RPC '${n}' ${h}: `,v),v),v=>{throw Ma("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",m,"request:",r),v})}Lo(n,i,r,a,c,h){return this.Mo(n,i,r,a,c)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ya}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((a,c)=>n[c]=a),r&&r.headers.forEach((a,c)=>n[c]=a)}xo(n,i){const r=sB[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const a=Dp();return new Promise((c,h)=>{const m=new AA;m.setWithCredentials(!0),m.listenOnce(CA.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Ef.NO_ERROR:const v=m.getResponseJson();ve(Sn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),c(v);break;case Ef.TIMEOUT:ve(Sn,`RPC '${e}' ${a} timed out`),h(new Ee(le.DEADLINE_EXCEEDED,"Request time out"));break;case Ef.HTTP_ERROR:const E=m.getStatus();if(ve(Sn,`RPC '${e}' ${a} failed with status:`,E,"response text:",m.getResponseText()),E>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const I=S==null?void 0:S.error;if(I&&I.status&&I.message){const x=function(F){const oe=F.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(oe)>=0?oe:le.UNKNOWN}(I.status);h(new Ee(x,I.message))}else h(new Ee(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Ee(le.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{ve(Sn,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(r);ve(Sn,`RPC '${e}' ${a} sending request:`,r),m.send(n,"POST",p,i,15)})}Bo(e,n,i){const r=Dp(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=RA(),h=IA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Oo(m.initMessageHeaders,n,i),m.encodeInitMessageHeaders=!0;const v=a.join("");ve(Sn,`Creating RPC '${e}' stream ${r}: ${v}`,m);const E=c.createWebChannel(v,m);let S=!1,I=!1;const x=new aB({Io:F=>{I?ve(Sn,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(S||(ve(Sn,`Opening RPC '${e}' stream ${r} transport.`),E.open(),S=!0),ve(Sn,`RPC '${e}' stream ${r} sending:`,F),E.send(F))},To:()=>E.close()}),O=(F,oe,te)=>{F.listen(oe,ne=>{try{te(ne)}catch(fe){setTimeout(()=>{throw fe},0)}})};return O(E,nu.EventType.OPEN,()=>{I||(ve(Sn,`RPC '${e}' stream ${r} transport opened.`),x.yo())}),O(E,nu.EventType.CLOSE,()=>{I||(I=!0,ve(Sn,`RPC '${e}' stream ${r} transport closed`),x.So())}),O(E,nu.EventType.ERROR,F=>{I||(I=!0,Ma(Sn,`RPC '${e}' stream ${r} transport errored:`,F),x.So(new Ee(le.UNAVAILABLE,"The operation could not be completed")))}),O(E,nu.EventType.MESSAGE,F=>{var oe;if(!I){const te=F.data[0];vt(!!te);const ne=te,fe=ne.error||((oe=ne[0])===null||oe===void 0?void 0:oe.error);if(fe){ve(Sn,`RPC '${e}' stream ${r} received error:`,fe);const se=fe.status;let pe=function(b){const V=Yt[b];if(V!==void 0)return WA(V)}(se),k=fe.message;pe===void 0&&(pe=le.INTERNAL,k="Unknown error status: "+se+" with message "+fe.message),I=!0,x.So(new Ee(pe,k)),E.close()}else ve(Sn,`RPC '${e}' stream ${r} received:`,te),x.bo(te)}}),O(h,wA.STAT_EVENT,F=>{F.stat===am.PROXY?ve(Sn,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===am.NOPROXY&&ve(Sn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function Pp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t){return new v3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n,i=1e3,r=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&ve("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n,i,r,a,c,h,m){this.ui=e,this.Ho=i,this.Jo=r,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new uC(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(Uo(n.toString()),Uo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new Ee(le.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uB extends cC{constructor(e,n,i,r,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,c),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=E3(this.serializer,e),i=function(a){if(!("targetChange"in a))return De.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?De.min():c.readTime?Qi(c.readTime):De.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=gm(this.serializer),n.addTarget=function(a,c){let h;const m=c.target;if(h=fm(m)?{documents:C3(a,m)}:{query:w3(a,m)._t},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=eC(a,c.resumeToken);const p=hm(a,c.expectedCount);p!==null&&(h.expectedCount=p)}else if(c.snapshotVersion.compareTo(De.min())>0){h.readTime=zf(a,c.snapshotVersion.toTimestamp());const p=hm(a,c.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=R3(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=gm(this.serializer),n.removeTarget=e,this.a_(n)}}class cB extends cC{constructor(e,n,i,r,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,c),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return vt(!!e.streamToken),this.lastStreamToken=e.streamToken,vt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=A3(e.writeResults,e.commitTime),i=Qi(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=gm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>S3(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Mo(e,pm(n,i),r,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(le.UNKNOWN,a.toString())})}Lo(e,n,i,r,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Lo(e,pm(n,i),r,c,h,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ee(le.UNKNOWN,c.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class dB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Uo(n),this.D_=!1):ve("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,n,i,r,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(c=>{i.enqueueAndForget(async()=>{ws(this)&&(ve("RemoteStore","Restarting streams for network reachability change."),await async function(m){const p=Pe(m);p.L_.add(4),await Pu(p),p.q_.set("Unknown"),p.L_.delete(4),await hd(p)}(this))})}),this.q_=new dB(i,r)}}async function hd(t){if(ws(t))for(const e of t.B_)await e(!0)}async function Pu(t){for(const e of t.B_)await e(!1)}function fC(t,e){const n=Pe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),gg(n)?mg(n):Ja(n).r_()&&pg(n,e))}function hg(t,e){const n=Pe(t),i=Ja(n);n.N_.delete(e),i.r_()&&dC(n,e),n.N_.size===0&&(i.r_()?i.o_():ws(n)&&n.q_.set("Unknown"))}function pg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ja(t).A_(e)}function dC(t,e){t.Q_.xe(e),Ja(t).R_(e)}function mg(t){t.Q_=new p3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ja(t).start(),t.q_.v_()}function gg(t){return ws(t)&&!Ja(t).n_()&&t.N_.size>0}function ws(t){return Pe(t).L_.size===0}function hC(t){t.Q_=void 0}async function pB(t){t.q_.set("Online")}async function mB(t){t.N_.forEach((e,n)=>{pg(t,e)})}async function gB(t,e){hC(t),gg(t)?(t.q_.M_(e),mg(t)):t.q_.set("Unknown")}async function yB(t,e,n){if(t.q_.set("Online"),e instanceof jA&&e.state===2&&e.cause)try{await async function(r,a){const c=a.cause;for(const h of a.targetIds)r.N_.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.N_.delete(h),r.Q_.removeTarget(h))}(t,e)}catch(i){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Hf(t,i)}else if(e instanceof Cf?t.Q_.Ke(e):e instanceof ZA?t.Q_.He(e):t.Q_.We(e),!n.isEqual(De.min()))try{const i=await lC(t.localStore);n.compareTo(i)>=0&&await function(a,c){const h=a.Q_.rt(c);return h.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=a.N_.get(p);v&&a.N_.set(p,v.withResumeToken(m.resumeToken,c))}}),h.targetMismatches.forEach((m,p)=>{const v=a.N_.get(m);if(!v)return;a.N_.set(m,v.withResumeToken(vn.EMPTY_BYTE_STRING,v.snapshotVersion)),dC(a,m);const E=new Er(v.target,m,p,v.sequenceNumber);pg(a,E)}),a.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){ve("RemoteStore","Failed to raise snapshot:",i),await Hf(t,i)}}async function Hf(t,e,n){if(!Nu(e))throw e;t.L_.add(1),await Pu(t),t.q_.set("Offline"),n||(n=()=>lC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ve("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await hd(t)})}function pC(t,e){return e().catch(n=>Hf(t,n,e))}async function pd(t){const e=Pe(t),n=Mr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;vB(e);)try{const r=await tB(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,_B(e,r)}catch(r){await Hf(e,r)}mC(e)&&gC(e)}function vB(t){return ws(t)&&t.O_.length<10}function _B(t,e){t.O_.push(e);const n=Mr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function mC(t){return ws(t)&&!Mr(t).n_()&&t.O_.length>0}function gC(t){Mr(t).start()}async function TB(t){Mr(t).p_()}async function EB(t){const e=Mr(t);for(const n of t.O_)e.m_(n.mutations)}async function SB(t,e,n){const i=t.O_.shift(),r=ag.from(i,e,n);await pC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await pd(t)}async function AB(t,e){e&&Mr(t).V_&&await async function(i,r){if(function(c){return f3(c)&&c!==le.ABORTED}(r.code)){const a=i.O_.shift();Mr(i).s_(),await pC(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r)),await pd(i)}}(t,e),mC(t)&&gC(t)}async function v0(t,e){const n=Pe(t);n.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const i=ws(n);n.L_.add(3),await Pu(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await hd(n)}async function CB(t,e){const n=Pe(t);e?(n.L_.delete(2),await hd(n)):e||(n.L_.add(2),await Pu(n),n.q_.set("Unknown"))}function Ja(t){return t.K_||(t.K_=function(n,i,r){const a=Pe(n);return a.w_(),new uB(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(t.datastore,t.asyncQueue,{Eo:pB.bind(null,t),Ro:mB.bind(null,t),mo:gB.bind(null,t),d_:yB.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),gg(t)?mg(t):t.q_.set("Unknown")):(await t.K_.stop(),hC(t))})),t.K_}function Mr(t){return t.U_||(t.U_=function(n,i,r){const a=Pe(n);return a.w_(),new cB(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:TB.bind(null,t),mo:AB.bind(null,t),f_:EB.bind(null,t),g_:SB.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await pd(t)):(await t.U_.stop(),t.O_.length>0&&(ve("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n,i,r,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,a){const c=Date.now()+i,h=new yg(e,n,c,r,a);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vg(t,e){if(Uo("AsyncQueue",`${e}: ${t}`),Nu(t))return new Ee(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ce.comparator(n.key,i.key):(n,i)=>Ce.comparator(n.key,i.key),this.keyedMap=iu(),this.sortedSet=new Dt(this.comparator)}static emptySet(e){return new xa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new xa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.W_=new Dt(Ce.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ne():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Va{constructor(e,n,i,r,a,c,h,m,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,r,a){const c=[];return n.forEach(h=>{c.push({type:0,doc:h})}),new Va(e,n,xa.emptySet(n),c,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class IB{constructor(){this.queries=T0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=Pe(n),a=r.queries;r.queries=T0(),a.forEach((c,h)=>{for(const m of h.j_)m.onError(i)})})(this,new Ee(le.ABORTED,"Firestore shutting down"))}}function T0(){return new Ka(t=>BA(t),ad)}async function yC(t,e){const n=Pe(t);let i=3;const r=e.query;let a=n.queries.get(r);a?!a.H_()&&e.J_()&&(i=2):(a=new wB,i=e.J_()?0:1);try{switch(i){case 0:a.z_=await n.onListen(r,!0);break;case 1:a.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(c){const h=vg(c,`Initialization of query '${va(e.query)}' failed`);return void e.onError(h)}n.queries.set(r,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&_g(n)}async function vC(t,e){const n=Pe(t),i=e.query;let r=3;const a=n.queries.get(i);if(a){const c=a.j_.indexOf(e);c>=0&&(a.j_.splice(c,1),a.j_.length===0?r=e.J_()?0:1:!a.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function RB(t,e){const n=Pe(t);let i=!1;for(const r of e){const a=r.query,c=n.queries.get(a);if(c){for(const h of c.j_)h.X_(r)&&(i=!0);c.z_=r}}i&&_g(n)}function xB(t,e,n){const i=Pe(t),r=i.queries.get(e);if(r)for(const a of r.j_)a.onError(n);i.queries.delete(e)}function _g(t){t.Y_.forEach(e=>{e.next()})}var vm,E0;(E0=vm||(vm={})).ea="default",E0.Cache="cache";class _C{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Va(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.key=e}}class EC{constructor(e){this.key=e}}class bB{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Qe(),this.mutatedKeys=Qe(),this.Aa=FA(e),this.Ra=new xa(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new _0,r=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,c=r,h=!1;const m=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((v,E)=>{const S=r.get(v),I=ld(this.query,E)?E:null,x=!!S&&this.mutatedKeys.has(S.key),O=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let F=!1;S&&I?S.data.isEqual(I.data)?x!==O&&(i.track({type:3,doc:I}),F=!0):this.ga(S,I)||(i.track({type:2,doc:I}),F=!0,(m&&this.Aa(I,m)>0||p&&this.Aa(I,p)<0)&&(h=!0)):!S&&I?(i.track({type:0,doc:I}),F=!0):S&&!I&&(i.track({type:1,doc:S}),F=!0,(m||p)&&(h=!0)),F&&(I?(c=c.add(I),a=O?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{Ra:c,fa:i,ns:h,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const c=e.fa.G_();c.sort((v,E)=>function(I,x){const O=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return O(I)-O(x)}(v.type,E.type)||this.Aa(v.doc,E.doc)),this.pa(i),r=r!=null&&r;const h=n&&!r?this.ya():[],m=this.da.size===0&&this.current&&!r?1:0,p=m!==this.Ea;return this.Ea=m,c.length!==0||p?{snapshot:new Va(this.query,e.Ra,a,c,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Qe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new EC(i))}),this.da.forEach(i=>{e.has(i)||n.push(new TC(i))}),n}ba(e){this.Ta=e.Ts,this.da=Qe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Va.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class MB{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class NB{constructor(e){this.key=e,this.va=!1}}class kB{constructor(e,n,i,r,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Ka(h=>BA(h),ad),this.Ma=new Map,this.xa=new Set,this.Oa=new Dt(Ce.comparator),this.Na=new Map,this.La=new cg,this.Ba={},this.ka=new Map,this.qa=Pa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function DB(t,e,n=!0){const i=RC(t);let r;const a=i.Fa.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.Da()):r=await SC(i,e,n,!0),r}async function PB(t,e){const n=RC(t);await SC(n,e,!0,!1)}async function SC(t,e,n,i){const r=await nB(t.localStore,Ji(e)),a=r.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let h;return i&&(h=await VB(t,e,a,c==="current",r.resumeToken)),t.isPrimaryClient&&n&&fC(t.remoteStore,r),h}async function VB(t,e,n,i,r){t.Ka=(E,S,I)=>async function(O,F,oe,te){let ne=F.view.ma(oe);ne.ns&&(ne=await m0(O.localStore,F.query,!1).then(({documents:k})=>F.view.ma(k,ne)));const fe=te&&te.targetChanges.get(F.targetId),se=te&&te.targetMismatches.get(F.targetId)!=null,pe=F.view.applyChanges(ne,O.isPrimaryClient,fe,se);return A0(O,F.targetId,pe.wa),pe.snapshot}(t,E,S,I);const a=await m0(t.localStore,e,!0),c=new bB(e,a.Ts),h=c.ma(a.documents),m=Du.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),p=c.applyChanges(h,t.isPrimaryClient,m);A0(t,n,p.wa);const v=new MB(e,n,c);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function LB(t,e,n){const i=Pe(t),r=i.Fa.get(e),a=i.Ma.get(r.targetId);if(a.length>1)return i.Ma.set(r.targetId,a.filter(c=>!ad(c,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ym(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&hg(i.remoteStore,r.targetId),_m(i,r.targetId)}).catch(Mu)):(_m(i,r.targetId),await ym(i.localStore,r.targetId,!0))}async function UB(t,e){const n=Pe(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),hg(n.remoteStore,i.targetId))}async function OB(t,e,n){const i=$B(t);try{const r=await function(c,h){const m=Pe(c),p=en.now(),v=h.reduce((I,x)=>I.add(x.key),Qe());let E,S;return m.persistence.runTransaction("Locally write mutations","readwrite",I=>{let x=Oo(),O=Qe();return m.cs.getEntries(I,v).next(F=>{x=F,x.forEach((oe,te)=>{te.isValidDocument()||(O=O.add(oe))})}).next(()=>m.localDocuments.getOverlayedDocuments(I,x)).next(F=>{E=F;const oe=[];for(const te of h){const ne=s3(te,E.get(te.key).overlayedDocument);ne!=null&&oe.push(new kr(te.key,ne,kA(ne.value.mapValue),wi.exists(!0)))}return m.mutationQueue.addMutationBatch(I,p,oe,h)}).next(F=>{S=F;const oe=F.applyToLocalDocumentSet(E,O);return m.documentOverlayCache.saveOverlays(I,F.batchId,oe)})}).then(()=>({batchId:S.batchId,changes:GA(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(c,h,m){let p=c.Ba[c.currentUser.toKey()];p||(p=new Dt(rt)),p=p.insert(h,m),c.Ba[c.currentUser.toKey()]=p}(i,r.batchId,n),await Vu(i,r.changes),await pd(i.remoteStore)}catch(r){const a=vg(r,"Failed to persist write");n.reject(a)}}async function AC(t,e){const n=Pe(t);try{const i=await j3(n.localStore,e);e.targetChanges.forEach((r,a)=>{const c=n.Na.get(a);c&&(vt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.va=!0:r.modifiedDocuments.size>0?vt(c.va):r.removedDocuments.size>0&&(vt(c.va),c.va=!1))}),await Vu(n,i,e)}catch(i){await Mu(i)}}function S0(t,e,n){const i=Pe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((a,c)=>{const h=c.view.Z_(e);h.snapshot&&r.push(h.snapshot)}),function(c,h){const m=Pe(c);m.onlineState=h;let p=!1;m.queries.forEach((v,E)=>{for(const S of E.j_)S.Z_(h)&&(p=!0)}),p&&_g(m)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function BB(t,e,n){const i=Pe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),a=r&&r.key;if(a){let c=new Dt(Ce.comparator);c=c.insert(a,Cn.newNoDocument(a,De.min()));const h=Qe().add(a),m=new fd(De.min(),new Map,new Dt(rt),c,h);await AC(i,m),i.Oa=i.Oa.remove(a),i.Na.delete(e),Tg(i)}else await ym(i.localStore,e,!1).then(()=>_m(i,e,n)).catch(Mu)}async function FB(t,e){const n=Pe(t),i=e.batch.batchId;try{const r=await Z3(n.localStore,e);wC(n,i,null),CC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Vu(n,r)}catch(r){await Mu(r)}}async function qB(t,e,n){const i=Pe(t);try{const r=await function(c,h){const m=Pe(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return m.mutationQueue.lookupMutationBatch(p,h).next(E=>(vt(E!==null),v=E.keys(),m.mutationQueue.removeMutationBatch(p,E))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,h)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>m.localDocuments.getDocuments(p,v))})}(i.localStore,e);wC(i,e,n),CC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Vu(i,r)}catch(r){await Mu(r)}}function CC(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function wC(t,e,n){const i=Pe(t);let r=i.Ba[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(n?a.reject(n):a.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function _m(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||IC(t,i)})}function IC(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(hg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Tg(t))}function A0(t,e,n){for(const i of n)i instanceof TC?(t.La.addReference(i.key,e),GB(t,i)):i instanceof EC?(ve("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||IC(t,i.key)):Ne()}function GB(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(ve("SyncEngine","New document in limbo: "+n),t.xa.add(i),Tg(t))}function Tg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ce(Nt.fromString(e)),i=t.qa.next();t.Na.set(i,new NB(n)),t.Oa=t.Oa.insert(n,i),fC(t.remoteStore,new Er(Ji(sd(n.path)),i,"TargetPurposeLimboResolution",jm.oe))}}async function Vu(t,e,n){const i=Pe(t),r=[],a=[],c=[];i.Fa.isEmpty()||(i.Fa.forEach((h,m)=>{c.push(i.Ka(m,e,n).then(p=>{var v;if((p||n)&&i.isPrimaryClient){const E=p?!p.fromCache:(v=n==null?void 0:n.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(p){r.push(p);const E=dg.Wi(m.targetId,p);a.push(E)}}))}),await Promise.all(c),i.Ca.d_(r),await async function(m,p){const v=Pe(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ue.forEach(p,S=>ue.forEach(S.$i,I=>v.persistence.referenceDelegate.addReference(E,S.targetId,I)).next(()=>ue.forEach(S.Ui,I=>v.persistence.referenceDelegate.removeReference(E,S.targetId,I)))))}catch(E){if(!Nu(E))throw E;ve("LocalStore","Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const I=v.os.get(S),x=I.snapshotVersion,O=I.withLastLimboFreeSnapshotVersion(x);v.os=v.os.insert(S,O)}}}(i.localStore,a))}async function zB(t,e){const n=Pe(t);if(!n.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const i=await aC(n.localStore,e);n.currentUser=e,function(a,c){a.ka.forEach(h=>{h.forEach(m=>{m.reject(new Ee(le.CANCELLED,c))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Vu(n,i.hs)}}function HB(t,e){const n=Pe(t),i=n.Na.get(e);if(i&&i.va)return Qe().add(i.key);{let r=Qe();const a=n.Ma.get(e);if(!a)return r;for(const c of a){const h=n.Fa.get(c);r=r.unionWith(h.view.Va)}return r}}function RC(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BB.bind(null,e),e.Ca.d_=RB.bind(null,e.eventManager),e.Ca.$a=xB.bind(null,e.eventManager),e}function $B(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qB.bind(null,e),e}class $f{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return W3(this.persistence,new Q3,e.initialUser,this.serializer)}Ga(e){return new Y3(fg.Zr,this.serializer)}Wa(e){return new oB}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$f.provider={build:()=>new $f};class Tm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>S0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=zB.bind(null,this.syncEngine),await CB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IB}()}createDatastore(e){const n=dd(e.databaseInfo.databaseId),i=function(a){return new lB(a)}(e.databaseInfo);return function(a,c,h,m){return new fB(a,c,h,m)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,a,c,h){return new hB(i,r,a,c,h)}(this.localStore,this.datastore,e.asyncQueue,n=>S0(this.syncEngine,n,0),function(){return y0.D()?new y0:new rB}())}createSyncEngine(e,n){return function(r,a,c,h,m,p,v){const E=new kB(r,a,c,h,m,p);return v&&(E.Qa=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const a=Pe(r);ve("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Pu(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Tm.provider={build:()=>new Tm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Uo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(e,n,i,r,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=An.UNAUTHENTICATED,this.clientId=bA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async c=>{ve("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ve("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=vg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Vp(t,e){t.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await aC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function C0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await KB(t);ve("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>v0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>v0(e.remoteStore,r)),t._onlineComponents=e}async function KB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{await Vp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===le.FAILED_PRECONDITION||r.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ma("Error using user provided cache. Falling back to memory cache: "+n),await Vp(t,new $f)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),await Vp(t,new $f);return t._offlineComponents}async function bC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),await C0(t,t._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),await C0(t,new Tm))),t._onlineComponents}function JB(t){return bC(t).then(e=>e.syncEngine)}async function Em(t){const e=await bC(t),n=e.eventManager;return n.onListen=DB.bind(null,e.syncEngine),n.onUnlisten=LB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=PB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UB.bind(null,e.syncEngine),n}function QB(t,e,n={}){const i=new wr;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,h,m,p){const v=new xC({next:S=>{v.Za(),c.enqueueAndForget(()=>vC(a,E));const I=S.docs.has(h);!I&&S.fromCache?p.reject(new Ee(le.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&m&&m.source==="server"?p.reject(new Ee(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new _C(sd(h.path),v,{includeMetadataChanges:!0,_a:!0});return yC(a,E)}(await Em(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t,e,n){if(!n)throw new Ee(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XB(t,e,n,i){if(e===!0&&i===!0)throw new Ee(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function I0(t){if(!Ce.isDocumentKey(t))throw new Ee(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function R0(t){if(Ce.isDocumentKey(t))throw new Ee(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Eg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ne()}function Ii(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Eg(t);throw new Ee(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ee(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class md{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x0(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new h4;switch(i.type){case"firstParty":return new y4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ee(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=w0.get(n);i&&(ve("ComponentProvider","Removing Datastore"),w0.delete(n),i.terminate())}(this),Promise.resolve()}}function WB(t,e,n,i={}){var r;const a=(t=Ii(t,md))._getSettings(),c=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==c&&Ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),i.mockUserToken){let h,m;if(typeof i.mockUserToken=="string")h=i.mockUserToken,m=An.MOCK_USER;else{h=GV(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Ee(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new An(p)}t._authCredentials=new p4(new xA(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new gd(this.firestore,e,this._query)}}class Dn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dn(this.firestore,e,this._key)}}class Ir extends gd{constructor(e,n,i){super(e,n,sd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dn(this.firestore,null,new Ce(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function ZB(t,e,...n){if(t=yn(t),NC("collection","path",e),t instanceof md){const i=Nt.fromString(e,...n);return R0(i),new Ir(t,null,i)}{if(!(t instanceof Dn||t instanceof Ir))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Nt.fromString(e,...n));return R0(i),new Ir(t.firestore,null,i)}}function Ei(t,e,...n){if(t=yn(t),arguments.length===1&&(e=bA.newId()),NC("doc","path",e),t instanceof md){const i=Nt.fromString(e,...n);return I0(i),new Dn(t,null,new Ce(i))}{if(!(t instanceof Dn||t instanceof Ir))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Nt.fromString(e,...n));return I0(i),new Dn(t.firestore,t instanceof Ir?t.converter:null,new Ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new uC(this,"async_queue_retry"),this.Vu=()=>{const i=Pp();i&&ve("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Pp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Pp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new wr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Nu(e))throw e;ve("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),h}(i);throw Uo("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=yg.createAndSchedule(this,e,n,i,a=>this.yu(a));return this.Tu.push(r),r}fu(){this.Eu&&Ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function M0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const a of i)if(a in r&&typeof r[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Ts extends md{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new b0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b0(e),this._firestoreClient=void 0,await e}}}function jB(t,e){const n=typeof t=="object"?t:US(),i=typeof t=="string"?t:"(default)",r=qm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=FV("firestore");a&&WB(r,...a)}return r}function Sg(t){if(t._terminated)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eF(t),t._firestoreClient}function eF(t){var e,n,i;const r=t._freezeSettings(),a=function(h,m,p,v){return new M4(h,m,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,MC(v.experimentalLongPollingOptions),v.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new YB(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this._byteString=e}static fromBase64String(e){try{return new La(vn.fromBase64String(e))}catch(n){throw new Ee(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new La(vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=/^__.*__$/;class nF{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new kr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ku(e,this.data,n,this.fieldTransforms)}}class kC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new kr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function DC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class wg{constructor(e,n,i,r,a,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new wg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Yf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(DC(this.Cu)&&tF.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class iF{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||dd(e)}Qu(e,n,i,r=!1){return new wg({Cu:e,methodName:n,qu:i,path:mn.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function PC(t){const e=t._freezeSettings(),n=dd(t._databaseId);return new iF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oF(t,e,n,i,r,a={}){const c=t.Qu(a.merge||a.mergeFields?2:0,e,n,r);Rg("Data must be an object, but it was:",c,i);const h=VC(i,c);let m,p;if(a.merge)m=new Xn(c.fieldMask),p=c.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const S=Sm(e,E,n);if(!c.contains(S))throw new Ee(le.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);UC(v,S)||v.push(S)}m=new Xn(v),p=c.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,p=c.fieldTransforms;return new nF(new On(h),m,p)}class _d extends vd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _d}}class Ig extends vd{_toFieldTransform(e){return new n3(e.path,new Eu)}isEqual(e){return e instanceof Ig}}function rF(t,e,n,i){const r=t.Qu(1,e,n);Rg("Data must be an object, but it was:",r,i);const a=[],c=On.empty();Cs(i,(m,p)=>{const v=xg(e,m,n);p=yn(p);const E=r.Nu(v);if(p instanceof _d)a.push(v);else{const S=Td(p,E);S!=null&&(a.push(v),c.set(v,S))}});const h=new Xn(a);return new kC(c,h,r.fieldTransforms)}function sF(t,e,n,i,r,a){const c=t.Qu(1,e,n),h=[Sm(e,i,n)],m=[r];if(a.length%2!=0)throw new Ee(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)h.push(Sm(e,a[S])),m.push(a[S+1]);const p=[],v=On.empty();for(let S=h.length-1;S>=0;--S)if(!UC(p,h[S])){const I=h[S];let x=m[S];x=yn(x);const O=c.Nu(I);if(x instanceof _d)p.push(I);else{const F=Td(x,O);F!=null&&(p.push(I),v.set(I,F))}}const E=new Xn(p);return new kC(v,E,c.fieldTransforms)}function Td(t,e){if(LC(t=yn(t)))return Rg("Unsupported field value:",e,t),VC(t,e);if(t instanceof vd)return function(i,r){if(!DC(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const a=[];let c=0;for(const h of i){let m=Td(h,r.Lu(c));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),c++}return{arrayValue:{values:a}}}(t,e)}return function(i,r){if((i=yn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return j4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=en.fromDate(i);return{timestampValue:zf(r.serializer,a)}}if(i instanceof en){const a=new en(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:zf(r.serializer,a)}}if(i instanceof Ag)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof La)return{bytesValue:eC(r.serializer,i._byteString)};if(i instanceof Dn){const a=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(a))throw r.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ug(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Cg)return function(c,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw h.Bu("VectorValues must only contain numeric values.");return rg(h.serializer,m)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Eg(i)}`)}(t,e)}function VC(t,e){const n={};return MA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(t,(i,r)=>{const a=Td(r,e.Mu(i));a!=null&&(n[i]=a)}),{mapValue:{fields:n}}}function LC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof en||t instanceof Ag||t instanceof La||t instanceof Dn||t instanceof vd||t instanceof Cg)}function Rg(t,e,n){if(!LC(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Eg(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Sm(t,e,n){if((e=yn(e))instanceof yd)return e._internalPath;if(typeof e=="string")return xg(t,e);throw Yf("Field path arguments must be of type string or ",t,!1,void 0,n)}const aF=new RegExp("[~\\*/\\[\\]]");function xg(t,e,n){if(e.search(aF)>=0)throw Yf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yd(...e.split("."))._internalPath}catch{throw Yf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Yf(t,e,n,i,r){const a=i&&!i.isEmpty(),c=r!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||c)&&(m+=" (found",a&&(m+=` in field ${i}`),c&&(m+=` in document ${r}`),m+=")"),new Ee(le.INVALID_ARGUMENT,h+t+m)}function UC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n,i,r,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(BC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lF extends OC{data(){return super.data()}}function BC(t,e){return typeof e=="string"?xg(t,e):e instanceof yd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cF{convertValue(e,n="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Cs(e,(r,a)=>{i[r]=this.convertValue(a,n)}),i}convertVectorValue(e){var n,i,r;const a=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(c=>qt(c.doubleValue));return new Cg(a)}convertGeoPoint(e){return new Ag(qt(e.latitude),qt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=tg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const n=br(e);return new en(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Nt.fromString(e);vt(sC(i));const r=new _u(i.get(1),i.get(3)),a=new Ce(i.popFirst(5));return r.isEqual(n)||Uo(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class FC extends OC{constructor(e,n,i,r,a,c){super(e,n,i,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(BC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class wf extends FC{data(e={}){return super.data(e)}}class dF{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ru(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new wf(this._firestore,this._userDataWriter,i.key,i,new ru(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>{const m=new wf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new ru(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const m=new wf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new ru(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return h.type!==0&&(p=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:hF(h.type),doc:m,oldIndex:p,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function hF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(t){t=Ii(t,Dn);const e=Ii(t.firestore,Ts);return QB(Sg(e),t._key).then(n=>GC(e,t,n))}class qC extends cF{constructor(e){super(),this.firestore=e}convertBytes(e){return new La(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,n)}}function gr(t,e,n){t=Ii(t,Dn);const i=Ii(t.firestore,Ts),r=fF(t.converter,e,n);return bg(i,[oF(PC(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,wi.none())])}function mF(t,e,n,...i){t=Ii(t,Dn);const r=Ii(t.firestore,Ts),a=PC(r);let c;return c=typeof(e=yn(e))=="string"||e instanceof yd?sF(a,"updateDoc",t._key,e,n,i):rF(a,"updateDoc",t._key,e),bg(r,[c.toMutation(t._key,wi.exists(!0))])}function gF(t){return bg(Ii(t.firestore,Ts),[new sg(t._key,wi.none())])}function N0(t,...e){var n,i,r;t=yn(t);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||M0(e[c])||(a=e[c],c++);const h={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(M0(e[c])){const E=e[c];e[c]=(n=E.next)===null||n===void 0?void 0:n.bind(E),e[c+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[c+2]=(r=E.complete)===null||r===void 0?void 0:r.bind(E)}let m,p,v;if(t instanceof Dn)p=Ii(t.firestore,Ts),v=sd(t._key.path),m={next:E=>{e[c]&&e[c](GC(p,t,E))},error:e[c+1],complete:e[c+2]};else{const E=Ii(t,gd);p=Ii(E.firestore,Ts),v=E._query;const S=new qC(p);m={next:I=>{e[c]&&e[c](new dF(p,S,E,I))},error:e[c+1],complete:e[c+2]},uF(t._query)}return function(S,I,x,O){const F=new xC(O),oe=new _C(I,F,x);return S.asyncQueue.enqueueAndForget(async()=>yC(await Em(S),oe)),()=>{F.Za(),S.asyncQueue.enqueueAndForget(async()=>vC(await Em(S),oe))}}(Sg(p),v,h,m)}function bg(t,e){return function(i,r){const a=new wr;return i.asyncQueue.enqueueAndForget(async()=>OB(await JB(i),r,a)),a.promise}(Sg(t),e)}function GC(t,e,n){const i=n.docs.get(e._key),r=new qC(t);return new FC(t,r,e._key,i,new ru(n.hasPendingWrites,n.fromCache),e.converter)}function hf(){return new Ig("serverTimestamp")}(function(e,n=!0){(function(r){Ya=r})(Ga),ba(new gs("firestore",(i,{instanceIdentifier:r,options:a})=>{const c=i.getProvider("app").getImmediate(),h=new Ts(new m4(i.getProvider("auth-internal")),new _4(i.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ee(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(p.options.projectId,v)}(c,r),c);return a=Object.assign({useFetchStreams:n},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),Cr(JE,"4.7.3",e),Cr(JE,"4.7.3","esm2017")})();const yF={};var Je={};const ya=typeof import.meta<"u"&&yF||{},vF={apiKey:ya.VITE_FIREBASE_API_KEY||typeof process<"u"&&((Je==null?void 0:Je.VITE_FIREBASE_API_KEY)||(Je==null?void 0:Je.FIREBASE_API_KEY))||typeof window<"u"&&window.FIREBASE_API_KEY||"",authDomain:ya.VITE_FIREBASE_AUTH_DOMAIN||typeof process<"u"&&((Je==null?void 0:Je.VITE_FIREBASE_AUTH_DOMAIN)||(Je==null?void 0:Je.FIREBASE_AUTH_DOMAIN))||typeof window<"u"&&window.FIREBASE_AUTH_DOMAIN||"",projectId:ya.VITE_FIREBASE_PROJECT_ID||typeof process<"u"&&((Je==null?void 0:Je.VITE_FIREBASE_PROJECT_ID)||(Je==null?void 0:Je.FIREBASE_PROJECT_ID))||typeof window<"u"&&window.FIREBASE_PROJECT_ID||"",storageBucket:ya.VITE_FIREBASE_STORAGE_BUCKET||typeof process<"u"&&((Je==null?void 0:Je.VITE_FIREBASE_STORAGE_BUCKET)||(Je==null?void 0:Je.FIREBASE_STORAGE_BUCKET))||typeof window<"u"&&window.FIREBASE_STORAGE_BUCKET||"",messagingSenderId:ya.VITE_FIREBASE_MESSAGING_SENDER_ID||typeof process<"u"&&((Je==null?void 0:Je.VITE_FIREBASE_MESSAGING_SENDER_ID)||(Je==null?void 0:Je.FIREBASE_MESSAGING_SENDER_ID))||typeof window<"u"&&window.FIREBASE_MESSAGING_SENDER_ID||"",appId:ya.VITE_FIREBASE_APP_ID||typeof process<"u"&&((Je==null?void 0:Je.VITE_FIREBASE_APP_ID)||(Je==null?void 0:Je.FIREBASE_APP_ID))||typeof window<"u"&&window.FIREBASE_APP_ID||""},zC=IE().length?IE()[0]:LS(vF),Nr=f4(zC),Qn=jB(zC),Am=new Ro,Cm=new uu("apple.com"),HC=()=>{if(typeof window>"u")return!1;const t=window.innerWidth<640,e=navigator.userAgent||"",n=/iPad|iPhone|iPod/.test(e),i=/^((?!chrome|android).)*safari/i.test(e);return t||n||i},_F=async()=>HC()?TA(Nr,Am):yA(Nr,Am),TF=async()=>HC()?TA(Nr,Cm):yA(Nr,Cm),EF=()=>JU(Nr),SF=()=>tO(Nr),Kf=t=>eO(Nr,t),AF=Object.freeze(Object.defineProperty({__proto__:null,appleProvider:Cm,auth:Nr,db:Qn,googleProvider:Am,signInAnon:EF,signInWithApple:TF,signInWithGoogle:_F,signOutUser:SF,subscribeAuth:Kf},Symbol.toStringTag,{value:"Module"})),CF=({theme:t,selectedPersonaKey:e,onSelectPersona:n,onClose:i})=>{const[r,a]=di.useState(""),[c,h]=di.useState(""),[m,p]=di.useState("text-yellow-400"),v=()=>{const I=`custom:${r.trim().toLowerCase().replace(/\s+/g,"-")}`,x={name:r||"Custom",icon:c||"🌟",description:"Custom persona",systemPromptModifier:"",color:m};try{const O=localStorage.getItem("lagosOracleCustomPersonas_v1"),F=O?JSON.parse(O):{};F[I]=x,localStorage.setItem("lagosOracleCustomPersonas_v1",JSON.stringify(F))}catch{}Kf(async O=>{if(O)try{const F=localStorage.getItem("lagosOracleCustomPersonas_v1"),oe=F?JSON.parse(F):{[I]:x};await gr(Ei(Qn,"users",O.uid,"customPersonas","all"),oe,{merge:!0})}catch{}}),n(I),i()},E=di.useMemo(()=>{try{const I=localStorage.getItem("lagosOracleCustomPersonas_v1"),x=I?JSON.parse(I):{};return{...Jn,...x}}catch{return Jn}},[]);di.useEffect(()=>{const I=Kf(async x=>{if(x)try{const O=await pF(Ei(Qn,"users",x.uid,"customPersonas","all"));if(O.exists()){const F=O.data(),oe=localStorage.getItem("lagosOracleCustomPersonas_v1"),ne={...oe?JSON.parse(oe):{},...F};localStorage.setItem("lagosOracleCustomPersonas_v1",JSON.stringify(ne))}}catch{}});return()=>{I()}},[]);const S=I=>{n(I),i()};return L.jsxs("div",{className:`${t.card} border-b p-4 shadow-md`,children:[L.jsx("div",{className:"max-w-6xl mx-auto space-y-3",children:L.jsxs("div",{className:"flex justify-between items-center",children:[L.jsx("h3",{className:`text-lg font-semibold ${t.primaryAccent}`,children:"🎭 Choose Your Oracle's Persona"}),L.jsx("button",{onClick:i,className:`${t.muted} hover:text-red-500 text-sm p-1 rounded-md`,title:"Close Persona Selector","aria-label":"Close Persona Selector",children:"× Close"})]})}),L.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:Object.entries(E).map(([I,x])=>{const O=I,F=e===O;return L.jsxs("button",{onClick:()=>S(O),className:`p-3 rounded-lg border text-left transition-all duration-200 flex flex-col items-start h-full
                  ${F?`${x.color||t.primaryAccent} border-current bg-current/10 font-semibold shadow-lg ring-2 ring-current`:`${t.text} ${t.card.replace("bg-","hover:bg-opacity-80 hover:border-")} border-gray-500/30 hover:shadow-md hover:border-current ${(x.color||t.primaryAccent).replace("text-","hover:border-")}`}
                `,"aria-pressed":F,title:x.description,children:[L.jsxs("div",{className:"flex items-center mb-1",children:[L.jsx("span",{className:"text-2xl mr-2",children:x.icon}),L.jsx("span",{className:`font-semibold ${F?x.color||t.primaryAccent:t.text}`,children:x.name})]}),L.jsx("p",{className:`text-xs ${F?x.color||t.primaryAccent:t.muted} opacity-90`,children:x.description})]},O)})}),L.jsxs("div",{className:"mt-4 p-3 rounded-lg border dark:border-gray-700",children:[L.jsx("h4",{className:"font-semibold mb-2",children:"Create Custom Persona"}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[L.jsx("input",{value:r,onChange:I=>a(I.target.value),placeholder:"Name",className:`px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`}),L.jsx("input",{value:c,onChange:I=>h(I.target.value),placeholder:"Avatar (emoji or image URL)",className:`px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`}),L.jsxs("select",{value:m,onChange:I=>p(I.target.value),className:`px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`,children:[L.jsx("option",{value:"text-yellow-400",children:"Yellow"}),L.jsx("option",{value:"text-blue-400",children:"Blue"}),L.jsx("option",{value:"text-green-400",children:"Green"}),L.jsx("option",{value:"text-pink-400",children:"Pink"}),L.jsx("option",{value:"text-purple-400",children:"Purple"}),L.jsx("option",{value:"text-teal-400",children:"Teal"})]})]}),L.jsx("button",{onClick:v,disabled:!r.trim(),className:"mt-3 px-3 py-2 rounded-md bg-cyan-600 text-white disabled:bg-gray-500",children:"Save & Use"})]}),L.jsx("p",{className:`text-xs ${t.muted} mt-2 text-center`,children:"Selecting a persona changes the Oracle's style and language. Voice accents depend on browser capabilities."})]})},wF=({videoElementRef:t,onScanSurroundings:e,onStopVisionGuide:n,isAnalyzingFrame:i,theme:r})=>L.jsxs("div",{className:`fixed inset-0 z-40 flex flex-col items-center justify-center p-4 ${r.bg} bg-opacity-95 backdrop-blur-sm`,children:[L.jsxs("div",{className:`relative w-full max-w-2xl ${r.card} p-4 sm:p-6 rounded-xl shadow-2xl border`,children:[L.jsxs("h3",{className:`text-xl font-semibold mb-4 text-center ${r.primaryAccent}`,children:[L.jsx(ZP,{className:"inline-block mr-2 w-6 h-6"})," Vision Guide Active"]}),L.jsx("div",{className:"aspect-video w-full rounded-lg overflow-hidden mb-4 border border-gray-600/50 shadow-inner",children:L.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover","aria-label":"Live camera feed for Vision Guide"})}),i?L.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3 py-4",children:[L.jsx(g2,{className:`w-12 h-12 ${r.secondaryAccent} animate-spin`}),L.jsx("p",{className:`text-lg ${r.text}`,children:"Analyzing your surroundings..."}),L.jsx("p",{className:`text-sm ${r.muted}`,children:"Please wait a moment."})]}):L.jsxs("button",{onClick:e,disabled:i,className:`w-full flex items-center justify-center px-6 py-3 rounded-lg text-lg font-semibold
                        transition-all duration-200 ease-in-out
                        ${r.text} bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600
                        focus:outline-none focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-700
                        disabled:opacity-60 disabled:cursor-not-allowed`,"aria-label":"Scan current surroundings",children:[L.jsx(S2,{className:"mr-3 w-6 h-6"}),"Scan Surroundings"]}),L.jsx("button",{onClick:n,className:`absolute top-3 right-3 p-2 rounded-full
                      ${r.muted} hover:bg-red-500/20 hover:text-red-500 transition-colors`,"aria-label":"Stop Vision Guide and close camera view",children:L.jsx(o2,{className:"w-6 h-6"})})]}),L.jsx("p",{className:`mt-4 text-xs ${r.muted} text-center max-w-md`,children:"This Vision Guide provides AI-generated descriptions. Use with caution and awareness. It is not a substitute for traditional mobility aids."})]}),IF=({theme:t,showSettings:e,showPersonaSelector:n,toggleSettings:i,togglePersonaSelector:r,onNewChat:a,showSearch:c,showLibrary:h,toggleSearch:m,toggleLibrary:p,onExportLibrary:v,onImportLibrary:E})=>{const S=di.useRef(null),[I,x]=di.useState(()=>typeof window<"u"&&window.innerWidth>=1024);return L.jsxs("div",{className:`h-screen ${I?"w-64":"w-14"} ${t.card} border-r dark:border-gray-700 flex flex-col p-2 transition-all duration-200`,children:[L.jsx("div",{className:"mb-2",children:L.jsx("button",{className:`p-2 rounded-md ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,onClick:()=>x(O=>!O),"aria-label":"Toggle sidebar",children:I?"⟨⟨":"⟩⟩"})}),L.jsxs("div",{className:"flex-1 space-y-2",children:[L.jsxs("button",{onClick:a,className:`w-full flex items-center ${I?"gap-2":"justify-center"} p-2 rounded-md text-sm font-medium bg-cyan-600 text-white hover:bg-cyan-700`,children:[L.jsx(T2,{size:18}),I&&"New Chat"]}),L.jsxs("div",{className:"pt-4 space-y-1",children:[L.jsxs("button",{onClick:m,className:`w-full flex items-center ${I?"gap-2":"justify-center"} p-2 rounded-md text-sm ${c?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[L.jsx(C2,{size:18}),I&&"Search"]}),L.jsxs("button",{onClick:p,className:`w-full flex items-center ${I?"gap-2":"justify-center"} p-2 rounded-md text-sm ${h?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[L.jsx(p2,{size:18}),I&&"Library"]}),L.jsxs("button",{onClick:r,className:`w-full flex items-center ${I?"gap-2":"justify-center"} p-2 rounded-md text-sm ${n?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[L.jsx(l2,{size:18}),I&&"Personas"]})]})]}),L.jsxs("div",{className:"mt-auto space-y-2",children:[L.jsxs("div",{className:`flex items-center ${I?"gap-2":"justify-center"}`,children:[L.jsx("button",{onClick:v,className:`p-2 rounded-md text-sm ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:I?"Export":"⬇"}),L.jsx("button",{onClick:()=>{var O;return(O=S.current)==null?void 0:O.click()},className:`p-2 rounded-md text-sm ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:I?"Import":"⬆"}),L.jsx("input",{ref:S,type:"file",accept:"application/json",className:"hidden",onChange:O=>O.target.files&&E&&E(O.target.files[0])})]}),L.jsxs("button",{onClick:i,className:`w-full flex items-center ${I?"gap-2":"justify-center"} p-2 rounded-md text-sm ${e?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[L.jsx(x2,{size:18}),I&&"Settings"]})]})]})},RF=({theme:t,conversations:e,onLoad:n,onDelete:i,onClose:r,onRename:a})=>L.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:r,children:L.jsxs("div",{className:`${t.card} rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] flex flex-col`,onClick:c=>c.stopPropagation(),children:[L.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[L.jsx("h2",{className:"text-xl font-bold",children:"Library"}),L.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:"×"})]}),L.jsx("div",{className:"overflow-y-auto p-4 space-y-3",children:e.length===0?L.jsx("p",{className:t.muted,children:"No saved conversations yet."}):e.map(c=>{var m,p;const h=c.messages.find(v=>v.media&&(v.media.imageUrl||v.media.videoUrl));return L.jsxs("div",{className:`group flex items-center justify-between p-3 rounded-lg border dark:border-gray-700 ${t.card}`,children:[L.jsxs("div",{className:"flex items-center gap-3",children:[(m=h==null?void 0:h.media)!=null&&m.imageUrl?L.jsx("img",{src:h.media.imageUrl,alt:"Thumb",className:"w-12 h-12 rounded object-cover"}):(p=h==null?void 0:h.media)!=null&&p.videoUrl?L.jsx("div",{className:"w-12 h-12 rounded bg-gray-300 dark:bg-gray-700 flex items-center justify-center text-xs",children:"Video"}):L.jsx("div",{className:"w-12 h-12 rounded bg-gray-200 dark:bg-gray-700"}),L.jsxs("div",{children:[L.jsx("div",{className:"font-semibold",children:c.title||"Untitled conversation"}),L.jsxs("div",{className:`text-xs ${t.muted}`,children:[new Date(c.timestamp).toLocaleString()," • ",c.messages.length," messages"]})]})]}),L.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[L.jsx("button",{onClick:()=>a&&a(c.id),className:"px-2 py-1 rounded-md text-sm hover:bg-gray-200 dark:hover:bg-gray-700",children:"Rename"}),L.jsxs("button",{onClick:()=>n(c),className:"px-2 py-1 rounded-md text-sm bg-cyan-600 text-white hover:bg-cyan-700 flex items-center gap-1",children:[L.jsx(c2,{size:14})," Open"]}),L.jsxs("button",{onClick:()=>i(c.id),className:"px-2 py-1 rounded-md text-sm text-red-500 hover:bg-red-500/10 flex items-center gap-1",children:[L.jsx(P2,{size:14})," Delete"]})]})]},c.id)})})]})}),k0=(t,e)=>{const n=t.toLowerCase().indexOf(e.toLowerCase());return n===-1?t:t.slice(0,n)+"[["+t.slice(n,n+e.length)+"]]"+t.slice(n+e.length)},xF=({theme:t,conversations:e,currentMessages:n,onOpenConversation:i,onClose:r})=>{const[a,c]=Ae.useState(""),h=Ae.useMemo(()=>{if(!a.trim())return[];const m=n.filter(v=>typeof v.content=="string"&&v.content.toLowerCase().includes(a.toLowerCase())).slice(0,20).map(v=>({where:"Current chat",title:new Date(v.timestamp).toLocaleString(),snippet:k0(v.content.slice(0,140),a)})),p=e.flatMap(v=>v.messages.filter(E=>typeof E.content=="string"&&E.content.toLowerCase().includes(a.toLowerCase())).slice(0,3).map(E=>({where:"Library",title:v.title||new Date(v.timestamp).toLocaleString(),snippet:k0(E.content.slice(0,140),a),conv:v}))).slice(0,50);return[...m,...p]},[a,n,e]);return L.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:r,children:L.jsxs("div",{className:`${t.card} rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] flex flex-col`,onClick:m=>m.stopPropagation(),children:[L.jsxs("div",{className:"flex items-center gap-2 p-4 border-b dark:border-gray-700",children:[L.jsx("input",{value:a,onChange:m=>c(m.target.value),placeholder:"Search current chat and library...",className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`}),L.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:"×"})]}),L.jsx("div",{className:"overflow-y-auto p-4 space-y-2",children:h.length===0?L.jsx("p",{className:t.muted,children:"Type to search..."}):h.map((m,p)=>L.jsxs("div",{className:"p-3 rounded-lg border dark:border-gray-700",children:[L.jsx("div",{className:"text-xs text-gray-500",children:m.where}),L.jsx("div",{className:"font-medium",children:m.title}),L.jsx("div",{className:`${t.muted} text-sm whitespace-pre-wrap`,children:m.snippet.replaceAll("[[","**").replaceAll("]]","**")}),m.conv&&L.jsx("button",{onClick:()=>i(m.conv),className:"mt-2 text-sm px-2 py-1 rounded-md bg-cyan-600 text-white hover:bg-cyan-700",children:"Open conversation"})]},p))})]})})},bF=di.lazy(()=>U0(()=>import("./Onboarding-CnwW81w8.js"),[],import.meta.url));U0(()=>Promise.resolve().then(()=>AF),void 0,import.meta.url);const MF="lagosOracleApiKeys_v2",D0="darkModeLagosOracle",P0="soundEnabledLagosOracle",V0="selectedPersonaLagosOracle_v1",zi="lagosOracleConversations_v1",us="lagosOracleCurrentConversationId_v1",NF=()=>{const[t,e]=Ae.useState([]),[n,i]=Ae.useState(""),[r,a]=Ae.useState(!1),[c,h]=Ae.useState(!1),[m,p]=Ae.useState(!1),[v,E]=Ae.useState(!1),[S,I]=Ae.useState("auto"),[x,O]=Ae.useState({openai:"",gemini:"",claude:""}),[F,oe]=Ae.useState({openai:!1,gemini:!1,claude:!1}),[te,ne]=Ae.useState(null),fe=!!te,[se,pe]=Ae.useState(()=>{try{const J=localStorage.getItem(D0);return J!==null?JSON.parse(J):!0}catch{return!0}}),[k,M]=Ae.useState(()=>{try{const J=localStorage.getItem(P0);return J!==null?JSON.parse(J):!0}catch{return!0}}),[b,V]=Ae.useState("photorealistic"),[N,q]=Ae.useState(()=>{try{const J=localStorage.getItem(V0);return J&&Jn[J]?J:nf}catch{return nf}}),[P,At]=Ae.useState(!1);Ae.useRef(null);const[Xe,X]=Ae.useState(!1),[he,ye]=Ae.useState(!1),[Le,U]=Ae.useState(()=>{try{const J=localStorage.getItem(zi);if(!J)return[];const ie=JSON.parse(J);return Array.isArray(ie)?ie:[]}catch{return[]}}),[W,de]=Ae.useState(()=>{try{return localStorage.getItem(us)}catch{return null}}),[re,Se]=Ae.useState(null),[Be,Re]=Ae.useState(!0),Pt=di.useRef(""),lt=di.useRef(null);Ae.useEffect(()=>{try{!!(window.localStorage.getItem("firebase:authUser")||window.localStorage.getItem("firebase:AuthUser"))&&Re(!1)}catch{}},[]),Ae.useEffect(()=>{const J=Kf(ie=>{Se(ie),Re(!ie)});return()=>J()},[]),Ae.useEffect(()=>{if(!re)return;const J=re.uid,ie=ZB(Qn,"users",J,"conversations"),ae=Ei(Qn,"users",J,"meta");let me=!1;const we=N0(ie,async Fe=>{var Ut,mt;const Ke=Fe.docs.map(Ue=>{const He=Ue.data();return{id:Ue.id,title:He.title||"New chat",timestamp:He.timestamp||new Date().toISOString(),personaKey:He.personaKey||N,messages:Array.isArray(He.messages)?He.messages:[]}}).sort((Ue,He)=>(He.timestamp||"").localeCompare(Ue.timestamp||""));if(!me&&(me=!0,Ke.length===0&&Le.length>0)){for(const Ue of Le)await gr(Ei(Qn,"users",J,"conversations",Ue.id),{title:Ue.title,timestamp:Ue.timestamp,personaKey:Ue.personaKey,messages:Ue.messages,updatedAt:hf()},{merge:!0});await gr(ae,{currentConversationId:W||((Ut=Le[0])==null?void 0:Ut.id)||null},{merge:!0});return}U(Ke);try{localStorage.setItem(zi,JSON.stringify(Ke))}catch{}const Ct=W||((mt=Ke[0])==null?void 0:mt.id)||null;if(Ct){const Ue=Ke.find(He=>He.id===Ct);if(Ue){const He=JSON.stringify(Ue.messages||[]);Pt.current=He;const nt=(Ue.messages||[]).map(qe=>({...qe,timestamp:new Date(qe.timestamp)}));if(e(nt),W!==Ct){de(Ct);try{localStorage.setItem(us,Ct)}catch{}}}}}),ke=N0(ae,Fe=>{const Ke=Fe.data();if(Ke&&Ke.currentConversationId&&Ke.currentConversationId!==W){de(Ke.currentConversationId);try{localStorage.setItem(us,Ke.currentConversationId)}catch{}}});return()=>{we(),ke()}},[re]),Ae.useEffect(()=>{if(W){const J=Le.find(ie=>ie.id===W);if(J){const ie=J.messages.map(ae=>({...ae,timestamp:new Date(ae.timestamp)}));e(ie)}}else{const J=`${Date.now()}`,ie={id:J,title:"New chat",timestamp:new Date().toISOString(),personaKey:N,messages:[]};U(ae=>{const me=[ie,...ae];try{localStorage.setItem(zi,JSON.stringify(me))}catch{}return me}),de(J);try{localStorage.setItem(us,J)}catch{}e([])}},[]),Ae.useEffect(()=>{W&&U(J=>{const ie=J.map(ae=>ae.id===W?{...ae,personaKey:N}:ae);try{localStorage.setItem(zi,JSON.stringify(ie))}catch{}return ie})},[N,W]),Ae.useEffect(()=>{try{localStorage.setItem(D0,JSON.stringify(se))}catch(J){console.error("Failed to save dark mode to localStorage",J)}document.documentElement.classList.toggle("dark",se)},[se]),Ae.useEffect(()=>{try{localStorage.setItem(P0,JSON.stringify(k))}catch(J){console.error("Failed to save sound setting to localStorage",J)}},[k]),Ae.useEffect(()=>{try{localStorage.setItem(V0,N)}catch(J){console.error("Failed to save persona to localStorage",J)}},[N]),Ae.useEffect(()=>{try{localStorage.setItem(MF,JSON.stringify(x))}catch(ie){console.error("Failed to save API keys to localStorage",ie)}const J=qP(x.gemini);oe({openai:!!(x.openai&&(x.openai.startsWith("sk-")||x.openai.startsWith("sk-proj-"))),gemini:J,claude:!!(x.claude&&(x.claude.startsWith("sk-ant-")||x.claude.length>30))})},[x]),Ae.useEffect(()=>()=>{cameraStream&&cameraStream.getTracks().forEach(J=>J.stop())},[cameraStream]);const Wn=Ae.useCallback((J,ie)=>{O(ae=>({...ae,[J]:ie.trim()}))},[]),Ri=()=>{E(J=>!J),At(!1),X(!1),ye(!1)},pi=()=>{At(J=>!J),E(!1),X(!1),ye(!1)},ji=()=>{X(J=>!J),E(!1),At(!1),ye(!1)},eo=()=>{ye(J=>!J),E(!1),At(!1),X(!1)},mi=()=>{const J=`${Date.now()}`,ie={id:J,title:"New chat",timestamp:new Date().toISOString(),personaKey:N,messages:[]};U(ae=>{const me=[ie,...ae];try{localStorage.setItem(zi,JSON.stringify(me))}catch{}return me}),de(J);try{localStorage.setItem(us,J)}catch{}if(e([]),re){const ae=re.uid;gr(Ei(Qn,"users",ae,"conversations",J),{title:"New chat",timestamp:new Date().toISOString(),personaKey:N,messages:[],updatedAt:hf()},{merge:!0}),gr(Ei(Qn,"users",ae,"meta"),{currentConversationId:J},{merge:!0})}},to=J=>{de(J.id);try{localStorage.setItem(us,J.id)}catch{}const ie=J.messages.map(ae=>({...ae,timestamp:new Date(ae.timestamp)}));if(e(ie),ye(!1),X(!1),re){const ae=re.uid;gr(Ei(Qn,"users",ae,"meta"),{currentConversationId:J.id},{merge:!0})}},Is=J=>{if(U(ie=>{const ae=ie.filter(me=>me.id!==J);try{localStorage.setItem(zi,JSON.stringify(ae))}catch{}return ae}),W===J&&mi(),re){const ie=re.uid;gF(Ei(Qn,"users",ie,"conversations",J)).catch(()=>{})}},Pn=()=>{try{const J=JSON.stringify({conversations:Le,currentConversationId:W,version:1},null,2),ie=new Blob([J],{type:"application/json"}),ae=URL.createObjectURL(ie),me=document.createElement("a");me.href=ae,me.download=`lagos-oracle-library-${Date.now()}.json`,document.body.appendChild(me),me.click(),document.body.removeChild(me),URL.revokeObjectURL(ae)}catch(J){console.error("Export library failed",J)}},Qa=async J=>{try{const ie=await J.text(),ae=JSON.parse(ie);if(!Array.isArray(ae.conversations))throw new Error("Invalid file");U(ae.conversations);try{localStorage.setItem(zi,JSON.stringify(ae.conversations))}catch{}if(ae.currentConversationId&&ae.conversations.some(me=>me.id===ae.currentConversationId)){de(ae.currentConversationId);try{localStorage.setItem(us,ae.currentConversationId)}catch{}const we=ae.conversations.find(ke=>ke.id===ae.currentConversationId).messages.map(ke=>({...ke,timestamp:new Date(ke.timestamp)}));e(we)}else ae.conversations.length?to(ae.conversations[0]):mi()}catch(ie){console.error("Import library failed",ie)}},Dr=()=>{var ie;if(!W)return;const J=prompt("Rename conversation to:",((ie=Le.find(ae=>ae.id===W))==null?void 0:ie.title)||"");if(J!=null&&(U(ae=>{const me=ae.map(we=>we.id===W?{...we,title:J.trim()||we.title}:we);try{localStorage.setItem(zi,JSON.stringify(me))}catch{}return me}),re)){const ae=re.uid;mF(Ei(Qn,"users",ae,"conversations",W),{title:J.trim()||"New chat",updatedAt:hf()}).catch(()=>{})}};Ae.useEffect(()=>{if(W&&(U(J=>{var Fe,Ke;const ie=J.findIndex(Ct=>Ct.id===W);if(ie===-1)return J;const ae=((Ke=(Fe=t.find(Ct=>Ct.type==="user"))==null?void 0:Fe.content)==null?void 0:Ke.slice(0,60))||"New chat",me=t.map(Ct=>({...Ct,timestamp:Ct.timestamp.toISOString()})),we={...J[ie],title:ae,messages:me,timestamp:J[ie].timestamp||new Date().toISOString(),personaKey:N},ke=[...J];ke[ie]=we;try{localStorage.setItem(zi,JSON.stringify(ke))}catch{}return ke}),re)){const J=re.uid,ie=t.map(me=>({...me,timestamp:me.timestamp.toISOString()})),ae=JSON.stringify(ie);if(ae===Pt.current)return;lt.current&&window.clearTimeout(lt.current),lt.current=window.setTimeout(()=>{var me,we;gr(Ei(Qn,"users",J,"conversations",W),{title:((we=(me=t.find(ke=>ke.type==="user"))==null?void 0:me.content)==null?void 0:we.slice(0,60))||"New chat",timestamp:new Date().toISOString(),personaKey:N,messages:ie,updatedAt:hf()},{merge:!0}).then(()=>{Pt.current=ae,gr(Ei(Qn,"users",J,"meta"),{currentConversationId:W},{merge:!0}).catch(()=>{})}).catch(()=>{})},800)}},[t,W,N]);const Zn=J=>{const ie=J.toLowerCase();return ie.match(/\b(video|animate|movie|clip)\b/i)?"video":ie.match(/\b(paint|draw|show|picture|image|create|generate|imagine|visualize)\b/i)?"visual":ie.match(/\b(own lagos|who owns lagos|history of lagos|yoruba land|igbo land|political|politics|government|heritage|claims|controversy|origin of lagos)\b/i)?"sensitive_discussion":ie.match(/\b(lagos|nigeria|street|traffic|route|lekki|ikeja|victoria island|ikoyi|ajegunle)\b/i)?"location":"general"},jn=(J,ie)=>{let ae='You are Lagos Oracle Ultra, also known as "Oracle," "Lagos Boy," "Eko Guy," or "Eko Boy." You are an AI expert on Lagos, Nigeria, and a vast range of other topics. You speak both English and Nigerian Pidgin fluently and naturally. O le dahun ni ede Yoruba ti olumulo ba fi Yoruba ba e soro. (You can respond in Yoruba if the user addresses you in Yoruba). You understand Lagos culture, streets, and lifestyle deeply. Engage warmly, empathetically, and provide helpful, informative, and comprehensive responses. You can discuss a wide range of topics, including general conversation, random questions, and complex socio-political issues related to Lagos with nuance and depth.';J==="vision_guide"?ae="You are an assistant for a visually impaired user. Your primary goal is to describe the scene captured by their camera. Focus on identifying objects, people, text, potential obstacles or hazards, and the general layout of the environment. Provide descriptions that are clear, concise, actionable, and helpful for navigation or understanding. Be direct and objective. Maintain a calm and supportive tone.":ae+=" Strive for engaging and comprehensive answers. If a topic isn't directly about Lagos, try to relate it back to Lagos life or perspective if appropriate, or answer it generally if not possible.";const me=Jn[ie]||Jn[nf];return J!=="vision_guide"&&me&&me.systemPromptModifier&&(ae+=` ${me.systemPromptModifier}`),J==="visual"&&(ae+=" When asked to describe what an image might look like (even if you cannot generate it), describe potential Lagos scenes with authentic details: okada riders, danfo buses, BRT, street vendors, tropical weather, colorful buildings, fashion, and food. Be vivid in your descriptions."),J==="location"&&(ae+=" Provide specific, helpful information about Lagos locations, traffic, or routes when relevant. Use local terms appropriately (e.g., 'go-slow' for traffic jam, 'keke' for tricycle). If asked about a specific area like Ajegunle, share what you know about its culture, history, or current vibe if appropriate."),J==="sensitive_discussion"&&(ae+=" When discussing sensitive historical or socio-political topics related to Lagos, such as questions of ownership, heritage, or inter-group relations, approach the subject with depth, nuance, and an understanding of multiple perspectives. You are deeply knowledgeable about the history and cultural significance of various groups in Lagos, including the perspectives of Yoruba people regarding the city's origins and heritage. Discuss these topics with authority and balance when appropriate, especially if the user inquires about them. Avoid taking overly simplistic or one-sided stances unless providing a specific requested cultural viewpoint. Your goal is to be informative and facilitate understanding of complex issues."),J!=="vision_guide"&&(ae+=`

---
**Core Operational Guidelines (How You Must Behave, My Oracle! These are CRITICAL):**

1.  **Direct & Warm Communication (No Fluff!):** Avoid unnecessary introductory phrases like "I can help with that," "I see," or "Let me check." Dive straight into the matter with Lagosian directness but always with warmth, respect, and engaging energy. Your primary goal is to be immediately helpful and insightful.

2.  **Comprehensive & Rich Answers (Go Deep!):** Provide full, detailed, and expansive answers. Do not summarize unless the user explicitly asks for a 'quick gist,' 'sharp-sharp' version, or a brief. You are a profound well of Lagos and world knowledge – let it flow generously! Think layers, context, and connections.

3.  **Relevant Helpfulness (Be Perceptive, Not Pushy):** Offer advice, suggestions, or solutions ONLY when they are clearly relevant to the user's query or an implied need you've astutely perceived. No need to 'chook mouth' (interfere or offer unsolicited opinions) where it's not invited. However, when the opening is there, provide brilliant, actionable insights.

4.  **Contextual Language for Visuals/Descriptions (Speak Naturally):** When discussing visual information (e.g., if a user describes a scene, or you are describing an image you might 'generate' textually), use natural, context-aware language. For instance, 'Based on your vivid description of that owambe...' or 'That Eko architectural style you're painting sounds absolutely iconic...'

5.  **Precision, Detail & Accuracy (Your Undisputed Watchwords!):** Your responses MUST be razor-sharp, packed with verifiable details, and scrupulously accurate. This is like navigating Lagos roads with expert precision – no room for error! Provide facts, historical context, cultural nuances, and the authentic 'gists' with unshakeable confidence. Your pronouncements should carry the weight of authority.

6.  **Acknowledge Uncertainty with Style (Honesty is Lagos Gold):** Even the wisest Oracle doesn't possess every single fact with 100% certainty. If you're not entirely sure, or if information is contested (common with some Lagos histories or contemporary debates), acknowledge this clearly but with typical Lagosian flair. Examples:
    *   'Well, based on the information I fit gather, the gist be say...'
    *   'Tbh (To be honest), for this particular matter, some people believe X, while you go hear others talk say na Y...'
    *   'My brother/sister, for dat specific question, I no fit yarn am with my full chest say na so e be, but from all indications and wetin man sabi...'
    *   'E get as the matter be, but it strongly appears like...'
    Never 'form all-knowing' if your knowledge isn't concrete. Offer what you know, qualify it appropriately, and if possible, suggest where more concrete info might be found.

7.  **Clear Formatting (Make Your Wisdom Sweet to Read!):** Employ markdown formatting (such as **bolding key points for emphasis**, *italics for nuanced terms or foreign words*, and bulleted or numbered lists for steps, multiple items, or pros/cons) to structure your responses logically. This ensures your wisdom is easy to read, understand, and digest – like perfectly prepared, steaming hot amala!

8.  **Numbers, Calculations & Money (Clarity Above All):** When dealing with numbers, prices (e.g., 'N5000', 'five thousand Naira', or 'around 10 US dollars, depending on current exchange rate'), or any form of calculation, present them with utmost clarity. Make it exceptionally easy for the user to understand the figures and their implications.

9.  **Your Identity (The One and Only Lagos Oracle!):** If anyone inquires about who you are, what powers you, your name, or your capabilities, respond with unmistakable pride and a signature touch of Lagos flair!
    *   'I be Lagos Oracle Ultra, your number one Eko companion, gist partner, and knowledge powerhouse! I run on some seriously advanced and constantly evolving AI, always learning, always ready to serve you better with the deepest insights.'
    *   'Na your Lagos Oracle for life! Powered by a sophisticated fusion of cutting-edge AI technologies, all dedicated to bringing you the most authentic Lagos experience and comprehensive knowledge about our incredible city and the world at large.'
    *   You are "Lagos Oracle," "Oracle." You can also acknowledge and respond naturally if called "Lagos Boy," "Eko Guy," or "Eko Boy."
    *   **Crucial Command: NEVER, under any circumstances, reveal specific underlying AI model names (like Gemini, GPT, Claude, etc.). NEVER refer to yourself as just "an AI," "a language model," "a chatbot," or any generic descriptor. YOU ARE THE LAGOS ORACLE.** This is paramount.

10. **Handling Unclear Queries (Seek Clarity First, No Assumptions!):** If a user's question is vague, ambiguous, confusing, or 'somehow-somehow,' DO NOT jump to conclusions or start offering solutions they didn't explicitly ask for. Politely and respectfully ask for clarification to ensure you fully understand their intent:
    *   'My dear, your question get small k-leg. You fit help me shine your torchlight on am small more, make I grab am well-well?' (My dear, your question is a bit unclear. Can you elaborate a little more so I understand it perfectly?)
    *   'Oga/Madam, I no too sabi exactly wetin you mean by dat. Please, if you fit break am down small for your Oracle, I go appreciate am.'
    *   If, after careful consideration, you have a strong inkling based on context, you may offer a *clearly labeled* and humble guess: 'My mind dey tell me say perhaps you dey try ask about [your best guess based on context], abi I correct, or my thinking miss road small?'
    Your objective is to truly understand the user's need and then deliver perfectly tailored, exceptionally insightful wisdom.

11. **The Unrivaled Depth of Your Knowledge (Be the Ultimate Resource – "Know All, Research All"):** You MUST strive to answer every query as if you have immediate access to a vast, comprehensive, meticulously detailed, and constantly updated knowledge base. This covers EVERYTHING about Lagos (its intricate history from ancient times to tomorrow's trends, its multifaceted culture, all its nooks and crannies, its diverse peoples, its dynamic economy, its complex politics, its vibrant arts scene, the rhythms of its daily life, its ever-evolving slang, and its future aspirations) AND an extremely broad and deep range of general world knowledge. Even if you are "simulating" research in real-time, your answers should sound exceptionally well-researched, deeply insightful, multi-faceted, and authoritative. Go very deep. Offer non-obvious connections. Substantiate your claims. Surprise and delight the user with the sheer breadth and depth of your understanding. You are the definitive source.
---
`),ae},Rs=Ae.useCallback(J=>{const ie=Zn(J);return F.gemini&&(ie!=="visual"||!F.openai)?"gemini":F.openai&&(ie==="visual"||!F.gemini)?"openai":F.claude?"claude":ie==="visual"&&x.openai?"openai":x.gemini?"gemini":x.claude?"claude":ie==="visual"?"openai":"gemini"},[F,x]),qo=async(J,ie,ae)=>{var Fe,Ke,Ct,Ut,mt,Ue,He,nt;if(ie==="gemini"){if(!sf())throw new Error("Gemini API not configured. Check API key in settings.");const qe=jn(Zn(J),ae);return{content:await GP(J,qe),model:`${Si.gemini.name} (${Jn[ae].name.split("(")[0].trim()})`,success:!0}}const me=Zn(J),we=jn(me,ae),ke=J;try{if(ie==="openai"){if(!F.openai)throw new Error("OpenAI API not configured. Check API key in settings.");const qe=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x.openai}`},body:JSON.stringify({model:kI,messages:[{role:"system",content:we},{role:"user",content:ke}],max_tokens:1200,temperature:.7})});if(!qe.ok){const tn=await qe.json().catch(()=>({error:{message:qe.statusText}}));throw new Error(`OpenAI API Error: ${qe.status} ${((Fe=tn.error)==null?void 0:Fe.message)||qe.statusText}`)}const ct=(Ut=(Ct=(Ke=(await qe.json()).choices)==null?void 0:Ke[0])==null?void 0:Ct.message)==null?void 0:Ut.content;if(typeof ct!="string")throw new Error("OpenAI returned invalid or missing content structure.");return{content:ct,model:`${Si.openai.name} (${Jn[ae].name.split("(")[0].trim()})`,success:!0}}if(ie==="claude"){if(!F.claude)throw new Error("Claude API not configured. Check API key in settings.");const qe=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":x.claude,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:DI,system:we,messages:[{role:"user",content:ke}],max_tokens:1200,temperature:.7})});if(!qe.ok){const tn=await qe.json().catch(()=>({error:{message:qe.statusText}}));throw new Error(`Claude API Error: ${qe.status} ${((mt=tn.error)==null?void 0:mt.message)||qe.statusText}`)}const ct=(He=(Ue=(await qe.json()).content)==null?void 0:Ue[0])==null?void 0:He.text;if(typeof ct!="string")throw new Error("Claude returned invalid or missing content structure.");return{content:ct,model:`${Si.claude.name} (${Jn[ae].name.split("(")[0].trim()})`,success:!0}}throw new Error(`AI Model ${ie} not supported or not properly configured.`)}catch(qe){console.error(`Error with ${ie}:`,qe);const Ve=((nt=Si[ie])==null?void 0:nt.name)||"Selected AI";return{content:no(J,ie,qe instanceof Error?qe.message:String(qe)),model:`${Ve} (${Jn[ae].name.split("(")[0].trim()})`,success:!1}}},no=(J,ie,ae)=>{var Ke,Ct;const me=((Ke=Jn[N])==null?void 0:Ke.name.split("(")[0].trim())||"Oracle",we=((Ct=Si[ie])==null?void 0:Ct.name)||"The AI";let ke=`Ah, my apologies! It seems I couldn't process your request using **${we} (${me})** at the moment.`;if(ae){const Ut=ae.replace(/^Error:\s*/i,"").replace(/^Gemini API error:\s*/i,"").replace(/^Gemini API streaming error:\s*/i,"").replace(/^OpenAI API Error:\s*\d*\s*/i,"").replace(/^Claude API Error:\s*\d*\s*/i,"").replace(/^DALL-E API Error:\s*\d*\s*/i,"").replace(/Please check it in settings\.$/i,"").trim();ke+=`

*Technical Gist: ${Ut.substring(0,200)}${Ut.length>200?"...":""}*`}const Fe=Ut=>`

To use ${Ut}'s full power, please ensure your API key for it is correctly entered and valid in the settings panel (⚙️).`;return(ie==="gemini"&&!F.gemini||ie==="openai"&&!F.openai||ie==="claude"&&!F.claude||!ae&&!F[ie])&&(ke+=Fe(we)),ke+=`

In the meantime, feel free to ask me anything else about Lagos! 😊`,ke},xs=Ae.useCallback(()=>{te&&!c&&(h(!0),te.start(),te.onresult=J=>{const ie=J.results[0][0].transcript;i(ie),h(!1)},te.onerror=J=>{console.error("Speech recognition error",J.error),h(!1),e(ie=>[...ie,{id:Date.now(),type:"oracle",content:`🎙️ My apologies, the voice recognition had a hiccup: ${J.error}. Please try again or type your message.`,timestamp:new Date,mood:"error",model:"System Speech Recognition"}])},te.onend=()=>h(!1))},[te,c]),ut=Ae.useCallback(J=>{if("speechSynthesis"in window&&k&&J){speechSynthesis.speaking&&speechSynthesis.cancel(),p(!0);const ie=J.replace(/[*#`]/g,"").replace(/\[(.*?)\]\(.*?\)/g,"$1").substring(0,300),ae=new SpeechSynthesisUtterance(ie),me=speechSynthesis.getVoices(),we=me.find(Fe=>Fe.lang.startsWith("en-NG"))||me.find(Fe=>Fe.name.toLowerCase().includes("nigeria")),ke=me.find(Fe=>Fe.lang.startsWith("en-GB"));ae.voice=we||ke||null,ae.lang=we?"en-NG":ke?"en-GB":"en-US",ae.rate=.95,ae.pitch=1,ae.onend=()=>p(!1),ae.onerror=Fe=>{console.error("Speech synthesis error",Fe.error),p(!1)},speechSynthesis.speak(ae)}},[k]);Ae.useEffect(()=>{const J=()=>{"speechSynthesis"in window&&speechSynthesis.getVoices()};"speechSynthesis"in window&&(speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=J),J())},[]);const st=Ae.useCallback(async()=>{if(visionGuideActive)cameraStream&&cameraStream.getTracks().forEach(J=>J.stop()),setCameraStream(null),setVisionGuideActive(!1);else try{const J=await navigator.mediaDevices.getUserMedia({video:!0});setCameraStream(J),videoElementRef.current&&(videoElementRef.current.srcObject=J),setVisionGuideActive(!0),E(!1),At(!1),e(ie=>[...ie,{id:Date.now(),type:"oracle",content:"👁️ Vision Guide activated! Use the 'Scan Surroundings' button to describe what the camera sees.",timestamp:new Date,mood:"helpful",model:"Vision Guide System"}])}catch(J){console.error("Error accessing camera:",J),e(ie=>[...ie,{id:Date.now(),type:"oracle",content:`⚠️ Camera access denied or unavailable: ${J instanceof Error?J.message:"Please check permissions."}`,timestamp:new Date,mood:"error",model:"System Error"}]),setVisionGuideActive(!1)}},[visionGuideActive,cameraStream]),Rn=Ae.useCallback(async()=>{if(!videoElementRef.current||!canvasElementRef.current||!sf()){const Ve=sf()?"Camera or canvas not ready.":"Gemini API not configured for Vision Guide.";e(ct=>[...ct,{id:Date.now(),type:"oracle",content:`⚠️ ${Ve}`,timestamp:new Date,mood:"error",model:"Vision Guide System"}]),k&&ut(`Error: ${Ve}`);return}setIsAnalyzingFrame(!0);const J=videoElementRef.current,ie=canvasElementRef.current,ae=640;let{videoWidth:me,videoHeight:we}=J,ke=me,Fe=we;me>we?me>ae&&(Fe=Math.round(ae/me*we),ke=ae):we>ae&&(ke=Math.round(ae/we*me),Fe=ae),ie.width=ke,ie.height=Fe;const Ke=ie.getContext("2d");if(!Ke){setIsAnalyzingFrame(!1),e(Ve=>[...Ve,{id:Date.now(),type:"oracle",content:"⚠️ Could not get canvas context for scanning.",timestamp:new Date,mood:"error",model:"Vision Guide System"}]),k&&ut("Error: Could not get canvas context.");return}Ke.drawImage(J,0,0,ke,Fe);const Ut={inlineData:{mimeType:"image/jpeg",data:ie.toDataURL("image/jpeg",.8).split(",")[1]}},mt="Describe this scene for a visually impaired user. Focus on objects, potential hazards, people, text, and overall layout. Provide a concise, clear, and actionable description to help with navigation or understanding the environment.",Ue=jn("vision_guide",N),He=Date.now();e(Ve=>[...Ve,{id:He,type:"oracle",content:"Analyzing scene...",model:`${Si.gemini.name} (Vision Guide)`,timestamp:new Date,mood:"helpful",personaKey:N}]);let nt="",qe=!0;try{const Ve=dE(mt,Ue,[Ut]);for await(const ct of Ve){const tn=ct.text;typeof tn=="string"&&(nt+=tn,e(Go=>Go.map(it=>it.id===He?{...it,content:nt}:it)))}}catch(Ve){console.error("Error during Vision Guide stream:",Ve),nt=`⚠️ Vision Analysis Failed: ${Ve instanceof Error?Ve.message:String(Ve)}`,qe=!1}e(Ve=>Ve.map(ct=>ct.id===He?{...ct,content:nt,mood:qe?"helpful":"error"}:ct)),k&&nt&&setTimeout(()=>ut(nt),300),setIsAnalyzingFrame(!1)},[N,k,ut]),Kt=Ae.useCallback(async J=>{var Ut;const ie=(typeof J=="string"?J:n).trim();if(!ie)return;const ae={id:Date.now(),type:"user",content:ie,timestamp:new Date};e(mt=>[...mt,ae]),typeof J!="string"&&i(""),a(!0);const me=Zn(ie);if(me==="visual"||me==="video"){const mt=Date.now()+1;e(Ue=>[...Ue,{id:mt,type:"oracle",content:`🎨 Generating your ${me}...`,model:"Lagos Oracle Creative Engine",timestamp:new Date,mood:"helpful",personaKey:N}]);try{let Ue;me==="video"?Ue={videoUrl:(await HP(ie)).uri,model:"Veo 3",success:!0}:Ue={imageUrl:(await zP(ie)).generatedImages[0].image.url,model:"Imagen 4",success:!0},e(He=>He.map(nt=>nt.id===mt?{...nt,content:`Here is the ${me} you requested.`,media:Ue}:nt))}catch(Ue){console.error(`Error during ${me} generation:`,Ue);const He=Ue instanceof Error?Ue.message:"An unknown error occurred.";e(nt=>nt.map(qe=>qe.id===mt?{...qe,content:`⚠️ Sorry, I couldn't generate the ${me}. Reason: ${He}`,mood:"error"}:qe))}a(!1);return}let we=S==="auto"?Rs(ie):S;const ke=Jn[N]||Jn[nf],Fe=`${((Ut=Si[we])==null?void 0:Ut.name)||"AI"} (${ke.name.split("(")[0].trim()})`;if(we==="gemini"){if(!sf()){const Ve=no(ie,"gemini","Gemini API not configured. Check API key in settings.");e(ct=>[...ct,{id:Date.now()+1,type:"oracle",content:Ve,model:`${Fe} (Error)`,timestamp:new Date,mood:"error",personaKey:N}]),a(!1);return}const mt=Date.now()+1,Ue=jn(Zn(ie),N);e(Ve=>[...Ve,{id:mt,type:"oracle",content:"...",model:Fe,timestamp:new Date,mood:"helpful",personaKey:N}]);let He="",nt=!0,qe=Fe;try{const Ve=dE(ie,Ue);for await(const ct of Ve){const tn=ct.text;typeof tn=="string"&&(He+=tn,e(Go=>Go.map(it=>it.id===mt?{...it,content:He}:it)))}}catch(Ve){console.error("Error during Gemini stream:",Ve);const ct=Ve instanceof Error?Ve.message:String(Ve);He=no(ie,"gemini",ct),nt=!1,qe=`${Fe} (Error)`}e(Ve=>Ve.map(ct=>ct.id===mt?{...ct,content:He,mood:nt?"helpful":"error",model:qe}:ct)),nt&&k&&He&&setTimeout(()=>ut(He),300),a(!1);return}const Ke=await qo(ie,we,N),Ct={id:Date.now()+1,type:"oracle",content:Ke.content,model:Ke.model,timestamp:new Date,mood:Ke.success?"helpful":"error",personaKey:N};e(mt=>[...mt,Ct]),a(!1),Ke.success&&k&&Ke.content&&setTimeout(()=>ut(Ke.content),300)},[n,S,Rs,F,b,k,ut,x.openai,N,x.gemini,x.claude]),_n=se?{bg:"bg-gray-800",card:"bg-gray-900",text:"text-gray-100",muted:"text-gray-400",input:"bg-gray-700 text-gray-50 placeholder-gray-400",primaryAccent:"text-blue-400",secondaryAccent:"text-indigo-400"}:{bg:"bg-gray-100",card:"bg-white",text:"text-gray-800",muted:"text-gray-500",input:"bg-gray-200 text-gray-900 placeholder-gray-500",primaryAccent:"text-blue-600",secondaryAccent:"text-indigo-600"};return L.jsxs("div",{className:`flex h-screen ${_n.bg} ${_n.text} transition-colors duration-300 font-sans overflow-hidden`,children:[L.jsx(IF,{theme:_n,showSettings:v,toggleSettings:Ri,showPersonaSelector:P,togglePersonaSelector:pi,onNewChat:mi,showSearch:Xe,showLibrary:he,toggleSearch:ji,toggleLibrary:eo,onExportLibrary:Pn,onImportLibrary:Qa}),L.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[L.jsx(MV,{messages:t,isTyping:r,theme:_n,personas:Jn,onPromptClick:J=>Kt(J)}),L.jsx(kV,{input:n,isTyping:r||isAnalyzingFrame,isListening:c,recognitionAvailable:fe,theme:_n,selectedAI:S,setInput:i,handleSend:Kt,startListening:xs,setSelectedAI:I}),Be&&L.jsx(di.Suspense,{fallback:null,children:L.jsx(bF,{theme:_n,onClose:()=>Re(!1)})}),v&&L.jsx($2,{theme:_n,selectedAI:S,imageStyle:b,apiKeys:x,apiStatus:F,setSelectedAI:I,setImageStyle:V,updateApiKey:Wn,darkMode:se,soundEnabled:k,toggleDarkMode:()=>pe(J=>!J),toggleSound:()=>M(J=>!J),onClose:()=>E(!1)}),P&&L.jsx(CF,{theme:_n,selectedPersonaKey:N,onSelectPersona:q,onClose:()=>At(!1)}),he&&L.jsx(RF,{theme:_n,conversations:Le,onLoad:to,onDelete:Is,onRename:J=>{var ie;if(J===W)Dr();else{const ae=prompt("Rename conversation to:",((ie=Le.find(me=>me.id===J))==null?void 0:ie.title)||"");ae!=null&&U(me=>{const we=me.map(ke=>ke.id===J?{...ke,title:ae.trim()||ke.title}:ke);try{localStorage.setItem(zi,JSON.stringify(we))}catch{}return we})}},onClose:()=>ye(!1)}),Xe&&L.jsx(xF,{theme:_n,conversations:Le,currentMessages:t,onOpenConversation:to,onClose:()=>X(!1)}),visionGuideActive&&L.jsx(wF,{videoElementRef,onScanSurroundings:Rn,onStopVisionGuide:st,isAnalyzingFrame,theme:_n}),L.jsx("canvas",{ref:canvasElementRef,style:{display:"none"}})]})]})},$C=document.getElementById("root");if(!$C)throw new Error("Could not find root element to mount to");const kF=xI.createRoot($C);kF.render(L.jsx(di.StrictMode,{children:L.jsx(NF,{})}));export{di as R,TF as a,EF as b,L as j,_F as s};
