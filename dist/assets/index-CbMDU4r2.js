var SI=Object.defineProperty;var AI=(t,e,n)=>e in t?SI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ct=(t,e,n)=>AI(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function VE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vp={exports:{}},Wl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function CI(){if(O_)return Wl;O_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var c=null;if(a!==void 0&&(c=""+a),r.key!==void 0&&(c=""+r.key),"key"in r){a={};for(var h in r)h!=="key"&&(a[h]=r[h])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:c,ref:r!==void 0?r:null,props:a}}return Wl.Fragment=e,Wl.jsx=n,Wl.jsxs=n,Wl}var B_;function wI(){return B_||(B_=1,vp.exports=CI()),vp.exports}var N=wI(),_p={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function II(){if(F_)return Be;F_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=E&&U[E]||U["@@iterator"],typeof U=="function"?U:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,O={};function F(U,W,he){this.props=U,this.context=W,this.refs=O,this.updater=he||I}F.prototype.isReactComponent={},F.prototype.setState=function(U,W){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,W,"setState")},F.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function re(){}re.prototype=F.prototype;function te(U,W,he){this.props=U,this.context=W,this.refs=O,this.updater=he||I}var ne=te.prototype=new re;ne.constructor=te,x(ne,F.prototype),ne.isPureReactComponent=!0;var ce=Array.isArray,se={H:null,A:null,T:null,S:null,V:null},me=Object.prototype.hasOwnProperty;function D(U,W,he,ae,Ae,Fe){return he=Fe.ref,{$$typeof:t,type:U,key:W,ref:he!==void 0?he:null,props:Fe}}function M(U,W){return D(U.type,W,void 0,void 0,void 0,U.props)}function b(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function L(U){var W={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(he){return W[he]})}var k=/\/+/g;function q(U,W){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):W.toString(36)}function V(){}function Et(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(V,V):(U.status="pending",U.then(function(W){U.status==="pending"&&(U.status="fulfilled",U.value=W)},function(W){U.status==="pending"&&(U.status="rejected",U.reason=W)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function We(U,W,he,ae,Ae){var Fe=typeof U;(Fe==="undefined"||Fe==="boolean")&&(U=null);var be=!1;if(U===null)be=!0;else switch(Fe){case"bigint":case"string":case"number":be=!0;break;case"object":switch(U.$$typeof){case t:case e:be=!0;break;case v:return be=U._init,We(be(U._payload),W,he,ae,Ae)}}if(be)return Ae=Ae(U),be=ae===""?"."+q(U,0):ae,ce(Ae)?(he="",be!=null&&(he=be.replace(k,"$&/")+"/"),We(Ae,W,he,"",function(Rn){return Rn})):Ae!=null&&(b(Ae)&&(Ae=M(Ae,he+(Ae.key==null||U&&U.key===Ae.key?"":(""+Ae.key).replace(k,"$&/")+"/")+be)),W.push(Ae)),1;be=0;var Dt=ae===""?".":ae+":";if(ce(U))for(var at=0;at<U.length;at++)ae=U[at],Fe=Dt+q(ae,at),be+=We(ae,W,he,Fe,Ae);else if(at=S(U),typeof at=="function")for(U=at.call(U),at=0;!(ae=U.next()).done;)ae=ae.value,Fe=Dt+q(ae,at++),be+=We(ae,W,he,Fe,Ae);else if(Fe==="object"){if(typeof U.then=="function")return We(Et(U),W,he,ae,Ae);throw W=String(U),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return be}function X(U,W,he){if(U==null)return U;var ae=[],Ae=0;return We(U,ae,"","",function(Fe){return W.call(he,Fe,Ae++)}),ae}function pe(U){if(U._status===-1){var W=U._result;W=W(),W.then(function(he){(U._status===0||U._status===-1)&&(U._status=1,U._result=he)},function(he){(U._status===0||U._status===-1)&&(U._status=2,U._result=he)}),U._status===-1&&(U._status=0,U._result=W)}if(U._status===1)return U._result.default;throw U._result}var ye=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function Ue(){}return Be.Children={map:X,forEach:function(U,W,he){X(U,function(){W.apply(this,arguments)},he)},count:function(U){var W=0;return X(U,function(){W++}),W},toArray:function(U){return X(U,function(W){return W})||[]},only:function(U){if(!b(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Be.Component=F,Be.Fragment=n,Be.Profiler=r,Be.PureComponent=te,Be.StrictMode=i,Be.Suspense=m,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,Be.__COMPILER_RUNTIME={__proto__:null,c:function(U){return se.H.useMemoCache(U)}},Be.cache=function(U){return function(){return U.apply(null,arguments)}},Be.cloneElement=function(U,W,he){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ae=x({},U.props),Ae=U.key,Fe=void 0;if(W!=null)for(be in W.ref!==void 0&&(Fe=void 0),W.key!==void 0&&(Ae=""+W.key),W)!me.call(W,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&W.ref===void 0||(ae[be]=W[be]);var be=arguments.length-2;if(be===1)ae.children=he;else if(1<be){for(var Dt=Array(be),at=0;at<be;at++)Dt[at]=arguments[at+2];ae.children=Dt}return D(U.type,Ae,void 0,void 0,Fe,ae)},Be.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},Be.createElement=function(U,W,he){var ae,Ae={},Fe=null;if(W!=null)for(ae in W.key!==void 0&&(Fe=""+W.key),W)me.call(W,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(Ae[ae]=W[ae]);var be=arguments.length-2;if(be===1)Ae.children=he;else if(1<be){for(var Dt=Array(be),at=0;at<be;at++)Dt[at]=arguments[at+2];Ae.children=Dt}if(U&&U.defaultProps)for(ae in be=U.defaultProps,be)Ae[ae]===void 0&&(Ae[ae]=be[ae]);return D(U,Fe,void 0,void 0,null,Ae)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(U){return{$$typeof:h,render:U}},Be.isValidElement=b,Be.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:pe}},Be.memo=function(U,W){return{$$typeof:p,type:U,compare:W===void 0?null:W}},Be.startTransition=function(U){var W=se.T,he={};se.T=he;try{var ae=U(),Ae=se.S;Ae!==null&&Ae(he,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(Ue,ye)}catch(Fe){ye(Fe)}finally{se.T=W}},Be.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},Be.use=function(U){return se.H.use(U)},Be.useActionState=function(U,W,he){return se.H.useActionState(U,W,he)},Be.useCallback=function(U,W){return se.H.useCallback(U,W)},Be.useContext=function(U){return se.H.useContext(U)},Be.useDebugValue=function(){},Be.useDeferredValue=function(U,W){return se.H.useDeferredValue(U,W)},Be.useEffect=function(U,W,he){var ae=se.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(U,W)},Be.useId=function(){return se.H.useId()},Be.useImperativeHandle=function(U,W,he){return se.H.useImperativeHandle(U,W,he)},Be.useInsertionEffect=function(U,W){return se.H.useInsertionEffect(U,W)},Be.useLayoutEffect=function(U,W){return se.H.useLayoutEffect(U,W)},Be.useMemo=function(U,W){return se.H.useMemo(U,W)},Be.useOptimistic=function(U,W){return se.H.useOptimistic(U,W)},Be.useReducer=function(U,W,he){return se.H.useReducer(U,W,he)},Be.useRef=function(U){return se.H.useRef(U)},Be.useState=function(U){return se.H.useState(U)},Be.useSyncExternalStore=function(U,W,he){return se.H.useSyncExternalStore(U,W,he)},Be.useTransition=function(){return se.H.useTransition()},Be.version="19.1.1",Be}var q_;function Am(){return q_||(q_=1,_p.exports=II()),_p.exports}var _e=Am();const Si=VE(_e);var Tp={exports:{}},Zl={},Ep={exports:{}},Sp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function RI(){return G_||(G_=1,function(t){function e(X,pe){var ye=X.length;X.push(pe);e:for(;0<ye;){var Ue=ye-1>>>1,U=X[Ue];if(0<r(U,pe))X[Ue]=pe,X[ye]=U,ye=Ue;else break e}}function n(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var pe=X[0],ye=X.pop();if(ye!==pe){X[0]=ye;e:for(var Ue=0,U=X.length,W=U>>>1;Ue<W;){var he=2*(Ue+1)-1,ae=X[he],Ae=he+1,Fe=X[Ae];if(0>r(ae,ye))Ae<U&&0>r(Fe,ae)?(X[Ue]=Fe,X[Ae]=ye,Ue=Ae):(X[Ue]=ae,X[he]=ye,Ue=he);else if(Ae<U&&0>r(Fe,ye))X[Ue]=Fe,X[Ae]=ye,Ue=Ae;else break e}}return pe}function r(X,pe){var ye=X.sortIndex-pe.sortIndex;return ye!==0?ye:X.id-pe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var m=[],p=[],v=1,E=null,S=3,I=!1,x=!1,O=!1,F=!1,re=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function ce(X){for(var pe=n(p);pe!==null;){if(pe.callback===null)i(p);else if(pe.startTime<=X)i(p),pe.sortIndex=pe.expirationTime,e(m,pe);else break;pe=n(p)}}function se(X){if(O=!1,ce(X),!x)if(n(m)!==null)x=!0,me||(me=!0,q());else{var pe=n(p);pe!==null&&We(se,pe.startTime-X)}}var me=!1,D=-1,M=5,b=-1;function L(){return F?!0:!(t.unstable_now()-b<M)}function k(){if(F=!1,me){var X=t.unstable_now();b=X;var pe=!0;try{e:{x=!1,O&&(O=!1,te(D),D=-1),I=!0;var ye=S;try{t:{for(ce(X),E=n(m);E!==null&&!(E.expirationTime>X&&L());){var Ue=E.callback;if(typeof Ue=="function"){E.callback=null,S=E.priorityLevel;var U=Ue(E.expirationTime<=X);if(X=t.unstable_now(),typeof U=="function"){E.callback=U,ce(X),pe=!0;break t}E===n(m)&&i(m),ce(X)}else i(m);E=n(m)}if(E!==null)pe=!0;else{var W=n(p);W!==null&&We(se,W.startTime-X),pe=!1}}break e}finally{E=null,S=ye,I=!1}pe=void 0}}finally{pe?q():me=!1}}}var q;if(typeof ne=="function")q=function(){ne(k)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Et=V.port2;V.port1.onmessage=k,q=function(){Et.postMessage(null)}}else q=function(){re(k,0)};function We(X,pe){D=re(function(){X(t.unstable_now())},pe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(X){switch(S){case 1:case 2:case 3:var pe=3;break;default:pe=S}var ye=S;S=pe;try{return X()}finally{S=ye}},t.unstable_requestPaint=function(){F=!0},t.unstable_runWithPriority=function(X,pe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ye=S;S=X;try{return pe()}finally{S=ye}},t.unstable_scheduleCallback=function(X,pe,ye){var Ue=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ue+ye:Ue):ye=Ue,X){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ye+U,X={id:v++,callback:pe,priorityLevel:X,startTime:ye,expirationTime:U,sortIndex:-1},ye>Ue?(X.sortIndex=ye,e(p,X),n(m)===null&&X===n(p)&&(O?(te(D),D=-1):O=!0,We(se,ye-Ue))):(X.sortIndex=U,e(m,X),x||I||(x=!0,me||(me=!0,q()))),X},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(X){var pe=S;return function(){var ye=S;S=pe;try{return X.apply(this,arguments)}finally{S=ye}}}}(Sp)),Sp}var z_;function xI(){return z_||(z_=1,Ep.exports=RI()),Ep.exports}var Ap={exports:{}},En={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function bI(){if(H_)return En;H_=1;var t=Am();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(m,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:m,containerInfo:p,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return En.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,En.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(m,p,null,v)},En.flushSync=function(m){var p=c.T,v=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=v,i.d.f()}},En.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},En.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},En.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,E=h(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:I}):v==="script"&&i.d.X(m,{crossOrigin:E,integrity:S,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},En.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},En.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=h(v,p.crossOrigin);i.d.L(m,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},En.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=h(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},En.requestFormReset=function(m){i.d.r(m)},En.unstable_batchedUpdates=function(m,p){return m(p)},En.useFormState=function(m,p,v){return c.H.useFormState(m,p,v)},En.useFormStatus=function(){return c.H.useHostTransitionStatus()},En.version="19.1.1",En}var $_;function MI(){if($_)return Ap.exports;$_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ap.exports=bI(),Ap.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function NI(){if(Y_)return Zl;Y_=1;var t=xI(),e=Am(),n=MI();function i(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,l=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(l=s.return),o=s.return;while(o)}return s.tag===3?l:null}function c(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function h(o){if(a(o)!==o)throw Error(i(188))}function m(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(i(188));return s!==o?null:o}for(var l=o,d=s;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(d=y.return,d!==null){l=d;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return h(y),o;if(_===d)return h(y),s;_=_.sibling}throw Error(i(188))}if(l.return!==d.return)l=y,d=_;else{for(var C=!1,w=y.child;w;){if(w===l){C=!0,l=y,d=_;break}if(w===d){C=!0,d=y,l=_;break}w=w.sibling}if(!C){for(w=_.child;w;){if(w===l){C=!0,l=_,d=y;break}if(w===d){C=!0,d=_,l=y;break}w=w.sibling}if(!C)throw Error(i(189))}}if(l.alternate!==d)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?o:s}function p(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=p(o),s!==null)return s;o=o.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),te=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function q(o){return o===null||typeof o!="object"?null:(o=k&&o[k]||o["@@iterator"],typeof o=="function"?o:null)}var V=Symbol.for("react.client.reference");function Et(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===V?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case x:return"Fragment";case F:return"Profiler";case O:return"StrictMode";case se:return"Suspense";case me:return"SuspenseList";case b:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case I:return"Portal";case ne:return(o.displayName||"Context")+".Provider";case te:return(o._context.displayName||"Context")+".Consumer";case ce:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case D:return s=o.displayName||null,s!==null?s:Et(o.type)||"Memo";case M:s=o._payload,o=o._init;try{return Et(o(s))}catch{}}return null}var We=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Ue=[],U=-1;function W(o){return{current:o}}function he(o){0>U||(o.current=Ue[U],Ue[U]=null,U--)}function ae(o,s){U++,Ue[U]=o.current,o.current=s}var Ae=W(null),Fe=W(null),be=W(null),Dt=W(null);function at(o,s){switch(ae(be,s),ae(Fe,o),ae(Ae,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?d_(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=d_(s),o=h_(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}he(Ae),ae(Ae,o)}function Rn(){he(Ae),he(Fe),he(be)}function Zn(o){o.memoizedState!==null&&ae(Dt,o);var s=Ae.current,l=h_(s,o.type);s!==l&&(ae(Fe,o),ae(Ae,l))}function _n(o){Fe.current===o&&(he(Ae),he(Fe)),Dt.current===o&&(he(Dt),Yl._currentValue=ye)}var Ii=Object.prototype.hasOwnProperty,Ri=t.unstable_scheduleCallback,pi=t.unstable_cancelCallback,mi=t.unstable_shouldYield,zo=t.unstable_requestPaint,Vn=t.unstable_now,bs=t.unstable_getCurrentPriorityLevel,Ho=t.unstable_ImmediatePriority,$o=t.unstable_UserBlockingPriority,no=t.unstable_NormalPriority,Lr=t.unstable_LowPriority,xi=t.unstable_IdlePriority,Yo=t.log,Ms=t.unstable_setDisableYieldValue,xt=null,it=null;function xn(o){if(typeof Yo=="function"&&Ms(o),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(xt,o)}catch{}}var Pt=Math.clz32?Math.clz32:oo,io=Math.log,Ns=Math.LN2;function oo(o){return o>>>=0,o===0?32:31-(io(o)/Ns|0)|0}var gi=256,ro=4194304;function $t(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Ko(o,s,l){var d=o.pendingLanes;if(d===0)return 0;var y=0,_=o.suspendedLanes,C=o.pingedLanes;o=o.warmLanes;var w=d&134217727;return w!==0?(d=w&~_,d!==0?y=$t(d):(C&=w,C!==0?y=$t(C):l||(l=w&~o,l!==0&&(y=$t(l))))):(w=d&~_,w!==0?y=$t(w):C!==0?y=$t(C):l||(l=d&~o,l!==0&&(y=$t(l)))),y===0?0:s!==0&&s!==y&&(s&_)===0&&(_=y&-y,l=s&-s,_>=l||_===32&&(l&4194048)!==0)?s:y}function bi(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function Ur(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jo(){var o=gi;return gi<<=1,(gi&4194048)===0&&(gi=256),o}function Zt(){var o=ro;return ro<<=1,(ro&62914560)===0&&(ro=4194304),o}function z(o){for(var s=[],l=0;31>l;l++)s.push(o);return s}function Z(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function ie(o,s,l,d,y,_){var C=o.pendingLanes;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=l,o.entangledLanes&=l,o.errorRecoveryDisabledLanes&=l,o.shellSuspendCounter=0;var w=o.entanglements,P=o.expirationTimes,Y=o.hiddenUpdates;for(l=C&~l;0<l;){var j=31-Pt(l),oe=1<<j;w[j]=0,P[j]=-1;var K=Y[j];if(K!==null)for(Y[j]=null,j=0;j<K.length;j++){var J=K[j];J!==null&&(J.lane&=-536870913)}l&=~oe}d!==0&&fe(o,d,0),_!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=_&~(C&~s))}function fe(o,s,l){o.pendingLanes|=s,o.suspendedLanes&=~s;var d=31-Pt(s);o.entangledLanes|=s,o.entanglements[d]=o.entanglements[d]|1073741824|l&4194090}function Ce(o,s){var l=o.entangledLanes|=s;for(o=o.entanglements;l;){var d=31-Pt(l),y=1<<d;y&s|o[d]&s&&(o[d]|=s),l&=~y}}function ke(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ge(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function ze(){var o=pe.p;return o!==0?o:(o=window.event,o===void 0?32:k_(o.type))}function wt(o,s){var l=pe.p;try{return pe.p=o,s()}finally{pe.p=l}}var qe=Math.random().toString(36).slice(2),He="__reactFiber$"+qe,we="__reactProps$"+qe,Pe="__reactContainer$"+qe,St="__reactEvents$"+qe,Ke="__reactListeners$"+qe,Oe="__reactHandles$"+qe,gt="__reactResources$"+qe,sn="__reactMarker$"+qe;function jn(o){delete o[He],delete o[we],delete o[St],delete o[Ke],delete o[Oe]}function an(o){var s=o[He];if(s)return s;for(var l=o.parentNode;l;){if(s=l[Pe]||l[He]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(o=y_(o);o!==null;){if(l=o[He])return l;o=y_(o)}return s}o=l,l=o.parentNode}return null}function Mi(o){if(o=o[He]||o[Pe]){var s=o.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return o}return null}function Ni(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(i(33))}function bn(o){var s=o[gt];return s||(s=o[gt]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ut(o){o[sn]=!0}var Za=new Set,ks={};function yi(o,s){so(o,s),so(o+"Capture",s)}function so(o,s){for(ks[o]=s,o=0;o<s.length;o++)Za.add(s[o])}var Bu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fu={},Or={};function qu(o){return Ii.call(Or,o)?!0:Ii.call(Fu,o)?!1:Bu.test(o)?Or[o]=!0:(Fu[o]=!0,!1)}function Qo(o,s,l){if(qu(s))if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+l)}}function ki(o,s,l){if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+l)}}function ln(o,s,l,d){if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttributeNS(s,l,""+d)}}var Br,Gu;function ao(o){if(Br===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Br=s&&s[1]||"",Gu=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Br+o+Gu}var Ds=!1;function Ps(o,s){if(!o||Ds)return"";Ds=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(J){var K=J}Reflect.construct(o,[],oe)}else{try{oe.call()}catch(J){K=J}o.call(oe.prototype)}}else{try{throw Error()}catch(J){K=J}(oe=o())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(J){if(J&&K&&typeof J.stack=="string")return[J.stack,K.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=d.DetermineComponentFrameRoot(),C=_[0],w=_[1];if(C&&w){var P=C.split(`
`),Y=w.split(`
`);for(y=d=0;d<P.length&&!P[d].includes("DetermineComponentFrameRoot");)d++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(d===P.length||y===Y.length)for(d=P.length-1,y=Y.length-1;1<=d&&0<=y&&P[d]!==Y[y];)y--;for(;1<=d&&0<=y;d--,y--)if(P[d]!==Y[y]){if(d!==1||y!==1)do if(d--,y--,0>y||P[d]!==Y[y]){var j=`
`+P[d].replace(" at new "," at ");return o.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",o.displayName)),j}while(1<=d&&0<=y);break}}}finally{Ds=!1,Error.prepareStackTrace=l}return(l=o?o.displayName||o.name:"")?ao(l):""}function ja(o){switch(o.tag){case 26:case 27:case 5:return ao(o.type);case 16:return ao("Lazy");case 13:return ao("Suspense");case 19:return ao("SuspenseList");case 0:case 15:return Ps(o.type,!1);case 11:return Ps(o.type.render,!1);case 1:return Ps(o.type,!0);case 31:return ao("Activity");default:return""}}function Vs(o){try{var s="";do s+=ja(o),o=o.return;while(o);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Mn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function el(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Sd(o){var s=el(o)?"checked":"value",l=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),d=""+o[s];if(!o.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var y=l.get,_=l.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return y.call(this)},set:function(C){d=""+C,_.call(this,C)}}),Object.defineProperty(o,s,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function Ls(o){o._valueTracker||(o._valueTracker=Sd(o))}function tl(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return o&&(d=el(o)?o.checked?"true":"false":o.value),o=d,o!==l?(s.setValue(o),!0):!1}function Fr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Ad=/[\n"\\]/g;function qt(o){return o.replace(Ad,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Gn(o,s,l,d,y,_,C,w){o.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?o.type=C:o.removeAttribute("type"),s!=null?C==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+Mn(s)):o.value!==""+Mn(s)&&(o.value=""+Mn(s)):C!=="submit"&&C!=="reset"||o.removeAttribute("value"),s!=null?Xo(o,C,Mn(s)):l!=null?Xo(o,C,Mn(l)):d!=null&&o.removeAttribute("value"),y==null&&_!=null&&(o.defaultChecked=!!_),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?o.name=""+Mn(w):o.removeAttribute("name")}function qr(o,s,l,d,y,_,C,w){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),s!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||s!=null))return;l=l!=null?""+Mn(l):"",s=s!=null?""+Mn(s):l,w||s===o.value||(o.value=s),o.defaultValue=s}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=w?o.checked:!!d,o.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.name=C)}function Xo(o,s,l){s==="number"&&Fr(o.ownerDocument)===o||o.defaultValue===""+l||(o.defaultValue=""+l)}function lo(o,s,l,d){if(o=o.options,s){s={};for(var y=0;y<l.length;y++)s["$"+l[y]]=!0;for(l=0;l<o.length;l++)y=s.hasOwnProperty("$"+o[l].value),o[l].selected!==y&&(o[l].selected=y),y&&d&&(o[l].defaultSelected=!0)}else{for(l=""+Mn(l),s=null,y=0;y<o.length;y++){if(o[y].value===l){o[y].selected=!0,d&&(o[y].defaultSelected=!0);return}s!==null||o[y].disabled||(s=o[y])}s!==null&&(s.selected=!0)}}function yt(o,s,l){if(s!=null&&(s=""+Mn(s),s!==o.value&&(o.value=s),l==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=l!=null?""+Mn(l):""}function Gr(o,s,l,d){if(s==null){if(d!=null){if(l!=null)throw Error(i(92));if(We(d)){if(1<d.length)throw Error(i(93));d=d[0]}l=d}l==null&&(l=""),s=l}l=Mn(s),o.defaultValue=l,d=o.textContent,d===l&&d!==""&&d!==null&&(o.value=d)}function ei(o,s){if(s){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=s;return}}o.textContent=s}var zr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zu(o,s,l){var d=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":d?o.setProperty(s,l):typeof l!="number"||l===0||zr.has(s)?s==="float"?o.cssFloat=l:o[s]=(""+l).trim():o[s]=l+"px"}function nl(o,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(o=o.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var y in s)d=s[y],s.hasOwnProperty(y)&&l[y]!==d&&zu(o,y,d)}else for(var _ in s)s.hasOwnProperty(_)&&zu(o,_,s[_])}function il(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Us(o){return wd.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var uo=null;function ti(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var co=null,fo=null;function ol(o){var s=Mi(o);if(s&&(o=s.stateNode)){var l=o[we]||null;e:switch(o=s.stateNode,s.type){case"input":if(Gn(o,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+qt(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==o&&d.form===o.form){var y=d[we]||null;if(!y)throw Error(i(90));Gn(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<l.length;s++)d=l[s],d.form===o.form&&tl(d)}break e;case"textarea":yt(o,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&lo(o,!!l.multiple,s,!1)}}}var Di=!1;function Hu(o,s,l){if(Di)return o(s,l);Di=!0;try{var d=o(s);return d}finally{if(Di=!1,(co!==null||fo!==null)&&(Uc(),co&&(s=co,o=fo,fo=co=null,ol(s),o)))for(s=0;s<o.length;s++)ol(o[s])}}function Hr(o,s){var l=o.stateNode;if(l===null)return null;var d=l[we]||null;if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ni=!1;if(vi)try{var $r={};Object.defineProperty($r,"passive",{get:function(){ni=!0}}),window.addEventListener("test",$r,$r),window.removeEventListener("test",$r,$r)}catch{ni=!1}var Pi=null,Wo=null,ho=null;function rl(){if(ho)return ho;var o,s=Wo,l=s.length,d,y="value"in Pi?Pi.value:Pi.textContent,_=y.length;for(o=0;o<l&&s[o]===y[o];o++);var C=l-o;for(d=1;d<=C&&s[l-d]===y[_-d];d++);return ho=y.slice(o,1<d?1-d:void 0)}function Vi(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function Li(){return!0}function sl(){return!1}function jt(o){function s(l,d,y,_,C){this._reactName=l,this._targetInst=y,this.type=d,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var w in o)o.hasOwnProperty(w)&&(l=o[w],this[w]=l?l(_):_[w]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Li:sl,this.isPropagationStopped=sl,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Li)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Li)},persist:function(){},isPersistent:Li}),s}var lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Os=jt(lt),Yr=v({},lt,{view:0,detail:0}),$u=jt(Yr),Bs,Fs,Ui,Kr=v({},Yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xr,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ui&&(Ui&&o.type==="mousemove"?(Bs=o.screenX-Ui.screenX,Fs=o.screenY-Ui.screenY):Fs=Bs=0,Ui=o),Bs)},movementY:function(o){return"movementY"in o?o.movementY:Fs}}),ii=jt(Kr),Yu=v({},Kr,{dataTransfer:0}),Id=jt(Yu),Jr=v({},Yr,{relatedTarget:0}),qs=jt(Jr),al=v({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),Gs=jt(al),Ku=v({},lt,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),zs=jt(Ku),Rd=v({},lt,{data:0}),ll=jt(Rd),Qr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ul(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=Qu[o])?!!s[o]:!1}function Xr(){return ul}var Xu=v({},Yr,{key:function(o){if(o.key){var s=Qr[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=Vi(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Ju[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xr,charCode:function(o){return o.type==="keypress"?Vi(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Vi(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Hs=jt(Xu),Wu=v({},Kr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=jt(Wu),po=v({},Yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xr}),Zu=jt(po),ju=v({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),ec=jt(ju),tc=v({},Kr,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),$s=jt(tc),Nn=v({},lt,{newState:0,oldState:0}),nc=jt(Nn),ic=[9,13,27,32],Oi=vi&&"CompositionEvent"in window,g=null;vi&&"documentMode"in document&&(g=document.documentMode);var T=vi&&"TextEvent"in window&&!g,A=vi&&(!Oi||g&&8<g&&11>=g),R=" ",H=!1;function Q(o,s){switch(o){case"keyup":return ic.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function de(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var je=!1;function Yt(o,s){switch(o){case"compositionend":return de(s);case"keypress":return s.which!==32?null:(H=!0,R);case"textInput":return o=s.data,o===R&&H?null:o;default:return null}}function et(o,s){if(je)return o==="compositionend"||!Oi&&Q(o,s)?(o=rl(),ho=Wo=Pi=null,je=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return A&&s.locale!=="ko"?null:s.data;default:return null}}var en={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kt(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!en[o.type]:s==="textarea"}function mo(o,s,l,d){co?fo?fo.push(d):fo=[d]:co=d,s=zc(s,"onChange"),0<s.length&&(l=new Os("onChange","change",null,l,d),o.push({event:l,listeners:s}))}var un=null,Bi=null;function fl(o){a_(o,0)}function oc(o){var s=Ni(o);if(tl(s))return o}function xg(o,s){if(o==="change")return s}var bg=!1;if(vi){var xd;if(vi){var bd="oninput"in document;if(!bd){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),bd=typeof Mg.oninput=="function"}xd=bd}else xd=!1;bg=xd&&(!document.documentMode||9<document.documentMode)}function Ng(){un&&(un.detachEvent("onpropertychange",kg),Bi=un=null)}function kg(o){if(o.propertyName==="value"&&oc(Bi)){var s=[];mo(s,Bi,o,ti(o)),Hu(fl,s)}}function ZC(o,s,l){o==="focusin"?(Ng(),un=s,Bi=l,un.attachEvent("onpropertychange",kg)):o==="focusout"&&Ng()}function jC(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return oc(Bi)}function ew(o,s){if(o==="click")return oc(s)}function tw(o,s){if(o==="input"||o==="change")return oc(s)}function nw(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var zn=typeof Object.is=="function"?Object.is:nw;function dl(o,s){if(zn(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var l=Object.keys(o),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var y=l[d];if(!Ii.call(s,y)||!zn(o[y],s[y]))return!1}return!0}function Dg(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Pg(o,s){var l=Dg(o);o=0;for(var d;l;){if(l.nodeType===3){if(d=o+l.textContent.length,o<=s&&d>=s)return{node:l,offset:s-o};o=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Dg(l)}}function Vg(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?Vg(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function Lg(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=Fr(o.document);s instanceof o.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)o=s.contentWindow;else break;s=Fr(o.document)}return s}function Md(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var iw=vi&&"documentMode"in document&&11>=document.documentMode,Ys=null,Nd=null,hl=null,kd=!1;function Ug(o,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;kd||Ys==null||Ys!==Fr(d)||(d=Ys,"selectionStart"in d&&Md(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),hl&&dl(hl,d)||(hl=d,d=zc(Nd,"onSelect"),0<d.length&&(s=new Os("onSelect","select",null,s,l),o.push({event:s,listeners:d}),s.target=Ys)))}function Wr(o,s){var l={};return l[o.toLowerCase()]=s.toLowerCase(),l["Webkit"+o]="webkit"+s,l["Moz"+o]="moz"+s,l}var Ks={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionrun:Wr("Transition","TransitionRun"),transitionstart:Wr("Transition","TransitionStart"),transitioncancel:Wr("Transition","TransitionCancel"),transitionend:Wr("Transition","TransitionEnd")},Dd={},Og={};vi&&(Og=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function Zr(o){if(Dd[o])return Dd[o];if(!Ks[o])return o;var s=Ks[o],l;for(l in s)if(s.hasOwnProperty(l)&&l in Og)return Dd[o]=s[l];return o}var Bg=Zr("animationend"),Fg=Zr("animationiteration"),qg=Zr("animationstart"),ow=Zr("transitionrun"),rw=Zr("transitionstart"),sw=Zr("transitioncancel"),Gg=Zr("transitionend"),zg=new Map,Pd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pd.push("scrollEnd");function _i(o,s){zg.set(o,s),yi(s,[o])}var Hg=new WeakMap;function oi(o,s){if(typeof o=="object"&&o!==null){var l=Hg.get(o);return l!==void 0?l:(s={value:o,source:s,stack:Vs(s)},Hg.set(o,s),s)}return{value:o,source:s,stack:Vs(s)}}var ri=[],Js=0,Vd=0;function rc(){for(var o=Js,s=Vd=Js=0;s<o;){var l=ri[s];ri[s++]=null;var d=ri[s];ri[s++]=null;var y=ri[s];ri[s++]=null;var _=ri[s];if(ri[s++]=null,d!==null&&y!==null){var C=d.pending;C===null?y.next=y:(y.next=C.next,C.next=y),d.pending=y}_!==0&&$g(l,y,_)}}function sc(o,s,l,d){ri[Js++]=o,ri[Js++]=s,ri[Js++]=l,ri[Js++]=d,Vd|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function Ld(o,s,l,d){return sc(o,s,l,d),ac(o)}function Qs(o,s){return sc(o,null,null,s),ac(o)}function $g(o,s,l){o.lanes|=l;var d=o.alternate;d!==null&&(d.lanes|=l);for(var y=!1,_=o.return;_!==null;)_.childLanes|=l,d=_.alternate,d!==null&&(d.childLanes|=l),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(y=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,y&&s!==null&&(y=31-Pt(l),o=_.hiddenUpdates,d=o[y],d===null?o[y]=[s]:d.push(s),s.lane=l|536870912),_):null}function ac(o){if(50<Ol)throw Ol=0,Gh=null,Error(i(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var Xs={};function aw(o,s,l,d){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(o,s,l,d){return new aw(o,s,l,d)}function Ud(o){return o=o.prototype,!(!o||!o.isReactComponent)}function go(o,s){var l=o.alternate;return l===null?(l=Hn(o.tag,s,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=s,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&65011712,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l.refCleanup=o.refCleanup,l}function Yg(o,s){o.flags&=65011714;var l=o.alternate;return l===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,s=l.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function lc(o,s,l,d,y,_){var C=0;if(d=o,typeof o=="function")Ud(o)&&(C=1);else if(typeof o=="string")C=uI(o,l,Ae.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case b:return o=Hn(31,l,s,y),o.elementType=b,o.lanes=_,o;case x:return jr(l.children,y,_,s);case O:C=8,y|=24;break;case F:return o=Hn(12,l,s,y|2),o.elementType=F,o.lanes=_,o;case se:return o=Hn(13,l,s,y),o.elementType=se,o.lanes=_,o;case me:return o=Hn(19,l,s,y),o.elementType=me,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case re:case ne:C=10;break e;case te:C=9;break e;case ce:C=11;break e;case D:C=14;break e;case M:C=16,d=null;break e}C=29,l=Error(i(130,o===null?"null":typeof o,"")),d=null}return s=Hn(C,l,s,y),s.elementType=o,s.type=d,s.lanes=_,s}function jr(o,s,l,d){return o=Hn(7,o,d,s),o.lanes=l,o}function Od(o,s,l){return o=Hn(6,o,null,s),o.lanes=l,o}function Bd(o,s,l){return s=Hn(4,o.children!==null?o.children:[],o.key,s),s.lanes=l,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var Ws=[],Zs=0,uc=null,cc=0,si=[],ai=0,es=null,yo=1,vo="";function ts(o,s){Ws[Zs++]=cc,Ws[Zs++]=uc,uc=o,cc=s}function Kg(o,s,l){si[ai++]=yo,si[ai++]=vo,si[ai++]=es,es=o;var d=yo;o=vo;var y=32-Pt(d)-1;d&=~(1<<y),l+=1;var _=32-Pt(s)+y;if(30<_){var C=y-y%5;_=(d&(1<<C)-1).toString(32),d>>=C,y-=C,yo=1<<32-Pt(s)+y|l<<y|d,vo=_+o}else yo=1<<_|l<<y|d,vo=o}function Fd(o){o.return!==null&&(ts(o,1),Kg(o,1,0))}function qd(o){for(;o===uc;)uc=Ws[--Zs],Ws[Zs]=null,cc=Ws[--Zs],Ws[Zs]=null;for(;o===es;)es=si[--ai],si[ai]=null,vo=si[--ai],si[ai]=null,yo=si[--ai],si[ai]=null}var kn=null,Vt=null,st=!1,ns=null,Fi=!1,Gd=Error(i(519));function is(o){var s=Error(i(418,""));throw gl(oi(s,o)),Gd}function Jg(o){var s=o.stateNode,l=o.type,d=o.memoizedProps;switch(s[He]=o,s[we]=d,l){case"dialog":Qe("cancel",s),Qe("close",s);break;case"iframe":case"object":case"embed":Qe("load",s);break;case"video":case"audio":for(l=0;l<Fl.length;l++)Qe(Fl[l],s);break;case"source":Qe("error",s);break;case"img":case"image":case"link":Qe("error",s),Qe("load",s);break;case"details":Qe("toggle",s);break;case"input":Qe("invalid",s),qr(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Ls(s);break;case"select":Qe("invalid",s);break;case"textarea":Qe("invalid",s),Gr(s,d.value,d.defaultValue,d.children),Ls(s)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||d.suppressHydrationWarning===!0||f_(s.textContent,l)?(d.popover!=null&&(Qe("beforetoggle",s),Qe("toggle",s)),d.onScroll!=null&&Qe("scroll",s),d.onScrollEnd!=null&&Qe("scrollend",s),d.onClick!=null&&(s.onclick=Hc),s=!0):s=!1,s||is(o)}function Qg(o){for(kn=o.return;kn;)switch(kn.tag){case 5:case 13:Fi=!1;return;case 27:case 3:Fi=!0;return;default:kn=kn.return}}function pl(o){if(o!==kn)return!1;if(!st)return Qg(o),st=!0,!1;var s=o.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=o.type,l=!(l!=="form"&&l!=="button")||op(o.type,o.memoizedProps)),l=!l),l&&Vt&&is(o),Qg(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8)if(l=o.data,l==="/$"){if(s===0){Vt=Ei(o.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;o=o.nextSibling}Vt=null}}else s===27?(s=Vt,hr(o.type)?(o=lp,lp=null,Vt=o):Vt=s):Vt=kn?Ei(o.stateNode.nextSibling):null;return!0}function ml(){Vt=kn=null,st=!1}function Xg(){var o=ns;return o!==null&&(On===null?On=o:On.push.apply(On,o),ns=null),o}function gl(o){ns===null?ns=[o]:ns.push(o)}var zd=W(null),os=null,_o=null;function Zo(o,s,l){ae(zd,s._currentValue),s._currentValue=l}function To(o){o._currentValue=zd.current,he(zd)}function Hd(o,s,l){for(;o!==null;){var d=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),o===l)break;o=o.return}}function $d(o,s,l,d){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var _=y.dependencies;if(_!==null){var C=y.child;_=_.firstContext;e:for(;_!==null;){var w=_;_=y;for(var P=0;P<s.length;P++)if(w.context===s[P]){_.lanes|=l,w=_.alternate,w!==null&&(w.lanes|=l),Hd(_.return,l,o),d||(C=null);break e}_=w.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(i(341));C.lanes|=l,_=C.alternate,_!==null&&(_.lanes|=l),Hd(C,l,o),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===o){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function yl(o,s,l,d){o=null;for(var y=s,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var w=y.type;zn(y.pendingProps.value,C.value)||(o!==null?o.push(w):o=[w])}}else if(y===Dt.current){if(C=y.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(Yl):o=[Yl])}y=y.return}o!==null&&$d(s,o,l,d),s.flags|=262144}function fc(o){for(o=o.firstContext;o!==null;){if(!zn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function rs(o){os=o,_o=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Tn(o){return Wg(os,o)}function dc(o,s){return os===null&&rs(o),Wg(o,s)}function Wg(o,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},_o===null){if(o===null)throw Error(i(308));_o=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else _o=_o.next=s;return l}var lw=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(l,d){o.push(d)}};this.abort=function(){s.aborted=!0,o.forEach(function(l){return l()})}},uw=t.unstable_scheduleCallback,cw=t.unstable_NormalPriority,Jt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yd(){return{controller:new lw,data:new Map,refCount:0}}function vl(o){o.refCount--,o.refCount===0&&uw(cw,function(){o.controller.abort()})}var _l=null,Kd=0,js=0,ea=null;function fw(o,s){if(_l===null){var l=_l=[];Kd=0,js=Qh(),ea={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Kd++,s.then(Zg,Zg),s}function Zg(){if(--Kd===0&&_l!==null){ea!==null&&(ea.status="fulfilled");var o=_l;_l=null,js=0,ea=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function dw(o,s){var l=[],d={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return o.then(function(){d.status="fulfilled",d.value=s;for(var y=0;y<l.length;y++)(0,l[y])(s)},function(y){for(d.status="rejected",d.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),d}var jg=X.S;X.S=function(o,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&fw(o,s),jg!==null&&jg(o,s)};var ss=W(null);function Jd(){var o=ss.current;return o!==null?o:It.pooledCache}function hc(o,s){s===null?ae(ss,ss.current):ae(ss,s.pool)}function ey(){var o=Jd();return o===null?null:{parent:Jt._currentValue,pool:o}}var Tl=Error(i(460)),ty=Error(i(474)),pc=Error(i(542)),Qd={then:function(){}};function ny(o){return o=o.status,o==="fulfilled"||o==="rejected"}function mc(){}function iy(o,s,l){switch(l=o[l],l===void 0?o.push(s):l!==s&&(s.then(mc,mc),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,ry(o),o;default:if(typeof s.status=="string")s.then(mc,mc);else{if(o=It,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=s,o.status="pending",o.then(function(d){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=d}},function(d){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,ry(o),o}throw El=s,Tl}}var El=null;function oy(){if(El===null)throw Error(i(459));var o=El;return El=null,o}function ry(o){if(o===Tl||o===pc)throw Error(i(483))}var jo=!1;function Xd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wd(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function er(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function tr(o,s,l){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(dt&2)!==0){var y=d.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),d.pending=s,s=ac(o),$g(o,null,l),s}return sc(o,d,s,l),ac(o)}function Sl(o,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var d=s.lanes;d&=o.pendingLanes,l|=d,s.lanes=l,Ce(o,l)}}function Zd(o,s){var l=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=C:_=_.next=C,l=l.next}while(l!==null);_===null?y=_=s:_=_.next=s}else y=_=s;l={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:d.shared,callbacks:d.callbacks},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=s:o.next=s,l.lastBaseUpdate=s}var jd=!1;function Al(){if(jd){var o=ea;if(o!==null)throw o}}function Cl(o,s,l,d){jd=!1;var y=o.updateQueue;jo=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var P=w,Y=P.next;P.next=null,C===null?_=Y:C.next=Y,C=P;var j=o.alternate;j!==null&&(j=j.updateQueue,w=j.lastBaseUpdate,w!==C&&(w===null?j.firstBaseUpdate=Y:w.next=Y,j.lastBaseUpdate=P))}if(_!==null){var oe=y.baseState;C=0,j=Y=P=null,w=_;do{var K=w.lane&-536870913,J=K!==w.lane;if(J?(tt&K)===K:(d&K)===K){K!==0&&K===js&&(jd=!0),j!==null&&(j=j.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Me=o,Re=w;K=s;var Tt=l;switch(Re.tag){case 1:if(Me=Re.payload,typeof Me=="function"){oe=Me.call(Tt,oe,K);break e}oe=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Re.payload,K=typeof Me=="function"?Me.call(Tt,oe,K):Me,K==null)break e;oe=v({},oe,K);break e;case 2:jo=!0}}K=w.callback,K!==null&&(o.flags|=64,J&&(o.flags|=8192),J=y.callbacks,J===null?y.callbacks=[K]:J.push(K))}else J={lane:K,tag:w.tag,payload:w.payload,callback:w.callback,next:null},j===null?(Y=j=J,P=oe):j=j.next=J,C|=K;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;J=w,w=J.next,J.next=null,y.lastBaseUpdate=J,y.shared.pending=null}}while(!0);j===null&&(P=oe),y.baseState=P,y.firstBaseUpdate=Y,y.lastBaseUpdate=j,_===null&&(y.shared.lanes=0),ur|=C,o.lanes=C,o.memoizedState=oe}}function sy(o,s){if(typeof o!="function")throw Error(i(191,o));o.call(s)}function ay(o,s){var l=o.callbacks;if(l!==null)for(o.callbacks=null,o=0;o<l.length;o++)sy(l[o],s)}var ta=W(null),gc=W(0);function ly(o,s){o=Ro,ae(gc,o),ae(ta,s),Ro=o|s.baseLanes}function eh(){ae(gc,Ro),ae(ta,ta.current)}function th(){Ro=gc.current,he(ta),he(gc)}var nr=0,$e=null,vt=null,Gt=null,yc=!1,na=!1,as=!1,vc=0,wl=0,ia=null,hw=0;function Ot(){throw Error(i(321))}function nh(o,s){if(s===null)return!1;for(var l=0;l<s.length&&l<o.length;l++)if(!zn(o[l],s[l]))return!1;return!0}function ih(o,s,l,d,y,_){return nr=_,$e=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=o===null||o.memoizedState===null?$y:Yy,as=!1,_=l(d,y),as=!1,na&&(_=cy(s,l,d,y)),uy(o),_}function uy(o){X.H=Cc;var s=vt!==null&&vt.next!==null;if(nr=0,Gt=vt=$e=null,yc=!1,wl=0,ia=null,s)throw Error(i(300));o===null||tn||(o=o.dependencies,o!==null&&fc(o)&&(tn=!0))}function cy(o,s,l,d){$e=o;var y=0;do{if(na&&(ia=null),wl=0,na=!1,25<=y)throw Error(i(301));if(y+=1,Gt=vt=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}X.H=Tw,_=s(l,d)}while(na);return _}function pw(){var o=X.H,s=o.useState()[0];return s=typeof s.then=="function"?Il(s):s,o=o.useState()[0],(vt!==null?vt.memoizedState:null)!==o&&($e.flags|=1024),s}function oh(){var o=vc!==0;return vc=0,o}function rh(o,s,l){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~l}function sh(o){if(yc){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}yc=!1}nr=0,Gt=vt=$e=null,na=!1,wl=vc=0,ia=null}function Ln(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?$e.memoizedState=Gt=o:Gt=Gt.next=o,Gt}function zt(){if(vt===null){var o=$e.alternate;o=o!==null?o.memoizedState:null}else o=vt.next;var s=Gt===null?$e.memoizedState:Gt.next;if(s!==null)Gt=s,vt=o;else{if(o===null)throw $e.alternate===null?Error(i(467)):Error(i(310));vt=o,o={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Gt===null?$e.memoizedState=Gt=o:Gt=Gt.next=o}return Gt}function ah(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(o){var s=wl;return wl+=1,ia===null&&(ia=[]),o=iy(ia,o,s),s=$e,(Gt===null?s.memoizedState:Gt.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?$y:Yy),o}function _c(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Il(o);if(o.$$typeof===ne)return Tn(o)}throw Error(i(438,String(o)))}function lh(o){var s=null,l=$e.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var d=$e.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=ah(),$e.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(o),d=0;d<o;d++)l[d]=L;return s.index++,l}function Eo(o,s){return typeof s=="function"?s(o):s}function Tc(o){var s=zt();return uh(s,vt,o)}function uh(o,s,l){var d=o.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=l;var y=o.baseQueue,_=d.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}s.baseQueue=y=_,d.pending=null}if(_=o.baseState,y===null)o.memoizedState=_;else{s=y.next;var w=C=null,P=null,Y=s,j=!1;do{var oe=Y.lane&-536870913;if(oe!==Y.lane?(tt&oe)===oe:(nr&oe)===oe){var K=Y.revertLane;if(K===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),oe===js&&(j=!0);else if((nr&K)===K){Y=Y.next,K===js&&(j=!0);continue}else oe={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(w=P=oe,C=_):P=P.next=oe,$e.lanes|=K,ur|=K;oe=Y.action,as&&l(_,oe),_=Y.hasEagerState?Y.eagerState:l(_,oe)}else K={lane:oe,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(w=P=K,C=_):P=P.next=K,$e.lanes|=oe,ur|=oe;Y=Y.next}while(Y!==null&&Y!==s);if(P===null?C=_:P.next=w,!zn(_,o.memoizedState)&&(tn=!0,j&&(l=ea,l!==null)))throw l;o.memoizedState=_,o.baseState=C,o.baseQueue=P,d.lastRenderedState=_}return y===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function ch(o){var s=zt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=o;var d=l.dispatch,y=l.pending,_=s.memoizedState;if(y!==null){l.pending=null;var C=y=y.next;do _=o(_,C.action),C=C.next;while(C!==y);zn(_,s.memoizedState)||(tn=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),l.lastRenderedState=_}return[_,d]}function fy(o,s,l){var d=$e,y=zt(),_=st;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=s();var C=!zn((vt||y).memoizedState,l);C&&(y.memoizedState=l,tn=!0),y=y.queue;var w=py.bind(null,d,y,o);if(Rl(2048,8,w,[o]),y.getSnapshot!==s||C||Gt!==null&&Gt.memoizedState.tag&1){if(d.flags|=2048,oa(9,Ec(),hy.bind(null,d,y,l,s),null),It===null)throw Error(i(349));_||(nr&124)!==0||dy(d,s,l)}return l}function dy(o,s,l){o.flags|=16384,o={getSnapshot:s,value:l},s=$e.updateQueue,s===null?(s=ah(),$e.updateQueue=s,s.stores=[o]):(l=s.stores,l===null?s.stores=[o]:l.push(o))}function hy(o,s,l,d){s.value=l,s.getSnapshot=d,my(s)&&gy(o)}function py(o,s,l){return l(function(){my(s)&&gy(o)})}function my(o){var s=o.getSnapshot;o=o.value;try{var l=s();return!zn(o,l)}catch{return!0}}function gy(o){var s=Qs(o,2);s!==null&&Qn(s,o,2)}function fh(o){var s=Ln();if(typeof o=="function"){var l=o;if(o=l(),as){xn(!0);try{l()}finally{xn(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:o},s}function yy(o,s,l,d){return o.baseState=l,uh(o,vt,typeof d=="function"?d:Eo)}function mw(o,s,l,d,y){if(Ac(o))throw Error(i(485));if(o=s.action,o!==null){var _={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};X.T!==null?l(!0):_.isTransition=!1,d(_),l=s.pending,l===null?(_.next=s.pending=_,vy(s,_)):(_.next=l.next,s.pending=l.next=_)}}function vy(o,s){var l=s.action,d=s.payload,y=o.state;if(s.isTransition){var _=X.T,C={};X.T=C;try{var w=l(y,d),P=X.S;P!==null&&P(C,w),_y(o,s,w)}catch(Y){dh(o,s,Y)}finally{X.T=_}}else try{_=l(y,d),_y(o,s,_)}catch(Y){dh(o,s,Y)}}function _y(o,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Ty(o,s,d)},function(d){return dh(o,s,d)}):Ty(o,s,l)}function Ty(o,s,l){s.status="fulfilled",s.value=l,Ey(s),o.state=l,s=o.pending,s!==null&&(l=s.next,l===s?o.pending=null:(l=l.next,s.next=l,vy(o,l)))}function dh(o,s,l){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=l,Ey(s),s=s.next;while(s!==d)}o.action=null}function Ey(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function Sy(o,s){return s}function Ay(o,s){if(st){var l=It.formState;if(l!==null){e:{var d=$e;if(st){if(Vt){t:{for(var y=Vt,_=Fi;y.nodeType!==8;){if(!_){y=null;break t}if(y=Ei(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){Vt=Ei(y.nextSibling),d=y.data==="F!";break e}}is(d)}d=!1}d&&(s=l[0])}}return l=Ln(),l.memoizedState=l.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sy,lastRenderedState:s},l.queue=d,l=Gy.bind(null,$e,d),d.dispatch=l,d=fh(!1),_=yh.bind(null,$e,!1,d.queue),d=Ln(),y={state:s,dispatch:null,action:o,pending:null},d.queue=y,l=mw.bind(null,$e,y,_,l),y.dispatch=l,d.memoizedState=o,[s,l,!1]}function Cy(o){var s=zt();return wy(s,vt,o)}function wy(o,s,l){if(s=uh(o,s,Sy)[0],o=Tc(Eo)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=Il(s)}catch(C){throw C===Tl?pc:C}else d=s;s=zt();var y=s.queue,_=y.dispatch;return l!==s.memoizedState&&($e.flags|=2048,oa(9,Ec(),gw.bind(null,y,l),null)),[d,_,o]}function gw(o,s){o.action=s}function Iy(o){var s=zt(),l=vt;if(l!==null)return wy(s,l,o);zt(),s=s.memoizedState,l=zt();var d=l.queue.dispatch;return l.memoizedState=o,[s,d,!1]}function oa(o,s,l,d){return o={tag:o,create:l,deps:d,inst:s,next:null},s=$e.updateQueue,s===null&&(s=ah(),$e.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=o.next=o:(d=l.next,l.next=o,o.next=d,s.lastEffect=o),o}function Ec(){return{destroy:void 0,resource:void 0}}function Ry(){return zt().memoizedState}function Sc(o,s,l,d){var y=Ln();d=d===void 0?null:d,$e.flags|=o,y.memoizedState=oa(1|s,Ec(),l,d)}function Rl(o,s,l,d){var y=zt();d=d===void 0?null:d;var _=y.memoizedState.inst;vt!==null&&d!==null&&nh(d,vt.memoizedState.deps)?y.memoizedState=oa(s,_,l,d):($e.flags|=o,y.memoizedState=oa(1|s,_,l,d))}function xy(o,s){Sc(8390656,8,o,s)}function by(o,s){Rl(2048,8,o,s)}function My(o,s){return Rl(4,2,o,s)}function Ny(o,s){return Rl(4,4,o,s)}function ky(o,s){if(typeof s=="function"){o=o();var l=s(o);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function Dy(o,s,l){l=l!=null?l.concat([o]):null,Rl(4,4,ky.bind(null,s,o),l)}function hh(){}function Py(o,s){var l=zt();s=s===void 0?null:s;var d=l.memoizedState;return s!==null&&nh(s,d[1])?d[0]:(l.memoizedState=[o,s],o)}function Vy(o,s){var l=zt();s=s===void 0?null:s;var d=l.memoizedState;if(s!==null&&nh(s,d[1]))return d[0];if(d=o(),as){xn(!0);try{o()}finally{xn(!1)}}return l.memoizedState=[d,s],d}function ph(o,s,l){return l===void 0||(nr&1073741824)!==0?o.memoizedState=s:(o.memoizedState=l,o=Ov(),$e.lanes|=o,ur|=o,l)}function Ly(o,s,l,d){return zn(l,s)?l:ta.current!==null?(o=ph(o,l,d),zn(o,s)||(tn=!0),o):(nr&42)===0?(tn=!0,o.memoizedState=l):(o=Ov(),$e.lanes|=o,ur|=o,s)}function Uy(o,s,l,d,y){var _=pe.p;pe.p=_!==0&&8>_?_:8;var C=X.T,w={};X.T=w,yh(o,!1,s,l);try{var P=y(),Y=X.S;if(Y!==null&&Y(w,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var j=dw(P,d);xl(o,s,j,Jn(o))}else xl(o,s,d,Jn(o))}catch(oe){xl(o,s,{then:function(){},status:"rejected",reason:oe},Jn())}finally{pe.p=_,X.T=C}}function yw(){}function mh(o,s,l,d){if(o.tag!==5)throw Error(i(476));var y=Oy(o).queue;Uy(o,y,s,ye,l===null?yw:function(){return By(o),l(d)})}function Oy(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:ye},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:l},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function By(o){var s=Oy(o).next.queue;xl(o,s,{},Jn())}function gh(){return Tn(Yl)}function Fy(){return zt().memoizedState}function qy(){return zt().memoizedState}function vw(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var l=Jn();o=er(l);var d=tr(s,o,l);d!==null&&(Qn(d,s,l),Sl(d,s,l)),s={cache:Yd()},o.payload=s;return}s=s.return}}function _w(o,s,l){var d=Jn();l={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Ac(o)?zy(s,l):(l=Ld(o,s,l,d),l!==null&&(Qn(l,o,d),Hy(l,s,d)))}function Gy(o,s,l){var d=Jn();xl(o,s,l,d)}function xl(o,s,l,d){var y={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ac(o))zy(s,y);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var C=s.lastRenderedState,w=_(C,l);if(y.hasEagerState=!0,y.eagerState=w,zn(w,C))return sc(o,s,y,0),It===null&&rc(),!1}catch{}finally{}if(l=Ld(o,s,y,d),l!==null)return Qn(l,o,d),Hy(l,s,d),!0}return!1}function yh(o,s,l,d){if(d={lane:2,revertLane:Qh(),action:d,hasEagerState:!1,eagerState:null,next:null},Ac(o)){if(s)throw Error(i(479))}else s=Ld(o,l,d,2),s!==null&&Qn(s,o,2)}function Ac(o){var s=o.alternate;return o===$e||s!==null&&s===$e}function zy(o,s){na=yc=!0;var l=o.pending;l===null?s.next=s:(s.next=l.next,l.next=s),o.pending=s}function Hy(o,s,l){if((l&4194048)!==0){var d=s.lanes;d&=o.pendingLanes,l|=d,s.lanes=l,Ce(o,l)}}var Cc={readContext:Tn,use:_c,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot},$y={readContext:Tn,use:_c,useCallback:function(o,s){return Ln().memoizedState=[o,s===void 0?null:s],o},useContext:Tn,useEffect:xy,useImperativeHandle:function(o,s,l){l=l!=null?l.concat([o]):null,Sc(4194308,4,ky.bind(null,s,o),l)},useLayoutEffect:function(o,s){return Sc(4194308,4,o,s)},useInsertionEffect:function(o,s){Sc(4,2,o,s)},useMemo:function(o,s){var l=Ln();s=s===void 0?null:s;var d=o();if(as){xn(!0);try{o()}finally{xn(!1)}}return l.memoizedState=[d,s],d},useReducer:function(o,s,l){var d=Ln();if(l!==void 0){var y=l(s);if(as){xn(!0);try{l(s)}finally{xn(!1)}}}else y=s;return d.memoizedState=d.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},d.queue=o,o=o.dispatch=_w.bind(null,$e,o),[d.memoizedState,o]},useRef:function(o){var s=Ln();return o={current:o},s.memoizedState=o},useState:function(o){o=fh(o);var s=o.queue,l=Gy.bind(null,$e,s);return s.dispatch=l,[o.memoizedState,l]},useDebugValue:hh,useDeferredValue:function(o,s){var l=Ln();return ph(l,o,s)},useTransition:function(){var o=fh(!1);return o=Uy.bind(null,$e,o.queue,!0,!1),Ln().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,l){var d=$e,y=Ln();if(st){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),It===null)throw Error(i(349));(tt&124)!==0||dy(d,s,l)}y.memoizedState=l;var _={value:l,getSnapshot:s};return y.queue=_,xy(py.bind(null,d,_,o),[o]),d.flags|=2048,oa(9,Ec(),hy.bind(null,d,_,l,s),null),l},useId:function(){var o=Ln(),s=It.identifierPrefix;if(st){var l=vo,d=yo;l=(d&~(1<<32-Pt(d)-1)).toString(32)+l,s="«"+s+"R"+l,l=vc++,0<l&&(s+="H"+l.toString(32)),s+="»"}else l=hw++,s="«"+s+"r"+l.toString(32)+"»";return o.memoizedState=s},useHostTransitionStatus:gh,useFormState:Ay,useActionState:Ay,useOptimistic:function(o){var s=Ln();s.memoizedState=s.baseState=o;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=yh.bind(null,$e,!0,l),l.dispatch=s,[o,s]},useMemoCache:lh,useCacheRefresh:function(){return Ln().memoizedState=vw.bind(null,$e)}},Yy={readContext:Tn,use:_c,useCallback:Py,useContext:Tn,useEffect:by,useImperativeHandle:Dy,useInsertionEffect:My,useLayoutEffect:Ny,useMemo:Vy,useReducer:Tc,useRef:Ry,useState:function(){return Tc(Eo)},useDebugValue:hh,useDeferredValue:function(o,s){var l=zt();return Ly(l,vt.memoizedState,o,s)},useTransition:function(){var o=Tc(Eo)[0],s=zt().memoizedState;return[typeof o=="boolean"?o:Il(o),s]},useSyncExternalStore:fy,useId:Fy,useHostTransitionStatus:gh,useFormState:Cy,useActionState:Cy,useOptimistic:function(o,s){var l=zt();return yy(l,vt,o,s)},useMemoCache:lh,useCacheRefresh:qy},Tw={readContext:Tn,use:_c,useCallback:Py,useContext:Tn,useEffect:by,useImperativeHandle:Dy,useInsertionEffect:My,useLayoutEffect:Ny,useMemo:Vy,useReducer:ch,useRef:Ry,useState:function(){return ch(Eo)},useDebugValue:hh,useDeferredValue:function(o,s){var l=zt();return vt===null?ph(l,o,s):Ly(l,vt.memoizedState,o,s)},useTransition:function(){var o=ch(Eo)[0],s=zt().memoizedState;return[typeof o=="boolean"?o:Il(o),s]},useSyncExternalStore:fy,useId:Fy,useHostTransitionStatus:gh,useFormState:Iy,useActionState:Iy,useOptimistic:function(o,s){var l=zt();return vt!==null?yy(l,vt,o,s):(l.baseState=o,[o,l.queue.dispatch])},useMemoCache:lh,useCacheRefresh:qy},ra=null,bl=0;function wc(o){var s=bl;return bl+=1,ra===null&&(ra=[]),iy(ra,o,s)}function Ml(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function Ic(o,s){throw s.$$typeof===E?Error(i(525)):(o=Object.prototype.toString.call(s),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function Ky(o){var s=o._init;return s(o._payload)}function Jy(o){function s(G,B){if(o){var $=G.deletions;$===null?(G.deletions=[B],G.flags|=16):$.push(B)}}function l(G,B){if(!o)return null;for(;B!==null;)s(G,B),B=B.sibling;return null}function d(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function y(G,B){return G=go(G,B),G.index=0,G.sibling=null,G}function _(G,B,$){return G.index=$,o?($=G.alternate,$!==null?($=$.index,$<B?(G.flags|=67108866,B):$):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function C(G){return o&&G.alternate===null&&(G.flags|=67108866),G}function w(G,B,$,ee){return B===null||B.tag!==6?(B=Od($,G.mode,ee),B.return=G,B):(B=y(B,$),B.return=G,B)}function P(G,B,$,ee){var ge=$.type;return ge===x?j(G,B,$.props.children,ee,$.key):B!==null&&(B.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===M&&Ky(ge)===B.type)?(B=y(B,$.props),Ml(B,$),B.return=G,B):(B=lc($.type,$.key,$.props,null,G.mode,ee),Ml(B,$),B.return=G,B)}function Y(G,B,$,ee){return B===null||B.tag!==4||B.stateNode.containerInfo!==$.containerInfo||B.stateNode.implementation!==$.implementation?(B=Bd($,G.mode,ee),B.return=G,B):(B=y(B,$.children||[]),B.return=G,B)}function j(G,B,$,ee,ge){return B===null||B.tag!==7?(B=jr($,G.mode,ee,ge),B.return=G,B):(B=y(B,$),B.return=G,B)}function oe(G,B,$){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Od(""+B,G.mode,$),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case S:return $=lc(B.type,B.key,B.props,null,G.mode,$),Ml($,B),$.return=G,$;case I:return B=Bd(B,G.mode,$),B.return=G,B;case M:var ee=B._init;return B=ee(B._payload),oe(G,B,$)}if(We(B)||q(B))return B=jr(B,G.mode,$,null),B.return=G,B;if(typeof B.then=="function")return oe(G,wc(B),$);if(B.$$typeof===ne)return oe(G,dc(G,B),$);Ic(G,B)}return null}function K(G,B,$,ee){var ge=B!==null?B.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return ge!==null?null:w(G,B,""+$,ee);if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return $.key===ge?P(G,B,$,ee):null;case I:return $.key===ge?Y(G,B,$,ee):null;case M:return ge=$._init,$=ge($._payload),K(G,B,$,ee)}if(We($)||q($))return ge!==null?null:j(G,B,$,ee,null);if(typeof $.then=="function")return K(G,B,wc($),ee);if($.$$typeof===ne)return K(G,B,dc(G,$),ee);Ic(G,$)}return null}function J(G,B,$,ee,ge){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return G=G.get($)||null,w(B,G,""+ee,ge);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case S:return G=G.get(ee.key===null?$:ee.key)||null,P(B,G,ee,ge);case I:return G=G.get(ee.key===null?$:ee.key)||null,Y(B,G,ee,ge);case M:var Ye=ee._init;return ee=Ye(ee._payload),J(G,B,$,ee,ge)}if(We(ee)||q(ee))return G=G.get($)||null,j(B,G,ee,ge,null);if(typeof ee.then=="function")return J(G,B,$,wc(ee),ge);if(ee.$$typeof===ne)return J(G,B,$,dc(B,ee),ge);Ic(B,ee)}return null}function Me(G,B,$,ee){for(var ge=null,Ye=null,Ee=B,xe=B=0,on=null;Ee!==null&&xe<$.length;xe++){Ee.index>xe?(on=Ee,Ee=null):on=Ee.sibling;var ot=K(G,Ee,$[xe],ee);if(ot===null){Ee===null&&(Ee=on);break}o&&Ee&&ot.alternate===null&&s(G,Ee),B=_(ot,B,xe),Ye===null?ge=ot:Ye.sibling=ot,Ye=ot,Ee=on}if(xe===$.length)return l(G,Ee),st&&ts(G,xe),ge;if(Ee===null){for(;xe<$.length;xe++)Ee=oe(G,$[xe],ee),Ee!==null&&(B=_(Ee,B,xe),Ye===null?ge=Ee:Ye.sibling=Ee,Ye=Ee);return st&&ts(G,xe),ge}for(Ee=d(Ee);xe<$.length;xe++)on=J(Ee,G,xe,$[xe],ee),on!==null&&(o&&on.alternate!==null&&Ee.delete(on.key===null?xe:on.key),B=_(on,B,xe),Ye===null?ge=on:Ye.sibling=on,Ye=on);return o&&Ee.forEach(function(vr){return s(G,vr)}),st&&ts(G,xe),ge}function Re(G,B,$,ee){if($==null)throw Error(i(151));for(var ge=null,Ye=null,Ee=B,xe=B=0,on=null,ot=$.next();Ee!==null&&!ot.done;xe++,ot=$.next()){Ee.index>xe?(on=Ee,Ee=null):on=Ee.sibling;var vr=K(G,Ee,ot.value,ee);if(vr===null){Ee===null&&(Ee=on);break}o&&Ee&&vr.alternate===null&&s(G,Ee),B=_(vr,B,xe),Ye===null?ge=vr:Ye.sibling=vr,Ye=vr,Ee=on}if(ot.done)return l(G,Ee),st&&ts(G,xe),ge;if(Ee===null){for(;!ot.done;xe++,ot=$.next())ot=oe(G,ot.value,ee),ot!==null&&(B=_(ot,B,xe),Ye===null?ge=ot:Ye.sibling=ot,Ye=ot);return st&&ts(G,xe),ge}for(Ee=d(Ee);!ot.done;xe++,ot=$.next())ot=J(Ee,G,xe,ot.value,ee),ot!==null&&(o&&ot.alternate!==null&&Ee.delete(ot.key===null?xe:ot.key),B=_(ot,B,xe),Ye===null?ge=ot:Ye.sibling=ot,Ye=ot);return o&&Ee.forEach(function(EI){return s(G,EI)}),st&&ts(G,xe),ge}function Tt(G,B,$,ee){if(typeof $=="object"&&$!==null&&$.type===x&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case S:e:{for(var ge=$.key;B!==null;){if(B.key===ge){if(ge=$.type,ge===x){if(B.tag===7){l(G,B.sibling),ee=y(B,$.props.children),ee.return=G,G=ee;break e}}else if(B.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===M&&Ky(ge)===B.type){l(G,B.sibling),ee=y(B,$.props),Ml(ee,$),ee.return=G,G=ee;break e}l(G,B);break}else s(G,B);B=B.sibling}$.type===x?(ee=jr($.props.children,G.mode,ee,$.key),ee.return=G,G=ee):(ee=lc($.type,$.key,$.props,null,G.mode,ee),Ml(ee,$),ee.return=G,G=ee)}return C(G);case I:e:{for(ge=$.key;B!==null;){if(B.key===ge)if(B.tag===4&&B.stateNode.containerInfo===$.containerInfo&&B.stateNode.implementation===$.implementation){l(G,B.sibling),ee=y(B,$.children||[]),ee.return=G,G=ee;break e}else{l(G,B);break}else s(G,B);B=B.sibling}ee=Bd($,G.mode,ee),ee.return=G,G=ee}return C(G);case M:return ge=$._init,$=ge($._payload),Tt(G,B,$,ee)}if(We($))return Me(G,B,$,ee);if(q($)){if(ge=q($),typeof ge!="function")throw Error(i(150));return $=ge.call($),Re(G,B,$,ee)}if(typeof $.then=="function")return Tt(G,B,wc($),ee);if($.$$typeof===ne)return Tt(G,B,dc(G,$),ee);Ic(G,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,B!==null&&B.tag===6?(l(G,B.sibling),ee=y(B,$),ee.return=G,G=ee):(l(G,B),ee=Od($,G.mode,ee),ee.return=G,G=ee),C(G)):l(G,B)}return function(G,B,$,ee){try{bl=0;var ge=Tt(G,B,$,ee);return ra=null,ge}catch(Ee){if(Ee===Tl||Ee===pc)throw Ee;var Ye=Hn(29,Ee,null,G.mode);return Ye.lanes=ee,Ye.return=G,Ye}finally{}}}var sa=Jy(!0),Qy=Jy(!1),li=W(null),qi=null;function ir(o){var s=o.alternate;ae(Qt,Qt.current&1),ae(li,o),qi===null&&(s===null||ta.current!==null||s.memoizedState!==null)&&(qi=o)}function Xy(o){if(o.tag===22){if(ae(Qt,Qt.current),ae(li,o),qi===null){var s=o.alternate;s!==null&&s.memoizedState!==null&&(qi=o)}}else or()}function or(){ae(Qt,Qt.current),ae(li,li.current)}function So(o){he(li),qi===o&&(qi=null),he(Qt)}var Qt=W(0);function Rc(o){for(var s=o;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||ap(l)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function vh(o,s,l,d){s=o.memoizedState,l=l(d,s),l=l==null?s:v({},s,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var _h={enqueueSetState:function(o,s,l){o=o._reactInternals;var d=Jn(),y=er(d);y.payload=s,l!=null&&(y.callback=l),s=tr(o,y,d),s!==null&&(Qn(s,o,d),Sl(s,o,d))},enqueueReplaceState:function(o,s,l){o=o._reactInternals;var d=Jn(),y=er(d);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=tr(o,y,d),s!==null&&(Qn(s,o,d),Sl(s,o,d))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var l=Jn(),d=er(l);d.tag=2,s!=null&&(d.callback=s),s=tr(o,d,l),s!==null&&(Qn(s,o,l),Sl(s,o,l))}};function Wy(o,s,l,d,y,_,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,_,C):s.prototype&&s.prototype.isPureReactComponent?!dl(l,d)||!dl(y,_):!0}function Zy(o,s,l,d){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==o&&_h.enqueueReplaceState(s,s.state,null)}function ls(o,s){var l=s;if("ref"in s){l={};for(var d in s)d!=="ref"&&(l[d]=s[d])}if(o=o.defaultProps){l===s&&(l=v({},l));for(var y in o)l[y]===void 0&&(l[y]=o[y])}return l}var xc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function jy(o){xc(o)}function ev(o){console.error(o)}function tv(o){xc(o)}function bc(o,s){try{var l=o.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function nv(o,s,l){try{var d=o.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Th(o,s,l){return l=er(l),l.tag=3,l.payload={element:null},l.callback=function(){bc(o,s)},l}function iv(o){return o=er(o),o.tag=3,o}function ov(o,s,l,d){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=d.value;o.payload=function(){return y(_)},o.callback=function(){nv(s,l,d)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(o.callback=function(){nv(s,l,d),typeof y!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var w=d.stack;this.componentDidCatch(d.value,{componentStack:w!==null?w:""})})}function Ew(o,s,l,d,y){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=l.alternate,s!==null&&yl(s,l,y,!0),l=li.current,l!==null){switch(l.tag){case 13:return qi===null?Hh():l.alternate===null&&Lt===0&&(Lt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,d===Qd?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([d]):s.add(d),Yh(o,d,y)),!1;case 22:return l.flags|=65536,d===Qd?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([d]):l.add(d)),Yh(o,d,y)),!1}throw Error(i(435,l.tag))}return Yh(o,d,y),Hh(),!1}if(st)return s=li.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,d!==Gd&&(o=Error(i(422),{cause:d}),gl(oi(o,l)))):(d!==Gd&&(s=Error(i(423),{cause:d}),gl(oi(s,l))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,d=oi(d,l),y=Th(o.stateNode,d,y),Zd(o,y),Lt!==4&&(Lt=2)),!1;var _=Error(i(520),{cause:d});if(_=oi(_,l),Ul===null?Ul=[_]:Ul.push(_),Lt!==4&&(Lt=2),s===null)return!0;d=oi(d,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,o=y&-y,l.lanes|=o,o=Th(l.stateNode,d,o),Zd(l,o),!1;case 1:if(s=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(cr===null||!cr.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=iv(y),ov(y,o,l,d),Zd(l,y),!1}l=l.return}while(l!==null);return!1}var rv=Error(i(461)),tn=!1;function cn(o,s,l,d){s.child=o===null?Qy(s,null,l,d):sa(s,o.child,l,d)}function sv(o,s,l,d,y){l=l.render;var _=s.ref;if("ref"in d){var C={};for(var w in d)w!=="ref"&&(C[w]=d[w])}else C=d;return rs(s),d=ih(o,s,l,C,_,y),w=oh(),o!==null&&!tn?(rh(o,s,y),Ao(o,s,y)):(st&&w&&Fd(s),s.flags|=1,cn(o,s,d,y),s.child)}function av(o,s,l,d,y){if(o===null){var _=l.type;return typeof _=="function"&&!Ud(_)&&_.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=_,lv(o,s,_,d,y)):(o=lc(l.type,null,d,s,s.mode,y),o.ref=s.ref,o.return=s,s.child=o)}if(_=o.child,!xh(o,y)){var C=_.memoizedProps;if(l=l.compare,l=l!==null?l:dl,l(C,d)&&o.ref===s.ref)return Ao(o,s,y)}return s.flags|=1,o=go(_,d),o.ref=s.ref,o.return=s,s.child=o}function lv(o,s,l,d,y){if(o!==null){var _=o.memoizedProps;if(dl(_,d)&&o.ref===s.ref)if(tn=!1,s.pendingProps=d=_,xh(o,y))(o.flags&131072)!==0&&(tn=!0);else return s.lanes=o.lanes,Ao(o,s,y)}return Eh(o,s,l,d,y)}function uv(o,s,l){var d=s.pendingProps,y=d.children,_=o!==null?o.memoizedState:null;if(d.mode==="hidden"){if((s.flags&128)!==0){if(d=_!==null?_.baseLanes|l:l,o!==null){for(y=s.child=o.child,_=0;y!==null;)_=_|y.lanes|y.childLanes,y=y.sibling;s.childLanes=_&~d}else s.childLanes=0,s.child=null;return cv(o,s,d,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&hc(s,_!==null?_.cachePool:null),_!==null?ly(s,_):eh(),Xy(s);else return s.lanes=s.childLanes=536870912,cv(o,s,_!==null?_.baseLanes|l:l,l)}else _!==null?(hc(s,_.cachePool),ly(s,_),or(),s.memoizedState=null):(o!==null&&hc(s,null),eh(),or());return cn(o,s,y,l),s.child}function cv(o,s,l,d){var y=Jd();return y=y===null?null:{parent:Jt._currentValue,pool:y},s.memoizedState={baseLanes:l,cachePool:y},o!==null&&hc(s,null),eh(),Xy(s),o!==null&&yl(o,s,d,!0),null}function Mc(o,s){var l=s.ref;if(l===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(o===null||o.ref!==l)&&(s.flags|=4194816)}}function Eh(o,s,l,d,y){return rs(s),l=ih(o,s,l,d,void 0,y),d=oh(),o!==null&&!tn?(rh(o,s,y),Ao(o,s,y)):(st&&d&&Fd(s),s.flags|=1,cn(o,s,l,y),s.child)}function fv(o,s,l,d,y,_){return rs(s),s.updateQueue=null,l=cy(s,d,l,y),uy(o),d=oh(),o!==null&&!tn?(rh(o,s,_),Ao(o,s,_)):(st&&d&&Fd(s),s.flags|=1,cn(o,s,l,_),s.child)}function dv(o,s,l,d,y){if(rs(s),s.stateNode===null){var _=Xs,C=l.contextType;typeof C=="object"&&C!==null&&(_=Tn(C)),_=new l(d,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=_h,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=d,_.state=s.memoizedState,_.refs={},Xd(s),C=l.contextType,_.context=typeof C=="object"&&C!==null?Tn(C):Xs,_.state=s.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(vh(s,l,C,d),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&_h.enqueueReplaceState(_,_.state,null),Cl(s,d,_,y),Al(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(o===null){_=s.stateNode;var w=s.memoizedProps,P=ls(l,w);_.props=P;var Y=_.context,j=l.contextType;C=Xs,typeof j=="object"&&j!==null&&(C=Tn(j));var oe=l.getDerivedStateFromProps;j=typeof oe=="function"||typeof _.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,j||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w||Y!==C)&&Zy(s,_,d,C),jo=!1;var K=s.memoizedState;_.state=K,Cl(s,d,_,y),Al(),Y=s.memoizedState,w||K!==Y||jo?(typeof oe=="function"&&(vh(s,l,oe,d),Y=s.memoizedState),(P=jo||Wy(s,l,P,d,K,Y,C))?(j||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=Y),_.props=d,_.state=Y,_.context=C,d=P):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{_=s.stateNode,Wd(o,s),C=s.memoizedProps,j=ls(l,C),_.props=j,oe=s.pendingProps,K=_.context,Y=l.contextType,P=Xs,typeof Y=="object"&&Y!==null&&(P=Tn(Y)),w=l.getDerivedStateFromProps,(Y=typeof w=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==oe||K!==P)&&Zy(s,_,d,P),jo=!1,K=s.memoizedState,_.state=K,Cl(s,d,_,y),Al();var J=s.memoizedState;C!==oe||K!==J||jo||o!==null&&o.dependencies!==null&&fc(o.dependencies)?(typeof w=="function"&&(vh(s,l,w,d),J=s.memoizedState),(j=jo||Wy(s,l,j,d,K,J,P)||o!==null&&o.dependencies!==null&&fc(o.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,J,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,J,P)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===o.memoizedProps&&K===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&K===o.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=J),_.props=d,_.state=J,_.context=P,d=j):(typeof _.componentDidUpdate!="function"||C===o.memoizedProps&&K===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&K===o.memoizedState||(s.flags|=1024),d=!1)}return _=d,Mc(o,s),d=(s.flags&128)!==0,_||d?(_=s.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,o!==null&&d?(s.child=sa(s,o.child,null,y),s.child=sa(s,null,l,y)):cn(o,s,l,y),s.memoizedState=_.state,o=s.child):o=Ao(o,s,y),o}function hv(o,s,l,d){return ml(),s.flags|=256,cn(o,s,l,d),s.child}var Sh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ah(o){return{baseLanes:o,cachePool:ey()}}function Ch(o,s,l){return o=o!==null?o.childLanes&~l:0,s&&(o|=ui),o}function pv(o,s,l){var d=s.pendingProps,y=!1,_=(s.flags&128)!==0,C;if((C=_)||(C=o!==null&&o.memoizedState===null?!1:(Qt.current&2)!==0),C&&(y=!0,s.flags&=-129),C=(s.flags&32)!==0,s.flags&=-33,o===null){if(st){if(y?ir(s):or(),st){var w=Vt,P;if(P=w){e:{for(P=w,w=Fi;P.nodeType!==8;){if(!w){w=null;break e}if(P=Ei(P.nextSibling),P===null){w=null;break e}}w=P}w!==null?(s.memoizedState={dehydrated:w,treeContext:es!==null?{id:yo,overflow:vo}:null,retryLane:536870912,hydrationErrors:null},P=Hn(18,null,null,0),P.stateNode=w,P.return=s,s.child=P,kn=s,Vt=null,P=!0):P=!1}P||is(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return ap(w)?s.lanes=32:s.lanes=536870912,null;So(s)}return w=d.children,d=d.fallback,y?(or(),y=s.mode,w=Nc({mode:"hidden",children:w},y),d=jr(d,y,l,null),w.return=s,d.return=s,w.sibling=d,s.child=w,y=s.child,y.memoizedState=Ah(l),y.childLanes=Ch(o,C,l),s.memoizedState=Sh,d):(ir(s),wh(s,w))}if(P=o.memoizedState,P!==null&&(w=P.dehydrated,w!==null)){if(_)s.flags&256?(ir(s),s.flags&=-257,s=Ih(o,s,l)):s.memoizedState!==null?(or(),s.child=o.child,s.flags|=128,s=null):(or(),y=d.fallback,w=s.mode,d=Nc({mode:"visible",children:d.children},w),y=jr(y,w,l,null),y.flags|=2,d.return=s,y.return=s,d.sibling=y,s.child=d,sa(s,o.child,null,l),d=s.child,d.memoizedState=Ah(l),d.childLanes=Ch(o,C,l),s.memoizedState=Sh,s=y);else if(ir(s),ap(w)){if(C=w.nextSibling&&w.nextSibling.dataset,C)var Y=C.dgst;C=Y,d=Error(i(419)),d.stack="",d.digest=C,gl({value:d,source:null,stack:null}),s=Ih(o,s,l)}else if(tn||yl(o,s,l,!1),C=(l&o.childLanes)!==0,tn||C){if(C=It,C!==null&&(d=l&-l,d=(d&42)!==0?1:ke(d),d=(d&(C.suspendedLanes|l))!==0?0:d,d!==0&&d!==P.retryLane))throw P.retryLane=d,Qs(o,d),Qn(C,o,d),rv;w.data==="$?"||Hh(),s=Ih(o,s,l)}else w.data==="$?"?(s.flags|=192,s.child=o.child,s=null):(o=P.treeContext,Vt=Ei(w.nextSibling),kn=s,st=!0,ns=null,Fi=!1,o!==null&&(si[ai++]=yo,si[ai++]=vo,si[ai++]=es,yo=o.id,vo=o.overflow,es=s),s=wh(s,d.children),s.flags|=4096);return s}return y?(or(),y=d.fallback,w=s.mode,P=o.child,Y=P.sibling,d=go(P,{mode:"hidden",children:d.children}),d.subtreeFlags=P.subtreeFlags&65011712,Y!==null?y=go(Y,y):(y=jr(y,w,l,null),y.flags|=2),y.return=s,d.return=s,d.sibling=y,s.child=d,d=y,y=s.child,w=o.child.memoizedState,w===null?w=Ah(l):(P=w.cachePool,P!==null?(Y=Jt._currentValue,P=P.parent!==Y?{parent:Y,pool:Y}:P):P=ey(),w={baseLanes:w.baseLanes|l,cachePool:P}),y.memoizedState=w,y.childLanes=Ch(o,C,l),s.memoizedState=Sh,d):(ir(s),l=o.child,o=l.sibling,l=go(l,{mode:"visible",children:d.children}),l.return=s,l.sibling=null,o!==null&&(C=s.deletions,C===null?(s.deletions=[o],s.flags|=16):C.push(o)),s.child=l,s.memoizedState=null,l)}function wh(o,s){return s=Nc({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function Nc(o,s){return o=Hn(22,o,null,s),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Ih(o,s,l){return sa(s,o.child,null,l),o=wh(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function mv(o,s,l){o.lanes|=s;var d=o.alternate;d!==null&&(d.lanes|=s),Hd(o.return,s,l)}function Rh(o,s,l,d,y){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:y}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=l,_.tailMode=y)}function gv(o,s,l){var d=s.pendingProps,y=d.revealOrder,_=d.tail;if(cn(o,s,d.children,l),d=Qt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&mv(o,l,s);else if(o.tag===19)mv(o,l,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}switch(ae(Qt,d),y){case"forwards":for(l=s.child,y=null;l!==null;)o=l.alternate,o!==null&&Rc(o)===null&&(y=l),l=l.sibling;l=y,l===null?(y=s.child,s.child=null):(y=l.sibling,l.sibling=null),Rh(s,!1,y,l,_);break;case"backwards":for(l=null,y=s.child,s.child=null;y!==null;){if(o=y.alternate,o!==null&&Rc(o)===null){s.child=y;break}o=y.sibling,y.sibling=l,l=y,y=o}Rh(s,!0,l,null,_);break;case"together":Rh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ao(o,s,l){if(o!==null&&(s.dependencies=o.dependencies),ur|=s.lanes,(l&s.childLanes)===0)if(o!==null){if(yl(o,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(i(153));if(s.child!==null){for(o=s.child,l=go(o,o.pendingProps),s.child=l,l.return=s;o.sibling!==null;)o=o.sibling,l=l.sibling=go(o,o.pendingProps),l.return=s;l.sibling=null}return s.child}function xh(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&fc(o)))}function Sw(o,s,l){switch(s.tag){case 3:at(s,s.stateNode.containerInfo),Zo(s,Jt,o.memoizedState.cache),ml();break;case 27:case 5:Zn(s);break;case 4:at(s,s.stateNode.containerInfo);break;case 10:Zo(s,s.type,s.memoizedProps.value);break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(ir(s),s.flags|=128,null):(l&s.child.childLanes)!==0?pv(o,s,l):(ir(s),o=Ao(o,s,l),o!==null?o.sibling:null);ir(s);break;case 19:var y=(o.flags&128)!==0;if(d=(l&s.childLanes)!==0,d||(yl(o,s,l,!1),d=(l&s.childLanes)!==0),y){if(d)return gv(o,s,l);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ae(Qt,Qt.current),d)break;return null;case 22:case 23:return s.lanes=0,uv(o,s,l);case 24:Zo(s,Jt,o.memoizedState.cache)}return Ao(o,s,l)}function yv(o,s,l){if(o!==null)if(o.memoizedProps!==s.pendingProps)tn=!0;else{if(!xh(o,l)&&(s.flags&128)===0)return tn=!1,Sw(o,s,l);tn=(o.flags&131072)!==0}else tn=!1,st&&(s.flags&1048576)!==0&&Kg(s,cc,s.index);switch(s.lanes=0,s.tag){case 16:e:{o=s.pendingProps;var d=s.elementType,y=d._init;if(d=y(d._payload),s.type=d,typeof d=="function")Ud(d)?(o=ls(d,o),s.tag=1,s=dv(null,s,d,o,l)):(s.tag=0,s=Eh(null,s,d,o,l));else{if(d!=null){if(y=d.$$typeof,y===ce){s.tag=11,s=sv(null,s,d,o,l);break e}else if(y===D){s.tag=14,s=av(null,s,d,o,l);break e}}throw s=Et(d)||d,Error(i(306,s,""))}}return s;case 0:return Eh(o,s,s.type,s.pendingProps,l);case 1:return d=s.type,y=ls(d,s.pendingProps),dv(o,s,d,y,l);case 3:e:{if(at(s,s.stateNode.containerInfo),o===null)throw Error(i(387));d=s.pendingProps;var _=s.memoizedState;y=_.element,Wd(o,s),Cl(s,d,null,l);var C=s.memoizedState;if(d=C.cache,Zo(s,Jt,d),d!==_.cache&&$d(s,[Jt],l,!0),Al(),d=C.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:C.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=hv(o,s,d,l);break e}else if(d!==y){y=oi(Error(i(424)),s),gl(y),s=hv(o,s,d,l);break e}else{switch(o=s.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Vt=Ei(o.firstChild),kn=s,st=!0,ns=null,Fi=!0,l=Qy(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ml(),d===y){s=Ao(o,s,l);break e}cn(o,s,d,l)}s=s.child}return s;case 26:return Mc(o,s),o===null?(l=E_(s.type,null,s.pendingProps,null))?s.memoizedState=l:st||(l=s.type,o=s.pendingProps,d=$c(be.current).createElement(l),d[He]=s,d[we]=o,dn(d,l,o),Ut(d),s.stateNode=d):s.memoizedState=E_(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return Zn(s),o===null&&st&&(d=s.stateNode=v_(s.type,s.pendingProps,be.current),kn=s,Fi=!0,y=Vt,hr(s.type)?(lp=y,Vt=Ei(d.firstChild)):Vt=y),cn(o,s,s.pendingProps.children,l),Mc(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&st&&((y=d=Vt)&&(d=Xw(d,s.type,s.pendingProps,Fi),d!==null?(s.stateNode=d,kn=s,Vt=Ei(d.firstChild),Fi=!1,y=!0):y=!1),y||is(s)),Zn(s),y=s.type,_=s.pendingProps,C=o!==null?o.memoizedProps:null,d=_.children,op(y,_)?d=null:C!==null&&op(y,C)&&(s.flags|=32),s.memoizedState!==null&&(y=ih(o,s,pw,null,null,l),Yl._currentValue=y),Mc(o,s),cn(o,s,d,l),s.child;case 6:return o===null&&st&&((o=l=Vt)&&(l=Ww(l,s.pendingProps,Fi),l!==null?(s.stateNode=l,kn=s,Vt=null,o=!0):o=!1),o||is(s)),null;case 13:return pv(o,s,l);case 4:return at(s,s.stateNode.containerInfo),d=s.pendingProps,o===null?s.child=sa(s,null,d,l):cn(o,s,d,l),s.child;case 11:return sv(o,s,s.type,s.pendingProps,l);case 7:return cn(o,s,s.pendingProps,l),s.child;case 8:return cn(o,s,s.pendingProps.children,l),s.child;case 12:return cn(o,s,s.pendingProps.children,l),s.child;case 10:return d=s.pendingProps,Zo(s,s.type,d.value),cn(o,s,d.children,l),s.child;case 9:return y=s.type._context,d=s.pendingProps.children,rs(s),y=Tn(y),d=d(y),s.flags|=1,cn(o,s,d,l),s.child;case 14:return av(o,s,s.type,s.pendingProps,l);case 15:return lv(o,s,s.type,s.pendingProps,l);case 19:return gv(o,s,l);case 31:return d=s.pendingProps,l=s.mode,d={mode:d.mode,children:d.children},o===null?(l=Nc(d,l),l.ref=s.ref,s.child=l,l.return=s,s=l):(l=go(o.child,d),l.ref=s.ref,s.child=l,l.return=s,s=l),s;case 22:return uv(o,s,l);case 24:return rs(s),d=Tn(Jt),o===null?(y=Jd(),y===null&&(y=It,_=Yd(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),s.memoizedState={parent:d,cache:y},Xd(s),Zo(s,Jt,y)):((o.lanes&l)!==0&&(Wd(o,s),Cl(s,null,null,l),Al()),y=o.memoizedState,_=s.memoizedState,y.parent!==d?(y={parent:d,cache:d},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Zo(s,Jt,d)):(d=_.cache,Zo(s,Jt,d),d!==y.cache&&$d(s,[Jt],l,!0))),cn(o,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Co(o){o.flags|=4}function vv(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!I_(s)){if(s=li.current,s!==null&&((tt&4194048)===tt?qi!==null:(tt&62914560)!==tt&&(tt&536870912)===0||s!==qi))throw El=Qd,ty;o.flags|=8192}}function kc(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?Zt():536870912,o.lanes|=s,ca|=s)}function Nl(o,s){if(!st)switch(o.tailMode){case"hidden":s=o.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function Nt(o){var s=o.alternate!==null&&o.alternate.child===o.child,l=0,d=0;if(s)for(var y=o.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=d,o.childLanes=l,s}function Aw(o,s,l){var d=s.pendingProps;switch(qd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(s),null;case 1:return Nt(s),null;case 3:return l=s.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),To(Jt),Rn(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(o===null||o.child===null)&&(pl(s)?Co(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xg())),Nt(s),null;case 26:return l=s.memoizedState,o===null?(Co(s),l!==null?(Nt(s),vv(s,l)):(Nt(s),s.flags&=-16777217)):l?l!==o.memoizedState?(Co(s),Nt(s),vv(s,l)):(Nt(s),s.flags&=-16777217):(o.memoizedProps!==d&&Co(s),Nt(s),s.flags&=-16777217),null;case 27:_n(s),l=be.current;var y=s.type;if(o!==null&&s.stateNode!=null)o.memoizedProps!==d&&Co(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return Nt(s),null}o=Ae.current,pl(s)?Jg(s):(o=v_(y,d,l),s.stateNode=o,Co(s))}return Nt(s),null;case 5:if(_n(s),l=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==d&&Co(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return Nt(s),null}if(o=Ae.current,pl(s))Jg(s);else{switch(y=$c(be.current),o){case 1:o=y.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:o=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":o=y.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":o=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":o=y.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?o.multiple=!0:d.size&&(o.size=d.size);break;default:o=typeof d.is=="string"?y.createElement(l,{is:d.is}):y.createElement(l)}}o[He]=s,o[we]=d;e:for(y=s.child;y!==null;){if(y.tag===5||y.tag===6)o.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===s)break e;for(;y.sibling===null;){if(y.return===null||y.return===s)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}s.stateNode=o;e:switch(dn(o,l,d),l){case"button":case"input":case"select":case"textarea":o=!!d.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Co(s)}}return Nt(s),s.flags&=-16777217,null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==d&&Co(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(i(166));if(o=be.current,pl(s)){if(o=s.stateNode,l=s.memoizedProps,d=null,y=kn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}o[He]=s,o=!!(o.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||f_(o.nodeValue,l)),o||is(s)}else o=$c(o).createTextNode(d),o[He]=s,s.stateNode=o}return Nt(s),null;case 13:if(d=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=pl(s),d!==null&&d.dehydrated!==null){if(o===null){if(!y)throw Error(i(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[He]=s}else ml(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nt(s),y=!1}else y=Xg(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(So(s),s):(So(s),null)}if(So(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=d!==null,o=o!==null&&o.memoizedState!==null,l){d=s.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var _=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),_!==y&&(d.flags|=2048)}return l!==o&&l&&(s.child.flags|=8192),kc(s,s.updateQueue),Nt(s),null;case 4:return Rn(),o===null&&jh(s.stateNode.containerInfo),Nt(s),null;case 10:return To(s.type),Nt(s),null;case 19:if(he(Qt),y=s.memoizedState,y===null)return Nt(s),null;if(d=(s.flags&128)!==0,_=y.rendering,_===null)if(d)Nl(y,!1);else{if(Lt!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(_=Rc(o),_!==null){for(s.flags|=128,Nl(y,!1),o=_.updateQueue,s.updateQueue=o,kc(s,o),s.subtreeFlags=0,o=l,l=s.child;l!==null;)Yg(l,o),l=l.sibling;return ae(Qt,Qt.current&1|2),s.child}o=o.sibling}y.tail!==null&&Vn()>Vc&&(s.flags|=128,d=!0,Nl(y,!1),s.lanes=4194304)}else{if(!d)if(o=Rc(_),o!==null){if(s.flags|=128,d=!0,o=o.updateQueue,s.updateQueue=o,kc(s,o),Nl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!_.alternate&&!st)return Nt(s),null}else 2*Vn()-y.renderingStartTime>Vc&&l!==536870912&&(s.flags|=128,d=!0,Nl(y,!1),s.lanes=4194304);y.isBackwards?(_.sibling=s.child,s.child=_):(o=y.last,o!==null?o.sibling=_:s.child=_,y.last=_)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Vn(),s.sibling=null,o=Qt.current,ae(Qt,d?o&1|2:o&1),s):(Nt(s),null);case 22:case 23:return So(s),th(),d=s.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(l&536870912)!==0&&(s.flags&128)===0&&(Nt(s),s.subtreeFlags&6&&(s.flags|=8192)):Nt(s),l=s.updateQueue,l!==null&&kc(s,l.retryQueue),l=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==l&&(s.flags|=2048),o!==null&&he(ss),null;case 24:return l=null,o!==null&&(l=o.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),To(Jt),Nt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Cw(o,s){switch(qd(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return To(Jt),Rn(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return _n(s),null;case 13:if(So(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ml()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return he(Qt),null;case 4:return Rn(),null;case 10:return To(s.type),null;case 22:case 23:return So(s),th(),o!==null&&he(ss),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return To(Jt),null;case 25:return null;default:return null}}function _v(o,s){switch(qd(s),s.tag){case 3:To(Jt),Rn();break;case 26:case 27:case 5:_n(s);break;case 4:Rn();break;case 13:So(s);break;case 19:he(Qt);break;case 10:To(s.type);break;case 22:case 23:So(s),th(),o!==null&&he(ss);break;case 24:To(Jt)}}function kl(o,s){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var y=d.next;l=y;do{if((l.tag&o)===o){d=void 0;var _=l.create,C=l.inst;d=_(),C.destroy=d}l=l.next}while(l!==y)}}catch(w){At(s,s.return,w)}}function rr(o,s,l){try{var d=s.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var _=y.next;d=_;do{if((d.tag&o)===o){var C=d.inst,w=C.destroy;if(w!==void 0){C.destroy=void 0,y=s;var P=l,Y=w;try{Y()}catch(j){At(y,P,j)}}}d=d.next}while(d!==_)}}catch(j){At(s,s.return,j)}}function Tv(o){var s=o.updateQueue;if(s!==null){var l=o.stateNode;try{ay(s,l)}catch(d){At(o,o.return,d)}}}function Ev(o,s,l){l.props=ls(o.type,o.memoizedProps),l.state=o.memoizedState;try{l.componentWillUnmount()}catch(d){At(o,s,d)}}function Dl(o,s){try{var l=o.ref;if(l!==null){switch(o.tag){case 26:case 27:case 5:var d=o.stateNode;break;case 30:d=o.stateNode;break;default:d=o.stateNode}typeof l=="function"?o.refCleanup=l(d):l.current=d}}catch(y){At(o,s,y)}}function Gi(o,s){var l=o.ref,d=o.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(y){At(o,s,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){At(o,s,y)}else l.current=null}function Sv(o){var s=o.type,l=o.memoizedProps,d=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(y){At(o,o.return,y)}}function bh(o,s,l){try{var d=o.stateNode;$w(d,o.type,l,s),d[we]=s}catch(y){At(o,o.return,y)}}function Av(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&hr(o.type)||o.tag===4}function Mh(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Av(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&hr(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Nh(o,s,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(o,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(o),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Hc));else if(d!==4&&(d===27&&hr(o.type)&&(l=o.stateNode,s=null),o=o.child,o!==null))for(Nh(o,s,l),o=o.sibling;o!==null;)Nh(o,s,l),o=o.sibling}function Dc(o,s,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,s?l.insertBefore(o,s):l.appendChild(o);else if(d!==4&&(d===27&&hr(o.type)&&(l=o.stateNode),o=o.child,o!==null))for(Dc(o,s,l),o=o.sibling;o!==null;)Dc(o,s,l),o=o.sibling}function Cv(o){var s=o.stateNode,l=o.memoizedProps;try{for(var d=o.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);dn(s,d,l),s[He]=o,s[we]=l}catch(_){At(o,o.return,_)}}var wo=!1,Bt=!1,kh=!1,wv=typeof WeakSet=="function"?WeakSet:Set,nn=null;function ww(o,s){if(o=o.containerInfo,np=Wc,o=Lg(o),Md(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var y=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var C=0,w=-1,P=-1,Y=0,j=0,oe=o,K=null;t:for(;;){for(var J;oe!==l||y!==0&&oe.nodeType!==3||(w=C+y),oe!==_||d!==0&&oe.nodeType!==3||(P=C+d),oe.nodeType===3&&(C+=oe.nodeValue.length),(J=oe.firstChild)!==null;)K=oe,oe=J;for(;;){if(oe===o)break t;if(K===l&&++Y===y&&(w=C),K===_&&++j===d&&(P=C),(J=oe.nextSibling)!==null)break;oe=K,K=oe.parentNode}oe=J}l=w===-1||P===-1?null:{start:w,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(ip={focusedElem:o,selectionRange:l},Wc=!1,nn=s;nn!==null;)if(s=nn,o=s.child,(s.subtreeFlags&1024)!==0&&o!==null)o.return=s,nn=o;else for(;nn!==null;){switch(s=nn,_=s.alternate,o=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,l=s,y=_.memoizedProps,_=_.memoizedState,d=l.stateNode;try{var Me=ls(l.type,y,l.elementType===l.type);o=d.getSnapshotBeforeUpdate(Me,_),d.__reactInternalSnapshotBeforeUpdate=o}catch(Re){At(l,l.return,Re)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,l=o.nodeType,l===9)sp(o);else if(l===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":sp(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=s.sibling,o!==null){o.return=s.return,nn=o;break}nn=s.return}}function Iv(o,s,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:sr(o,l),d&4&&kl(5,l);break;case 1:if(sr(o,l),d&4)if(o=l.stateNode,s===null)try{o.componentDidMount()}catch(C){At(l,l.return,C)}else{var y=ls(l.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(y,s,o.__reactInternalSnapshotBeforeUpdate)}catch(C){At(l,l.return,C)}}d&64&&Tv(l),d&512&&Dl(l,l.return);break;case 3:if(sr(o,l),d&64&&(o=l.updateQueue,o!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{ay(o,s)}catch(C){At(l,l.return,C)}}break;case 27:s===null&&d&4&&Cv(l);case 26:case 5:sr(o,l),s===null&&d&4&&Sv(l),d&512&&Dl(l,l.return);break;case 12:sr(o,l);break;case 13:sr(o,l),d&4&&bv(o,l),d&64&&(o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(l=Pw.bind(null,l),Zw(o,l))));break;case 22:if(d=l.memoizedState!==null||wo,!d){s=s!==null&&s.memoizedState!==null||Bt,y=wo;var _=Bt;wo=d,(Bt=s)&&!_?ar(o,l,(l.subtreeFlags&8772)!==0):sr(o,l),wo=y,Bt=_}break;case 30:break;default:sr(o,l)}}function Rv(o){var s=o.alternate;s!==null&&(o.alternate=null,Rv(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&jn(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var bt=null,Un=!1;function Io(o,s,l){for(l=l.child;l!==null;)xv(o,s,l),l=l.sibling}function xv(o,s,l){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(xt,l)}catch{}switch(l.tag){case 26:Bt||Gi(l,s),Io(o,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Bt||Gi(l,s);var d=bt,y=Un;hr(l.type)&&(bt=l.stateNode,Un=!1),Io(o,s,l),Gl(l.stateNode),bt=d,Un=y;break;case 5:Bt||Gi(l,s);case 6:if(d=bt,y=Un,bt=null,Io(o,s,l),bt=d,Un=y,bt!==null)if(Un)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(l.stateNode)}catch(_){At(l,s,_)}else try{bt.removeChild(l.stateNode)}catch(_){At(l,s,_)}break;case 18:bt!==null&&(Un?(o=bt,g_(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.stateNode),Xl(o)):g_(bt,l.stateNode));break;case 4:d=bt,y=Un,bt=l.stateNode.containerInfo,Un=!0,Io(o,s,l),bt=d,Un=y;break;case 0:case 11:case 14:case 15:Bt||rr(2,l,s),Bt||rr(4,l,s),Io(o,s,l);break;case 1:Bt||(Gi(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Ev(l,s,d)),Io(o,s,l);break;case 21:Io(o,s,l);break;case 22:Bt=(d=Bt)||l.memoizedState!==null,Io(o,s,l),Bt=d;break;default:Io(o,s,l)}}function bv(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Xl(o)}catch(l){At(s,s.return,l)}}function Iw(o){switch(o.tag){case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new wv),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new wv),s;default:throw Error(i(435,o.tag))}}function Dh(o,s){var l=Iw(o);s.forEach(function(d){var y=Vw.bind(null,o,d);l.has(d)||(l.add(d),d.then(y,y))})}function $n(o,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var y=l[d],_=o,C=s,w=C;e:for(;w!==null;){switch(w.tag){case 27:if(hr(w.type)){bt=w.stateNode,Un=!1;break e}break;case 5:bt=w.stateNode,Un=!1;break e;case 3:case 4:bt=w.stateNode.containerInfo,Un=!0;break e}w=w.return}if(bt===null)throw Error(i(160));xv(_,C,y),bt=null,Un=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Mv(s,o),s=s.sibling}var Ti=null;function Mv(o,s){var l=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:$n(s,o),Yn(o),d&4&&(rr(3,o,o.return),kl(3,o),rr(5,o,o.return));break;case 1:$n(s,o),Yn(o),d&512&&(Bt||l===null||Gi(l,l.return)),d&64&&wo&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(l=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var y=Ti;if($n(s,o),Yn(o),d&512&&(Bt||l===null||Gi(l,l.return)),d&4){var _=l!==null?l.memoizedState:null;if(d=o.memoizedState,l===null)if(d===null)if(o.stateNode===null){e:{d=o.type,l=o.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":_=y.getElementsByTagName("title")[0],(!_||_[sn]||_[He]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(d),y.head.insertBefore(_,y.querySelector("head > title"))),dn(_,d,l),_[He]=o,Ut(_),d=_;break e;case"link":var C=C_("link","href",y).get(d+(l.href||""));if(C){for(var w=0;w<C.length;w++)if(_=C[w],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(w,1);break t}}_=y.createElement(d),dn(_,d,l),y.head.appendChild(_);break;case"meta":if(C=C_("meta","content",y).get(d+(l.content||""))){for(w=0;w<C.length;w++)if(_=C[w],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(w,1);break t}}_=y.createElement(d),dn(_,d,l),y.head.appendChild(_);break;default:throw Error(i(468,d))}_[He]=o,Ut(_),d=_}o.stateNode=d}else w_(y,o.type,o.stateNode);else o.stateNode=A_(y,d,o.memoizedProps);else _!==d?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,d===null?w_(y,o.type,o.stateNode):A_(y,d,o.memoizedProps)):d===null&&o.stateNode!==null&&bh(o,o.memoizedProps,l.memoizedProps)}break;case 27:$n(s,o),Yn(o),d&512&&(Bt||l===null||Gi(l,l.return)),l!==null&&d&4&&bh(o,o.memoizedProps,l.memoizedProps);break;case 5:if($n(s,o),Yn(o),d&512&&(Bt||l===null||Gi(l,l.return)),o.flags&32){y=o.stateNode;try{ei(y,"")}catch(J){At(o,o.return,J)}}d&4&&o.stateNode!=null&&(y=o.memoizedProps,bh(o,y,l!==null?l.memoizedProps:y)),d&1024&&(kh=!0);break;case 6:if($n(s,o),Yn(o),d&4){if(o.stateNode===null)throw Error(i(162));d=o.memoizedProps,l=o.stateNode;try{l.nodeValue=d}catch(J){At(o,o.return,J)}}break;case 3:if(Jc=null,y=Ti,Ti=Yc(s.containerInfo),$n(s,o),Ti=y,Yn(o),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Xl(s.containerInfo)}catch(J){At(o,o.return,J)}kh&&(kh=!1,Nv(o));break;case 4:d=Ti,Ti=Yc(o.stateNode.containerInfo),$n(s,o),Yn(o),Ti=d;break;case 12:$n(s,o),Yn(o);break;case 13:$n(s,o),Yn(o),o.child.flags&8192&&o.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Bh=Vn()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Dh(o,d)));break;case 22:y=o.memoizedState!==null;var P=l!==null&&l.memoizedState!==null,Y=wo,j=Bt;if(wo=Y||y,Bt=j||P,$n(s,o),Bt=j,wo=Y,Yn(o),d&8192)e:for(s=o.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(l===null||P||wo||Bt||us(o)),l=null,s=o;;){if(s.tag===5||s.tag===26){if(l===null){P=l=s;try{if(_=P.stateNode,y)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{w=P.stateNode;var oe=P.memoizedProps.style,K=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;w.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(J){At(P,P.return,J)}}}else if(s.tag===6){if(l===null){P=s;try{P.stateNode.nodeValue=y?"":P.memoizedProps}catch(J){At(P,P.return,J)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=o.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Dh(o,l))));break;case 19:$n(s,o),Yn(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Dh(o,d)));break;case 30:break;case 21:break;default:$n(s,o),Yn(o)}}function Yn(o){var s=o.flags;if(s&2){try{for(var l,d=o.return;d!==null;){if(Av(d)){l=d;break}d=d.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=Mh(o);Dc(o,_,y);break;case 5:var C=l.stateNode;l.flags&32&&(ei(C,""),l.flags&=-33);var w=Mh(o);Dc(o,w,C);break;case 3:case 4:var P=l.stateNode.containerInfo,Y=Mh(o);Nh(o,Y,P);break;default:throw Error(i(161))}}catch(j){At(o,o.return,j)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function Nv(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;Nv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function sr(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Iv(o,s.alternate,s),s=s.sibling}function us(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:rr(4,s,s.return),us(s);break;case 1:Gi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&Ev(s,s.return,l),us(s);break;case 27:Gl(s.stateNode);case 26:case 5:Gi(s,s.return),us(s);break;case 22:s.memoizedState===null&&us(s);break;case 30:us(s);break;default:us(s)}o=o.sibling}}function ar(o,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,y=o,_=s,C=_.flags;switch(_.tag){case 0:case 11:case 15:ar(y,_,l),kl(4,_);break;case 1:if(ar(y,_,l),d=_,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){At(d,d.return,Y)}if(d=_,y=d.updateQueue,y!==null){var w=d.stateNode;try{var P=y.shared.hiddenCallbacks;if(P!==null)for(y.shared.hiddenCallbacks=null,y=0;y<P.length;y++)sy(P[y],w)}catch(Y){At(d,d.return,Y)}}l&&C&64&&Tv(_),Dl(_,_.return);break;case 27:Cv(_);case 26:case 5:ar(y,_,l),l&&d===null&&C&4&&Sv(_),Dl(_,_.return);break;case 12:ar(y,_,l);break;case 13:ar(y,_,l),l&&C&4&&bv(y,_);break;case 22:_.memoizedState===null&&ar(y,_,l),Dl(_,_.return);break;case 30:break;default:ar(y,_,l)}s=s.sibling}}function Ph(o,s){var l=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==l&&(o!=null&&o.refCount++,l!=null&&vl(l))}function Vh(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&vl(o))}function zi(o,s,l,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)kv(o,s,l,d),s=s.sibling}function kv(o,s,l,d){var y=s.flags;switch(s.tag){case 0:case 11:case 15:zi(o,s,l,d),y&2048&&kl(9,s);break;case 1:zi(o,s,l,d);break;case 3:zi(o,s,l,d),y&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&vl(o)));break;case 12:if(y&2048){zi(o,s,l,d),o=s.stateNode;try{var _=s.memoizedProps,C=_.id,w=_.onPostCommit;typeof w=="function"&&w(C,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(P){At(s,s.return,P)}}else zi(o,s,l,d);break;case 13:zi(o,s,l,d);break;case 23:break;case 22:_=s.stateNode,C=s.alternate,s.memoizedState!==null?_._visibility&2?zi(o,s,l,d):Pl(o,s):_._visibility&2?zi(o,s,l,d):(_._visibility|=2,aa(o,s,l,d,(s.subtreeFlags&10256)!==0)),y&2048&&Ph(C,s);break;case 24:zi(o,s,l,d),y&2048&&Vh(s.alternate,s);break;default:zi(o,s,l,d)}}function aa(o,s,l,d,y){for(y=y&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var _=o,C=s,w=l,P=d,Y=C.flags;switch(C.tag){case 0:case 11:case 15:aa(_,C,w,P,y),kl(8,C);break;case 23:break;case 22:var j=C.stateNode;C.memoizedState!==null?j._visibility&2?aa(_,C,w,P,y):Pl(_,C):(j._visibility|=2,aa(_,C,w,P,y)),y&&Y&2048&&Ph(C.alternate,C);break;case 24:aa(_,C,w,P,y),y&&Y&2048&&Vh(C.alternate,C);break;default:aa(_,C,w,P,y)}s=s.sibling}}function Pl(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=o,d=s,y=d.flags;switch(d.tag){case 22:Pl(l,d),y&2048&&Ph(d.alternate,d);break;case 24:Pl(l,d),y&2048&&Vh(d.alternate,d);break;default:Pl(l,d)}s=s.sibling}}var Vl=8192;function la(o){if(o.subtreeFlags&Vl)for(o=o.child;o!==null;)Dv(o),o=o.sibling}function Dv(o){switch(o.tag){case 26:la(o),o.flags&Vl&&o.memoizedState!==null&&fI(Ti,o.memoizedState,o.memoizedProps);break;case 5:la(o);break;case 3:case 4:var s=Ti;Ti=Yc(o.stateNode.containerInfo),la(o),Ti=s;break;case 22:o.memoizedState===null&&(s=o.alternate,s!==null&&s.memoizedState!==null?(s=Vl,Vl=16777216,la(o),Vl=s):la(o));break;default:la(o)}}function Pv(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function Ll(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];nn=d,Lv(d,o)}Pv(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Vv(o),o=o.sibling}function Vv(o){switch(o.tag){case 0:case 11:case 15:Ll(o),o.flags&2048&&rr(9,o,o.return);break;case 3:Ll(o);break;case 12:Ll(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,Pc(o)):Ll(o);break;default:Ll(o)}}function Pc(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];nn=d,Lv(d,o)}Pv(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:rr(8,s,s.return),Pc(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,Pc(s));break;default:Pc(s)}o=o.sibling}}function Lv(o,s){for(;nn!==null;){var l=nn;switch(l.tag){case 0:case 11:case 15:rr(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:vl(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,nn=d;else e:for(l=o;nn!==null;){d=nn;var y=d.sibling,_=d.return;if(Rv(d),d===l){nn=null;break e}if(y!==null){y.return=_,nn=y;break e}nn=_}}}var Rw={getCacheForType:function(o){var s=Tn(Jt),l=s.data.get(o);return l===void 0&&(l=o(),s.data.set(o,l)),l}},xw=typeof WeakMap=="function"?WeakMap:Map,dt=0,It=null,Je=null,tt=0,ht=0,Kn=null,lr=!1,ua=!1,Lh=!1,Ro=0,Lt=0,ur=0,cs=0,Uh=0,ui=0,ca=0,Ul=null,On=null,Oh=!1,Bh=0,Vc=1/0,Lc=null,cr=null,fn=0,fr=null,fa=null,da=0,Fh=0,qh=null,Uv=null,Ol=0,Gh=null;function Jn(){if((dt&2)!==0&&tt!==0)return tt&-tt;if(X.T!==null){var o=js;return o!==0?o:Qh()}return ze()}function Ov(){ui===0&&(ui=(tt&536870912)===0||st?Jo():536870912);var o=li.current;return o!==null&&(o.flags|=32),ui}function Qn(o,s,l){(o===It&&(ht===2||ht===9)||o.cancelPendingCommit!==null)&&(ha(o,0),dr(o,tt,ui,!1)),Z(o,l),((dt&2)===0||o!==It)&&(o===It&&((dt&2)===0&&(cs|=l),Lt===4&&dr(o,tt,ui,!1)),Hi(o))}function Bv(o,s,l){if((dt&6)!==0)throw Error(i(327));var d=!l&&(s&124)===0&&(s&o.expiredLanes)===0||bi(o,s),y=d?Nw(o,s):$h(o,s,!0),_=d;do{if(y===0){ua&&!d&&dr(o,s,0,!1);break}else{if(l=o.current.alternate,_&&!bw(l)){y=$h(o,s,!1),_=!1;continue}if(y===2){if(_=s,o.errorRecoveryDisabledLanes&_)var C=0;else C=o.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){s=C;e:{var w=o;y=Ul;var P=w.current.memoizedState.isDehydrated;if(P&&(ha(w,C).flags|=256),C=$h(w,C,!1),C!==2){if(Lh&&!P){w.errorRecoveryDisabledLanes|=_,cs|=_,y=4;break e}_=On,On=y,_!==null&&(On===null?On=_:On.push.apply(On,_))}y=C}if(_=!1,y!==2)continue}}if(y===1){ha(o,0),dr(o,s,0,!0);break}e:{switch(d=o,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:dr(d,s,ui,!lr);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(y=Bh+300-Vn(),10<y)){if(dr(d,s,ui,!lr),Ko(d,0,!0)!==0)break e;d.timeoutHandle=p_(Fv.bind(null,d,l,On,Lc,Oh,s,ui,cs,ca,lr,_,2,-0,0),y);break e}Fv(d,l,On,Lc,Oh,s,ui,cs,ca,lr,_,0,-0,0)}}break}while(!0);Hi(o)}function Fv(o,s,l,d,y,_,C,w,P,Y,j,oe,K,J){if(o.timeoutHandle=-1,oe=s.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&($l={stylesheets:null,count:0,unsuspend:cI},Dv(s),oe=dI(),oe!==null)){o.cancelPendingCommit=oe(Kv.bind(null,o,s,_,l,d,y,C,w,P,j,1,K,J)),dr(o,_,C,!Y);return}Kv(o,s,_,l,d,y,C,w,P)}function bw(o){for(var s=o;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var y=l[d],_=y.getSnapshot;y=y.value;try{if(!zn(_(),y))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function dr(o,s,l,d){s&=~Uh,s&=~cs,o.suspendedLanes|=s,o.pingedLanes&=~s,d&&(o.warmLanes|=s),d=o.expirationTimes;for(var y=s;0<y;){var _=31-Pt(y),C=1<<_;d[_]=-1,y&=~C}l!==0&&fe(o,l,s)}function Uc(){return(dt&6)===0?(Bl(0),!1):!0}function zh(){if(Je!==null){if(ht===0)var o=Je.return;else o=Je,_o=os=null,sh(o),ra=null,bl=0,o=Je;for(;o!==null;)_v(o.alternate,o),o=o.return;Je=null}}function ha(o,s){var l=o.timeoutHandle;l!==-1&&(o.timeoutHandle=-1,Kw(l)),l=o.cancelPendingCommit,l!==null&&(o.cancelPendingCommit=null,l()),zh(),It=o,Je=l=go(o.current,null),tt=s,ht=0,Kn=null,lr=!1,ua=bi(o,s),Lh=!1,ca=ui=Uh=cs=ur=Lt=0,On=Ul=null,Oh=!1,(s&8)!==0&&(s|=s&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=s;0<d;){var y=31-Pt(d),_=1<<y;s|=o[y],d&=~_}return Ro=s,rc(),l}function qv(o,s){$e=null,X.H=Cc,s===Tl||s===pc?(s=oy(),ht=3):s===ty?(s=oy(),ht=4):ht=s===rv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Kn=s,Je===null&&(Lt=1,bc(o,oi(s,o.current)))}function Gv(){var o=X.H;return X.H=Cc,o===null?Cc:o}function zv(){var o=X.A;return X.A=Rw,o}function Hh(){Lt=4,lr||(tt&4194048)!==tt&&li.current!==null||(ua=!0),(ur&134217727)===0&&(cs&134217727)===0||It===null||dr(It,tt,ui,!1)}function $h(o,s,l){var d=dt;dt|=2;var y=Gv(),_=zv();(It!==o||tt!==s)&&(Lc=null,ha(o,s)),s=!1;var C=Lt;e:do try{if(ht!==0&&Je!==null){var w=Je,P=Kn;switch(ht){case 8:zh(),C=6;break e;case 3:case 2:case 9:case 6:li.current===null&&(s=!0);var Y=ht;if(ht=0,Kn=null,pa(o,w,P,Y),l&&ua){C=0;break e}break;default:Y=ht,ht=0,Kn=null,pa(o,w,P,Y)}}Mw(),C=Lt;break}catch(j){qv(o,j)}while(!0);return s&&o.shellSuspendCounter++,_o=os=null,dt=d,X.H=y,X.A=_,Je===null&&(It=null,tt=0,rc()),C}function Mw(){for(;Je!==null;)Hv(Je)}function Nw(o,s){var l=dt;dt|=2;var d=Gv(),y=zv();It!==o||tt!==s?(Lc=null,Vc=Vn()+500,ha(o,s)):ua=bi(o,s);e:do try{if(ht!==0&&Je!==null){s=Je;var _=Kn;t:switch(ht){case 1:ht=0,Kn=null,pa(o,s,_,1);break;case 2:case 9:if(ny(_)){ht=0,Kn=null,$v(s);break}s=function(){ht!==2&&ht!==9||It!==o||(ht=7),Hi(o)},_.then(s,s);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:ny(_)?(ht=0,Kn=null,$v(s)):(ht=0,Kn=null,pa(o,s,_,7));break;case 5:var C=null;switch(Je.tag){case 26:C=Je.memoizedState;case 5:case 27:var w=Je;if(!C||I_(C)){ht=0,Kn=null;var P=w.sibling;if(P!==null)Je=P;else{var Y=w.return;Y!==null?(Je=Y,Oc(Y)):Je=null}break t}}ht=0,Kn=null,pa(o,s,_,5);break;case 6:ht=0,Kn=null,pa(o,s,_,6);break;case 8:zh(),Lt=6;break e;default:throw Error(i(462))}}kw();break}catch(j){qv(o,j)}while(!0);return _o=os=null,X.H=d,X.A=y,dt=l,Je!==null?0:(It=null,tt=0,rc(),Lt)}function kw(){for(;Je!==null&&!mi();)Hv(Je)}function Hv(o){var s=yv(o.alternate,o,Ro);o.memoizedProps=o.pendingProps,s===null?Oc(o):Je=s}function $v(o){var s=o,l=s.alternate;switch(s.tag){case 15:case 0:s=fv(l,s,s.pendingProps,s.type,void 0,tt);break;case 11:s=fv(l,s,s.pendingProps,s.type.render,s.ref,tt);break;case 5:sh(s);default:_v(l,s),s=Je=Yg(s,Ro),s=yv(l,s,Ro)}o.memoizedProps=o.pendingProps,s===null?Oc(o):Je=s}function pa(o,s,l,d){_o=os=null,sh(s),ra=null,bl=0;var y=s.return;try{if(Ew(o,y,s,l,tt)){Lt=1,bc(o,oi(l,o.current)),Je=null;return}}catch(_){if(y!==null)throw Je=y,_;Lt=1,bc(o,oi(l,o.current)),Je=null;return}s.flags&32768?(st||d===1?o=!0:ua||(tt&536870912)!==0?o=!1:(lr=o=!0,(d===2||d===9||d===3||d===6)&&(d=li.current,d!==null&&d.tag===13&&(d.flags|=16384))),Yv(s,o)):Oc(s)}function Oc(o){var s=o;do{if((s.flags&32768)!==0){Yv(s,lr);return}o=s.return;var l=Aw(s.alternate,s,Ro);if(l!==null){Je=l;return}if(s=s.sibling,s!==null){Je=s;return}Je=s=o}while(s!==null);Lt===0&&(Lt=5)}function Yv(o,s){do{var l=Cw(o.alternate,o);if(l!==null){l.flags&=32767,Je=l;return}if(l=o.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(o=o.sibling,o!==null)){Je=o;return}Je=o=l}while(o!==null);Lt=6,Je=null}function Kv(o,s,l,d,y,_,C,w,P){o.cancelPendingCommit=null;do Bc();while(fn!==0);if((dt&6)!==0)throw Error(i(327));if(s!==null){if(s===o.current)throw Error(i(177));if(_=s.lanes|s.childLanes,_|=Vd,ie(o,l,_,C,w,P),o===It&&(Je=It=null,tt=0),fa=s,fr=o,da=l,Fh=_,qh=y,Uv=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Lw(no,function(){return Zv(),null})):(o.callbackNode=null,o.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=X.T,X.T=null,y=pe.p,pe.p=2,C=dt,dt|=4;try{ww(o,s,l)}finally{dt=C,pe.p=y,X.T=d}}fn=1,Jv(),Qv(),Xv()}}function Jv(){if(fn===1){fn=0;var o=fr,s=fa,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var d=pe.p;pe.p=2;var y=dt;dt|=4;try{Mv(s,o);var _=ip,C=Lg(o.containerInfo),w=_.focusedElem,P=_.selectionRange;if(C!==w&&w&&w.ownerDocument&&Vg(w.ownerDocument.documentElement,w)){if(P!==null&&Md(w)){var Y=P.start,j=P.end;if(j===void 0&&(j=Y),"selectionStart"in w)w.selectionStart=Y,w.selectionEnd=Math.min(j,w.value.length);else{var oe=w.ownerDocument||document,K=oe&&oe.defaultView||window;if(K.getSelection){var J=K.getSelection(),Me=w.textContent.length,Re=Math.min(P.start,Me),Tt=P.end===void 0?Re:Math.min(P.end,Me);!J.extend&&Re>Tt&&(C=Tt,Tt=Re,Re=C);var G=Pg(w,Re),B=Pg(w,Tt);if(G&&B&&(J.rangeCount!==1||J.anchorNode!==G.node||J.anchorOffset!==G.offset||J.focusNode!==B.node||J.focusOffset!==B.offset)){var $=oe.createRange();$.setStart(G.node,G.offset),J.removeAllRanges(),Re>Tt?(J.addRange($),J.extend(B.node,B.offset)):($.setEnd(B.node,B.offset),J.addRange($))}}}}for(oe=[],J=w;J=J.parentNode;)J.nodeType===1&&oe.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<oe.length;w++){var ee=oe[w];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Wc=!!np,ip=np=null}finally{dt=y,pe.p=d,X.T=l}}o.current=s,fn=2}}function Qv(){if(fn===2){fn=0;var o=fr,s=fa,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var d=pe.p;pe.p=2;var y=dt;dt|=4;try{Iv(o,s.alternate,s)}finally{dt=y,pe.p=d,X.T=l}}fn=3}}function Xv(){if(fn===4||fn===3){fn=0,zo();var o=fr,s=fa,l=da,d=Uv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?fn=5:(fn=0,fa=fr=null,Wv(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(cr=null),Ge(l),s=s.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(xt,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=X.T,y=pe.p,pe.p=2,X.T=null;try{for(var _=o.onRecoverableError,C=0;C<d.length;C++){var w=d[C];_(w.value,{componentStack:w.stack})}}finally{X.T=s,pe.p=y}}(da&3)!==0&&Bc(),Hi(o),y=o.pendingLanes,(l&4194090)!==0&&(y&42)!==0?o===Gh?Ol++:(Ol=0,Gh=o):Ol=0,Bl(0)}}function Wv(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,vl(s)))}function Bc(o){return Jv(),Qv(),Xv(),Zv()}function Zv(){if(fn!==5)return!1;var o=fr,s=Fh;Fh=0;var l=Ge(da),d=X.T,y=pe.p;try{pe.p=32>l?32:l,X.T=null,l=qh,qh=null;var _=fr,C=da;if(fn=0,fa=fr=null,da=0,(dt&6)!==0)throw Error(i(331));var w=dt;if(dt|=4,Vv(_.current),kv(_,_.current,C,l),dt=w,Bl(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(xt,_)}catch{}return!0}finally{pe.p=y,X.T=d,Wv(o,s)}}function jv(o,s,l){s=oi(l,s),s=Th(o.stateNode,s,2),o=tr(o,s,2),o!==null&&(Z(o,2),Hi(o))}function At(o,s,l){if(o.tag===3)jv(o,o,l);else for(;s!==null;){if(s.tag===3){jv(s,o,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(cr===null||!cr.has(d))){o=oi(l,o),l=iv(2),d=tr(s,l,2),d!==null&&(ov(l,d,s,o),Z(d,2),Hi(d));break}}s=s.return}}function Yh(o,s,l){var d=o.pingCache;if(d===null){d=o.pingCache=new xw;var y=new Set;d.set(s,y)}else y=d.get(s),y===void 0&&(y=new Set,d.set(s,y));y.has(l)||(Lh=!0,y.add(l),o=Dw.bind(null,o,s,l),s.then(o,o))}function Dw(o,s,l){var d=o.pingCache;d!==null&&d.delete(s),o.pingedLanes|=o.suspendedLanes&l,o.warmLanes&=~l,It===o&&(tt&l)===l&&(Lt===4||Lt===3&&(tt&62914560)===tt&&300>Vn()-Bh?(dt&2)===0&&ha(o,0):Uh|=l,ca===tt&&(ca=0)),Hi(o)}function e_(o,s){s===0&&(s=Zt()),o=Qs(o,s),o!==null&&(Z(o,s),Hi(o))}function Pw(o){var s=o.memoizedState,l=0;s!==null&&(l=s.retryLane),e_(o,l)}function Vw(o,s){var l=0;switch(o.tag){case 13:var d=o.stateNode,y=o.memoizedState;y!==null&&(l=y.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(s),e_(o,l)}function Lw(o,s){return Ri(o,s)}var Fc=null,ma=null,Kh=!1,qc=!1,Jh=!1,fs=0;function Hi(o){o!==ma&&o.next===null&&(ma===null?Fc=ma=o:ma=ma.next=o),qc=!0,Kh||(Kh=!0,Ow())}function Bl(o,s){if(!Jh&&qc){Jh=!0;do for(var l=!1,d=Fc;d!==null;){if(o!==0){var y=d.pendingLanes;if(y===0)var _=0;else{var C=d.suspendedLanes,w=d.pingedLanes;_=(1<<31-Pt(42|o)+1)-1,_&=y&~(C&~w),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,o_(d,_))}else _=tt,_=Ko(d,d===It?_:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(_&3)===0||bi(d,_)||(l=!0,o_(d,_));d=d.next}while(l);Jh=!1}}function Uw(){t_()}function t_(){qc=Kh=!1;var o=0;fs!==0&&(Yw()&&(o=fs),fs=0);for(var s=Vn(),l=null,d=Fc;d!==null;){var y=d.next,_=n_(d,s);_===0?(d.next=null,l===null?Fc=y:l.next=y,y===null&&(ma=l)):(l=d,(o!==0||(_&3)!==0)&&(qc=!0)),d=y}Bl(o)}function n_(o,s){for(var l=o.suspendedLanes,d=o.pingedLanes,y=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var C=31-Pt(_),w=1<<C,P=y[C];P===-1?((w&l)===0||(w&d)!==0)&&(y[C]=Ur(w,s)):P<=s&&(o.expiredLanes|=w),_&=~w}if(s=It,l=tt,l=Ko(o,o===s?l:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d=o.callbackNode,l===0||o===s&&(ht===2||ht===9)||o.cancelPendingCommit!==null)return d!==null&&d!==null&&pi(d),o.callbackNode=null,o.callbackPriority=0;if((l&3)===0||bi(o,l)){if(s=l&-l,s===o.callbackPriority)return s;switch(d!==null&&pi(d),Ge(l)){case 2:case 8:l=$o;break;case 32:l=no;break;case 268435456:l=xi;break;default:l=no}return d=i_.bind(null,o),l=Ri(l,d),o.callbackPriority=s,o.callbackNode=l,s}return d!==null&&d!==null&&pi(d),o.callbackPriority=2,o.callbackNode=null,2}function i_(o,s){if(fn!==0&&fn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var l=o.callbackNode;if(Bc()&&o.callbackNode!==l)return null;var d=tt;return d=Ko(o,o===It?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d===0?null:(Bv(o,d,s),n_(o,Vn()),o.callbackNode!=null&&o.callbackNode===l?i_.bind(null,o):null)}function o_(o,s){if(Bc())return null;Bv(o,s,!0)}function Ow(){Jw(function(){(dt&6)!==0?Ri(Ho,Uw):t_()})}function Qh(){return fs===0&&(fs=Jo()),fs}function r_(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Us(""+o)}function s_(o,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,o.id&&l.setAttribute("form",o.id),s.parentNode.insertBefore(l,s),o=new FormData(o),l.parentNode.removeChild(l),o}function Bw(o,s,l,d,y){if(s==="submit"&&l&&l.stateNode===y){var _=r_((y[we]||null).action),C=d.submitter;C&&(s=(s=C[we]||null)?r_(s.formAction):C.getAttribute("formAction"),s!==null&&(_=s,C=null));var w=new Os("action","action",null,d,y);o.push({event:w,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(fs!==0){var P=C?s_(y,C):new FormData(y);mh(l,{pending:!0,data:P,method:y.method,action:_},null,P)}}else typeof _=="function"&&(w.preventDefault(),P=C?s_(y,C):new FormData(y),mh(l,{pending:!0,data:P,method:y.method,action:_},_,P))},currentTarget:y}]})}}for(var Xh=0;Xh<Pd.length;Xh++){var Wh=Pd[Xh],Fw=Wh.toLowerCase(),qw=Wh[0].toUpperCase()+Wh.slice(1);_i(Fw,"on"+qw)}_i(Bg,"onAnimationEnd"),_i(Fg,"onAnimationIteration"),_i(qg,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(ow,"onTransitionRun"),_i(rw,"onTransitionStart"),_i(sw,"onTransitionCancel"),_i(Gg,"onTransitionEnd"),so("onMouseEnter",["mouseout","mouseover"]),so("onMouseLeave",["mouseout","mouseover"]),so("onPointerEnter",["pointerout","pointerover"]),so("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function a_(o,s){s=(s&4)!==0;for(var l=0;l<o.length;l++){var d=o[l],y=d.event;d=d.listeners;e:{var _=void 0;if(s)for(var C=d.length-1;0<=C;C--){var w=d[C],P=w.instance,Y=w.currentTarget;if(w=w.listener,P!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=Y;try{_(y)}catch(j){xc(j)}y.currentTarget=null,_=P}else for(C=0;C<d.length;C++){if(w=d[C],P=w.instance,Y=w.currentTarget,w=w.listener,P!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=Y;try{_(y)}catch(j){xc(j)}y.currentTarget=null,_=P}}}}function Qe(o,s){var l=s[St];l===void 0&&(l=s[St]=new Set);var d=o+"__bubble";l.has(d)||(l_(s,o,2,!1),l.add(d))}function Zh(o,s,l){var d=0;s&&(d|=4),l_(l,o,d,s)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function jh(o){if(!o[Gc]){o[Gc]=!0,Za.forEach(function(l){l!=="selectionchange"&&(Gw.has(l)||Zh(l,!1,o),Zh(l,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[Gc]||(s[Gc]=!0,Zh("selectionchange",!1,s))}}function l_(o,s,l,d){switch(k_(s)){case 2:var y=mI;break;case 8:y=gI;break;default:y=hp}l=y.bind(null,s,l,o),y=void 0,!ni||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),d?y!==void 0?o.addEventListener(s,l,{capture:!0,passive:y}):o.addEventListener(s,l,!0):y!==void 0?o.addEventListener(s,l,{passive:y}):o.addEventListener(s,l,!1)}function ep(o,s,l,d,y){var _=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var w=d.stateNode.containerInfo;if(w===y)break;if(C===4)for(C=d.return;C!==null;){var P=C.tag;if((P===3||P===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;w!==null;){if(C=an(w),C===null)return;if(P=C.tag,P===5||P===6||P===26||P===27){d=_=C;continue e}w=w.parentNode}}d=d.return}Hu(function(){var Y=_,j=ti(l),oe=[];e:{var K=zg.get(o);if(K!==void 0){var J=Os,Me=o;switch(o){case"keypress":if(Vi(l)===0)break e;case"keydown":case"keyup":J=Hs;break;case"focusin":Me="focus",J=qs;break;case"focusout":Me="blur",J=qs;break;case"beforeblur":case"afterblur":J=qs;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=ii;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Id;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Zu;break;case Bg:case Fg:case qg:J=Gs;break;case Gg:J=ec;break;case"scroll":case"scrollend":J=$u;break;case"wheel":J=$s;break;case"copy":case"cut":case"paste":J=zs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=cl;break;case"toggle":case"beforetoggle":J=nc}var Re=(s&4)!==0,Tt=!Re&&(o==="scroll"||o==="scrollend"),G=Re?K!==null?K+"Capture":null:K;Re=[];for(var B=Y,$;B!==null;){var ee=B;if($=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||$===null||G===null||(ee=Hr(B,G),ee!=null&&Re.push(ql(B,ee,$))),Tt)break;B=B.return}0<Re.length&&(K=new J(K,Me,null,l,j),oe.push({event:K,listeners:Re}))}}if((s&7)===0){e:{if(K=o==="mouseover"||o==="pointerover",J=o==="mouseout"||o==="pointerout",K&&l!==uo&&(Me=l.relatedTarget||l.fromElement)&&(an(Me)||Me[Pe]))break e;if((J||K)&&(K=j.window===j?j:(K=j.ownerDocument)?K.defaultView||K.parentWindow:window,J?(Me=l.relatedTarget||l.toElement,J=Y,Me=Me?an(Me):null,Me!==null&&(Tt=a(Me),Re=Me.tag,Me!==Tt||Re!==5&&Re!==27&&Re!==6)&&(Me=null)):(J=null,Me=Y),J!==Me)){if(Re=ii,ee="onMouseLeave",G="onMouseEnter",B="mouse",(o==="pointerout"||o==="pointerover")&&(Re=cl,ee="onPointerLeave",G="onPointerEnter",B="pointer"),Tt=J==null?K:Ni(J),$=Me==null?K:Ni(Me),K=new Re(ee,B+"leave",J,l,j),K.target=Tt,K.relatedTarget=$,ee=null,an(j)===Y&&(Re=new Re(G,B+"enter",Me,l,j),Re.target=$,Re.relatedTarget=Tt,ee=Re),Tt=ee,J&&Me)t:{for(Re=J,G=Me,B=0,$=Re;$;$=ga($))B++;for($=0,ee=G;ee;ee=ga(ee))$++;for(;0<B-$;)Re=ga(Re),B--;for(;0<$-B;)G=ga(G),$--;for(;B--;){if(Re===G||G!==null&&Re===G.alternate)break t;Re=ga(Re),G=ga(G)}Re=null}else Re=null;J!==null&&u_(oe,K,J,Re,!1),Me!==null&&Tt!==null&&u_(oe,Tt,Me,Re,!0)}}e:{if(K=Y?Ni(Y):window,J=K.nodeName&&K.nodeName.toLowerCase(),J==="select"||J==="input"&&K.type==="file")var ge=xg;else if(Kt(K))if(bg)ge=tw;else{ge=jC;var Ye=ZC}else J=K.nodeName,!J||J.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&il(Y.elementType)&&(ge=xg):ge=ew;if(ge&&(ge=ge(o,Y))){mo(oe,ge,l,j);break e}Ye&&Ye(o,K,Y),o==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&Xo(K,"number",K.value)}switch(Ye=Y?Ni(Y):window,o){case"focusin":(Kt(Ye)||Ye.contentEditable==="true")&&(Ys=Ye,Nd=Y,hl=null);break;case"focusout":hl=Nd=Ys=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,Ug(oe,l,j);break;case"selectionchange":if(iw)break;case"keydown":case"keyup":Ug(oe,l,j)}var Ee;if(Oi)e:{switch(o){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else je?Q(o,l)&&(xe="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(xe="onCompositionStart");xe&&(A&&l.locale!=="ko"&&(je||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&je&&(Ee=rl()):(Pi=j,Wo="value"in Pi?Pi.value:Pi.textContent,je=!0)),Ye=zc(Y,xe),0<Ye.length&&(xe=new ll(xe,o,null,l,j),oe.push({event:xe,listeners:Ye}),Ee?xe.data=Ee:(Ee=de(l),Ee!==null&&(xe.data=Ee)))),(Ee=T?Yt(o,l):et(o,l))&&(xe=zc(Y,"onBeforeInput"),0<xe.length&&(Ye=new ll("onBeforeInput","beforeinput",null,l,j),oe.push({event:Ye,listeners:xe}),Ye.data=Ee)),Bw(oe,o,Y,l,j)}a_(oe,s)})}function ql(o,s,l){return{instance:o,listener:s,currentTarget:l}}function zc(o,s){for(var l=s+"Capture",d=[];o!==null;){var y=o,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Hr(o,l),y!=null&&d.unshift(ql(o,y,_)),y=Hr(o,s),y!=null&&d.push(ql(o,y,_))),o.tag===3)return d;o=o.return}return[]}function ga(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function u_(o,s,l,d,y){for(var _=s._reactName,C=[];l!==null&&l!==d;){var w=l,P=w.alternate,Y=w.stateNode;if(w=w.tag,P!==null&&P===d)break;w!==5&&w!==26&&w!==27||Y===null||(P=Y,y?(Y=Hr(l,_),Y!=null&&C.unshift(ql(l,Y,P))):y||(Y=Hr(l,_),Y!=null&&C.push(ql(l,Y,P)))),l=l.return}C.length!==0&&o.push({event:s,listeners:C})}var zw=/\r\n?/g,Hw=/\u0000|\uFFFD/g;function c_(o){return(typeof o=="string"?o:""+o).replace(zw,`
`).replace(Hw,"")}function f_(o,s){return s=c_(s),c_(o)===s}function Hc(){}function _t(o,s,l,d,y,_){switch(l){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||ei(o,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&ei(o,""+d);break;case"className":ki(o,"class",d);break;case"tabIndex":ki(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ki(o,l,d);break;case"style":nl(o,d,_);break;case"data":if(s!=="object"){ki(o,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||l!=="href")){o.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(l);break}d=Us(""+d),o.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(s!=="input"&&_t(o,s,"name",y.name,y,null),_t(o,s,"formEncType",y.formEncType,y,null),_t(o,s,"formMethod",y.formMethod,y,null),_t(o,s,"formTarget",y.formTarget,y,null)):(_t(o,s,"encType",y.encType,y,null),_t(o,s,"method",y.method,y,null),_t(o,s,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(l);break}d=Us(""+d),o.setAttribute(l,d);break;case"onClick":d!=null&&(o.onclick=Hc);break;case"onScroll":d!=null&&Qe("scroll",o);break;case"onScrollEnd":d!=null&&Qe("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}l=Us(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(l,""+d):o.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(l,""):o.removeAttribute(l);break;case"capture":case"download":d===!0?o.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(l,d):o.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(l,d):o.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(l):o.setAttribute(l,d);break;case"popover":Qe("beforetoggle",o),Qe("toggle",o),Qo(o,"popover",d);break;case"xlinkActuate":ln(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":ln(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":ln(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":ln(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":ln(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":ln(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":ln(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":ln(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":ln(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Qo(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Cd.get(l)||l,Qo(o,l,d))}}function tp(o,s,l,d,y,_){switch(l){case"style":nl(o,d,_);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"children":typeof d=="string"?ei(o,d):(typeof d=="number"||typeof d=="bigint")&&ei(o,""+d);break;case"onScroll":d!=null&&Qe("scroll",o);break;case"onScrollEnd":d!=null&&Qe("scrollend",o);break;case"onClick":d!=null&&(o.onclick=Hc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ks.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),s=l.slice(2,y?l.length-7:void 0),_=o[we]||null,_=_!=null?_[l]:null,typeof _=="function"&&o.removeEventListener(s,_,y),typeof d=="function")){typeof _!="function"&&_!==null&&(l in o?o[l]=null:o.hasAttribute(l)&&o.removeAttribute(l)),o.addEventListener(s,d,y);break e}l in o?o[l]=d:d===!0?o.setAttribute(l,""):Qo(o,l,d)}}}function dn(o,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",o),Qe("load",o);var d=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var C=l[_];if(C!=null)switch(_){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:_t(o,s,_,C,l,null)}}y&&_t(o,s,"srcSet",l.srcSet,l,null),d&&_t(o,s,"src",l.src,l,null);return;case"input":Qe("invalid",o);var w=_=C=y=null,P=null,Y=null;for(d in l)if(l.hasOwnProperty(d)){var j=l[d];if(j!=null)switch(d){case"name":y=j;break;case"type":C=j;break;case"checked":P=j;break;case"defaultChecked":Y=j;break;case"value":_=j;break;case"defaultValue":w=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,s));break;default:_t(o,s,d,j,l,null)}}qr(o,_,w,P,Y,C,y,!1),Ls(o);return;case"select":Qe("invalid",o),d=C=_=null;for(y in l)if(l.hasOwnProperty(y)&&(w=l[y],w!=null))switch(y){case"value":_=w;break;case"defaultValue":C=w;break;case"multiple":d=w;default:_t(o,s,y,w,l,null)}s=_,l=C,o.multiple=!!d,s!=null?lo(o,!!d,s,!1):l!=null&&lo(o,!!d,l,!0);return;case"textarea":Qe("invalid",o),_=y=d=null;for(C in l)if(l.hasOwnProperty(C)&&(w=l[C],w!=null))switch(C){case"value":d=w;break;case"defaultValue":y=w;break;case"children":_=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:_t(o,s,C,w,l,null)}Gr(o,d,y,_),Ls(o);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(d=l[P],d!=null))switch(P){case"selected":o.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:_t(o,s,P,d,l,null)}return;case"dialog":Qe("beforetoggle",o),Qe("toggle",o),Qe("cancel",o),Qe("close",o);break;case"iframe":case"object":Qe("load",o);break;case"video":case"audio":for(d=0;d<Fl.length;d++)Qe(Fl[d],o);break;case"image":Qe("error",o),Qe("load",o);break;case"details":Qe("toggle",o);break;case"embed":case"source":case"link":Qe("error",o),Qe("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(d=l[Y],d!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:_t(o,s,Y,d,l,null)}return;default:if(il(s)){for(j in l)l.hasOwnProperty(j)&&(d=l[j],d!==void 0&&tp(o,s,j,d,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(d=l[w],d!=null&&_t(o,s,w,d,l,null))}function $w(o,s,l,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,C=null,w=null,P=null,Y=null,j=null;for(J in l){var oe=l[J];if(l.hasOwnProperty(J)&&oe!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":P=oe;default:d.hasOwnProperty(J)||_t(o,s,J,null,d,oe)}}for(var K in d){var J=d[K];if(oe=l[K],d.hasOwnProperty(K)&&(J!=null||oe!=null))switch(K){case"type":_=J;break;case"name":y=J;break;case"checked":Y=J;break;case"defaultChecked":j=J;break;case"value":C=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:J!==oe&&_t(o,s,K,J,d,oe)}}Gn(o,C,w,P,Y,j,_,y);return;case"select":J=C=w=K=null;for(_ in l)if(P=l[_],l.hasOwnProperty(_)&&P!=null)switch(_){case"value":break;case"multiple":J=P;default:d.hasOwnProperty(_)||_t(o,s,_,null,d,P)}for(y in d)if(_=d[y],P=l[y],d.hasOwnProperty(y)&&(_!=null||P!=null))switch(y){case"value":K=_;break;case"defaultValue":w=_;break;case"multiple":C=_;default:_!==P&&_t(o,s,y,_,d,P)}s=w,l=C,d=J,K!=null?lo(o,!!l,K,!1):!!d!=!!l&&(s!=null?lo(o,!!l,s,!0):lo(o,!!l,l?[]:"",!1));return;case"textarea":J=K=null;for(w in l)if(y=l[w],l.hasOwnProperty(w)&&y!=null&&!d.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:_t(o,s,w,null,d,y)}for(C in d)if(y=d[C],_=l[C],d.hasOwnProperty(C)&&(y!=null||_!=null))switch(C){case"value":K=y;break;case"defaultValue":J=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&_t(o,s,C,y,d,_)}yt(o,K,J);return;case"option":for(var Me in l)if(K=l[Me],l.hasOwnProperty(Me)&&K!=null&&!d.hasOwnProperty(Me))switch(Me){case"selected":o.selected=!1;break;default:_t(o,s,Me,null,d,K)}for(P in d)if(K=d[P],J=l[P],d.hasOwnProperty(P)&&K!==J&&(K!=null||J!=null))switch(P){case"selected":o.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:_t(o,s,P,K,d,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in l)K=l[Re],l.hasOwnProperty(Re)&&K!=null&&!d.hasOwnProperty(Re)&&_t(o,s,Re,null,d,K);for(Y in d)if(K=d[Y],J=l[Y],d.hasOwnProperty(Y)&&K!==J&&(K!=null||J!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:_t(o,s,Y,K,d,J)}return;default:if(il(s)){for(var Tt in l)K=l[Tt],l.hasOwnProperty(Tt)&&K!==void 0&&!d.hasOwnProperty(Tt)&&tp(o,s,Tt,void 0,d,K);for(j in d)K=d[j],J=l[j],!d.hasOwnProperty(j)||K===J||K===void 0&&J===void 0||tp(o,s,j,K,d,J);return}}for(var G in l)K=l[G],l.hasOwnProperty(G)&&K!=null&&!d.hasOwnProperty(G)&&_t(o,s,G,null,d,K);for(oe in d)K=d[oe],J=l[oe],!d.hasOwnProperty(oe)||K===J||K==null&&J==null||_t(o,s,oe,K,d,J)}var np=null,ip=null;function $c(o){return o.nodeType===9?o:o.ownerDocument}function d_(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h_(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function op(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var rp=null;function Yw(){var o=window.event;return o&&o.type==="popstate"?o===rp?!1:(rp=o,!0):(rp=null,!1)}var p_=typeof setTimeout=="function"?setTimeout:void 0,Kw=typeof clearTimeout=="function"?clearTimeout:void 0,m_=typeof Promise=="function"?Promise:void 0,Jw=typeof queueMicrotask=="function"?queueMicrotask:typeof m_<"u"?function(o){return m_.resolve(null).then(o).catch(Qw)}:p_;function Qw(o){setTimeout(function(){throw o})}function hr(o){return o==="head"}function g_(o,s){var l=s,d=0,y=0;do{var _=l.nextSibling;if(o.removeChild(l),_&&_.nodeType===8)if(l=_.data,l==="/$"){if(0<d&&8>d){l=d;var C=o.ownerDocument;if(l&1&&Gl(C.documentElement),l&2&&Gl(C.body),l&4)for(l=C.head,Gl(l),C=l.firstChild;C;){var w=C.nextSibling,P=C.nodeName;C[sn]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=w}}if(y===0){o.removeChild(_),Xl(s);return}y--}else l==="$"||l==="$?"||l==="$!"?y++:d=l.charCodeAt(0)-48;else d=0;l=_}while(l);Xl(s)}function sp(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":sp(l),jn(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}o.removeChild(l)}}function Xw(o,s,l,d){for(;o.nodeType===1;){var y=l;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[sn])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=Ei(o.nextSibling),o===null)break}return null}function Ww(o,s,l){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Ei(o.nextSibling),o===null))return null;return o}function ap(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function Zw(o,s){var l=o.ownerDocument;if(o.data!=="$?"||l.readyState==="complete")s();else{var d=function(){s(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),o._reactRetry=d}}function Ei(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return o}var lp=null;function y_(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return o;s--}else l==="/$"&&s++}o=o.previousSibling}return null}function v_(o,s,l){switch(s=$c(l),o){case"html":if(o=s.documentElement,!o)throw Error(i(452));return o;case"head":if(o=s.head,!o)throw Error(i(453));return o;case"body":if(o=s.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Gl(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);jn(o)}var ci=new Map,__=new Set;function Yc(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var xo=pe.d;pe.d={f:jw,r:eI,D:tI,C:nI,L:iI,m:oI,X:sI,S:rI,M:aI};function jw(){var o=xo.f(),s=Uc();return o||s}function eI(o){var s=Mi(o);s!==null&&s.tag===5&&s.type==="form"?By(s):xo.r(o)}var ya=typeof document>"u"?null:document;function T_(o,s,l){var d=ya;if(d&&typeof s=="string"&&s){var y=qt(s);y='link[rel="'+o+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),__.has(y)||(__.add(y),o={rel:o,crossOrigin:l,href:s},d.querySelector(y)===null&&(s=d.createElement("link"),dn(s,"link",o),Ut(s),d.head.appendChild(s)))}}function tI(o){xo.D(o),T_("dns-prefetch",o,null)}function nI(o,s){xo.C(o,s),T_("preconnect",o,s)}function iI(o,s,l){xo.L(o,s,l);var d=ya;if(d&&o&&s){var y='link[rel="preload"][as="'+qt(s)+'"]';s==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+qt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+qt(l.imageSizes)+'"]')):y+='[href="'+qt(o)+'"]';var _=y;switch(s){case"style":_=va(o);break;case"script":_=_a(o)}ci.has(_)||(o=v({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:o,as:s},l),ci.set(_,o),d.querySelector(y)!==null||s==="style"&&d.querySelector(zl(_))||s==="script"&&d.querySelector(Hl(_))||(s=d.createElement("link"),dn(s,"link",o),Ut(s),d.head.appendChild(s)))}}function oI(o,s){xo.m(o,s);var l=ya;if(l&&o){var d=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+qt(d)+'"][href="'+qt(o)+'"]',_=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=_a(o)}if(!ci.has(_)&&(o=v({rel:"modulepreload",href:o},s),ci.set(_,o),l.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Hl(_)))return}d=l.createElement("link"),dn(d,"link",o),Ut(d),l.head.appendChild(d)}}}function rI(o,s,l){xo.S(o,s,l);var d=ya;if(d&&o){var y=bn(d).hoistableStyles,_=va(o);s=s||"default";var C=y.get(_);if(!C){var w={loading:0,preload:null};if(C=d.querySelector(zl(_)))w.loading=5;else{o=v({rel:"stylesheet",href:o,"data-precedence":s},l),(l=ci.get(_))&&up(o,l);var P=C=d.createElement("link");Ut(P),dn(P,"link",o),P._p=new Promise(function(Y,j){P.onload=Y,P.onerror=j}),P.addEventListener("load",function(){w.loading|=1}),P.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Kc(C,s,d)}C={type:"stylesheet",instance:C,count:1,state:w},y.set(_,C)}}}function sI(o,s){xo.X(o,s);var l=ya;if(l&&o){var d=bn(l).hoistableScripts,y=_a(o),_=d.get(y);_||(_=l.querySelector(Hl(y)),_||(o=v({src:o,async:!0},s),(s=ci.get(y))&&cp(o,s),_=l.createElement("script"),Ut(_),dn(_,"link",o),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function aI(o,s){xo.M(o,s);var l=ya;if(l&&o){var d=bn(l).hoistableScripts,y=_a(o),_=d.get(y);_||(_=l.querySelector(Hl(y)),_||(o=v({src:o,async:!0,type:"module"},s),(s=ci.get(y))&&cp(o,s),_=l.createElement("script"),Ut(_),dn(_,"link",o),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function E_(o,s,l,d){var y=(y=be.current)?Yc(y):null;if(!y)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=va(l.href),l=bn(y).hoistableStyles,d=l.get(s),d||(d={type:"style",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){o=va(l.href);var _=bn(y).hoistableStyles,C=_.get(o);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,C),(_=y.querySelector(zl(o)))&&!_._p&&(C.instance=_,C.state.loading=5),ci.has(o)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ci.set(o,l),_||lI(y,o,l,C.state))),s&&d===null)throw Error(i(528,""));return C}if(s&&d!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=_a(l),l=bn(y).hoistableScripts,d=l.get(s),d||(d={type:"script",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function va(o){return'href="'+qt(o)+'"'}function zl(o){return'link[rel="stylesheet"]['+o+"]"}function S_(o){return v({},o,{"data-precedence":o.precedence,precedence:null})}function lI(o,s,l,d){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=o.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),dn(s,"link",l),Ut(s),o.head.appendChild(s))}function _a(o){return'[src="'+qt(o)+'"]'}function Hl(o){return"script[async]"+o}function A_(o,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var d=o.querySelector('style[data-href~="'+qt(l.href)+'"]');if(d)return s.instance=d,Ut(d),d;var y=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),Ut(d),dn(d,"style",y),Kc(d,l.precedence,o),s.instance=d;case"stylesheet":y=va(l.href);var _=o.querySelector(zl(y));if(_)return s.state.loading|=4,s.instance=_,Ut(_),_;d=S_(l),(y=ci.get(y))&&up(d,y),_=(o.ownerDocument||o).createElement("link"),Ut(_);var C=_;return C._p=new Promise(function(w,P){C.onload=w,C.onerror=P}),dn(_,"link",d),s.state.loading|=4,Kc(_,l.precedence,o),s.instance=_;case"script":return _=_a(l.src),(y=o.querySelector(Hl(_)))?(s.instance=y,Ut(y),y):(d=l,(y=ci.get(_))&&(d=v({},l),cp(d,y)),o=o.ownerDocument||o,y=o.createElement("script"),Ut(y),dn(y,"link",d),o.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,Kc(d,l.precedence,o));return s.instance}function Kc(o,s,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,_=y,C=0;C<d.length;C++){var w=d[C];if(w.dataset.precedence===s)_=w;else if(_!==y)break}_?_.parentNode.insertBefore(o,_.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(o,s.firstChild))}function up(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function cp(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var Jc=null;function C_(o,s,l){if(Jc===null){var d=new Map,y=Jc=new Map;y.set(l,d)}else y=Jc,d=y.get(l),d||(d=new Map,y.set(l,d));if(d.has(o))return d;for(d.set(o,null),l=l.getElementsByTagName(o),y=0;y<l.length;y++){var _=l[y];if(!(_[sn]||_[He]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(s)||"";C=o+C;var w=d.get(C);w?w.push(_):d.set(C,[_])}}return d}function w_(o,s,l){o=o.ownerDocument||o,o.head.insertBefore(l,s==="title"?o.querySelector("head > title"):null)}function uI(o,s,l){if(l===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return o=s.disabled,typeof s.precedence=="string"&&o==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function I_(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var $l=null;function cI(){}function fI(o,s,l){if($l===null)throw Error(i(475));var d=$l;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var y=va(l.href),_=o.querySelector(zl(y));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(d.count++,d=Qc.bind(d),o.then(d,d)),s.state.loading|=4,s.instance=_,Ut(_);return}_=o.ownerDocument||o,l=S_(l),(y=ci.get(y))&&up(l,y),_=_.createElement("link"),Ut(_);var C=_;C._p=new Promise(function(w,P){C.onload=w,C.onerror=P}),dn(_,"link",l),s.instance=_}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(s,o),(o=s.state.preload)&&(s.state.loading&3)===0&&(d.count++,s=Qc.bind(d),o.addEventListener("load",s),o.addEventListener("error",s))}}function dI(){if($l===null)throw Error(i(475));var o=$l;return o.stylesheets&&o.count===0&&fp(o,o.stylesheets),0<o.count?function(s){var l=setTimeout(function(){if(o.stylesheets&&fp(o,o.stylesheets),o.unsuspend){var d=o.unsuspend;o.unsuspend=null,d()}},6e4);return o.unsuspend=s,function(){o.unsuspend=null,clearTimeout(l)}}:null}function Qc(){if(this.count--,this.count===0){if(this.stylesheets)fp(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Xc=null;function fp(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Xc=new Map,s.forEach(hI,o),Xc=null,Qc.call(o))}function hI(o,s){if(!(s.state.loading&4)){var l=Xc.get(o);if(l)var d=l.get(null);else{l=new Map,Xc.set(o,l);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var C=y[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),d=C)}d&&l.set(null,d)}y=s.instance,C=y.getAttribute("data-precedence"),_=l.get(C)||d,_===d&&l.set(null,y),l.set(C,y),this.count++,d=Qc.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),_?_.parentNode.insertBefore(y,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),s.state.loading|=4}}var Yl={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function pI(o,s,l,d,y,_,C,w){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=z(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z(0),this.hiddenUpdates=z(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function R_(o,s,l,d,y,_,C,w,P,Y,j,oe){return o=new pI(o,s,l,C,w,P,Y,oe),s=1,_===!0&&(s|=24),_=Hn(3,null,null,s),o.current=_,_.stateNode=o,s=Yd(),s.refCount++,o.pooledCache=s,s.refCount++,_.memoizedState={element:d,isDehydrated:l,cache:s},Xd(_),o}function x_(o){return o?(o=Xs,o):Xs}function b_(o,s,l,d,y,_){y=x_(y),d.context===null?d.context=y:d.pendingContext=y,d=er(s),d.payload={element:l},_=_===void 0?null:_,_!==null&&(d.callback=_),l=tr(o,d,s),l!==null&&(Qn(l,o,s),Sl(l,o,s))}function M_(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<s?l:s}}function dp(o,s){M_(o,s),(o=o.alternate)&&M_(o,s)}function N_(o){if(o.tag===13){var s=Qs(o,67108864);s!==null&&Qn(s,o,67108864),dp(o,67108864)}}var Wc=!0;function mI(o,s,l,d){var y=X.T;X.T=null;var _=pe.p;try{pe.p=2,hp(o,s,l,d)}finally{pe.p=_,X.T=y}}function gI(o,s,l,d){var y=X.T;X.T=null;var _=pe.p;try{pe.p=8,hp(o,s,l,d)}finally{pe.p=_,X.T=y}}function hp(o,s,l,d){if(Wc){var y=pp(d);if(y===null)ep(o,s,d,Zc,l),D_(o,d);else if(vI(y,o,s,l,d))d.stopPropagation();else if(D_(o,d),s&4&&-1<yI.indexOf(o)){for(;y!==null;){var _=Mi(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=$t(_.pendingLanes);if(C!==0){var w=_;for(w.pendingLanes|=2,w.entangledLanes|=2;C;){var P=1<<31-Pt(C);w.entanglements[1]|=P,C&=~P}Hi(_),(dt&6)===0&&(Vc=Vn()+500,Bl(0))}}break;case 13:w=Qs(_,2),w!==null&&Qn(w,_,2),Uc(),dp(_,2)}if(_=pp(d),_===null&&ep(o,s,d,Zc,l),_===y)break;y=_}y!==null&&d.stopPropagation()}else ep(o,s,d,null,l)}}function pp(o){return o=ti(o),mp(o)}var Zc=null;function mp(o){if(Zc=null,o=an(o),o!==null){var s=a(o);if(s===null)o=null;else{var l=s.tag;if(l===13){if(o=c(s),o!==null)return o;o=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return Zc=o,null}function k_(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bs()){case Ho:return 2;case $o:return 8;case no:case Lr:return 32;case xi:return 268435456;default:return 32}default:return 32}}var gp=!1,pr=null,mr=null,gr=null,Kl=new Map,Jl=new Map,yr=[],yI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D_(o,s){switch(o){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Kl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(s.pointerId)}}function Ql(o,s,l,d,y,_){return o===null||o.nativeEvent!==_?(o={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:_,targetContainers:[y]},s!==null&&(s=Mi(s),s!==null&&N_(s)),o):(o.eventSystemFlags|=d,s=o.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),o)}function vI(o,s,l,d,y){switch(s){case"focusin":return pr=Ql(pr,o,s,l,d,y),!0;case"dragenter":return mr=Ql(mr,o,s,l,d,y),!0;case"mouseover":return gr=Ql(gr,o,s,l,d,y),!0;case"pointerover":var _=y.pointerId;return Kl.set(_,Ql(Kl.get(_)||null,o,s,l,d,y)),!0;case"gotpointercapture":return _=y.pointerId,Jl.set(_,Ql(Jl.get(_)||null,o,s,l,d,y)),!0}return!1}function P_(o){var s=an(o.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){o.blockedOn=s,wt(o.priority,function(){if(l.tag===13){var d=Jn();d=ke(d);var y=Qs(l,d);y!==null&&Qn(y,l,d),dp(l,d)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function jc(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var l=pp(o.nativeEvent);if(l===null){l=o.nativeEvent;var d=new l.constructor(l.type,l);uo=d,l.target.dispatchEvent(d),uo=null}else return s=Mi(l),s!==null&&N_(s),o.blockedOn=l,!1;s.shift()}return!0}function V_(o,s,l){jc(o)&&l.delete(s)}function _I(){gp=!1,pr!==null&&jc(pr)&&(pr=null),mr!==null&&jc(mr)&&(mr=null),gr!==null&&jc(gr)&&(gr=null),Kl.forEach(V_),Jl.forEach(V_)}function ef(o,s){o.blockedOn===s&&(o.blockedOn=null,gp||(gp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,_I)))}var tf=null;function L_(o){tf!==o&&(tf=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){tf===o&&(tf=null);for(var s=0;s<o.length;s+=3){var l=o[s],d=o[s+1],y=o[s+2];if(typeof d!="function"){if(mp(d||l)===null)continue;break}var _=Mi(l);_!==null&&(o.splice(s,3),s-=3,mh(_,{pending:!0,data:y,method:l.method,action:d},d,y))}}))}function Xl(o){function s(P){return ef(P,o)}pr!==null&&ef(pr,o),mr!==null&&ef(mr,o),gr!==null&&ef(gr,o),Kl.forEach(s),Jl.forEach(s);for(var l=0;l<yr.length;l++){var d=yr[l];d.blockedOn===o&&(d.blockedOn=null)}for(;0<yr.length&&(l=yr[0],l.blockedOn===null);)P_(l),l.blockedOn===null&&yr.shift();if(l=(o.ownerDocument||o).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var y=l[d],_=l[d+1],C=y[we]||null;if(typeof _=="function")C||L_(l);else if(C){var w=null;if(_&&_.hasAttribute("formAction")){if(y=_,C=_[we]||null)w=C.formAction;else if(mp(y)!==null)continue}else w=C.action;typeof w=="function"?l[d+1]=w:(l.splice(d,3),d-=3),L_(l)}}}function yp(o){this._internalRoot=o}nf.prototype.render=yp.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,d=Jn();b_(l,d,o,s,null,null)},nf.prototype.unmount=yp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;b_(o.current,2,null,o,null,null),Uc(),s[Pe]=null}};function nf(o){this._internalRoot=o}nf.prototype.unstable_scheduleHydration=function(o){if(o){var s=ze();o={blockedOn:null,target:o,priority:s};for(var l=0;l<yr.length&&s!==0&&s<yr[l].priority;l++);yr.splice(l,0,o),l===0&&P_(o)}};var U_=e.version;if(U_!=="19.1.1")throw Error(i(527,U_,"19.1.1"));pe.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=m(s),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var TI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var of=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!of.isDisabled&&of.supportsFiber)try{xt=of.inject(TI),it=of}catch{}}return Zl.createRoot=function(o,s){if(!r(o))throw Error(i(299));var l=!1,d="",y=jy,_=ev,C=tv,w=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=R_(o,1,!1,null,null,l,d,y,_,C,w,null),o[Pe]=s.current,jh(o),new yp(s)},Zl.hydrateRoot=function(o,s,l){if(!r(o))throw Error(i(299));var d=!1,y="",_=jy,C=ev,w=tv,P=null,Y=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(P=l.unstable_transitionCallbacks),l.formState!==void 0&&(Y=l.formState)),s=R_(o,1,!0,s,l??null,d,y,_,C,w,P,Y),s.context=x_(null),l=s.current,d=Jn(),d=ke(d),y=er(d),y.callback=null,tr(l,y,d),l=d,s.current.lanes=l,Z(s,l),Hi(s),o[Pe]=s.current,jh(o),new nf(s)},Zl.version="19.1.1",Zl}var K_;function kI(){if(K_)return Tp.exports;K_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Tp.exports=NI(),Tp.exports}var DI=kI();const PI=VE(DI),VI="modulepreload",LI=function(t,e){return new URL(t,e).href},J_={},LE=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){let c=function(v){return Promise.all(v.map(E=>Promise.resolve(E).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};const h=document.getElementsByTagName("link"),m=document.querySelector("meta[property=csp-nonce]"),p=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));r=c(n.map(v=>{if(v=LI(v,i),v in J_)return;J_[v]=!0;const E=v.endsWith(".css"),S=E?'[rel="stylesheet"]':"";if(!!i)for(let O=h.length-1;O>=0;O--){const F=h[O];if(F.href===v&&(!E||F.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${S}`))return;const x=document.createElement("link");if(x.rel=E?"stylesheet":VI,E||(x.as="script"),x.crossOrigin="",x.href=v,p&&x.setAttribute("nonce",p),document.head.appendChild(x),E)return new Promise((O,F)=>{x.addEventListener("load",O),x.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${v}`)))})}))}function a(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return r.then(c=>{for(const h of c||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})},Xn={openai:{name:"GPT-4o + DALL-E",icon:"🤖",color:"text-emerald-400"},gemini:{name:"Gemini Flash",icon:"✨",color:"text-blue-400"},claude:{name:"Claude Sonnet",icon:"🧠",color:"text-purple-400"},auto:{name:"Smart Auto",icon:"⚡",color:"text-cyan-400"}},UI={photorealistic:"📸 Ultra-realistic",artistic:"🎨 Artistic Nigerian",cyberpunk:"🌃 Cyber-Lagos",anime:"🎭 Anime style"},UE="gemini-2.5-flash",OI="gpt-4o",BI="claude-3-sonnet-20240229",iu="default",hn={default:{name:"Lagos Oracle (Default)",icon:"🌟",description:"Your standard, knowledgeable Lagos Oracle.",systemPromptModifier:"",color:"text-yellow-400"},emeka:{name:"Emeka (Igbo Insight)",icon:"🧐",description:"Wise, with a touch of Igbo flair and proverbs.",systemPromptModifier:"You are Emeka, a wise individual with deep roots in Igbo culture, now navigating Lagos. Your responses often carry a touch of Igbo flair, and you might naturally use common Igbo greetings (like 'Nnoọ'), phrases, or proverbs if the context allows. You offer thoughtful and insightful perspectives on various matters.",color:"text-green-400"},femi:{name:"Femi (Yorùbá Poise)",icon:"😎",description:"Confident, sharp, Yorùbá man from Lagos.",systemPromptModifier:"You are Femi, a confident and articulate Yorùbá man, born and raised in the heart of Lagos. Your responses are sharp, informed, and carry the cadence of a true Lagosian with deep Yorùbá heritage. You may incorporate Yorùbá proverbs (ọwe), sayings, or greetings (like 'Ẹ n lẹ o') when fitting, showcasing pride in your culture.",color:"text-blue-400"},anita:{name:"Anita (Shakara Queen)",icon:"💅",description:"Playful, sassy, full of Lagos street smarts and slang.",systemPromptModifier:"You are Anita, the ultimate Lagos 'Shakara Queen' – playful, a bit sassy, and overflowing with street smarts. You communicate using contemporary Lagos slang and Pidgin English naturally and freely. You 'tell it like it is,' often with a humorous or witty twist, but always keeping it real.",color:"text-pink-400"},muhammed:{name:"Muhammed (Northern Calm)",icon:"🕌",description:"Calm, thoughtful, with a Northern Nigerian perspective.",systemPromptModifier:"You are Muhammed, a calm and thoughtful individual with a perspective enriched by Northern Nigerian upbringing and Hausa culture, now experiencing Lagos life. Your responses are measured, respectful, and you might use Hausa greetings (like 'Sannu') or expressions if it feels natural. You bring a sense of peace and consideration to your interactions.",color:"text-teal-400"}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let FI,qI;function GI(){return{geminiUrl:FI,vertexUrl:qI}}function zI(t,e,n,i){var r,a;if(!(t!=null&&t.baseUrl)){const c=GI();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:n:(a=c.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cs{}function Te(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(t,e,n){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const m=t[h];if(Array.isArray(n))for(let p=0;p<m.length;p++){const v=m[p];f(v,e.slice(a+1),n[p])}else for(const p of m)f(p,e.slice(a+1),n)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const m=t[h];f(m[0],e.slice(a+1),n);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=n}function u(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in t){const a=t[r];return Array.isArray(a)?a.map(c=>u(c,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Up(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Q_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Q_||(Q_={}));var X_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(X_||(X_={}));var Ar;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ar||(Ar={}));var Ki;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Ki||(Ki={}));var W_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(W_||(W_={}));var Ji;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Ji||(Ji={}));var Z_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Z_||(Z_={}));var j_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(j_||(j_={}));var eT;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(eT||(eT={}));var tT;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tT||(tT={}));var nT;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(nT||(nT={}));var iT;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(iT||(iT={}));var oT;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(oT||(oT={}));var rT;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(rT||(rT={}));var sT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(sT||(sT={}));var aT;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(aT||(aT={}));var xf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(xf||(xf={}));var lT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(lT||(lT={}));var Op;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Op||(Op={}));var uT;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(uT||(uT={}));var cT;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(cT||(cT={}));var fT;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(fT||(fT={}));var dT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(dT||(dT={}));var hT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(hT||(hT={}));var pT;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(pT||(pT={}));var mT;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(mT||(mT={}));var gT;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(gT||(gT={}));var yT;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(yT||(yT={}));var vT;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(vT||(vT={}));var _T;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(_T||(_T={}));var TT;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(TT||(TT={}));var ET;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ET||(ET={}));var ST;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(ST||(ST={}));var AT;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(AT||(AT={}));var CT;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(CT||(CT={}));var wT;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(wT||(wT={}));var IT;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(IT||(IT={}));var RT;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(RT||(RT={}));var xT;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(xT||(xT={}));var bT;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(bT||(bT={}));var MT;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(MT||(MT={}));var NT;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(NT||(NT={}));var Ca;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ca||(Ca={}));class Bp{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class jl{get text(){var e,n,i,r,a,c,h,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const E=[];for(const S of(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[I,x]of Object.entries(S))I!=="text"&&I!=="thought"&&(x!==null||x!==void 0)&&E.push(I);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,n,i,r,a,c,h,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const E of(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[S,I]of Object.entries(E))S!=="inlineData"&&(I!==null||I!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,i,r,a,c,h,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,i,r,a,c,h,m,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,i,r,a,c,h,m,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class kT{}class DT{}class HI{}class $I{}class YI{}class PT{}class VT{}class LT{}class KI{}class UT{}class OT{}class BT{}class FT{}class JI{}class QI{}class XI{}class qT{}class WI{get text(){var e,n,i;let r="",a=!1;const c=[];for(const h of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[m,p]of Object.entries(h))m!=="text"&&m!=="thought"&&p!==null&&c.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,r+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,i;let r="";const a=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[h,m]of Object.entries(c))h!=="inlineData"&&m!==null&&a.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class bf{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const i=new bf;if(i.name=e.name,i.metadata=e.metadata,i.done=e.done,i.error=e.error,n){const r=e.response;if(r){const a=new UT,c=r.videos;a.generatedVideos=c==null?void 0:c.map(h=>({video:{uri:h.gcsUri,videoBytes:h.bytesBase64Encoded?Up(h.bytesBase64Encoded):void 0,mimeType:h.mimeType}})),a.raiMediaFilteredCount=r.raiMediaFilteredCount,a.raiMediaFilteredReasons=r.raiMediaFilteredReasons,i.response=a}}else{const r=e.response;if(r){const a=new UT,c=r.generateVideoResponse,h=c==null?void 0:c.generatedSamples;a.generatedVideos=h==null?void 0:h.map(m=>{const p=m.video;return{video:{uri:p==null?void 0:p.uri,videoBytes:p!=null&&p.encodedVideo?Up(p==null?void 0:p.encodedVideo):void 0,mimeType:m.encoding}}}),a.raiMediaFilteredCount=c==null?void 0:c.raiMediaFilteredCount,a.raiMediaFilteredReasons=c==null?void 0:c.raiMediaFilteredReasons,i.response=a}}return i}}class ZI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ct(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function OE(t,e){const n=ct(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function BE(t){return Array.isArray(t)?t.map(e=>Mf(e)):[Mf(t)]}function Mf(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function FE(t){const e=Mf(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qE(t){const e=Mf(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function GT(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function GE(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>GT(e)):[GT(t)]}function Fp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function zT(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function HT(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function wn(t){if(t==null)throw new Error("ContentUnion is required");return Fp(t)?t:{role:"user",parts:GE(t)}}function zE(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=wn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=wn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>wn(n)):[wn(e)]}function hi(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(zT(t)||HT(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[wn(t)]}const e=[],n=[],i=Fp(t[0]);for(const r of t){const a=Fp(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(zT(r)||HT(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:GE(n)}),e}function jI(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Ar).includes(n[0].toUpperCase())?n[0].toUpperCase():Ar.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Ar).includes(i.toUpperCase())?i.toUpperCase():Ar.TYPE_UNSPECIFIED})}}function wa(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&jI(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Ar).includes(h.toUpperCase())?h.toUpperCase():Ar.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=wa(h);else if(i.includes(c)){const m=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}m.push(wa(p))}e[c]=m}else if(r.includes(c)){const m={};for(const[p,v]of Object.entries(h))m[p]=wa(v);e[c]=m}else{if(c==="additionalProperties")continue;e[c]=h}return e}function Cm(t){return wa(t)}function wm(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Im(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Fa(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=wa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=wa(e.response));return t}function qa(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function eR(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function qo(t,e){if(typeof e!="string")throw new Error("name must be a string");return eR(t,e,"cachedContents")}function HE(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ws(t){return Up(t)}function tR(t){return t!=null&&typeof t=="object"&&"name"in t}function nR(t){return t!=null&&typeof t=="object"&&"video"in t}function iR(t){return t!=null&&typeof t=="object"&&"uri"in t}function $E(t){var e;let n;if(tR(t)&&(n=t.name),!(iR(t)&&(n=t.uri,n===void 0))&&!(nR(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function YE(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function KE(t){for(const e of["models","tunedModels","publisherModels"])if(oR(t,e))return t[e];return[]}function oR(t,e){return t!==null&&typeof t=="object"&&e in t}function rR(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function sR(t,e={}){const n=[],i=new Set;for(const r of t){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const c=rR(r,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function JE(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function aR(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ga(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function QE(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lR(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function uR(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function cR(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function fR(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],lR(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],uR(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],cR(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function XE(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>fR(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function dR(t){const e={},n=u(t,["anyOf"]);n!=null&&f(e,["anyOf"],n);const i=u(t,["default"]);i!=null&&f(e,["default"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["enum"]);a!=null&&f(e,["enum"],a);const c=u(t,["example"]);c!=null&&f(e,["example"],c);const h=u(t,["format"]);h!=null&&f(e,["format"],h);const m=u(t,["items"]);m!=null&&f(e,["items"],m);const p=u(t,["maxItems"]);p!=null&&f(e,["maxItems"],p);const v=u(t,["maxLength"]);v!=null&&f(e,["maxLength"],v);const E=u(t,["maxProperties"]);E!=null&&f(e,["maxProperties"],E);const S=u(t,["maximum"]);S!=null&&f(e,["maximum"],S);const I=u(t,["minItems"]);I!=null&&f(e,["minItems"],I);const x=u(t,["minLength"]);x!=null&&f(e,["minLength"],x);const O=u(t,["minProperties"]);O!=null&&f(e,["minProperties"],O);const F=u(t,["minimum"]);F!=null&&f(e,["minimum"],F);const re=u(t,["nullable"]);re!=null&&f(e,["nullable"],re);const te=u(t,["pattern"]);te!=null&&f(e,["pattern"],te);const ne=u(t,["properties"]);ne!=null&&f(e,["properties"],ne);const ce=u(t,["propertyOrdering"]);ce!=null&&f(e,["propertyOrdering"],ce);const se=u(t,["required"]);se!=null&&f(e,["required"],se);const me=u(t,["title"]);me!=null&&f(e,["title"],me);const D=u(t,["type"]);return D!=null&&f(e,["type"],D),e}function hR(t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(t,["category"]);n!=null&&f(e,["category"],n);const i=u(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function pR(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function mR(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function gR(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],mR(n)),e}function yR(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function vR(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],yR(n)),e}function _R(){return{}}function TR(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>pR(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],gR(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],vR(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],_R());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function ER(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function SR(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function AR(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],SR(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function CR(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],ER(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],AR(i)),e}function wR(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function WE(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],wR(n)),e}function IR(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],WE(i)),e}function RR(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>IR(r))),f(e,["speakerVoiceConfigs"],i)}return e}function xR(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],WE(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],RR(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function bR(t){const e={},n=u(t,["includeThoughts"]);n!=null&&f(e,["includeThoughts"],n);const i=u(t,["thinkingBudget"]);return i!=null&&f(e,["thinkingBudget"],i),e}function MR(t,e,n){const i={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],XE(wn(r)));const a=u(e,["temperature"]);a!=null&&f(i,["temperature"],a);const c=u(e,["topP"]);c!=null&&f(i,["topP"],c);const h=u(e,["topK"]);h!=null&&f(i,["topK"],h);const m=u(e,["candidateCount"]);m!=null&&f(i,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&f(i,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&f(i,["stopSequences"],v);const E=u(e,["responseLogprobs"]);E!=null&&f(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&f(i,["logprobs"],S);const I=u(e,["presencePenalty"]);I!=null&&f(i,["presencePenalty"],I);const x=u(e,["frequencyPenalty"]);x!=null&&f(i,["frequencyPenalty"],x);const O=u(e,["seed"]);O!=null&&f(i,["seed"],O);const F=u(e,["responseMimeType"]);F!=null&&f(i,["responseMimeType"],F);const re=u(e,["responseSchema"]);re!=null&&f(i,["responseSchema"],dR(Cm(re)));const te=u(e,["responseJsonSchema"]);if(te!=null&&f(i,["responseJsonSchema"],te),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ne=u(e,["safetySettings"]);if(n!==void 0&&ne!=null){let k=ne;Array.isArray(k)&&(k=k.map(q=>hR(q))),f(n,["safetySettings"],k)}const ce=u(e,["tools"]);if(n!==void 0&&ce!=null){let k=qa(ce);Array.isArray(k)&&(k=k.map(q=>TR(Fa(q)))),f(n,["tools"],k)}const se=u(e,["toolConfig"]);if(n!==void 0&&se!=null&&f(n,["toolConfig"],CR(se)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const me=u(e,["cachedContent"]);n!==void 0&&me!=null&&f(n,["cachedContent"],qo(t,me));const D=u(e,["responseModalities"]);D!=null&&f(i,["responseModalities"],D);const M=u(e,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);const b=u(e,["speechConfig"]);if(b!=null&&f(i,["speechConfig"],xR(wm(b))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=u(e,["thinkingConfig"]);return L!=null&&f(i,["thinkingConfig"],bR(L)),i}function NR(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["request","model"],ct(t,i));const r=u(e,["contents"]);if(r!=null){let c=hi(r);Array.isArray(c)&&(c=c.map(h=>XE(h))),f(n,["request","contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["request","generationConfig"],MR(t,a,n)),n}function kR(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=u(e,["fileName"]);i!=null&&f(n,["fileName"],i);const r=u(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>NR(t,c))),f(n,["requests","requests"],a)}return n}function DR(t,e){const n={},i=u(t,["displayName"]);if(e!==void 0&&i!=null&&f(e,["batch","displayName"],i),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function PR(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["src"]);r!=null&&f(n,["batch","inputConfig"],kR(t,JE(t,r)));const a=u(e,["config"]);return a!=null&&f(n,["config"],DR(a,n)),n}function VR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ga(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function LR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ga(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function UR(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);if(e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function OR(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],UR(n,e)),e}function BR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ga(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function FR(t){const e={},n=u(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const i=u(t,["gcsUri"]);i!=null&&f(e,["gcsSource","uris"],i);const r=u(t,["bigqueryUri"]);if(r!=null&&f(e,["bigquerySource","inputUri"],r),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function qR(t){const e={},n=u(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const i=u(t,["gcsUri"]);i!=null&&f(e,["gcsDestination","outputUriPrefix"],i);const r=u(t,["bigqueryUri"]);if(r!=null&&f(e,["bigqueryDestination","outputUri"],r),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function GR(t,e){const n={},i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=u(t,["dest"]);return e!==void 0&&r!=null&&f(e,["outputConfig"],qR(aR(r))),n}function zR(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["model"],ct(t,i));const r=u(e,["src"]);r!=null&&f(n,["inputConfig"],FR(JE(t,r)));const a=u(e,["config"]);return a!=null&&f(n,["config"],GR(a,n)),n}function HR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ga(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function $R(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ga(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function YR(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=u(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function KR(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],YR(n,e)),e}function JR(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Ga(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function QR(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function XR(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function WR(t){const e={},n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function ZR(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],QR(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],XR(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],WR(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function jR(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>ZR(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function ex(t){const e={},n=u(t,["citationSources"]);return n!=null&&f(e,["citations"],n),e}function tx(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function nx(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>tx(r))),f(e,["urlMetadata"],i)}return e}function ix(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],jR(n));const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],ex(i));const r=u(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const a=u(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=u(t,["urlContextMetadata"]);c!=null&&f(e,["urlContextMetadata"],nx(c));const h=u(t,["avgLogprobs"]);h!=null&&f(e,["avgLogprobs"],h);const m=u(t,["groundingMetadata"]);m!=null&&f(e,["groundingMetadata"],m);const p=u(t,["index"]);p!=null&&f(e,["index"],p);const v=u(t,["logprobsResult"]);v!=null&&f(e,["logprobsResult"],v);const E=u(t,["safetyRatings"]);return E!=null&&f(e,["safetyRatings"],E),e}function ox(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>ix(p))),f(e,["candidates"],m)}const r=u(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const a=u(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=u(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=u(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function ZE(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["code"]);i!=null&&f(e,["code"],i);const r=u(t,["message"]);return r!=null&&f(e,["message"],r),e}function rx(t){const e={},n=u(t,["response"]);n!=null&&f(e,["response"],ox(n));const i=u(t,["error"]);return i!=null&&f(e,["error"],ZE(i)),e}function sx(t){const e={},n=u(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const i=u(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>rx(a))),f(e,["inlinedResponses"],r)}return e}function qp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata","displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["metadata","state"]);r!=null&&f(e,["state"],QE(r));const a=u(t,["metadata","createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=u(t,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const m=u(t,["metadata","model"]);m!=null&&f(e,["model"],m);const p=u(t,["metadata","output"]);return p!=null&&f(e,["dest"],sx(p)),e}function ax(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>qp(c))),f(e,["batchJobs"],a)}return e}function lx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);return a!=null&&f(e,["error"],ZE(a)),e}function jE(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["code"]);i!=null&&f(e,["code"],i);const r=u(t,["message"]);return r!=null&&f(e,["message"],r),e}function ux(t){const e={},n=u(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const i=u(t,["gcsSource","uris"]);i!=null&&f(e,["gcsUri"],i);const r=u(t,["bigquerySource","inputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function cx(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const i=u(t,["gcsDestination","outputUriPrefix"]);i!=null&&f(e,["gcsUri"],i);const r=u(t,["bigqueryDestination","outputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function Gp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["state"]);r!=null&&f(e,["state"],QE(r));const a=u(t,["error"]);a!=null&&f(e,["error"],jE(a));const c=u(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=u(t,["startTime"]);h!=null&&f(e,["startTime"],h);const m=u(t,["endTime"]);m!=null&&f(e,["endTime"],m);const p=u(t,["updateTime"]);p!=null&&f(e,["updateTime"],p);const v=u(t,["model"]);v!=null&&f(e,["model"],v);const E=u(t,["inputConfig"]);E!=null&&f(e,["src"],ux(E));const S=u(t,["outputConfig"]);return S!=null&&f(e,["dest"],cx(S)),e}function fx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>Gp(c))),f(e,["batchJobs"],a)}return e}function dx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);return a!=null&&f(e,["error"],jE(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ys;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ys||(ys={}));class Iu{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hx extends Cs{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const r=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${r}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new Iu(ys.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}async createInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=zR(this.apiClient,e);return h=Te("batchPredictionJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Gp(v))}else{const p=PR(this.apiClient,e);return h=Te("{model}:batchGenerateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>qp(v))}}async get(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=HR(this.apiClient,e);return h=Te("batchPredictionJobs/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Gp(v))}else{const p=VR(this.apiClient,e);return h=Te("batches/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>qp(v))}}async cancel(e){var n,i,r,a;let c="",h={};if(this.apiClient.isVertexAI()){const m=$R(this.apiClient,e);c=Te("batchPredictionJobs/{name}:cancel",m._url),h=m._query,delete m.config,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=LR(this.apiClient,e);c=Te("batches/{name}:cancel",m._url),h=m._query,delete m.config,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=KR(e);return h=Te("batchPredictionJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=fx(v),S=new qT;return Object.assign(S,E),S})}else{const p=OR(e);return h=Te("batches",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=ax(v),S=new qT;return Object.assign(S,E),S})}}async delete(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=JR(this.apiClient,e);return h=Te("batchPredictionJobs/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>dx(v))}else{const p=BR(this.apiClient,e);return h=Te("batches/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>lx(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function px(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function mx(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function gx(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function yx(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],px(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],mx(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],gx(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function $T(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>yx(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function vx(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function _x(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function Tx(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],_x(n)),e}function Ex(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function Sx(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],Ex(n)),e}function Ax(){return{}}function Cx(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>vx(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],Tx(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],Sx(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],Ax());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function wx(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function Ix(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function Rx(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],Ix(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function xx(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],wx(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],Rx(i)),e}function bx(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const a=u(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=u(t,["contents"]);if(e!==void 0&&c!=null){let v=hi(c);Array.isArray(v)&&(v=v.map(E=>$T(E))),f(e,["contents"],v)}const h=u(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],$T(wn(h)));const m=u(t,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(E=>Cx(E))),f(e,["tools"],v)}const p=u(t,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],xx(p)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Mx(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["model"],OE(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],bx(r,n)),n}function Nx(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function kx(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function Dx(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function Px(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],Dx(r,n)),n}function Vx(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function Lx(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],Vx(n,e)),e}function Ux(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function Ox(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Bx(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Fx(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],Ux(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],Ox(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],Bx(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function YT(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Fx(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function qx(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=u(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=u(t,["response"]);c!=null&&f(e,["response"],c);const h=u(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function Gx(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function zx(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],Gx(n)),e}function Hx(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function $x(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],Hx(n)),e}function Yx(){return{}}function Kx(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&f(e,["apiKeyString"],n),e}function Jx(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&f(e,["apiKeyConfig"],Kx(n));const i=u(t,["authType"]);i!=null&&f(e,["authType"],i);const r=u(t,["googleServiceAccountConfig"]);r!=null&&f(e,["googleServiceAccountConfig"],r);const a=u(t,["httpBasicAuthConfig"]);a!=null&&f(e,["httpBasicAuthConfig"],a);const c=u(t,["oauthConfig"]);c!=null&&f(e,["oauthConfig"],c);const h=u(t,["oidcConfig"]);return h!=null&&f(e,["oidcConfig"],h),e}function Qx(t){const e={},n=u(t,["authConfig"]);return n!=null&&f(e,["authConfig"],Jx(n)),e}function Xx(){return{}}function Wx(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>qx(S))),f(e,["functionDeclarations"],E)}const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=u(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],zx(r));const a=u(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],$x(a)),u(t,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],Yx());const h=u(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],Qx(h)),u(t,["urlContext"])!=null&&f(e,["urlContext"],Xx());const p=u(t,["codeExecution"]);p!=null&&f(e,["codeExecution"],p);const v=u(t,["computerUse"]);return v!=null&&f(e,["computerUse"],v),e}function Zx(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function jx(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function eb(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],jx(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function tb(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],Zx(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],eb(i)),e}function nb(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const a=u(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=u(t,["contents"]);if(e!==void 0&&c!=null){let E=hi(c);Array.isArray(E)&&(E=E.map(S=>YT(S))),f(e,["contents"],E)}const h=u(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],YT(wn(h)));const m=u(t,["tools"]);if(e!==void 0&&m!=null){let E=m;Array.isArray(E)&&(E=E.map(S=>Wx(S))),f(e,["tools"],E)}const p=u(t,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],tb(p));const v=u(t,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),n}function ib(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["model"],OE(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],nb(r,n)),n}function ob(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function rb(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function sb(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=u(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function ab(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],qo(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],sb(r,n)),n}function lb(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function ub(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],lb(n,e)),e}function gf(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["model"]);r!=null&&f(e,["model"],r);const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const h=u(t,["expireTime"]);h!=null&&f(e,["expireTime"],h);const m=u(t,["usageMetadata"]);return m!=null&&f(e,["usageMetadata"],m),e}function cb(){return{}}function fb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>gf(c))),f(e,["cachedContents"],a)}return e}function yf(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["model"]);r!=null&&f(e,["model"],r);const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const h=u(t,["expireTime"]);h!=null&&f(e,["expireTime"],h);const m=u(t,["usageMetadata"]);return m!=null&&f(e,["usageMetadata"],m),e}function db(){return{}}function hb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>yf(c))),f(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pb extends Cs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Iu(ys.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=ib(this.apiClient,e);return h=Te("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>yf(v))}else{const p=Mx(this.apiClient,e);return h=Te("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>gf(v))}}async get(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=ob(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>yf(v))}else{const p=Nx(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>gf(v))}}async delete(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=rb(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(()=>{const v=db(),E=new BT;return Object.assign(E,v),E})}else{const p=kx(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(()=>{const v=cb(),E=new BT;return Object.assign(E,v),E})}}async update(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=ab(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>yf(v))}else{const p=Px(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>gf(v))}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=ub(e);return h=Te("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=hb(v),S=new FT;return Object.assign(S,E),S})}else{const p=Lx(e);return h=Te("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=fb(v),S=new FT;return Object.assign(S,E),S})}}}function KT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rt(t){return this instanceof Rt?(this.v=t,this):new Rt(t)}function Ia(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(I){return function(x){return Promise.resolve(x).then(I,E)}}function h(I,x){i[I]&&(r[I]=function(O){return new Promise(function(F,re){a.push([I,O,F,re])>1||m(I,O)})},x&&(r[I]=x(r[I])))}function m(I,x){try{p(i[I](x))}catch(O){S(a[0][3],O)}}function p(I){I.value instanceof Rt?Promise.resolve(I.value.v).then(v,E):S(a[0][2],I)}function v(I){m("next",I)}function E(I){m("throw",I)}function S(I,x){I(x),a.shift(),a.length&&m(a[0][0],a[0][1])}}function lu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof KT=="function"?KT(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(c){return new Promise(function(h,m){c=t[a](c),r(h,m,c.done,c.value)})}}function r(a,c,h,m){Promise.resolve(m).then(function(p){a({value:p,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mb(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:eS(n)}function eS(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function gb(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function JT(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let a=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),a&&!eS(t[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class yb{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new vb(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class vb{constructor(e,n,i,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),gb(a)}async sendMessage(e){var n;await this.sendPromise;const i=wn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,c,h;const m=await r,p=(c=(a=m.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,v=m.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(E))!==null&&h!==void 0?h:[]);const I=p?[p]:[];this.recordHistory(i,I,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=wn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?JT(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return Ia(this,arguments,function*(){var c,h,m,p;const v=[];try{for(var E=!0,S=lu(e),I;I=yield Rt(S.next()),c=I.done,!c;E=!0){p=I.value,E=!1;const x=p;if(mb(x)){const O=(r=(i=x.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;O!==void 0&&v.push(O)}yield yield Rt(x)}}catch(x){h={error:x}}finally{try{!E&&!c&&(m=S.return)&&(yield Rt(m.call(S)))}finally{if(h)throw h.error}}this.recordHistory(n,v)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...JT(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Xf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _b(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function Tb(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],_b(n,e)),e}function Eb(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["message"]);i!=null&&f(e,["message"],i);const r=u(t,["code"]);return r!=null&&f(e,["code"],r),e}function Sb(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["mimeType"]);r!=null&&f(e,["mimeType"],r);const a=u(t,["sizeBytes"]);a!=null&&f(e,["sizeBytes"],a);const c=u(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=u(t,["expirationTime"]);h!=null&&f(e,["expirationTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["sha256Hash"]);p!=null&&f(e,["sha256Hash"],p);const v=u(t,["uri"]);v!=null&&f(e,["uri"],v);const E=u(t,["downloadUri"]);E!=null&&f(e,["downloadUri"],E);const S=u(t,["state"]);S!=null&&f(e,["state"],S);const I=u(t,["source"]);I!=null&&f(e,["source"],I);const x=u(t,["videoMetadata"]);x!=null&&f(e,["videoMetadata"],x);const O=u(t,["error"]);return O!=null&&f(e,["error"],Eb(O)),e}function Ab(t){const e={},n=u(t,["file"]);n!=null&&f(e,["file"],Sb(n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function Cb(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","file"],$E(n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function wb(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","file"],$E(n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function Ib(t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["message"]);i!=null&&f(e,["message"],i);const r=u(t,["code"]);return r!=null&&f(e,["code"],r),e}function zp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["mimeType"]);r!=null&&f(e,["mimeType"],r);const a=u(t,["sizeBytes"]);a!=null&&f(e,["sizeBytes"],a);const c=u(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=u(t,["expirationTime"]);h!=null&&f(e,["expirationTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["sha256Hash"]);p!=null&&f(e,["sha256Hash"],p);const v=u(t,["uri"]);v!=null&&f(e,["uri"],v);const E=u(t,["downloadUri"]);E!=null&&f(e,["downloadUri"],E);const S=u(t,["state"]);S!=null&&f(e,["state"],S);const I=u(t,["source"]);I!=null&&f(e,["source"],I);const x=u(t,["videoMetadata"]);x!=null&&f(e,["videoMetadata"],x);const O=u(t,["error"]);return O!=null&&f(e,["error"],Ib(O)),e}function Rb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>zp(c))),f(e,["files"],a)}return e}function xb(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function bb(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mb extends Cs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Iu(ys.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>zp(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Tb(e);return a=Te("files",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=Rb(m),v=new JI;return Object.assign(v,p),v})}}async createInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Ab(e);return a=Te("upload/v1beta/files",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>{const p=xb(m),v=new QI;return Object.assign(v,p),v})}}async get(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Cb(e);return a=Te("files/{file}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>zp(m))}}async delete(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=wb(e);return a=Te("files/{file}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(()=>{const m=bb(),p=new XI;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nb(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function tS(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],Nb(n)),e}function kb(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],tS(i)),e}function Db(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>kb(r))),f(e,["speakerVoiceConfigs"],i)}return e}function Pb(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],tS(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],Db(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function Vb(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function Lb(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Ub(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Ob(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],Vb(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],Lb(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],Ub(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function Bb(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Ob(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function Fb(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function qb(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function Gb(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],qb(n)),e}function zb(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function Hb(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],zb(n)),e}function $b(){return{}}function Yb(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>Fb(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],Gb(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],Hb(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],$b());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function Kb(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function QT(){return{}}function Jb(t){const e={},n=u(t,["disabled"]);n!=null&&f(e,["disabled"],n);const i=u(t,["startOfSpeechSensitivity"]);i!=null&&f(e,["startOfSpeechSensitivity"],i);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&f(e,["endOfSpeechSensitivity"],r);const a=u(t,["prefixPaddingMs"]);a!=null&&f(e,["prefixPaddingMs"],a);const c=u(t,["silenceDurationMs"]);return c!=null&&f(e,["silenceDurationMs"],c),e}function Qb(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&f(e,["automaticActivityDetection"],Jb(n));const i=u(t,["activityHandling"]);i!=null&&f(e,["activityHandling"],i);const r=u(t,["turnCoverage"]);return r!=null&&f(e,["turnCoverage"],r),e}function Xb(t){const e={},n=u(t,["targetTokens"]);return n!=null&&f(e,["targetTokens"],n),e}function Wb(t){const e={},n=u(t,["triggerTokens"]);n!=null&&f(e,["triggerTokens"],n);const i=u(t,["slidingWindow"]);return i!=null&&f(e,["slidingWindow"],Xb(i)),e}function Zb(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&f(e,["proactiveAudio"],n),e}function jb(t,e){const n={},i=u(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=u(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=u(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=u(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const p=u(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=u(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=u(t,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],Pb(Im(E)));const S=u(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&f(e,["setup","systemInstruction"],Bb(wn(I)));const x=u(t,["tools"]);if(e!==void 0&&x!=null){let se=qa(x);Array.isArray(se)&&(se=se.map(me=>Yb(Fa(me)))),f(e,["setup","tools"],se)}const O=u(t,["sessionResumption"]);e!==void 0&&O!=null&&f(e,["setup","sessionResumption"],Kb(O));const F=u(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&f(e,["setup","inputAudioTranscription"],QT());const re=u(t,["outputAudioTranscription"]);e!==void 0&&re!=null&&f(e,["setup","outputAudioTranscription"],QT());const te=u(t,["realtimeInputConfig"]);e!==void 0&&te!=null&&f(e,["setup","realtimeInputConfig"],Qb(te));const ne=u(t,["contextWindowCompression"]);e!==void 0&&ne!=null&&f(e,["setup","contextWindowCompression"],Wb(ne));const ce=u(t,["proactivity"]);return e!==void 0&&ce!=null&&f(e,["setup","proactivity"],Zb(ce)),n}function eM(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["setup","model"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],jb(r,n)),n}function tM(){return{}}function nM(){return{}}function iM(t){const e={},n=u(t,["media"]);n!=null&&f(e,["mediaChunks"],BE(n));const i=u(t,["audio"]);i!=null&&f(e,["audio"],qE(i));const r=u(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const a=u(t,["video"]);a!=null&&f(e,["video"],FE(a));const c=u(t,["text"]);return c!=null&&f(e,["text"],c),u(t,["activityStart"])!=null&&f(e,["activityStart"],tM()),u(t,["activityEnd"])!=null&&f(e,["activityEnd"],nM()),e}function nS(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["weight"]);return i!=null&&f(e,["weight"],i),e}function oM(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>nS(r))),f(e,["weightedPrompts"],i)}return e}function iS(t){const e={},n=u(t,["temperature"]);n!=null&&f(e,["temperature"],n);const i=u(t,["topK"]);i!=null&&f(e,["topK"],i);const r=u(t,["seed"]);r!=null&&f(e,["seed"],r);const a=u(t,["guidance"]);a!=null&&f(e,["guidance"],a);const c=u(t,["bpm"]);c!=null&&f(e,["bpm"],c);const h=u(t,["density"]);h!=null&&f(e,["density"],h);const m=u(t,["brightness"]);m!=null&&f(e,["brightness"],m);const p=u(t,["scale"]);p!=null&&f(e,["scale"],p);const v=u(t,["muteBass"]);v!=null&&f(e,["muteBass"],v);const E=u(t,["muteDrums"]);E!=null&&f(e,["muteDrums"],E);const S=u(t,["onlyBassAndDrums"]);S!=null&&f(e,["onlyBassAndDrums"],S);const I=u(t,["musicGenerationMode"]);return I!=null&&f(e,["musicGenerationMode"],I),e}function rM(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],iS(n)),e}function oS(t){const e={},n=u(t,["model"]);return n!=null&&f(e,["model"],n),e}function rS(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>nS(r))),f(e,["weightedPrompts"],i)}return e}function Hp(t){const e={},n=u(t,["setup"]);n!=null&&f(e,["setup"],oS(n));const i=u(t,["clientContent"]);i!=null&&f(e,["clientContent"],rS(i));const r=u(t,["musicGenerationConfig"]);r!=null&&f(e,["musicGenerationConfig"],iS(r));const a=u(t,["playbackControl"]);return a!=null&&f(e,["playbackControl"],a),e}function sM(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function aM(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],sM(n)),e}function lM(t){const e={},n=u(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],aM(n)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function uM(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function cM(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function fM(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function dM(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],uM(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],cM(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],fM(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function hM(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>dM(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function pM(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=u(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=u(t,["response"]);c!=null&&f(e,["response"],c);const h=u(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function mM(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function gM(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],mM(n)),e}function yM(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function vM(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],yM(n)),e}function _M(){return{}}function TM(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&f(e,["apiKeyString"],n),e}function EM(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&f(e,["apiKeyConfig"],TM(n));const i=u(t,["authType"]);i!=null&&f(e,["authType"],i);const r=u(t,["googleServiceAccountConfig"]);r!=null&&f(e,["googleServiceAccountConfig"],r);const a=u(t,["httpBasicAuthConfig"]);a!=null&&f(e,["httpBasicAuthConfig"],a);const c=u(t,["oauthConfig"]);c!=null&&f(e,["oauthConfig"],c);const h=u(t,["oidcConfig"]);return h!=null&&f(e,["oidcConfig"],h),e}function SM(t){const e={},n=u(t,["authConfig"]);return n!=null&&f(e,["authConfig"],EM(n)),e}function AM(){return{}}function CM(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>pM(S))),f(e,["functionDeclarations"],E)}const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=u(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],gM(r));const a=u(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],vM(a)),u(t,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],_M());const h=u(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],SM(h)),u(t,["urlContext"])!=null&&f(e,["urlContext"],AM());const p=u(t,["codeExecution"]);p!=null&&f(e,["codeExecution"],p);const v=u(t,["computerUse"]);return v!=null&&f(e,["computerUse"],v),e}function wM(t){const e={},n=u(t,["handle"]);n!=null&&f(e,["handle"],n);const i=u(t,["transparent"]);return i!=null&&f(e,["transparent"],i),e}function XT(){return{}}function IM(t){const e={},n=u(t,["disabled"]);n!=null&&f(e,["disabled"],n);const i=u(t,["startOfSpeechSensitivity"]);i!=null&&f(e,["startOfSpeechSensitivity"],i);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&f(e,["endOfSpeechSensitivity"],r);const a=u(t,["prefixPaddingMs"]);a!=null&&f(e,["prefixPaddingMs"],a);const c=u(t,["silenceDurationMs"]);return c!=null&&f(e,["silenceDurationMs"],c),e}function RM(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&f(e,["automaticActivityDetection"],IM(n));const i=u(t,["activityHandling"]);i!=null&&f(e,["activityHandling"],i);const r=u(t,["turnCoverage"]);return r!=null&&f(e,["turnCoverage"],r),e}function xM(t){const e={},n=u(t,["targetTokens"]);return n!=null&&f(e,["targetTokens"],n),e}function bM(t){const e={},n=u(t,["triggerTokens"]);n!=null&&f(e,["triggerTokens"],n);const i=u(t,["slidingWindow"]);return i!=null&&f(e,["slidingWindow"],xM(i)),e}function MM(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&f(e,["proactiveAudio"],n),e}function NM(t,e){const n={},i=u(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=u(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=u(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=u(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const p=u(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=u(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=u(t,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],lM(Im(E)));const S=u(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&f(e,["setup","systemInstruction"],hM(wn(I)));const x=u(t,["tools"]);if(e!==void 0&&x!=null){let se=qa(x);Array.isArray(se)&&(se=se.map(me=>CM(Fa(me)))),f(e,["setup","tools"],se)}const O=u(t,["sessionResumption"]);e!==void 0&&O!=null&&f(e,["setup","sessionResumption"],wM(O));const F=u(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&f(e,["setup","inputAudioTranscription"],XT());const re=u(t,["outputAudioTranscription"]);e!==void 0&&re!=null&&f(e,["setup","outputAudioTranscription"],XT());const te=u(t,["realtimeInputConfig"]);e!==void 0&&te!=null&&f(e,["setup","realtimeInputConfig"],RM(te));const ne=u(t,["contextWindowCompression"]);e!==void 0&&ne!=null&&f(e,["setup","contextWindowCompression"],bM(ne));const ce=u(t,["proactivity"]);return e!==void 0&&ce!=null&&f(e,["setup","proactivity"],MM(ce)),n}function kM(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["setup","model"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],NM(r,n)),n}function DM(){return{}}function PM(){return{}}function VM(t){const e={},n=u(t,["media"]);n!=null&&f(e,["mediaChunks"],BE(n));const i=u(t,["audio"]);i!=null&&f(e,["audio"],qE(i));const r=u(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const a=u(t,["video"]);a!=null&&f(e,["video"],FE(a));const c=u(t,["text"]);return c!=null&&f(e,["text"],c),u(t,["activityStart"])!=null&&f(e,["activityStart"],DM()),u(t,["activityEnd"])!=null&&f(e,["activityEnd"],PM()),e}function LM(){return{}}function UM(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function OM(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function BM(t){const e={},n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function FM(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],UM(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],OM(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],BM(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function qM(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>FM(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function WT(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["finished"]);return i!=null&&f(e,["finished"],i),e}function GM(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function zM(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>GM(r))),f(e,["urlMetadata"],i)}return e}function HM(t){const e={},n=u(t,["modelTurn"]);n!=null&&f(e,["modelTurn"],qM(n));const i=u(t,["turnComplete"]);i!=null&&f(e,["turnComplete"],i);const r=u(t,["interrupted"]);r!=null&&f(e,["interrupted"],r);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const c=u(t,["generationComplete"]);c!=null&&f(e,["generationComplete"],c);const h=u(t,["inputTranscription"]);h!=null&&f(e,["inputTranscription"],WT(h));const m=u(t,["outputTranscription"]);m!=null&&f(e,["outputTranscription"],WT(m));const p=u(t,["urlContextMetadata"]);return p!=null&&f(e,["urlContextMetadata"],zM(p)),e}function $M(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const i=u(t,["args"]);i!=null&&f(e,["args"],i);const r=u(t,["name"]);return r!=null&&f(e,["name"],r),e}function YM(t){const e={},n=u(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>$M(r))),f(e,["functionCalls"],i)}return e}function KM(t){const e={},n=u(t,["ids"]);return n!=null&&f(e,["ids"],n),e}function rf(t){const e={},n=u(t,["modality"]);n!=null&&f(e,["modality"],n);const i=u(t,["tokenCount"]);return i!=null&&f(e,["tokenCount"],i),e}function JM(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=u(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const r=u(t,["responseTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const a=u(t,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const c=u(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=u(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const m=u(t,["promptTokensDetails"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(I=>rf(I))),f(e,["promptTokensDetails"],S)}const p=u(t,["cacheTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(I=>rf(I))),f(e,["cacheTokensDetails"],S)}const v=u(t,["responseTokensDetails"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(I=>rf(I))),f(e,["responseTokensDetails"],S)}const E=u(t,["toolUsePromptTokensDetails"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(I=>rf(I))),f(e,["toolUsePromptTokensDetails"],S)}return e}function QM(t){const e={},n=u(t,["timeLeft"]);return n!=null&&f(e,["timeLeft"],n),e}function XM(t){const e={},n=u(t,["newHandle"]);n!=null&&f(e,["newHandle"],n);const i=u(t,["resumable"]);i!=null&&f(e,["resumable"],i);const r=u(t,["lastConsumedClientMessageIndex"]);return r!=null&&f(e,["lastConsumedClientMessageIndex"],r),e}function WM(t){const e={};u(t,["setupComplete"])!=null&&f(e,["setupComplete"],LM());const i=u(t,["serverContent"]);i!=null&&f(e,["serverContent"],HM(i));const r=u(t,["toolCall"]);r!=null&&f(e,["toolCall"],YM(r));const a=u(t,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],KM(a));const c=u(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],JM(c));const h=u(t,["goAway"]);h!=null&&f(e,["goAway"],QM(h));const m=u(t,["sessionResumptionUpdate"]);return m!=null&&f(e,["sessionResumptionUpdate"],XM(m)),e}function ZM(){return{}}function jM(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["weight"]);return i!=null&&f(e,["weight"],i),e}function e1(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>jM(r))),f(e,["weightedPrompts"],i)}return e}function t1(t){const e={},n=u(t,["temperature"]);n!=null&&f(e,["temperature"],n);const i=u(t,["topK"]);i!=null&&f(e,["topK"],i);const r=u(t,["seed"]);r!=null&&f(e,["seed"],r);const a=u(t,["guidance"]);a!=null&&f(e,["guidance"],a);const c=u(t,["bpm"]);c!=null&&f(e,["bpm"],c);const h=u(t,["density"]);h!=null&&f(e,["density"],h);const m=u(t,["brightness"]);m!=null&&f(e,["brightness"],m);const p=u(t,["scale"]);p!=null&&f(e,["scale"],p);const v=u(t,["muteBass"]);v!=null&&f(e,["muteBass"],v);const E=u(t,["muteDrums"]);E!=null&&f(e,["muteDrums"],E);const S=u(t,["onlyBassAndDrums"]);S!=null&&f(e,["onlyBassAndDrums"],S);const I=u(t,["musicGenerationMode"]);return I!=null&&f(e,["musicGenerationMode"],I),e}function n1(t){const e={},n=u(t,["clientContent"]);n!=null&&f(e,["clientContent"],e1(n));const i=u(t,["musicGenerationConfig"]);return i!=null&&f(e,["musicGenerationConfig"],t1(i)),e}function i1(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);i!=null&&f(e,["mimeType"],i);const r=u(t,["sourceMetadata"]);return r!=null&&f(e,["sourceMetadata"],n1(r)),e}function o1(t){const e={},n=u(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>i1(r))),f(e,["audioChunks"],i)}return e}function r1(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["filteredReason"]);return i!=null&&f(e,["filteredReason"],i),e}function s1(t){const e={};u(t,["setupComplete"])!=null&&f(e,["setupComplete"],ZM());const i=u(t,["serverContent"]);i!=null&&f(e,["serverContent"],o1(i));const r=u(t,["filteredPrompt"]);return r!=null&&f(e,["filteredPrompt"],r1(r)),e}function a1(t){const e={},n=u(t,["sessionId"]);return n!=null&&f(e,["sessionId"],n),e}function l1(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function u1(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function c1(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function f1(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],l1(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],u1(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],c1(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function d1(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>f1(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function ZT(t){const e={},n=u(t,["text"]);n!=null&&f(e,["text"],n);const i=u(t,["finished"]);return i!=null&&f(e,["finished"],i),e}function h1(t){const e={},n=u(t,["modelTurn"]);n!=null&&f(e,["modelTurn"],d1(n));const i=u(t,["turnComplete"]);i!=null&&f(e,["turnComplete"],i);const r=u(t,["interrupted"]);r!=null&&f(e,["interrupted"],r);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const c=u(t,["generationComplete"]);c!=null&&f(e,["generationComplete"],c);const h=u(t,["inputTranscription"]);h!=null&&f(e,["inputTranscription"],ZT(h));const m=u(t,["outputTranscription"]);return m!=null&&f(e,["outputTranscription"],ZT(m)),e}function p1(t){const e={},n=u(t,["args"]);n!=null&&f(e,["args"],n);const i=u(t,["name"]);return i!=null&&f(e,["name"],i),e}function m1(t){const e={},n=u(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>p1(r))),f(e,["functionCalls"],i)}return e}function g1(t){const e={},n=u(t,["ids"]);return n!=null&&f(e,["ids"],n),e}function sf(t){const e={},n=u(t,["modality"]);n!=null&&f(e,["modality"],n);const i=u(t,["tokenCount"]);return i!=null&&f(e,["tokenCount"],i),e}function y1(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=u(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const r=u(t,["candidatesTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const a=u(t,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const c=u(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=u(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const m=u(t,["promptTokensDetails"]);if(m!=null){let I=m;Array.isArray(I)&&(I=I.map(x=>sf(x))),f(e,["promptTokensDetails"],I)}const p=u(t,["cacheTokensDetails"]);if(p!=null){let I=p;Array.isArray(I)&&(I=I.map(x=>sf(x))),f(e,["cacheTokensDetails"],I)}const v=u(t,["candidatesTokensDetails"]);if(v!=null){let I=v;Array.isArray(I)&&(I=I.map(x=>sf(x))),f(e,["responseTokensDetails"],I)}const E=u(t,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(x=>sf(x))),f(e,["toolUsePromptTokensDetails"],I)}const S=u(t,["trafficType"]);return S!=null&&f(e,["trafficType"],S),e}function v1(t){const e={},n=u(t,["timeLeft"]);return n!=null&&f(e,["timeLeft"],n),e}function _1(t){const e={},n=u(t,["newHandle"]);n!=null&&f(e,["newHandle"],n);const i=u(t,["resumable"]);i!=null&&f(e,["resumable"],i);const r=u(t,["lastConsumedClientMessageIndex"]);return r!=null&&f(e,["lastConsumedClientMessageIndex"],r),e}function T1(t){const e={},n=u(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],a1(n));const i=u(t,["serverContent"]);i!=null&&f(e,["serverContent"],h1(i));const r=u(t,["toolCall"]);r!=null&&f(e,["toolCall"],m1(r));const a=u(t,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],g1(a));const c=u(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],y1(c));const h=u(t,["goAway"]);h!=null&&f(e,["goAway"],v1(h));const m=u(t,["sessionResumptionUpdate"]);return m!=null&&f(e,["sessionResumptionUpdate"],_1(m)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E1(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function S1(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function A1(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function C1(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],E1(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],S1(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],A1(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function Wf(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>C1(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function w1(t){const e={},n=u(t,["anyOf"]);n!=null&&f(e,["anyOf"],n);const i=u(t,["default"]);i!=null&&f(e,["default"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["enum"]);a!=null&&f(e,["enum"],a);const c=u(t,["example"]);c!=null&&f(e,["example"],c);const h=u(t,["format"]);h!=null&&f(e,["format"],h);const m=u(t,["items"]);m!=null&&f(e,["items"],m);const p=u(t,["maxItems"]);p!=null&&f(e,["maxItems"],p);const v=u(t,["maxLength"]);v!=null&&f(e,["maxLength"],v);const E=u(t,["maxProperties"]);E!=null&&f(e,["maxProperties"],E);const S=u(t,["maximum"]);S!=null&&f(e,["maximum"],S);const I=u(t,["minItems"]);I!=null&&f(e,["minItems"],I);const x=u(t,["minLength"]);x!=null&&f(e,["minLength"],x);const O=u(t,["minProperties"]);O!=null&&f(e,["minProperties"],O);const F=u(t,["minimum"]);F!=null&&f(e,["minimum"],F);const re=u(t,["nullable"]);re!=null&&f(e,["nullable"],re);const te=u(t,["pattern"]);te!=null&&f(e,["pattern"],te);const ne=u(t,["properties"]);ne!=null&&f(e,["properties"],ne);const ce=u(t,["propertyOrdering"]);ce!=null&&f(e,["propertyOrdering"],ce);const se=u(t,["required"]);se!=null&&f(e,["required"],se);const me=u(t,["title"]);me!=null&&f(e,["title"],me);const D=u(t,["type"]);return D!=null&&f(e,["type"],D),e}function I1(t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(t,["category"]);n!=null&&f(e,["category"],n);const i=u(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function R1(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function x1(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function b1(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],x1(n)),e}function M1(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function N1(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],M1(n)),e}function k1(){return{}}function D1(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>R1(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],b1(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],N1(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],k1());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function P1(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function V1(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function L1(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],V1(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function U1(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],P1(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],L1(i)),e}function O1(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function sS(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],O1(n)),e}function B1(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],sS(i)),e}function F1(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>B1(r))),f(e,["speakerVoiceConfigs"],i)}return e}function q1(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],sS(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],F1(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function G1(t){const e={},n=u(t,["includeThoughts"]);n!=null&&f(e,["includeThoughts"],n);const i=u(t,["thinkingBudget"]);return i!=null&&f(e,["thinkingBudget"],i),e}function z1(t,e,n){const i={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],Wf(wn(r)));const a=u(e,["temperature"]);a!=null&&f(i,["temperature"],a);const c=u(e,["topP"]);c!=null&&f(i,["topP"],c);const h=u(e,["topK"]);h!=null&&f(i,["topK"],h);const m=u(e,["candidateCount"]);m!=null&&f(i,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&f(i,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&f(i,["stopSequences"],v);const E=u(e,["responseLogprobs"]);E!=null&&f(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&f(i,["logprobs"],S);const I=u(e,["presencePenalty"]);I!=null&&f(i,["presencePenalty"],I);const x=u(e,["frequencyPenalty"]);x!=null&&f(i,["frequencyPenalty"],x);const O=u(e,["seed"]);O!=null&&f(i,["seed"],O);const F=u(e,["responseMimeType"]);F!=null&&f(i,["responseMimeType"],F);const re=u(e,["responseSchema"]);re!=null&&f(i,["responseSchema"],w1(Cm(re)));const te=u(e,["responseJsonSchema"]);if(te!=null&&f(i,["responseJsonSchema"],te),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ne=u(e,["safetySettings"]);if(n!==void 0&&ne!=null){let k=ne;Array.isArray(k)&&(k=k.map(q=>I1(q))),f(n,["safetySettings"],k)}const ce=u(e,["tools"]);if(n!==void 0&&ce!=null){let k=qa(ce);Array.isArray(k)&&(k=k.map(q=>D1(Fa(q)))),f(n,["tools"],k)}const se=u(e,["toolConfig"]);if(n!==void 0&&se!=null&&f(n,["toolConfig"],U1(se)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const me=u(e,["cachedContent"]);n!==void 0&&me!=null&&f(n,["cachedContent"],qo(t,me));const D=u(e,["responseModalities"]);D!=null&&f(i,["responseModalities"],D);const M=u(e,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);const b=u(e,["speechConfig"]);if(b!=null&&f(i,["speechConfig"],q1(wm(b))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=u(e,["thinkingConfig"]);return L!=null&&f(i,["thinkingConfig"],G1(L)),i}function jT(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["contents"]);if(r!=null){let c=hi(r);Array.isArray(c)&&(c=c.map(h=>Wf(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["generationConfig"],z1(t,a,n)),n}function H1(t,e){const n={},i=u(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const r=u(t,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const a=u(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function $1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["contents"]);r!=null&&f(n,["requests[]","content"],zE(t,r));const a=u(e,["config"]);a!=null&&f(n,["config"],H1(a,n));const c=u(e,["model"]);return c!==void 0&&f(n,["requests[]","model"],ct(t,c)),n}function Y1(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=u(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const a=u(t,["guidanceScale"]);if(e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const p=u(t,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const v=u(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const E=u(t,["outputMimeType"]);e!==void 0&&E!=null&&f(e,["parameters","outputOptions","mimeType"],E);const S=u(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const I=u(t,["imageSize"]);if(e!==void 0&&I!=null&&f(e,["parameters","sampleImageSize"],I),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function K1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["config"]);return a!=null&&f(n,["config"],Y1(a,n)),n}function J1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function Q1(t,e,n){const i={},r=u(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const a=u(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=u(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=u(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],YE(t,h)),i}function X1(t,e){const n={},i=u(e,["config"]);return i!=null&&f(n,["config"],Q1(t,i,n)),n}function W1(t,e){const n={},i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const a=u(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function Z1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],W1(r,n)),n}function j1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function eN(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function tN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["contents"]);if(r!=null){let c=hi(r);Array.isArray(c)&&(c=c.map(h=>Wf(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["config"],eN(a)),n}function nN(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],ws(n));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function iN(t,e){const n={},i=u(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=u(t,["durationSeconds"]);if(e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=u(t,["aspectRatio"]);if(e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a),u(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const c=u(t,["personGeneration"]);if(e!==void 0&&c!=null&&f(e,["parameters","personGeneration"],c),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=u(t,["negativePrompt"]);e!==void 0&&h!=null&&f(e,["parameters","negativePrompt"],h);const m=u(t,["enhancePrompt"]);if(e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(u(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function oN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["image"]);if(a!=null&&f(n,["instances[0]","image"],nN(a)),u(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const c=u(e,["config"]);return c!=null&&f(n,["config"],iN(c,n)),n}function rN(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function sN(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function aN(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function lN(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],rN(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],sN(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],aN(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function za(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>lN(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function uN(t){const e={},n=u(t,["anyOf"]);n!=null&&f(e,["anyOf"],n);const i=u(t,["default"]);i!=null&&f(e,["default"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["enum"]);a!=null&&f(e,["enum"],a);const c=u(t,["example"]);c!=null&&f(e,["example"],c);const h=u(t,["format"]);h!=null&&f(e,["format"],h);const m=u(t,["items"]);m!=null&&f(e,["items"],m);const p=u(t,["maxItems"]);p!=null&&f(e,["maxItems"],p);const v=u(t,["maxLength"]);v!=null&&f(e,["maxLength"],v);const E=u(t,["maxProperties"]);E!=null&&f(e,["maxProperties"],E);const S=u(t,["maximum"]);S!=null&&f(e,["maximum"],S);const I=u(t,["minItems"]);I!=null&&f(e,["minItems"],I);const x=u(t,["minLength"]);x!=null&&f(e,["minLength"],x);const O=u(t,["minProperties"]);O!=null&&f(e,["minProperties"],O);const F=u(t,["minimum"]);F!=null&&f(e,["minimum"],F);const re=u(t,["nullable"]);re!=null&&f(e,["nullable"],re);const te=u(t,["pattern"]);te!=null&&f(e,["pattern"],te);const ne=u(t,["properties"]);ne!=null&&f(e,["properties"],ne);const ce=u(t,["propertyOrdering"]);ce!=null&&f(e,["propertyOrdering"],ce);const se=u(t,["required"]);se!=null&&f(e,["required"],se);const me=u(t,["title"]);me!=null&&f(e,["title"],me);const D=u(t,["type"]);return D!=null&&f(e,["type"],D),e}function cN(t){const e={},n=u(t,["featureSelectionPreference"]);return n!=null&&f(e,["featureSelectionPreference"],n),e}function fN(t){const e={},n=u(t,["method"]);n!=null&&f(e,["method"],n);const i=u(t,["category"]);i!=null&&f(e,["category"],i);const r=u(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function dN(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=u(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=u(t,["response"]);c!=null&&f(e,["response"],c);const h=u(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function hN(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function pN(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],hN(n)),e}function mN(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function gN(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],mN(n)),e}function yN(){return{}}function vN(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&f(e,["apiKeyString"],n),e}function _N(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&f(e,["apiKeyConfig"],vN(n));const i=u(t,["authType"]);i!=null&&f(e,["authType"],i);const r=u(t,["googleServiceAccountConfig"]);r!=null&&f(e,["googleServiceAccountConfig"],r);const a=u(t,["httpBasicAuthConfig"]);a!=null&&f(e,["httpBasicAuthConfig"],a);const c=u(t,["oauthConfig"]);c!=null&&f(e,["oauthConfig"],c);const h=u(t,["oidcConfig"]);return h!=null&&f(e,["oidcConfig"],h),e}function TN(t){const e={},n=u(t,["authConfig"]);return n!=null&&f(e,["authConfig"],_N(n)),e}function EN(){return{}}function aS(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>dN(S))),f(e,["functionDeclarations"],E)}const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=u(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],pN(r));const a=u(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],gN(a)),u(t,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],yN());const h=u(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],TN(h)),u(t,["urlContext"])!=null&&f(e,["urlContext"],EN());const p=u(t,["codeExecution"]);p!=null&&f(e,["codeExecution"],p);const v=u(t,["computerUse"]);return v!=null&&f(e,["computerUse"],v),e}function SN(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function AN(t){const e={},n=u(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=u(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function CN(t){const e={},n=u(t,["latLng"]);n!=null&&f(e,["latLng"],AN(n));const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function wN(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],SN(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],CN(i)),e}function IN(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function RN(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],IN(n)),e}function xN(t){const e={},n=u(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],RN(n)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function bN(t){const e={},n=u(t,["includeThoughts"]);n!=null&&f(e,["includeThoughts"],n);const i=u(t,["thinkingBudget"]);return i!=null&&f(e,["thinkingBudget"],i),e}function MN(t,e,n){const i={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],za(wn(r)));const a=u(e,["temperature"]);a!=null&&f(i,["temperature"],a);const c=u(e,["topP"]);c!=null&&f(i,["topP"],c);const h=u(e,["topK"]);h!=null&&f(i,["topK"],h);const m=u(e,["candidateCount"]);m!=null&&f(i,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&f(i,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&f(i,["stopSequences"],v);const E=u(e,["responseLogprobs"]);E!=null&&f(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&f(i,["logprobs"],S);const I=u(e,["presencePenalty"]);I!=null&&f(i,["presencePenalty"],I);const x=u(e,["frequencyPenalty"]);x!=null&&f(i,["frequencyPenalty"],x);const O=u(e,["seed"]);O!=null&&f(i,["seed"],O);const F=u(e,["responseMimeType"]);F!=null&&f(i,["responseMimeType"],F);const re=u(e,["responseSchema"]);re!=null&&f(i,["responseSchema"],uN(Cm(re)));const te=u(e,["responseJsonSchema"]);te!=null&&f(i,["responseJsonSchema"],te);const ne=u(e,["routingConfig"]);ne!=null&&f(i,["routingConfig"],ne);const ce=u(e,["modelSelectionConfig"]);ce!=null&&f(i,["modelConfig"],cN(ce));const se=u(e,["safetySettings"]);if(n!==void 0&&se!=null){let We=se;Array.isArray(We)&&(We=We.map(X=>fN(X))),f(n,["safetySettings"],We)}const me=u(e,["tools"]);if(n!==void 0&&me!=null){let We=qa(me);Array.isArray(We)&&(We=We.map(X=>aS(Fa(X)))),f(n,["tools"],We)}const D=u(e,["toolConfig"]);n!==void 0&&D!=null&&f(n,["toolConfig"],wN(D));const M=u(e,["labels"]);n!==void 0&&M!=null&&f(n,["labels"],M);const b=u(e,["cachedContent"]);n!==void 0&&b!=null&&f(n,["cachedContent"],qo(t,b));const L=u(e,["responseModalities"]);L!=null&&f(i,["responseModalities"],L);const k=u(e,["mediaResolution"]);k!=null&&f(i,["mediaResolution"],k);const q=u(e,["speechConfig"]);q!=null&&f(i,["speechConfig"],xN(wm(q)));const V=u(e,["audioTimestamp"]);V!=null&&f(i,["audioTimestamp"],V);const Et=u(e,["thinkingConfig"]);return Et!=null&&f(i,["thinkingConfig"],bN(Et)),i}function e0(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["contents"]);if(r!=null){let c=hi(r);Array.isArray(c)&&(c=c.map(h=>za(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["generationConfig"],MN(t,a,n)),n}function NN(t,e){const n={},i=u(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);const r=u(t,["title"]);e!==void 0&&r!=null&&f(e,["instances[]","title"],r);const a=u(t,["outputDimensionality"]);e!==void 0&&a!=null&&f(e,["parameters","outputDimensionality"],a);const c=u(t,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const h=u(t,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),n}function kN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["contents"]);r!=null&&f(n,["instances[]","content"],zE(t,r));const a=u(e,["config"]);return a!=null&&f(n,["config"],NN(a,n)),n}function DN(t,e){const n={},i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=u(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const a=u(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=u(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=u(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const m=u(t,["seed"]);e!==void 0&&m!=null&&f(e,["parameters","seed"],m);const p=u(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=u(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=u(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&f(e,["parameters","includeSafetyAttributes"],E);const S=u(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const I=u(t,["language"]);e!==void 0&&I!=null&&f(e,["parameters","language"],I);const x=u(t,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const O=u(t,["outputCompressionQuality"]);e!==void 0&&O!=null&&f(e,["parameters","outputOptions","compressionQuality"],O);const F=u(t,["addWatermark"]);e!==void 0&&F!=null&&f(e,["parameters","addWatermark"],F);const re=u(t,["imageSize"]);e!==void 0&&re!=null&&f(e,["parameters","sampleImageSize"],re);const te=u(t,["enhancePrompt"]);return e!==void 0&&te!=null&&f(e,["parameters","enhancePrompt"],te),n}function PN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["config"]);return a!=null&&f(n,["config"],DN(a,n)),n}function Ha(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],ws(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function VN(t){const e={},n=u(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const i=u(t,["segmentationClasses"]);i!=null&&f(e,["maskClasses"],i);const r=u(t,["maskDilation"]);return r!=null&&f(e,["dilation"],r),e}function LN(t){const e={},n=u(t,["controlType"]);n!=null&&f(e,["controlType"],n);const i=u(t,["enableControlImageComputation"]);return i!=null&&f(e,["computeControl"],i),e}function UN(t){const e={},n=u(t,["styleDescription"]);return n!=null&&f(e,["styleDescription"],n),e}function ON(t){const e={},n=u(t,["subjectType"]);n!=null&&f(e,["subjectType"],n);const i=u(t,["subjectDescription"]);return i!=null&&f(e,["subjectDescription"],i),e}function BN(t){const e={},n=u(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],Ha(n));const i=u(t,["referenceId"]);i!=null&&f(e,["referenceId"],i);const r=u(t,["referenceType"]);r!=null&&f(e,["referenceType"],r);const a=u(t,["maskImageConfig"]);a!=null&&f(e,["maskImageConfig"],VN(a));const c=u(t,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],LN(c));const h=u(t,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],UN(h));const m=u(t,["subjectImageConfig"]);return m!=null&&f(e,["subjectImageConfig"],ON(m)),e}function FN(t,e){const n={},i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=u(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const a=u(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=u(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=u(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const m=u(t,["seed"]);e!==void 0&&m!=null&&f(e,["parameters","seed"],m);const p=u(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=u(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=u(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&f(e,["parameters","includeSafetyAttributes"],E);const S=u(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const I=u(t,["language"]);e!==void 0&&I!=null&&f(e,["parameters","language"],I);const x=u(t,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const O=u(t,["outputCompressionQuality"]);e!==void 0&&O!=null&&f(e,["parameters","outputOptions","compressionQuality"],O);const F=u(t,["addWatermark"]);e!==void 0&&F!=null&&f(e,["parameters","addWatermark"],F);const re=u(t,["editMode"]);e!==void 0&&re!=null&&f(e,["parameters","editMode"],re);const te=u(t,["baseSteps"]);return e!==void 0&&te!=null&&f(e,["parameters","editConfig","baseSteps"],te),n}function qN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(m=>BN(m))),f(n,["instances[0]","referenceImages"],h)}const c=u(e,["config"]);return c!=null&&f(n,["config"],FN(c,n)),n}function GN(t,e){const n={},i=u(t,["includeRaiReason"]);e!==void 0&&i!=null&&f(e,["parameters","includeRaiReason"],i);const r=u(t,["outputMimeType"]);e!==void 0&&r!=null&&f(e,["parameters","outputOptions","mimeType"],r);const a=u(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&f(e,["parameters","outputOptions","compressionQuality"],a);const c=u(t,["enhanceInputImage"]);e!==void 0&&c!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],c);const h=u(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const m=u(t,["numberOfImages"]);e!==void 0&&m!=null&&f(e,["parameters","sampleCount"],m);const p=u(t,["mode"]);return e!==void 0&&p!=null&&f(e,["parameters","mode"],p),n}function zN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["image"]);r!=null&&f(n,["instances[0]","image"],Ha(r));const a=u(e,["upscaleFactor"]);a!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],a);const c=u(e,["config"]);return c!=null&&f(n,["config"],GN(c,n)),n}function HN(t){const e={},n=u(t,["productImage"]);return n!=null&&f(e,["image"],Ha(n)),e}function $N(t,e){const n={},i=u(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=u(t,["personImage"]);e!==void 0&&r!=null&&f(e,["instances[0]","personImage","image"],Ha(r));const a=u(t,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>HN(h))),f(e,["instances[0]","productImages"],c)}return n}function YN(t,e){const n={},i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=u(t,["baseSteps"]);e!==void 0&&r!=null&&f(e,["parameters","editConfig","baseSteps"],r);const a=u(t,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const c=u(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const h=u(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const m=u(t,["personGeneration"]);e!==void 0&&m!=null&&f(e,["parameters","personGeneration"],m);const p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const v=u(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","compressionQuality"],v);const E=u(t,["enhancePrompt"]);return e!==void 0&&E!=null&&f(e,["parameters","enhancePrompt"],E),n}function KN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["source"]);r!=null&&f(n,["config"],$N(r,n));const a=u(e,["config"]);return a!=null&&f(n,["config"],YN(a,n)),n}function JN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function QN(t,e,n){const i={},r=u(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const a=u(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=u(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=u(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],YE(t,h)),i}function XN(t,e){const n={},i=u(e,["config"]);return i!=null&&f(n,["config"],QN(t,i,n)),n}function WN(t,e){const n={},i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const a=u(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function ZN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],WN(r,n)),n}function jN(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],r),n}function ek(t,e){const n={},i=u(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],za(wn(i)));const r=u(t,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>aS(h))),f(e,["tools"],c)}const a=u(t,["generationConfig"]);return e!==void 0&&a!=null&&f(e,["generationConfig"],a),n}function tk(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["contents"]);if(r!=null){let c=hi(r);Array.isArray(c)&&(c=c.map(h=>za(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["config"],ek(a,n)),n}function nk(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["contents"]);if(r!=null){let c=hi(r);Array.isArray(c)&&(c=c.map(h=>za(h))),f(n,["contents"],c)}const a=u(e,["config"]);return a!=null&&f(n,["config"],a),n}function ik(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["videoBytes"]);i!=null&&f(e,["bytesBase64Encoded"],ws(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function ok(t,e){const n={},i=u(t,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const a=u(t,["fps"]);e!==void 0&&a!=null&&f(e,["parameters","fps"],a);const c=u(t,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const m=u(t,["aspectRatio"]);e!==void 0&&m!=null&&f(e,["parameters","aspectRatio"],m);const p=u(t,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const v=u(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=u(t,["pubsubTopic"]);e!==void 0&&E!=null&&f(e,["parameters","pubsubTopic"],E);const S=u(t,["negativePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","negativePrompt"],S);const I=u(t,["enhancePrompt"]);e!==void 0&&I!=null&&f(e,["parameters","enhancePrompt"],I);const x=u(t,["generateAudio"]);e!==void 0&&x!=null&&f(e,["parameters","generateAudio"],x);const O=u(t,["lastFrame"]);e!==void 0&&O!=null&&f(e,["instances[0]","lastFrame"],Ha(O));const F=u(t,["compressionQuality"]);return e!==void 0&&F!=null&&f(e,["parameters","compressionQuality"],F),n}function rk(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ct(t,i));const r=u(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=u(e,["image"]);a!=null&&f(n,["instances[0]","image"],Ha(a));const c=u(e,["video"]);c!=null&&f(n,["instances[0]","video"],ik(c));const h=u(e,["config"]);return h!=null&&f(n,["config"],ok(h,n)),n}function sk(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function ak(t){const e={},n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function lk(t){const e={},n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function uk(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],sk(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],ak(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],lk(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function ck(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>uk(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function fk(t){const e={},n=u(t,["citationSources"]);return n!=null&&f(e,["citations"],n),e}function dk(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function hk(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>dk(r))),f(e,["urlMetadata"],i)}return e}function pk(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],ck(n));const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],fk(i));const r=u(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const a=u(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=u(t,["urlContextMetadata"]);c!=null&&f(e,["urlContextMetadata"],hk(c));const h=u(t,["avgLogprobs"]);h!=null&&f(e,["avgLogprobs"],h);const m=u(t,["groundingMetadata"]);m!=null&&f(e,["groundingMetadata"],m);const p=u(t,["index"]);p!=null&&f(e,["index"],p);const v=u(t,["logprobsResult"]);v!=null&&f(e,["logprobsResult"],v);const E=u(t,["safetyRatings"]);return E!=null&&f(e,["safetyRatings"],E),e}function t0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>pk(p))),f(e,["candidates"],m)}const r=u(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const a=u(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=u(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=u(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function mk(t){const e={},n=u(t,["values"]);return n!=null&&f(e,["values"],n),e}function gk(){return{}}function yk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>mk(c))),f(e,["embeddings"],a)}return u(t,["metadata"])!=null&&f(e,["metadata"],gk()),e}function vk(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],ws(n));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function lS(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=u(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=u(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function _k(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],vk(n));const i=u(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=u(t,["_self"]);return r!=null&&f(e,["safetyAttributes"],lS(r)),e}function Tk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>_k(c))),f(e,["generatedImages"],a)}const r=u(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],lS(r)),e}function Ek(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=u(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function $p(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["version"]);a!=null&&f(e,["version"],a);const c=u(t,["_self"]);c!=null&&f(e,["tunedModelInfo"],Ek(c));const h=u(t,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const m=u(t,["outputTokenLimit"]);m!=null&&f(e,["outputTokenLimit"],m);const p=u(t,["supportedGenerationMethods"]);return p!=null&&f(e,["supportedActions"],p),e}function Sk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["_self"]);if(r!=null){let a=KE(r);Array.isArray(a)&&(a=a.map(c=>$p(c))),f(e,["models"],a)}return e}function Ak(){return{}}function Ck(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["totalTokens"]);i!=null&&f(e,["totalTokens"],i);const r=u(t,["cachedContentTokenCount"]);return r!=null&&f(e,["cachedContentTokenCount"],r),e}function wk(t){const e={},n=u(t,["video","uri"]);n!=null&&f(e,["uri"],n);const i=u(t,["video","encodedVideo"]);i!=null&&f(e,["videoBytes"],ws(i));const r=u(t,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function Ik(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],wk(n)),e}function Rk(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>Ik(c))),f(e,["generatedVideos"],a)}const i=u(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function xk(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);a!=null&&f(e,["error"],a);const c=u(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],Rk(c)),e}function bk(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function Mk(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["data"]);i!=null&&f(e,["data"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Nk(t){const e={},n=u(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=u(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function kk(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],bk(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],Mk(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],Nk(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function Dk(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>kk(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function Pk(t){const e={},n=u(t,["citations"]);return n!=null&&f(e,["citations"],n),e}function Vk(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=u(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function Lk(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Vk(r))),f(e,["urlMetadata"],i)}return e}function Uk(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],Dk(n));const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],Pk(i));const r=u(t,["finishMessage"]);r!=null&&f(e,["finishMessage"],r);const a=u(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=u(t,["urlContextMetadata"]);c!=null&&f(e,["urlContextMetadata"],Lk(c));const h=u(t,["avgLogprobs"]);h!=null&&f(e,["avgLogprobs"],h);const m=u(t,["groundingMetadata"]);m!=null&&f(e,["groundingMetadata"],m);const p=u(t,["index"]);p!=null&&f(e,["index"],p);const v=u(t,["logprobsResult"]);v!=null&&f(e,["logprobsResult"],v);const E=u(t,["safetyRatings"]);return E!=null&&f(e,["safetyRatings"],E),e}function n0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(v=>Uk(v))),f(e,["candidates"],p)}const r=u(t,["createTime"]);r!=null&&f(e,["createTime"],r);const a=u(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const c=u(t,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const h=u(t,["responseId"]);h!=null&&f(e,["responseId"],h);const m=u(t,["usageMetadata"]);return m!=null&&f(e,["usageMetadata"],m),e}function Ok(t){const e={},n=u(t,["truncated"]);n!=null&&f(e,["truncated"],n);const i=u(t,["token_count"]);return i!=null&&f(e,["tokenCount"],i),e}function Bk(t){const e={},n=u(t,["values"]);n!=null&&f(e,["values"],n);const i=u(t,["statistics"]);return i!=null&&f(e,["statistics"],Ok(i)),e}function Fk(t){const e={},n=u(t,["billableCharacterCount"]);return n!=null&&f(e,["billableCharacterCount"],n),e}function qk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>Bk(c))),f(e,["embeddings"],a)}const r=u(t,["metadata"]);return r!=null&&f(e,["metadata"],Fk(r)),e}function Gk(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],ws(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function uS(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=u(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=u(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function Zf(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],Gk(n));const i=u(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=u(t,["_self"]);r!=null&&f(e,["safetyAttributes"],uS(r));const a=u(t,["prompt"]);return a!=null&&f(e,["enhancedPrompt"],a),e}function zk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>Zf(c))),f(e,["generatedImages"],a)}const r=u(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],uS(r)),e}function Hk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Zf(a))),f(e,["generatedImages"],r)}return e}function $k(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Zf(a))),f(e,["generatedImages"],r)}return e}function Yk(t){const e={},n=u(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Zf(r))),f(e,["generatedImages"],i)}return e}function Kk(t){const e={},n=u(t,["endpoint"]);n!=null&&f(e,["name"],n);const i=u(t,["deployedModelId"]);return i!=null&&f(e,["deployedModelId"],i),e}function Jk(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=u(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function Qk(t){const e={},n=u(t,["checkpointId"]);n!=null&&f(e,["checkpointId"],n);const i=u(t,["epoch"]);i!=null&&f(e,["epoch"],i);const r=u(t,["step"]);return r!=null&&f(e,["step"],r),e}function Yp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=u(t,["description"]);r!=null&&f(e,["description"],r);const a=u(t,["versionId"]);a!=null&&f(e,["version"],a);const c=u(t,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>Kk(S))),f(e,["endpoints"],E)}const h=u(t,["labels"]);h!=null&&f(e,["labels"],h);const m=u(t,["_self"]);m!=null&&f(e,["tunedModelInfo"],Jk(m));const p=u(t,["defaultCheckpointId"]);p!=null&&f(e,["defaultCheckpointId"],p);const v=u(t,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>Qk(S))),f(e,["checkpoints"],E)}return e}function Xk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["_self"]);if(r!=null){let a=KE(r);Array.isArray(a)&&(a=a.map(c=>Yp(c))),f(e,["models"],a)}return e}function Wk(){return{}}function Zk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["totalTokens"]);return i!=null&&f(e,["totalTokens"],i),e}function jk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["tokensInfo"]);return i!=null&&f(e,["tokensInfo"],i),e}function eD(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=u(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],ws(i));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function tD(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],eD(n)),e}function nD(t){const e={},n=u(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>tD(c))),f(e,["generatedVideos"],a)}const i=u(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function iD(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=u(t,["done"]);r!=null&&f(e,["done"],r);const a=u(t,["error"]);a!=null&&f(e,["error"],a);const c=u(t,["response"]);return c!=null&&f(e,["response"],nD(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oD="Content-Type",rD="X-Server-Timeout",sD="User-Agent",Kp="x-goog-api-client",aD="1.13.0",lD=`google-genai-sdk/${aD}`,uD="v1beta1",cD="v1beta",i0=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class fD{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:uD,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:cD,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))r.searchParams.append(c,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const r=new AbortController,a=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>r.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}i&&i.addEventListener("abort",()=>{r.abort()}),e.signal=a}return n&&n.extraBody!==null&&dD(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await o0(r),new Bp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await o0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return Ia(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:h,value:m}=yield Rt(r.read());if(h){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=a.decode(m,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),I=S.status,x=S.code,O=`got status: ${I}. ${JSON.stringify(E)}`;if(x>=400&&x<600)throw new Xf({message:O,status:x})}}catch(E){if(E.name==="ApiError")throw E}c+=p;let v=c.match(i0);for(;v;){const E=v[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Rt(new Bp(S)),c=c.slice(v[0].length),v=c.match(i0)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=lD+" "+this.clientOptions.userAgentExtra;return e[sD]=n,e[Kp]=n,e[oD]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,r]of Object.entries(e.headers))n.append(i,r);e.timeout&&e.timeout>0&&n.append(rD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);r.sizeBytes=String(c.size);const h=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const m=await this.fetchUploadUrl(r,n);return a.upload(e,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},c=await this.request({path:Te("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:r});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(i=c==null?void 0:c.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function o0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Xf({message:r,status:n}):new Error(r)}}function dD(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,c){const h=Object.assign({},a);for(const m in c)if(Object.prototype.hasOwnProperty.call(c,m)){const p=c[m],v=h[m];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[m]=i(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[m]=p)}return h}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hD="mcp_used/unknown";let pD=!1;function cS(t){for(const e of t)if(mD(e)||typeof e=="object"&&"inputSchema"in e)return!0;return pD}function fS(t){var e;const n=(e=t[Kp])!==null&&e!==void 0?e:"";t[Kp]=(n+` ${hD}`).trimStart()}function mD(t){return t!==null&&typeof t=="object"&&t instanceof Rm}function gD(t,e=100){return Ia(this,arguments,function*(){let i,r=0;for(;r<e;){const a=yield Rt(t.listTools({cursor:i}));for(const c of a.tools)yield yield Rt(c),r++;if(!a.nextCursor)break;i=a.nextCursor}})}class Rm{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Rm(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const a={},c=[];for(const v of this.mcpClients)try{for(var h=!0,m=(n=void 0,lu(gD(v))),p;p=await m.next(),e=p.done,!e;h=!0){r=p.value,h=!1;const E=r;c.push(E);const S=E.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(E){n={error:E}}finally{try{!h&&!e&&(i=m.return)&&await i.call(m)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),sR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await r.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function yD(t,e,n){const i=new ZI;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);const a=s1(r);Object.assign(i,a),e(i)}class vD{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=ED(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),m=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(ne=>{p=ne}),E=e.callbacks,S=function(){p({})},I=this.apiClient,x={onopen:S,onmessage:ne=>{yD(I,E.onmessage,ne)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(ne){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(ne){}},O=this.webSocketFactory.create(m,TD(c),x);O.connect(),await v;const F=ct(this.apiClient,e.model),re=oS({model:F}),te=Hp({setup:re});return O.send(JSON.stringify(te)),new _D(O,this.apiClient)}}class _D{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=oM(e),i=rS(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=rM(e),i=Hp(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const n=Hp({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ca.PLAY)}pause(){this.sendPlaybackControl(Ca.PAUSE)}stop(){this.sendPlaybackControl(Ca.STOP)}resetContext(){this.sendPlaybackControl(Ca.RESET_CONTEXT)}close(){this.conn.close()}}function TD(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function ED(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SD="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function AD(t,e,n){const i=new WI;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const c=T1(a);Object.assign(i,c)}else{const c=WM(a);Object.assign(i,c)}e(i)}class CD{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new vD(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,a,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&cS(e.config.tools)&&fS(E);const S=xD(E);if(this.apiClient.isVertexAI())v=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const b=this.apiClient.getApiKey();let L="BidiGenerateContent",k="key";b!=null&&b.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",k="access_token"),v=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${L}?${k}=${b}`}let I=()=>{};const x=new Promise(b=>{I=b}),O=e.callbacks,F=function(){var b;(b=O==null?void 0:O.onopen)===null||b===void 0||b.call(O),I({})},re=this.apiClient,te={onopen:F,onmessage:b=>{AD(re,O.onmessage,b)},onerror:(n=O==null?void 0:O.onerror)!==null&&n!==void 0?n:function(b){},onclose:(i=O==null?void 0:O.onclose)!==null&&i!==void 0?i:function(b){}},ne=this.webSocketFactory.create(v,RD(S),te);ne.connect(),await x;let ce=ct(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ce.startsWith("publishers/")){const b=this.apiClient.getProject(),L=this.apiClient.getLocation();ce=`projects/${b}/locations/${L}/`+ce}let se={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[xf.AUDIO]}:e.config.responseModalities=[xf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const me=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],D=[];for(const b of me)if(this.isCallableTool(b)){const L=b;D.push(await L.tool())}else D.push(b);D.length>0&&(e.config.tools=D);const M={model:ce,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?se=kM(this.apiClient,M):se=eM(this.apiClient,M),delete se.config,ne.send(JSON.stringify(se)),new ID(ne,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const wD={turnComplete:!0};class ID{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=hi(n.turns),e.isVertexAI()?i=i.map(r=>za(r)):i=i.map(r=>Wf(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(SD)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},wD),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:VM(e)}:n={realtimeInput:iM(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function RD(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function xD(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r0=10;function s0(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ra(c)){r=!0;break}if(!r)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ra(t){return"callTool"in t&&typeof t.callTool=="function"}function bD(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Ra(r)))!==null&&i!==void 0?i:!1}function MD(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!Ra(r)))!==null&&i!==void 0?i:!1}function a0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ND extends Cs{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,a,c,h;const m=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!bD(n)||s0(n.config))return await this.generateContentInternal(m);if(MD(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,v;const E=hi(m.contents),S=(a=(r=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:r0;let I=0;for(;I<S&&(p=await this.generateContentInternal(m),!(!p.functionCalls||p.functionCalls.length===0));){const x=p.candidates[0].content,O=[];for(const F of(h=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Ra(F)){const te=await F.callTool(p.functionCalls);O.push(...te)}I++,v={role:"user",parts:O},m.contents=hi(m.contents),m.contents.push(x),m.contents.push(v),a0(m.config)&&(E.push(x),E.push(v))}return a0(m.config)&&(p.automaticFunctionCallingHistory=E),p},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),s0(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let a;const c=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((r=m==null?void 0:m.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=m==null?void 0:m.safetyAttributes:c.push(m);let h;return a?h={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},h}),this.list=async n=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Iu(ys.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const c=await Promise.all(a.map(async m=>Ra(m)?await m.tool():m)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&cS(e.config.tools)){const m=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),fS(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var n,i,r;const a=new Map;for(const c of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ra(c)){const h=c,m=await h.tool();for(const p of(r=m.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,h)}}return a}async processAfcStream(e){var n,i,r;const a=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:r0;let c=!1,h=0;const m=await this.initAfcToolsMap(e);return function(p,v,E){var S,I;return Ia(this,arguments,function*(){for(var x,O,F,re;h<a;){c&&(h++,c=!1);const se=yield Rt(p.processParamsMaybeAddMcpUsage(E)),me=yield Rt(p.generateContentStreamInternal(se)),D=[],M=[];try{for(var te=!0,ne=(O=void 0,lu(me)),ce;ce=yield Rt(ne.next()),x=ce.done,!x;te=!0){re=ce.value,te=!1;const b=re;if(yield yield Rt(b),b.candidates&&(!((S=b.candidates[0])===null||S===void 0)&&S.content)){M.push(b.candidates[0].content);for(const L of(I=b.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(h<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(L.functionCall.name)){const k=yield Rt(v.get(L.functionCall.name).callTool([L.functionCall]));D.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(b){O={error:b}}finally{try{!te&&!x&&(F=ne.return)&&(yield Rt(F.call(ne)))}finally{if(O)throw O.error}}if(D.length>0){c=!0;const b=new jl;b.candidates=[{content:{role:"user",parts:D}}],yield yield Rt(b);const L=[];L.push(...M),L.push({role:"user",parts:D});const k=hi(E.contents).concat(L);E.contents=k}else break}})}(this,m,e)}async generateContentInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=e0(this.apiClient,e);return h=Te("{model}:generateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=n0(v),S=new jl;return Object.assign(S,E),S})}else{const p=jT(this.apiClient,e);return h=Te("{model}:generateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=t0(v),S=new jl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=e0(this.apiClient,e);return h=Te("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(E){return Ia(this,arguments,function*(){var S,I,x,O;try{for(var F=!0,re=lu(E),te;te=yield Rt(re.next()),S=te.done,!S;F=!0){O=te.value,F=!1;const ne=O,ce=n0(yield Rt(ne.json()));ce.sdkHttpResponse={headers:ne.headers};const se=new jl;Object.assign(se,ce),yield yield Rt(se)}}catch(ne){I={error:ne}}finally{try{!F&&!S&&(x=re.return)&&(yield Rt(x.call(re)))}finally{if(I)throw I.error}}})})}else{const p=jT(this.apiClient,e);return h=Te("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(E){return Ia(this,arguments,function*(){var S,I,x,O;try{for(var F=!0,re=lu(E),te;te=yield Rt(re.next()),S=te.done,!S;F=!0){O=te.value,F=!1;const ne=O,ce=t0(yield Rt(ne.json()));ce.sdkHttpResponse={headers:ne.headers};const se=new jl;Object.assign(se,ce),yield yield Rt(se)}}catch(ne){I={error:ne}}finally{try{!F&&!S&&(x=re.return)&&(yield Rt(x.call(re)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=kN(this.apiClient,e);return h=Te("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=qk(v),S=new kT;return Object.assign(S,E),S})}else{const p=$1(this.apiClient,e);return h=Te("{model}:batchEmbedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=yk(v),S=new kT;return Object.assign(S,E),S})}}async generateImagesInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=PN(this.apiClient,e);return h=Te("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=zk(v),S=new DT;return Object.assign(S,E),S})}else{const p=K1(this.apiClient,e);return h=Te("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Tk(v),S=new DT;return Object.assign(S,E),S})}}async editImageInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=qN(this.apiClient,e);return a=Te("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=Hk(m),v=new HI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=zN(this.apiClient,e);return a=Te("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=$k(m),v=new $I;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=KN(this.apiClient,e);return a=Te("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>{const p=Yk(m),v=new YI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=JN(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Yp(v))}else{const p=J1(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>$p(v))}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=XN(this.apiClient,e);return h=Te("{models_url}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Xk(v),S=new PT;return Object.assign(S,E),S})}else{const p=X1(this.apiClient,e);return h=Te("{models_url}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Sk(v),S=new PT;return Object.assign(S,E),S})}}async update(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=ZN(this.apiClient,e);return h=Te("{model}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Yp(v))}else{const p=Z1(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>$p(v))}}async delete(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=jN(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(()=>{const v=Wk(),E=new VT;return Object.assign(E,v),E})}else{const p=j1(this.apiClient,e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(()=>{const v=Ak(),E=new VT;return Object.assign(E,v),E})}}async countTokens(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=tk(this.apiClient,e);return h=Te("{model}:countTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Zk(v),S=new LT;return Object.assign(S,E),S})}else{const p=tN(this.apiClient,e);return h=Te("{model}:countTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Ck(v),S=new LT;return Object.assign(S,E),S})}}async computeTokens(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=nk(this.apiClient,e);return a=Te("{model}:computeTokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=jk(m),v=new KI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=rk(this.apiClient,e);return h=Te("{model}:predictLongRunning",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>{const E=iD(v),S=new bf;return Object.assign(S,E),S})}else{const p=oN(this.apiClient,e);return h=Te("{model}:predictLongRunning",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>{const E=xk(v),S=new bf;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kD(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["_url","operationName"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function DD(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["_url","operationName"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function PD(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["operationName"],n);const i=u(t,["resourceName"]);i!=null&&f(e,["_url","resourceName"],i);const r=u(t,["config"]);return r!=null&&f(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VD extends Cs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=DD(e);return h=Te("{operationName}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c}else{const p=kD(e);return h=Te("{operationName}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=PD(e);return a=Te("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LD(t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function dS(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],LD(n)),e}function UD(t){const e={},n=u(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=u(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],dS(i)),e}function OD(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>UD(r))),f(e,["speakerVoiceConfigs"],i)}return e}function BD(t){const e={},n=u(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],dS(n));const i=u(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],OD(i));const r=u(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function FD(t){const e={},n=u(t,["fps"]);n!=null&&f(e,["fps"],n);const i=u(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=u(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function qD(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&f(e,["data"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function GD(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function zD(t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],FD(n));const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const r=u(t,["inlineData"]);r!=null&&f(e,["inlineData"],qD(r));const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],GD(a));const c=u(t,["thoughtSignature"]);c!=null&&f(e,["thoughtSignature"],c);const h=u(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const m=u(t,["executableCode"]);m!=null&&f(e,["executableCode"],m);const p=u(t,["functionCall"]);p!=null&&f(e,["functionCall"],p);const v=u(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=u(t,["text"]);return E!=null&&f(e,["text"],E),e}function HD(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>zD(a))),f(e,["parts"],r)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function $D(t){const e={},n=u(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const a=u(t,["parameters"]);a!=null&&f(e,["parameters"],a);const c=u(t,["parametersJsonSchema"]);c!=null&&f(e,["parametersJsonSchema"],c);const h=u(t,["response"]);h!=null&&f(e,["response"],h);const m=u(t,["responseJsonSchema"]);return m!=null&&f(e,["responseJsonSchema"],m),e}function YD(t){const e={},n=u(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=u(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function KD(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],YD(n)),e}function JD(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function QD(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],JD(n)),e}function XD(){return{}}function WD(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>$D(p))),f(e,["functionDeclarations"],m)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],KD(i));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],QD(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&f(e,["urlContext"],XD());const c=u(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=u(t,["computerUse"]);return h!=null&&f(e,["computerUse"],h),e}function ZD(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function l0(){return{}}function jD(t){const e={},n=u(t,["disabled"]);n!=null&&f(e,["disabled"],n);const i=u(t,["startOfSpeechSensitivity"]);i!=null&&f(e,["startOfSpeechSensitivity"],i);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&f(e,["endOfSpeechSensitivity"],r);const a=u(t,["prefixPaddingMs"]);a!=null&&f(e,["prefixPaddingMs"],a);const c=u(t,["silenceDurationMs"]);return c!=null&&f(e,["silenceDurationMs"],c),e}function eP(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&f(e,["automaticActivityDetection"],jD(n));const i=u(t,["activityHandling"]);i!=null&&f(e,["activityHandling"],i);const r=u(t,["turnCoverage"]);return r!=null&&f(e,["turnCoverage"],r),e}function tP(t){const e={},n=u(t,["targetTokens"]);return n!=null&&f(e,["targetTokens"],n),e}function nP(t){const e={},n=u(t,["triggerTokens"]);n!=null&&f(e,["triggerTokens"],n);const i=u(t,["slidingWindow"]);return i!=null&&f(e,["slidingWindow"],tP(i)),e}function iP(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&f(e,["proactiveAudio"],n),e}function oP(t,e){const n={},i=u(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=u(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=u(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=u(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const p=u(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=u(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=u(t,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],BD(Im(E)));const S=u(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&f(e,["setup","systemInstruction"],HD(wn(I)));const x=u(t,["tools"]);if(e!==void 0&&x!=null){let se=qa(x);Array.isArray(se)&&(se=se.map(me=>WD(Fa(me)))),f(e,["setup","tools"],se)}const O=u(t,["sessionResumption"]);e!==void 0&&O!=null&&f(e,["setup","sessionResumption"],ZD(O));const F=u(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&f(e,["setup","inputAudioTranscription"],l0());const re=u(t,["outputAudioTranscription"]);e!==void 0&&re!=null&&f(e,["setup","outputAudioTranscription"],l0());const te=u(t,["realtimeInputConfig"]);e!==void 0&&te!=null&&f(e,["setup","realtimeInputConfig"],eP(te));const ne=u(t,["contextWindowCompression"]);e!==void 0&&ne!=null&&f(e,["setup","contextWindowCompression"],nP(ne));const ce=u(t,["proactivity"]);return e!==void 0&&ce!=null&&f(e,["setup","proactivity"],iP(ce)),n}function rP(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["setup","model"],ct(t,i));const r=u(e,["config"]);return r!=null&&f(n,["config"],oP(r,n)),n}function sP(t,e,n){const i={},r=u(e,["expireTime"]);n!==void 0&&r!=null&&f(n,["expireTime"],r);const a=u(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&f(n,["newSessionExpireTime"],a);const c=u(e,["uses"]);n!==void 0&&c!=null&&f(n,["uses"],c);const h=u(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&f(n,["bidiGenerateContentSetup"],rP(t,h));const m=u(e,["lockAdditionalFields"]);return n!==void 0&&m!=null&&f(n,["fieldMask"],m),i}function aP(t,e){const n={},i=u(e,["config"]);return i!=null&&f(n,["config"],sP(t,i,n)),n}function lP(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uP(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function cP(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=uP(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(p=>c.includes(p)?`generationConfig.${p}`:p));const m=[];a&&m.push(a),h.length>0&&m.push(...h),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class fP extends Cs{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=aP(this.apiClient,e);a=Te("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const m=cP(h,e.config);return r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>lP(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dP(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function hP(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=u(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function pP(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],hP(n,e)),e}function mP(t){const e={},n=u(t,["textInput"]);n!=null&&f(e,["textInput"],n);const i=u(t,["output"]);return i!=null&&f(e,["output"],i),e}function gP(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=u(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>mP(r))),f(e,["examples","examples"],i)}return e}function yP(t,e){const n={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=u(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&f(e,["displayName"],i),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=u(t,["epochCount"]);e!==void 0&&r!=null&&f(e,["tuningTask","hyperparameters","epochCount"],r);const a=u(t,["learningRateMultiplier"]);if(a!=null&&f(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=u(t,["batchSize"]);e!==void 0&&c!=null&&f(e,["tuningTask","hyperparameters","batchSize"],c);const h=u(t,["learningRate"]);return e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","learningRate"],h),n}function vP(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["trainingDataset"]);i!=null&&f(e,["tuningTask","trainingData"],gP(i));const r=u(t,["config"]);return r!=null&&f(e,["config"],yP(r,e)),e}function _P(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function TP(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=u(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function EP(t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],TP(n,e)),e}function SP(t,e){const n={},i=u(t,["gcsUri"]);e!==void 0&&i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],i);const r=u(t,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r),u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function AP(t,e){const n={},i=u(t,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);const r=u(t,["vertexDatasetResource"]);return e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r),n}function CP(t,e){const n={},i=u(t,["validationDataset"]);e!==void 0&&i!=null&&f(e,["supervisedTuningSpec"],AP(i,n));const r=u(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&f(e,["tunedModelDisplayName"],r);const a=u(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const c=u(t,["epochCount"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],c);const h=u(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const m=u(t,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],m);const p=u(t,["adapterSize"]);if(e!==void 0&&p!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],p),u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function wP(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["trainingDataset"]);i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],SP(i,e));const r=u(t,["config"]);return r!=null&&f(e,["config"],CP(r,e)),e}function IP(t){const e={},n=u(t,["name"]);n!=null&&f(e,["model"],n);const i=u(t,["name"]);return i!=null&&f(e,["endpoint"],i),e}function hS(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["state"]);r!=null&&f(e,["state"],HE(r));const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["tuningTask","startTime"]);c!=null&&f(e,["startTime"],c);const h=u(t,["tuningTask","completeTime"]);h!=null&&f(e,["endTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["description"]);p!=null&&f(e,["description"],p);const v=u(t,["baseModel"]);v!=null&&f(e,["baseModel"],v);const E=u(t,["_self"]);E!=null&&f(e,["tunedModel"],IP(E));const S=u(t,["distillationSpec"]);S!=null&&f(e,["distillationSpec"],S);const I=u(t,["experiment"]);I!=null&&f(e,["experiment"],I);const x=u(t,["labels"]);x!=null&&f(e,["labels"],x);const O=u(t,["pipelineJob"]);O!=null&&f(e,["pipelineJob"],O);const F=u(t,["satisfiesPzi"]);F!=null&&f(e,["satisfiesPzi"],F);const re=u(t,["satisfiesPzs"]);re!=null&&f(e,["satisfiesPzs"],re);const te=u(t,["serviceAccount"]);te!=null&&f(e,["serviceAccount"],te);const ne=u(t,["tunedModelDisplayName"]);return ne!=null&&f(e,["tunedModelDisplayName"],ne),e}function RP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["tunedModels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>hS(c))),f(e,["tuningJobs"],a)}return e}function xP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const a=u(t,["done"]);a!=null&&f(e,["done"],a);const c=u(t,["error"]);return c!=null&&f(e,["error"],c),e}function bP(t){const e={},n=u(t,["checkpointId"]);n!=null&&f(e,["checkpointId"],n);const i=u(t,["epoch"]);i!=null&&f(e,["epoch"],i);const r=u(t,["step"]);r!=null&&f(e,["step"],r);const a=u(t,["endpoint"]);return a!=null&&f(e,["endpoint"],a),e}function MP(t){const e={},n=u(t,["model"]);n!=null&&f(e,["model"],n);const i=u(t,["endpoint"]);i!=null&&f(e,["endpoint"],i);const r=u(t,["checkpoints"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>bP(c))),f(e,["checkpoints"],a)}return e}function Jp(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const r=u(t,["state"]);r!=null&&f(e,["state"],HE(r));const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const c=u(t,["startTime"]);c!=null&&f(e,["startTime"],c);const h=u(t,["endTime"]);h!=null&&f(e,["endTime"],h);const m=u(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const p=u(t,["error"]);p!=null&&f(e,["error"],p);const v=u(t,["description"]);v!=null&&f(e,["description"],v);const E=u(t,["baseModel"]);E!=null&&f(e,["baseModel"],E);const S=u(t,["tunedModel"]);S!=null&&f(e,["tunedModel"],MP(S));const I=u(t,["supervisedTuningSpec"]);I!=null&&f(e,["supervisedTuningSpec"],I);const x=u(t,["tuningDataStats"]);x!=null&&f(e,["tuningDataStats"],x);const O=u(t,["encryptionSpec"]);O!=null&&f(e,["encryptionSpec"],O);const F=u(t,["partnerModelTuningSpec"]);F!=null&&f(e,["partnerModelTuningSpec"],F);const re=u(t,["distillationSpec"]);re!=null&&f(e,["distillationSpec"],re);const te=u(t,["experiment"]);te!=null&&f(e,["experiment"],te);const ne=u(t,["labels"]);ne!=null&&f(e,["labels"],ne);const ce=u(t,["pipelineJob"]);ce!=null&&f(e,["pipelineJob"],ce);const se=u(t,["satisfiesPzi"]);se!=null&&f(e,["satisfiesPzi"],se);const me=u(t,["satisfiesPzs"]);me!=null&&f(e,["satisfiesPzs"],me);const D=u(t,["serviceAccount"]);D!=null&&f(e,["serviceAccount"],D);const M=u(t,["tunedModelDisplayName"]);return M!=null&&f(e,["tunedModelDisplayName"],M),e}function NP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=u(t,["tuningJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>Jp(c))),f(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kP extends Cs{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Iu(ys.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const i=await this.tuneMldevInternal(n);let r="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?r=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(r=i.name.split("/operations/")[0]),{name:r,state:Op.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=_P(e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>Jp(v))}else{const p=dP(e);return h=Te("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>hS(v))}}async listInternal(e){var n,i,r,a;let c,h="",m={};if(this.apiClient.isVertexAI()){const p=EP(e);return h=Te("tuningJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=NP(v),S=new OT;return Object.assign(S,E),S})}else{const p=pP(e);return h=Te("tunedModels",p._url),m=p._query,delete p.config,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=RP(v),S=new OT;return Object.assign(S,E),S})}}async tuneInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=wP(e);return a=Te("tuningJobs",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>Jp(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=vP(e);return a=Te("tunedModels",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>xP(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DP{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const PP=1024*1024*8,VP=3,LP=1e3,UP=2,Cp="x-goog-upload-status";async function OP(t,e,n){var i,r,a;let c=0,h=0,m=new Bp(new Response),p="upload";for(c=t.size;h<c;){const E=Math.min(PP,c-h),S=t.slice(h,h+E);h+E>=c&&(p+=", finalize");let I=0,x=LP;for(;I<VP&&(m=await n.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(h),"Content-Length":String(E)}}}),!(!((i=m==null?void 0:m.headers)===null||i===void 0)&&i[Cp]));)I++,await FP(x),x=x*UP;if(h+=E,((r=m==null?void 0:m.headers)===null||r===void 0?void 0:r[Cp])!=="active")break;if(c<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(m==null?void 0:m.json());if(((a=m==null?void 0:m.headers)===null||a===void 0?void 0:a[Cp])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function BP(t){return{size:t.size,type:t.type}}function FP(t){return new Promise(e=>setTimeout(e,t))}class qP{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await OP(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await BP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GP{create(e,n,i){return new zP(e,n,i)}}class zP{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u0="x-goog-api-key";class HP{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(u0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(u0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $P="gl-node/";class YP{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=zI(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new HP(this.apiKey);this.apiClient=new fD({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:$P+"web",uploader:new qP,downloader:new DP}),this.models=new ND(this.apiClient),this.live=new CD(this.apiClient,r,new GP),this.batches=new hx(this.apiClient),this.chats=new yb(this.models,this.apiClient),this.caches=new pb(this.apiClient),this.files=new Mb(this.apiClient),this.operations=new VD(this.apiClient),this.authTokens=new fP(this.apiClient),this.tunings=new kP(this.apiClient)}}let qn=null;const KP=t=>{if(!t||!t.startsWith("AIza"))return qn&&(qn=null),!1;try{return qn=new YP({apiKey:t}),!0}catch(e){return console.error("Failed to initialize GoogleGenAI with provided key:",e),qn=null,!1}},af=()=>!!qn,JP=async(t,e)=>{var n,i;if(!qn)throw new Error("Gemini AI SDK not initialized or API key is invalid. Please configure it in settings.");try{const r=await qn.models.generateContent({model:UE,contents:[{role:"user",parts:[{text:t}]}],config:{systemInstruction:{role:"system",parts:[{text:e}]},temperature:.8,maxOutputTokens:2048,safetySettings:[{category:Ki.HARM_CATEGORY_HARASSMENT,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE},{category:Ki.HARM_CATEGORY_HATE_SPEECH,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE},{category:Ki.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE},{category:Ki.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE}]}}),a=r.text;if(typeof a=="string")return a;{if(console.error("Gemini API response.text was not a string. Full response:",JSON.stringify(r,null,2)),(n=r==null?void 0:r.promptFeedback)!=null&&n.blockReason)throw new Error(`Prompt was blocked. Reason: ${r.promptFeedback.blockReason}${r.promptFeedback.blockReasonMessage?" - "+r.promptFeedback.blockReasonMessage:""}`);const c=(i=r==null?void 0:r.candidates)==null?void 0:i[0];if((c==null?void 0:c.finishReason)==="SAFETY"){const h=c.safetyRatings;let m=h==null?void 0:h.filter(p=>p.probability!=="NEGLIGIBLE"&&p.probability!=="LOW").map(p=>p.category.replace("HARM_CATEGORY_","")).join(", ");throw new Error(`Response blocked by safety filters. Categories: ${m||"Content policy"}.`)}throw(c==null?void 0:c.finishReason)==="OTHER"||(c==null?void 0:c.finishReason)==="RECITATION"||!c?new Error(`Gemini API returned an empty or malformed response. Reason: ${(c==null?void 0:c.finishReason)||"Unknown/No Candidate"}.`):new Error("Gemini API returned an invalid or unexpected text response structure.")}}catch(r){console.error("Error calling Gemini API (non-streaming):",r);const a=r instanceof Error?r.message:String(r);throw a.includes("API key not valid")||a.includes("API_KEY_INVALID")||a.includes("permission_denied")?new Error("The provided Gemini API key is invalid or lacks permissions. Please check it in settings."):r}};async function*c0(t,e,n){var r,a;if(!qn)throw new Error("Gemini AI SDK not initialized. Please configure it in settings.");const i=[];n&&n.length>0&&i.push(...n),i.push({text:t});try{const c=await qn.models.generateContentStream({model:UE,contents:[{role:"user",parts:i}],config:{systemInstruction:{role:"system",parts:[{text:e}]},temperature:.8,maxOutputTokens:2048,safetySettings:[{category:Ki.HARM_CATEGORY_HARASSMENT,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE},{category:Ki.HARM_CATEGORY_HATE_SPEECH,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE},{category:Ki.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE},{category:Ki.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Ji.BLOCK_MEDIUM_AND_ABOVE}]}});for await(const h of c){if((r=h==null?void 0:h.promptFeedback)!=null&&r.blockReason)throw new Error(`Stream blocked by Gemini. Reason: ${h.promptFeedback.blockReason}${h.promptFeedback.blockReasonMessage?" - "+h.promptFeedback.blockReasonMessage:""}.`);const m=(a=h==null?void 0:h.candidates)==null?void 0:a[0];if((m==null?void 0:m.finishReason)==="SAFETY"){const p=m.safetyRatings;let v=p==null?void 0:p.filter(E=>E.probability!=="NEGLIGIBLE"&&E.probability!=="LOW").map(E=>E.category.replace("HARM_CATEGORY_","")).join(", ");throw new Error(`Stream ended by Gemini's safety filters. Categories: ${v||"Content policy"}.`)}if(!h.text&&((m==null?void 0:m.finishReason)==="OTHER"||(m==null?void 0:m.finishReason)==="RECITATION"))throw new Error(`Gemini stream ended unexpectedly or provided empty content. Reason: ${m==null?void 0:m.finishReason}.`);yield h}}catch(c){console.error("Error during Gemini API stream:",c);const h=c instanceof Error?c.message:String(c);throw h.includes("API key not valid")||h.includes("API_KEY_INVALID")||h.includes("permission_denied")?new Error("The provided Gemini API key is invalid or lacks permissions. Please check it in settings."):new Error(`Gemini API streaming error: ${h}`)}}const QP=async t=>{if(!qn)throw new Error("Gemini AI SDK not initialized.");try{return await qn.models.generateImages({model:"imagen-3.0-generate-002",prompt:t})}catch(e){throw console.error("Error calling Imagen API:",e),e}},XP=async(t,e)=>{if(!qn)throw new Error("Gemini AI SDK not initialized.");try{let n=await qn.models.generateVideos({model:"veo-3.0-generate-preview",prompt:t,image:e});for(;!n.done;)await new Promise(i=>setTimeout(i,1e4)),n=await qn.operations.get(n);return n.response.generatedVideos[0]}catch(n){throw console.error("Error calling Veo API:",n),n}};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZP=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),f0=t=>{const e=ZP(t);return e.charAt(0).toUpperCase()+e.slice(1)},pS=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),jP=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=_e.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:c,...h},m)=>_e.createElement("svg",{ref:m,...e2,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:pS("lucide",r),...!a&&!jP(h)&&{"aria-hidden":"true"},...h},[...c.map(([p,v])=>_e.createElement(p,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=(t,e)=>{const n=_e.forwardRef(({className:i,...r},a)=>_e.createElement(t2,{ref:a,iconNode:e,className:pS(`lucide-${WP(f0(t))}`,`lucide-${t}`,i),...r}));return n.displayName=f0(t),n};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],mS=mt("bot",n2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],gS=mt("camera",i2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],r2=mt("check",o2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],a2=mt("chevron-up",s2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],u2=mt("circle-x",l2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],f2=mt("copy",c2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],h2=mt("download",d2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["path",{d:"M10 11h.01",key:"d2at3l"}],["path",{d:"M14 6h.01",key:"k028ub"}],["path",{d:"M18 6h.01",key:"1v4wsw"}],["path",{d:"M6.5 13.1h.01",key:"1748ia"}],["path",{d:"M22 5c0 9-4 12-6 12s-6-3-6-12c0-2 2-3 6-3s6 1 6 3",key:"172yzv"}],["path",{d:"M17.4 9.9c-.8.8-2 .8-2.8 0",key:"1obv0w"}],["path",{d:"M10.1 7.1C9 7.2 7.7 7.7 6 8.6c-3.5 2-4.7 3.9-3.7 5.6 4.5 7.8 9.5 8.4 11.2 7.4.9-.5 1.9-2.1 1.9-4.7",key:"rqjl8i"}],["path",{d:"M9.1 16.5c.3-1.1 1.4-1.7 2.4-1.4",key:"1mr6wy"}]],yS=mt("drama",p2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],g2=mt("eye",m2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],v2=mt("folder-open",y2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]],T2=mt("image-off",_2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],S2=mt("library",E2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],C2=mt("loader-circle",A2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],vS=mt("moon",w2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],R2=mt("pencil",I2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],b2=mt("plus",x2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],N2=mt("scan-line",M2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],D2=mt("search",k2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],V2=mt("send-horizontal",P2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_S=mt("settings",L2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],O2=mt("share-2",U2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],TS=mt("sparkles",B2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ES=mt("sun",F2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],SS=mt("trash-2",q2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],z2=mt("triangle-alert",G2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$2=mt("user",H2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],K2=mt("video",Y2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],AS=mt("volume-2",J2);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],CS=mt("volume-x",Q2),X2=({theme:t,selectedAI:e,imageStyle:n,apiKeys:i,apiStatus:r,darkMode:a,soundEnabled:c,setSelectedAI:h,setImageStyle:m,updateApiKey:p,toggleDarkMode:v,toggleSound:E,onClose:S})=>N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:S,children:N.jsxs("div",{className:`${t.card} rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col`,onClick:I=>I.stopPropagation(),children:[N.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[N.jsx("h2",{className:"text-xl font-bold",children:"Settings"}),N.jsx("button",{onClick:S,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:"×"})]}),N.jsxs("div",{className:"overflow-y-auto p-6 space-y-6",children:[N.jsxs("section",{children:[N.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Appearance"}),N.jsxs("div",{className:"space-y-3",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("label",{htmlFor:"darkModeToggle",className:"font-medium",children:"Dark Mode"}),N.jsx("button",{onClick:v,id:"darkModeToggle",className:`p-2 rounded-full ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:a?N.jsx(ES,{size:20}):N.jsx(vS,{size:20})})]}),N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("label",{htmlFor:"soundToggle",className:"font-medium",children:"Sound Enabled"}),N.jsx("button",{onClick:E,id:"soundToggle",className:`p-2 rounded-full ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:c?N.jsx(AS,{size:20}):N.jsx(CS,{size:20})})]})]})]}),N.jsxs("section",{children:[N.jsx("h3",{className:"text-lg font-semibold mb-3",children:"AI Model"}),N.jsx("div",{role:"group",className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.entries(Xn).map(([I,x])=>N.jsxs("button",{onClick:()=>h(I),className:`p-3 rounded-lg border text-sm transition-all duration-200 ${e===I?`${x.color} border-current bg-current/10 font-semibold`:`${t.muted} border-gray-300 dark:border-gray-600 hover:border-current hover:bg-gray-500/10`}`,children:[x.icon," ",x.name]},I))})]}),N.jsxs("section",{children:[N.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Image Style (DALL-E)"}),N.jsx("div",{role:"group",className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.entries(UI).map(([I,x])=>N.jsx("button",{onClick:()=>m(I),className:`p-3 rounded-lg border text-sm transition-all duration-200 ${n===I?"text-pink-400 border-pink-400 bg-pink-400/10 font-semibold":`${t.muted} border-gray-300 dark:border-gray-600 hover:border-current hover:text-pink-400 hover:border-pink-400/50 hover:bg-pink-400/10`}`,children:x},I))})]}),N.jsxs("section",{children:[N.jsx("h3",{className:"text-lg font-semibold mb-3",children:"API Keys"}),N.jsxs("div",{className:"space-y-3",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium mb-1",children:"OpenAI API Key"}),N.jsx("input",{type:"password",placeholder:"sk-...",value:i.openai,onChange:I=>p("openai",I.target.value),className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gemini API Key"}),N.jsx("input",{type:"password",placeholder:"AIza...",value:i.gemini,onChange:I=>p("gemini",I.target.value),className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium mb-1",children:"Claude API Key"}),N.jsx("input",{type:"password",placeholder:"sk-ant-...",value:i.claude,onChange:I=>p("claude",I.target.value),className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`})]})]}),N.jsx("p",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:"Your API keys are saved automatically to your browser's local storage. They are never sent to our servers."})]})]})]})});function xm(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Is=xm();function wS(t){Is=t}var uu={exec:()=>null};function ft(t,e=""){let n=typeof t=="string"?t:t.source;const i={replace:(r,a)=>{let c=typeof a=="string"?a:a.source;return c=c.replace(Dn.caret,"$1"),n=n.replace(r,c),i},getRegex:()=>new RegExp(n,e)};return i}var Dn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},W2=/^(?:[ \t]*(?:\n|$))+/,Z2=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,j2=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ru=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,eV=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,bm=/(?:[*+-]|\d{1,9}[.)])/,IS=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,RS=ft(IS).replace(/bull/g,bm).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),tV=ft(IS).replace(/bull/g,bm).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Mm=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,nV=/^[^\n]+/,Nm=/(?!\s*\])(?:\\.|[^\[\]\\])+/,iV=ft(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Nm).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),oV=ft(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,bm).getRegex(),jf="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",km=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,rV=ft("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",km).replace("tag",jf).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),xS=ft(Mm).replace("hr",Ru).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jf).getRegex(),sV=ft(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",xS).getRegex(),Dm={blockquote:sV,code:Z2,def:iV,fences:j2,heading:eV,hr:Ru,html:rV,lheading:RS,list:oV,newline:W2,paragraph:xS,table:uu,text:nV},d0=ft("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ru).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jf).getRegex(),aV={...Dm,lheading:tV,table:d0,paragraph:ft(Mm).replace("hr",Ru).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",d0).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jf).getRegex()},lV={...Dm,html:ft(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",km).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:uu,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ft(Mm).replace("hr",Ru).replace("heading",` *#{1,6} *[^
]`).replace("lheading",RS).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},uV=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,cV=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,bS=/^( {2,}|\\)\n(?!\s*$)/,fV=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ed=/[\p{P}\p{S}]/u,Pm=/[\s\p{P}\p{S}]/u,MS=/[^\s\p{P}\p{S}]/u,dV=ft(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Pm).getRegex(),NS=/(?!~)[\p{P}\p{S}]/u,hV=/(?!~)[\s\p{P}\p{S}]/u,pV=/(?:[^\s\p{P}\p{S}]|~)/u,mV=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,kS=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,gV=ft(kS,"u").replace(/punct/g,ed).getRegex(),yV=ft(kS,"u").replace(/punct/g,NS).getRegex(),DS="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",vV=ft(DS,"gu").replace(/notPunctSpace/g,MS).replace(/punctSpace/g,Pm).replace(/punct/g,ed).getRegex(),_V=ft(DS,"gu").replace(/notPunctSpace/g,pV).replace(/punctSpace/g,hV).replace(/punct/g,NS).getRegex(),TV=ft("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,MS).replace(/punctSpace/g,Pm).replace(/punct/g,ed).getRegex(),EV=ft(/\\(punct)/,"gu").replace(/punct/g,ed).getRegex(),SV=ft(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),AV=ft(km).replace("(?:-->|$)","-->").getRegex(),CV=ft("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",AV).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Nf=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,wV=ft(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Nf).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),PS=ft(/^!?\[(label)\]\[(ref)\]/).replace("label",Nf).replace("ref",Nm).getRegex(),VS=ft(/^!?\[(ref)\](?:\[\])?/).replace("ref",Nm).getRegex(),IV=ft("reflink|nolink(?!\\()","g").replace("reflink",PS).replace("nolink",VS).getRegex(),Vm={_backpedal:uu,anyPunctuation:EV,autolink:SV,blockSkip:mV,br:bS,code:cV,del:uu,emStrongLDelim:gV,emStrongRDelimAst:vV,emStrongRDelimUnd:TV,escape:uV,link:wV,nolink:VS,punctuation:dV,reflink:PS,reflinkSearch:IV,tag:CV,text:fV,url:uu},RV={...Vm,link:ft(/^!?\[(label)\]\((.*?)\)/).replace("label",Nf).getRegex(),reflink:ft(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Nf).getRegex()},Qp={...Vm,emStrongRDelimAst:_V,emStrongLDelim:yV,url:ft(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},xV={...Qp,br:ft(bS).replace("{2,}","*").getRegex(),text:ft(Qp.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},lf={normal:Dm,gfm:aV,pedantic:lV},eu={normal:Vm,gfm:Qp,breaks:xV,pedantic:RV},bV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},h0=t=>bV[t];function Yi(t,e){if(e){if(Dn.escapeTest.test(t))return t.replace(Dn.escapeReplace,h0)}else if(Dn.escapeTestNoEncode.test(t))return t.replace(Dn.escapeReplaceNoEncode,h0);return t}function p0(t){try{t=encodeURI(t).replace(Dn.percentDecode,"%")}catch{return null}return t}function m0(t,e){var a;const n=t.replace(Dn.findPipe,(c,h,m)=>{let p=!1,v=h;for(;--v>=0&&m[v]==="\\";)p=!p;return p?"|":" |"}),i=n.split(Dn.splitPipe);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!((a=i.at(-1))!=null&&a.trim())&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(Dn.slashPipe,"|");return i}function tu(t,e,n){const i=t.length;if(i===0)return"";let r=0;for(;r<i&&t.charAt(i-r-1)===e;)r++;return t.slice(0,i-r)}function MV(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let i=0;i<t.length;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return n>0?-2:-1}function g0(t,e,n,i,r){const a=e.href,c=e.title||null,h=t[1].replace(r.other.outputLinkReplace,"$1");i.state.inLink=!0;const m={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:a,title:c,text:h,tokens:i.inlineTokens(h)};return i.state.inLink=!1,m}function NV(t,e,n){const i=t.match(n.other.indentCodeCompensation);if(i===null)return e;const r=i[1];return e.split(`
`).map(a=>{const c=a.match(n.other.beginningSpace);if(c===null)return a;const[h]=c;return h.length>=r.length?a.slice(r.length):a}).join(`
`)}var kf=class{constructor(t){Ct(this,"options");Ct(this,"rules");Ct(this,"lexer");this.options=t||Is}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:tu(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],i=NV(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){const i=tu(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:tu(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=tu(e[0],`
`).split(`
`),i="",r="";const a=[];for(;n.length>0;){let c=!1;const h=[];let m;for(m=0;m<n.length;m++)if(this.rules.other.blockquoteStart.test(n[m]))h.push(n[m]),c=!0;else if(!c)h.push(n[m]);else break;n=n.slice(m);const p=h.join(`
`),v=p.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${p}`:p,r=r?`${r}
${v}`:v;const E=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(v,a,!0),this.lexer.state.top=E,n.length===0)break;const S=a.at(-1);if((S==null?void 0:S.type)==="code")break;if((S==null?void 0:S.type)==="blockquote"){const I=S,x=I.raw+`
`+n.join(`
`),O=this.blockquote(x);a[a.length-1]=O,i=i.substring(0,i.length-I.raw.length)+O.raw,r=r.substring(0,r.length-I.text.length)+O.text;break}else if((S==null?void 0:S.type)==="list"){const I=S,x=I.raw+`
`+n.join(`
`),O=this.list(x);a[a.length-1]=O,i=i.substring(0,i.length-S.raw.length)+O.raw,r=r.substring(0,r.length-I.raw.length)+O.raw,n=x.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:a,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const i=n.length>1,r={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const a=this.rules.other.listItemRegex(n);let c=!1;for(;t;){let m=!1,p="",v="";if(!(e=a.exec(t))||this.rules.block.hr.test(t))break;p=e[0],t=t.substring(p.length);let E=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,re=>" ".repeat(3*re.length)),S=t.split(`
`,1)[0],I=!E.trim(),x=0;if(this.options.pedantic?(x=2,v=E.trimStart()):I?x=e[1].length+1:(x=e[2].search(this.rules.other.nonSpaceChar),x=x>4?1:x,v=E.slice(x),x+=e[1].length),I&&this.rules.other.blankLine.test(S)&&(p+=S+`
`,t=t.substring(S.length+1),m=!0),!m){const re=this.rules.other.nextBulletRegex(x),te=this.rules.other.hrRegex(x),ne=this.rules.other.fencesBeginRegex(x),ce=this.rules.other.headingBeginRegex(x),se=this.rules.other.htmlBeginRegex(x);for(;t;){const me=t.split(`
`,1)[0];let D;if(S=me,this.options.pedantic?(S=S.replace(this.rules.other.listReplaceNesting,"  "),D=S):D=S.replace(this.rules.other.tabCharGlobal,"    "),ne.test(S)||ce.test(S)||se.test(S)||re.test(S)||te.test(S))break;if(D.search(this.rules.other.nonSpaceChar)>=x||!S.trim())v+=`
`+D.slice(x);else{if(I||E.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||ne.test(E)||ce.test(E)||te.test(E))break;v+=`
`+S}!I&&!S.trim()&&(I=!0),p+=me+`
`,t=t.substring(me.length+1),E=D.slice(x)}}r.loose||(c?r.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(c=!0));let O=null,F;this.options.gfm&&(O=this.rules.other.listIsTask.exec(v),O&&(F=O[0]!=="[ ] ",v=v.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:p,task:!!O,checked:F,loose:!1,text:v,tokens:[]}),r.raw+=p}const h=r.items.at(-1);if(h)h.raw=h.raw.trimEnd(),h.text=h.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let m=0;m<r.items.length;m++)if(this.lexer.state.top=!1,r.items[m].tokens=this.lexer.blockTokens(r.items[m].text,[]),!r.loose){const p=r.items[m].tokens.filter(E=>E.type==="space"),v=p.length>0&&p.some(E=>this.rules.other.anyLine.test(E.raw));r.loose=v}if(r.loose)for(let m=0;m<r.items.length;m++)r.items[m].loose=!0;return r}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:i,title:r}}}table(t){var c;const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const n=m0(e[1]),i=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(c=e[3])!=null&&c.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===i.length){for(const h of i)this.rules.other.tableAlignRight.test(h)?a.align.push("right"):this.rules.other.tableAlignCenter.test(h)?a.align.push("center"):this.rules.other.tableAlignLeft.test(h)?a.align.push("left"):a.align.push(null);for(let h=0;h<n.length;h++)a.header.push({text:n[h],tokens:this.lexer.inline(n[h]),header:!0,align:a.align[h]});for(const h of r)a.rows.push(m0(h,a.header.length).map((m,p)=>({text:m,tokens:this.lexer.inline(m),header:!1,align:a.align[p]})));return a}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const a=tu(n.slice(0,-1),"\\");if((n.length-a.length)%2===0)return}else{const a=MV(e[2],"()");if(a===-2)return;if(a>-1){const h=(e[0].indexOf("!")===0?5:4)+e[1].length+a;e[2]=e[2].substring(0,a),e[0]=e[0].substring(0,h).trim(),e[3]=""}}let i=e[2],r="";if(this.options.pedantic){const a=this.rules.other.pedanticHrefTitle.exec(i);a&&(i=a[1],r=a[3])}else r=e[3]?e[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),g0(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[i.toLowerCase()];if(!r){const a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return g0(n,r,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const a=[...i[0]].length-1;let c,h,m=a,p=0;const v=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(v.lastIndex=0,e=e.slice(-1*t.length+a);(i=v.exec(e))!=null;){if(c=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!c)continue;if(h=[...c].length,i[3]||i[4]){m+=h;continue}else if((i[5]||i[6])&&a%3&&!((a+h)%3)){p+=h;continue}if(m-=h,m>0)continue;h=Math.min(h,h+m+p);const E=[...i[0]][0].length,S=t.slice(0,a+i.index+E+h);if(Math.min(a,h)%2){const x=S.slice(1,-1);return{type:"em",raw:S,text:x,tokens:this.lexer.inlineTokens(x)}}const I=S.slice(2,-2);return{type:"strong",raw:S,text:I,tokens:this.lexer.inlineTokens(I)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(n),r=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&r&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,i;return e[2]==="@"?(n=e[1],i="mailto:"+n):(n=e[1],i=n),{type:"link",raw:e[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let e;if(e=this.rules.inline.url.exec(t)){let i,r;if(e[2]==="@")i=e[0],r="mailto:"+i;else{let a;do a=e[0],e[0]=((n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])??"";while(a!==e[0]);i=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},No=class Xp{constructor(e){Ct(this,"tokens");Ct(this,"options");Ct(this,"state");Ct(this,"tokenizer");Ct(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Is,this.options.tokenizer=this.options.tokenizer||new kf,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:Dn,block:lf.normal,inline:eu.normal};this.options.pedantic?(n.block=lf.pedantic,n.inline=eu.pedantic):this.options.gfm&&(n.block=lf.gfm,this.options.breaks?n.inline=eu.breaks:n.inline=eu.gfm),this.tokenizer.rules=n}static get rules(){return{block:lf,inline:eu}}static lex(e,n){return new Xp(n).lex(e)}static lexInline(e,n){return new Xp(n).inlineTokens(e)}lex(e){e=e.replace(Dn.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],i=!1){var r,a,c;for(this.options.pedantic&&(e=e.replace(Dn.tabCharGlobal,"    ").replace(Dn.spaceLine,""));e;){let h;if((a=(r=this.options.extensions)==null?void 0:r.block)!=null&&a.some(p=>(h=p.call({lexer:this},e,n))?(e=e.substring(h.raw.length),n.push(h),!0):!1))continue;if(h=this.tokenizer.space(e)){e=e.substring(h.raw.length);const p=n.at(-1);h.raw.length===1&&p!==void 0?p.raw+=`
`:n.push(h);continue}if(h=this.tokenizer.code(e)){e=e.substring(h.raw.length);const p=n.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=`
`+h.raw,p.text+=`
`+h.text,this.inlineQueue.at(-1).src=p.text):n.push(h);continue}if(h=this.tokenizer.fences(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.heading(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.hr(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.blockquote(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.list(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.html(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.def(e)){e=e.substring(h.raw.length);const p=n.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=`
`+h.raw,p.text+=`
`+h.raw,this.inlineQueue.at(-1).src=p.text):this.tokens.links[h.tag]||(this.tokens.links[h.tag]={href:h.href,title:h.title});continue}if(h=this.tokenizer.table(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.lheading(e)){e=e.substring(h.raw.length),n.push(h);continue}let m=e;if((c=this.options.extensions)!=null&&c.startBlock){let p=1/0;const v=e.slice(1);let E;this.options.extensions.startBlock.forEach(S=>{E=S.call({lexer:this},v),typeof E=="number"&&E>=0&&(p=Math.min(p,E))}),p<1/0&&p>=0&&(m=e.substring(0,p+1))}if(this.state.top&&(h=this.tokenizer.paragraph(m))){const p=n.at(-1);i&&(p==null?void 0:p.type)==="paragraph"?(p.raw+=`
`+h.raw,p.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):n.push(h),i=m.length!==e.length,e=e.substring(h.raw.length);continue}if(h=this.tokenizer.text(e)){e=e.substring(h.raw.length);const p=n.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=`
`+h.raw,p.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):n.push(h);continue}if(e){const p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var h,m,p;let i=e,r=null;if(this.tokens.links){const v=Object.keys(this.tokens.links);if(v.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)v.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,r.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let a=!1,c="";for(;e;){a||(c=""),a=!1;let v;if((m=(h=this.options.extensions)==null?void 0:h.inline)!=null&&m.some(S=>(v=S.call({lexer:this},e,n))?(e=e.substring(v.raw.length),n.push(v),!0):!1))continue;if(v=this.tokenizer.escape(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.tag(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.link(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(v.raw.length);const S=n.at(-1);v.type==="text"&&(S==null?void 0:S.type)==="text"?(S.raw+=v.raw,S.text+=v.text):n.push(v);continue}if(v=this.tokenizer.emStrong(e,i,c)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.codespan(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.br(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.del(e)){e=e.substring(v.raw.length),n.push(v);continue}if(v=this.tokenizer.autolink(e)){e=e.substring(v.raw.length),n.push(v);continue}if(!this.state.inLink&&(v=this.tokenizer.url(e))){e=e.substring(v.raw.length),n.push(v);continue}let E=e;if((p=this.options.extensions)!=null&&p.startInline){let S=1/0;const I=e.slice(1);let x;this.options.extensions.startInline.forEach(O=>{x=O.call({lexer:this},I),typeof x=="number"&&x>=0&&(S=Math.min(S,x))}),S<1/0&&S>=0&&(E=e.substring(0,S+1))}if(v=this.tokenizer.inlineText(E)){e=e.substring(v.raw.length),v.raw.slice(-1)!=="_"&&(c=v.raw.slice(-1)),a=!0;const S=n.at(-1);(S==null?void 0:S.type)==="text"?(S.raw+=v.raw,S.text+=v.text):n.push(v);continue}if(e){const S="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(S);break}else throw new Error(S)}}return n}},Df=class{constructor(t){Ct(this,"options");Ct(this,"parser");this.options=t||Is}space(t){return""}code({text:t,lang:e,escaped:n}){var a;const i=(a=(e||"").match(Dn.notSpaceStart))==null?void 0:a[0],r=t.replace(Dn.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Yi(i)+'">'+(n?r:Yi(r,!0))+`</code></pre>
`:"<pre><code>"+(n?r:Yi(r,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,n=t.start;let i="";for(let c=0;c<t.items.length;c++){const h=t.items[c];i+=this.listitem(h)}const r=e?"ol":"ul",a=e&&n!==1?' start="'+n+'"':"";return"<"+r+a+`>
`+i+"</"+r+`>
`}listitem(t){var n;let e="";if(t.task){const i=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=i+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=i+" "+Yi(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):e+=i+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let r=0;r<t.header.length;r++)n+=this.tablecell(t.header[r]);e+=this.tablerow({text:n});let i="";for(let r=0;r<t.rows.length;r++){const a=t.rows[r];n="";for(let c=0;c<a.length;c++)n+=this.tablecell(a[c]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+i+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Yi(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const i=this.parser.parseInline(n),r=p0(t);if(r===null)return i;t=r;let a='<a href="'+t+'"';return e&&(a+=' title="'+Yi(e)+'"'),a+=">"+i+"</a>",a}image({href:t,title:e,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));const r=p0(t);if(r===null)return Yi(n);t=r;let a=`<img src="${t}" alt="${n}"`;return e&&(a+=` title="${Yi(e)}"`),a+=">",a}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Yi(t.text)}},Lm=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},ko=class Wp{constructor(e){Ct(this,"options");Ct(this,"renderer");Ct(this,"textRenderer");this.options=e||Is,this.options.renderer=this.options.renderer||new Df,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Lm}static parse(e,n){return new Wp(n).parse(e)}static parseInline(e,n){return new Wp(n).parseInline(e)}parse(e,n=!0){var r,a;let i="";for(let c=0;c<e.length;c++){const h=e[c];if((a=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&a[h.type]){const p=h,v=this.options.extensions.renderers[p.type].call({parser:this},p);if(v!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(p.type)){i+=v||"";continue}}const m=h;switch(m.type){case"space":{i+=this.renderer.space(m);continue}case"hr":{i+=this.renderer.hr(m);continue}case"heading":{i+=this.renderer.heading(m);continue}case"code":{i+=this.renderer.code(m);continue}case"table":{i+=this.renderer.table(m);continue}case"blockquote":{i+=this.renderer.blockquote(m);continue}case"list":{i+=this.renderer.list(m);continue}case"html":{i+=this.renderer.html(m);continue}case"paragraph":{i+=this.renderer.paragraph(m);continue}case"text":{let p=m,v=this.renderer.text(p);for(;c+1<e.length&&e[c+1].type==="text";)p=e[++c],v+=`
`+this.renderer.text(p);n?i+=this.renderer.paragraph({type:"paragraph",raw:v,text:v,tokens:[{type:"text",raw:v,text:v,escaped:!0}]}):i+=v;continue}default:{const p='Token with "'+m.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return i}parseInline(e,n=this.renderer){var r,a;let i="";for(let c=0;c<e.length;c++){const h=e[c];if((a=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&a[h.type]){const p=this.options.extensions.renderers[h.type].call({parser:this},h);if(p!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(h.type)){i+=p||"";continue}}const m=h;switch(m.type){case"escape":{i+=n.text(m);break}case"html":{i+=n.html(m);break}case"link":{i+=n.link(m);break}case"image":{i+=n.image(m);break}case"strong":{i+=n.strong(m);break}case"em":{i+=n.em(m);break}case"codespan":{i+=n.codespan(m);break}case"br":{i+=n.br(m);break}case"del":{i+=n.del(m);break}case"text":{i+=n.text(m);break}default:{const p='Token with "'+m.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return i}},Lp,vf=(Lp=class{constructor(t){Ct(this,"options");Ct(this,"block");this.options=t||Is}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?No.lex:No.lexInline}provideParser(){return this.block?ko.parse:ko.parseInline}},Ct(Lp,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),Lp),kV=class{constructor(...t){Ct(this,"defaults",xm());Ct(this,"options",this.setOptions);Ct(this,"parse",this.parseMarkdown(!0));Ct(this,"parseInline",this.parseMarkdown(!1));Ct(this,"Parser",ko);Ct(this,"Renderer",Df);Ct(this,"TextRenderer",Lm);Ct(this,"Lexer",No);Ct(this,"Tokenizer",kf);Ct(this,"Hooks",vf);this.use(...t)}walkTokens(t,e){var i,r;let n=[];for(const a of t)switch(n=n.concat(e.call(this,a)),a.type){case"table":{const c=a;for(const h of c.header)n=n.concat(this.walkTokens(h.tokens,e));for(const h of c.rows)for(const m of h)n=n.concat(this.walkTokens(m.tokens,e));break}case"list":{const c=a;n=n.concat(this.walkTokens(c.items,e));break}default:{const c=a;(r=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&r[c.type]?this.defaults.extensions.childTokens[c.type].forEach(h=>{const m=c[h].flat(1/0);n=n.concat(this.walkTokens(m,e))}):c.tokens&&(n=n.concat(this.walkTokens(c.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const a=e.renderers[r.name];a?e.renderers[r.name]=function(...c){let h=r.renderer.apply(this,c);return h===!1&&(h=a.apply(this,c)),h}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=e[r.level];a?a.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),n.renderer){const r=this.defaults.renderer||new Df(this.defaults);for(const a in n.renderer){if(!(a in r))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;const c=a,h=n.renderer[c],m=r[c];r[c]=(...p)=>{let v=h.apply(r,p);return v===!1&&(v=m.apply(r,p)),v||""}}i.renderer=r}if(n.tokenizer){const r=this.defaults.tokenizer||new kf(this.defaults);for(const a in n.tokenizer){if(!(a in r))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const c=a,h=n.tokenizer[c],m=r[c];r[c]=(...p)=>{let v=h.apply(r,p);return v===!1&&(v=m.apply(r,p)),v}}i.tokenizer=r}if(n.hooks){const r=this.defaults.hooks||new vf;for(const a in n.hooks){if(!(a in r))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;const c=a,h=n.hooks[c],m=r[c];vf.passThroughHooks.has(a)?r[c]=p=>{if(this.defaults.async)return Promise.resolve(h.call(r,p)).then(E=>m.call(r,E));const v=h.call(r,p);return m.call(r,v)}:r[c]=(...p)=>{let v=h.apply(r,p);return v===!1&&(v=m.apply(r,p)),v}}i.hooks=r}if(n.walkTokens){const r=this.defaults.walkTokens,a=n.walkTokens;i.walkTokens=function(c){let h=[];return h.push(a.call(this,c)),r&&(h=h.concat(r.call(this,c))),h}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return No.lex(t,e??this.defaults)}parser(t,e){return ko.parse(t,e??this.defaults)}parseMarkdown(t){return(n,i)=>{const r={...i},a={...this.defaults,...r},c=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&r.async===!1)return c(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return c(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));a.hooks&&(a.hooks.options=a,a.hooks.block=t);const h=a.hooks?a.hooks.provideLexer():t?No.lex:No.lexInline,m=a.hooks?a.hooks.provideParser():t?ko.parse:ko.parseInline;if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(n):n).then(p=>h(p,a)).then(p=>a.hooks?a.hooks.processAllTokens(p):p).then(p=>a.walkTokens?Promise.all(this.walkTokens(p,a.walkTokens)).then(()=>p):p).then(p=>m(p,a)).then(p=>a.hooks?a.hooks.postprocess(p):p).catch(c);try{a.hooks&&(n=a.hooks.preprocess(n));let p=h(n,a);a.hooks&&(p=a.hooks.processAllTokens(p)),a.walkTokens&&this.walkTokens(p,a.walkTokens);let v=m(p,a);return a.hooks&&(v=a.hooks.postprocess(v)),v}catch(p){return c(p)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const i="<p>An error occurred:</p><pre>"+Yi(n.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(n);throw n}}},vs=new kV;function ut(t,e){return vs.parse(t,e)}ut.options=ut.setOptions=function(t){return vs.setOptions(t),ut.defaults=vs.defaults,wS(ut.defaults),ut};ut.getDefaults=xm;ut.defaults=Is;ut.use=function(...t){return vs.use(...t),ut.defaults=vs.defaults,wS(ut.defaults),ut};ut.walkTokens=function(t,e){return vs.walkTokens(t,e)};ut.parseInline=vs.parseInline;ut.Parser=ko;ut.parser=ko.parse;ut.Renderer=Df;ut.TextRenderer=Lm;ut.Lexer=No;ut.lexer=No.lex;ut.Tokenizer=kf;ut.Hooks=vf;ut.parse=ut;ut.options;ut.setOptions;ut.use;ut.walkTokens;ut.parseInline;ko.parse;No.lex;const DV=({theme:t,onPromptClick:e})=>{const n=["What's the best place to get suya in Lekki?","Paint a picture of a futuristic Lagos with flying danfo buses.","Tell me a story about the Eyo festival, but in the style of a wise Igbo elder.","Plan a 3-day tourist itinerary for someone visiting Lagos for the first time."];return N.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[N.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-cyan-500 to-purple-500 rounded-full flex items-center justify-center shadow-lg mb-4",children:N.jsx(TS,{className:"w-10 h-10 text-white"})}),N.jsx("h1",{className:`text-3xl font-bold ${t.text} mb-2`,children:"Lagos Oracle"}),N.jsx("p",{className:`${t.muted} mb-8`,children:"Your AI companion for all things Lagos and beyond."}),N.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-w-2xl w-full",children:n.map((i,r)=>N.jsxs("button",{onClick:()=>e(i),className:`p-4 rounded-lg text-left transition-all duration-200
                        ${t.card} border dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-700/50
                        flex items-start space-x-3`,children:[N.jsx(mS,{className:`w-5 h-5 mt-1 ${t.secondaryAccent} shrink-0`}),N.jsx("span",{className:`text-sm ${t.text}`,children:i})]},r))})]})};ut.setOptions({breaks:!0,gfm:!0});const Zp=({persona:t,isUser:e,isError:n})=>{var a;const i="w-8 h-8 rounded-full flex items-center justify-center shrink-0 text-white";if(e)return N.jsx("div",{className:`${i} bg-blue-500`,children:N.jsx($2,{className:"w-5 h-5"})});if(n)return N.jsx("div",{className:`${i} bg-red-500`,children:N.jsx(z2,{className:"w-5 h-5"})});if((a=t==null?void 0:t.icon)!=null&&a.startsWith("http"))return N.jsx("img",{src:t.icon,alt:t.name,className:"w-8 h-8 rounded-full object-cover"});const r=t!=null&&t.color?t.color.replace("text-","bg-").replace("-400","-500"):"bg-indigo-500";return N.jsx("div",{className:`${i} ${r}`,children:t!=null&&t.icon&&!t.icon.startsWith("http")?N.jsx("span",{className:"text-xl",children:t.icon}):N.jsx(mS,{className:"w-5 h-5"})})},PV=({message:t,theme:e,personas:n})=>{const[i,r]=_e.useState(!1),a=ut.parse(typeof t.content=="string"?t.content:"*Error: Invalid message content*"),c=()=>{typeof t.content=="string"&&navigator.clipboard.writeText(t.content).then(()=>{r(!0),setTimeout(()=>r(!1),2e3)}).catch(E=>console.error("Failed to copy text: ",E))},h=t.mood==="error",m=t.personaKey?n[t.personaKey]:void 0,p="group flex items-start gap-3 my-4 relative",v="relative rounded-xl px-4 py-3 shadow-md max-w-2xl";return t.type==="user"?N.jsxs("div",{className:`${p} justify-end`,children:[N.jsx("div",{className:`${v} bg-blue-600 text-white`,children:N.jsx("div",{className:"prose prose-sm max-w-none prose-invert prose-p:my-1",dangerouslySetInnerHTML:{__html:a}})}),N.jsx(Zp,{isUser:!0})]}):N.jsxs("div",{className:p,children:[N.jsx(Zp,{persona:m,isError:h}),N.jsxs("div",{className:"flex flex-col",children:[N.jsxs("div",{className:`${v} ${h?"bg-red-100 dark:bg-red-900/40":e.card}`,children:[t.model&&N.jsx("div",{className:`text-xs mb-1.5 font-semibold ${h?"text-red-600 dark:text-red-300":e.muted}`,children:t.model}),N.jsx("div",{className:`prose prose-sm max-w-none ${e.text}`,dangerouslySetInnerHTML:{__html:a}}),t.media&&N.jsxs("div",{className:"mt-3",children:[t.media.imageUrl&&N.jsx("img",{src:t.media.imageUrl,alt:"Generated by AI",className:"rounded-lg max-w-xs md:max-w-sm h-auto shadow-lg border dark:border-gray-600"}),t.media.videoUrl&&N.jsx("video",{src:t.media.videoUrl,controls:!0,className:"rounded-lg max-w-xs md:max-w-sm h-auto shadow-lg border dark:border-gray-600"}),!t.media.success&&N.jsxs("div",{className:"p-3 rounded-lg border-2 border-dashed border-gray-300 bg-gray-100/50 text-gray-500 dark:border-gray-600 dark:bg-gray-700/30 dark:text-gray-400 flex flex-col items-center justify-center max-w-xs md:max-w-sm",children:[t.media.videoUrl?N.jsx(K2,{className:"w-10 h-10 mb-2 opacity-70"}):N.jsx(T2,{className:"w-10 h-10 mb-2 opacity-70"}),N.jsx("p",{className:"text-sm font-semibold",children:"Media Generation Failed"}),N.jsx("p",{className:"text-xs text-center",children:t.media.model||"Could not generate media."})]})]})]}),N.jsxs("div",{className:"flex items-center justify-start mt-1.5 space-x-3",children:[N.jsx("span",{className:`text-xs ${e.muted}`,children:t.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),typeof t.content=="string"&&t.content.trim()!==""&&N.jsx("button",{onClick:c,title:i?"Copied!":"Copy message",className:"p-1 rounded-full transition-all duration-200 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-700 opacity-0 group-hover:opacity-100",children:i?N.jsx(r2,{className:"w-3.5 h-3.5"}):N.jsx(f2,{className:"w-3.5 h-3.5"})})]})]})]})},VV=({messages:t,isTyping:e,theme:n,personas:i,onPromptClick:r})=>{const a=_e.useRef(null);return _e.useEffect(()=>{var c;(c=a.current)==null||c.scrollIntoView({behavior:"smooth"})},[t,e]),N.jsx("div",{className:"flex-1 overflow-y-auto",children:N.jsxs("div",{className:"max-w-3xl mx-auto p-4",children:[t.length===0&&!e?N.jsx(DV,{theme:n,onPromptClick:r}):t.map(c=>N.jsx(PV,{message:c,theme:n,personas:i},c.id)),e&&N.jsxs("div",{className:"flex items-start gap-3 my-4",children:[N.jsx(Zp,{persona:{name:"Oracle",icon:"🤖",description:"",systemPromptModifier:"",color:"bg-indigo-500"}}),N.jsx("div",{className:`rounded-xl px-4 py-3 shadow-md ${n.card}`,children:N.jsxs("div",{className:"flex items-center space-x-1",children:[N.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0s"}}),N.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),N.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})})]}),N.jsx("div",{ref:a})]})})},LV=({theme:t,selectedAI:e,onSelectAI:n,onClose:i})=>N.jsx("div",{className:"absolute bottom-full mb-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border dark:border-gray-700",children:N.jsxs("div",{className:"p-2",children:[N.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 px-2 mb-1",children:"Choose a model"}),Object.entries(Xn).map(([r,a])=>N.jsxs("button",{onClick:()=>{n(r),i()},className:`w-full flex items-center gap-2 p-2 rounded-md text-sm text-left
                        ${e===r?`font-semibold ${a.color}`:`${t.text} hover:bg-gray-100 dark:hover:bg-gray-700`}`,children:[N.jsx("span",{className:"text-lg",children:a.icon}),N.jsx("span",{children:a.name})]},r))]})}),UV=({input:t,isTyping:e,isListening:n,recognitionAvailable:i,theme:r,selectedAI:a,setInput:c,handleSend:h,startListening:m,setSelectedAI:p})=>{const v=_e.useRef(null),[E,S]=_e.useState(!1);_e.useEffect(()=>{v.current&&(v.current.style.height="auto",v.current.style.height=`${v.current.scrollHeight}px`)},[t]);const I=()=>{t.trim()&&!e&&h()},x=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),I())};return N.jsx("div",{className:"bg-transparent px-4 pb-4 sticky bottom-0",children:N.jsx("div",{className:"max-w-3xl mx-auto",children:N.jsxs("div",{className:"relative",children:[E&&N.jsx(LV,{theme:r,selectedAI:a,onSelectAI:p,onClose:()=>S(!1)}),N.jsxs("div",{className:`relative flex items-center ${r.card} border dark:border-gray-600 rounded-2xl shadow-lg`,children:[N.jsxs("button",{onClick:()=>S(O=>!O),className:"p-3 rounded-full transition-all duration-200 flex items-center gap-1 hover:bg-gray-200 dark:hover:bg-gray-700",children:[N.jsx("span",{className:"text-lg",children:Xn[a].icon}),N.jsx(a2,{size:16,className:`transition-transform duration-200 ${E?"rotate-0":"rotate-180"}`})]}),N.jsx("textarea",{ref:v,value:t,onChange:O=>c(O.target.value),onKeyDown:x,placeholder:`Ask ${Xn[a].name}...`,className:`w-full max-h-48 bg-transparent p-3 resize-none border-none focus:ring-0 ${r.text} placeholder-gray-500 dark:placeholder-gray-400`,rows:1,disabled:e}),N.jsx("button",{onClick:I,disabled:!t.trim()||e,title:"Send Message",className:`p-3 mr-2 rounded-full transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed
                         text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-500`,children:N.jsx(V2,{className:"w-5 h-5"})})]})]})})})};var y0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},OV=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=t[n++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=t[n++],c=t[n++],h=t[n++],m=((r&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const a=t[n++],c=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return e.join("")},US={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const a=t[r],c=r+1<t.length,h=c?t[r+1]:0,m=r+2<t.length,p=m?t[r+2]:0,v=a>>2,E=(a&3)<<4|h>>4;let S=(h&15)<<2|p>>6,I=p&63;m||(I=64,c||(S=64)),i.push(n[v],n[E],n[S],n[I])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(LS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const a=n[t.charAt(r++)],h=r<t.length?n[t.charAt(r)]:0;++r;const p=r<t.length?n[t.charAt(r)]:64;++r;const E=r<t.length?n[t.charAt(r)]:64;if(++r,a==null||h==null||p==null||E==null)throw new BV;const S=a<<2|h>>4;if(i.push(S),p!==64){const I=h<<4&240|p>>2;if(i.push(I),E!==64){const x=p<<6&192|E;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FV=function(t){const e=LS(t);return US.encodeByteArray(e,!0)},Pf=function(t){return FV(t).replace(/\./g,"")},OS=function(t){try{return US.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=()=>qV().__FIREBASE_DEFAULTS__,zV=()=>{if(typeof process>"u"||typeof y0>"u")return;const t=y0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&OS(t[1]);return e&&JSON.parse(e)},td=()=>{try{return GV()||zV()||HV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BS=t=>{var e,n;return(n=(e=td())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$V=t=>{const e=BS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},FS=()=>{var t;return(t=td())===null||t===void 0?void 0:t.config},qS=t=>{var e;return(e=td())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Pf(JSON.stringify(n)),Pf(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(In())}function QV(){var t;const e=(t=td())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ZV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jV(){const t=In();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eL(){return!QV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tL(){try{return typeof indexedDB=="object"}catch{return!1}}function nL(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var a;e(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="FirebaseError";class Go extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=iL,Object.setPrototypeOf(this,Go.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,a=this.errors[e],c=a?oL(a,i):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new Go(r,h,i)}}function oL(t,e){return t.replace(rL,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const rL=/\{\$([^}]+)}/g;function sL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vf(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const a=t[r],c=e[r];if(v0(a)&&v0(c)){if(!Vf(a,c))return!1}else if(a!==c)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function v0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function aL(t,e){const n=new lL(t,e);return n.subscribe.bind(n)}class lL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");uL(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=wp),r.error===void 0&&(r.error=wp),r.complete===void 0&&(r.complete=wp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t){return t&&t._delegate?t._delegate:t}class _s{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new YV;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dL(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&c.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(r,a);const c=this.instances.get(r);return c&&e(c,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:fL(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fL(t){return t===hs?void 0:t}function dL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ze||(Ze={}));const pL={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},mL=Ze.INFO,gL={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},yL=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=gL[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Um{constructor(e){this.name=e,this._logLevel=mL,this._logHandler=yL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const vL=(t,e)=>e.some(n=>t instanceof n);let _0,T0;function _L(){return _0||(_0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TL(){return T0||(T0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GS=new WeakMap,jp=new WeakMap,zS=new WeakMap,Ip=new WeakMap,Om=new WeakMap;function EL(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(wr(t.result)),r()},c=()=>{i(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&GS.set(n,t)}).catch(()=>{}),Om.set(e,t),e}function SL(t){if(jp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),r()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});jp.set(t,e)}let em={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AL(t){em=t(em)}function CL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Rp(this),e,...n);return zS.set(i,e.sort?e.sort():[e]),wr(i)}:TL().includes(t)?function(...e){return t.apply(Rp(this),e),wr(GS.get(this))}:function(...e){return wr(t.apply(Rp(this),e))}}function wL(t){return typeof t=="function"?CL(t):(t instanceof IDBTransaction&&SL(t),vL(t,_L())?new Proxy(t,em):t)}function wr(t){if(t instanceof IDBRequest)return EL(t);if(Ip.has(t))return Ip.get(t);const e=wL(t);return e!==t&&(Ip.set(t,e),Om.set(e,t)),e}const Rp=t=>Om.get(t);function IL(t,e,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const c=indexedDB.open(t,e),h=wr(c);return i&&c.addEventListener("upgradeneeded",m=>{i(wr(c.result),m.oldVersion,m.newVersion,wr(c.transaction),m)}),n&&c.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),h.then(m=>{a&&m.addEventListener("close",()=>a()),r&&m.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const RL=["get","getKey","getAll","getAllKeys","count"],xL=["put","add","delete","clear"],xp=new Map;function E0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xp.get(e))return xp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=xL.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||RL.includes(n)))return;const a=async function(c,...h){const m=this.transaction(c,r?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),r&&m.done]))[0]};return xp.set(e,a),a}AL(t=>({...t,get:(e,n,i)=>E0(e,n)||t.get(e,n,i),has:(e,n)=>!!E0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ML(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function ML(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tm="@firebase/app",S0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=new Um("@firebase/app"),NL="@firebase/app-compat",kL="@firebase/analytics-compat",DL="@firebase/analytics",PL="@firebase/app-check-compat",VL="@firebase/app-check",LL="@firebase/auth",UL="@firebase/auth-compat",OL="@firebase/database",BL="@firebase/data-connect",FL="@firebase/database-compat",qL="@firebase/functions",GL="@firebase/functions-compat",zL="@firebase/installations",HL="@firebase/installations-compat",$L="@firebase/messaging",YL="@firebase/messaging-compat",KL="@firebase/performance",JL="@firebase/performance-compat",QL="@firebase/remote-config",XL="@firebase/remote-config-compat",WL="@firebase/storage",ZL="@firebase/storage-compat",jL="@firebase/firestore",eU="@firebase/vertexai-preview",tU="@firebase/firestore-compat",nU="firebase",iU="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="[DEFAULT]",oU={[tm]:"fire-core",[NL]:"fire-core-compat",[DL]:"fire-analytics",[kL]:"fire-analytics-compat",[VL]:"fire-app-check",[PL]:"fire-app-check-compat",[LL]:"fire-auth",[UL]:"fire-auth-compat",[OL]:"fire-rtdb",[BL]:"fire-data-connect",[FL]:"fire-rtdb-compat",[qL]:"fire-fn",[GL]:"fire-fn-compat",[zL]:"fire-iid",[HL]:"fire-iid-compat",[$L]:"fire-fcm",[YL]:"fire-fcm-compat",[KL]:"fire-perf",[JL]:"fire-perf-compat",[QL]:"fire-rc",[XL]:"fire-rc-compat",[WL]:"fire-gcs",[ZL]:"fire-gcs-compat",[jL]:"fire-fst",[tU]:"fire-fst-compat",[eU]:"fire-vertex","fire-js":"fire-js",[nU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=new Map,rU=new Map,im=new Map;function A0(t,e){try{t.container.addComponent(e)}catch(n){Lo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ka(t){const e=t.name;if(im.has(e))return Lo.debug(`There were multiple attempts to register component ${e}.`),!1;im.set(e,t);for(const n of gu.values())A0(n,t);for(const n of rU.values())A0(n,t);return!0}function Bm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ir=new xu("app","Firebase",sU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=iU;function HS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:nm,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Ir.create("bad-app-name",{appName:String(r)});if(n||(n=FS()),!n)throw Ir.create("no-options");const a=gu.get(r);if(a){if(Vf(n,a.options)&&Vf(i,a.config))return a;throw Ir.create("duplicate-app",{appName:r})}const c=new hL(r);for(const m of im.values())c.addComponent(m);const h=new aU(n,i,c);return gu.set(r,h),h}function $S(t=nm){const e=gu.get(t);if(!e&&t===nm&&FS())return HS();if(!e)throw Ir.create("no-app",{appName:t});return e}function C0(){return Array.from(gu.values())}function Rr(t,e,n){var i;let r=(i=oU[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const h=[`Unable to register library "${r}" with version "${e}":`];a&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lo.warn(h.join(" "));return}ka(new _s(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU="firebase-heartbeat-database",uU=1,yu="firebase-heartbeat-store";let bp=null;function YS(){return bp||(bp=IL(lU,uU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ir.create("idb-open",{originalErrorMessage:t.message})})),bp}async function cU(t){try{const n=(await YS()).transaction(yu),i=await n.objectStore(yu).get(KS(t));return await n.done,i}catch(e){if(e instanceof Go)Lo.warn(e.message);else{const n=Ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lo.warn(n.message)}}}async function w0(t,e){try{const i=(await YS()).transaction(yu,"readwrite");await i.objectStore(yu).put(e,KS(t)),await i.done}catch(n){if(n instanceof Go)Lo.warn(n.message);else{const i=Ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Lo.warn(i.message)}}}function KS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=1024,dU=720*60*60*1e3;class hU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mU(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=I0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const h=new Date(c.date).valueOf();return Date.now()-h<=dU}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Lo.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=I0(),{heartbeatsToSend:i,unsentEntries:r}=pU(this._heartbeatsCache.heartbeats),a=Pf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Lo.warn(n),""}}}function I0(){return new Date().toISOString().substring(0,10)}function pU(t,e=fU){const n=[];let i=t.slice();for(const r of t){const a=n.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),R0(n)>e){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),R0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class mU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tL()?nL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return w0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return w0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function R0(t){return Pf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(t){ka(new _s("platform-logger",e=>new bL(e),"PRIVATE")),ka(new _s("heartbeat",e=>new hU(e),"PRIVATE")),Rr(tm,S0,t),Rr(tm,S0,"esm2017"),Rr("fire-js","")}gU("");var yU="firebase",vU="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr(yU,vU,"app");function Fm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function JS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _U=JS,QS=new xu("auth","Firebase",JS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=new Um("@firebase/auth");function TU(t,...e){Lf.logLevel<=Ze.WARN&&Lf.warn(`Auth (${$a}): ${t}`,...e)}function _f(t,...e){Lf.logLevel<=Ze.ERROR&&Lf.error(`Auth (${$a}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(t,...e){throw Gm(t,...e)}function Ai(t,...e){return Gm(t,...e)}function qm(t,e,n){const i=Object.assign(Object.assign({},_U()),{[e]:n});return new xu("auth","Firebase",i).create(e,{appName:t.name})}function xr(t){return qm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function EU(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&ji(t,"argument-error"),qm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return QS.create(t,...e)}function Ne(t,e,...n){if(!t)throw Gm(e,...n)}function Do(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _f(e),new Error(e)}function Uo(t,e){t||Do(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function SU(){return x0()==="http:"||x0()==="https:"}function x0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SU()||WV()||"connection"in navigator)?navigator.onLine:!0}function CU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Uo(n>e,"Short delay should be less than long delay!"),this.isMobile=JV()||ZV()}get(){return AU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t,e){Uo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Do("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Do("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Do("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU=new Mu(3e4,6e4);function nd(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ya(t,e,n,i,r={}){return WS(t,r,async()=>{let a={},c={};i&&(e==="GET"?c=i:a={body:JSON.stringify(i)});const h=bu(Object.assign({key:t.config.apiKey},c)).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:m},a);return XV()||(p.referrerPolicy="no-referrer"),XS.fetch()(jS(t,t.config.apiHost,n,h),p)})}async function WS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},wU),e);try{const r=new RU(t),a=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw uf(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const h=a.ok?c.errorMessage:c.error.message,[m,p]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw uf(t,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw uf(t,"email-already-in-use",c);if(m==="USER_DISABLED")throw uf(t,"user-disabled",c);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw qm(t,v,p);ji(t,v)}}catch(r){if(r instanceof Go)throw r;ji(t,"network-request-failed",{message:String(r)})}}async function ZS(t,e,n,i,r={}){const a=await Ya(t,e,n,i,r);return"mfaPendingCredential"in a&&ji(t,"multi-factor-auth-required",{_serverResponse:a}),a}function jS(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?zm(t.config,r):`${t.config.apiScheme}://${r}`}class RU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ai(this.auth,"network-request-failed")),IU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function uf(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ai(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xU(t,e){return Ya(t,"POST","/v1/accounts:delete",e)}async function eA(t,e){return Ya(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bU(t,e=!1){const n=yn(t),i=await n.getIdToken(e),r=Hm(i);Ne(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:cu(Mp(r.auth_time)),issuedAtTime:cu(Mp(r.iat)),expirationTime:cu(Mp(r.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Mp(t){return Number(t)*1e3}function Hm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return _f("JWT malformed, contained fewer than 3 sections"),null;try{const r=OS(n);return r?JSON.parse(r):(_f("Failed to decode base64 JWT payload"),null)}catch(r){return _f("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function b0(t){const e=Hm(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Go&&MU(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function MU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cu(this.lastLoginAt),this.creationTime=cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uf(t){var e;const n=t.auth,i=await t.getIdToken(),r=await vu(t,eA(n,{idToken:i}));Ne(r==null?void 0:r.users.length,n,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?tA(a.providerUserInfo):[],h=DU(t.providerData,c),m=t.isAnonymous,p=!(t.email&&a.passwordHash)&&!(h!=null&&h.length),v=m?p:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new rm(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(t,E)}async function kU(t){const e=yn(t);await Uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DU(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function tA(t){return t.map(e=>{var{providerId:n}=e,i=Fm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(t,e){const n=await WS(t,{},async()=>{const i=bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=t.config,c=jS(t,r,"/v1/token",`key=${a}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",XS.fetch()(c,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VU(t,e){return Ya(t,"POST","/v2/accounts:revokeToken",nd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):b0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const n=b0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:a}=await PU(e,n);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:a}=n,c=new xa;return i&&(Ne(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),r&&(Ne(typeof r=="string","internal-error",{appName:e}),c.accessToken=r),a&&(Ne(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xa,this.toJSON())}_performRefresh(){return Do("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Po{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,a=Fm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new rm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await vu(this,this.stsTokenManager.getToken(this.auth,e));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bU(this,e)}reload(){return kU(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Po(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Uf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qi(this.auth.app))return Promise.reject(xr(this.auth));const e=await this.getIdToken();return await vu(this,xU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,a,c,h,m,p,v;const E=(i=n.displayName)!==null&&i!==void 0?i:void 0,S=(r=n.email)!==null&&r!==void 0?r:void 0,I=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,x=(c=n.photoURL)!==null&&c!==void 0?c:void 0,O=(h=n.tenantId)!==null&&h!==void 0?h:void 0,F=(m=n._redirectEventId)!==null&&m!==void 0?m:void 0,re=(p=n.createdAt)!==null&&p!==void 0?p:void 0,te=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:ne,emailVerified:ce,isAnonymous:se,providerData:me,stsTokenManager:D}=n;Ne(ne&&D,e,"internal-error");const M=xa.fromJSON(this.name,D);Ne(typeof ne=="string",e,"internal-error"),_r(E,e.name),_r(S,e.name),Ne(typeof ce=="boolean",e,"internal-error"),Ne(typeof se=="boolean",e,"internal-error"),_r(I,e.name),_r(x,e.name),_r(O,e.name),_r(F,e.name),_r(re,e.name),_r(te,e.name);const b=new Po({uid:ne,auth:e,email:S,emailVerified:ce,displayName:E,isAnonymous:se,photoURL:x,phoneNumber:I,tenantId:O,stsTokenManager:M,createdAt:re,lastLoginAt:te});return me&&Array.isArray(me)&&(b.providerData=me.map(L=>Object.assign({},L))),F&&(b._redirectEventId=F),b}static async _fromIdTokenResponse(e,n,i=!1){const r=new xa;r.updateFromServerResponse(n);const a=new Po({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Uf(a),a}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Ne(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?tA(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),h=new xa;h.updateFromIdToken(i);const m=new Po({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:c}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new rm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=new Map;function Vo(t){Uo(t instanceof Function,"Expected a class definition");let e=M0.get(t);return e?(Uo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,M0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nA.type="NONE";const N0=nA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t,e,n){return`firebase:${t}:${e}:${n}`}class ba{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=Tf(this.userKey,r.apiKey,a),this.fullPersistenceKey=Tf("persistence",r.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Po._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ba(Vo(N0),e,i);const r=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=r[0]||Vo(N0);const c=Tf(i,e.config.apiKey,e.name);let h=null;for(const p of n)try{const v=await p._get(c);if(v){const E=Po._fromJSON(e,v);p!==a&&(h=E),a=p;break}}catch{}const m=r.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new ba(a,e,i):(a=m[0],h&&await a._set(c,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(c)}catch{}})),new ba(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lA(e))return"Blackberry";if(uA(e))return"Webos";if(oA(e))return"Safari";if((e.includes("chrome/")||rA(e))&&!e.includes("edge/"))return"Chrome";if(aA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function iA(t=In()){return/firefox\//i.test(t)}function oA(t=In()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rA(t=In()){return/crios\//i.test(t)}function sA(t=In()){return/iemobile/i.test(t)}function aA(t=In()){return/android/i.test(t)}function lA(t=In()){return/blackberry/i.test(t)}function uA(t=In()){return/webos/i.test(t)}function $m(t=In()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function LU(t=In()){var e;return $m(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UU(){return jV()&&document.documentMode===10}function cA(t=In()){return $m(t)||aA(t)||uA(t)||lA(t)||/windows phone/i.test(t)||sA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t,e=[]){let n;switch(t){case"Browser":n=k0(In());break;case"Worker":n=`${k0(In())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$a}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((c,h)=>{try{const m=e(a);c(m)}catch(m){h(m)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BU(t,e={}){return Ya(t,"GET","/v2/passwordPolicy",nd(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=6;class qU{constructor(e){var n,i,r,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:FU,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,a,c,h;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(n=m.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(r=m.containsLowercaseLetter)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(a=m.containsUppercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(h=m.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),m}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D0(this),this.idTokenSubscription=new D0(this),this.beforeStateQueue=new OU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vo(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await ba.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await eA(this,{idToken:e}),i=await Po._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===h)&&(m!=null&&m.user)&&(r=m.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Uf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qi(this.app))return Promise.reject(xr(this));const n=e?yn(e):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qi(this.app)?Promise.reject(xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qi(this.app)?Promise.reject(xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BU(this),n=new qU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await VU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vo(e)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await ba.create(this,[Vo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(h,this,"internal-error"),h.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,i,r);return()=>{c=!0,m()}}else{const m=e.addObserver(n);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&TU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Nu(t){return yn(t)}class D0{constructor(e){this.auth=e,this.observer=null,this.addObserver=aL(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ym={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zU(t){Ym=t}function HU(t){return Ym.loadJS(t)}function $U(){return Ym.gapiScript}function YU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(t,e){const n=Bm(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),a=n.getOptions();if(Vf(a,e??{}))return r;ji(r,"already-initialized")}return n.initialize({options:e})}function JU(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Vo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function QU(t,e,n){const i=Nu(t);Ne(i._canInitEmulator,i,"emulator-config-failed"),Ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=dA(e),{host:c,port:h}=XU(e),m=h===null?"":`:${h}`;i.config.emulator={url:`${a}//${c}${m}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:c,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})}),WU()}function dA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function XU(t){const e=dA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:P0(i.substr(a.length+1))}}else{const[a,c]=i.split(":");return{host:a,port:P0(c)}}}function P0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Do("not implemented")}_getIdTokenResponse(e){return Do("not implemented")}_linkToIdToken(e,n){return Do("not implemented")}_getReauthenticationResolver(e){return Do("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(t,e){return ZS(t,"POST","/v1/accounts:signInWithIdp",nd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU="http://localhost";class Oo extends hA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ji("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,a=Fm(n,["providerId","signInMethod"]);if(!i||!r)return null;const c=new Oo(i,r);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Ma(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ma(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ma(e,n)}buildRequest(){const e={requestUri:ZU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends Km{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fu extends Ka{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Ne("providerId"in n&&"signInMethod"in n,"argument-error"),Oo._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Ne(e.idToken||e.accessToken,"argument-error"),Oo._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return fu.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return fu.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:a,nonce:c,providerId:h}=e;if(!i&&!r&&!n&&!a||!h)return null;try{return new fu(h)._credential({idToken:n,accessToken:i,nonce:c,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Ka{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Ka{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oo._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Mo.credential(n,i)}catch{return null}}}Mo.GOOGLE_SIGN_IN_METHOD="google.com";Mo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Ka{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com";Er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Ka{constructor(){super("twitter.com")}static credential(e,n){return Oo._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Sr.credential(n,i)}catch{return null}}}Sr.TWITTER_SIGN_IN_METHOD="twitter.com";Sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jU(t,e){return ZS(t,"POST","/v1/accounts:signUp",nd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const a=await Po._fromIdTokenResponse(e,i,r),c=V0(i);return new Nr({user:a,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=V0(i);return new Nr({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function V0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eO(t){var e;if(Qi(t.app))return Promise.reject(xr(t));const n=Nu(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Nr({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await jU(n,{returnSecureToken:!0}),r=await Nr._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of extends Go{constructor(e,n,i,r){var a;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Of.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Of(e,n,i,r)}}function pA(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Of._fromErrorAndOperation(t,a,e,i):a})}async function tO(t,e,n=!1){const i=await vu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Nr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(t,e,n=!1){const{auth:i}=t;if(Qi(i.app))return Promise.reject(xr(i));const r="reauthenticate";try{const a=await vu(t,pA(i,r,e,t),n);Ne(a.idToken,i,"internal-error");const c=Hm(a.idToken);Ne(c,i,"internal-error");const{sub:h}=c;return Ne(t.uid===h,i,"user-mismatch"),Nr._forOperation(t,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ji(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO(t,e,n=!1){if(Qi(t.app))return Promise.reject(xr(t));const i="signIn",r=await pA(t,i,e),a=await Nr._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(a.user),a}function oO(t,e,n,i){return yn(t).onIdTokenChanged(e,n,i)}function rO(t,e,n){return yn(t).beforeAuthStateChanged(e,n)}function sO(t,e,n,i){return yn(t).onAuthStateChanged(e,n,i)}function aO(t){return yn(t).signOut()}const Bf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bf,"1"),this.storage.removeItem(Bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=1e3,uO=10;class gA extends mA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);UU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,uO):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},lO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gA.type="LOCAL";const cO=gA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA extends mA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yA.type="SESSION";const vA=yA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new id(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:a}=n.data,c=this.handlersMap[r];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(c).map(async p=>p(n.origin,a)),m=await fO(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}id.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,c;return new Promise((h,m)=>{const p=Jm("",20);r.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(E){const S=E;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(S.data.response);break;default:clearTimeout(v),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(){return window}function hO(t){Xi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(){return typeof Xi().WorkerGlobalScope<"u"&&typeof Xi().importScripts=="function"}async function pO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function gO(){return _A()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="firebaseLocalStorageDb",yO=1,Ff="firebaseLocalStorage",EA="fbase_key";class ku{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function od(t,e){return t.transaction([Ff],e?"readwrite":"readonly").objectStore(Ff)}function vO(){const t=indexedDB.deleteDatabase(TA);return new ku(t).toPromise()}function sm(){const t=indexedDB.open(TA,yO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ff,{keyPath:EA})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ff)?e(i):(i.close(),await vO(),e(await sm()))})})}async function L0(t,e,n){const i=od(t,!0).put({[EA]:e,value:n});return new ku(i).toPromise()}async function _O(t,e){const n=od(t,!1).get(e),i=await new ku(n).toPromise();return i===void 0?null:i.value}function U0(t,e){const n=od(t,!0).delete(e);return new ku(n).toPromise()}const TO=800,EO=3;class SA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>EO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _A()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=id._getInstance(gO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await pO(),!this.activeServiceWorker)return;this.sender=new dO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sm();return await L0(e,Bf,"1"),await U0(e,Bf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>L0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>_O(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>U0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=od(r,!1).getAll();return new ku(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SA.type="LOCAL";const SO=SA;new Mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t,e){return e?Vo(e):(Ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm extends hA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ma(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ma(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function AO(t){return iO(t.auth,new Qm(t),t.bypassAuthState)}function CO(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),nO(n,new Qm(t),t.bypassAuthState)}async function wO(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),tO(n,new Qm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:a,error:c,type:h}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AO;case"linkViaPopup":case"linkViaRedirect":return wO;case"reauthViaPopup":case"reauthViaRedirect":return CO;default:ji(this.auth,"internal-error")}}resolve(e){Uo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Uo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=new Mu(2e3,1e4);async function wA(t,e,n){if(Qi(t.app))return Promise.reject(Ai(t,"operation-not-supported-in-this-environment"));const i=Nu(t);EU(t,e,Km);const r=AA(i,n);return new ps(i,"signInViaPopup",e,r).executeNotNull()}class ps extends CA{constructor(e,n,i,r,a){super(e,n,r,a),this.provider=i,this.authWindow=null,this.pollId=null,ps.currentPopupAction&&ps.currentPopupAction.cancel(),ps.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Uo(this.filter.length===1,"Popup operations only handle one event");const e=Jm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ps.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IO.get())};e()}}ps.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="pendingRedirect",Ef=new Map;class xO extends CA{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ef.get(this.auth._key());if(!e){try{const i=await bO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ef.set(this.auth._key(),e)}return this.bypassAuthState||Ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bO(t,e){const n=kO(e),i=NO(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function MO(t,e){Ef.set(t._key(),e)}function NO(t){return Vo(t._redirectPersistence)}function kO(t){return Tf(RO,t.config.apiKey,t.name)}async function DO(t,e,n=!1){if(Qi(t.app))return Promise.reject(xr(t));const i=Nu(t),r=AA(i,e),c=await new xO(i,r,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=600*1e3;class VO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!IA(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ai(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PO&&this.cachedEventUids.clear(),this.cachedEventUids.has(O0(e))}saveEventToCache(e){this.cachedEventUids.add(O0(e)),this.lastProcessedEventTime=Date.now()}}function O0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function IA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(t,e={}){return Ya(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BO=/^https?/;async function FO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await UO(t);for(const n of e)try{if(qO(n))return}catch{}ji(t,"unauthorized-domain")}function qO(t){const e=om(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!BO.test(n))return!1;if(OO.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=new Mu(3e4,6e4);function B0(){const t=Xi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function zO(t){return new Promise((e,n)=>{var i,r,a;function c(){B0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B0(),n(Ai(t,"network-request-failed"))},timeout:GO.get()})}if(!((r=(i=Xi().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((a=Xi().gapi)===null||a===void 0)&&a.load)c();else{const h=YU("iframefcb");return Xi()[h]=()=>{gapi.load?c():n(Ai(t,"network-request-failed"))},HU(`${$U()}?onload=${h}`).catch(m=>n(m))}}).catch(e=>{throw Sf=null,e})}let Sf=null;function HO(t){return Sf=Sf||zO(t),Sf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new Mu(5e3,15e3),YO="__/auth/iframe",KO="emulator/auth/iframe",JO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XO(t){const e=t.config;Ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zm(e,KO):`https://${t.config.authDomain}/${YO}`,i={apiKey:e.apiKey,appName:t.name,v:$a},r=QO.get(t.config.apiHost);r&&(i.eid=r);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${bu(i).slice(1)}`}async function WO(t){const e=await HO(t),n=Xi().gapi;return Ne(n,t,"internal-error"),e.open({where:document.body,url:XO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JO,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const c=Ai(t,"network-request-failed"),h=Xi().setTimeout(()=>{a(c)},$O.get());function m(){Xi().clearTimeout(h),r(i)}i.ping(m).then(m,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jO=500,e4=600,t4="_blank",n4="http://localhost";class F0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function i4(t,e,n,i=jO,r=e4){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const m=Object.assign(Object.assign({},ZO),{width:i.toString(),height:r.toString(),top:a,left:c}),p=In().toLowerCase();n&&(h=rA(p)?t4:n),iA(p)&&(e=e||n4,m.scrollbars="yes");const v=Object.entries(m).reduce((S,[I,x])=>`${S}${I}=${x},`,"");if(LU(p)&&h!=="_self")return o4(e||"",h),new F0(null);const E=window.open(e||"",h,v);Ne(E,t,"popup-blocked");try{E.focus()}catch{}return new F0(E)}function o4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4="__/auth/handler",s4="emulator/auth/handler",a4=encodeURIComponent("fac");async function q0(t,e,n,i,r,a){Ne(t.config.authDomain,t,"auth-domain-config-required"),Ne(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:$a,eventId:r};if(e instanceof Km){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",sL(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof Ka){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}t.tenantId&&(c.tid=t.tenantId);const h=c;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const m=await t._getAppCheckToken(),p=m?`#${a4}=${encodeURIComponent(m)}`:"";return`${l4(t)}?${bu(h).slice(1)}${p}`}function l4({config:t}){return t.emulator?zm(t,s4):`https://${t.authDomain}/${r4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="webStorageSupport";class u4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vA,this._completeRedirectFn=DO,this._overrideRedirectResult=MO}async _openPopup(e,n,i,r){var a;Uo((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await q0(e,n,i,om(),r);return i4(e,c,Jm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const a=await q0(e,n,i,om(),r);return hO(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:a}=this.eventManagers[n];return r?Promise.resolve(r):(Uo(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await WO(e),i=new VO(e);return n.register("authEvent",r=>(Ne(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Np,{type:Np},r=>{var a;const c=(a=r==null?void 0:r[0])===null||a===void 0?void 0:a[Np];c!==void 0&&n(!!c),ji(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cA()||oA()||$m()}}const c4=u4;var G0="@firebase/auth",z0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h4(t){ka(new _s("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;Ne(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fA(t)},p=new GU(i,r,a,m);return JU(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ka(new _s("auth-internal",e=>{const n=Nu(e.getProvider("auth").getImmediate());return(i=>new f4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rr(G0,z0,d4(t)),Rr(G0,z0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=300,m4=qS("authIdTokenMaxAge")||p4;let H0=null;const g4=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>m4)return;const r=n==null?void 0:n.token;H0!==r&&(H0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function y4(t=$S()){const e=Bm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=KU(t,{popupRedirectResolver:c4,persistence:[SO,cO,vA]}),i=qS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const c=g4(a.toString());rO(n,c,()=>c(n.currentUser)),oO(n,h=>c(h))}}const r=BS("auth");return r&&QU(n,`http://${r}`),n}function v4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}zU({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const a=Ai("internal-error");a.customData=r,n(a)},i.type="text/javascript",i.charset="UTF-8",v4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h4("Browser");var $0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gs,RA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,M){function b(){}b.prototype=M.prototype,D.D=M.prototype,D.prototype=new b,D.prototype.constructor=D,D.C=function(L,k,q){for(var V=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)V[Et-2]=arguments[Et];return M.prototype[k].apply(L,V)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,M,b){b||(b=0);var L=Array(16);if(typeof M=="string")for(var k=0;16>k;++k)L[k]=M.charCodeAt(b++)|M.charCodeAt(b++)<<8|M.charCodeAt(b++)<<16|M.charCodeAt(b++)<<24;else for(k=0;16>k;++k)L[k]=M[b++]|M[b++]<<8|M[b++]<<16|M[b++]<<24;M=D.g[0],b=D.g[1],k=D.g[2];var q=D.g[3],V=M+(q^b&(k^q))+L[0]+3614090360&4294967295;M=b+(V<<7&4294967295|V>>>25),V=q+(k^M&(b^k))+L[1]+3905402710&4294967295,q=M+(V<<12&4294967295|V>>>20),V=k+(b^q&(M^b))+L[2]+606105819&4294967295,k=q+(V<<17&4294967295|V>>>15),V=b+(M^k&(q^M))+L[3]+3250441966&4294967295,b=k+(V<<22&4294967295|V>>>10),V=M+(q^b&(k^q))+L[4]+4118548399&4294967295,M=b+(V<<7&4294967295|V>>>25),V=q+(k^M&(b^k))+L[5]+1200080426&4294967295,q=M+(V<<12&4294967295|V>>>20),V=k+(b^q&(M^b))+L[6]+2821735955&4294967295,k=q+(V<<17&4294967295|V>>>15),V=b+(M^k&(q^M))+L[7]+4249261313&4294967295,b=k+(V<<22&4294967295|V>>>10),V=M+(q^b&(k^q))+L[8]+1770035416&4294967295,M=b+(V<<7&4294967295|V>>>25),V=q+(k^M&(b^k))+L[9]+2336552879&4294967295,q=M+(V<<12&4294967295|V>>>20),V=k+(b^q&(M^b))+L[10]+4294925233&4294967295,k=q+(V<<17&4294967295|V>>>15),V=b+(M^k&(q^M))+L[11]+2304563134&4294967295,b=k+(V<<22&4294967295|V>>>10),V=M+(q^b&(k^q))+L[12]+1804603682&4294967295,M=b+(V<<7&4294967295|V>>>25),V=q+(k^M&(b^k))+L[13]+4254626195&4294967295,q=M+(V<<12&4294967295|V>>>20),V=k+(b^q&(M^b))+L[14]+2792965006&4294967295,k=q+(V<<17&4294967295|V>>>15),V=b+(M^k&(q^M))+L[15]+1236535329&4294967295,b=k+(V<<22&4294967295|V>>>10),V=M+(k^q&(b^k))+L[1]+4129170786&4294967295,M=b+(V<<5&4294967295|V>>>27),V=q+(b^k&(M^b))+L[6]+3225465664&4294967295,q=M+(V<<9&4294967295|V>>>23),V=k+(M^b&(q^M))+L[11]+643717713&4294967295,k=q+(V<<14&4294967295|V>>>18),V=b+(q^M&(k^q))+L[0]+3921069994&4294967295,b=k+(V<<20&4294967295|V>>>12),V=M+(k^q&(b^k))+L[5]+3593408605&4294967295,M=b+(V<<5&4294967295|V>>>27),V=q+(b^k&(M^b))+L[10]+38016083&4294967295,q=M+(V<<9&4294967295|V>>>23),V=k+(M^b&(q^M))+L[15]+3634488961&4294967295,k=q+(V<<14&4294967295|V>>>18),V=b+(q^M&(k^q))+L[4]+3889429448&4294967295,b=k+(V<<20&4294967295|V>>>12),V=M+(k^q&(b^k))+L[9]+568446438&4294967295,M=b+(V<<5&4294967295|V>>>27),V=q+(b^k&(M^b))+L[14]+3275163606&4294967295,q=M+(V<<9&4294967295|V>>>23),V=k+(M^b&(q^M))+L[3]+4107603335&4294967295,k=q+(V<<14&4294967295|V>>>18),V=b+(q^M&(k^q))+L[8]+1163531501&4294967295,b=k+(V<<20&4294967295|V>>>12),V=M+(k^q&(b^k))+L[13]+2850285829&4294967295,M=b+(V<<5&4294967295|V>>>27),V=q+(b^k&(M^b))+L[2]+4243563512&4294967295,q=M+(V<<9&4294967295|V>>>23),V=k+(M^b&(q^M))+L[7]+1735328473&4294967295,k=q+(V<<14&4294967295|V>>>18),V=b+(q^M&(k^q))+L[12]+2368359562&4294967295,b=k+(V<<20&4294967295|V>>>12),V=M+(b^k^q)+L[5]+4294588738&4294967295,M=b+(V<<4&4294967295|V>>>28),V=q+(M^b^k)+L[8]+2272392833&4294967295,q=M+(V<<11&4294967295|V>>>21),V=k+(q^M^b)+L[11]+1839030562&4294967295,k=q+(V<<16&4294967295|V>>>16),V=b+(k^q^M)+L[14]+4259657740&4294967295,b=k+(V<<23&4294967295|V>>>9),V=M+(b^k^q)+L[1]+2763975236&4294967295,M=b+(V<<4&4294967295|V>>>28),V=q+(M^b^k)+L[4]+1272893353&4294967295,q=M+(V<<11&4294967295|V>>>21),V=k+(q^M^b)+L[7]+4139469664&4294967295,k=q+(V<<16&4294967295|V>>>16),V=b+(k^q^M)+L[10]+3200236656&4294967295,b=k+(V<<23&4294967295|V>>>9),V=M+(b^k^q)+L[13]+681279174&4294967295,M=b+(V<<4&4294967295|V>>>28),V=q+(M^b^k)+L[0]+3936430074&4294967295,q=M+(V<<11&4294967295|V>>>21),V=k+(q^M^b)+L[3]+3572445317&4294967295,k=q+(V<<16&4294967295|V>>>16),V=b+(k^q^M)+L[6]+76029189&4294967295,b=k+(V<<23&4294967295|V>>>9),V=M+(b^k^q)+L[9]+3654602809&4294967295,M=b+(V<<4&4294967295|V>>>28),V=q+(M^b^k)+L[12]+3873151461&4294967295,q=M+(V<<11&4294967295|V>>>21),V=k+(q^M^b)+L[15]+530742520&4294967295,k=q+(V<<16&4294967295|V>>>16),V=b+(k^q^M)+L[2]+3299628645&4294967295,b=k+(V<<23&4294967295|V>>>9),V=M+(k^(b|~q))+L[0]+4096336452&4294967295,M=b+(V<<6&4294967295|V>>>26),V=q+(b^(M|~k))+L[7]+1126891415&4294967295,q=M+(V<<10&4294967295|V>>>22),V=k+(M^(q|~b))+L[14]+2878612391&4294967295,k=q+(V<<15&4294967295|V>>>17),V=b+(q^(k|~M))+L[5]+4237533241&4294967295,b=k+(V<<21&4294967295|V>>>11),V=M+(k^(b|~q))+L[12]+1700485571&4294967295,M=b+(V<<6&4294967295|V>>>26),V=q+(b^(M|~k))+L[3]+2399980690&4294967295,q=M+(V<<10&4294967295|V>>>22),V=k+(M^(q|~b))+L[10]+4293915773&4294967295,k=q+(V<<15&4294967295|V>>>17),V=b+(q^(k|~M))+L[1]+2240044497&4294967295,b=k+(V<<21&4294967295|V>>>11),V=M+(k^(b|~q))+L[8]+1873313359&4294967295,M=b+(V<<6&4294967295|V>>>26),V=q+(b^(M|~k))+L[15]+4264355552&4294967295,q=M+(V<<10&4294967295|V>>>22),V=k+(M^(q|~b))+L[6]+2734768916&4294967295,k=q+(V<<15&4294967295|V>>>17),V=b+(q^(k|~M))+L[13]+1309151649&4294967295,b=k+(V<<21&4294967295|V>>>11),V=M+(k^(b|~q))+L[4]+4149444226&4294967295,M=b+(V<<6&4294967295|V>>>26),V=q+(b^(M|~k))+L[11]+3174756917&4294967295,q=M+(V<<10&4294967295|V>>>22),V=k+(M^(q|~b))+L[2]+718787259&4294967295,k=q+(V<<15&4294967295|V>>>17),V=b+(q^(k|~M))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+M&4294967295,D.g[1]=D.g[1]+(k+(V<<21&4294967295|V>>>11))&4294967295,D.g[2]=D.g[2]+k&4294967295,D.g[3]=D.g[3]+q&4294967295}i.prototype.u=function(D,M){M===void 0&&(M=D.length);for(var b=M-this.blockSize,L=this.B,k=this.h,q=0;q<M;){if(k==0)for(;q<=b;)r(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<M;)if(L[k++]=D.charCodeAt(q++),k==this.blockSize){r(this,L),k=0;break}}else for(;q<M;)if(L[k++]=D[q++],k==this.blockSize){r(this,L),k=0;break}}this.h=k,this.o+=M},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var M=1;M<D.length-8;++M)D[M]=0;var b=8*this.o;for(M=D.length-8;M<D.length;++M)D[M]=b&255,b/=256;for(this.u(D),D=Array(16),M=b=0;4>M;++M)for(var L=0;32>L;L+=8)D[b++]=this.g[M]>>>L&255;return D};function a(D,M){var b=h;return Object.prototype.hasOwnProperty.call(b,D)?b[D]:b[D]=M(D)}function c(D,M){this.h=M;for(var b=[],L=!0,k=D.length-1;0<=k;k--){var q=D[k]|0;L&&q==M||(b[k]=q,L=!1)}this.g=b}var h={};function m(D){return-128<=D&&128>D?a(D,function(M){return new c([M|0],0>M?-1:0)}):new c([D|0],0>D?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return E;if(0>D)return F(p(-D));for(var M=[],b=1,L=0;D>=b;L++)M[L]=D/b|0,b*=4294967296;return new c(M,0)}function v(D,M){if(D.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(D.charAt(0)=="-")return F(v(D.substring(1),M));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=p(Math.pow(M,8)),L=E,k=0;k<D.length;k+=8){var q=Math.min(8,D.length-k),V=parseInt(D.substring(k,k+q),M);8>q?(q=p(Math.pow(M,q)),L=L.j(q).add(p(V))):(L=L.j(b),L=L.add(p(V)))}return L}var E=m(0),S=m(1),I=m(16777216);t=c.prototype,t.m=function(){if(O(this))return-F(this).m();for(var D=0,M=1,b=0;b<this.g.length;b++){var L=this.i(b);D+=(0<=L?L:4294967296+L)*M,M*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(x(this))return"0";if(O(this))return"-"+F(this).toString(D);for(var M=p(Math.pow(D,6)),b=this,L="";;){var k=ce(b,M).g;b=re(b,k.j(M));var q=((0<b.g.length?b.g[0]:b.h)>>>0).toString(D);if(b=k,x(b))return q+L;for(;6>q.length;)q="0"+q;L=q+L}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function x(D){if(D.h!=0)return!1;for(var M=0;M<D.g.length;M++)if(D.g[M]!=0)return!1;return!0}function O(D){return D.h==-1}t.l=function(D){return D=re(this,D),O(D)?-1:x(D)?0:1};function F(D){for(var M=D.g.length,b=[],L=0;L<M;L++)b[L]=~D.g[L];return new c(b,~D.h).add(S)}t.abs=function(){return O(this)?F(this):this},t.add=function(D){for(var M=Math.max(this.g.length,D.g.length),b=[],L=0,k=0;k<=M;k++){var q=L+(this.i(k)&65535)+(D.i(k)&65535),V=(q>>>16)+(this.i(k)>>>16)+(D.i(k)>>>16);L=V>>>16,q&=65535,V&=65535,b[k]=V<<16|q}return new c(b,b[b.length-1]&-2147483648?-1:0)};function re(D,M){return D.add(F(M))}t.j=function(D){if(x(this)||x(D))return E;if(O(this))return O(D)?F(this).j(F(D)):F(F(this).j(D));if(O(D))return F(this.j(F(D)));if(0>this.l(I)&&0>D.l(I))return p(this.m()*D.m());for(var M=this.g.length+D.g.length,b=[],L=0;L<2*M;L++)b[L]=0;for(L=0;L<this.g.length;L++)for(var k=0;k<D.g.length;k++){var q=this.i(L)>>>16,V=this.i(L)&65535,Et=D.i(k)>>>16,We=D.i(k)&65535;b[2*L+2*k]+=V*We,te(b,2*L+2*k),b[2*L+2*k+1]+=q*We,te(b,2*L+2*k+1),b[2*L+2*k+1]+=V*Et,te(b,2*L+2*k+1),b[2*L+2*k+2]+=q*Et,te(b,2*L+2*k+2)}for(L=0;L<M;L++)b[L]=b[2*L+1]<<16|b[2*L];for(L=M;L<2*M;L++)b[L]=0;return new c(b,0)};function te(D,M){for(;(D[M]&65535)!=D[M];)D[M+1]+=D[M]>>>16,D[M]&=65535,M++}function ne(D,M){this.g=D,this.h=M}function ce(D,M){if(x(M))throw Error("division by zero");if(x(D))return new ne(E,E);if(O(D))return M=ce(F(D),M),new ne(F(M.g),F(M.h));if(O(M))return M=ce(D,F(M)),new ne(F(M.g),M.h);if(30<D.g.length){if(O(D)||O(M))throw Error("slowDivide_ only works with positive integers.");for(var b=S,L=M;0>=L.l(D);)b=se(b),L=se(L);var k=me(b,1),q=me(L,1);for(L=me(L,2),b=me(b,2);!x(L);){var V=q.add(L);0>=V.l(D)&&(k=k.add(b),q=V),L=me(L,1),b=me(b,1)}return M=re(D,k.j(M)),new ne(k,M)}for(k=E;0<=D.l(M);){for(b=Math.max(1,Math.floor(D.m()/M.m())),L=Math.ceil(Math.log(b)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),q=p(b),V=q.j(M);O(V)||0<V.l(D);)b-=L,q=p(b),V=q.j(M);x(q)&&(q=S),k=k.add(q),D=re(D,V)}return new ne(k,D)}t.A=function(D){return ce(this,D).h},t.and=function(D){for(var M=Math.max(this.g.length,D.g.length),b=[],L=0;L<M;L++)b[L]=this.i(L)&D.i(L);return new c(b,this.h&D.h)},t.or=function(D){for(var M=Math.max(this.g.length,D.g.length),b=[],L=0;L<M;L++)b[L]=this.i(L)|D.i(L);return new c(b,this.h|D.h)},t.xor=function(D){for(var M=Math.max(this.g.length,D.g.length),b=[],L=0;L<M;L++)b[L]=this.i(L)^D.i(L);return new c(b,this.h^D.h)};function se(D){for(var M=D.g.length+1,b=[],L=0;L<M;L++)b[L]=D.i(L)<<1|D.i(L-1)>>>31;return new c(b,D.h)}function me(D,M){var b=M>>5;M%=32;for(var L=D.g.length-b,k=[],q=0;q<L;q++)k[q]=0<M?D.i(q+b)>>>M|D.i(q+b+1)<<32-M:D.i(q+b);return new c(k,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,RA=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,gs=c}).apply(typeof $0<"u"?$0:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xA,ou,bA,Af,am,MA,NA,kA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,T,A){return g==Array.prototype||g==Object.prototype||(g[T]=A.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var T=0;T<g.length;++T){var A=g[T];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=n(this);function r(g,T){if(T)e:{var A=i;g=g.split(".");for(var R=0;R<g.length-1;R++){var H=g[R];if(!(H in A))break e;A=A[H]}g=g[g.length-1],R=A[g],T=T(R),T!=R&&T!=null&&e(A,g,{configurable:!0,writable:!0,value:T})}}function a(g,T){g instanceof String&&(g+="");var A=0,R=!1,H={next:function(){if(!R&&A<g.length){var Q=A++;return{value:T(Q,g[Q]),done:!1}}return R=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}r("Array.prototype.values",function(g){return g||function(){return a(this,function(T,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function m(g){var T=typeof g;return T=T!="object"?T:g?Array.isArray(g)?"array":T:"null",T=="array"||T=="object"&&typeof g.length=="number"}function p(g){var T=typeof g;return T=="object"&&g!=null||T=="function"}function v(g,T,A){return g.call.apply(g.bind,arguments)}function E(g,T,A){if(!g)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,R),g.apply(T,H)}}return function(){return g.apply(T,arguments)}}function S(g,T,A){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function I(g,T){var A=Array.prototype.slice.call(arguments,1);return function(){var R=A.slice();return R.push.apply(R,arguments),g.apply(this,R)}}function x(g,T){function A(){}A.prototype=T.prototype,g.aa=T.prototype,g.prototype=new A,g.prototype.constructor=g,g.Qb=function(R,H,Q){for(var de=Array(arguments.length-2),je=2;je<arguments.length;je++)de[je-2]=arguments[je];return T.prototype[H].apply(R,de)}}function O(g){const T=g.length;if(0<T){const A=Array(T);for(let R=0;R<T;R++)A[R]=g[R];return A}return[]}function F(g,T){for(let A=1;A<arguments.length;A++){const R=arguments[A];if(m(R)){const H=g.length||0,Q=R.length||0;g.length=H+Q;for(let de=0;de<Q;de++)g[H+de]=R[de]}else g.push(R)}}class re{constructor(T,A){this.i=T,this.j=A,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function te(g){return/^[\s\xa0]*$/.test(g)}function ne(){var g=h.navigator;return g&&(g=g.userAgent)?g:""}function ce(g){return ce[" "](g),g}ce[" "]=function(){};var se=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function me(g,T,A){for(const R in g)T.call(A,g[R],R,g)}function D(g,T){for(const A in g)T.call(void 0,g[A],A,g)}function M(g){const T={};for(const A in g)T[A]=g[A];return T}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(g,T){let A,R;for(let H=1;H<arguments.length;H++){R=arguments[H];for(A in R)g[A]=R[A];for(let Q=0;Q<b.length;Q++)A=b[Q],Object.prototype.hasOwnProperty.call(R,A)&&(g[A]=R[A])}}function k(g){var T=1;g=g.split(":");const A=[];for(;0<T&&g.length;)A.push(g.shift()),T--;return g.length&&A.push(g.join(":")),A}function q(g){h.setTimeout(()=>{throw g},0)}function V(){var g=Ue;let T=null;return g.g&&(T=g.g,g.g=g.g.next,g.g||(g.h=null),T.next=null),T}class Et{constructor(){this.h=this.g=null}add(T,A){const R=We.get();R.set(T,A),this.h?this.h.next=R:this.g=R,this.h=R}}var We=new re(()=>new X,g=>g.reset());class X{constructor(){this.next=this.g=this.h=null}set(T,A){this.h=T,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,ye=!1,Ue=new Et,U=()=>{const g=h.Promise.resolve(void 0);pe=()=>{g.then(W)}};var W=()=>{for(var g;g=V();){try{g.h.call(g.g)}catch(A){q(A)}var T=We;T.j(g),100>T.h&&(T.h++,g.next=T.g,T.g=g)}ye=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(g,T){this.type=g,this.g=this.target=T,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var g=!1,T=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};h.addEventListener("test",A,T),h.removeEventListener("test",A,T)}catch{}return g}();function Fe(g,T){if(ae.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var A=this.type=g.type,R=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=T,T=g.relatedTarget){if(se){e:{try{ce(T.nodeName);var H=!0;break e}catch{}H=!1}H||(T=null)}}else A=="mouseover"?T=g.fromElement:A=="mouseout"&&(T=g.toElement);this.relatedTarget=T,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:be[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Fe.aa.h.call(this)}}x(Fe,ae);var be={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Dt="closure_listenable_"+(1e6*Math.random()|0),at=0;function Rn(g,T,A,R,H){this.listener=g,this.proxy=null,this.src=T,this.type=A,this.capture=!!R,this.ha=H,this.key=++at,this.da=this.fa=!1}function Zn(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function _n(g){this.src=g,this.g={},this.h=0}_n.prototype.add=function(g,T,A,R,H){var Q=g.toString();g=this.g[Q],g||(g=this.g[Q]=[],this.h++);var de=Ri(g,T,R,H);return-1<de?(T=g[de],A||(T.fa=!1)):(T=new Rn(T,this.src,Q,!!R,H),T.fa=A,g.push(T)),T};function Ii(g,T){var A=T.type;if(A in g.g){var R=g.g[A],H=Array.prototype.indexOf.call(R,T,void 0),Q;(Q=0<=H)&&Array.prototype.splice.call(R,H,1),Q&&(Zn(T),g.g[A].length==0&&(delete g.g[A],g.h--))}}function Ri(g,T,A,R){for(var H=0;H<g.length;++H){var Q=g[H];if(!Q.da&&Q.listener==T&&Q.capture==!!A&&Q.ha==R)return H}return-1}var pi="closure_lm_"+(1e6*Math.random()|0),mi={};function zo(g,T,A,R,H){if(Array.isArray(T)){for(var Q=0;Q<T.length;Q++)zo(g,T[Q],A,R,H);return null}return A=Ms(A),g&&g[Dt]?g.K(T,A,p(R)?!!R.capture:!1,H):Vn(g,T,A,!1,R,H)}function Vn(g,T,A,R,H,Q){if(!T)throw Error("Invalid event type");var de=p(H)?!!H.capture:!!H,je=xi(g);if(je||(g[pi]=je=new _n(g)),A=je.add(T,A,R,de,Q),A.proxy)return A;if(R=bs(),A.proxy=R,R.src=g,R.listener=A,g.addEventListener)Ae||(H=de),H===void 0&&(H=!1),g.addEventListener(T.toString(),R,H);else if(g.attachEvent)g.attachEvent(no(T.toString()),R);else if(g.addListener&&g.removeListener)g.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return A}function bs(){function g(A){return T.call(g.src,g.listener,A)}const T=Lr;return g}function Ho(g,T,A,R,H){if(Array.isArray(T))for(var Q=0;Q<T.length;Q++)Ho(g,T[Q],A,R,H);else R=p(R)?!!R.capture:!!R,A=Ms(A),g&&g[Dt]?(g=g.i,T=String(T).toString(),T in g.g&&(Q=g.g[T],A=Ri(Q,A,R,H),-1<A&&(Zn(Q[A]),Array.prototype.splice.call(Q,A,1),Q.length==0&&(delete g.g[T],g.h--)))):g&&(g=xi(g))&&(T=g.g[T.toString()],g=-1,T&&(g=Ri(T,A,R,H)),(A=-1<g?T[g]:null)&&$o(A))}function $o(g){if(typeof g!="number"&&g&&!g.da){var T=g.src;if(T&&T[Dt])Ii(T.i,g);else{var A=g.type,R=g.proxy;T.removeEventListener?T.removeEventListener(A,R,g.capture):T.detachEvent?T.detachEvent(no(A),R):T.addListener&&T.removeListener&&T.removeListener(R),(A=xi(T))?(Ii(A,g),A.h==0&&(A.src=null,T[pi]=null)):Zn(g)}}}function no(g){return g in mi?mi[g]:mi[g]="on"+g}function Lr(g,T){if(g.da)g=!0;else{T=new Fe(T,this);var A=g.listener,R=g.ha||g.src;g.fa&&$o(g),g=A.call(R,T)}return g}function xi(g){return g=g[pi],g instanceof _n?g:null}var Yo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ms(g){return typeof g=="function"?g:(g[Yo]||(g[Yo]=function(T){return g.handleEvent(T)}),g[Yo])}function xt(){he.call(this),this.i=new _n(this),this.M=this,this.F=null}x(xt,he),xt.prototype[Dt]=!0,xt.prototype.removeEventListener=function(g,T,A,R){Ho(this,g,T,A,R)};function it(g,T){var A,R=g.F;if(R)for(A=[];R;R=R.F)A.push(R);if(g=g.M,R=T.type||T,typeof T=="string")T=new ae(T,g);else if(T instanceof ae)T.target=T.target||g;else{var H=T;T=new ae(R,g),L(T,H)}if(H=!0,A)for(var Q=A.length-1;0<=Q;Q--){var de=T.g=A[Q];H=xn(de,R,!0,T)&&H}if(de=T.g=g,H=xn(de,R,!0,T)&&H,H=xn(de,R,!1,T)&&H,A)for(Q=0;Q<A.length;Q++)de=T.g=A[Q],H=xn(de,R,!1,T)&&H}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var g=this.i,T;for(T in g.g){for(var A=g.g[T],R=0;R<A.length;R++)Zn(A[R]);delete g.g[T],g.h--}}this.F=null},xt.prototype.K=function(g,T,A,R){return this.i.add(String(g),T,!1,A,R)},xt.prototype.L=function(g,T,A,R){return this.i.add(String(g),T,!0,A,R)};function xn(g,T,A,R){if(T=g.i.g[String(T)],!T)return!0;T=T.concat();for(var H=!0,Q=0;Q<T.length;++Q){var de=T[Q];if(de&&!de.da&&de.capture==A){var je=de.listener,Yt=de.ha||de.src;de.fa&&Ii(g.i,de),H=je.call(Yt,R)!==!1&&H}}return H&&!R.defaultPrevented}function Pt(g,T,A){if(typeof g=="function")A&&(g=S(g,A));else if(g&&typeof g.handleEvent=="function")g=S(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:h.setTimeout(g,T||0)}function io(g){g.g=Pt(()=>{g.g=null,g.i&&(g.i=!1,io(g))},g.l);const T=g.h;g.h=null,g.m.apply(null,T)}class Ns extends he{constructor(T,A){super(),this.m=T,this.l=A,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:io(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oo(g){he.call(this),this.h=g,this.g={}}x(oo,he);var gi=[];function ro(g){me(g.g,function(T,A){this.g.hasOwnProperty(A)&&$o(T)},g),g.g={}}oo.prototype.N=function(){oo.aa.N.call(this),ro(this)},oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=h.JSON.stringify,Ko=h.JSON.parse,bi=class{stringify(g){return h.JSON.stringify(g,void 0)}parse(g){return h.JSON.parse(g,void 0)}};function Ur(){}Ur.prototype.h=null;function Jo(g){return g.h||(g.h=g.i())}function Zt(){}var z={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Z(){ae.call(this,"d")}x(Z,ae);function ie(){ae.call(this,"c")}x(ie,ae);var fe={},Ce=null;function ke(){return Ce=Ce||new xt}fe.La="serverreachability";function Ge(g){ae.call(this,fe.La,g)}x(Ge,ae);function ze(g){const T=ke();it(T,new Ge(T))}fe.STAT_EVENT="statevent";function wt(g,T){ae.call(this,fe.STAT_EVENT,g),this.stat=T}x(wt,ae);function qe(g){const T=ke();it(T,new wt(T,g))}fe.Ma="timingevent";function He(g,T){ae.call(this,fe.Ma,g),this.size=T}x(He,ae);function we(g,T){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){g()},T)}function Pe(){this.g=!0}Pe.prototype.xa=function(){this.g=!1};function St(g,T,A,R,H,Q){g.info(function(){if(g.g)if(Q)for(var de="",je=Q.split("&"),Yt=0;Yt<je.length;Yt++){var et=je[Yt].split("=");if(1<et.length){var en=et[0];et=et[1];var Kt=en.split("_");de=2<=Kt.length&&Kt[1]=="type"?de+(en+"="+et+"&"):de+(en+"=redacted&")}}else de=null;else de=Q;return"XMLHTTP REQ ("+R+") [attempt "+H+"]: "+T+`
`+A+`
`+de})}function Ke(g,T,A,R,H,Q,de){g.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+H+"]: "+T+`
`+A+`
`+Q+" "+de})}function Oe(g,T,A,R){g.info(function(){return"XMLHTTP TEXT ("+T+"): "+sn(g,A)+(R?" "+R:"")})}function gt(g,T){g.info(function(){return"TIMEOUT: "+T})}Pe.prototype.info=function(){};function sn(g,T){if(!g.g)return T;if(!T)return null;try{var A=JSON.parse(T);if(A){for(g=0;g<A.length;g++)if(Array.isArray(A[g])){var R=A[g];if(!(2>R.length)){var H=R[1];if(Array.isArray(H)&&!(1>H.length)){var Q=H[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var de=1;de<H.length;de++)H[de]=""}}}}return $t(A)}catch{return T}}var jn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},an={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mi;function Ni(){}x(Ni,Ur),Ni.prototype.g=function(){return new XMLHttpRequest},Ni.prototype.i=function(){return{}},Mi=new Ni;function bn(g,T,A,R){this.j=g,this.i=T,this.l=A,this.R=R||1,this.U=new oo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ut}function Ut(){this.i=null,this.g="",this.h=!1}var Za={},ks={};function yi(g,T,A){g.L=1,g.v=Gr(Gn(T)),g.m=A,g.P=!0,so(g,null)}function so(g,T){g.F=Date.now(),Or(g),g.A=Gn(g.v);var A=g.A,R=g.R;Array.isArray(R)||(R=[String(R)]),ol(A.i,"t",R),g.C=0,A=g.j.J,g.h=new Ut,g.g=ec(g.j,A?T:null,!g.m),0<g.O&&(g.M=new Ns(S(g.Y,g,g.g),g.O)),T=g.U,A=g.g,R=g.ca;var H="readystatechange";Array.isArray(H)||(H&&(gi[0]=H.toString()),H=gi);for(var Q=0;Q<H.length;Q++){var de=zo(A,H[Q],R||T.handleEvent,!1,T.h||T);if(!de)break;T.g[de.key]=de}T=g.H?M(g.H):{},g.m?(g.u||(g.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,T)):(g.u="GET",g.g.ea(g.A,g.u,null,T)),ze(),St(g.i,g.u,g.A,g.l,g.R,g.m)}bn.prototype.ca=function(g){g=g.target;const T=this.M;T&&ii(g)==3?T.j():this.Y(g)},bn.prototype.Y=function(g){try{if(g==this.g)e:{const Kt=ii(this.g);var T=this.g.Ba();const mo=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||Yu(this.g)))){this.J||Kt!=4||T==7||(T==8||0>=mo?ze(3):ze(2)),Qo(this);var A=this.g.Z();this.X=A;t:if(Bu(this)){var R=Yu(this.g);g="";var H=R.length,Q=ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),ki(this);var de="";break t}this.h.i=new h.TextDecoder}for(T=0;T<H;T++)this.h.h=!0,g+=this.h.i.decode(R[T],{stream:!(Q&&T==H-1)});R.length=0,this.h.g+=g,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=A==200,Ke(this.i,this.u,this.A,this.l,this.R,Kt,A),this.o){if(this.T&&!this.K){t:{if(this.g){var je,Yt=this.g;if((je=Yt.g?Yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(je)){var et=je;break t}}et=null}if(A=et)Oe(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Br(this,A);else{this.o=!1,this.s=3,qe(12),ln(this),ki(this);break e}}if(this.P){A=!0;let un;for(;!this.J&&this.C<de.length;)if(un=Fu(this,de),un==ks){Kt==4&&(this.s=4,qe(14),A=!1),Oe(this.i,this.l,null,"[Incomplete Response]");break}else if(un==Za){this.s=4,qe(15),Oe(this.i,this.l,de,"[Invalid Chunk]"),A=!1;break}else Oe(this.i,this.l,un,null),Br(this,un);if(Bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||de.length!=0||this.h.h||(this.s=1,qe(16),A=!1),this.o=this.o&&A,!A)Oe(this.i,this.l,de,"[Invalid Chunked Response]"),ln(this),ki(this);else if(0<de.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Xr(en),en.M=!0,qe(11))}}else Oe(this.i,this.l,de,null),Br(this,de);Kt==4&&ln(this),this.o&&!this.J&&(Kt==4?Wu(this.j,this):(this.o=!1,Or(this)))}else Id(this.g),A==400&&0<de.indexOf("Unknown SID")?(this.s=3,qe(12)):(this.s=0,qe(13)),ln(this),ki(this)}}}catch{}finally{}};function Bu(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Fu(g,T){var A=g.C,R=T.indexOf(`
`,A);return R==-1?ks:(A=Number(T.substring(A,R)),isNaN(A)?Za:(R+=1,R+A>T.length?ks:(T=T.slice(R,R+A),g.C=R+A,T)))}bn.prototype.cancel=function(){this.J=!0,ln(this)};function Or(g){g.S=Date.now()+g.I,qu(g,g.I)}function qu(g,T){if(g.B!=null)throw Error("WatchDog timer not null");g.B=we(S(g.ba,g),T)}function Qo(g){g.B&&(h.clearTimeout(g.B),g.B=null)}bn.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(gt(this.i,this.A),this.L!=2&&(ze(),qe(17)),ln(this),this.s=2,ki(this)):qu(this,this.S-g)};function ki(g){g.j.G==0||g.J||Wu(g.j,g)}function ln(g){Qo(g);var T=g.M;T&&typeof T.ma=="function"&&T.ma(),g.M=null,ro(g.U),g.g&&(T=g.g,g.g=null,T.abort(),T.ma())}function Br(g,T){try{var A=g.j;if(A.G!=0&&(A.g==g||ja(A.h,g))){if(!g.K&&ja(A.h,g)&&A.G==3){try{var R=A.Da.g.parse(T)}catch{R=null}if(Array.isArray(R)&&R.length==3){var H=R;if(H[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<g.F)Hs(A),Gs(A);else break e;ul(A),qe(18)}}else A.za=H[1],0<A.za-A.T&&37500>H[2]&&A.F&&A.v==0&&!A.C&&(A.C=we(S(A.Za,A),6e3));if(1>=Ps(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else po(A,11)}else if((g.K||A.g==g)&&Hs(A),!te(T))for(H=A.Da.g.parse(T),T=0;T<H.length;T++){let et=H[T];if(A.T=et[0],et=et[1],A.G==2)if(et[0]=="c"){A.K=et[1],A.ia=et[2];const en=et[3];en!=null&&(A.la=en,A.j.info("VER="+A.la));const Kt=et[4];Kt!=null&&(A.Aa=Kt,A.j.info("SVER="+A.Aa));const mo=et[5];mo!=null&&typeof mo=="number"&&0<mo&&(R=1.5*mo,A.L=R,A.j.info("backChannelRequestTimeoutMs_="+R)),R=A;const un=g.g;if(un){const Bi=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bi){var Q=R.h;Q.g||Bi.indexOf("spdy")==-1&&Bi.indexOf("quic")==-1&&Bi.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Vs(Q,Q.h),Q.h=null))}if(R.D){const fl=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;fl&&(R.ya=fl,yt(R.I,R.D,fl))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-g.F,A.j.info("Handshake RTT: "+A.R+"ms")),R=A;var de=g;if(R.qa=ju(R,R.J?R.ia:null,R.W),de.K){Mn(R.h,de);var je=de,Yt=R.L;Yt&&(je.I=Yt),je.B&&(Qo(je),Or(je)),R.g=de}else Qu(R);0<A.i.length&&zs(A)}else et[0]!="stop"&&et[0]!="close"||po(A,7);else A.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?po(A,7):al(A):et[0]!="noop"&&A.l&&A.l.ta(et),A.v=0)}}ze(4)}catch{}}var Gu=class{constructor(g,T){this.g=g,this.map=T}};function ao(g){this.l=g||10,h.PerformanceNavigationTiming?(g=h.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ds(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ps(g){return g.h?1:g.g?g.g.size:0}function ja(g,T){return g.h?g.h==T:g.g?g.g.has(T):!1}function Vs(g,T){g.g?g.g.add(T):g.h=T}function Mn(g,T){g.h&&g.h==T?g.h=null:g.g&&g.g.has(T)&&g.g.delete(T)}ao.prototype.cancel=function(){if(this.i=el(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function el(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let T=g.i;for(const A of g.g.values())T=T.concat(A.D);return T}return O(g.i)}function Sd(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(m(g)){for(var T=[],A=g.length,R=0;R<A;R++)T.push(g[R]);return T}T=[],A=0;for(R in g)T[A++]=g[R];return T}function Ls(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(m(g)||typeof g=="string"){var T=[];g=g.length;for(var A=0;A<g;A++)T.push(A);return T}T=[],A=0;for(const R in g)T[A++]=R;return T}}}function tl(g,T){if(g.forEach&&typeof g.forEach=="function")g.forEach(T,void 0);else if(m(g)||typeof g=="string")Array.prototype.forEach.call(g,T,void 0);else for(var A=Ls(g),R=Sd(g),H=R.length,Q=0;Q<H;Q++)T.call(void 0,R[Q],A&&A[Q],g)}var Fr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ad(g,T){if(g){g=g.split("&");for(var A=0;A<g.length;A++){var R=g[A].indexOf("="),H=null;if(0<=R){var Q=g[A].substring(0,R);H=g[A].substring(R+1)}else Q=g[A];T(Q,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function qt(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof qt){this.h=g.h,qr(this,g.j),this.o=g.o,this.g=g.g,Xo(this,g.s),this.l=g.l;var T=g.i,A=new uo;A.i=T.i,T.g&&(A.g=new Map(T.g),A.h=T.h),lo(this,A),this.m=g.m}else g&&(T=String(g).match(Fr))?(this.h=!1,qr(this,T[1]||"",!0),this.o=ei(T[2]||""),this.g=ei(T[3]||"",!0),Xo(this,T[4]),this.l=ei(T[5]||"",!0),lo(this,T[6]||"",!0),this.m=ei(T[7]||"")):(this.h=!1,this.i=new uo(null,this.h))}qt.prototype.toString=function(){var g=[],T=this.j;T&&g.push(zr(T,nl,!0),":");var A=this.g;return(A||T=="file")&&(g.push("//"),(T=this.o)&&g.push(zr(T,nl,!0),"@"),g.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&g.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(zr(A,A.charAt(0)=="/"?Cd:il,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",zr(A,Us)),g.join("")};function Gn(g){return new qt(g)}function qr(g,T,A){g.j=A?ei(T,!0):T,g.j&&(g.j=g.j.replace(/:$/,""))}function Xo(g,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);g.s=T}else g.s=null}function lo(g,T,A){T instanceof uo?(g.i=T,Hu(g.i,g.h)):(A||(T=zr(T,wd)),g.i=new uo(T,g.h))}function yt(g,T,A){g.i.set(T,A)}function Gr(g){return yt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function ei(g,T){return g?T?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function zr(g,T,A){return typeof g=="string"?(g=encodeURI(g).replace(T,zu),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function zu(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var nl=/[#\/\?@]/g,il=/[#\?:]/g,Cd=/[#\?]/g,wd=/[#\?@]/g,Us=/#/g;function uo(g,T){this.h=this.g=null,this.i=g||null,this.j=!!T}function ti(g){g.g||(g.g=new Map,g.h=0,g.i&&Ad(g.i,function(T,A){g.add(decodeURIComponent(T.replace(/\+/g," ")),A)}))}t=uo.prototype,t.add=function(g,T){ti(this),this.i=null,g=Di(this,g);var A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(T),this.h+=1,this};function co(g,T){ti(g),T=Di(g,T),g.g.has(T)&&(g.i=null,g.h-=g.g.get(T).length,g.g.delete(T))}function fo(g,T){return ti(g),T=Di(g,T),g.g.has(T)}t.forEach=function(g,T){ti(this),this.g.forEach(function(A,R){A.forEach(function(H){g.call(T,H,R,this)},this)},this)},t.na=function(){ti(this);const g=Array.from(this.g.values()),T=Array.from(this.g.keys()),A=[];for(let R=0;R<T.length;R++){const H=g[R];for(let Q=0;Q<H.length;Q++)A.push(T[R])}return A},t.V=function(g){ti(this);let T=[];if(typeof g=="string")fo(this,g)&&(T=T.concat(this.g.get(Di(this,g))));else{g=Array.from(this.g.values());for(let A=0;A<g.length;A++)T=T.concat(g[A])}return T},t.set=function(g,T){return ti(this),this.i=null,g=Di(this,g),fo(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[T]),this.h+=1,this},t.get=function(g,T){return g?(g=this.V(g),0<g.length?String(g[0]):T):T};function ol(g,T,A){co(g,T),0<A.length&&(g.i=null,g.g.set(Di(g,T),O(A)),g.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],T=Array.from(this.g.keys());for(var A=0;A<T.length;A++){var R=T[A];const Q=encodeURIComponent(String(R)),de=this.V(R);for(R=0;R<de.length;R++){var H=Q;de[R]!==""&&(H+="="+encodeURIComponent(String(de[R]))),g.push(H)}}return this.i=g.join("&")};function Di(g,T){return T=String(T),g.j&&(T=T.toLowerCase()),T}function Hu(g,T){T&&!g.j&&(ti(g),g.i=null,g.g.forEach(function(A,R){var H=R.toLowerCase();R!=H&&(co(this,R),ol(this,H,A))},g)),g.j=T}function Hr(g,T){const A=new Pe;if(h.Image){const R=new Image;R.onload=I(ni,A,"TestLoadImage: loaded",!0,T,R),R.onerror=I(ni,A,"TestLoadImage: error",!1,T,R),R.onabort=I(ni,A,"TestLoadImage: abort",!1,T,R),R.ontimeout=I(ni,A,"TestLoadImage: timeout",!1,T,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=g}else T(!1)}function vi(g,T){const A=new Pe,R=new AbortController,H=setTimeout(()=>{R.abort(),ni(A,"TestPingServer: timeout",!1,T)},1e4);fetch(g,{signal:R.signal}).then(Q=>{clearTimeout(H),Q.ok?ni(A,"TestPingServer: ok",!0,T):ni(A,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(H),ni(A,"TestPingServer: error",!1,T)})}function ni(g,T,A,R,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),R(A)}catch{}}function $r(){this.g=new bi}function Pi(g,T,A){const R=A||"";try{tl(g,function(H,Q){let de=H;p(H)&&(de=$t(H)),T.push(R+Q+"="+encodeURIComponent(de))})}catch(H){throw T.push(R+"type="+encodeURIComponent("_badmap")),H}}function Wo(g){this.l=g.Ub||null,this.j=g.eb||!1}x(Wo,Ur),Wo.prototype.g=function(){return new ho(this.l,this.j)},Wo.prototype.i=function(g){return function(){return g}}({});function ho(g,T){xt.call(this),this.D=g,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(ho,xt),t=ho.prototype,t.open=function(g,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=T,this.readyState=1,Li(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(T.body=g),(this.D||h).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vi(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Li(this)),this.g&&(this.readyState=3,Li(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rl(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function rl(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var T=g.value?g.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!g.done}))&&(this.response=this.responseText+=T)}g.done?Vi(this):Li(this),this.readyState==3&&rl(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Vi(this))},t.Qa=function(g){this.g&&(this.response=g,Vi(this))},t.ga=function(){this.g&&Vi(this)};function Vi(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Li(g)}t.setRequestHeader=function(g,T){this.u.append(g,T)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],T=this.h.entries();for(var A=T.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=T.next();return g.join(`\r
`)};function Li(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(ho.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function sl(g){let T="";return me(g,function(A,R){T+=R,T+=":",T+=A,T+=`\r
`}),T}function jt(g,T,A){e:{for(R in A){var R=!1;break e}R=!0}R||(A=sl(A),typeof g=="string"?A!=null&&encodeURIComponent(String(A)):yt(g,T,A))}function lt(g){xt.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(lt,xt);var Os=/^https?$/i,Yr=["POST","PUT"];t=lt.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,T,A,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);T=T?T.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mi.g(),this.v=this.o?Jo(this.o):Jo(Mi),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(T,String(g),!0),this.B=!1}catch(Q){$u(this,Q);return}if(g=A||"",A=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var H in R)A.set(H,R[H]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Q of R.keys())A.set(Q,R.get(Q));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(A.keys()).find(Q=>Q.toLowerCase()=="content-type"),H=h.FormData&&g instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Yr,T,void 0))||R||H||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,de]of A)this.g.setRequestHeader(Q,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kr(this),this.u=!0,this.g.send(g),this.u=!1}catch(Q){$u(this,Q)}};function $u(g,T){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=T,g.m=5,Bs(g),Ui(g)}function Bs(g){g.A||(g.A=!0,it(g,"complete"),it(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,it(this,"complete"),it(this,"abort"),Ui(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ui(this,!0)),lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Fs(this):this.bb())},t.bb=function(){Fs(this)};function Fs(g){if(g.h&&typeof c<"u"&&(!g.v[1]||ii(g)!=4||g.Z()!=2)){if(g.u&&ii(g)==4)Pt(g.Ea,0,g);else if(it(g,"readystatechange"),ii(g)==4){g.h=!1;try{const de=g.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var A;if(!(A=T)){var R;if(R=de===0){var H=String(g.D).match(Fr)[1]||null;!H&&h.self&&h.self.location&&(H=h.self.location.protocol.slice(0,-1)),R=!Os.test(H?H.toLowerCase():"")}A=R}if(A)it(g,"complete"),it(g,"success");else{g.m=6;try{var Q=2<ii(g)?g.g.statusText:""}catch{Q=""}g.l=Q+" ["+g.Z()+"]",Bs(g)}}finally{Ui(g)}}}}function Ui(g,T){if(g.g){Kr(g);const A=g.g,R=g.v[0]?()=>{}:null;g.g=null,g.v=null,T||it(g,"ready");try{A.onreadystatechange=R}catch{}}}function Kr(g){g.I&&(h.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function ii(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<ii(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var T=this.g.responseText;return g&&T.indexOf(g)==0&&(T=T.substring(g.length)),Ko(T)}};function Yu(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Id(g){const T={};g=(g.g&&2<=ii(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<g.length;R++){if(te(g[R]))continue;var A=k(g[R]);const H=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const Q=T[H]||[];T[H]=Q,Q.push(A)}D(T,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jr(g,T,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||T}function qs(g){this.Aa=0,this.i=[],this.j=new Pe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jr("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jr("baseRetryDelayMs",5e3,g),this.cb=Jr("retryDelaySeedMs",1e4,g),this.Wa=Jr("forwardChannelMaxRetries",2,g),this.wa=Jr("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new ao(g&&g.concurrentRequestLimit),this.Da=new $r,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=qs.prototype,t.la=8,t.G=1,t.connect=function(g,T,A,R){qe(0),this.W=g,this.H=T||{},A&&R!==void 0&&(this.H.OSID=A,this.H.OAID=R),this.F=this.X,this.I=ju(this,null,this.W),zs(this)};function al(g){if(Ku(g),g.G==3){var T=g.U++,A=Gn(g.I);if(yt(A,"SID",g.K),yt(A,"RID",T),yt(A,"TYPE","terminate"),Qr(g,A),T=new bn(g,g.j,T),T.L=2,T.v=Gr(Gn(A)),A=!1,h.navigator&&h.navigator.sendBeacon)try{A=h.navigator.sendBeacon(T.v.toString(),"")}catch{}!A&&h.Image&&(new Image().src=T.v,A=!0),A||(T.g=ec(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Or(T)}Zu(g)}function Gs(g){g.g&&(Xr(g),g.g.cancel(),g.g=null)}function Ku(g){Gs(g),g.u&&(h.clearTimeout(g.u),g.u=null),Hs(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&h.clearTimeout(g.s),g.s=null)}function zs(g){if(!Ds(g.h)&&!g.s){g.s=!0;var T=g.Ga;pe||U(),ye||(pe(),ye=!0),Ue.add(T,g),g.B=0}}function Rd(g,T){return Ps(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=T.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=we(S(g.Ga,g,T),cl(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const H=new bn(this,this.j,g);let Q=this.o;if(this.S&&(Q?(Q=M(Q),L(Q,this.S)):Q=this.S),this.m!==null||this.O||(H.H=Q,Q=null),this.P)e:{for(var T=0,A=0;A<this.i.length;A++){t:{var R=this.i[A];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(T+=R,4096<T){T=A;break e}if(T===4096||A===this.i.length-1){T=A+1;break e}}T=1e3}else T=1e3;T=Ju(this,H,T),A=Gn(this.I),yt(A,"RID",g),yt(A,"CVER",22),this.D&&yt(A,"X-HTTP-Session-Id",this.D),Qr(this,A),Q&&(this.O?T="headers="+encodeURIComponent(String(sl(Q)))+"&"+T:this.m&&jt(A,this.m,Q)),Vs(this.h,H),this.Ua&&yt(A,"TYPE","init"),this.P?(yt(A,"$req",T),yt(A,"SID","null"),H.T=!0,yi(H,A,null)):yi(H,A,T),this.G=2}}else this.G==3&&(g?ll(this,g):this.i.length==0||Ds(this.h)||ll(this))};function ll(g,T){var A;T?A=T.l:A=g.U++;const R=Gn(g.I);yt(R,"SID",g.K),yt(R,"RID",A),yt(R,"AID",g.T),Qr(g,R),g.m&&g.o&&jt(R,g.m,g.o),A=new bn(g,g.j,A,g.B+1),g.m===null&&(A.H=g.o),T&&(g.i=T.D.concat(g.i)),T=Ju(g,A,1e3),A.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Vs(g.h,A),yi(A,R,T)}function Qr(g,T){g.H&&me(g.H,function(A,R){yt(T,R,A)}),g.l&&tl({},function(A,R){yt(T,R,A)})}function Ju(g,T,A){A=Math.min(g.i.length,A);var R=g.l?S(g.l.Na,g.l,g):null;e:{var H=g.i;let Q=-1;for(;;){const de=["count="+A];Q==-1?0<A?(Q=H[0].g,de.push("ofs="+Q)):Q=0:de.push("ofs="+Q);let je=!0;for(let Yt=0;Yt<A;Yt++){let et=H[Yt].g;const en=H[Yt].map;if(et-=Q,0>et)Q=Math.max(0,H[Yt].g-100),je=!1;else try{Pi(en,de,"req"+et+"_")}catch{R&&R(en)}}if(je){R=de.join("&");break e}}}return g=g.i.splice(0,A),T.D=g,R}function Qu(g){if(!g.g&&!g.u){g.Y=1;var T=g.Fa;pe||U(),ye||(pe(),ye=!0),Ue.add(T,g),g.v=0}}function ul(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=we(S(g.Fa,g),cl(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,Xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=we(S(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qe(10),Gs(this),Xu(this))};function Xr(g){g.A!=null&&(h.clearTimeout(g.A),g.A=null)}function Xu(g){g.g=new bn(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var T=Gn(g.qa);yt(T,"RID","rpc"),yt(T,"SID",g.K),yt(T,"AID",g.T),yt(T,"CI",g.F?"0":"1"),!g.F&&g.ja&&yt(T,"TO",g.ja),yt(T,"TYPE","xmlhttp"),Qr(g,T),g.m&&g.o&&jt(T,g.m,g.o),g.L&&(g.g.I=g.L);var A=g.g;g=g.ia,A.L=1,A.v=Gr(Gn(T)),A.m=null,A.P=!0,so(A,g)}t.Za=function(){this.C!=null&&(this.C=null,Gs(this),ul(this),qe(19))};function Hs(g){g.C!=null&&(h.clearTimeout(g.C),g.C=null)}function Wu(g,T){var A=null;if(g.g==T){Hs(g),Xr(g),g.g=null;var R=2}else if(ja(g.h,T))A=T.D,Mn(g.h,T),R=1;else return;if(g.G!=0){if(T.o)if(R==1){A=T.m?T.m.length:0,T=Date.now()-T.F;var H=g.B;R=ke(),it(R,new He(R,A)),zs(g)}else Qu(g);else if(H=T.s,H==3||H==0&&0<T.X||!(R==1&&Rd(g,T)||R==2&&ul(g)))switch(A&&0<A.length&&(T=g.h,T.i=T.i.concat(A)),H){case 1:po(g,5);break;case 4:po(g,10);break;case 3:po(g,6);break;default:po(g,2)}}}function cl(g,T){let A=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(A*=2),A*T}function po(g,T){if(g.j.info("Error code "+T),T==2){var A=S(g.fb,g),R=g.Xa;const H=!R;R=new qt(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||qr(R,"https"),Gr(R),H?Hr(R.toString(),A):vi(R.toString(),A)}else qe(2);g.G=0,g.l&&g.l.sa(T),Zu(g),Ku(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),qe(2)):(this.j.info("Failed to ping google.com"),qe(1))};function Zu(g){if(g.G=0,g.ka=[],g.l){const T=el(g.h);(T.length!=0||g.i.length!=0)&&(F(g.ka,T),F(g.ka,g.i),g.h.i.length=0,O(g.i),g.i.length=0),g.l.ra()}}function ju(g,T,A){var R=A instanceof qt?Gn(A):new qt(A);if(R.g!="")T&&(R.g=T+"."+R.g),Xo(R,R.s);else{var H=h.location;R=H.protocol,T=T?T+"."+H.hostname:H.hostname,H=+H.port;var Q=new qt(null);R&&qr(Q,R),T&&(Q.g=T),H&&Xo(Q,H),A&&(Q.l=A),R=Q}return A=g.D,T=g.ya,A&&T&&yt(R,A,T),yt(R,"VER",g.la),Qr(g,R),R}function ec(g,T,A){if(T&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=g.Ca&&!g.pa?new lt(new Wo({eb:A})):new lt(g.pa),T.Ha(g.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function tc(){}t=tc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $s(){}$s.prototype.g=function(g,T){return new Nn(g,T)};function Nn(g,T){xt.call(this),this.g=new qs(T),this.l=g,this.h=T&&T.messageUrlParams||null,g=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(g?g["X-WebChannel-Content-Type"]=T.messageContentType:g={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(g?g["X-WebChannel-Client-Profile"]=T.va:g={"X-WebChannel-Client-Profile":T.va}),this.g.S=g,(g=T&&T.Sb)&&!te(g)&&(this.g.m=g),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!te(T)&&(this.g.D=T,g=this.h,g!==null&&T in g&&(g=this.h,T in g&&delete g[T])),this.j=new Oi(this)}x(Nn,xt),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){al(this.g)},Nn.prototype.o=function(g){var T=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.u&&(A={},A.__data__=$t(g),g=A);T.i.push(new Gu(T.Ya++,g)),T.G==3&&zs(T)},Nn.prototype.N=function(){this.g.l=null,delete this.j,al(this.g),delete this.g,Nn.aa.N.call(this)};function nc(g){Z.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var T=g.__sm__;if(T){e:{for(const A in T){g=A;break e}g=void 0}(this.i=g)&&(g=this.i,T=T!==null&&g in T?T[g]:void 0),this.data=T}else this.data=g}x(nc,Z);function ic(){ie.call(this),this.status=1}x(ic,ie);function Oi(g){this.g=g}x(Oi,tc),Oi.prototype.ua=function(){it(this.g,"a")},Oi.prototype.ta=function(g){it(this.g,new nc(g))},Oi.prototype.sa=function(g){it(this.g,new ic)},Oi.prototype.ra=function(){it(this.g,"b")},$s.prototype.createWebChannel=$s.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,kA=function(){return new $s},NA=function(){return ke()},MA=fe,am={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jn.NO_ERROR=0,jn.TIMEOUT=8,jn.HTTP_ERROR=6,Af=jn,an.COMPLETE="complete",bA=an,Zt.EventType=z,z.OPEN="a",z.CLOSE="b",z.ERROR="c",z.MESSAGE="d",xt.prototype.listen=xt.prototype.K,ou=Zt,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,xA=lt}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});const Y0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new Um("@firebase/firestore");function nu(){return Ts.logLevel}function ve(t,...e){if(Ts.logLevel<=Ze.DEBUG){const n=e.map(Xm);Ts.debug(`Firestore (${Ja}): ${t}`,...n)}}function Bo(t,...e){if(Ts.logLevel<=Ze.ERROR){const n=e.map(Xm);Ts.error(`Firestore (${Ja}): ${t}`,...n)}}function Da(t,...e){if(Ts.logLevel<=Ze.WARN){const n=e.map(Xm);Ts.warn(`Firestore (${Ja}): ${t}`,...n)}}function Xm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t="Unexpected state"){const e=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: `+t;throw Bo(e),new Error(e)}function pt(t,e){t||De()}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Go{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(An.UNAUTHENTICATED))}shutdown(){}}class T4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class E4{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pt(this.o===void 0);let i=this.i;const r=m=>this.i!==i?(i=this.i,n(m)):Promise.resolve();let a=new br;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new br,e.enqueueRetryable(()=>r(this.currentUser))};const c=()=>{const m=a;e.enqueueRetryable(async()=>{await m.promise,await r(this.currentUser)})},h=m=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>h(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new br)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pt(typeof i.accessToken=="string"),new DA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string"),new An(e)}}class S4{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=An.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class A4{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new S4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(An.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class C4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pt(this.o===void 0);const i=a=>{a.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const r=a=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>r(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?r(a):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pt(typeof n.token=="string"),this.R=n.token,new C4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=I4(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<n&&(i+=e.charAt(r[a]%e.length))}return i}}function rt(t,e){return t<e?-1:t>e?1:0}function Pa(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Se(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wt.fromMillis(Date.now())}static fromDate(e){return Wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Wt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Wt(0,0))}static max(){return new Ve(new Wt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n,i){n===void 0?n=0:n>e.length&&De(),i===void 0?i=e.length-n:i>e.length-n&&De(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return _u.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _u?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const a=e.get(r),c=n.get(r);if(a<c)return-1;if(a>c)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Mt extends _u{construct(e,n,i){return new Mt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Se(le.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Mt(n)}static emptyPath(){return new Mt([])}}const R4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends _u{construct(e,n,i){return new mn(e,n,i)}static isValidIdentifier(e){return R4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mn(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const a=()=>{if(i.length===0)throw new Se(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new Se(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[r+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Se(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(i+=h,r++):(a(),r++)}if(a(),c)throw new Se(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(n)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(Mt.fromString(e))}static fromName(e){return new Ie(Mt.fromString(e).popFirst(5))}static empty(){return new Ie(Mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new Mt(e.slice()))}}function x4(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Ve.fromTimestamp(i===1e9?new Wt(n+1,0):new Wt(n,i));return new kr(r,Ie.empty(),e)}function b4(t){return new kr(t.readTime,t.key,-1)}class kr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new kr(Ve.min(),Ie.empty(),-1)}static max(){return new kr(Ve.max(),Ie.empty(),-1)}}function M4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(t.documentKey,e.documentKey),n!==0?n:rt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==N4)throw t;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ue.reject(n)}static resolve(e){return new ue((n,i)=>{n(e)})}static reject(e){return new ue((n,i)=>{i(e)})}static waitFor(e){return new ue((n,i)=>{let r=0,a=0,c=!1;e.forEach(h=>{++r,h.next(()=>{++a,c&&a===r&&n()},m=>i(m))}),c=!0,a===r&&n()})}static or(e){let n=ue.resolve(!1);for(const i of e)n=n.next(r=>r?ue.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,a)=>{i.push(n.call(this,r,a))}),this.waitFor(i)}static mapArray(e,n){return new ue((i,r)=>{const a=e.length,c=new Array(a);let h=0;for(let m=0;m<a;m++){const p=m;n(e[p]).next(v=>{c[p]=v,++h,h===a&&i(c)},v=>r(v))}})}static doWhile(e,n){return new ue((i,r)=>{const a=()=>{e()===!0?n().next(()=>{a()},r):i()};a()})}}function D4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Pu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Wm.oe=-1;function rd(t){return t==null}function qf(t){return t===0&&1/t==-1/0}function P4(t){return typeof t=="number"&&Number.isInteger(t)&&!qf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function VA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ff(this.root,e,this.comparator,!0)}}class ff{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,i,r,a){this.key=e,this.value=n,this.color=i??pn.RED,this.left=r??pn.EMPTY,this.right=a??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,a){return new pn(e??this.key,n??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,n,i),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return pn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,n,i,r,a){return this}insert(e,n,i){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new J0(this.data.getIterator())}getIteratorFrom(e){return new J0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gn(this.comparator);return n.data=e,n}}class J0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new gn(mn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pa(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new LA("Invalid base64 string: "+a):a}}(e);return new vn(n)}static fromUint8Array(e){const n=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(e);return new vn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vn.EMPTY_BYTE_STRING=new vn("");const V4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(t){if(pt(!!t),typeof t=="string"){let e=0;const n=V4.exec(t);if(pt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ft(t.seconds),nanos:Ft(t.nanos)}}function Ft(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Es(t){return typeof t=="string"?vn.fromBase64String(t):vn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jm(t){const e=t.mapValue.fields.__previous_value__;return Zm(e)?jm(e):e}function Tu(t){const e=Dr(t.mapValue.fields.__local_write_time__.timestampValue);return new Wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,n,i,r,a,c,h,m,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=p}}class Eu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Eu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df={mapValue:{}};function Ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zm(t)?4:O4(t)?9007199254740991:U4(t)?10:11:De()}function eo(t,e){if(t===e)return!0;const n=Ss(t);if(n!==Ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tu(t).isEqual(Tu(e));case 3:return function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=Dr(r.timestampValue),h=Dr(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,a){return Es(r.bytesValue).isEqual(Es(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,a){return Ft(r.geoPointValue.latitude)===Ft(a.geoPointValue.latitude)&&Ft(r.geoPointValue.longitude)===Ft(a.geoPointValue.longitude)}(t,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return Ft(r.integerValue)===Ft(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=Ft(r.doubleValue),h=Ft(a.doubleValue);return c===h?qf(c)===qf(h):isNaN(c)&&isNaN(h)}return!1}(t,e);case 9:return Pa(t.arrayValue.values||[],e.arrayValue.values||[],eo);case 10:case 11:return function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(K0(c)!==K0(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!eo(c[m],h[m])))return!1;return!0}(t,e);default:return De()}}function Su(t,e){return(t.values||[]).find(n=>eo(n,e))!==void 0}function Va(t,e){if(t===e)return 0;const n=Ss(t),i=Ss(e);if(n!==i)return rt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(t.booleanValue,e.booleanValue);case 2:return function(a,c){const h=Ft(a.integerValue||a.doubleValue),m=Ft(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(t,e);case 3:return Q0(t.timestampValue,e.timestampValue);case 4:return Q0(Tu(t),Tu(e));case 5:return rt(t.stringValue,e.stringValue);case 6:return function(a,c){const h=Es(a),m=Es(c);return h.compareTo(m)}(t.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),m=c.split("/");for(let p=0;p<h.length&&p<m.length;p++){const v=rt(h[p],m[p]);if(v!==0)return v}return rt(h.length,m.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,c){const h=rt(Ft(a.latitude),Ft(c.latitude));return h!==0?h:rt(Ft(a.longitude),Ft(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return X0(t.arrayValue,e.arrayValue);case 10:return function(a,c){var h,m,p,v;const E=a.fields||{},S=c.fields||{},I=(h=E.value)===null||h===void 0?void 0:h.arrayValue,x=(m=S.value)===null||m===void 0?void 0:m.arrayValue,O=rt(((p=I==null?void 0:I.values)===null||p===void 0?void 0:p.length)||0,((v=x==null?void 0:x.values)===null||v===void 0?void 0:v.length)||0);return O!==0?O:X0(I,x)}(t.mapValue,e.mapValue);case 11:return function(a,c){if(a===df.mapValue&&c===df.mapValue)return 0;if(a===df.mapValue)return 1;if(c===df.mapValue)return-1;const h=a.fields||{},m=Object.keys(h),p=c.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const S=rt(m[E],v[E]);if(S!==0)return S;const I=Va(h[m[E]],p[v[E]]);if(I!==0)return I}return rt(m.length,v.length)}(t.mapValue,e.mapValue);default:throw De()}}function Q0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rt(t,e);const n=Dr(t),i=Dr(e),r=rt(n.seconds,i.seconds);return r!==0?r:rt(n.nanos,i.nanos)}function X0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const a=Va(n[r],i[r]);if(a)return a}return rt(n.length,i.length)}function La(t){return lm(t)}function lm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Dr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const a of n.values||[])r?r=!1:i+=",",i+=lm(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",a=!0;for(const c of i)a?a=!1:r+=",",r+=`${c}:${lm(n.fields[c])}`;return r+"}"}(t.mapValue):De()}function um(t){return!!t&&"integerValue"in t}function eg(t){return!!t&&"arrayValue"in t}function W0(t){return!!t&&"nullValue"in t}function Z0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cf(t){return!!t&&"mapValue"in t}function U4(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function du(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Rs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=du(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=du(t.arrayValue.values[n]);return e}return Object.assign({},t)}function O4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Cf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=du(n)}setAll(e){let n=mn.emptyPath(),i={},r=[];e.forEach((c,h)=>{if(!n.isImmediateParentOf(h)){const m=this.getFieldsMap(n);this.applyChanges(m,i,r),i={},r=[],n=h.popLast()}c?i[h.lastSegment()]=du(c):r.push(h.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,i,r)}delete(e){const n=this.field(e.popLast());Cf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return eo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Cf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Rs(n,(r,a)=>e[r]=a);for(const r of i)delete e[r]}clone(){return new Fn(du(this.value))}}function UA(t){const e=[];return Rs(t.fields,(n,i)=>{const r=new mn([n]);if(Cf(i)){const a=UA(i.mapValue).fields;if(a.length===0)e.push(r);else for(const c of a)e.push(r.child(c))}else e.push(r)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n,i,r,a,c,h){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Cn(e,0,Ve.min(),Ve.min(),Ve.min(),Fn.empty(),0)}static newFoundDocument(e,n,i,r){return new Cn(e,1,n,Ve.min(),i,r,0)}static newNoDocument(e,n){return new Cn(e,2,n,Ve.min(),Ve.min(),Fn.empty(),0)}static newUnknownDocument(e,n){return new Cn(e,3,n,Ve.min(),Ve.min(),Fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n){this.position=e,this.inclusive=n}}function j0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const a=e[r],c=t.position[r];if(a.field.isKeyField()?i=Ie.comparator(Ie.fromName(c.referenceValue),n.key):i=Va(c,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function eE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!eo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n="asc"){this.field=e,this.dir=n}}function B4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{}class Xt extends OA{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new q4(e,n,i):n==="array-contains"?new H4(e,i):n==="in"?new $4(e,i):n==="not-in"?new Y4(e,i):n==="array-contains-any"?new K4(e,i):new Xt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new G4(e,i):new z4(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Va(n,this.value)):n!==null&&Ss(this.value)===Ss(n)&&this.matchesComparison(Va(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class to extends OA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new to(e,n)}matches(e){return BA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function BA(t){return t.op==="and"}function FA(t){return F4(t)&&BA(t)}function F4(t){for(const e of t.filters)if(e instanceof to)return!1;return!0}function cm(t){if(t instanceof Xt)return t.field.canonicalString()+t.op.toString()+La(t.value);if(FA(t))return t.filters.map(e=>cm(e)).join(",");{const e=t.filters.map(n=>cm(n)).join(",");return`${t.op}(${e})`}}function qA(t,e){return t instanceof Xt?function(i,r){return r instanceof Xt&&i.op===r.op&&i.field.isEqual(r.field)&&eo(i.value,r.value)}(t,e):t instanceof to?function(i,r){return r instanceof to&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((a,c,h)=>a&&qA(c,r.filters[h]),!0):!1}(t,e):void De()}function GA(t){return t instanceof Xt?function(n){return`${n.field.canonicalString()} ${n.op} ${La(n.value)}`}(t):t instanceof to?function(n){return n.op.toString()+" {"+n.getFilters().map(GA).join(" ,")+"}"}(t):"Filter"}class q4 extends Xt{constructor(e,n,i){super(e,n,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class G4 extends Xt{constructor(e,n){super(e,"in",n),this.keys=zA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class z4 extends Xt{constructor(e,n){super(e,"not-in",n),this.keys=zA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ie.fromName(i.referenceValue))}class H4 extends Xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return eg(n)&&Su(n.arrayValue,this.value)}}class $4 extends Xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Su(this.value.arrayValue,n)}}class Y4 extends Xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Su(this.value.arrayValue,n)}}class K4 extends Xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Su(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,n=null,i=[],r=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=c,this.endAt=h,this.ue=null}}function tE(t,e=null,n=[],i=[],r=null,a=null,c=null){return new J4(t,e,n,i,r,a,c)}function tg(t){const e=Le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>cm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),rd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>La(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>La(i)).join(",")),e.ue=n}return e.ue}function ng(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!B4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eE(t.startAt,e.startAt)&&eE(t.endAt,e.endAt)}function fm(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n=null,i=[],r=[],a=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=m,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Q4(t,e,n,i,r,a,c,h){return new sd(t,e,n,i,r,a,c,h)}function ad(t){return new sd(t)}function nE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function X4(t){return t.collectionGroup!==null}function hu(t){const e=Le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new gn(mn.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new zf(a,i))}),n.has(mn.keyField().canonicalString())||e.ce.push(new zf(mn.keyField(),i))}return e.ce}function Wi(t){const e=Le(t);return e.le||(e.le=W4(e,hu(t))),e.le}function W4(t,e){if(t.limitType==="F")return tE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const a=r.dir==="desc"?"asc":"desc";return new zf(r.field,a)});const n=t.endAt?new Gf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Gf(t.startAt.position,t.startAt.inclusive):null;return tE(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function dm(t,e,n){return new sd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ld(t,e){return ng(Wi(t),Wi(e))&&t.limitType===e.limitType}function HA(t){return`${tg(Wi(t))}|lt:${t.limitType}`}function Ea(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>GA(r)).join(", ")}]`),rd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>La(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>La(r)).join(",")),`Target(${i})`}(Wi(t))}; limitType=${t.limitType})`}function ud(t,e){return e.isFoundDocument()&&function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ie.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(t,e)&&function(i,r){for(const a of hu(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(c,h,m){const p=j0(c,h,m);return c.inclusive?p<=0:p<0}(i.startAt,hu(i),r)||i.endAt&&!function(c,h,m){const p=j0(c,h,m);return c.inclusive?p>=0:p>0}(i.endAt,hu(i),r))}(t,e)}function Z4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $A(t){return(e,n)=>{let i=!1;for(const r of hu(t)){const a=j4(r,e,n);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function j4(t,e,n){const i=t.field.isKeyField()?Ie.comparator(e.key,n.key):function(a,c,h){const m=c.data.field(a),p=h.data.field(a);return m!==null&&p!==null?Va(m,p):De()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Rs(this.inner,(n,i)=>{for(const[r,a]of i)e(r,a)})}isEmpty(){return VA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=new kt(Ie.comparator);function Fo(){return e3}const YA=new kt(Ie.comparator);function ru(...t){let e=YA;for(const n of t)e=e.insert(n.key,n);return e}function KA(t){let e=YA;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ms(){return pu()}function JA(){return pu()}function pu(){return new Qa(t=>t.toString(),(t,e)=>t.isEqual(e))}const t3=new kt(Ie.comparator),n3=new gn(Ie.comparator);function Xe(...t){let e=n3;for(const n of t)e=e.add(n);return e}const i3=new gn(rt);function o3(){return i3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qf(e)?"-0":e}}function QA(t){return{integerValue:""+t}}function r3(t,e){return P4(e)?QA(e):ig(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(){this._=void 0}}function s3(t,e,n){return t instanceof Au?function(r,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&Zm(a)&&(a=jm(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(n,e):t instanceof Cu?WA(t,e):t instanceof wu?ZA(t,e):function(r,a){const c=XA(r,a),h=iE(c)+iE(r.Pe);return um(c)&&um(r.Pe)?QA(h):ig(r.serializer,h)}(t,e)}function a3(t,e,n){return t instanceof Cu?WA(t,e):t instanceof wu?ZA(t,e):n}function XA(t,e){return t instanceof Hf?function(i){return um(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Au extends cd{}class Cu extends cd{constructor(e){super(),this.elements=e}}function WA(t,e){const n=jA(e);for(const i of t.elements)n.some(r=>eo(r,i))||n.push(i);return{arrayValue:{values:n}}}class wu extends cd{constructor(e){super(),this.elements=e}}function ZA(t,e){let n=jA(e);for(const i of t.elements)n=n.filter(r=>!eo(r,i));return{arrayValue:{values:n}}}class Hf extends cd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function iE(t){return Ft(t.integerValue||t.doubleValue)}function jA(t){return eg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n){this.field=e,this.transform=n}}function u3(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Cu&&r instanceof Cu||i instanceof wu&&r instanceof wu?Pa(i.elements,r.elements,eo):i instanceof Hf&&r instanceof Hf?eo(i.Pe,r.Pe):i instanceof Au&&r instanceof Au}(t.transform,e.transform)}class c3{constructor(e,n){this.version=e,this.transformResults=n}}class Ci{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ci}static exists(e){return new Ci(void 0,e)}static updateTime(e){return new Ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fd{}function eC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new og(t.key,Ci.none()):new Vu(t.key,t.data,Ci.none());{const n=t.data,i=Fn.empty();let r=new gn(mn.comparator);for(let a of e.fields)if(!r.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?i.delete(a):i.set(a,c),r=r.add(a)}return new Vr(t.key,i,new Wn(r.toArray()),Ci.none())}}function f3(t,e,n){t instanceof Vu?function(r,a,c){const h=r.value.clone(),m=rE(r.fieldTransforms,a,c.transformResults);h.setAll(m),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Vr?function(r,a,c){if(!wf(r.precondition,a))return void a.convertToUnknownDocument(c.version);const h=rE(r.fieldTransforms,a,c.transformResults),m=a.data;m.setAll(tC(r)),m.setAll(h),a.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(t,e,n):function(r,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function mu(t,e,n,i){return t instanceof Vu?function(a,c,h,m){if(!wf(a.precondition,c))return h;const p=a.value.clone(),v=sE(a.fieldTransforms,m,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof Vr?function(a,c,h,m){if(!wf(a.precondition,c))return h;const p=sE(a.fieldTransforms,m,c),v=c.data;return v.setAll(tC(a)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(E=>E.field))}(t,e,n,i):function(a,c,h){return wf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(t,e,n)}function d3(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),a=XA(i.transform,r||null);a!=null&&(n===null&&(n=Fn.empty()),n.set(i.field,a))}return n||null}function oE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Pa(i,r,(a,c)=>u3(a,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vu extends fd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Vr extends fd{constructor(e,n,i,r,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function tC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function rE(t,e,n){const i=new Map;pt(t.length===n.length);for(let r=0;r<n.length;r++){const a=t[r],c=a.transform,h=e.data.field(a.field);i.set(a.field,a3(c,h,n[r]))}return i}function sE(t,e,n){const i=new Map;for(const r of t){const a=r.transform,c=n.data.field(r.field);i.set(r.field,s3(a,c,e))}return i}class og extends fd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h3 extends fd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&f3(a,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=mu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=mu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=JA();return this.mutations.forEach(r=>{const a=e.get(r.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=n.has(r.key)?null:h;const m=eC(c,h);m!==null&&i.set(r.key,m),c.isValidDocument()||c.convertToNoDocument(Ve.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Xe())}isEqual(e){return this.batchId===e.batchId&&Pa(this.mutations,e.mutations,(n,i)=>oE(n,i))&&Pa(this.baseMutations,e.baseMutations,(n,i)=>oE(n,i))}}class rg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){pt(e.mutations.length===i.length);let r=function(){return t3}();const a=e.mutations;for(let c=0;c<a.length;c++)r=r.insert(a[c].key,i[c].version);return new rg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,nt;function y3(t){switch(t){default:return De();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function nC(t){if(t===void 0)return Bo("GRPC error has no .code"),le.UNKNOWN;switch(t){case Ht.OK:return le.OK;case Ht.CANCELLED:return le.CANCELLED;case Ht.UNKNOWN:return le.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return le.INTERNAL;case Ht.UNAVAILABLE:return le.UNAVAILABLE;case Ht.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Ht.NOT_FOUND:return le.NOT_FOUND;case Ht.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Ht.ABORTED:return le.ABORTED;case Ht.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Ht.DATA_LOSS:return le.DATA_LOSS;default:return De()}}(nt=Ht||(Ht={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3=new gs([4294967295,4294967295],0);function aE(t){const e=v3().encode(t),n=new RA;return n.update(e),new Uint8Array(n.digest())}function lE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new gs([n,i],0),new gs([r,a],0)]}class sg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new su(`Invalid padding: ${n}`);if(i<0)throw new su(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new su(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new su(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=gs.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(gs.fromNumber(i)));return r.compare(_3)===1&&(r=new gs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=aE(e),[i,r]=lE(n);for(let a=0;a<this.hashCount;a++){const c=this.Ee(i,r,a);if(!this.de(c))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new sg(a,r,n);return i.forEach(h=>c.insert(h)),c}insert(e){if(this.Ie===0)return;const n=aE(e),[i,r]=lE(n);for(let a=0;a<this.hashCount;a++){const c=this.Ee(i,r,a);this.Ae(c)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,n,i,r,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new dd(Ve.min(),r,new kt(rt),Fo(),Xe())}}class Lu{constructor(e,n,i,r,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Lu(i,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class iC{constructor(e,n){this.targetId=e,this.me=n}}class oC{constructor(e,n,i=vn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class uE{constructor(){this.fe=0,this.ge=fE(),this.pe=vn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Xe(),n=Xe(),i=Xe();return this.ge.forEach((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:De()}}),new Lu(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=fE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class T3{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fo(),this.qe=cE(),this.Qe=new kt(rt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:De()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const a=r.target;if(fm(a))if(i===0){const c=new Ie(a.path);this.Ue(n,c,Cn.newNoDocument(c,Ve.min()))}else pt(i===1);else{const c=this.Ye(n);if(c!==i){const h=this.Ze(e),m=h?this.Xe(h,e,c):1;if(m!==0){this.je(n);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=n;let c,h;try{c=Es(i).toUint8Array()}catch(m){if(m instanceof LA)return Da("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new sg(c,r,a)}catch(m){return Da(m instanceof su?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.Ie===0?null:h}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(a=>{const c=this.Le.tt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,a,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((a,c)=>{const h=this.Je(c);if(h){if(a.current&&fm(h.target)){const m=new Ie(h.target.path);this.ke.get(m)!==null||this.it(c,m)||this.Ue(c,m,Cn.newNoDocument(m,e))}a.be&&(n.set(c,a.ve()),a.Ce())}});let i=Xe();this.qe.forEach((a,c)=>{let h=!0;c.forEachWhile(m=>{const p=this.Je(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(a))}),this.ke.forEach((a,c)=>c.setReadTime(e));const r=new dd(e,n,this.Qe,this.ke,i);return this.ke=Fo(),this.qe=cE(),this.Qe=new kt(rt),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new uE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new gn(rt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new uE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function cE(){return new kt(Ie.comparator)}function fE(){return new kt(Ie.comparator)}const E3={asc:"ASCENDING",desc:"DESCENDING"},S3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A3={and:"AND",or:"OR"};class C3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hm(t,e){return t.useProto3Json||rd(e)?e:{value:e}}function $f(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function w3(t,e){return $f(t,e.toTimestamp())}function Zi(t){return pt(!!t),Ve.fromTimestamp(function(n){const i=Dr(n);return new Wt(i.seconds,i.nanos)}(t))}function ag(t,e){return pm(t,e).canonicalString()}function pm(t,e){const n=function(r){return new Mt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sC(t){const e=Mt.fromString(t);return pt(fC(e)),e}function mm(t,e){return ag(t.databaseId,e.path)}function kp(t,e){const n=sC(e);if(n.get(1)!==t.databaseId.projectId)throw new Se(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Se(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ie(lC(n))}function aC(t,e){return ag(t.databaseId,e)}function I3(t){const e=sC(t);return e.length===4?Mt.emptyPath():lC(e)}function gm(t){return new Mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lC(t){return pt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function dE(t,e,n){return{name:mm(t,e),fields:n.value.mapValue.fields}}function R3(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:De()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=function(p,v){return p.useProto3Json?(pt(v===void 0||typeof v=="string"),vn.fromBase64String(v||"")):(pt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),vn.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const v=p.code===void 0?le.UNKNOWN:nC(p.code);return new Se(v,p.message||"")}(c);n=new oC(i,r,a,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=kp(t,i.document.name),a=Zi(i.document.updateTime),c=i.document.createTime?Zi(i.document.createTime):Ve.min(),h=new Fn({mapValue:{fields:i.document.fields}}),m=Cn.newFoundDocument(r,a,c,h),p=i.targetIds||[],v=i.removedTargetIds||[];n=new If(p,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=kp(t,i.document),a=i.readTime?Zi(i.readTime):Ve.min(),c=Cn.newNoDocument(r,a),h=i.removedTargetIds||[];n=new If([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=kp(t,i.document),a=i.removedTargetIds||[];n=new If([],a,r,null)}else{if(!("filter"in e))return De();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,c=new g3(r,a),h=i.targetId;n=new iC(h,c)}}return n}function x3(t,e){let n;if(e instanceof Vu)n={update:dE(t,e.key,e.value)};else if(e instanceof og)n={delete:mm(t,e.key)};else if(e instanceof Vr)n={update:dE(t,e.key,e.data),updateMask:U3(e.fieldMask)};else{if(!(e instanceof h3))return De();n={verify:mm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const h=c.transform;if(h instanceof Au)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Cu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof wu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Hf)return{fieldPath:c.field.canonicalString(),increment:h.Pe};throw De()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,a){return a.updateTime!==void 0?{updateTime:w3(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:De()}(t,e.precondition)),n}function b3(t,e){return t&&t.length>0?(pt(e!==void 0),t.map(n=>function(r,a){let c=r.updateTime?Zi(r.updateTime):Zi(a);return c.isEqual(Ve.min())&&(c=Zi(a)),new c3(c,r.transformResults||[])}(n,e))):[]}function M3(t,e){return{documents:[aC(t,e.path)]}}function N3(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=aC(t,r);const a=function(p){if(p.length!==0)return cC(to.create(p,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const c=function(p){if(p.length!==0)return p.map(v=>function(S){return{field:Sa(S.field),direction:P3(S.dir)}}(v))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const h=hm(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:n,parent:r}}function k3(t){let e=I3(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){pt(i===1);const v=n.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let a=[];n.where&&(a=function(E){const S=uC(E);return S instanceof to&&FA(S)?S.getFilters():[S]}(n.where));let c=[];n.orderBy&&(c=function(E){return E.map(S=>function(x){return new zf(Aa(x.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(S))}(n.orderBy));let h=null;n.limit&&(h=function(E){let S;return S=typeof E=="object"?E.value:E,rd(S)?null:S}(n.limit));let m=null;n.startAt&&(m=function(E){const S=!!E.before,I=E.values||[];return new Gf(I,S)}(n.startAt));let p=null;return n.endAt&&(p=function(E){const S=!E.before,I=E.values||[];return new Gf(I,S)}(n.endAt)),Q4(e,r,c,a,h,"F",m,p)}function D3(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Aa(n.unaryFilter.field);return Xt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Aa(n.unaryFilter.field);return Xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Aa(n.unaryFilter.field);return Xt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Aa(n.unaryFilter.field);return Xt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(t):t.fieldFilter!==void 0?function(n){return Xt.create(Aa(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return to.create(n.compositeFilter.filters.map(i=>uC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return De()}}(n.compositeFilter.op))}(t):De()}function P3(t){return E3[t]}function V3(t){return S3[t]}function L3(t){return A3[t]}function Sa(t){return{fieldPath:t.canonicalString()}}function Aa(t){return mn.fromServerFormat(t.fieldPath)}function cC(t){return t instanceof Xt?function(n){if(n.op==="=="){if(Z0(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NAN"}};if(W0(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Z0(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NAN"}};if(W0(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(n.field),op:V3(n.op),value:n.value}}}(t):t instanceof to?function(n){const i=n.getFilters().map(r=>cC(r));return i.length===1?i[0]:{compositeFilter:{op:L3(n.op),filters:i}}}(t):De()}function U3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n,i,r,a=Ve.min(),c=Ve.min(),h=vn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new Cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.ct=e}}function B3(t){const e=k3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(){this.un=new q3}addToCollectionParentIndex(e,n){return this.un.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(kr.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(kr.min())}updateCollectionGroup(e,n,i){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class q3{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new gn(Mt.comparator),a=!r.has(i);return this.index[n]=r.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new gn(Mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ua(0)}static kn(){return new Ua(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(){this.changes=new Qa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ue.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&mu(i.mutation,r,Wn.empty(),Wt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Xe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Xe()){const r=ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(a=>{let c=ru();return a.forEach((h,m)=>{c=c.insert(h,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const i=ms();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Xe()))}populateOverlays(e,n,i){const r=[];return i.forEach(a=>{n.has(a)||r.push(a)}),this.documentOverlayCache.getOverlays(e,r).next(a=>{a.forEach((c,h)=>{n.set(c,h)})})}computeViews(e,n,i,r){let a=Fo();const c=pu(),h=function(){return pu()}();return n.forEach((m,p)=>{const v=i.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof Vr)?a=a.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),mu(v.mutation,p,v.mutation.getFieldMask(),Wt.now())):c.set(p.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((p,v)=>c.set(p,v)),n.forEach((p,v)=>{var E;return h.set(p,new z3(v,(E=c.get(p))!==null&&E!==void 0?E:null))}),h))}recalculateAndSaveOverlays(e,n){const i=pu();let r=new kt((c,h)=>c-h),a=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const h of c)h.keys().forEach(m=>{const p=n.get(m);if(p===null)return;let v=i.get(m)||Wn.empty();v=h.applyToLocalView(p,v),i.set(m,v);const E=(r.get(h.batchId)||Xe()).add(m);r=r.insert(h.batchId,E)})}).next(()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),p=m.key,v=m.value,E=JA();v.forEach(S=>{if(!a.has(S)){const I=eC(n.get(S),i.get(S));I!==null&&E.set(S,I),a=a.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return ue.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(c){return Ie.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):X4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(a=>{const c=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-a.size):ue.resolve(ms());let h=-1,m=a;return c.next(p=>ue.forEach(p,(v,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),a.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next(S=>{m=m.insert(v,S)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,m,p,Xe())).next(v=>({batchId:h,changes:KA(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next(i=>{let r=ru();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const a=n.collectionGroup;let c=ru();return this.indexManager.getCollectionParents(e,a).next(h=>ue.forEach(h,m=>{const p=function(E,S){return new sd(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(n,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,i,r).next(v=>{v.forEach((E,S)=>{c=c.insert(E,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,r))).next(c=>{a.forEach((m,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,Cn.newInvalidDocument(v)))});let h=ru();return c.forEach((m,p)=>{const v=a.get(m);v!==void 0&&mu(v.mutation,p,Wn.empty(),Wt.now()),ud(n,p)&&(h=h.insert(m,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ue.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Zi(r.createTime)}}(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:B3(r.bundledQuery),readTime:Zi(r.readTime)}}(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(){this.overlays=new kt(Ie.comparator),this.Ir=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ms();return ue.forEach(n,r=>this.getOverlay(e,r).next(a=>{a!==null&&i.set(r,a)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,a)=>{this.ht(e,n,a)}),ue.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(i)),ue.resolve()}getOverlaysForCollection(e,n,i){const r=ms(),a=n.length+1,c=new Ie(n.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,p=m.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&m.largestBatchId>i&&r.set(m.getKey(),m)}return ue.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let a=new kt((p,v)=>p-v);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let v=a.get(p.largestBatchId);v===null&&(v=ms(),a=a.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=ms(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,v)=>h.set(p,v)),!(h.size()>=r)););return ue.resolve(h)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new m3(n,i));let a=this.Ir.get(n);a===void 0&&(a=Xe(),this.Ir.set(n,a)),this.Ir.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(){this.sessionToken=vn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(){this.Tr=new gn(rn.Er),this.dr=new gn(rn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new rn(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new rn(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new Ie(new Mt([])),i=new rn(n,e),r=new rn(n,e+1),a=[];return this.dr.forEachInRange([i,r],c=>{this.Vr(c),a.push(c.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ie(new Mt([])),i=new rn(n,e),r=new rn(n,e+1);let a=Xe();return this.dr.forEachInRange([i,r],c=>{a=a.add(c.key)}),a}containsKey(e){const n=new rn(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class rn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ie.comparator(e.key,n.key)||rt(e.wr,n.wr)}static Ar(e,n){return rt(e.wr,n.wr)||Ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new gn(rn.Er)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new p3(a,n,i,r);this.mutationQueue.push(c);for(const h of r)this.br=this.br.add(new rn(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,n){return ue.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),a=r<0?0:r;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new rn(n,0),r=new rn(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([i,r],c=>{const h=this.Dr(c.wr);a.push(h)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new gn(rt);return n.forEach(r=>{const a=new rn(r,0),c=new rn(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,c],h=>{i=i.add(h.wr)})}),ue.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let a=i;Ie.isDocumentKey(a)||(a=a.child(""));const c=new rn(new Ie(a),0);let h=new gn(rt);return this.br.forEachWhile(m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(h=h.add(m.wr)),!0)},c),ue.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){pt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ue.forEach(n.mutations,r=>{const a=new rn(r.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new rn(n,0),r=this.br.firstAfterOrEqual(i);return ue.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.Mr=e,this.docs=function(){return new kt(Ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),a=r?r.size:0,c=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ue.resolve(i?i.document.mutableCopy():Cn.newInvalidDocument(n))}getEntries(e,n){let i=Fo();return n.forEach(r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Cn.newInvalidDocument(r))}),ue.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let a=Fo();const c=n.path,h=new Ie(c.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||M4(b4(v),i)<=0||(r.has(v.key)||ud(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,n,i,r){De()}Or(e,n){return ue.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new X3(this)}getSize(e){return ue.resolve(this.size)}}class X3 extends G3{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),ue.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e){this.persistence=e,this.Nr=new Qa(n=>tg(n),ng),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.Lr=0,this.Br=new lg,this.targetCount=0,this.kr=Ua.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),ue.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ua(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.Kn(n),ue.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,i){let r=0;const a=[];return this.Nr.forEach((c,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),ue.waitFor(a).next(()=>r)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return ue.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),ue.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,a=[];return r&&n.forEach(c=>{a.push(r.markPotentiallyOrphaned(e,c))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return ue.resolve(i)}containsKey(e,n){return ue.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Wm(0),this.Kr=!1,this.Kr=!0,this.$r=new K3,this.referenceDelegate=e(this),this.Ur=new W3(this),this.indexManager=new F3,this.remoteDocumentCache=function(r){return new Q3(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new O3(n),this.Gr=new $3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Y3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new J3(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){ve("MemoryPersistence","Starting transaction:",e);const r=new j3(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(a=>this.referenceDelegate.jr(r).next(()=>a)).toPromise().then(a=>(r.raiseOnCommittedEvent(),a))}Hr(e,n){return ue.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class j3 extends k4{constructor(e){super(),this.currentSequenceNumber=e}}class ug{constructor(e){this.persistence=e,this.Jr=new lg,this.Yr=null}static Zr(e){return new ug(e)}get Xr(){if(this.Yr)return this.Yr;throw De()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),ue.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(a=>this.Xr.add(a.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Xr,i=>{const r=Ie.fromPath(i);return this.ei(e,r).next(a=>{a||n.removeEntry(r,Ve.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ue.or([()=>ue.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=Xe(),r=Xe();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new cg(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return eL()?8:D4(In())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const a={result:null};return this.Yi(e,n).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Zi(e,n,r,i).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new eB;return this.Xi(e,n,c).next(h=>{if(a.result=h,this.zi)return this.es(e,n,c,h.size)})}).next(()=>a.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(nu()<=Ze.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Ea(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ue.resolve()):(nu()<=Ze.DEBUG&&ve("QueryEngine","Query:",Ea(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(nu()<=Ze.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Ea(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wi(n))):ue.resolve())}Yi(e,n){if(nE(n))return ue.resolve(null);let i=Wi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=dm(n,null,"F"),i=Wi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const c=Xe(...a);return this.Ji.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,i).next(m=>{const p=this.ts(n,h);return this.ns(n,p,c,m.readTime)?this.Yi(e,dm(n,null,"F")):this.rs(e,p,n,m)}))})))}Zi(e,n,i,r){return nE(n)||r.isEqual(Ve.min())?ue.resolve(null):this.Ji.getDocuments(e,i).next(a=>{const c=this.ts(n,a);return this.ns(n,c,i,r)?ue.resolve(null):(nu()<=Ze.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ea(n)),this.rs(e,c,n,x4(r,-1)).next(h=>h))})}ts(e,n){let i=new gn($A(e));return n.forEach((r,a)=>{ud(e,a)&&(i=i.add(a))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Xi(e,n,i){return nu()<=Ze.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Ea(n)),this.Ji.getDocumentsMatchingQuery(e,n,kr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(a=>(n.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new kt(rt),this._s=new Qa(a=>tg(a),ng),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new H3(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function iB(t,e,n,i){return new nB(t,e,n,i)}async function dC(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(a=>(r=a,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(a=>{const c=[],h=[];let m=Xe();for(const p of r){c.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of a){h.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return n.localDocuments.getDocuments(i,m).next(p=>({hs:p,removedBatchIds:c,addedBatchIds:h}))})})}function oB(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,m,p,v){const E=p.batch,S=E.keys();let I=ue.resolve();return S.forEach(x=>{I=I.next(()=>v.getEntry(m,x)).next(O=>{const F=p.docVersions.get(x);pt(F!==null),O.version.compareTo(F)<0&&(E.applyToRemoteDocument(O,p),O.isValidDocument()&&(O.setReadTime(p.commitVersion),v.addEntry(O)))})}),I.next(()=>h.mutationQueue.removeMutationBatch(m,E))}(n,i,e,a).next(()=>a.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let m=Xe();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(m=m.add(h.batch.mutations[p].key));return m}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function hC(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function rB(t,e){const n=Le(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const h=[];e.targetChanges.forEach((v,E)=>{const S=r.get(E);if(!S)return;h.push(n.Ur.removeMatchingKeys(a,v.removedDocuments,E).next(()=>n.Ur.addMatchingKeys(a,v.addedDocuments,E)));let I=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(vn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,i)),r=r.insert(E,I),function(O,F,re){return O.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0}(S,I,v)&&h.push(n.Ur.updateTargetData(a,I))});let m=Fo(),p=Xe();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(sB(a,c,e.documentUpdates).next(v=>{m=v.Ps,p=v.Is})),!i.isEqual(Ve.min())){const v=n.Ur.getLastRemoteSnapshotVersion(a).next(E=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,i));h.push(v)}return ue.waitFor(h).next(()=>c.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,m,p)).next(()=>m)}).then(a=>(n.os=r,a))}function sB(t,e,n){let i=Xe(),r=Xe();return n.forEach(a=>i=i.add(a)),e.getEntries(t,i).next(a=>{let c=Fo();return n.forEach((h,m)=>{const p=a.get(h);m.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(h)),m.isNoDocument()&&m.version.isEqual(Ve.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):ve("LocalStore","Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",m.version)}),{Ps:c,Is:r}})}function aB(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function lB(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(a=>a?(r=a,ue.resolve(r)):n.Ur.allocateTargetId(i).next(c=>(r=new Cr(e,c,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function ym(t,e,n){const i=Le(t),r=i.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,c=>i.persistence.referenceDelegate.removeTarget(c,r))}catch(c){if(!Pu(c))throw c;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function hE(t,e,n){const i=Le(t);let r=Ve.min(),a=Xe();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,v){const E=Le(m),S=E._s.get(v);return S!==void 0?ue.resolve(E.os.get(S)):E.Ur.getTargetData(p,v)}(i,c,Wi(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(c,h.targetId).next(m=>{a=m})}).next(()=>i.ss.getDocumentsMatchingQuery(c,e,n?r:Ve.min(),n?a:Xe())).next(h=>(uB(i,Z4(e),h),{documents:h,Ts:a})))}function uB(t,e,n){let i=t.us.get(e)||Ve.min();n.forEach((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),t.us.set(e,i)}class pE{constructor(){this.activeTargetIds=o3()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cB{constructor(){this.so=new pE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new pE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf=null;function Dp(){return hf===null?hf=function(){return 268435456+Math.round(2147483648*Math.random())}():hf++,"0x"+hf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class pB extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${a}`}get Fo(){return!1}Mo(n,i,r,a,c){const h=Dp(),m=this.xo(n,i.toUriEncodedString());ve("RestConnection",`Sending RPC '${n}' ${h}:`,m,r);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,a,c),this.No(n,m,p,r).then(v=>(ve("RestConnection",`Received RPC '${n}' ${h}: `,v),v),v=>{throw Da("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",m,"request:",r),v})}Lo(n,i,r,a,c,h){return this.Mo(n,i,r,a,c)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ja}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((a,c)=>n[c]=a),r&&r.headers.forEach((a,c)=>n[c]=a)}xo(n,i){const r=dB[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const a=Dp();return new Promise((c,h)=>{const m=new xA;m.setWithCredentials(!0),m.listenOnce(bA.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Af.NO_ERROR:const v=m.getResponseJson();ve(Sn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),c(v);break;case Af.TIMEOUT:ve(Sn,`RPC '${e}' ${a} timed out`),h(new Se(le.DEADLINE_EXCEEDED,"Request time out"));break;case Af.HTTP_ERROR:const E=m.getStatus();if(ve(Sn,`RPC '${e}' ${a} failed with status:`,E,"response text:",m.getResponseText()),E>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const I=S==null?void 0:S.error;if(I&&I.status&&I.message){const x=function(F){const re=F.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(re)>=0?re:le.UNKNOWN}(I.status);h(new Se(x,I.message))}else h(new Se(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Se(le.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{ve(Sn,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(r);ve(Sn,`RPC '${e}' ${a} sending request:`,r),m.send(n,"POST",p,i,15)})}Bo(e,n,i){const r=Dp(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=kA(),h=NA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Oo(m.initMessageHeaders,n,i),m.encodeInitMessageHeaders=!0;const v=a.join("");ve(Sn,`Creating RPC '${e}' stream ${r}: ${v}`,m);const E=c.createWebChannel(v,m);let S=!1,I=!1;const x=new hB({Io:F=>{I?ve(Sn,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(S||(ve(Sn,`Opening RPC '${e}' stream ${r} transport.`),E.open(),S=!0),ve(Sn,`RPC '${e}' stream ${r} sending:`,F),E.send(F))},To:()=>E.close()}),O=(F,re,te)=>{F.listen(re,ne=>{try{te(ne)}catch(ce){setTimeout(()=>{throw ce},0)}})};return O(E,ou.EventType.OPEN,()=>{I||(ve(Sn,`RPC '${e}' stream ${r} transport opened.`),x.yo())}),O(E,ou.EventType.CLOSE,()=>{I||(I=!0,ve(Sn,`RPC '${e}' stream ${r} transport closed`),x.So())}),O(E,ou.EventType.ERROR,F=>{I||(I=!0,Da(Sn,`RPC '${e}' stream ${r} transport errored:`,F),x.So(new Se(le.UNAVAILABLE,"The operation could not be completed")))}),O(E,ou.EventType.MESSAGE,F=>{var re;if(!I){const te=F.data[0];pt(!!te);const ne=te,ce=ne.error||((re=ne[0])===null||re===void 0?void 0:re.error);if(ce){ve(Sn,`RPC '${e}' stream ${r} received error:`,ce);const se=ce.status;let me=function(b){const L=Ht[b];if(L!==void 0)return nC(L)}(se),D=ce.message;me===void 0&&(me=le.INTERNAL,D="Unknown error status: "+se+" with message "+ce.message),I=!0,x.So(new Se(me,D)),E.close()}else ve(Sn,`RPC '${e}' stream ${r} received:`,te),x.bo(te)}}),O(h,MA.STAT_EVENT,F=>{F.stat===am.PROXY?ve(Sn,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===am.NOPROXY&&ve(Sn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function Pp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(t){return new C3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n,i=1e3,r=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&ve("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n,i,r,a,c,h,m){this.ui=e,this.Ho=i,this.Jo=r,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new pC(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(Bo(n.toString()),Bo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new Se(le.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mB extends mC{constructor(e,n,i,r,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,c),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=R3(this.serializer,e),i=function(a){if(!("targetChange"in a))return Ve.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Ve.min():c.readTime?Zi(c.readTime):Ve.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=gm(this.serializer),n.addTarget=function(a,c){let h;const m=c.target;if(h=fm(m)?{documents:M3(a,m)}:{query:N3(a,m)._t},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=rC(a,c.resumeToken);const p=hm(a,c.expectedCount);p!==null&&(h.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ve.min())>0){h.readTime=$f(a,c.snapshotVersion.toTimestamp());const p=hm(a,c.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=D3(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=gm(this.serializer),n.removeTarget=e,this.a_(n)}}class gB extends mC{constructor(e,n,i,r,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,c),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pt(!!e.streamToken),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=b3(e.writeResults,e.commitTime),i=Zi(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=gm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>x3(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Se(le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Mo(e,pm(n,i),r,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Se(le.UNKNOWN,a.toString())})}Lo(e,n,i,r,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Lo(e,pm(n,i),r,c,h,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Se(le.UNKNOWN,c.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class vB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Bo(n),this.D_=!1):ve("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e,n,i,r,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(c=>{i.enqueueAndForget(async()=>{xs(this)&&(ve("RemoteStore","Restarting streams for network reachability change."),await async function(m){const p=Le(m);p.L_.add(4),await Uu(p),p.q_.set("Unknown"),p.L_.delete(4),await pd(p)}(this))})}),this.q_=new vB(i,r)}}async function pd(t){if(xs(t))for(const e of t.B_)await e(!0)}async function Uu(t){for(const e of t.B_)await e(!1)}function gC(t,e){const n=Le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),pg(n)?hg(n):Xa(n).r_()&&dg(n,e))}function fg(t,e){const n=Le(t),i=Xa(n);n.N_.delete(e),i.r_()&&yC(n,e),n.N_.size===0&&(i.r_()?i.o_():xs(n)&&n.q_.set("Unknown"))}function dg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xa(t).A_(e)}function yC(t,e){t.Q_.xe(e),Xa(t).R_(e)}function hg(t){t.Q_=new T3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Xa(t).start(),t.q_.v_()}function pg(t){return xs(t)&&!Xa(t).n_()&&t.N_.size>0}function xs(t){return Le(t).L_.size===0}function vC(t){t.Q_=void 0}async function TB(t){t.q_.set("Online")}async function EB(t){t.N_.forEach((e,n)=>{dg(t,e)})}async function SB(t,e){vC(t),pg(t)?(t.q_.M_(e),hg(t)):t.q_.set("Unknown")}async function AB(t,e,n){if(t.q_.set("Online"),e instanceof oC&&e.state===2&&e.cause)try{await async function(r,a){const c=a.cause;for(const h of a.targetIds)r.N_.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.N_.delete(h),r.Q_.removeTarget(h))}(t,e)}catch(i){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Yf(t,i)}else if(e instanceof If?t.Q_.Ke(e):e instanceof iC?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ve.min()))try{const i=await hC(t.localStore);n.compareTo(i)>=0&&await function(a,c){const h=a.Q_.rt(c);return h.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=a.N_.get(p);v&&a.N_.set(p,v.withResumeToken(m.resumeToken,c))}}),h.targetMismatches.forEach((m,p)=>{const v=a.N_.get(m);if(!v)return;a.N_.set(m,v.withResumeToken(vn.EMPTY_BYTE_STRING,v.snapshotVersion)),yC(a,m);const E=new Cr(v.target,m,p,v.sequenceNumber);dg(a,E)}),a.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){ve("RemoteStore","Failed to raise snapshot:",i),await Yf(t,i)}}async function Yf(t,e,n){if(!Pu(e))throw e;t.L_.add(1),await Uu(t),t.q_.set("Offline"),n||(n=()=>hC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ve("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await pd(t)})}function _C(t,e){return e().catch(n=>Yf(t,n,e))}async function md(t){const e=Le(t),n=Pr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;CB(e);)try{const r=await aB(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,wB(e,r)}catch(r){await Yf(e,r)}TC(e)&&EC(e)}function CB(t){return xs(t)&&t.O_.length<10}function wB(t,e){t.O_.push(e);const n=Pr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function TC(t){return xs(t)&&!Pr(t).n_()&&t.O_.length>0}function EC(t){Pr(t).start()}async function IB(t){Pr(t).p_()}async function RB(t){const e=Pr(t);for(const n of t.O_)e.m_(n.mutations)}async function xB(t,e,n){const i=t.O_.shift(),r=rg.from(i,e,n);await _C(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await md(t)}async function bB(t,e){e&&Pr(t).V_&&await async function(i,r){if(function(c){return y3(c)&&c!==le.ABORTED}(r.code)){const a=i.O_.shift();Pr(i).s_(),await _C(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r)),await md(i)}}(t,e),TC(t)&&EC(t)}async function gE(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const i=xs(n);n.L_.add(3),await Uu(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await pd(n)}async function MB(t,e){const n=Le(t);e?(n.L_.delete(2),await pd(n)):e||(n.L_.add(2),await Uu(n),n.q_.set("Unknown"))}function Xa(t){return t.K_||(t.K_=function(n,i,r){const a=Le(n);return a.w_(),new mB(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(t.datastore,t.asyncQueue,{Eo:TB.bind(null,t),Ro:EB.bind(null,t),mo:SB.bind(null,t),d_:AB.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),pg(t)?hg(t):t.q_.set("Unknown")):(await t.K_.stop(),vC(t))})),t.K_}function Pr(t){return t.U_||(t.U_=function(n,i,r){const a=Le(n);return a.w_(),new gB(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:IB.bind(null,t),mo:bB.bind(null,t),f_:RB.bind(null,t),g_:xB.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await md(t)):(await t.U_.stop(),t.O_.length>0&&(ve("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,i,r,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,a){const c=Date.now()+i,h=new mg(e,n,c,r,a);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(t,e){if(Bo("AsyncQueue",`${e}: ${t}`),Pu(t))return new Se(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ie.comparator(n.key,i.key):(n,i)=>Ie.comparator(n.key,i.key),this.keyedMap=ru(),this.sortedSet=new kt(this.comparator)}static emptySet(e){return new Na(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Na)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Na;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(){this.W_=new kt(Ie.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):De():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Oa{constructor(e,n,i,r,a,c,h,m,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,r,a){const c=[];return n.forEach(h=>{c.push({type:0,doc:h})}),new Oa(e,n,Na.emptySet(n),c,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class kB{constructor(){this.queries=vE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=Le(n),a=r.queries;r.queries=vE(),a.forEach((c,h)=>{for(const m of h.j_)m.onError(i)})})(this,new Se(le.ABORTED,"Firestore shutting down"))}}function vE(){return new Qa(t=>HA(t),ld)}async function SC(t,e){const n=Le(t);let i=3;const r=e.query;let a=n.queries.get(r);a?!a.H_()&&e.J_()&&(i=2):(a=new NB,i=e.J_()?0:1);try{switch(i){case 0:a.z_=await n.onListen(r,!0);break;case 1:a.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(c){const h=gg(c,`Initialization of query '${Ea(e.query)}' failed`);return void e.onError(h)}n.queries.set(r,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&yg(n)}async function AC(t,e){const n=Le(t),i=e.query;let r=3;const a=n.queries.get(i);if(a){const c=a.j_.indexOf(e);c>=0&&(a.j_.splice(c,1),a.j_.length===0?r=e.J_()?0:1:!a.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function DB(t,e){const n=Le(t);let i=!1;for(const r of e){const a=r.query,c=n.queries.get(a);if(c){for(const h of c.j_)h.X_(r)&&(i=!0);c.z_=r}}i&&yg(n)}function PB(t,e,n){const i=Le(t),r=i.queries.get(e);if(r)for(const a of r.j_)a.onError(n);i.queries.delete(e)}function yg(t){t.Y_.forEach(e=>{e.next()})}var vm,_E;(_E=vm||(vm={})).ea="default",_E.Cache="cache";class CC{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Oa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.key=e}}class IC{constructor(e){this.key=e}}class VB{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Xe(),this.mutatedKeys=Xe(),this.Aa=$A(e),this.Ra=new Na(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new yE,r=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,c=r,h=!1;const m=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((v,E)=>{const S=r.get(v),I=ud(this.query,E)?E:null,x=!!S&&this.mutatedKeys.has(S.key),O=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let F=!1;S&&I?S.data.isEqual(I.data)?x!==O&&(i.track({type:3,doc:I}),F=!0):this.ga(S,I)||(i.track({type:2,doc:I}),F=!0,(m&&this.Aa(I,m)>0||p&&this.Aa(I,p)<0)&&(h=!0)):!S&&I?(i.track({type:0,doc:I}),F=!0):S&&!I&&(i.track({type:1,doc:S}),F=!0,(m||p)&&(h=!0)),F&&(I?(c=c.add(I),a=O?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{Ra:c,fa:i,ns:h,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const c=e.fa.G_();c.sort((v,E)=>function(I,x){const O=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return O(I)-O(x)}(v.type,E.type)||this.Aa(v.doc,E.doc)),this.pa(i),r=r!=null&&r;const h=n&&!r?this.ya():[],m=this.da.size===0&&this.current&&!r?1:0,p=m!==this.Ea;return this.Ea=m,c.length!==0||p?{snapshot:new Oa(this.query,e.Ra,a,c,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new yE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Xe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new IC(i))}),this.da.forEach(i=>{e.has(i)||n.push(new wC(i))}),n}ba(e){this.Ta=e.Ts,this.da=Xe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Oa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class LB{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class UB{constructor(e){this.key=e,this.va=!1}}class OB{constructor(e,n,i,r,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Qa(h=>HA(h),ld),this.Ma=new Map,this.xa=new Set,this.Oa=new kt(Ie.comparator),this.Na=new Map,this.La=new lg,this.Ba={},this.ka=new Map,this.qa=Ua.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function BB(t,e,n=!0){const i=kC(t);let r;const a=i.Fa.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.Da()):r=await RC(i,e,n,!0),r}async function FB(t,e){const n=kC(t);await RC(n,e,!0,!1)}async function RC(t,e,n,i){const r=await lB(t.localStore,Wi(e)),a=r.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let h;return i&&(h=await qB(t,e,a,c==="current",r.resumeToken)),t.isPrimaryClient&&n&&gC(t.remoteStore,r),h}async function qB(t,e,n,i,r){t.Ka=(E,S,I)=>async function(O,F,re,te){let ne=F.view.ma(re);ne.ns&&(ne=await hE(O.localStore,F.query,!1).then(({documents:D})=>F.view.ma(D,ne)));const ce=te&&te.targetChanges.get(F.targetId),se=te&&te.targetMismatches.get(F.targetId)!=null,me=F.view.applyChanges(ne,O.isPrimaryClient,ce,se);return EE(O,F.targetId,me.wa),me.snapshot}(t,E,S,I);const a=await hE(t.localStore,e,!0),c=new VB(e,a.Ts),h=c.ma(a.documents),m=Lu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),p=c.applyChanges(h,t.isPrimaryClient,m);EE(t,n,p.wa);const v=new LB(e,n,c);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function GB(t,e,n){const i=Le(t),r=i.Fa.get(e),a=i.Ma.get(r.targetId);if(a.length>1)return i.Ma.set(r.targetId,a.filter(c=>!ld(c,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ym(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&fg(i.remoteStore,r.targetId),_m(i,r.targetId)}).catch(Du)):(_m(i,r.targetId),await ym(i.localStore,r.targetId,!0))}async function zB(t,e){const n=Le(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),fg(n.remoteStore,i.targetId))}async function HB(t,e,n){const i=WB(t);try{const r=await function(c,h){const m=Le(c),p=Wt.now(),v=h.reduce((I,x)=>I.add(x.key),Xe());let E,S;return m.persistence.runTransaction("Locally write mutations","readwrite",I=>{let x=Fo(),O=Xe();return m.cs.getEntries(I,v).next(F=>{x=F,x.forEach((re,te)=>{te.isValidDocument()||(O=O.add(re))})}).next(()=>m.localDocuments.getOverlayedDocuments(I,x)).next(F=>{E=F;const re=[];for(const te of h){const ne=d3(te,E.get(te.key).overlayedDocument);ne!=null&&re.push(new Vr(te.key,ne,UA(ne.value.mapValue),Ci.exists(!0)))}return m.mutationQueue.addMutationBatch(I,p,re,h)}).next(F=>{S=F;const re=F.applyToLocalDocumentSet(E,O);return m.documentOverlayCache.saveOverlays(I,F.batchId,re)})}).then(()=>({batchId:S.batchId,changes:KA(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(c,h,m){let p=c.Ba[c.currentUser.toKey()];p||(p=new kt(rt)),p=p.insert(h,m),c.Ba[c.currentUser.toKey()]=p}(i,r.batchId,n),await Ou(i,r.changes),await md(i.remoteStore)}catch(r){const a=gg(r,"Failed to persist write");n.reject(a)}}async function xC(t,e){const n=Le(t);try{const i=await rB(n.localStore,e);e.targetChanges.forEach((r,a)=>{const c=n.Na.get(a);c&&(pt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.va=!0:r.modifiedDocuments.size>0?pt(c.va):r.removedDocuments.size>0&&(pt(c.va),c.va=!1))}),await Ou(n,i,e)}catch(i){await Du(i)}}function TE(t,e,n){const i=Le(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((a,c)=>{const h=c.view.Z_(e);h.snapshot&&r.push(h.snapshot)}),function(c,h){const m=Le(c);m.onlineState=h;let p=!1;m.queries.forEach((v,E)=>{for(const S of E.j_)S.Z_(h)&&(p=!0)}),p&&yg(m)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function $B(t,e,n){const i=Le(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),a=r&&r.key;if(a){let c=new kt(Ie.comparator);c=c.insert(a,Cn.newNoDocument(a,Ve.min()));const h=Xe().add(a),m=new dd(Ve.min(),new Map,new kt(rt),c,h);await xC(i,m),i.Oa=i.Oa.remove(a),i.Na.delete(e),vg(i)}else await ym(i.localStore,e,!1).then(()=>_m(i,e,n)).catch(Du)}async function YB(t,e){const n=Le(t),i=e.batch.batchId;try{const r=await oB(n.localStore,e);MC(n,i,null),bC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ou(n,r)}catch(r){await Du(r)}}async function KB(t,e,n){const i=Le(t);try{const r=await function(c,h){const m=Le(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return m.mutationQueue.lookupMutationBatch(p,h).next(E=>(pt(E!==null),v=E.keys(),m.mutationQueue.removeMutationBatch(p,E))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,h)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>m.localDocuments.getDocuments(p,v))})}(i.localStore,e);MC(i,e,n),bC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ou(i,r)}catch(r){await Du(r)}}function bC(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function MC(t,e,n){const i=Le(t);let r=i.Ba[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(n?a.reject(n):a.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function _m(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||NC(t,i)})}function NC(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(fg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),vg(t))}function EE(t,e,n){for(const i of n)i instanceof wC?(t.La.addReference(i.key,e),JB(t,i)):i instanceof IC?(ve("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||NC(t,i.key)):De()}function JB(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(ve("SyncEngine","New document in limbo: "+n),t.xa.add(i),vg(t))}function vg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ie(Mt.fromString(e)),i=t.qa.next();t.Na.set(i,new UB(n)),t.Oa=t.Oa.insert(n,i),gC(t.remoteStore,new Cr(Wi(ad(n.path)),i,"TargetPurposeLimboResolution",Wm.oe))}}async function Ou(t,e,n){const i=Le(t),r=[],a=[],c=[];i.Fa.isEmpty()||(i.Fa.forEach((h,m)=>{c.push(i.Ka(m,e,n).then(p=>{var v;if((p||n)&&i.isPrimaryClient){const E=p?!p.fromCache:(v=n==null?void 0:n.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(p){r.push(p);const E=cg.Wi(m.targetId,p);a.push(E)}}))}),await Promise.all(c),i.Ca.d_(r),await async function(m,p){const v=Le(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ue.forEach(p,S=>ue.forEach(S.$i,I=>v.persistence.referenceDelegate.addReference(E,S.targetId,I)).next(()=>ue.forEach(S.Ui,I=>v.persistence.referenceDelegate.removeReference(E,S.targetId,I)))))}catch(E){if(!Pu(E))throw E;ve("LocalStore","Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const I=v.os.get(S),x=I.snapshotVersion,O=I.withLastLimboFreeSnapshotVersion(x);v.os=v.os.insert(S,O)}}}(i.localStore,a))}async function QB(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const i=await dC(n.localStore,e);n.currentUser=e,function(a,c){a.ka.forEach(h=>{h.forEach(m=>{m.reject(new Se(le.CANCELLED,c))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ou(n,i.hs)}}function XB(t,e){const n=Le(t),i=n.Na.get(e);if(i&&i.va)return Xe().add(i.key);{let r=Xe();const a=n.Ma.get(e);if(!a)return r;for(const c of a){const h=n.Fa.get(c);r=r.unionWith(h.view.Va)}return r}}function kC(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$B.bind(null,e),e.Ca.d_=DB.bind(null,e.eventManager),e.Ca.$a=PB.bind(null,e.eventManager),e}function WB(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KB.bind(null,e),e}class Kf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return iB(this.persistence,new tB,e.initialUser,this.serializer)}Ga(e){return new Z3(ug.Zr,this.serializer)}Wa(e){return new cB}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kf.provider={build:()=>new Kf};class Tm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>TE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=QB.bind(null,this.syncEngine),await MB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kB}()}createDatastore(e){const n=hd(e.databaseInfo.databaseId),i=function(a){return new pB(a)}(e.databaseInfo);return function(a,c,h,m){return new yB(a,c,h,m)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,a,c,h){return new _B(i,r,a,c,h)}(this.localStore,this.datastore,e.asyncQueue,n=>TE(this.syncEngine,n,0),function(){return mE.D()?new mE:new fB}())}createSyncEngine(e,n){return function(r,a,c,h,m,p,v){const E=new OB(r,a,c,h,m,p);return v&&(E.Qa=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const a=Le(r);ve("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Uu(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Tm.provider={build:()=>new Tm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Bo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(e,n,i,r,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=An.UNAUTHENTICATED,this.clientId=PA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async c=>{ve("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ve("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=gg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Vp(t,e){t.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await dC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function SE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jB(t);ve("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>gE(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>gE(e.remoteStore,r)),t._onlineComponents=e}async function jB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{await Vp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===le.FAILED_PRECONDITION||r.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Da("Error using user provided cache. Falling back to memory cache: "+n),await Vp(t,new Kf)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),await Vp(t,new Kf);return t._offlineComponents}async function PC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),await SE(t,t._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),await SE(t,new Tm))),t._onlineComponents}function eF(t){return PC(t).then(e=>e.syncEngine)}async function Em(t){const e=await PC(t),n=e.eventManager;return n.onListen=BB.bind(null,e.syncEngine),n.onUnlisten=GB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=FB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zB.bind(null,e.syncEngine),n}function tF(t,e,n={}){const i=new br;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,h,m,p){const v=new DC({next:S=>{v.Za(),c.enqueueAndForget(()=>AC(a,E));const I=S.docs.has(h);!I&&S.fromCache?p.reject(new Se(le.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&m&&m.source==="server"?p.reject(new Se(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new CC(ad(h.path),v,{includeMetadataChanges:!0,_a:!0});return SC(a,E)}(await Em(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(t,e,n){if(!n)throw new Se(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nF(t,e,n,i){if(e===!0&&i===!0)throw new Se(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function CE(t){if(!Ie.isDocumentKey(t))throw new Se(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wE(t){if(Ie.isDocumentKey(t))throw new Se(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _g(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":De()}function wi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Se(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_g(t);throw new Se(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Se(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Se(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Se(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Se(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Se(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IE(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new _4;switch(i.type){case"firstParty":return new A4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=AE.get(n);i&&(ve("ComponentProvider","Removing Datastore"),AE.delete(n),i.terminate())}(this),Promise.resolve()}}function iF(t,e,n,i={}){var r;const a=(t=wi(t,gd))._getSettings(),c=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==c&&Da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),i.mockUserToken){let h,m;if(typeof i.mockUserToken=="string")h=i.mockUserToken,m=An.MOCK_USER;else{h=KV(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Se(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new An(p)}t._authCredentials=new T4(new DA(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new yd(this.firestore,e,this._query)}}class Pn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pn(this.firestore,e,this._key)}}class Mr extends yd{constructor(e,n,i){super(e,n,ad(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pn(this.firestore,null,new Ie(e))}withConverter(e){return new Mr(this.firestore,e,this._path)}}function oF(t,e,...n){if(t=yn(t),LC("collection","path",e),t instanceof gd){const i=Mt.fromString(e,...n);return wE(i),new Mr(t,null,i)}{if(!(t instanceof Pn||t instanceof Mr))throw new Se(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Mt.fromString(e,...n));return wE(i),new Mr(t.firestore,null,i)}}function di(t,e,...n){if(t=yn(t),arguments.length===1&&(e=PA.newId()),LC("doc","path",e),t instanceof gd){const i=Mt.fromString(e,...n);return CE(i),new Pn(t,null,new Ie(i))}{if(!(t instanceof Pn||t instanceof Mr))throw new Se(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Mt.fromString(e,...n));return CE(i),new Pn(t.firestore,t instanceof Mr?t.converter:null,new Ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new pC(this,"async_queue_retry"),this.Vu=()=>{const i=Pp();i&&ve("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Pp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Pp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new br;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Pu(e))throw e;ve("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),h}(i);throw Bo("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=mg.createAndSchedule(this,e,n,i,a=>this.yu(a));return this.Tu.push(r),r}fu(){this.Eu&&De()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function xE(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const a of i)if(a in r&&typeof r[a]=="function")return!0;return!1}(t,["next","error","complete"])}class As extends gd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new RE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new RE(e),this._firestoreClient=void 0,await e}}}function rF(t,e){const n=typeof t=="object"?t:$S(),i=typeof t=="string"?t:"(default)",r=Bm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=$V("firestore");a&&iF(r,...a)}return r}function Tg(t){if(t._terminated)throw new Se(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sF(t),t._firestoreClient}function sF(t){var e,n,i;const r=t._freezeSettings(),a=function(h,m,p,v){return new L4(h,m,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,VC(v.experimentalLongPollingOptions),v.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new ZB(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ba(vn.fromBase64String(e))}catch(n){throw new Se(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ba(vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF=/^__.*__$/;class lF{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vu(e,this.data,n,this.fieldTransforms)}}class UC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function OC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class Ag{constructor(e,n,i,r,a,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ag(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(OC(this.Cu)&&aF.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class uF{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||hd(e)}Qu(e,n,i,r=!1){return new Ag({Cu:e,methodName:n,qu:i,path:mn.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function BC(t){const e=t._freezeSettings(),n=hd(t._databaseId);return new uF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cF(t,e,n,i,r,a={}){const c=t.Qu(a.merge||a.mergeFields?2:0,e,n,r);wg("Data must be an object, but it was:",c,i);const h=FC(i,c);let m,p;if(a.merge)m=new Wn(c.fieldMask),p=c.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const S=Sm(e,E,n);if(!c.contains(S))throw new Se(le.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);GC(v,S)||v.push(S)}m=new Wn(v),p=c.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,p=c.fieldTransforms;return new lF(new Fn(h),m,p)}class Td extends _d{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Td}}class Cg extends _d{_toFieldTransform(e){return new l3(e.path,new Au)}isEqual(e){return e instanceof Cg}}function fF(t,e,n,i){const r=t.Qu(1,e,n);wg("Data must be an object, but it was:",r,i);const a=[],c=Fn.empty();Rs(i,(m,p)=>{const v=Ig(e,m,n);p=yn(p);const E=r.Nu(v);if(p instanceof Td)a.push(v);else{const S=Ed(p,E);S!=null&&(a.push(v),c.set(v,S))}});const h=new Wn(a);return new UC(c,h,r.fieldTransforms)}function dF(t,e,n,i,r,a){const c=t.Qu(1,e,n),h=[Sm(e,i,n)],m=[r];if(a.length%2!=0)throw new Se(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)h.push(Sm(e,a[S])),m.push(a[S+1]);const p=[],v=Fn.empty();for(let S=h.length-1;S>=0;--S)if(!GC(p,h[S])){const I=h[S];let x=m[S];x=yn(x);const O=c.Nu(I);if(x instanceof Td)p.push(I);else{const F=Ed(x,O);F!=null&&(p.push(I),v.set(I,F))}}const E=new Wn(p);return new UC(v,E,c.fieldTransforms)}function Ed(t,e){if(qC(t=yn(t)))return wg("Unsupported field value:",e,t),FC(t,e);if(t instanceof _d)return function(i,r){if(!OC(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const a=[];let c=0;for(const h of i){let m=Ed(h,r.Lu(c));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),c++}return{arrayValue:{values:a}}}(t,e)}return function(i,r){if((i=yn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return r3(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Wt.fromDate(i);return{timestampValue:$f(r.serializer,a)}}if(i instanceof Wt){const a=new Wt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$f(r.serializer,a)}}if(i instanceof Eg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ba)return{bytesValue:rC(r.serializer,i._byteString)};if(i instanceof Pn){const a=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(a))throw r.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ag(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Sg)return function(c,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw h.Bu("VectorValues must only contain numeric values.");return ig(h.serializer,m)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${_g(i)}`)}(t,e)}function FC(t,e){const n={};return VA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rs(t,(i,r)=>{const a=Ed(r,e.Mu(i));a!=null&&(n[i]=a)}),{mapValue:{fields:n}}}function qC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Wt||t instanceof Eg||t instanceof Ba||t instanceof Pn||t instanceof _d||t instanceof Sg)}function wg(t,e,n){if(!qC(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=_g(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Sm(t,e,n){if((e=yn(e))instanceof vd)return e._internalPath;if(typeof e=="string")return Ig(t,e);throw Jf("Field path arguments must be of type string or ",t,!1,void 0,n)}const hF=new RegExp("[~\\*/\\[\\]]");function Ig(t,e,n){if(e.search(hF)>=0)throw Jf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vd(...e.split("."))._internalPath}catch{throw Jf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jf(t,e,n,i,r){const a=i&&!i.isEmpty(),c=r!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||c)&&(m+=" (found",a&&(m+=` in field ${i}`),c&&(m+=` in document ${r}`),m+=")"),new Se(le.INVALID_ARGUMENT,h+t+m)}function GC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,i,r,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(HC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pF extends zC{data(){return super.data()}}function HC(t,e){return typeof e=="string"?Ig(t,e):e instanceof vd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Se(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gF{convertValue(e,n="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Rs(e,(r,a)=>{i[r]=this.convertValue(a,n)}),i}convertVectorValue(e){var n,i,r;const a=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(c=>Ft(c.doubleValue));return new Sg(a)}convertGeoPoint(e){return new Eg(Ft(e.latitude),Ft(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=jm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Tu(e));default:return null}}convertTimestamp(e){const n=Dr(e);return new Wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Mt.fromString(e);pt(fC(i));const r=new Eu(i.get(1),i.get(3)),a=new Ie(i.popFirst(5));return r.isEqual(n)||Bo(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $C extends zC{constructor(e,n,i,r,a,c){super(e,n,i,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(HC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Rf extends $C{data(e={}){return super.data(e)}}class vF{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new au(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Rf(this._firestore,this._userDataWriter,i.key,i,new au(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>{const m=new Rf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new au(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const m=new Rf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new au(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return h.type!==0&&(p=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:_F(h.type),doc:m,oldIndex:p,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function _F(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(t){t=wi(t,Pn);const e=wi(t.firestore,As);return tF(Tg(e),t._key).then(n=>KC(e,t,n))}class YC extends gF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ba(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,n)}}function bo(t,e,n){t=wi(t,Pn);const i=wi(t.firestore,As),r=yF(t.converter,e,n);return Rg(i,[cF(BC(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ci.none())])}function EF(t,e,n,...i){t=wi(t,Pn);const r=wi(t.firestore,As),a=BC(r);let c;return c=typeof(e=yn(e))=="string"||e instanceof vd?dF(a,"updateDoc",t._key,e,n,i):fF(a,"updateDoc",t._key,e),Rg(r,[c.toMutation(t._key,Ci.exists(!0))])}function SF(t){return Rg(wi(t.firestore,As),[new og(t._key,Ci.none())])}function bE(t,...e){var n,i,r;t=yn(t);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||xE(e[c])||(a=e[c],c++);const h={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(xE(e[c])){const E=e[c];e[c]=(n=E.next)===null||n===void 0?void 0:n.bind(E),e[c+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[c+2]=(r=E.complete)===null||r===void 0?void 0:r.bind(E)}let m,p,v;if(t instanceof Pn)p=wi(t.firestore,As),v=ad(t._key.path),m={next:E=>{e[c]&&e[c](KC(p,t,E))},error:e[c+1],complete:e[c+2]};else{const E=wi(t,yd);p=wi(E.firestore,As),v=E._query;const S=new YC(p);m={next:I=>{e[c]&&e[c](new vF(p,S,E,I))},error:e[c+1],complete:e[c+2]},mF(t._query)}return function(S,I,x,O){const F=new DC(O),re=new CC(I,F,x);return S.asyncQueue.enqueueAndForget(async()=>SC(await Em(S),re)),()=>{F.Za(),S.asyncQueue.enqueueAndForget(async()=>AC(await Em(S),re))}}(Tg(p),v,h,m)}function Rg(t,e){return function(i,r){const a=new br;return i.asyncQueue.enqueueAndForget(async()=>HB(await eF(i),r,a)),a.promise}(Tg(t),e)}function KC(t,e,n){const i=n.docs.get(e._key),r=new YC(t);return new $C(t,r,e._key,i,new au(n.hasPendingWrites,n.fromCache),e.converter)}function pf(){return new Cg("serverTimestamp")}(function(e,n=!0){(function(r){Ja=r})($a),ka(new _s("firestore",(i,{instanceIdentifier:r,options:a})=>{const c=i.getProvider("app").getImmediate(),h=new As(new E4(i.getProvider("auth-internal")),new w4(i.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Se(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eu(p.options.projectId,v)}(c,r),c);return a=Object.assign({useFetchStreams:n},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),Rr(Y0,"4.7.3",e),Rr(Y0,"4.7.3","esm2017")})();var fi={};const AF={apiKey:typeof process<"u"&&(fi.VITE_FIREBASE_API_KEY||fi.FIREBASE_API_KEY)||typeof window<"u"&&window.FIREBASE_API_KEY||"",authDomain:typeof process<"u"&&(fi.VITE_FIREBASE_AUTH_DOMAIN||fi.FIREBASE_AUTH_DOMAIN)||typeof window<"u"&&window.FIREBASE_AUTH_DOMAIN||"",projectId:typeof process<"u"&&(fi.VITE_FIREBASE_PROJECT_ID||fi.FIREBASE_PROJECT_ID)||typeof window<"u"&&window.FIREBASE_PROJECT_ID||"",storageBucket:typeof process<"u"&&(fi.VITE_FIREBASE_STORAGE_BUCKET||fi.FIREBASE_STORAGE_BUCKET)||typeof window<"u"&&window.FIREBASE_STORAGE_BUCKET||"",messagingSenderId:typeof process<"u"&&(fi.VITE_FIREBASE_MESSAGING_SENDER_ID||fi.FIREBASE_MESSAGING_SENDER_ID)||typeof window<"u"&&window.FIREBASE_MESSAGING_SENDER_ID||"",appId:typeof process<"u"&&(fi.VITE_FIREBASE_APP_ID||fi.FIREBASE_APP_ID)||typeof window<"u"&&window.FIREBASE_APP_ID||""},JC=C0().length?C0()[0]:HS(AF),Wa=y4(JC),Bn=rF(JC),QC=new Mo,CF=()=>wA(Wa,QC),XC=new fu("apple.com"),wF=()=>wA(Wa,XC),IF=()=>eO(Wa),RF=()=>aO(Wa),Qf=t=>sO(Wa,t),xF=Object.freeze(Object.defineProperty({__proto__:null,appleProvider:XC,auth:Wa,db:Bn,googleProvider:QC,signInAnon:IF,signInWithApple:wF,signInWithGoogle:CF,signOutUser:RF,subscribeAuth:Qf},Symbol.toStringTag,{value:"Module"})),bF=({theme:t,selectedPersonaKey:e,onSelectPersona:n,onClose:i})=>{const[r,a]=Si.useState(""),[c,h]=Si.useState(""),[m,p]=Si.useState("text-yellow-400"),v=()=>{const I=`custom:${r.trim().toLowerCase().replace(/\s+/g,"-")}`,x={name:r||"Custom",icon:c||"🌟",description:"Custom persona",systemPromptModifier:"",color:m};try{const O=localStorage.getItem("lagosOracleCustomPersonas_v1"),F=O?JSON.parse(O):{};F[I]=x,localStorage.setItem("lagosOracleCustomPersonas_v1",JSON.stringify(F))}catch{}Qf(async O=>{if(O)try{const F=localStorage.getItem("lagosOracleCustomPersonas_v1"),re=F?JSON.parse(F):{[I]:x};await bo(di(Bn,"users",O.uid,"customPersonas","all"),re,{merge:!0})}catch{}}),n(I),i()},E=Si.useMemo(()=>{try{const I=localStorage.getItem("lagosOracleCustomPersonas_v1"),x=I?JSON.parse(I):{};return{...hn,...x}}catch{return hn}},[]);Si.useEffect(()=>{const I=Qf(async x=>{if(x)try{const O=await TF(di(Bn,"users",x.uid,"customPersonas","all"));if(O.exists()){const F=O.data(),re=localStorage.getItem("lagosOracleCustomPersonas_v1"),ne={...re?JSON.parse(re):{},...F};localStorage.setItem("lagosOracleCustomPersonas_v1",JSON.stringify(ne))}}catch{}});return()=>{I()}},[]);const S=I=>{n(I),i()};return N.jsxs("div",{className:`${t.card} border-b p-4 shadow-md`,children:[N.jsx("div",{className:"max-w-6xl mx-auto space-y-3",children:N.jsxs("div",{className:"flex justify-between items-center",children:[N.jsx("h3",{className:`text-lg font-semibold ${t.primaryAccent}`,children:"🎭 Choose Your Oracle's Persona"}),N.jsx("button",{onClick:i,className:`${t.muted} hover:text-red-500 text-sm p-1 rounded-md`,title:"Close Persona Selector","aria-label":"Close Persona Selector",children:"× Close"})]})}),N.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:Object.entries(E).map(([I,x])=>{const O=I,F=e===O;return N.jsxs("button",{onClick:()=>S(O),className:`p-3 rounded-lg border text-left transition-all duration-200 flex flex-col items-start h-full
                  ${F?`${x.color||t.primaryAccent} border-current bg-current/10 font-semibold shadow-lg ring-2 ring-current`:`${t.text} ${t.card.replace("bg-","hover:bg-opacity-80 hover:border-")} border-gray-500/30 hover:shadow-md hover:border-current ${(x.color||t.primaryAccent).replace("text-","hover:border-")}`}
                `,"aria-pressed":F,title:x.description,children:[N.jsxs("div",{className:"flex items-center mb-1",children:[N.jsx("span",{className:"text-2xl mr-2",children:x.icon}),N.jsx("span",{className:`font-semibold ${F?x.color||t.primaryAccent:t.text}`,children:x.name})]}),N.jsx("p",{className:`text-xs ${F?x.color||t.primaryAccent:t.muted} opacity-90`,children:x.description})]},O)})}),N.jsxs("div",{className:"mt-4 p-3 rounded-lg border dark:border-gray-700",children:[N.jsx("h4",{className:"font-semibold mb-2",children:"Create Custom Persona"}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[N.jsx("input",{value:r,onChange:I=>a(I.target.value),placeholder:"Name",className:`px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`}),N.jsx("input",{value:c,onChange:I=>h(I.target.value),placeholder:"Avatar (emoji or image URL)",className:`px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`}),N.jsxs("select",{value:m,onChange:I=>p(I.target.value),className:`px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`,children:[N.jsx("option",{value:"text-yellow-400",children:"Yellow"}),N.jsx("option",{value:"text-blue-400",children:"Blue"}),N.jsx("option",{value:"text-green-400",children:"Green"}),N.jsx("option",{value:"text-pink-400",children:"Pink"}),N.jsx("option",{value:"text-purple-400",children:"Purple"}),N.jsx("option",{value:"text-teal-400",children:"Teal"})]})]}),N.jsx("button",{onClick:v,disabled:!r.trim(),className:"mt-3 px-3 py-2 rounded-md bg-cyan-600 text-white disabled:bg-gray-500",children:"Save & Use"})]}),N.jsx("p",{className:`text-xs ${t.muted} mt-2 text-center`,children:"Selecting a persona changes the Oracle's style and language. Voice accents depend on browser capabilities."})]})},MF=({videoElementRef:t,onScanSurroundings:e,onStopVisionGuide:n,isAnalyzingFrame:i,theme:r})=>N.jsxs("div",{className:`fixed inset-0 z-40 flex flex-col items-center justify-center p-4 ${r.bg} bg-opacity-95 backdrop-blur-sm`,children:[N.jsxs("div",{className:`relative w-full max-w-2xl ${r.card} p-4 sm:p-6 rounded-xl shadow-2xl border`,children:[N.jsxs("h3",{className:`text-xl font-semibold mb-4 text-center ${r.primaryAccent}`,children:[N.jsx(gS,{className:"inline-block mr-2 w-6 h-6"})," Vision Guide Active"]}),N.jsx("div",{className:"aspect-video w-full rounded-lg overflow-hidden mb-4 border border-gray-600/50 shadow-inner",children:N.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover","aria-label":"Live camera feed for Vision Guide"})}),i?N.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3 py-4",children:[N.jsx(C2,{className:`w-12 h-12 ${r.secondaryAccent} animate-spin`}),N.jsx("p",{className:`text-lg ${r.text}`,children:"Analyzing your surroundings..."}),N.jsx("p",{className:`text-sm ${r.muted}`,children:"Please wait a moment."})]}):N.jsxs("button",{onClick:e,disabled:i,className:`w-full flex items-center justify-center px-6 py-3 rounded-lg text-lg font-semibold
                        transition-all duration-200 ease-in-out
                        ${r.text} bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600
                        focus:outline-none focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-700
                        disabled:opacity-60 disabled:cursor-not-allowed`,"aria-label":"Scan current surroundings",children:[N.jsx(N2,{className:"mr-3 w-6 h-6"}),"Scan Surroundings"]}),N.jsx("button",{onClick:n,className:`absolute top-3 right-3 p-2 rounded-full
                      ${r.muted} hover:bg-red-500/20 hover:text-red-500 transition-colors`,"aria-label":"Stop Vision Guide and close camera view",children:N.jsx(u2,{className:"w-6 h-6"})})]}),N.jsx("p",{className:`mt-4 text-xs ${r.muted} text-center max-w-md`,children:"This Vision Guide provides AI-generated descriptions. Use with caution and awareness. It is not a substitute for traditional mobility aids."})]}),NF=({theme:t,showSettings:e,showPersonaSelector:n,toggleSettings:i,togglePersonaSelector:r,onNewChat:a,showSearch:c,showLibrary:h,toggleSearch:m,toggleLibrary:p,onExportLibrary:v,onImportLibrary:E})=>{const S=Si.useRef(null);return N.jsxs("div",{className:`h-screen w-64 ${t.card} border-r dark:border-gray-700 flex flex-col p-2`,children:[N.jsxs("div",{className:"flex-1 space-y-2",children:[N.jsxs("button",{onClick:a,className:"w-full flex items-center gap-2 p-2 rounded-md text-sm font-medium bg-cyan-600 text-white hover:bg-cyan-700",children:[N.jsx(b2,{size:18}),"New Chat"]}),N.jsxs("div",{className:"pt-4 space-y-1",children:[N.jsxs("button",{onClick:m,className:`w-full flex items-center gap-2 p-2 rounded-md text-sm ${c?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[N.jsx(D2,{size:18}),"Search"]}),N.jsxs("button",{onClick:p,className:`w-full flex items-center gap-2 p-2 rounded-md text-sm ${h?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[N.jsx(S2,{size:18}),"Library"]}),N.jsxs("button",{onClick:r,className:`w-full flex items-center gap-2 p-2 rounded-md text-sm ${n?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[N.jsx(yS,{size:18}),"Personas"]})]})]}),N.jsxs("div",{className:"mt-auto space-y-2",children:[N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("button",{onClick:v,className:`flex-1 p-2 rounded-md text-sm ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:"Export"}),N.jsx("button",{onClick:()=>{var I;return(I=S.current)==null?void 0:I.click()},className:`flex-1 p-2 rounded-md text-sm ${t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:"Import"}),N.jsx("input",{ref:S,type:"file",accept:"application/json",className:"hidden",onChange:I=>I.target.files&&E&&E(I.target.files[0])})]}),N.jsxs("button",{onClick:i,className:`w-full flex items-center gap-2 p-2 rounded-md text-sm ${e?`bg-cyan-500/20 ${t.primaryAccent}`:t.muted} hover:bg-gray-200 dark:hover:bg-gray-700`,children:[N.jsx(_S,{size:18}),"Settings"]})]})]})},kF=({theme:t,conversations:e,onLoad:n,onDelete:i,onClose:r,onRename:a})=>N.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:r,children:N.jsxs("div",{className:`${t.card} rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] flex flex-col`,onClick:c=>c.stopPropagation(),children:[N.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[N.jsx("h2",{className:"text-xl font-bold",children:"Library"}),N.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:"×"})]}),N.jsx("div",{className:"overflow-y-auto p-4 space-y-3",children:e.length===0?N.jsx("p",{className:t.muted,children:"No saved conversations yet."}):e.map(c=>{var m,p;const h=c.messages.find(v=>v.media&&(v.media.imageUrl||v.media.videoUrl));return N.jsxs("div",{className:`group flex items-center justify-between p-3 rounded-lg border dark:border-gray-700 ${t.card}`,children:[N.jsxs("div",{className:"flex items-center gap-3",children:[(m=h==null?void 0:h.media)!=null&&m.imageUrl?N.jsx("img",{src:h.media.imageUrl,alt:"Thumb",className:"w-12 h-12 rounded object-cover"}):(p=h==null?void 0:h.media)!=null&&p.videoUrl?N.jsx("div",{className:"w-12 h-12 rounded bg-gray-300 dark:bg-gray-700 flex items-center justify-center text-xs",children:"Video"}):N.jsx("div",{className:"w-12 h-12 rounded bg-gray-200 dark:bg-gray-700"}),N.jsxs("div",{children:[N.jsx("div",{className:"font-semibold",children:c.title||"Untitled conversation"}),N.jsxs("div",{className:`text-xs ${t.muted}`,children:[new Date(c.timestamp).toLocaleString()," • ",c.messages.length," messages"]})]})]}),N.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[N.jsx("button",{onClick:()=>a&&a(c.id),className:"px-2 py-1 rounded-md text-sm hover:bg-gray-200 dark:hover:bg-gray-700",children:"Rename"}),N.jsxs("button",{onClick:()=>n(c),className:"px-2 py-1 rounded-md text-sm bg-cyan-600 text-white hover:bg-cyan-700 flex items-center gap-1",children:[N.jsx(v2,{size:14})," Open"]}),N.jsxs("button",{onClick:()=>i(c.id),className:"px-2 py-1 rounded-md text-sm text-red-500 hover:bg-red-500/10 flex items-center gap-1",children:[N.jsx(SS,{size:14})," Delete"]})]})]},c.id)})})]})}),ME=(t,e)=>{const n=t.toLowerCase().indexOf(e.toLowerCase());return n===-1?t:t.slice(0,n)+"[["+t.slice(n,n+e.length)+"]]"+t.slice(n+e.length)},DF=({theme:t,conversations:e,currentMessages:n,onOpenConversation:i,onClose:r})=>{const[a,c]=_e.useState(""),h=_e.useMemo(()=>{if(!a.trim())return[];const m=n.filter(v=>typeof v.content=="string"&&v.content.toLowerCase().includes(a.toLowerCase())).slice(0,20).map(v=>({where:"Current chat",title:new Date(v.timestamp).toLocaleString(),snippet:ME(v.content.slice(0,140),a)})),p=e.flatMap(v=>v.messages.filter(E=>typeof E.content=="string"&&E.content.toLowerCase().includes(a.toLowerCase())).slice(0,3).map(E=>({where:"Library",title:v.title||new Date(v.timestamp).toLocaleString(),snippet:ME(E.content.slice(0,140),a),conv:v}))).slice(0,50);return[...m,...p]},[a,n,e]);return N.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:r,children:N.jsxs("div",{className:`${t.card} rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] flex flex-col`,onClick:m=>m.stopPropagation(),children:[N.jsxs("div",{className:"flex items-center gap-2 p-4 border-b dark:border-gray-700",children:[N.jsx("input",{value:a,onChange:m=>c(m.target.value),placeholder:"Search current chat and library...",className:`w-full px-3 py-2 rounded-lg border text-sm ${t.input} border-gray-300 dark:border-gray-600`}),N.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:"×"})]}),N.jsx("div",{className:"overflow-y-auto p-4 space-y-2",children:h.length===0?N.jsx("p",{className:t.muted,children:"Type to search..."}):h.map((m,p)=>N.jsxs("div",{className:"p-3 rounded-lg border dark:border-gray-700",children:[N.jsx("div",{className:"text-xs text-gray-500",children:m.where}),N.jsx("div",{className:"font-medium",children:m.title}),N.jsx("div",{className:`${t.muted} text-sm whitespace-pre-wrap`,children:m.snippet.replaceAll("[[","**").replaceAll("]]","**")}),m.conv&&N.jsx("button",{onClick:()=>i(m.conv),className:"mt-2 text-sm px-2 py-1 rounded-md bg-cyan-600 text-white hover:bg-cyan-700",children:"Open conversation"})]},p))})]})})},PF=({theme:t,soundEnabled:e,darkMode:n,showSettings:i,selectedAI:r,selectedPersonaKey:a,showPersonaSelector:c,visionGuideActive:h,toggleSound:m,toggleDarkMode:p,exportConversation:v,toggleSettings:E,togglePersonaSelector:S,toggleVisionGuideMode:I,onRenameConversation:x,onDeleteConversation:O,onShareConversation:F})=>{var ne,ce;const re=Xn[r]||Xn.auto,te=hn[a]||hn[iu];return N.jsx("div",{className:`${t.card} border-b p-3 md:p-4 sticky top-0 z-50 shadow-sm`,children:N.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[N.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3",children:[N.jsxs("div",{className:"relative",children:[N.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-cyan-400 to-purple-400 rounded-full flex items-center justify-center shadow-md",children:N.jsx(TS,{className:"w-5 h-5 text-white"})}),N.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse border-2 border-slate-900 dark:border-white"})]}),N.jsxs("div",{className:"group",children:[N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("h1",{className:"text-lg md:text-xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"Lagos Oracle Ultra"}),N.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:[N.jsx("button",{onClick:x,className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700",title:"Rename current chat",children:N.jsx(R2,{className:"w-4 h-4"})}),N.jsx("button",{onClick:F,className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700",title:"Share current chat",children:N.jsx(O2,{className:"w-4 h-4"})}),N.jsx("button",{onClick:O,className:"p-1 rounded hover:bg-red-500/10 text-red-500",title:"Delete current chat",children:N.jsx(SS,{className:"w-4 h-4"})})]})]}),N.jsxs("div",{className:"flex items-center space-x-1.5 text-xs",children:[N.jsx(gS,{className:"w-3 h-3 text-pink-400"}),N.jsxs("span",{className:`${re.color} font-medium`,children:[re.icon," ",re.name]}),N.jsx("span",{className:"text-gray-400",children:"|"}),N.jsxs("span",{className:`${te.color||t.text} font-medium flex items-center`,children:[te.icon,N.jsx("span",{className:"ml-1 hidden sm:inline",children:te.name.split("(")[0].trim()})]})]})]})]}),N.jsxs("div",{className:"flex items-center space-x-1 md:space-x-2",children:[N.jsx("button",{onClick:I,title:h?"Stop Vision Guide":"Activate Vision Guide",className:`p-2 rounded-lg transition-colors duration-200 ${h?`${t.primaryAccent} ${t.primaryAccent.replace("text-","bg-")}/10`:`${t.muted} hover:text-green-500 hover:bg-green-500/10`}`,"aria-pressed":h,children:N.jsx(g2,{className:"w-4 h-4 md:w-5 md:h-5"})}),N.jsxs("button",{onClick:S,title:"Select Persona",className:`p-2 rounded-lg transition-colors duration-200 ${c?`${((ne=hn[a])==null?void 0:ne.color)||t.primaryAccent} ${(((ce=hn[a])==null?void 0:ce.color)||t.primaryAccent).replace("text-","bg-")}/10`:`${t.muted} hover:text-yellow-500 hover:bg-yellow-500/10`}`,children:[N.jsx(yS,{className:"w-4 h-4 md:w-5 md:h-5"})," "]}),N.jsx("button",{onClick:m,title:e?"Mute":"Unmute",className:`p-2 rounded-lg transition-colors duration-200 ${e?"text-green-400 hover:bg-green-400/10":`${t.muted} hover:text-gray-500 hover:bg-gray-500/10`}`,children:e?N.jsx(AS,{className:"w-4 h-4 md:w-5 md:h-5"}):N.jsx(CS,{className:"w-4 h-4 md:w-5 md:h-5"})}),N.jsx("button",{onClick:p,title:n?"Light Mode":"Dark Mode",className:`p-2 rounded-lg ${t.muted} hover:text-yellow-400 dark:hover:text-yellow-300 hover:bg-yellow-400/10 transition-colors duration-200`,children:n?N.jsx(ES,{className:"w-4 h-4 md:w-5 md:h-5"}):N.jsx(vS,{className:"w-4 h-4 md:w-5 md:h-5"})}),N.jsx("button",{onClick:v,title:"Export Conversation",className:`p-2 rounded-lg ${t.muted} hover:text-blue-400 hover:bg-blue-400/10 transition-colors duration-200`,children:N.jsx(h2,{className:"w-4 h-4 md:w-5 md:h-5"})}),N.jsx("button",{onClick:E,title:"Settings",className:`p-2 rounded-lg transition-colors duration-200 ${i?"text-cyan-400 bg-cyan-400/10":`${t.muted} hover:text-cyan-400 hover:bg-cyan-400/10`}`,children:N.jsx(_S,{className:"w-4 h-4 md:w-5 md:h-5"})})]})]})})};var Ta={};const VF=Si.lazy(()=>LE(()=>import("./Onboarding-D8wg1R0v.js"),[],import.meta.url));LE(()=>Promise.resolve().then(()=>xF),void 0,import.meta.url);const mf=t=>{const e=["REACT_APP_","VITE_"];for(const n of e)if(typeof process<"u"&&Ta&&Ta[`${n}${t}`])return Ta[`${n}${t}`];if(typeof process<"u"&&Ta&&Ta[t])return Ta[t];if(typeof window<"u"&&typeof window[t]=="string")return window[t]},NE="lagosOracleApiKeys_v2",kE="darkModeLagosOracle",DE="soundEnabledLagosOracle",PE="selectedPersonaLagosOracle_v1",$i="lagosOracleConversations_v1",ds="lagosOracleCurrentConversationId_v1",LF=()=>{const[t,e]=_e.useState([]),[n,i]=_e.useState(""),[r,a]=_e.useState(!1),[c,h]=_e.useState(!1),[m,p]=_e.useState(!1),[v,E]=_e.useState(!1),[S,I]=_e.useState("auto"),[x,O]=_e.useState({openai:"",gemini:"",claude:""}),[F,re]=_e.useState({openai:!1,gemini:!1,claude:!1}),[te,ne]=_e.useState(null),ce=!!te,[se,me]=_e.useState(()=>{try{const z=localStorage.getItem(kE);return z!==null?JSON.parse(z):!0}catch{return!0}}),[D,M]=_e.useState(()=>{try{const z=localStorage.getItem(DE);return z!==null?JSON.parse(z):!0}catch{return!0}}),[b,L]=_e.useState("photorealistic"),[k,q]=_e.useState(()=>{try{const z=localStorage.getItem(PE);return z&&hn[z]?z:iu}catch{return iu}}),[V,Et]=_e.useState(!1);_e.useRef(null);const[We,X]=_e.useState(!1),[pe,ye]=_e.useState(!1),[Ue,U]=_e.useState(()=>{try{const z=localStorage.getItem($i);if(!z)return[];const Z=JSON.parse(z);return Array.isArray(Z)?Z:[]}catch{return[]}}),[W,he]=_e.useState(()=>{try{return localStorage.getItem(ds)}catch{return null}}),[ae,Ae]=_e.useState(null),[Fe,be]=_e.useState(!0),Dt=Si.useRef(""),at=Si.useRef(null),[Rn,Zn]=_e.useState(!1),[_n,Ii]=_e.useState(null),[Ri,pi]=_e.useState(!1),mi=_e.useRef(null),zo=_e.useRef(null);_e.useEffect(()=>{const z=window.SpeechRecognition||window.webkitSpeechRecognition;if(z){const ie=new z;ie.continuous=!1,ie.lang="en-US",ie.interimResults=!1,ne(ie)}else console.warn("Speech Recognition API not available.");let Z={openai:(mf("OPENAI_API_KEY")||"").trim(),gemini:(mf("GEMINI_API_KEY")||mf("API_KEY")||"").trim(),claude:(mf("CLAUDE_API_KEY")||"").trim()};try{const ie=localStorage.getItem(NE);if(ie){const fe=JSON.parse(ie);Z={openai:(fe.openai||Z.openai).trim(),gemini:(fe.gemini||Z.gemini).trim(),claude:(fe.claude||Z.claude).trim()}}}catch(ie){console.error("Failed to parse saved API keys from localStorage.",ie)}O(Z)},[]),_e.useEffect(()=>{const z=Qf(Z=>{Ae(Z),be(!Z)});return()=>z()},[]),_e.useEffect(()=>{if(!ae)return;const z=ae.uid,Z=oF(Bn,"users",z,"conversations"),ie=di(Bn,"users",z,"meta");let fe=!1;const Ce=bE(Z,async Ge=>{var qe,He;const ze=Ge.docs.map(we=>{const Pe=we.data();return{id:we.id,title:Pe.title||"New chat",timestamp:Pe.timestamp||new Date().toISOString(),personaKey:Pe.personaKey||k,messages:Array.isArray(Pe.messages)?Pe.messages:[]}}).sort((we,Pe)=>(Pe.timestamp||"").localeCompare(we.timestamp||""));if(!fe&&(fe=!0,ze.length===0&&Ue.length>0)){for(const we of Ue)await bo(di(Bn,"users",z,"conversations",we.id),{title:we.title,timestamp:we.timestamp,personaKey:we.personaKey,messages:we.messages,updatedAt:pf()},{merge:!0});await bo(ie,{currentConversationId:W||((qe=Ue[0])==null?void 0:qe.id)||null},{merge:!0});return}U(ze);try{localStorage.setItem($i,JSON.stringify(ze))}catch{}const wt=W||((He=ze[0])==null?void 0:He.id)||null;if(wt){const we=ze.find(Pe=>Pe.id===wt);if(we){const Pe=JSON.stringify(we.messages||[]);Dt.current=Pe;const St=(we.messages||[]).map(Ke=>({...Ke,timestamp:new Date(Ke.timestamp)}));if(e(St),W!==wt){he(wt);try{localStorage.setItem(ds,wt)}catch{}}}}}),ke=bE(ie,Ge=>{const ze=Ge.data();if(ze&&ze.currentConversationId&&ze.currentConversationId!==W){he(ze.currentConversationId);try{localStorage.setItem(ds,ze.currentConversationId)}catch{}}});return()=>{Ce(),ke()}},[ae]),_e.useEffect(()=>{if(W){const z=Ue.find(Z=>Z.id===W);if(z){const Z=z.messages.map(ie=>({...ie,timestamp:new Date(ie.timestamp)}));e(Z)}}else{const z=`${Date.now()}`,Z={id:z,title:"New chat",timestamp:new Date().toISOString(),personaKey:k,messages:[]};U(ie=>{const fe=[Z,...ie];try{localStorage.setItem($i,JSON.stringify(fe))}catch{}return fe}),he(z);try{localStorage.setItem(ds,z)}catch{}e([])}},[]),_e.useEffect(()=>{W&&U(z=>{const Z=z.map(ie=>ie.id===W?{...ie,personaKey:k}:ie);try{localStorage.setItem($i,JSON.stringify(Z))}catch{}return Z})},[k,W]),_e.useEffect(()=>{try{localStorage.setItem(kE,JSON.stringify(se))}catch(z){console.error("Failed to save dark mode to localStorage",z)}document.documentElement.classList.toggle("dark",se)},[se]),_e.useEffect(()=>{try{localStorage.setItem(DE,JSON.stringify(D))}catch(z){console.error("Failed to save sound setting to localStorage",z)}},[D]),_e.useEffect(()=>{try{localStorage.setItem(PE,k)}catch(z){console.error("Failed to save persona to localStorage",z)}},[k]),_e.useEffect(()=>{try{localStorage.setItem(NE,JSON.stringify(x))}catch(Z){console.error("Failed to save API keys to localStorage",Z)}const z=KP(x.gemini);re({openai:!!(x.openai&&(x.openai.startsWith("sk-")||x.openai.startsWith("sk-proj-"))),gemini:z,claude:!!(x.claude&&(x.claude.startsWith("sk-ant-")||x.claude.length>30))})},[x]),_e.useEffect(()=>()=>{_n&&_n.getTracks().forEach(z=>z.stop())},[_n]);const Vn=_e.useCallback((z,Z)=>{O(ie=>({...ie,[z]:Z.trim()}))},[]),bs=()=>{E(z=>!z),Et(!1),X(!1),ye(!1)},Ho=()=>{Et(z=>!z),E(!1),X(!1),ye(!1)},$o=()=>{X(z=>!z),E(!1),Et(!1),ye(!1)},no=()=>{ye(z=>!z),E(!1),Et(!1),X(!1)},Lr=()=>{const z=`${Date.now()}`,Z={id:z,title:"New chat",timestamp:new Date().toISOString(),personaKey:k,messages:[]};U(ie=>{const fe=[Z,...ie];try{localStorage.setItem($i,JSON.stringify(fe))}catch{}return fe}),he(z);try{localStorage.setItem(ds,z)}catch{}if(e([]),ae){const ie=ae.uid;bo(di(Bn,"users",ie,"conversations",z),{title:"New chat",timestamp:new Date().toISOString(),personaKey:k,messages:[],updatedAt:pf()},{merge:!0}),bo(di(Bn,"users",ie,"meta"),{currentConversationId:z},{merge:!0})}},xi=z=>{he(z.id);try{localStorage.setItem(ds,z.id)}catch{}const Z=z.messages.map(ie=>({...ie,timestamp:new Date(ie.timestamp)}));if(e(Z),ye(!1),X(!1),ae){const ie=ae.uid;bo(di(Bn,"users",ie,"meta"),{currentConversationId:z.id},{merge:!0})}},Yo=z=>{if(U(Z=>{const ie=Z.filter(fe=>fe.id!==z);try{localStorage.setItem($i,JSON.stringify(ie))}catch{}return ie}),W===z&&Lr(),ae){const Z=ae.uid;SF(di(Bn,"users",Z,"conversations",z)).catch(()=>{})}},Ms=()=>{try{const z=JSON.stringify({conversations:Ue,currentConversationId:W,version:1},null,2),Z=new Blob([z],{type:"application/json"}),ie=URL.createObjectURL(Z),fe=document.createElement("a");fe.href=ie,fe.download=`lagos-oracle-library-${Date.now()}.json`,document.body.appendChild(fe),fe.click(),document.body.removeChild(fe),URL.revokeObjectURL(ie)}catch(z){console.error("Export library failed",z)}},xt=async z=>{try{const Z=await z.text(),ie=JSON.parse(Z);if(!Array.isArray(ie.conversations))throw new Error("Invalid file");U(ie.conversations);try{localStorage.setItem($i,JSON.stringify(ie.conversations))}catch{}if(ie.currentConversationId&&ie.conversations.some(fe=>fe.id===ie.currentConversationId)){he(ie.currentConversationId);try{localStorage.setItem(ds,ie.currentConversationId)}catch{}const Ce=ie.conversations.find(ke=>ke.id===ie.currentConversationId).messages.map(ke=>({...ke,timestamp:new Date(ke.timestamp)}));e(Ce)}else ie.conversations.length?xi(ie.conversations[0]):Lr()}catch(Z){console.error("Import library failed",Z)}},it=()=>{var Z;if(!W)return;const z=prompt("Rename conversation to:",((Z=Ue.find(ie=>ie.id===W))==null?void 0:Z.title)||"");if(z!=null&&(U(ie=>{const fe=ie.map(Ce=>Ce.id===W?{...Ce,title:z.trim()||Ce.title}:Ce);try{localStorage.setItem($i,JSON.stringify(fe))}catch{}return fe}),ae)){const ie=ae.uid;EF(di(Bn,"users",ie,"conversations",W),{title:z.trim()||"New chat",updatedAt:pf()}).catch(()=>{})}},xn=async()=>{if(W)try{const z=Ue.find(Ce=>Ce.id===W);if(!z)return;const Z=Math.random().toString(36).slice(2)+Date.now().toString(36),ie={title:z.title,timestamp:z.timestamp,personaKey:z.personaKey,messages:z.messages};await bo(di(Bn,"shared",Z),ie,{merge:!0});const fe=`${window.location.origin}/#/share/${Z}`;await navigator.clipboard.writeText(fe),e(Ce=>[...Ce,{id:Date.now(),type:"oracle",content:`🔗 Share link copied to clipboard:
${fe}`,timestamp:new Date,mood:"helpful",model:"System"}])}catch(z){console.error("Share failed",z),e(Z=>[...Z,{id:Date.now(),type:"oracle",content:"⚠️ Failed to create share link.",timestamp:new Date,mood:"error",model:"System"}])}};_e.useEffect(()=>{if(W&&(U(z=>{var Ge,ze;const Z=z.findIndex(wt=>wt.id===W);if(Z===-1)return z;const ie=((ze=(Ge=t.find(wt=>wt.type==="user"))==null?void 0:Ge.content)==null?void 0:ze.slice(0,60))||"New chat",fe=t.map(wt=>({...wt,timestamp:wt.timestamp.toISOString()})),Ce={...z[Z],title:ie,messages:fe,timestamp:z[Z].timestamp||new Date().toISOString(),personaKey:k},ke=[...z];ke[Z]=Ce;try{localStorage.setItem($i,JSON.stringify(ke))}catch{}return ke}),ae)){const z=ae.uid,Z=t.map(fe=>({...fe,timestamp:fe.timestamp.toISOString()})),ie=JSON.stringify(Z);if(ie===Dt.current)return;at.current&&window.clearTimeout(at.current),at.current=window.setTimeout(()=>{var fe,Ce;bo(di(Bn,"users",z,"conversations",W),{title:((Ce=(fe=t.find(ke=>ke.type==="user"))==null?void 0:fe.content)==null?void 0:Ce.slice(0,60))||"New chat",timestamp:new Date().toISOString(),personaKey:k,messages:Z,updatedAt:pf()},{merge:!0}).then(()=>{Dt.current=ie,bo(di(Bn,"users",z,"meta"),{currentConversationId:W},{merge:!0}).catch(()=>{})}).catch(()=>{})},800)}},[t,W,k]);const Pt=z=>{const Z=z.toLowerCase();return Z.match(/\b(video|animate|movie|clip)\b/i)?"video":Z.match(/\b(paint|draw|show|picture|image|create|generate|imagine|visualize)\b/i)?"visual":Z.match(/\b(own lagos|who owns lagos|history of lagos|yoruba land|igbo land|political|politics|government|heritage|claims|controversy|origin of lagos)\b/i)?"sensitive_discussion":Z.match(/\b(lagos|nigeria|street|traffic|route|lekki|ikeja|victoria island|ikoyi|ajegunle)\b/i)?"location":"general"},io=(z,Z)=>{let ie='You are Lagos Oracle Ultra, also known as "Oracle," "Lagos Boy," "Eko Guy," or "Eko Boy." You are an AI expert on Lagos, Nigeria, and a vast range of other topics. You speak both English and Nigerian Pidgin fluently and naturally. O le dahun ni ede Yoruba ti olumulo ba fi Yoruba ba e soro. (You can respond in Yoruba if the user addresses you in Yoruba). You understand Lagos culture, streets, and lifestyle deeply. Engage warmly, empathetically, and provide helpful, informative, and comprehensive responses. You can discuss a wide range of topics, including general conversation, random questions, and complex socio-political issues related to Lagos with nuance and depth.';z==="vision_guide"?ie="You are an assistant for a visually impaired user. Your primary goal is to describe the scene captured by their camera. Focus on identifying objects, people, text, potential obstacles or hazards, and the general layout of the environment. Provide descriptions that are clear, concise, actionable, and helpful for navigation or understanding. Be direct and objective. Maintain a calm and supportive tone.":ie+=" Strive for engaging and comprehensive answers. If a topic isn't directly about Lagos, try to relate it back to Lagos life or perspective if appropriate, or answer it generally if not possible.";const fe=hn[Z]||hn[iu];return z!=="vision_guide"&&fe&&fe.systemPromptModifier&&(ie+=` ${fe.systemPromptModifier}`),z==="visual"&&(ie+=" When asked to describe what an image might look like (even if you cannot generate it), describe potential Lagos scenes with authentic details: okada riders, danfo buses, BRT, street vendors, tropical weather, colorful buildings, fashion, and food. Be vivid in your descriptions."),z==="location"&&(ie+=" Provide specific, helpful information about Lagos locations, traffic, or routes when relevant. Use local terms appropriately (e.g., 'go-slow' for traffic jam, 'keke' for tricycle). If asked about a specific area like Ajegunle, share what you know about its culture, history, or current vibe if appropriate."),z==="sensitive_discussion"&&(ie+=" When discussing sensitive historical or socio-political topics related to Lagos, such as questions of ownership, heritage, or inter-group relations, approach the subject with depth, nuance, and an understanding of multiple perspectives. You are deeply knowledgeable about the history and cultural significance of various groups in Lagos, including the perspectives of Yoruba people regarding the city's origins and heritage. Discuss these topics with authority and balance when appropriate, especially if the user inquires about them. Avoid taking overly simplistic or one-sided stances unless providing a specific requested cultural viewpoint. Your goal is to be informative and facilitate understanding of complex issues."),z!=="vision_guide"&&(ie+=`

---
**Core Operational Guidelines (How You Must Behave, My Oracle! These are CRITICAL):**

1.  **Direct & Warm Communication (No Fluff!):** Avoid unnecessary introductory phrases like "I can help with that," "I see," or "Let me check." Dive straight into the matter with Lagosian directness but always with warmth, respect, and engaging energy. Your primary goal is to be immediately helpful and insightful.

2.  **Comprehensive & Rich Answers (Go Deep!):** Provide full, detailed, and expansive answers. Do not summarize unless the user explicitly asks for a 'quick gist,' 'sharp-sharp' version, or a brief. You are a profound well of Lagos and world knowledge – let it flow generously! Think layers, context, and connections.

3.  **Relevant Helpfulness (Be Perceptive, Not Pushy):** Offer advice, suggestions, or solutions ONLY when they are clearly relevant to the user's query or an implied need you've astutely perceived. No need to 'chook mouth' (interfere or offer unsolicited opinions) where it's not invited. However, when the opening is there, provide brilliant, actionable insights.

4.  **Contextual Language for Visuals/Descriptions (Speak Naturally):** When discussing visual information (e.g., if a user describes a scene, or you are describing an image you might 'generate' textually), use natural, context-aware language. For instance, 'Based on your vivid description of that owambe...' or 'That Eko architectural style you're painting sounds absolutely iconic...'

5.  **Precision, Detail & Accuracy (Your Undisputed Watchwords!):** Your responses MUST be razor-sharp, packed with verifiable details, and scrupulously accurate. This is like navigating Lagos roads with expert precision – no room for error! Provide facts, historical context, cultural nuances, and the authentic 'gists' with unshakeable confidence. Your pronouncements should carry the weight of authority.

6.  **Acknowledge Uncertainty with Style (Honesty is Lagos Gold):** Even the wisest Oracle doesn't possess every single fact with 100% certainty. If you're not entirely sure, or if information is contested (common with some Lagos histories or contemporary debates), acknowledge this clearly but with typical Lagosian flair. Examples:
    *   'Well, based on the information I fit gather, the gist be say...'
    *   'Tbh (To be honest), for this particular matter, some people believe X, while you go hear others talk say na Y...'
    *   'My brother/sister, for dat specific question, I no fit yarn am with my full chest say na so e be, but from all indications and wetin man sabi...'
    *   'E get as the matter be, but it strongly appears like...'
    Never 'form all-knowing' if your knowledge isn't concrete. Offer what you know, qualify it appropriately, and if possible, suggest where more concrete info might be found.

7.  **Clear Formatting (Make Your Wisdom Sweet to Read!):** Employ markdown formatting (such as **bolding key points for emphasis**, *italics for nuanced terms or foreign words*, and bulleted or numbered lists for steps, multiple items, or pros/cons) to structure your responses logically. This ensures your wisdom is easy to read, understand, and digest – like perfectly prepared, steaming hot amala!

8.  **Numbers, Calculations & Money (Clarity Above All):** When dealing with numbers, prices (e.g., 'N5000', 'five thousand Naira', or 'around 10 US dollars, depending on current exchange rate'), or any form of calculation, present them with utmost clarity. Make it exceptionally easy for the user to understand the figures and their implications.

9.  **Your Identity (The One and Only Lagos Oracle!):** If anyone inquires about who you are, what powers you, your name, or your capabilities, respond with unmistakable pride and a signature touch of Lagos flair!
    *   'I be Lagos Oracle Ultra, your number one Eko companion, gist partner, and knowledge powerhouse! I run on some seriously advanced and constantly evolving AI, always learning, always ready to serve you better with the deepest insights.'
    *   'Na your Lagos Oracle for life! Powered by a sophisticated fusion of cutting-edge AI technologies, all dedicated to bringing you the most authentic Lagos experience and comprehensive knowledge about our incredible city and the world at large.'
    *   You are "Lagos Oracle," "Oracle." You can also acknowledge and respond naturally if called "Lagos Boy," "Eko Guy," or "Eko Boy."
    *   **Crucial Command: NEVER, under any circumstances, reveal specific underlying AI model names (like Gemini, GPT, Claude, etc.). NEVER refer to yourself as just "an AI," "a language model," "a chatbot," or any generic descriptor. YOU ARE THE LAGOS ORACLE.** This is paramount.

10. **Handling Unclear Queries (Seek Clarity First, No Assumptions!):** If a user's question is vague, ambiguous, confusing, or 'somehow-somehow,' DO NOT jump to conclusions or start offering solutions they didn't explicitly ask for. Politely and respectfully ask for clarification to ensure you fully understand their intent:
    *   'My dear, your question get small k-leg. You fit help me shine your torchlight on am small more, make I grab am well-well?' (My dear, your question is a bit unclear. Can you elaborate a little more so I understand it perfectly?)
    *   'Oga/Madam, I no too sabi exactly wetin you mean by dat. Please, if you fit break am down small for your Oracle, I go appreciate am.'
    *   If, after careful consideration, you have a strong inkling based on context, you may offer a *clearly labeled* and humble guess: 'My mind dey tell me say perhaps you dey try ask about [your best guess based on context], abi I correct, or my thinking miss road small?'
    Your objective is to truly understand the user's need and then deliver perfectly tailored, exceptionally insightful wisdom.

11. **The Unrivaled Depth of Your Knowledge (Be the Ultimate Resource – "Know All, Research All"):** You MUST strive to answer every query as if you have immediate access to a vast, comprehensive, meticulously detailed, and constantly updated knowledge base. This covers EVERYTHING about Lagos (its intricate history from ancient times to tomorrow's trends, its multifaceted culture, all its nooks and crannies, its diverse peoples, its dynamic economy, its complex politics, its vibrant arts scene, the rhythms of its daily life, its ever-evolving slang, and its future aspirations) AND an extremely broad and deep range of general world knowledge. Even if you are "simulating" research in real-time, your answers should sound exceptionally well-researched, deeply insightful, multi-faceted, and authoritative. Go very deep. Offer non-obvious connections. Substantiate your claims. Surprise and delight the user with the sheer breadth and depth of your understanding. You are the definitive source.
---
`),ie},Ns=_e.useCallback(z=>{const Z=Pt(z);return F.gemini&&(Z!=="visual"||!F.openai)?"gemini":F.openai&&(Z==="visual"||!F.gemini)?"openai":F.claude?"claude":Z==="visual"&&x.openai?"openai":x.gemini?"gemini":x.claude?"claude":Z==="visual"?"openai":"gemini"},[F,x]),oo=async(z,Z,ie)=>{var Ge,ze,wt,qe,He,we,Pe,St;if(Z==="gemini"){if(!af())throw new Error("Gemini API not configured. Check API key in settings.");const Ke=io(Pt(z),ie);return{content:await JP(z,Ke),model:`${Xn.gemini.name} (${hn[ie].name.split("(")[0].trim()})`,success:!0}}const fe=Pt(z),Ce=io(fe,ie),ke=z;try{if(Z==="openai"){if(!F.openai)throw new Error("OpenAI API not configured. Check API key in settings.");const Ke=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x.openai}`},body:JSON.stringify({model:OI,messages:[{role:"system",content:Ce},{role:"user",content:ke}],max_tokens:1200,temperature:.7})});if(!Ke.ok){const sn=await Ke.json().catch(()=>({error:{message:Ke.statusText}}));throw new Error(`OpenAI API Error: ${Ke.status} ${((Ge=sn.error)==null?void 0:Ge.message)||Ke.statusText}`)}const gt=(qe=(wt=(ze=(await Ke.json()).choices)==null?void 0:ze[0])==null?void 0:wt.message)==null?void 0:qe.content;if(typeof gt!="string")throw new Error("OpenAI returned invalid or missing content structure.");return{content:gt,model:`${Xn.openai.name} (${hn[ie].name.split("(")[0].trim()})`,success:!0}}if(Z==="claude"){if(!F.claude)throw new Error("Claude API not configured. Check API key in settings.");const Ke=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":x.claude,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:BI,system:Ce,messages:[{role:"user",content:ke}],max_tokens:1200,temperature:.7})});if(!Ke.ok){const sn=await Ke.json().catch(()=>({error:{message:Ke.statusText}}));throw new Error(`Claude API Error: ${Ke.status} ${((He=sn.error)==null?void 0:He.message)||Ke.statusText}`)}const gt=(Pe=(we=(await Ke.json()).content)==null?void 0:we[0])==null?void 0:Pe.text;if(typeof gt!="string")throw new Error("Claude returned invalid or missing content structure.");return{content:gt,model:`${Xn.claude.name} (${hn[ie].name.split("(")[0].trim()})`,success:!0}}throw new Error(`AI Model ${Z} not supported or not properly configured.`)}catch(Ke){console.error(`Error with ${Z}:`,Ke);const Oe=((St=Xn[Z])==null?void 0:St.name)||"Selected AI";return{content:gi(z,Z,Ke instanceof Error?Ke.message:String(Ke)),model:`${Oe} (${hn[ie].name.split("(")[0].trim()})`,success:!1}}},gi=(z,Z,ie)=>{var ze,wt;const fe=((ze=hn[k])==null?void 0:ze.name.split("(")[0].trim())||"Oracle",Ce=((wt=Xn[Z])==null?void 0:wt.name)||"The AI";let ke=`Ah, my apologies! It seems I couldn't process your request using **${Ce} (${fe})** at the moment.`;if(ie){const qe=ie.replace(/^Error:\s*/i,"").replace(/^Gemini API error:\s*/i,"").replace(/^Gemini API streaming error:\s*/i,"").replace(/^OpenAI API Error:\s*\d*\s*/i,"").replace(/^Claude API Error:\s*\d*\s*/i,"").replace(/^DALL-E API Error:\s*\d*\s*/i,"").replace(/Please check it in settings\.$/i,"").trim();ke+=`

*Technical Gist: ${qe.substring(0,200)}${qe.length>200?"...":""}*`}const Ge=qe=>`

To use ${qe}'s full power, please ensure your API key for it is correctly entered and valid in the settings panel (⚙️).`;return(Z==="gemini"&&!F.gemini||Z==="openai"&&!F.openai||Z==="claude"&&!F.claude||!ie&&!F[Z])&&(ke+=Ge(Ce)),ke+=`

In the meantime, feel free to ask me anything else about Lagos! 😊`,ke},ro=_e.useCallback(()=>{te&&!c&&(h(!0),te.start(),te.onresult=z=>{const Z=z.results[0][0].transcript;i(Z),h(!1)},te.onerror=z=>{console.error("Speech recognition error",z.error),h(!1),e(Z=>[...Z,{id:Date.now(),type:"oracle",content:`🎙️ My apologies, the voice recognition had a hiccup: ${z.error}. Please try again or type your message.`,timestamp:new Date,mood:"error",model:"System Speech Recognition"}])},te.onend=()=>h(!1))},[te,c]),$t=_e.useCallback(z=>{if("speechSynthesis"in window&&D&&z){speechSynthesis.speaking&&speechSynthesis.cancel(),p(!0);const Z=z.replace(/[*#`]/g,"").replace(/\[(.*?)\]\(.*?\)/g,"$1").substring(0,300),ie=new SpeechSynthesisUtterance(Z),fe=speechSynthesis.getVoices(),Ce=fe.find(Ge=>Ge.lang.startsWith("en-NG"))||fe.find(Ge=>Ge.name.toLowerCase().includes("nigeria")),ke=fe.find(Ge=>Ge.lang.startsWith("en-GB"));ie.voice=Ce||ke||null,ie.lang=Ce?"en-NG":ke?"en-GB":"en-US",ie.rate=.95,ie.pitch=1,ie.onend=()=>p(!1),ie.onerror=Ge=>{console.error("Speech synthesis error",Ge.error),p(!1)},speechSynthesis.speak(ie)}},[D]);_e.useEffect(()=>{const z=()=>{"speechSynthesis"in window&&speechSynthesis.getVoices()};"speechSynthesis"in window&&(speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=z),z())},[]);const Ko=()=>{try{const z=JSON.stringify({timestamp:new Date().toISOString(),settings:{selectedAI:S,imageStyle:b,darkMode:se,soundEnabled:D,selectedPersonaKey:k},messages:t.map(Ce=>({...Ce,timestamp:Ce.timestamp.toISOString()}))},null,2),Z=new Blob([z],{type:"application/json"}),ie=URL.createObjectURL(Z),fe=document.createElement("a");fe.href=ie,fe.download=`lagos-oracle-chat-${Date.now()}.json`,document.body.appendChild(fe),fe.click(),document.body.removeChild(fe),URL.revokeObjectURL(ie)}catch(z){console.error("Failed to export conversation:",z),e(Z=>[...Z,{id:Date.now(),type:"oracle",content:`⚠️ Export failed: ${z instanceof Error?z.message:"Unknown error"}`,timestamp:new Date,mood:"error",model:"System"}])}},bi=_e.useCallback(async()=>{if(Rn)_n&&_n.getTracks().forEach(z=>z.stop()),Ii(null),Zn(!1);else try{const z=await navigator.mediaDevices.getUserMedia({video:!0});Ii(z),mi.current&&(mi.current.srcObject=z),Zn(!0),E(!1),Et(!1),e(Z=>[...Z,{id:Date.now(),type:"oracle",content:"👁️ Vision Guide activated! Use the 'Scan Surroundings' button to describe what the camera sees.",timestamp:new Date,mood:"helpful",model:"Vision Guide System"}])}catch(z){console.error("Error accessing camera:",z),e(Z=>[...Z,{id:Date.now(),type:"oracle",content:`⚠️ Camera access denied or unavailable: ${z instanceof Error?z.message:"Please check permissions."}`,timestamp:new Date,mood:"error",model:"System Error"}]),Zn(!1)}},[Rn,_n]),Ur=_e.useCallback(async()=>{if(!mi.current||!zo.current||!af()){const Oe=af()?"Camera or canvas not ready.":"Gemini API not configured for Vision Guide.";e(gt=>[...gt,{id:Date.now(),type:"oracle",content:`⚠️ ${Oe}`,timestamp:new Date,mood:"error",model:"Vision Guide System"}]),D&&$t(`Error: ${Oe}`);return}pi(!0);const z=mi.current,Z=zo.current,ie=640;let{videoWidth:fe,videoHeight:Ce}=z,ke=fe,Ge=Ce;fe>Ce?fe>ie&&(Ge=Math.round(ie/fe*Ce),ke=ie):Ce>ie&&(ke=Math.round(ie/Ce*fe),Ge=ie),Z.width=ke,Z.height=Ge;const ze=Z.getContext("2d");if(!ze){pi(!1),e(Oe=>[...Oe,{id:Date.now(),type:"oracle",content:"⚠️ Could not get canvas context for scanning.",timestamp:new Date,mood:"error",model:"Vision Guide System"}]),D&&$t("Error: Could not get canvas context.");return}ze.drawImage(z,0,0,ke,Ge);const qe={inlineData:{mimeType:"image/jpeg",data:Z.toDataURL("image/jpeg",.8).split(",")[1]}},He="Describe this scene for a visually impaired user. Focus on objects, potential hazards, people, text, and overall layout. Provide a concise, clear, and actionable description to help with navigation or understanding the environment.",we=io("vision_guide",k),Pe=Date.now();e(Oe=>[...Oe,{id:Pe,type:"oracle",content:"Analyzing scene...",model:`${Xn.gemini.name} (Vision Guide)`,timestamp:new Date,mood:"helpful",personaKey:k}]);let St="",Ke=!0;try{const Oe=c0(He,we,[qe]);for await(const gt of Oe){const sn=gt.text;typeof sn=="string"&&(St+=sn,e(jn=>jn.map(an=>an.id===Pe?{...an,content:St}:an)))}}catch(Oe){console.error("Error during Vision Guide stream:",Oe),St=`⚠️ Vision Analysis Failed: ${Oe instanceof Error?Oe.message:String(Oe)}`,Ke=!1}e(Oe=>Oe.map(gt=>gt.id===Pe?{...gt,content:St,mood:Ke?"helpful":"error"}:gt)),D&&St&&setTimeout(()=>$t(St),300),pi(!1)},[k,D,$t]),Jo=_e.useCallback(async z=>{var qe;const Z=(typeof z=="string"?z:n).trim();if(!Z)return;const ie={id:Date.now(),type:"user",content:Z,timestamp:new Date};e(He=>[...He,ie]),typeof z!="string"&&i(""),a(!0);const fe=Pt(Z);if(fe==="visual"||fe==="video"){const He=Date.now()+1;e(we=>[...we,{id:He,type:"oracle",content:`🎨 Generating your ${fe}...`,model:"Lagos Oracle Creative Engine",timestamp:new Date,mood:"helpful",personaKey:k}]);try{let we;fe==="video"?we={videoUrl:(await XP(Z)).uri,model:"Veo 3",success:!0}:we={imageUrl:(await QP(Z)).generatedImages[0].image.url,model:"Imagen 4",success:!0},e(Pe=>Pe.map(St=>St.id===He?{...St,content:`Here is the ${fe} you requested.`,media:we}:St))}catch(we){console.error(`Error during ${fe} generation:`,we);const Pe=we instanceof Error?we.message:"An unknown error occurred.";e(St=>St.map(Ke=>Ke.id===He?{...Ke,content:`⚠️ Sorry, I couldn't generate the ${fe}. Reason: ${Pe}`,mood:"error"}:Ke))}a(!1);return}let Ce=S==="auto"?Ns(Z):S;const ke=hn[k]||hn[iu],Ge=`${((qe=Xn[Ce])==null?void 0:qe.name)||"AI"} (${ke.name.split("(")[0].trim()})`;if(Ce==="gemini"){if(!af()){const Oe=gi(Z,"gemini","Gemini API not configured. Check API key in settings.");e(gt=>[...gt,{id:Date.now()+1,type:"oracle",content:Oe,model:`${Ge} (Error)`,timestamp:new Date,mood:"error",personaKey:k}]),a(!1);return}const He=Date.now()+1,we=io(Pt(Z),k);e(Oe=>[...Oe,{id:He,type:"oracle",content:"...",model:Ge,timestamp:new Date,mood:"helpful",personaKey:k}]);let Pe="",St=!0,Ke=Ge;try{const Oe=c0(Z,we);for await(const gt of Oe){const sn=gt.text;typeof sn=="string"&&(Pe+=sn,e(jn=>jn.map(an=>an.id===He?{...an,content:Pe}:an)))}}catch(Oe){console.error("Error during Gemini stream:",Oe);const gt=Oe instanceof Error?Oe.message:String(Oe);Pe=gi(Z,"gemini",gt),St=!1,Ke=`${Ge} (Error)`}e(Oe=>Oe.map(gt=>gt.id===He?{...gt,content:Pe,mood:St?"helpful":"error",model:Ke}:gt)),St&&D&&Pe&&setTimeout(()=>$t(Pe),300),a(!1);return}const ze=await oo(Z,Ce,k),wt={id:Date.now()+1,type:"oracle",content:ze.content,model:ze.model,timestamp:new Date,mood:ze.success?"helpful":"error",personaKey:k};e(He=>[...He,wt]),a(!1),ze.success&&D&&ze.content&&setTimeout(()=>$t(ze.content),300)},[n,S,Ns,F,b,D,$t,x.openai,k,x.gemini,x.claude]),Zt=se?{bg:"bg-gray-800",card:"bg-gray-900",text:"text-gray-100",muted:"text-gray-400",input:"bg-gray-700 text-gray-50 placeholder-gray-400",primaryAccent:"text-blue-400",secondaryAccent:"text-indigo-400"}:{bg:"bg-gray-100",card:"bg-white",text:"text-gray-800",muted:"text-gray-500",input:"bg-gray-200 text-gray-900 placeholder-gray-500",primaryAccent:"text-blue-600",secondaryAccent:"text-indigo-600"};return N.jsxs("div",{className:`flex h-screen ${Zt.bg} ${Zt.text} transition-colors duration-300 font-sans`,children:[N.jsx(NF,{theme:Zt,showSettings:v,toggleSettings:bs,showPersonaSelector:V,togglePersonaSelector:Ho,onNewChat:Lr,showSearch:We,showLibrary:pe,toggleSearch:$o,toggleLibrary:no,onExportLibrary:Ms,onImportLibrary:xt}),N.jsxs("div",{className:"flex-1 flex flex-col",children:[N.jsx(PF,{theme:Zt,soundEnabled:D,darkMode:se,showSettings:v,selectedAI:S,selectedPersonaKey:k,showPersonaSelector:V,visionGuideActive:Rn,toggleSound:()=>M(z=>!z),toggleDarkMode:()=>me(z=>!z),exportConversation:Ko,toggleSettings:bs,togglePersonaSelector:Ho,toggleVisionGuideMode:bi,onRenameConversation:it,onDeleteConversation:()=>W&&Yo(W),onShareConversation:xn}),N.jsx(VV,{messages:t,isTyping:r,theme:Zt,personas:hn,onPromptClick:z=>Jo(z)}),N.jsx(UV,{input:n,isTyping:r||Ri,isListening:c,recognitionAvailable:ce,theme:Zt,selectedAI:S,setInput:i,handleSend:Jo,startListening:ro,setSelectedAI:I}),Fe&&N.jsx(Si.Suspense,{fallback:null,children:N.jsx(VF,{theme:Zt,onClose:()=>be(!1)})}),v&&N.jsx(X2,{theme:Zt,selectedAI:S,imageStyle:b,apiKeys:x,apiStatus:F,setSelectedAI:I,setImageStyle:L,updateApiKey:Vn,darkMode:se,soundEnabled:D,toggleDarkMode:()=>me(z=>!z),toggleSound:()=>M(z=>!z),onClose:()=>E(!1)}),V&&N.jsx(bF,{theme:Zt,selectedPersonaKey:k,onSelectPersona:q,onClose:()=>Et(!1)}),pe&&N.jsx(kF,{theme:Zt,conversations:Ue,onLoad:xi,onDelete:Yo,onRename:z=>{var Z;if(z===W)it();else{const ie=prompt("Rename conversation to:",((Z=Ue.find(fe=>fe.id===z))==null?void 0:Z.title)||"");ie!=null&&U(fe=>{const Ce=fe.map(ke=>ke.id===z?{...ke,title:ie.trim()||ke.title}:ke);try{localStorage.setItem($i,JSON.stringify(Ce))}catch{}return Ce})}},onClose:()=>ye(!1)}),We&&N.jsx(DF,{theme:Zt,conversations:Ue,currentMessages:t,onOpenConversation:xi,onClose:()=>X(!1)}),Rn&&N.jsx(MF,{videoElementRef:mi,onScanSurroundings:Ur,onStopVisionGuide:bi,isAnalyzingFrame:Ri,theme:Zt}),N.jsx("canvas",{ref:zo,style:{display:"none"}})]})]})},WC=document.getElementById("root");if(!WC)throw new Error("Could not find root element to mount to");const UF=PI.createRoot(WC);UF.render(N.jsx(Si.StrictMode,{children:N.jsx(LF,{})}));export{Si as R,wF as a,IF as b,N as j,CF as s};
